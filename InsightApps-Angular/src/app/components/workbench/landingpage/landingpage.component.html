<div class="main-container container-fluid">
    <div class="main-demo main-demo-1 overflow-hidden reveal landing-top-header active" id="home" #home >
        <div class="container px-sm-0">
        <div class="row justify-content-center">
            <div class="col-xl-8 col-lg-6 pb-5 text-center my-auto animation-zidex pos-relative landing-main-heading">
                <h1 class="text- fw-bold tx-fixed-white mt-0">A quick and easy way to build your Business with <span class="text-primary">"Insightapps"</span></h1>
            </div>
        </div>
        </div>
    </div>

    <!-- <div class="card mt-3">
        <div class="col-xl-12 col-md-12  p-0 mb-2 border-bottom">
            <div class=" p-3 mb-2">
                <div class="row">
                    <div class="d-flex justify-content-between">
                        <h6 class="fw-bold mt-2">Recently Viewed</h6>
                         <div class="col-xl-3 p-0">
                                    <div class=" mb-2">
                                        <div class="card-body p-1 w-300">
                                            <div class="d-flex">
                                                <div class="input-group me-2 ">
                                                    <input type="text" class="form-control border-end-0" placeholder="Search ...">
                                                    <button type="button" aria-label="button" class="btn input-group-text btn-primary tx-fixed-white border-start-0">
                                                        <i class="fe fe-search" aria-hidden="true"></i>
                                                    </button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                    </div>
                    <div class="col-xxl-2 col-xl-2 col-lg-4 col-md-4">
                        <div class="position-relative img-shadow">
                            <a routerLink="/pages/extension/blog-details"><img src="./assets/images/Landingpage-images/recently-view/recent-1.jpg" alt=""></a>
                       </div>
                   </div>
                    <div class="col-xxl-2 col-xl-2 col-lg-4 col-md-4">
                        <div class="position-relative img-shadow">
                            <a routerLink="/pages/extension/blog-details"><img src="./assets/images/Landingpage-images/recently-view/recent-2.jpg" alt=""></a>
                       </div>
                   </div>
                    <div class="col-xxl-2 col-xl-2 col-lg-4 col-md-4">
                        <div class="position-relative img-shadow">
                            <a routerLink="/pages/extension/blog-details"><img src="./assets/images/Landingpage-images/recently-view/recent-3.jpg" alt=""></a>
                       </div>
                   </div>
                    <div class="col-xxl-2 col-xl-2 col-lg-4 col-md-4">
                        <div class="position-relative img-shadow">
                            <a routerLink="/pages/extension/blog-details"><img src="./assets/images/Landingpage-images/recently-view/recent-4.jpg" alt=""></a>
                       </div>
                   </div>
                    <div class="col-xxl-2 col-xl-2 col-lg-4 col-md-4">
                        <div class="position-relative img-shadow">
                            <a routerLink="/pages/extension/blog-details"><img src="./assets/images/Landingpage-images/recently-view/recent-1.jpg" alt=""></a>
                       </div>
                   </div>
                    <div class="col-xxl-2 col-xl-2 col-lg-4 col-md-4">
                        <div class="position-relative img-shadow">
                            <a routerLink="/pages/extension/blog-details"><img src="./assets/images/Landingpage-images/recently-view/recent-2.jpg" alt=""></a>
                       </div>
                   </div>
                </div>
            </div>
        </div>

        <div class="col-xl-12 col-md-12 p-0 mb-2 border-bottom">
            <div class=" p-3 mb-2">
                <div class="row">
                    <h6 class="fw-bold mb-3">Saved Dashboard</h6>
                    <div class="col-xxl-2 col-xl-2 col-lg-4 col-md-4">
                        <div class="position-relative img-shadow">
                            <a routerLink="/pages/extension/blog-details"><img src="./assets/images/Landingpage-images/recently-view/recent-5.jpg" alt=""></a>
                       </div>
                   </div>
                   <div class="col-xxl-2 col-xl-2 col-lg-4 col-md-4">
                       <div class="position-relative img-shadow">
                           <a routerLink="/pages/extension/blog-details"><img src="./assets/images/Landingpage-images/recently-view/recent-6.jpg" alt=""></a>
                       </div>
                      </div>
                      <div class="col-xxl-2 col-xl-2 col-lg-4 col-md-4">
                           <div class="position-relative img-shadow">
                            <a routerLink="/pages/extension/blog-details"><img src="./assets/images/Landingpage-images/recently-view/recent-7.jpg" alt=""></a>
                           </div>
                       </div>
                       <div class="col-xxl-2 col-xl-2 col-lg-4 col-md-4">
                        <div class="position-relative img-shadow">
                            <a routerLink="/pages/extension/blog-details"><img src="./assets/images/Landingpage-images/recently-view/recent-8.jpg" alt=""></a>
                        </div>
                       </div>
                       <div class="col-xxl-2 col-xl-2 col-lg-4 col-md-4">
                        <div class="position-relative img-shadow">
                            <a routerLink="/pages/extension/blog-details"><img src="./assets/images/Landingpage-images/recently-view/recent-3.jpg" alt=""></a>
                       </div>
                      </div>
                      <div class="col-xxl-2 col-xl-2 col-lg-4 col-md-4">
                        <div class="position-relative img-shadow">
                            <a routerLink="/pages/extension/blog-details"><img src="./assets/images/Landingpage-images/recently-view/recent-4.jpg" alt=""></a>
                       </div>
                   </div>
                </div>
            </div>
        </div>

        <div class="col-xl-12 col-md-12 p-0">
            <div class=" p-3">
                <div class="row">
                    <h6 class="fw-bold mb-3">Sample Dashboard</h6>
                    <div class="col-xxl-2 col-xl-2 col-lg-4 col-md-4">
                        <div class="position-relative img-shadow">
                            <a routerLink="/pages/extension/blog-details"><img src="./assets/images/Landingpage-images/recently-view/recent-2.jpg" alt=""></a>
                       </div>
                   </div>
                   <div class="col-xxl-2 col-xl-2 col-lg-4 col-md-4">
                       <div class="position-relative img-shadow">
                           <a routerLink="/pages/extension/blog-details"><img src="./assets/images/Landingpage-images/recently-view/recent-4.jpg" alt=""></a>
                       </div>
                      </div>
                      <div class="col-xxl-2 col-xl-2 col-lg-4 col-md-4">
                           <div class="position-relative img-shadow">
                            <a routerLink="/pages/extension/blog-details"><img src="./assets/images/Landingpage-images/recently-view/recent-1.jpg" alt=""></a>
                           </div>
                       </div>
                       <div class="col-xxl-2 col-xl-2 col-lg-4 col-md-4">
                        <div class="position-relative img-shadow">
                            <a routerLink="/pages/extension/blog-details"><img src="./assets/images/Landingpage-images/recently-view/recent-2.jpg" alt=""></a>
                        </div>
                       </div>
                       <div class="col-xxl-2 col-xl-2 col-lg-4 col-md-4">
                        <div class="position-relative img-shadow">
                            <a routerLink="/pages/extension/blog-details"><img src="./assets/images/Landingpage-images/recently-view/recent-3.jpg" alt=""></a>
                       </div>
                      </div>
                      <div class="col-xxl-2 col-xl-2 col-lg-4 col-md-4">
                        <div class="position-relative img-shadow">
                            <a routerLink="/pages/extension/blog-details"><img src="./assets/images/Landingpage-images/recently-view/recent-4.jpg" alt=""></a>
                       </div>
                   </div>
                </div>
            </div>
        </div>
    </div> -->
    
   
    <!-- ROW-1 OPEN-->
    <div class="col-lg-12 p-0 mt-3">
        <div class="landing-connect-search mb-3 ">
            <app-insights-button [buttonName]="' New Chart'" [classesList]="'btn btn-blue-light me-3'" [previledgeId]="17" [isBtn]="true"
            (btnClickEvent)="sheetsRoute()" [isIcon]="true" [faIconList]="'fa fa-plus'"></app-insights-button>
            <app-insights-button [buttonName]="'Connect To Database'" [classesList]="'btn btn-blue-light me-3'" [isIcon]="false" [previledgeId]="1" [isBtn]="true"
            (btnClickEvent)="newConnections()"></app-insights-button>
            <div class="view-card">
                <div class="input-group">
                    <input type="text" class="form-control border-end-0" [(ngModel)]="wholeSearch" (keyup)="totalSearch()" placeholder="Search ...">
                    <button type="button"  aria-label="button" class="btn input-group-text btn-primary tx-fixed-white border-start-0 ">
                        <i class="fe fe-search" aria-hidden="true"></i>
                    </button>
                </div>
            </div>
        </div>
    </div>
    <div class="row mt-1">
        <div class="col-xl-9">
           

            <div *ngIf="viewDashboardList" class="row">
                <div class="d-flex align-items-center justify-content-between border-bottom mb-3">
                    <h6 class="fw-bold mb-1">Saved Dashboard</h6>
                    <div class="view-card">
                        <!-- <a class="btn btn-blue-light mb-2 me-3" ><i class="fa fa-plus"></i> Dashboard</a> -->
                        @if(!showAllDasboards && savedDashboardList.length !== 0){
                            <a class="">
                                <span class="add-txt text-info card-title me-2 " (click)="showAllDasboards=!showAllDasboards">Show Less <i class="fa fa-angle-double-right"> </i></span>
                            </a>
                            } @if(showAllDasboards && savedDashboardList.length !== 0){
                            <a class="">
                                <span class="add-txt text-info card-title me-2" (click)="showAllDasboards=!showAllDasboards">View More <i class="fa fa-angle-double-right"> </i></span>
                            </a>
                        }
                    </div>
                </div>
                <div *ngIf="savedDashboardList.length === 0">
                    No Dashboard please CREATE ONE!
                </div>
                <ng-container *ngFor="let dashboardList of savedDashboardList;let i = index" >
                    <div *ngIf="i < 11" class="col-xxl-3 col-xl-3 col-lg-3 col-md-3">
                    <div *ngIf="showAllDasboards && i < 3" class="card img-shadow">
                        <img src="{{dashboardList.dashboard_image}}" class="card-img-top " alt="img">
                        <div class="card-body p-2 d-flex align-items-center justify-content-between" >
                          <div class="dashboard-card-title">
                            <h5 class="card-title   mb-1" ngbTooltip="{{dashboardList.dashboard_name}}"
                            (click)="viewDashboard(dashboardList.server_id,dashboardList.queryset_id,dashboardList.dashboard_id)" style="cursor: pointer;color: #05aff8;">
                             {{dashboardList.dashboard_name | slice:0:11}}</h5>
                            <p class="card-text fs-11 fw-300 ">Modified on {{dashboardList.Modified}} </p>
                          </div>
                          <div class="dashboard-option">
                            <div class="d-flex justify-content-end p-1" ngbDropdown>
                                <a href="javascript:void(0);" data-bs-toggle="dropdown" role="button" ngbDropdownToggle
                                    aria-haspopup="true" aria-expanded="false" class=""><i
                                        class="fe fe-more-vertical fs-18 text-body-secondary"></i>
                                </a>
                                <div class="dropdown-menu" ngbDropdownMenu>
                                    <app-insights-button [classesList]="'dropdown-item'" [previledgeId]="36" [isBtn]="false"
                                        [buttonName]="' View Dashboard'"
                                        (btnClickEvent)="viewDashboard(dashboardList.server_id,dashboardList.queryset_id,dashboardList.dashboard_id)"
                                        [faIconList]="'fe fe-upload'" [isIcon]="true"></app-insights-button>

                                        <a  class="dropdown-item" tabindex="0" (click)="viewPropertiesTab(dashboardList.dashboard_name,dashboardList.dashboard_id)" >
                                            <i class="fa fa-sliders me-2 d-inline-flex"></i> Properties</a>

                                    <app-insights-button [classesList]="'dropdown-item  btn btn-secondary-light'" [previledgeId]="35" [isBtn]="false"
                                        [buttonName]="' Delete'"
                                        (btnClickEvent)="deleteDashboard(dashboardList.server_id,dashboardList.queryset_id,dashboardList.dashboard_id)"
                                        [faIconList]="'fe fe-trash'" [isIcon]="true"></app-insights-button>
                                       
                                </div>
                            </div>
                          </div>
                        </div>
                        
                    </div>
                    <div *ngIf="!showAllDasboards && i < 11" class="card  img-shadow">
                        <img src="{{dashboardList.dashboard_image}}" class="card-img-top" alt="img">
                        <div class="card-body p-2 d-flex align-items-center justify-content-between" >
                          <div class="dashboard-card-title">
                            <h5 class="card-title   mb-1" ngbTooltip="{{dashboardList.dashboard_name}}"  (click)="viewDashboard(dashboardList.server_id,dashboardList.queryset_id,dashboardList.dashboard_id)" style="cursor: pointer;color: #05aff8;"> 
                                {{dashboardList.dashboard_name | slice:0:11}}</h5> 
                            <p class="card-text fs-11 fw-300 ">Modified on {{dashboardList.Modified}} </p>
                          </div>
                          <div class="dashboard-option">
                            <div class="d-flex justify-content-end p-1" ngbDropdown>
                                <a href="javascript:void(0);" data-bs-toggle="dropdown" role="button" ngbDropdownToggle
                                    aria-haspopup="true" aria-expanded="false" class=""><i
                                        class="fe fe-more-vertical fs-18 text-body-secondary"></i>
                                </a>
                                <div class="dropdown-menu" ngbDropdownMenu>
                                    <app-insights-button [classesList]="'dropdown-item'" [previledgeId]="36" [isBtn]="false"
                                    [buttonName]="' View Dashboard'"
                                    (btnClickEvent)="viewDashboard(dashboardList.server_id,dashboardList.queryset_id,dashboardList.dashboard_id)"
                                    [faIconList]="'fe fe-upload'" [isIcon]="true"></app-insights-button>
                                    <a  class="dropdown-item" tabindex="0" (click)="viewPropertiesTab(dashboardList.dashboard_name,dashboardList.dashboard_id)" >
                                        <i class="fa fa-sliders me-2 d-inline-flex"></i> Properties</a>
                                <app-insights-button [classesList]="'dropdown-item  btn btn-secondary-light'" [previledgeId]="35" [isBtn]="false"
                                    [buttonName]="' Delete'"
                                    (btnClickEvent)="deleteDashboard(dashboardList.server_id,dashboardList.queryset_id,dashboardList.dashboard_id)"
                                    [faIconList]="'fe fe-trash'" [isIcon]="true"></app-insights-button>
                                </div>
                            </div>
                          </div>
                        </div>       
                    </div>
                </div>
                </ng-container>
                <div  *ngIf="!showAllDasboards && savedDashboardList.length > 10" class="col-xxl-3 col-xl-3 col-lg-3 col-md-3">
                    <div class="p-5 d-flex align-items-center justify-content-start">
                        <div  class="dashboard-card-title">
                            <h5 (click)="viewAllDashboards()" class="card-title   mb-1" style="cursor: pointer;color: #05aff8;border-bottom: 1px solid;"> View All <i class="fa fa-angle-double-right"></i> </h5>
                            <p class="card-text fs-11 fw-300"></p>
                        </div>
                    </div>
                </div>
            </div>

            <div *ngIf="viewSheets" class="row">
                <div class="d-flex align-items-center justify-content-between border-bottom mb-3">
                    <h6 class="fw-bold mb-1">Saved Charts</h6>
                    <div class="view-card">
                        <!-- <div *ngFor="let data of userSheetsList">
                            <p>{{data.sheet_type}}</p>
                        </div> -->
                        <!-- <a class="btn btn-blue-light mb-2 me-3" ><i class="fa fa-plus"></i> Recently Viewed</a> -->
                        @if(!showAllSheets && userSheetsList.length !==0){
                        <a class="">
                            <span class="add-txt text-info card-title me-2" (click)="showAllSheets=!showAllSheets">Show Less <i class="fa fa-angle-double-right"> </i></span>
                        </a>
                        } @if(showAllSheets && userSheetsList.length !==0){
                        <a class="">
                            <span class="add-txt text-info card-title me-2" (click)="showAllSheets=!showAllSheets">View More <i class="fa fa-angle-double-right"> </i></span>
                        </a>
                    }
                    </div>
                </div>
                <div *ngIf="userSheetsList.length === 0">
                    No Charts please CREATE ONE!
                </div>
                <ng-container *ngFor="let sheetlist of userSheetsList;let i = index">
                    <div *ngIf="i < 11" class="col-xxl-3 col-xl-3 col-lg-3 col-md-3">
                    <div *ngIf="showAllSheets && i < 3" class="card  img-shadow">
                        <!-- <img src="./assets/images/Landingpage-images/recently-view/recent-1.jpg" class="card-img-top " alt="img"> -->
                        <div class="card-body p-2 d-flex align-items-center justify-content-between" >
                            <span class="avatar avatar-sm avatar-radius w-6 h-6 border">
                                <!-- <img  alt="product" class="avatar-radius" src="./assets/images/icons/postSQL-icon.jpg"> -->
                                <img *ngIf="sheetlist.chart_id === 1" src="./assets/images/Tiled view sheet icons/table-tiled-icon.jpg" alt=""
                                    class="avatar-radius">
                                <img *ngIf="sheetlist.chart_id === 6" src="./assets/images/Tiled view sheet icons/bar-tiled-icon.jpg" alt=""
                                    class="avatar-radius">
                                <img *ngIf="sheetlist.chart_id === 17" src="./assets/images/Tiled view sheet icons/area-tiled-icon.jpg" alt=""
                                    class="avatar-radius">
                                <img *ngIf="sheetlist.chart_id === 13" src="./assets/images/Tiled view sheet icons/line-tiled-icon.jpg" alt=""
                                    class="avatar-radius">
                                <img *ngIf="sheetlist.chart_id === 24" src="./assets/images/Tiled view sheet icons/pie-tiled-icon.jpg" alt=""
                                    class="avatar-radius">
                                <img *ngIf="sheetlist.chart_id === 7" src="./assets/images/Tiled view sheet icons/sideBar-tiled-icon.jpg" alt=""
                                    class="avatar-radius">
                                <img *ngIf="sheetlist.chart_id === 5" src="./assets/images/Tiled view sheet icons/Stacked-tiled-icon.jpg" alt=""
                                    class="avatar-radius">
                                <img *ngIf="sheetlist.chart_id === 4" src="./assets/images/Tiled view sheet icons/BarLine-tiled-icon.jpg" alt=""
                                    class="avatar-radius">
                                <img *ngIf="sheetlist.chart_id === 2" src="./assets/images/Tiled view sheet icons/Hstacked-tiled-icon.jpg" alt=""
                                    class="avatar-radius">
                                <img *ngIf="sheetlist.chart_id === 3" src="./assets/images/Tiled view sheet icons/HGrouped-tiled-icon.jpg" alt=""
                                    class="avatar-radius">
                                <img *ngIf="sheetlist.chart_id === 8" src="./assets/images/Tiled view sheet icons/multiline-tiled-icon.jpg" alt=""
                                    class="avatar-radius">
                                <img *ngIf="sheetlist.chart_id === 10" src="./assets/images/Tiled view sheet icons/donut-tiled-icon.jpg" alt=""
                                    class="avatar-radius">
                            </span>
                          <div class="dashboard-card-title">
                            <h5 class="card-title   mb-1" ngbTooltip="{{sheetlist.sheet_name}}" 
                            (click)="viewSheet(sheetlist.server_id,sheetlist.file_id,sheetlist.queryset_id,sheetlist.sheet_id)" style="cursor: pointer;color: #05aff8;"> {{sheetlist.sheet_name | slice:0:11}}</h5>
                            <p class="card-text fs-11 fw-300 ">Modified on {{sheetlist.Modified}} </p>
                          </div>
                          <div class="dashboard-option">
                            <div class="d-flex justify-content-end p-1" ngbDropdown>
                                <a href="javascript:void(0);" data-bs-toggle="dropdown" role="button" ngbDropdownToggle
                                    aria-haspopup="true" aria-expanded="false" class=""><i
                                        class="fe fe-more-vertical fs-18 text-body-secondary"></i>
                                </a>
                                <div class="dropdown-menu" ngbDropdownMenu>
                                    <app-insights-button [classesList]="'dropdown-item'" [previledgeId]="20" [isBtn]="false"
                                        [buttonName]="' View Sheet'"
                                        (btnClickEvent)="viewSheet(sheetlist.server_id,sheetlist.file_id,sheetlist.queryset_id,sheetlist.sheet_id)"
                                        [faIconList]="'fe fe-upload'" [isIcon]="true"></app-insights-button>
                                    <app-insights-button [classesList]="'dropdown-item  btn btn-secondary-light'" [previledgeId]="19" [isBtn]="false"
                                        [buttonName]="' Delete'"
                                        (btnClickEvent)="deleteSheet(sheetlist.server_id,sheetlist.file_id,sheetlist.queryset_id,sheetlist.sheet_id)"
                                        [faIconList]="'fe fe-trash'" [isIcon]="true"></app-insights-button>
                                </div>
                            </div>
                          </div>
                        </div>
                        
                    </div>
                    <div *ngIf="!showAllSheets && i < 11" class="card  img-shadow">
                        <!-- <img src="./assets/images/Landingpage-images/recently-view/recent-1.jpg" class="card-img-top " alt="img"> -->
                        <div class="card-body p-2 d-flex align-items-center justify-content-between">
                            <span class="avatar avatar-sm avatar-radius w-6 h-6 border">
                                <!-- <img  alt="product" class="avatar-radius" src="./assets/images/icons/postSQL-icon.jpg"> -->
                                <img *ngIf="sheetlist.chart_id === 1" src="./assets/images/Tiled view sheet icons/table-tiled-icon.jpg" alt=""
                                    class="avatar-radius">
                                <img *ngIf="sheetlist.chart_id === 6" src="./assets/images/Tiled view sheet icons/bar-tiled-icon.jpg" alt=""
                                    class="avatar-radius">
                                <img *ngIf="sheetlist.chart_id === 17" src="./assets/images/Tiled view sheet icons/area-tiled-icon.jpg" alt=""
                                    class="avatar-radius">
                                <img *ngIf="sheetlist.chart_id === 13" src="./assets/images/Tiled view sheet icons/line-tiled-icon.jpg" alt=""
                                    class="avatar-radius">
                                <img *ngIf="sheetlist.chart_id === 24" src="./assets/images/Tiled view sheet icons/pie-tiled-icon.jpg" alt=""
                                    class="avatar-radius">
                                <img *ngIf="sheetlist.chart_id === 7" src="./assets/images/Tiled view sheet icons/sideBar-tiled-icon.jpg" alt=""
                                    class="avatar-radius">
                                <img *ngIf="sheetlist.chart_id === 5" src="./assets/images/Tiled view sheet icons/Stacked-tiled-icon.jpg" alt=""
                                    class="avatar-radius">
                                <img *ngIf="sheetlist.chart_id === 4" src="./assets/images/Tiled view sheet icons/BarLine-tiled-icon.jpg" alt=""
                                    class="avatar-radius">
                                <img *ngIf="sheetlist.chart_id === 2" src="./assets/images/Tiled view sheet icons/Hstacked-tiled-icon.jpg" alt=""
                                    class="avatar-radius">
                                <img *ngIf="sheetlist.chart_id === 3" src="./assets/images/Tiled view sheet icons/HGrouped-tiled-icon.jpg" alt=""
                                    class="avatar-radius">
                                <img *ngIf="sheetlist.chart_id === 8" src="./assets/images/Tiled view sheet icons/multiline-tiled-icon.jpg" alt=""
                                    class="avatar-radius">
                                <img *ngIf="sheetlist.chart_id === 10" src="./assets/images/Tiled view sheet icons/donut-tiled-icon.jpg" alt=""
                                    class="avatar-radius">
                            </span>
                          <div class="dashboard-card-title">
                            <h5 class="card-title   mb-1"  ngbTooltip="{{sheetlist.sheet_name}}"
                            (click)="viewSheet(sheetlist.server_id,sheetlist.file_id,sheetlist.queryset_id,sheetlist.sheet_id)" style="cursor: pointer;color: #05aff8;"> {{sheetlist.sheet_name | slice:0:16}}</h5>
                            <p class="card-text fs-11 fw-300 ">Modified on {{sheetlist.Modified}} </p>
                          </div>
                          <div class="dashboard-option">
                            <div class="d-flex justify-content-end p-1" ngbDropdown>
                                <a href="javascript:void(0);" data-bs-toggle="dropdown" role="button" ngbDropdownToggle
                                    aria-haspopup="true" aria-expanded="false" class=""><i
                                        class="fe fe-more-vertical fs-18 text-body-secondary"></i>
                                </a>
                                <div class="dropdown-menu" ngbDropdownMenu>
                                    <app-insights-button [classesList]="'dropdown-item'" [previledgeId]="20" [isBtn]="false"
                                        [buttonName]="' View Sheet'"
                                        (btnClickEvent)="viewSheet(sheetlist.server_id,sheetlist.file_id,sheetlist.queryset_id,sheetlist.sheet_id)"
                                        [faIconList]="'fe fe-upload'" [isIcon]="true"></app-insights-button>
                                    <app-insights-button [classesList]="'dropdown-item  btn btn-secondary-light'" [previledgeId]="19" [isBtn]="false"
                                        [buttonName]="' Delete'"
                                        (btnClickEvent)="deleteSheet(sheetlist.server_id,sheetlist.file_id,sheetlist.queryset_id,sheetlist.sheet_id)"
                                        [faIconList]="'fe fe-trash'" [isIcon]="true"></app-insights-button>
                                </div>
                            </div>
                          </div>
                        </div>
                        
                    </div>
                    </div>
                </ng-container>
                
                <div *ngIf="!showAllSheets && userSheetsList.length > 10" class="col-xxl-3 col-xl-3 col-lg-3 col-md-3">
                            <div class="p-5 d-flex align-items-center justify-content-start">
                            <div  class="dashboard-card-title">
                                <h5 (click)="viewAllSheets()" class="card-title   mb-1" style="cursor: pointer;color: #05aff8;border-bottom: 1px solid;"> View All <i class="fa fa-angle-double-right"></i> </h5>
                                <p class="card-text fs-11 fw-300"></p>
                            </div>
                        </div>
                </div>
            </div>
            <div *ngIf="viewCustomSql" class="row ">
                <div class="d-flex align-items-center justify-content-between border-bottom mb-3">
                    <h6 class="fw-bold mb-1">Saved Queries</h6>
                    <div class="view-card">
                        @if(!showAllSavedQueries && savedQueryList.length !==0){
                            <a class="">
                                <span class="add-txt text-info card-title me-2" (click)="showAllSavedQueries=!showAllSavedQueries">Show Less <i class="fa fa-angle-double-right"> </i></span>
                            </a>
                            } @if(showAllSavedQueries && savedQueryList.length !==0){
                            <a class="">
                                <span class="add-txt text-info card-title me-2" (click)="showAllSavedQueries=!showAllSavedQueries">View More <i class="fa fa-angle-double-right"> </i></span>
                            </a>
                        }
                    </div>
                </div>
                <div *ngIf="savedQueryList.length === 0">
                    No Queries please CREATE ONE!
                </div>

                <ng-container *ngFor="let savedQuery of savedQueryList;let i = index">
                    <div *ngIf="i < 11" class="col-xxl-3 col-xl-3 col-lg-3 col-md-3">
                    <div *ngIf="showAllSavedQueries && i < 3" class="card img-shadow">
                        <div class="card-body p-2 d-flex align-items-center justify-content-between">
                            <div class="dashboard-card-title">
                                <h5 class="card-title   mb-1" (click)="gotoSavedQuery(savedQuery.server_id,savedQuery.queryset_id)" ngbTooltip="{{savedQuery.queryset_name}}" 
                                style="cursor: pointer;color: #05aff8;"> {{savedQuery.queryset_name | slice:0:20}}</h5>
                                <p class="card-text fs-11 fw-300 ">Modified on {{savedQuery.modified}} </p>
                              </div>
                          <div class="dashboard-option">
                            <div class="d-flex justify-content-end p-1" ngbDropdown>
                                <a href="javascript:void(0);" data-bs-toggle="dropdown" role="button" ngbDropdownToggle
                                    aria-haspopup="true" aria-expanded="false" class=""><i
                                        class="fe fe-more-vertical fs-18 text-body-secondary"></i>
                                </a>
                                <div class="dropdown-menu" ngbDropdownMenu>
                                    <app-insights-button [classesList]="'dropdown-item'" [previledgeId]="54" [isBtn]="false"
                                    [buttonName]="' View Query'"
                                    (btnClickEvent)="gotoSavedQuery(savedQuery.server_id,savedQuery.queryset_id)"
                                    [faIconList]="'fe fe-upload'" [isIcon]="true"></app-insights-button>
                                <app-insights-button [classesList]="'dropdown-item  btn btn-secondary-light'" [previledgeId]="53" [isBtn]="false"
                                    [buttonName]="' Delete'"
                                    (btnClickEvent)="deleteSavedQuery(savedQuery.queryset_id)"
                                    [faIconList]="'fe fe-trash'" [isIcon]="true"></app-insights-button>
                                </div>
                            </div>
                          </div>
                        </div>
                    </div>
                    <div *ngIf="!showAllSavedQueries && i < 11" class="card  img-shadow">
                        <!-- <img src="./assets/images/Landingpage-images/recently-view/recent-1.jpg" class="card-img-top " alt="img"> -->
                        <div class="card-body p-2 d-flex align-items-center justify-content-between">
                            <div class="dashboard-card-title">
                                <h5 class="card-title   mb-1" (click)="gotoSavedQuery(savedQuery.server_id,savedQuery.queryset_id)" ngbTooltip="{{savedQuery.queryset_name}}" 
                                style="cursor: pointer;color: #05aff8;"> {{savedQuery.queryset_name | slice:0:20}}</h5>
                                <p class="card-text fs-11 fw-300 ">Modified on {{savedQuery.odified}} </p>
                              </div>
                          <div class="dashboard-option">
                            <div class="d-flex justify-content-end p-1" ngbDropdown>
                                <a href="javascript:void(0);" data-bs-toggle="dropdown" role="button" ngbDropdownToggle
                                    aria-haspopup="true" aria-expanded="false" class=""><i
                                        class="fe fe-more-vertical fs-18 text-body-secondary"></i>
                                </a>
                                <div class="dropdown-menu" ngbDropdownMenu>
                                    <app-insights-button [classesList]="'dropdown-item'" [previledgeId]="54" [isBtn]="false"
                                    [buttonName]="' View Query'"
                                    (btnClickEvent)="gotoSavedQuery(savedQuery.server_id,savedQuery.queryset_id)"
                                    [faIconList]="'fe fe-upload'" [isIcon]="true"></app-insights-button>
                                <app-insights-button [classesList]="'dropdown-item  btn btn-secondary-light'" [previledgeId]="53" [isBtn]="false"
                                    [buttonName]="' Delete'"
                                    (btnClickEvent)="deleteSavedQuery(savedQuery.queryset_id)"
                                    [faIconList]="'fe fe-trash'" [isIcon]="true"></app-insights-button>
                                </div>
                            </div>
                          </div>
                        </div>
                        
                    </div>
                    </div>
                </ng-container>

                <div *ngIf="!showAllSavedQueries && savedQueryList.length > 10" class="col-xxl-3 col-xl-3 col-lg-3 col-md-3">
                    <div class="p-5 d-flex align-items-center justify-content-start">
                        <div  class="dashboard-card-title">
                            <h5 (click)="viewAllSavedQueries()" class="card-title   mb-1" style="cursor: pointer;color: #05aff8;border-bottom: 1px solid;"> View All <i class="fa fa-angle-double-right"></i> </h5>
                            <p class="card-text fs-11 fw-300"></p>
                        </div>
                    </div>
                </div>
            </div><div class="row mb-3">
                <div class="d-flex align-items-center justify-content-between border-bottom mb-2">
                    <h6 class="fw-bold mb-1 fs-18"> Quick Start</h6>
                    <div class="view-card">
                            <a class="">
                                <span class="add-txt text-info me-2 card-title" >View More <i class="fa fa-angle-double-right"> </i></span>
                            </a>
                    </div>
                </div>
                <div  class="col-xxl-3 col-xl-3 col-lg-6 col-md-6">
                    <div class=" ">
                        <div class=" p-2 d-flex align-items-center justify-content-between">
                            <div class="dashboard-card-title">
                                <p class="card-text  ">Sample dashboard </p>
                                <p class="card-text  ">Explore what InsightApps can do </p>
                              </div>
                        </div>
                    </div>
                </div>
                <div  class="col-xxl-3 col-xl-3 col-lg-3 col-md-3">
                        <div class=" p-2 ">
                            <div class="card overflow-hidden img-shadow mb-0">
                                <img src="./assets/images/icons/sales-analysis.jpg" alt="img" class="card-img-top">
                            </div>
                            <div class="card-body p-2">
                                <h5 class="card-title text-center">Sales Analysis</h5>
                            </div>
                        </div>
                </div>  
                <div  class="col-xxl-3 col-xl-3 col-lg-3 col-md-3">
                    <div class=" p-2 ">
                        <div class="card overflow-hidden img-shadow mb-0">
                            <img src="./assets/images/icons/profit-analysis.jpg" alt="img" class="card-img-top">
                        </div>
                        <div class="card-body p-2">
                            <h5 class="card-title text-center">Profit Analysis</h5>
                        </div>
                    </div>
            </div>
              
            </div>

        </div>

        <div class="col-xl-3">
            <div *ngIf="viewDatabbses" class="card">
                <div class="card-header d-flex justify-content-between">
                    <div class="card-title">Recent Connections</div>
                    <a class="">
                        <span class="add-txt text-info me-2" (click)="goToConnections()">View All <i class="fa fa-angle-double-right"> </i></span>
                    </a>
                </div>
                <div class="card-body mb-0 p-0 ">
                    <div class="table-responsive" style="height: 290px; overflow: hidden;">
                        <table class="table border text-nowrap text-md-nowrap mb-0">
                            <tbody>
                                @for(database of connectionList;track database){
                                <tr>
                                    <td>
                                        <a  class="card-title" style="color: #05aff8;" (click)="getTablesFromConnectedDb(database.database_id)" ngbTooltip="{{database.display_name}}"> {{database.display_name | slice:0:15}}</a>
                                       </td>
                                       <td *ngIf="database.server_type === 'POSTGRESQL'">
                                        <img alt="product" src="./assets/images/icons/postSQL-icon.jpg" class="w-5 h-5 border me-2">{{database.server_type}} 
                                    </td>
                                    <td *ngIf="database.server_type === 'ORACLE'">
                                      <img alt="product" src="./assets/images/icons/oracle-icon.jpg" class="w-5 h-5 border me-2">{{database.server_type}} 
                                  </td>
                                  <td *ngIf="database.server_type === 'MYSQL'">
                                    <img alt="product" src="./assets/images/icons/MySql-icon1.jpg" class="w-5 h-5 border me-2">{{database.server_type}}
                                </td>
                                <td *ngIf="database.server_type === 'MONGODB'">
                                    <img alt="product" src="./assets/images/icons/mongodb-icon.jpg" class="w-5 h-5 border me-2">{{database.server_type}}
                                </td>
                                <td *ngIf="database.server_type === 'MICROSOFTSQLSERVER'">
                                    <img alt="product" src="./assets/images/icons/microsoft-sql-server-icon.jpg" class="w-5 h-5 border me-2">{{database.server_type}}
                                </td>
                                <td *ngIf="database.server_type === 'SQLITE'">
                                    <img alt="product" src="./assets/images/icons/sqlite-icon.jpg" class="w-5 h-5 border me-2">{{database.server_type}}
                                </td>

                                    <!-- <td>{{database.server_type}}</td> -->
                                    
                                   
                                </tr>
                            }
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- ROW-1 CLOSED-->
</div>


<ng-template #propertiesModal let-modal>
    <div class="modal-header">
        <h6 class="modal-title">Dashboard properties</h6>
        <button type="button"class="btn-close"aria-label="Close"(click)="modal.dismiss('Cross click')">
        </button>
      </div>
    
      <div class="modal-body" style="height: 500px; overflow: scroll;">
          <div class="">
              <label for="input-label" class="form-label">Title</label>
              <p class="fw-semibold mb-2 mt-3 border p-1">{{dashboardPropertyTitle}}</p>

          </div>
          <div class="">
            
               <p class="fw-semibold mb-2 mt-3">Roles</p>
               <ng-select class="form-control p-0" name="choices-multiple-remove-button" id="choices-multiple-remove-button" (change)="onRolesChange($event)"  [closeOnSelect]="false"  [multiple]="true" placeholder="Select Roles">
                   <ng-option *ngFor="let role of roleDetails" value="{{role.id}}" selected>{{role.role}}</ng-option>
                   
               </ng-select>
          </div>
          <div class="">
            
            <p class="fw-semibold mb-2 mt-3">Users</p>
            <ng-select class="form-control p-0" name="choices-multiple-remove-button" id="choices-multiple-remove-button1"(click)="getUsersforRole()" (change)="getSelectedUsers($event)"   [closeOnSelect]="false"  [multiple]="true" placeholder="Select Users">
                <ng-option *ngFor="let user of usersOnSelectedRole" value="{{user.user_id}}">{{user.username}}</ng-option>
              
            </ng-select>
       </div>
      </div>
      <div class="modal-footer">
        <button type="button" (click)="saveDashboardProperties()" class="btn ripple btn-primary">Apply</button>
        <button
          type="button"
          class="btn ripple btn-secondary"
          (click)="modal.close('Save click')"
        >
          Close
        </button>
      </div>
</ng-template>