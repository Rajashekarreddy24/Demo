import{a as ce,b as pe,c as me}from"./chunk-YZ4RNP46.js";import{a as le}from"./chunk-R6W6WWMA.js";import{a as re,b as ae,c as se}from"./chunk-G765BPDB.js";import{a as de}from"./chunk-4XM7W5XW.js";import{B as ne,C as oe}from"./chunk-G7HRDCEB.js";import{a as Z}from"./chunk-UXQNOFNS.js";import{l as ee,u as te,v as ie}from"./chunk-O3MZADX2.js";import"./chunk-3CUW3WNJ.js";import{a as ge}from"./chunk-CYKCQD5B.js";import{c as z,e as Y,j as H,q as G,r as J,t as K,z as X}from"./chunk-GR2TZYVC.js";import"./chunk-LOSEKLOO.js";import{Ab as F,Cb as l,Db as f,Eb as V,Fa as P,Gb as E,Hb as k,Ib as T,Ja as s,Ka as y,Kb as U,Kc as Q,Ob as L,Qb as S,Sb as M,Tb as O,Ub as $,Xa as u,Za as m,db as I,ga as N,hc as j,ib as n,ic as q,jb as o,kb as v,ob as w,pa as c,qa as p,rb as b,sb as _,sc as W,tc as A,vb as C,yb as R,zb as B}from"./chunk-CB3CSPGG.js";import"./chunk-BRV2THHE.js";import{f as be}from"./chunk-WT5K5NLM.js";var x=be(ge());var he=["propertiesModal"],_e=(a,d,t)=>({itemsPerPage:a,currentPage:d,totalItems:t});function ue(a,d){a&1&&(n(0,"button",19),v(1,"i",20),o())}function ve(a,d){if(a&1){let t=w();n(0,"button",21),b("click",function(){c(t);let e=_();return p(e.gridView=!1)}),v(1,"i",22),o()}}function fe(a,d){if(a&1){let t=w();n(0,"button",23),b("click",function(){c(t);let e=_();return p(e.gridView=!0)}),v(1,"i",20),o()}}function xe(a,d){a&1&&(n(0,"button",24),v(1,"i",22),o())}function we(a,d){a&1&&(n(0,"div"),l(1," No Dashboards, Please Create One! "),o())}function Ce(a,d){a&1&&(n(0,"div"),l(1," You don't have permission to view "),o())}function De(a,d){if(a&1){let t=w();n(0,"tr")(1,"td")(2,"div",37)(3,"div",38),v(4,"img",39),o(),n(5,"div",40)(6,"a",41),b("click",function(){let e=c(t).$implicit,r=_(3);return p(r.viewDashboard(e.server_id,e.queryset_id,e.dashboard_id))}),l(7),S(8,"slice"),o(),n(9,"p",42),l(10),o()()()(),n(11,"td"),l(12),o(),n(13,"td"),l(14),o(),n(15,"td")(16,"div",43)(17,"app-insights-button",44),b("btnClickEvent",function(){let e=c(t).$implicit,r=_(3);return p(r.viewDashboard(e.server_id,e.queryset_id,e.dashboard_id))}),o(),n(18,"app-insights-button",44),b("btnClickEvent",function(){let e=c(t).$implicit,r=_(3);return p(r.deleteDashboard(e.server_id,e.queryset_id,e.dashboard_id))}),o(),n(19,"app-insights-button",44),b("btnClickEvent",function(){let e=c(t).$implicit,r=_(3);return p(r.viewPropertiesTab(e.dashboard_name,e.dashboard_id))}),o()()()()}if(a&2){let t=d.$implicit;s(4),C("src",t.dashboard_image,P),s(2),C("ngbTooltip",t.dashboard_name),s(),V(" ",O(8,24,t.dashboard_name,0,15),""),s(3),V("Created by : ",t.created_by,""),s(2),f(t.created),s(2),f(t.Modified),s(3),m("classesList","btn btn-icon btn-sm btn-info-light btn-wave waves-effect waves-light me-2")("previledgeId",37)("isBtn",!1)("toolTip","Edit")("faIconList","ri-edit-line")("isIcon",!0),s(),m("classesList","btn btn-icon btn-sm btn-danger-light btn-wave waves-effect waves-light me-2")("previledgeId",35)("isBtn",!1)("toolTip","Delete")("faIconList","ri-delete-bin-7-line")("isIcon",!0),s(),m("classesList","btn btn-icon btn-sm btn-info-light btn-wave waves-effect waves-light")("previledgeId",35)("isBtn",!1)("toolTip","Properties")("faIconList","fa fa-sliders")("isIcon",!0)}}function ye(a,d){if(a&1&&(n(0,"div",26)(1,"table",34)(2,"thead",35)(3,"tr")(4,"th"),l(5,"Title"),o(),n(6,"th"),l(7,"Created"),o(),n(8,"th"),l(9,"Last Modified"),o(),n(10,"th"),l(11,"Actions"),o()()(),n(12,"tbody"),u(13,De,20,28,"tr",36),S(14,"paginate"),o()()()),a&2){let t=_(2);s(13),m("ngForOf",M(14,1,t.savedDashboardList,L(4,_e,t.itemsPerPage,t.page,t.totalItems)))}}function Se(a,d){if(a&1){let t=w();n(0,"div",46)(1,"div",47)(2,"div",48),v(3,"img",49),o(),n(4,"div",50)(5,"a",51),b("click",function(){let e=c(t).$implicit,r=_(3);return p(r.viewDashboard(e.server_id,e.queryset_id,e.dashboard_id))}),l(6),S(7,"slice"),o()(),n(8,"div",52)(9,"div",27)(10,"div",53)(11,"span",54),l(12,"Created on: "),o()(),n(13,"div",53)(14,"span",55),l(15),o()()(),n(16,"div",27)(17,"div",53)(18,"span",54),l(19,"Modified on: "),o()(),n(20,"div",53)(21,"span",55),l(22),o()()()(),n(23,"div",56)(24,"app-insights-button",44),b("btnClickEvent",function(){let e=c(t).$implicit,r=_(3);return p(r.viewDashboard(e.server_id,e.queryset_id,e.dashboard_id))}),o(),n(25,"app-insights-button",44),b("btnClickEvent",function(){let e=c(t).$implicit,r=_(3);return p(r.deleteDashboard(e.server_id,e.queryset_id,e.dashboard_id))}),o(),n(26,"app-insights-button",44),b("btnClickEvent",function(){let e=c(t).$implicit,r=_(3);return p(r.viewPropertiesTab(e.dashboard_name,e.dashboard_id))}),o()()()()}if(a&2){let t=d.$implicit;s(3),C("src",t.dashboard_image,P),s(2),C("ngbTooltip",t.dashboard_name),s(),f(O(7,23,t.dashboard_name,0,15)),s(9),f(t.created),s(7),f(t.Modified),s(2),m("classesList","btn btn-icon btn-sm btn-info-light btn-wave waves-effect waves-light me-2")("previledgeId",37)("isBtn",!1)("toolTip","Edit")("faIconList","ri-edit-line")("isIcon",!0),s(),m("classesList","btn btn-icon btn-sm btn-danger-light btn-wave waves-effect waves-light me-2")("previledgeId",35)("isBtn",!1)("toolTip","Delete")("faIconList","ri-delete-bin-7-line")("isIcon",!0),s(),m("classesList","btn btn-icon btn-sm btn-info-light btn-wave waves-effect waves-light")("previledgeId",35)("isBtn",!1)("toolTip","Properties")("faIconList","fa fa-sliders")("isIcon",!0)}}function Pe(a,d){if(a&1&&(n(0,"div",27),u(1,Se,27,27,"div",45),S(2,"paginate"),o()),a&2){let t=_(2);s(),m("ngForOf",M(2,1,t.savedDashboardList,L(4,_e,t.itemsPerPage,t.page,t.totalItems)))}}function Ie(a,d){if(a&1){let t=w();n(0,"div",25),u(1,ye,15,8,"div",26)(2,Pe,3,8,"div",27),n(3,"pagination-controls",28),b("pageChange",function(e){c(t);let r=_();return p(r.pageChangeUserDashboardsList(r.page=e))}),o(),n(4,"div",29)(5,"select",30),T("ngModelChange",function(e){c(t);let r=_();return k(r.itemsPerPage,e)||(r.itemsPerPage=e),p(e)}),b("ngModelChange",function(){c(t);let e=_();return p(e.getuserDashboardsListput())}),n(6,"option",31),l(7," 10"),o(),n(8,"option",32),l(9," 20"),o(),n(10,"option",33),l(11," 30"),o()()()()}if(a&2){let t=_();s(),I(1,t.gridView?-1:1),s(),I(2,t.gridView?2:-1),s(3),E("ngModel",t.itemsPerPage),s(3),m("disabled",!(t.totalItems>10)),s(2),m("disabled",!(t.totalItems>20))}}function Ve(a,d){if(a&1&&(n(0,"ng-option",72),l(1),o()),a&2){let t=d.$implicit;C("value",t.id),s(),f(t.role)}}function Ee(a,d){if(a&1&&(n(0,"ng-option",73),l(1),o()),a&2){let t=d.$implicit;C("value",t.user_id),s(),f(t.username)}}function ke(a,d){if(a&1){let t=w();n(0,"div",57)(1,"h6",58),l(2,"Dashboard properties"),o(),n(3,"button",59),b("click",function(){let e=c(t).$implicit;return p(e.dismiss("Cross click"))}),o()(),n(4,"div",60)(5,"div",61)(6,"label",62),l(7,"Title"),o(),n(8,"p",63),l(9),o()(),n(10,"div",61)(11,"p",64),l(12,"Roles"),o(),n(13,"ng-select",65),b("change",function(e){c(t);let r=_();return p(r.onRolesChange(e))}),u(14,Ve,2,2,"ng-option",66),o()(),n(15,"div",61)(16,"p",64),l(17,"Users"),o(),n(18,"ng-select",67),b("click",function(){c(t);let e=_();return p(e.getUsersforRole())})("change",function(e){c(t);let r=_();return p(r.getSelectedUsers(e))}),u(19,Ee,2,2,"ng-option",68),o()()(),n(20,"div",69)(21,"button",70),b("click",function(){c(t);let e=_();return p(e.saveDashboardProperties())}),l(22,"Apply"),o(),n(23,"button",71),b("click",function(){let e=c(t).$implicit;return p(e.close("Save click"))}),l(24," Close "),o()()}if(a&2){let t=_();s(9),f(t.dashboardPropertyTitle),s(4),m("closeOnSelect",!1)("multiple",!0),s(),m("ngForOf",t.roleDetails),s(4),m("closeOnSelect",!1)("multiple",!0),s(),m("ngForOf",t.usersOnSelectedRole)}}var He=(()=>{let d=class d{constructor(i,e,r,g){this.workbechService=i,this.router=e,this.templateViewService=r,this.modalService=g,this.savedDashboardList=[],this.pageNo=1,this.page=1,this.gridView=!0,this.viewDashboardList=!1,this.roleDetails=[],this.selectedRoleIds=[],this.selectedUserIds=[],this.usersOnSelectedRole=[],this.viewDashboardList=this.templateViewService.viewDashboard()}ngOnInit(){this.viewDashboardList&&this.getuserDashboardsListput()}pageChangeUserDashboardsList(i){this.pageNo=i,this.getuserDashboardsListput()}searchDashboarList(){this.pageNo=1,this.getuserDashboardsListput()}getuserDashboardsListput(){let i={search:this.dashboardName,page_no:this.pageNo,page_count:this.itemsPerPage};(i.search==""||i.search==null)&&delete i.search,(i.page_count==null||i.page_count==null)&&delete i.page_count,this.workbechService.getuserDashboardsListput(i).subscribe({next:e=>{this.savedDashboardList=e.sheets,this.itemsPerPage=e.items_per_page,this.totalItems=e.total_items,console.log("dashboardList",this.savedDashboardList)},error:e=>{console.log(e),x.default.fire({icon:"error",title:"oops!",text:e.error.message,width:"400px"})}})}deleteDashboard(i,e,r){x.default.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then(g=>{g.isConfirmed&&this.workbechService.deleteDashboard(i,e,r).subscribe({next:h=>{console.log(h),h&&x.default.fire({icon:"success",title:"Deleted!",text:"Dashboard Deleted Successfully",width:"400px"}),this.getuserDashboardsListput()},error:h=>{x.default.fire({icon:"warning",text:h.error.message,width:"300px"}),console.log(h)}})})}viewDashboard(i,e,r){let g=btoa(i.toString()),h=btoa(e.toString()),D=btoa(r.toString());this.router.navigate(["/workbench/landingpage/sheetsdashboard/"+g+"/"+h+"/"+D])}dashboardRoute(){}viewPropertiesTab(i,e){this.modalService.open(this.propertiesModal),this.getRoleDetailsDshboard(),this.dashboardPropertyTitle=i,this.dashboardId=e}onRolesChange(i){console.log(i),this.selectedRoleIds=i}getRoleDetailsDshboard(){this.workbechService.getRoleDetailsDshboard().subscribe({next:i=>{console.log("dashboardroledetails",i),this.roleDetails=i},error:i=>{console.log(i),x.default.fire({icon:"error",title:"oops!",text:i.error.message,width:"400px"})}})}getUsersforRole(){let i={role_ids:this.selectedRoleIds};this.workbechService.getUsersOnRole(i).subscribe({next:e=>{this.usersOnSelectedRole=e,console.log("usersOnselecetdRoles",e)},error:e=>{console.log(e),x.default.fire({icon:"error",title:"oops!",text:e.error.message,width:"400px"})}})}getSelectedUsers(i){console.log(i),this.selectedUserIds=i}saveDashboardProperties(){let i={dashboard_id:this.dashboardId,role_ids:this.selectedRoleIds,user_ids:this.selectedUserIds};this.workbechService.saveDashboardProperties(i).subscribe({next:e=>{console.log("properties save",e),this.modalService.dismissAll(),x.default.fire({icon:"success",title:"Done!",text:e.message,width:"400px"})},error:e=>{console.log(e),x.default.fire({icon:"error",title:"oops!",text:e.error.message,width:"400px"})}})}};d.\u0275fac=function(e){return new(e||d)(y(de),y(Q),y(Z),y(ee))},d.\u0275cmp=N({type:d,selectors:[["app-dashboard-page"]],viewQuery:function(e,r){if(e&1&&R(he,5),e&2){let g;B(g=F())&&(r.propertiesModal=g.first)}},standalone:!0,features:[U],decls:22,vars:8,consts:[["propertiesModal",""],["title","Dashboard List","title1","home","activeitem","dashboard"],[1,"main-container","container-fluid"],[1,"card",2,"padding","20px"],[1,"col-sm-12","col-lg-12","col-xl-12",2,"padding","0px"],[1,"d-flex","justify-content-between","px-5"],[1,"connect-txt"],[1,"card-title","mt-2"],[1,"new-data-btn","d-flex","text-align-center"],["type","button","class","btn btn-icon btn-outline-primary me-1",4,"ngIf"],["type","button","class","btn btn-icon btn-primary-light me-3",3,"click",4,"ngIf"],["type","button","class","btn btn-icon btn-primary-light me-1",3,"click",4,"ngIf"],["type","button","class","btn btn-icon btn-outline-primary me-3",4,"ngIf"],[1,"input-group"],["type","text","placeholder","Search","aria-describedby","button-addon2",1,"form-control","border-end-0",3,"ngModelChange","keyup.enter","ngModel"],["type","button","id","button-addon2",1,"btn","btn-primary","border","me-2",2,"border-radius","0px 4px 4px 0px",3,"click"],[1,"fe","fe-search"],[4,"ngIf"],["class","card-body",4,"ngIf"],["type","button",1,"btn","btn-icon","btn-outline-primary","me-1"],[1,"fa","fa-th-large"],["type","button",1,"btn","btn-icon","btn-primary-light","me-3",3,"click"],[1,"fa","fa-th-list"],["type","button",1,"btn","btn-icon","btn-primary-light","me-1",3,"click"],["type","button",1,"btn","btn-icon","btn-outline-primary","me-3"],[1,"card-body"],[1,"table-responsive",2,"height","26rem"],[1,"row"],["previousLabel","Prev","nextLabel","Next",3,"pageChange"],[2,"float","right","font-size","15px","margin-top","-41px"],[1,"form-control",3,"ngModelChange","ngModel"],["value","10"],["value","20",3,"disabled"],["value","30",3,"disabled"],[1,"table","border","text-nowrap","text-md-nowrap","mb-0"],[1,"table-primary",2,"position","sticky","top","-1px","background-color","#00a5a2"],[4,"ngFor","ngForOf"],[1,"d-flex"],[1,"imgdf"],["alt","",1,"w-7","h-7","border","rounded-3","me-4",3,"src"],[1,"content"],[2,"color","#05aff8","cursor","pointer",3,"click","ngbTooltip"],[1,"mb-0"],[1,"hstack","gap-2","fs-1"],[3,"btnClickEvent","classesList","previledgeId","isBtn","toolTip","faIconList","isIcon"],["class","col-md-12 col-xl-3",4,"ngFor","ngForOf"],[1,"col-md-12","col-xl-3"],[1,"card"],[1,"user-image","card-box-shadow"],["alt","",1,"card-img-top",2,"height","140px",3,"src"],[1,"card-body","p-1","mt-1","text-center"],[1,"fs-18","fw-bold","d-block",3,"click","ngbTooltip"],[1,"p-1","text-center"],[1,"col-md-6"],[1,"fw-semibold","fs-14"],[1,"fs-15"],[1,"text-center","p-2"],[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body",2,"height","500px","overflow","scroll"],[1,""],["for","input-label",1,"form-label"],[1,"fw-semibold","mb-2","mt-3","border","p-1"],[1,"fw-semibold","mb-2","mt-3"],["name","choices-multiple-remove-button","id","choices-multiple-remove-button","placeholder","Select Roles",1,"form-control","p-0",3,"change","closeOnSelect","multiple"],["selected","",3,"value",4,"ngFor","ngForOf"],["name","choices-multiple-remove-button","id","choices-multiple-remove-button1","placeholder","Select Users",1,"form-control","p-0",3,"click","change","closeOnSelect","multiple"],[3,"value",4,"ngFor","ngForOf"],[1,"modal-footer"],["type","button",1,"btn","ripple","btn-primary",3,"click"],["type","button",1,"btn","ripple","btn-secondary",3,"click"],["selected","",3,"value"],[3,"value"]],template:function(e,r){if(e&1){let g=w();v(0,"app-page-header",1),n(1,"div",2)(2,"div",3)(3,"div",4)(4,"div",5)(5,"div",6)(6,"h4",7),l(7,"Dashboards"),o()(),n(8,"div",8),u(9,ue,2,0,"button",9)(10,ve,2,0,"button",10)(11,fe,2,0,"button",11)(12,xe,2,0,"button",12),n(13,"div",13)(14,"input",14),T("ngModelChange",function(D){return c(g),k(r.dashboardName,D)||(r.dashboardName=D),p(D)}),b("keyup.enter",function(){return c(g),p(r.searchDashboarList())}),o(),n(15,"button",15),b("click",function(){return c(g),p(r.searchDashboarList())}),v(16,"i",16),o()()()(),u(17,we,2,0,"div",17)(18,Ce,2,0,"div",17)(19,Ie,12,5,"div",18),o()()(),u(20,ke,25,7,"ng-template",null,0,$)}e&2&&(s(9),m("ngIf",r.gridView),s(),m("ngIf",r.gridView),s(),m("ngIf",!r.gridView),s(),m("ngIf",!r.gridView),s(2),E("ngModel",r.dashboardName),s(3),m("ngIf",r.viewDashboardList&&r.savedDashboardList.length===0),s(),m("ngIf",!r.viewDashboardList),s(),m("ngIf",r.viewDashboardList))},dependencies:[ie,te,A,j,q,W,oe,ne,X,J,K,z,G,Y,H,se,re,ae,le,me,pe,ce],styles:[".card-icon-top[_ngcontent-%COMP%]{height:100px;background-color:#86b8b7}.table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{color:#fff}.dropdown-toggle[_ngcontent-%COMP%]:after{display:none}a[_ngcontent-%COMP%]{cursor:pointer}.user-card[_ngcontent-%COMP%]   .user-image[_ngcontent-%COMP%]   .card-icon-top[_ngcontent-%COMP%]{width:100%;height:auto}.user-card[_ngcontent-%COMP%]   .user-image[_ngcontent-%COMP%]:before{background-color:transparent!important}.card-box-shadow[_ngcontent-%COMP%]{box-shadow:5px 10px 10px 5px #0000001a}"]});let a=d;return a})();export{He as DashboardPageComponent};
