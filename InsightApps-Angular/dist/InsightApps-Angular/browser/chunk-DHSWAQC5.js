import{c as ve,e as Se,f as Te}from"./chunk-MMIPX5P7.js";import{a as Ie}from"./chunk-R6W6WWMA.js";import{a as ke}from"./chunk-4XM7W5XW.js";import{B as ye,C as we}from"./chunk-G7HRDCEB.js";import"./chunk-UXQNOFNS.js";import{b as se,c as de,d as ce,e as _e,f as me,g as pe,h as ue,i as be,j as he,k as ge,l as fe,u as xe,v as Ce}from"./chunk-O3MZADX2.js";import"./chunk-3CUW3WNJ.js";import"./chunk-TFGPENSM.js";import{c as ee,d as te,f as N,g as J,i as ie}from"./chunk-DUBUW4ZU.js";import{a as Ee}from"./chunk-CYKCQD5B.js";import{b as ne,c as oe,e as ae,j as le,z as re}from"./chunk-GR2TZYVC.js";import"./chunk-LOSEKLOO.js";import{$a as j,Bb as q,Cb as c,Db as T,Eb as D,Fb as O,Gb as E,Hb as F,Ib as V,Ic as X,Ja as r,Ka as M,Kb as $,Kc as Z,Mb as z,Qb as P,Tb as R,Ub as A,Xa as x,Za as h,db as C,eb as W,fb as v,ga as B,gb as y,gc as G,hb as w,hc as U,ib as a,ic as H,jb as l,kb as S,ob as g,pa as _,qa as m,rb as p,sb as d,sc as Y,tc as K,vb as L,wb as Q}from"./chunk-CB3CSPGG.js";import"./chunk-BRV2THHE.js";import{f as De}from"./chunk-WT5K5NLM.js";var f=De(Ee());var Fe=o=>[o];function Ve(o,s){if(o&1&&(a(0,"div",67),S(1,"i",68),a(2,"span",69),c(3),P(4,"slice"),l()()),o&2){let t=s.$implicit;r(2),L("ngbTooltip",t.table),r(),T(R(4,2,t.table,0,20))}}function qe(o,s){if(o&1){let t=g();a(0,"div",65,4),p("cdkDropListDropped",function(e){_(t);let n=d(3);return m(n.drop(e))}),x(2,Ve,5,6,"div",66),l()}if(o&2){let t=d().$implicit;d();let i=q(40);h("cdkDropListData",t.tables)("cdkDropListConnectedTo",z(3,Fe,i)),r(2),h("ngForOf",t.tables)}}function Me(o,s){if(o&1&&(a(0,"div",60)(1,"h6",61)(2,"button",62),c(3),l()(),a(4,"div",63)(5,"div",64),x(6,qe,3,5,"ng-template"),l()()()),o&2){let t=s.$implicit,i=s.index;h("collapsed",i!==0),r(),Q("id","heading",i,""),r(2),D(" ",t.schema," "),r(),j("show",i===0),Q("id","collapse",i,"")}}function Qe(o,s){if(o&1){let t=g();a(0,"a",70),p("click",function(){_(t);let e=d(2),n=q(7);return e.openSuperScaled(n),m(e.getFilteredList())}),S(1,"i",71),c(2," Apply Filters "),l()}}function Oe(o,s){if(o&1){let t=g();a(0,"div",40),c(1),a(2,"a",72),p("click",function(){let e=_(t).$index,n=d(2);return m(n.onDeleteItem(e))}),S(3,"i",73),l()()}if(o&2){let t=s.$implicit;r(),O("",t.alias,"(",t.schema,") ")}}function je(o,s){o&1&&(a(0,"h6",41),c(1,"Drag tables here"),l())}function Le(o,s){if(o&1){let t=g();a(0,"li",74)(1,"span",75),S(2,"i",76)(3,"i",77),l(),c(4),a(5,"a",78),p("click",function(){let e=_(t).$index,n=d(3);return m(n.deleteJoiningRelation(e))}),S(6,"i",79),l()()}if(o&2){let t=s.$implicit;r(4),D(" ",t," ")}}function Pe(o,s){if(o&1&&(a(0,"ul",44),y(1,Le,7,1,"li",74,v),l()),o&2){let t=d(2);r(),w(t.displayJoiningCndnsList)}}function Re(o,s){if(o&1){let t=g();a(0,"li")(1,"a",86),p("click",function(){let e=_(t).$implicit,n=d().$implicit,u=d(3);return u.selectedClmnT1=e.column,u.getSelectedT1=n.table,u.selectedAliasT1=n.alias,u.selectedSchema1=n.schema,m(u.updateRemainingTables())}),c(2),l()()}if(o&2){let t=s.$implicit;r(2),T(t.column)}}function Ae(o,s){if(o&1&&(a(0,"li",91),c(1),l(),y(2,Re,3,1,"li",null,v)),o&2){let t=s.$implicit;r(),O(" ",t.schema,".",t.alias," "),r(),w(t.columns)}}function Ne(o,s){if(o&1){let t=g();a(0,"li")(1,"a",86),p("click",function(){let e=_(t).$implicit,n=d().$implicit,u=d(3);return u.selectedClmnT2=e.column,u.getSelectedT2=n.table,u.selectedAliasT2=n.alias,m(u.selectedSchema2=n.schema)}),c(2),l()()}if(o&2){let t=s.$implicit;r(2),T(t.column)}}function Je(o,s){if(o&1&&(a(0,"li",91),c(1),l(),y(2,Ne,3,1,"li",null,v)),o&2){let t=s.$implicit;r(),O(" ",t.schema,".",t.alias," "),r(),w(t.columns)}}function Be(o,s){if(o&1){let t=g();a(0,"div",80)(1,"div",81)(2,"button",82),c(3),l(),a(4,"ul",83),y(5,Ae,4,2,null,null,v),l()(),a(7,"div",81)(8,"button",84),c(9),l(),a(10,"ul",85)(11,"li")(12,"a",86),p("click",function(){_(t);let e=d(2);return m(e.selectedJoin="Left")}),c(13,"Left"),l()(),a(14,"li")(15,"a",86),p("click",function(){_(t);let e=d(2);return m(e.selectedJoin="Right")}),c(16,"Right"),l()(),a(17,"li")(18,"a",86),p("click",function(){_(t);let e=d(2);return m(e.selectedJoin="Inner")}),c(19,"Inner"),l()(),a(20,"li")(21,"a",86),p("click",function(){_(t);let e=d(2);return m(e.selectedJoin="Self")}),c(22,"Self"),l()(),a(23,"li")(24,"a",86),p("click",function(){_(t);let e=d(2);return m(e.selectedJoin="full Outer")}),c(25,"Full Outer"),l()()()(),a(26,"div",81)(27,"button",84),c(28),l(),a(29,"ul",85)(30,"li")(31,"a",86),p("click",function(){_(t);let e=d(2);return m(e.selectedCndn="=")}),c(32,"Equals"),l()(),a(33,"li")(34,"a",86),p("click",function(){_(t);let e=d(2);return m(e.selectedCndn=">")}),c(35,"Greater than"),l()(),a(36,"li")(37,"a",86),p("click",function(){_(t);let e=d(2);return m(e.selectedCndn="<")}),c(38,"Less than"),l()(),a(39,"li")(40,"a",86),p("click",function(){_(t);let e=d(2);return m(e.selectedCndn=">=")}),c(41,"Greater than equals"),l()(),a(42,"li")(43,"a",86),p("click",function(){_(t);let e=d(2);return m(e.selectedCndn="<=")}),c(44,"Less than equals"),l()()()(),a(45,"div",81)(46,"button",87),c(47),l(),a(48,"ul",83),y(49,Je,4,2,null,null,v),l()()(),a(51,"div",88)(52,"button",89),p("click",function(){_(t);let e=d(2);return m(e.clearJoinCondns())}),c(53," clear "),l(),a(54,"button",90),p("click",function(){_(t);let e=d(2);return m(e.customTableJoin())}),c(55," Join "),l()()}if(o&2){let t=d(2);r(3),D(" ",t.selectedClmnT1?t.selectedClmnT1:"Select Column",""),r(2),w(t.draggedtables),r(4),T(t.selectedJoin?t.selectedJoin:"Condition"),r(19),T(t.selectedCndn?t.selectedCndn:"Operator"),r(18),h("disabled",!t.selectedClmnT1),r(),D("",t.selectedClmnT2?t.selectedClmnT2:"Select Column"," "),r(2),w(t.remainingTables),r(5),h("disabled",!t.selectedClmnT2)}}function We(o,s){if(o&1){let t=g();a(0,"i",93),p("click",function(){_(t);let e=d(3);return m(e.toggleCard())}),a(1,"button",94)(2,"h6"),c(3,"Table Custom Join"),l()()()}}function $e(o,s){if(o&1&&x(0,We,4,0,"i",92),o&2){let t=d(2);C(0,t.isOpen?-1:0)}}function ze(o,s){o&1&&(a(0,"h6",41),c(1,"Result preview"),l())}function Ge(o,s){if(o&1&&(a(0,"th"),c(1),l()),o&2){let t=s.$implicit;r(),T(t)}}function Ue(o,s){if(o&1&&(a(0,"td"),c(1),l()),o&2){let t=s.$implicit;r(),T(t)}}function He(o,s){if(o&1&&(a(0,"tr"),y(1,Ue,2,1,"td",null,v),l()),o&2){let t=s.$implicit;r(),w(t)}}function Ye(o,s){if(o&1&&(a(0,"div",95)(1,"table",96)(2,"thead",97)(3,"tr"),y(4,Ge,2,1,"th",null,v),l()(),a(6,"tbody"),y(7,He,3,0,"tr",null,v),l()()()),o&2){let t=d(2);j("table-left",t.draggedtables.length>1)("table-right",t.draggedtables.length===1),r(4),w(t.TabledataJoining.column_data),r(3),w(t.TabledataJoining.row_data)}}function Ke(o,s){if(o&1&&(a(0,"span",58),S(1,"i",98),c(2," fetched in "),a(3,"span",99),c(4),l(),c(5),l()),o&2){let t=d(2);r(4),D("",t.qryTime,"s"),r(),D(" Rows effected:",t.qryRows,"")}}function Xe(o,s){if(o&1){let t=g();a(0,"app-insights-button",35),p("btnClickEvent",function(){_(t);let e=d(2);return m(e.goToSheet())}),l()}o&2&&h("buttonName"," Go to sheet ")("classesList","btn btn-primary")("previledgeId",17)("isBtn",!0)("isIcon",!1)}function Ze(o,s){if(o&1){let t=g();a(0,"div",7)(1,"div",8)(2,"div",9)(3,"div",10)(4,"h6",11),c(5,"Connections"),l(),a(6,"a",12),p("click",function(){_(t);let e=d();return m(e.goToConnections())}),a(7,"span",13),c(8,"Add"),l()()(),a(9,"p",14),c(10),P(11,"slice"),l()(),a(12,"div",15)(13,"h6",16),c(14,"Database"),l(),a(15,"p",16),c(16),l()(),S(17,"div",17),a(18,"div",18)(19,"div",19)(20,"div",20)(21,"input",21),V("ngModelChange",function(e){_(t);let n=d();return F(n.searchTables,e)||(n.searchTables=e),m(e)}),p("keyup",function(){_(t);let e=d();return m(e.getSchemaTablesFromConnectedDb())}),l(),a(22,"button",22),p("click",function(){_(t);let e=d();return m(e.getSchemaTablesFromConnectedDb())}),S(23,"i",23),l()()(),a(24,"div",24)(25,"div",25),x(26,Me,7,8,"div",26),l()()()(),a(27,"div",27)(28,"div",28)(29,"div",29)(30,"div",30)(31,"div",31)(32,"input",32),V("ngModelChange",function(e){_(t);let n=d();return F(n.saveQueryName,e)||(n.saveQueryName=e),m(e)}),p("change",function(){_(t);let e=d();return m(e.markDirty())}),l()(),a(33,"div",33),x(34,Qe,3,0,"a",34),a(35,"app-insights-button",35),p("btnClickEvent",function(){_(t);let e=d();return e.customSql=!0,m(e.tableJoiningUI=!1)}),l()()(),a(36,"div",36)(37,"div",37)(38,"div",38)(39,"div",39,3),p("cdkDropListDropped",function(e){_(t);let n=d();return m(n.drop(e))}),y(41,Oe,4,2,"div",40,W),x(43,je,2,0,"h6",41),l()()(),a(44,"div",37)(45,"div",42)(46,"div",43),x(47,Pe,3,0,"ul",44),l()()()()(),a(48,"div",45)(49,"div",24)(50,"div",46)(51,"div",47)(52,"div",48)(53,"div",49)(54,"div",30)(55,"h6",50),c(56,"Table Custom Join"),l(),a(57,"i",51),p("click",function(){_(t);let e=d();return m(e.toggleCard())}),l()(),a(58,"div",52),x(59,Be,56,6),l()()()(),a(60,"div",53)(61,"div",54)(62,"div",55),x(63,$e,1,1),a(64,"h6",16),c(65,"Result Preview"),l()(),a(66,"div",56),x(67,ze,2,0,"h6",41)(68,Ye,9,4),l(),a(69,"div",57),x(70,Ke,6,2,"span",58)(71,Xe,1,5,"app-insights-button",59),l()()()()()()()()()}if(o&2){let t=d();r(9),L("ngbTooltip",t.hostName),r(),T(R(11,26,t.hostName,0,15)),r(6),T(t.databaseName),r(5),E("ngModel",t.searchTables),r(4),h("closeOthers",!0),r(),h("ngForOf",t.schematableList),r(6),E("ngModel",t.saveQueryName),r(2),C(34,t.draggedtables.length?34:-1),r(),h("buttonName","New Custom SQL")("classesList","btn btn-blue-light m-1")("previledgeId",54)("isBtn",!0)("isIcon",!1),r(4),h("cdkDropListData",t.draggedtables),r(2),w(t.draggedtables),r(2),C(43,t.draggedtables.length?-1:43),r(4),C(47,t.relationOfTables.length?47:-1),r(4),h("@toggle",t.isOpen?"open":"closed"),r(8),C(59,t.isOpen?59:-1),r(),h("ngClass",t.draggedtables.length<2?"col-xxl-12 col-xl-12 col-lg-12 col-md-12 p-0":t.isOpen?"col-xxl-6 col-xl-6 col-lg-6 col-md-6 p-0":""),r(),j("expanded",!t.isOpen),h("ngClass",t.isOpen?"right-card":""),r(2),C(63,t.draggedtables.length>1?63:-1),r(4),C(67,t.TabledataJoining.length?67:68),r(3),C(70,t.qryTime?70:-1),r(),C(71,t.qurtySetId&&t.qurtySetId?71:-1)}}function et(o,s){o&1&&S(0,"i",115)}function tt(o,s){o&1&&S(0,"i",117)}function it(o,s){if(o&1&&(a(0,"div",118),S(1,"i",68),a(2,"span"),c(3),l()()),o&2){let t=s.$implicit;r(3),T(t.table)}}function nt(o,s){if(o&1&&(a(0,"div",116),y(1,it,4,1,"div",118,v),l()),o&2){let t=d().$implicit;r(),w(t==null?null:t.tables)}}function ot(o,s){if(o&1){let t=g();a(0,"div",102)(1,"div",113),p("click",function(){let e=_(t).$implicit,n=d(2);return m(n.toggleSubMenu(e))}),a(2,"span",114),x(3,et,1,0,"i",115)(4,tt,1,0),a(5,"h6"),c(6),l()()(),x(7,nt,3,0,"div",116),l()}if(o&2){let t=s.$implicit;r(3),C(3,t.expanded?3:4),r(3),T(t.schema),r(),C(7,t.expanded?7:-1)}}function at(o,s){if(o&1){let t=g();a(0,"app-insights-button",35),p("btnClickEvent",function(){_(t);let e=d(2);return m(e.saveQuery())}),l()}o&2&&h("buttonName"," Save Query ")("classesList","btn btn-primary")("previledgeId",51)("isBtn",!0)("isIcon",!1)}function lt(o,s){if(o&1){let t=g();a(0,"app-insights-button",35),p("btnClickEvent",function(){_(t);let e=d(2);return m(e.updateCustmQuery())}),l()}o&2&&h("buttonName"," Update Query ")("classesList","btn btn-primary")("previledgeId",52)("isBtn",!0)("isIcon",!1)}function rt(o,s){if(o&1&&(a(0,"th"),c(1),l()),o&2){let t=s.$implicit;r(),T(t)}}function st(o,s){if(o&1&&(a(0,"td"),c(1),l()),o&2){let t=s.$implicit;r(),T(t)}}function dt(o,s){if(o&1&&(a(0,"tr"),y(1,st,2,1,"td",null,v),l()),o&2){let t=s.$implicit;r(),w(t)}}function ct(o,s){if(o&1&&(a(0,"div",95)(1,"table",96)(2,"thead",97)(3,"tr"),y(4,rt,2,1,"th",null,v),l()(),a(6,"tbody"),y(7,dt,3,0,"tr",null,v),l()()()),o&2){let t=d(2);r(4),w(t.cutmquryTable.column_data),r(3),w(t.cutmquryTable.row_data)}}function _t(o,s){if(o&1&&(a(0,"span",58),S(1,"i",98),c(2," fetched in "),a(3,"span",99),c(4),l(),c(5),l()),o&2){let t=d(2);r(4),D("",t.custmQryTime," "),r(),D(",Rows effected:",t.custmQryRows,"")}}function mt(o,s){if(o&1){let t=g();a(0,"app-insights-button",35),p("btnClickEvent",function(){_(t);let e=d(2);return m(e.goToSheet())}),l()}o&2&&h("buttonName"," Go to sheet ")("classesList","btn btn-primary")("previledgeId",17)("isBtn",!0)("isIcon",!1)}function pt(o,s){if(o&1){let t=g();a(0,"div",7)(1,"div",8)(2,"div",9)(3,"div",10)(4,"h6",11),c(5,"Connections"),l(),a(6,"a",12),p("click",function(){_(t);let e=d();return m(e.goToConnections())}),a(7,"span",13),c(8,"Add"),l()()(),a(9,"p",14),c(10),P(11,"slice"),l()(),a(12,"div",15)(13,"h6",16),c(14,"Database"),l(),a(15,"p",16),c(16),l()(),a(17,"div",100)(18,"div",101),y(19,ot,8,3,"div",102,v),l()()(),a(21,"div",27)(22,"div",28)(23,"div",103)(24,"div",30)(25,"div",31)(26,"input",104),V("ngModelChange",function(e){_(t);let n=d();return F(n.saveQueryName,e)||(n.saveQueryName=e),m(e)}),l()(),a(27,"div",33)(28,"a",105),p("click",function(){_(t);let e=d();return e.customSql=!1,m(e.tableJoiningUI=!0)}),c(29,"Back to Table Joining"),l(),a(30,"a",70),p("click",function(){_(t);let e=d(),n=q(7);return e.openSuperScaled(n),m(e.getFilteredList())}),S(31,"i",71),c(32," Apply Filters "),l()()(),a(33,"div",106)(34,"textarea",107),V("ngModelChange",function(e){_(t);let n=d();return F(n.sqlQuery,e)||(n.sqlQuery=e),m(e)}),l()(),a(35,"div",108),x(36,at,1,5,"app-insights-button",109)(37,lt,1,5,"app-insights-button",109),a(38,"button",90),p("click",function(){_(t);let e=d();return m(e.executeQuery())}),c(39," Run Query "),l(),a(40,"button",89),p("click",function(){_(t);let e=d();return m(e.clrQuery())}),c(41," Clear Query "),l()()(),a(42,"div",110)(43,"div",111)(44,"div",30)(45,"h6"),c(46,"Result Preview"),l()(),a(47,"div",56),x(48,ct,9,0,"div",112),l(),a(49,"div",57),x(50,_t,6,2,"span",58)(51,mt,1,5,"app-insights-button",59),l()()()()()()}if(o&2){let t=d();r(9),L("ngbTooltip",t.hostName),r(),T(R(11,11,t.hostName,0,15)),r(6),T(t.databaseName),r(3),w(t.schematableList),r(7),E("ngModel",t.saveQueryName),r(8),E("ngModel",t.sqlQuery),r(2),h("ngIf",!t.updateQuery),r(),h("ngIf",t.updateQuery),r(),h("disabled",!t.sqlQuery.length),r(10),h("ngIf",t.cutmquryTable),r(2),C(50,t.custmQryTime?50:-1),r(),C(51,t.qurtySetId&&t.qurtySetId?51:-1)}}function ut(o,s){if(o&1){let t=g();a(0,"tr",127)(1,"td",128),p("click",function(){let e=_(t).$implicit,n=d(4);return m(n.selectedColumnGetRows(e.column,e.data_type))}),c(2),l()()}if(o&2){let t=s.$implicit;r(2),O("",t.column," (",t.data_type,") ")}}function bt(o,s){if(o&1&&(a(0,"tbody"),y(1,ut,3,2,"tr",127,v),l()),o&2){let t=d(3);r(),w(t.columnWithTablesData)}}function ht(o,s){o&1&&(a(0,"h6"),c(1,"No data in selected column"),l())}function gt(o,s){if(o&1){let t=g();a(0,"div",119)(1,"h6",120),c(2,"Filters (select Column)"),l(),a(3,"button",121),p("click",function(){_(t);let e=d().$implicit;return m(e.dismiss("Cross click"))}),l()(),a(4,"div",122)(5,"div",123)(6,"table",124),x(7,bt,3,0,"tbody")(8,ht,2,0),l()()(),a(9,"div",125)(10,"button",126),p("click",function(){_(t);let e=d().$implicit;return m(e.close("Save click"))}),c(11," Close "),l()()}if(o&2){let t=d(2);r(7),C(7,t.columnWithTablesData!=null&&t.columnWithTablesData.length?7:8)}}function ft(o,s){if(o&1){let t=g();a(0,"tr",127)(1,"td",133)(2,"div",130)(3,"input",134),V("ngModelChange",function(e){let n=_(t).$implicit;return F(n.selected,e)||(n.selected=e),m(e)}),p("change",function(){_(t);let e=d(4);return m(e.updateSelectedRows())}),l()()(),a(4,"td")(5,"label",135),c(6),l()()()}if(o&2){let t=s.$implicit,i=s.$index;r(3),Q("name","rows",i,""),h("id","defaultCheck"+i),E("ngModel",t.selected),r(3),D(" ",t.label," ")}}function xt(o,s){if(o&1){let t=g();a(0,"tbody")(1,"tr")(2,"td")(3,"div",130)(4,"input",131),V("ngModelChange",function(e){_(t);let n=d(3);return F(n.isAllSelected,e)||(n.isAllSelected=e),m(e)}),p("change",function(e){_(t);let n=d(3);return m(n.toggleAllRows(e))}),l()()(),a(5,"td")(6,"label",132),c(7,"Select All"),l()()(),y(8,ft,7,5,"tr",127,v),l()}if(o&2){let t=d(3);r(4),E("ngModel",t.isAllSelected),r(4),w(t.columnsInFilters)}}function Ct(o,s){o&1&&(a(0,"h6"),c(1,"No data in selected column"),l())}function yt(o,s){if(o&1){let t=g();a(0,"div",119)(1,"h6",120),c(2,"Filters"),l(),a(3,"button",121),p("click",function(){_(t);let e=d().$implicit;return m(e.dismiss("Cross click"))}),l()(),a(4,"div",122)(5,"div",123)(6,"table",124),x(7,xt,10,1,"tbody")(8,Ct,2,0),l()()(),a(9,"div",125)(10,"button",129),p("click",function(){_(t);let e=d(2);return m(e.getSelectedRows())}),c(11,"Filter Data"),l(),a(12,"button",126),p("click",function(){_(t);let e=d().$implicit;return m(e.close("Save click"))}),c(13," Close "),l()()}if(o&2){let t=d(2);r(7),C(7,t.columnsInFilters!=null&&t.columnsInFilters.length?7:8),r(3),h("disabled",!t.isAnyRowSelected())}}function wt(o,s){if(o&1&&x(0,gt,12,1)(1,yt,14,2),o&2){let t=d();C(0,t.tableColumnFilter?0:-1),r(),C(1,t.columnRowFilter?1:-1)}}function vt(o,s){if(o&1){let t=g();a(0,"tr",127)(1,"td"),c(2),l(),a(3,"td")(4,"div",138)(5,"a",139),p("click",function(){let e=_(t).$implicit,n=d(2),u=q(9);return n.editFilter(e.filter_id),m(n.openSuperScaled(u))}),S(6,"i",140),l(),a(7,"a",141),p("click",function(){let e=_(t).$implicit,n=d(2);return m(n.deleteFilter(e.filter_id))}),S(8,"i",142),l()()()()}if(o&2){let t=s.$implicit;r(2),D("",t.column_name," ")}}function St(o,s){if(o&1){let t=g();a(0,"div",136)(1,"h6",120),c(2,"Filters"),l(),a(3,"button",121),p("click",function(){let e=_(t).$implicit;return m(e.dismiss("Cross click"))}),l()(),a(4,"div",122)(5,"div",123)(6,"table",124)(7,"tbody"),y(8,vt,9,1,"tr",127,v),l()()()(),a(10,"div",125)(11,"button",137),p("click",function(){_(t);let e=d(),n=q(5);return m(e.openSuperScaledGetColunmns(n))}),c(12,"Add"),l(),a(13,"button",126),p("click",function(){let e=_(t).$implicit;return m(e.close("Save click"))}),c(14," Close "),l()()}if(o&2){let t=d();r(8),w(t.filteredList)}}function Tt(o,s){if(o&1){let t=g();a(0,"tr",127)(1,"td",133)(2,"div",130)(3,"input",134),V("ngModelChange",function(e){let n=_(t).$implicit;return F(n.selected,e)||(n.selected=e),m(e)}),p("change",function(){_(t);let e=d(2);return m(e.updateEditSelectedRows())}),l()()(),a(4,"td")(5,"label",135),c(6),l()()()}if(o&2){let t=s.$implicit,i=s.$index;r(3),Q("name","rows",i,""),h("id","defaultCheck"+i),E("ngModel",t.selected),r(3),D(" ",t.label," ")}}function It(o,s){if(o&1){let t=g();a(0,"div",119)(1,"h6",120),c(2,"Edit Filters"),l(),a(3,"button",121),p("click",function(){let e=_(t).$implicit;return m(e.dismiss("Cross click"))}),l()(),a(4,"div",122)(5,"div",123)(6,"table",124)(7,"tbody")(8,"tr")(9,"td")(10,"div",130)(11,"input",131),V("ngModelChange",function(e){_(t);let n=d();return F(n.isAllSelected,e)||(n.isAllSelected=e),m(e)}),p("change",function(e){_(t);let n=d();return m(n.toggleEditAllRows(e))}),l()()(),a(12,"td")(13,"label",132),c(14,"Select All"),l()()(),y(15,Tt,7,5,"tr",127,v),l()()()(),a(17,"div",125)(18,"button",129),p("click",function(){_(t);let e=d();return m(e.getSelectedRowsFromEdit())}),c(19,"Apply"),l(),a(20,"button",126),p("click",function(){let e=_(t).$implicit;return m(e.close("Save click"))}),c(21," Close "),l()()}if(o&2){let t=d();r(11),E("ngModel",t.isAllSelected),r(4),w(t.editFilterList),r(3),h("disabled",!t.isAnyEditRowSelected())}}var Jt=(()=>{let s=class s{constructor(i,e,n,u){this.workbechService=i,this.router=e,this.route=n,this.modalService=u,this.tableRelationUi=!0,this.custmT1Data=[],this.custmT2Data=[],this.connectionList=[],this.tableList=[],this.schematableList=[],this.filteredSchematableList=[],this.databaseconnectionsList=!0,this.draggedtables=[],this.getTableColumns=[],this.getTableRows=[],this.relationOfTables=[],this.displayJoiningCndnsList=[],this.joinTypes=[],this.sqlQuery="",this.cutmquryTable=[],this.TabledataJoining=[],this.remainingTables=[],this.enableJoinBtn=!0,this.customSql=!1,this.tableJoiningUI=!0,this.isOpen=!1,this.columnsInFilters=[],this.titleMarkDirty=!1,this.datasourceFilterIdArray=[],this.selectedRows=[],this.datasourceQuerysetId=null,this.filteredList=[],this.editFilterList=[],this.columnWithTablesData=[],this.isAllSelected=!1,this.saveQueryName="",this.updateQuery=!1,this.fromDatabasId=!1,this.fromFileId=!1;let b=this.router.url;b.includes("/workbench/database-connection/tables/")&&(this.fromDatabasId=!0,this.databaseId=+atob(n.snapshot.params.id)),b.includes("/workbench/database-connection/files/tables/")&&(this.fromFileId=!0,this.fileId=+atob(n.snapshot.params.id)),b.includes("/workbench/database-connection/savedQuery/")&&(n.snapshot.params.id1&&n.snapshot.params.id2&&(this.databaseId=+atob(n.snapshot.params.id1),this.qurtySetId=+atob(n.snapshot.params.id2),localStorage.setItem("QuerySetId",JSON.stringify(this.qurtySetId))),this.customSql=!0,this.tableJoiningUI=!1,this.updateQuery=!0,this.getSavedQueryData()),b.includes("/workbench/database-connection/sheets/")&&n.snapshot.params.id1&&n.snapshot.params.id2&&(this.databaseId=+atob(n.snapshot.params.id1),this.qurtySetId=+atob(n.snapshot.params.id2),localStorage.setItem("QuerySetId",JSON.stringify(this.qurtySetId)),this.fromDatabasId=!0,this.datasourceQuerysetId=atob(n.snapshot.params.id3),this.datasourceQuerysetId==="null"?(console.log("filterqrysetid",this.datasourceQuerysetId),this.datasourceQuerysetId=null):(parseInt(this.datasourceQuerysetId),console.log(this.datasourceQuerysetId)),this.getTablesfromPrevious())}ngOnInit(){document.querySelector("html")?.getAttribute("data-toggled")!=null?document.querySelector("html")?.removeAttribute("data-toggled"):document.querySelector("html")?.setAttribute("data-toggled","icon-overlay-close"),this.updateQuery||(this.fromDatabasId&&this.getSchemaTablesFromConnectedDb(),this.fromFileId&&this.getTablesFromFileId())}toggleCard(){this.isOpen=!this.isOpen}toggleSubMenu(i){i.expanded=!i.expanded}getSavedQueryData(){let i={database_id:this.databaseId,queryset_id:this.qurtySetId};this.fromFileId&&(delete i.database_id,i.file_id=this.fileId),this.workbechService.getSavedQueryData(i).subscribe({next:e=>{console.log(e),this.sqlQuery=e.custom_query,this.saveQueryName=e.query_name,this.cutmquryTable=e,this.custmQryTime=e.query_exection_time,this.custmQryRows=e.no_of_rows},error:e=>{console.log(e)}})}getTablesfromPrevious(){let i=localStorage.getItem("QuerySetId")||0;this.qurtySetId=i,i!==0&&this.workbechService.getTablesfromPrevious(this.databaseId,i).subscribe({next:e=>{console.log(e),this.relationOfTables=e.dragged_data.relation_tables,console.log("tablerelation",this.relationOfTables),this.draggedtables=e.dragged_data.json_data,this.draggedtables.length>0&&this.joiningTables()},error:e=>{console.log(e)}})}getTablesFromFileId(){this.workbechService.getTablesFromFileId(this.fileId).subscribe({next:i=>{this.schematableList=i?.data?.schemas,this.databaseName=i.filename,console.log(i)},error:i=>{console.log(i)}})}getSchemaTablesFromConnectedDb(){let i={search:this.searchTables};(i.search==""||i.search==null)&&delete i.search,this.workbechService.getSchemaTablesFromConnectedDb(this.databaseId,i).subscribe({next:e=>{this.schematableList=e?.data?.schemas,console.log("filteredscemas",this.filteredSchematableList),this.databaseName=e.database.database,this.hostName=e.database.hostname,console.log(e)},error:e=>{console.log(e)}})}filterTables(){if(Array.isArray(this.schematableList)){let i=this.schematableList.map(e=>({schema:e.schema,tables:e.tables.filter(n=>n.table.includes(this.searchTables))})).filter(e=>e.tables.length>0);i.length>0?(console.log("Filtered data:",i),this.schematableList=i):console.log("No matching tables found")}else console.log("Something went wrong")}combineArrays(i){let e=[];for(let n of i)Array.isArray(n.data)&&(e=e.concat(n.data));return e}drop(i){if(i.previousContainer===i.container)ve(i.container.data,i.previousIndex,i.currentIndex);else{console.log("Transfering item to new container");let e=i.previousContainer.data[i.previousIndex],n=JSON.parse(JSON.stringify(e)),u={};for(let b in n)b=="title",u[b]=n[b];console.log("element",u),this.pushToDraggedTables(u),console.log("darggedtable",this.draggedtables)}parseInt(this.qurtySetId)!==0?this.joiningTables():parseInt(this.qurtySetId)===0&&this.joiningTablesWithoutQuerySetId()}pushToDraggedTables(i){let e=this.draggedtables.map(k=>k.table),n=i.table,u=e.filter(k=>k.startsWith(n)).length,b=i.table,I=u;for(;e.includes(b);)b=`${i.table}_${I}`,I++;i.alias=b,this.draggedtables.push(i)}getTablerowclms(i,e){let n={database_id:this.databaseId,tables:[[e,i]]};this.workbechService.getTableData(n).subscribe({next:u=>{console.log(u),this.getTableColumns=u.column_data,this.getTableRows=u.row_data,this.tableName=u?.column_data[0]?.table},error:u=>{console.log(u)}})}onDeleteItem(i){this.draggedtables.splice(i,1),console.log(this.draggedtables);let e=i-1;this.relationOfTables.splice(e,1),this.joiningTablesFromDelete()}buildCustomRelation(){let i=this.selectedClmnT1.split("(");this.selectedClmnT1=i[0].trim();let e=this.selectedClmnT2.split("(");this.selectedClmnT2=e[0].trim();let n={database_id:this.databaseId,tables:[[this.draggedtables[0].schema,this.draggedtables[0].table],[this.draggedtables[1].schema,this.draggedtables[1].table]],condition:[[this.draggedtables[0].schema+"."+this.draggedtables[0].table+"."+this.selectedClmnT1+"="+this.draggedtables[1].schema+"."+this.draggedtables[1].table+"."+this.selectedClmnT2]]};this.workbechService.tableRelation(n).subscribe({next:u=>{console.log(u),this.relationOfTables=u[2]?.relation?.condition,console.log("relation",this.relationOfTables)},error:u=>{console.log(u)}})}clrQuery(){this.sqlQuery="",this.cutmquryTable=[],this.custmQryTime="",this.custmQryRows=""}executeQuery(){let i={database_id:this.databaseId,custom_query:this.sqlQuery};this.fromFileId&&(delete i.database_id,i.file_id=this.fileId),this.workbechService.executeQuery(i).subscribe({next:e=>{console.log(e),this.cutmquryTable=e,this.custmQryTime=e.query_exection_time,this.custmQryRows=e.no_of_rows,this.qurtySetId=e.query_set_id,console.log("dkjshd",this.cutmquryTable)},error:e=>{console.log(e),this.cutmquryTableError=e}})}updateRemainingTables(){this.remainingTables=this.draggedtables.filter(i=>i.alias!==this.selectedAliasT1),this.selectedAliasT2=this.remainingTables.length>0?this.remainingTables[0].alias:""}joiningTablesWithoutQuerySetId(){let i=this.draggedtables.map(n=>[n.schema,n.table,n.alias]),e={query_set_id:null,database_id:this.databaseId,joining_tables:i,join_type:[],joining_conditions:[],dragged_array:this.draggedtables};this.fromFileId&&(delete e.database_id,e.file_id=this.fileId),this.workbechService.joiningTables(e).subscribe({next:n=>{console.log(n),this.relationOfTables=n.table_columns_and_rows?.joining_condition,this.displayJoiningCndnsList=n.table_columns_and_rows?.joining_condition_list,this.qurtySetId=n?.table_columns_and_rows?.query_set_id,localStorage.setItem("QuerySetId",JSON.stringify(this.qurtySetId)),this.joinTypes=n?.table_columns_and_rows?.join_types,console.log("joining",n),console.log("relation",this.relationOfTables),this.getJoiningTableData()},error:n=>{console.log(n),f.default.fire({icon:"error",title:"oops!",text:n.error.message,width:"400px"})}})}joiningTables(){let i=this.draggedtables.map(n=>[n.schema,n.table,n.alias]);console.log(i),this.relationOfTables.push([]);let e={query_set_id:this.qurtySetId,database_id:this.databaseId,joining_tables:i,join_type:[],joining_conditions:this.relationOfTables,dragged_array:this.draggedtables};this.fromFileId&&(delete e.database_id,e.file_id=this.fileId),this.workbechService.joiningTables(e).subscribe({next:n=>{console.log(n),this.relationOfTables=n.table_columns_and_rows?.joining_condition,this.displayJoiningCndnsList=n.table_columns_and_rows?.joining_condition_list,this.qurtySetId=n?.table_columns_and_rows?.query_set_id,this.joinTypes=n?.table_columns_and_rows?.join_types,console.log("joining",n),console.log("relation",this.relationOfTables),this.getJoiningTableData()},error:n=>{console.log(n),f.default.fire({icon:"error",title:"oops!",text:n.error.message,width:"400px"})}})}joiningTablesFromDelete(){let i=this.draggedtables.map(n=>[n.schema,n.table,n.alias]);console.log(i);let e={query_set_id:this.qurtySetId,database_id:this.databaseId,joining_tables:i,join_type:[],joining_conditions:this.relationOfTables,dragged_array:this.draggedtables};this.fromFileId&&(delete e.database_id,e.file_id=this.fileId),this.workbechService.joiningTables(e).subscribe({next:n=>{console.log(n),this.relationOfTables=n.table_columns_and_rows?.joining_condition,this.displayJoiningCndnsList=n.table_columns_and_rows?.joining_condition_list,this.qurtySetId=n?.table_columns_and_rows?.query_set_id,this.qurtySetId===0&&(localStorage.setItem("QuerySetId","0"),this.datasourceQuerysetId=null),this.joinTypes=n?.table_columns_and_rows?.join_types,console.log("joining",n),console.log("relation",this.relationOfTables),this.getJoiningTableData()},error:n=>{console.log(n),f.default.fire({icon:"error",title:"oops!",text:n.error.message,width:"400px"})}})}customTableJoin(){let i=this.draggedtables.map(I=>[I.schema,I.table,I.alias]);console.log(i);let e=this.draggedtables.findIndex(I=>I.alias===this.selectedAliasT1),n=this.draggedtables.findIndex(I=>I.alias===this.selectedAliasT2);console.log("indexoftable1",e),console.log("indexoftable2",n);let u='"'+this.selectedAliasT1+'"."'+this.selectedClmnT1+'" '+this.selectedCndn+' "'+this.selectedAliasT2+'"."'+this.selectedClmnT2+'"',b=Math.max(e,n);if(console.log("custcon",u,"maxind",b),this.relationOfTables[b-1]||(this.relationOfTables[b-1]=[]),this.relationOfTables[b-1].push(u),console.log("customrelation",this.relationOfTables),this.joinTypes[b-1]=this.selectedJoin,console.log(this.joinTypes),i.length>=2){let I={query_set_id:this.qurtySetId,database_id:this.databaseId,joining_tables:i,join_type:this.joinTypes,joining_conditions:this.relationOfTables,dragged_array:this.draggedtables};this.workbechService.joiningTables(I).subscribe({next:k=>{console.log(k),this.relationOfTables=k.table_columns_and_rows?.joining_condition,this.displayJoiningCndnsList=k.table_columns_and_rows?.joining_condition_list,this.qurtySetId=k?.table_columns_and_rows?.query_set_id,console.log("joining",k),console.log("relation",this.relationOfTables),this.getJoiningTableData(),this.clearJoinCondns()},error:k=>{console.log(k),f.default.fire({icon:"error",title:"oops!",text:k.error.message,width:"400px"}),this.relationOfTables.pop()}})}}enableJoinButton(){this.selectedJoin&&this.selectedCndn?this.enableJoinBtn=!1:this.enableJoinBtn=!0}clearJoinCondns(){this.selectedJoin="Condition",this.selectedCndn="Operator",this.selectedClmnT1=null,this.selectedClmnT2=null,this.enableJoinButton()}getJoiningTableData(){let i={database_id:this.databaseId,query_id:this.qurtySetId,datasource_queryset_id:this.datasourceQuerysetId};this.fromFileId&&(delete i.database_id,i.file_id=this.fileId),this.workbechService.getTableJoiningData(i).subscribe({next:e=>{console.log("qury_data/tablejoined_data",e),this.TabledataJoining=e,this.qryTime=e.query_exection_time,this.qryRows=e.no_of_rows},error:e=>{console.log(e),f.default.fire({icon:"error",title:"oops!",text:e.error.message,width:"400px"})}})}deleteJoiningRelation(i){let e=this.displayJoiningCndnsList[i];console.log(e),this.relationOfTables=this.relationOfTables.map(n=>n.filter(u=>u!==e)).filter(n=>n.length>0),console.log("deletedcondfromrelatiion",this.relationOfTables),i>-1&&i<this.displayJoiningCndnsList.length&&this.displayJoiningCndnsList.splice(i,1),this.deleteRelation(e)}deleteRelation(i){let e={conditions_list:this.relationOfTables,delete_condition:i[0]};this.workbechService.deleteRelation(e).subscribe({next:n=>{console.log(n),this.relationOfTables=n.data.conditions_list,this.joiningTables()},error:n=>{console.log(n),f.default.fire({icon:"error",title:"oops!",text:n.error.message,width:"400px"})}})}openSuperScaled(i){this.modalService.open(i,{centered:!0,windowClass:"animate__animated animate__zoomIn"}),this.tableColumnFilter=!0,this.columnRowFilter=!1}openSuperScaledGetColunmns(i){this.modalService.open(i,{centered:!0,windowClass:"animate__animated animate__zoomIn"}),this.tableColumnFilter=!0,this.columnRowFilter=!1,this.callColumnWithTable()}openRowsData(i){this.modalService.open(i,{centered:!0,windowClass:"animate__animated animate__zoomIn"})}callColumnWithTable(){let i={database_id:this.databaseId,query_set_id:this.qurtySetId,type_of_filter:"datasource"};this.fromFileId&&(delete i.database_id,i.file_id=this.fileId),this.workbechService.callColumnWithTable(i).subscribe({next:e=>{console.log(e),this.columnWithTablesData=e},error:e=>{console.log(e),f.default.fire({icon:"error",title:"oops!",text:e.error.message,width:"400px"})}})}selectedColumnGetRows(i,e){let n={database_id:this.databaseId,query_set_id:this.qurtySetId,datasource_queryset_id:this.datasourceQuerysetId,type_of_filter:"datasource",col_name:i,data_type:e};this.fromFileId&&(delete n.database_id,n.file_id=this.fileId),this.colName=i,this.dataType=e,this.workbechService.selectedColumnGetRows(n).subscribe({next:u=>{console.log(u),this.columnsInFilters=u.col_data.map(b=>({label:b,selected:!1})),this.tableColumnFilter=!1,this.columnRowFilter=!0,console.log("colmnfilterrows",this.columnsInFilters)},error:u=>{console.log(u),f.default.fire({icon:"error",title:"oops!",text:u.error.message,width:"400px"})}})}updateSelectedRows(){this.selectedRows=this.columnsInFilters.filter(i=>i.selected).map(i=>i.label),console.log("selected rows",this.selectedRows),this.isAllSelected=this.columnsInFilters.every(i=>i.selected)}toggleAllRows(i){let e=i.target.checked;this.columnsInFilters.forEach(n=>n.selected=e),this.updateSelectedRows()}isAnyRowSelected(){return this.columnsInFilters.some(i=>i.selected)}getSelectedRows(){this.selectedRows=this.columnsInFilters.filter(e=>e.selected).map(e=>e.label),console.log("selected rows",this.selectedRows);let i={filter_id:null,database_id:this.databaseId,queryset_id:this.qurtySetId,type_of_filter:"datasource",datasource_querysetid:null,select_values:this.selectedRows,range_values:null,col_name:this.colName,data_type:this.dataType};this.fromFileId&&(delete i.database_id,i.file_id=this.fileId),this.workbechService.getSelectedRowsFilter(i).subscribe({next:e=>{console.log(e),this.datasourceFilterId=e.filter_id,this.datasourceFilterIdArray.push(e.filter_id),this.getDsQuerysetId(),this.modalService.dismissAll("close")},error:e=>{console.log(e),f.default.fire({icon:"error",title:"oops!",text:e.error.message,width:"400px"})}})}getDsQuerysetId(){let i={datasource_queryset_id:this.datasourceQuerysetId,queryset_id:this.qurtySetId,filter_id:this.datasourceFilterIdArray,database_id:this.databaseId};this.fromFileId&&(delete i.database_id,i.file_id=this.fileId),this.workbechService.getDsQuerysetId(i).subscribe({next:e=>{console.log(e),this.datasourceQuerysetId=e.data.datasource_queryset_id,this.tableJoiningUI&&this.getJoiningTableData(),this.customSql&&this.getfilteredCustomSqlData(),this.getFilteredList()},error:e=>{console.log(e),f.default.fire({icon:"error",title:"oops!",text:e.error.message,width:"400px"})}})}getFilteredList(){let i={query_set_id:this.qurtySetId,database_id:this.databaseId,type_of_filter:"datasource"};this.fromFileId&&(delete i.database_id,i.file_id=this.fileId),this.workbechService.getFilteredList(i).subscribe({next:e=>{console.log(e),this.filteredList=e.filters_data},error:e=>{console.log(e),f.default.fire({icon:"error",title:"oops!",text:e.error.message,width:"400px"})}})}editFilter(i){let e={type_filter:"datasource",database_id:this.databaseId,filter_id:i};this.fromFileId&&(delete e.database_id,e.file_id=this.fileId),this.workbechService.editFilter(e).subscribe({next:n=>{console.log(n),this.editFilterList=n.result,this.colName=n.column_name,this.dataType=n.data_type},error:n=>{console.log(n),f.default.fire({icon:"error",title:"oops!",text:n.error.message,width:"400px"})}})}deleteFilter(i){this.modalService.dismissAll("close"),f.default.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then(e=>{e.isConfirmed&&this.workbechService.deleteFilter(i).subscribe({next:n=>{console.log(n),n&&f.default.fire({icon:"success",title:"Removed!",text:" Filter Removed Successfully",width:"400px"}),console.log("filter ids",this.datasourceFilterIdArray),this.datasourceFilterIdArray=this.datasourceFilterIdArray.filter(u=>u!==i),this.datasourceFilterIdArray.length===0&&(this.datasourceFilterId=null),this.getDsQuerysetId(),this.getFilteredList()},error:n=>{console.log(n),f.default.fire({icon:"error",title:"oops!",text:n.error.message,width:"400px"})}})})}updateEditSelectedRows(){this.selectedRows=this.editFilterList.filter(i=>i.selected).map(i=>i.label),console.log("selected rows",this.selectedRows),this.isAllSelected=this.editFilterList.every(i=>i.selected)}toggleEditAllRows(i){let e=i.target.checked;this.editFilterList.forEach(n=>n.selected=e),this.updateEditSelectedRows()}isAnyEditRowSelected(){return this.editFilterList.some(i=>i.selected)}getSelectedRowsFromEdit(){this.selectedRows=this.editFilterList.filter(e=>e.selected).map(e=>e.label),console.log("selected rows",this.selectedRows);let i={filter_id:this.datasourceFilterId,database_id:this.databaseId,queryset_id:this.qurtySetId,type_of_filter:"datasource",datasource_querysetid:null,select_values:this.selectedRows,range_values:null,col_name:this.colName,data_type:this.dataType};this.fromFileId&&(delete i.database_id,i.file_id=this.fileId),this.workbechService.getSelectedRowsFilter(i).subscribe({next:e=>{console.log(e),this.datasourceFilterId=e.filter_id,this.getDsQuerysetId(),this.modalService.dismissAll("close")},error:e=>{console.log(e),f.default.fire({icon:"error",title:"oops!",text:e.error.message,width:"400px"})}})}getfilteredCustomSqlData(){let i={database_id:this.databaseId,query_id:this.qurtySetId,datasource_queryset_id:this.datasourceQuerysetId};this.workbechService.getTableJoiningData(i).subscribe({next:e=>{console.log("qury_data/tablejoined_data",e),this.cutmquryTable=e,this.custmQryTime=e.query_exection_time,this.custmQryRows=e.no_of_rows},error:e=>{console.log(e),f.default.fire({icon:"error",title:"oops!",text:e.error.message,width:"400px"})}})}goToConnections(){this.router.navigate(["/workbench/work-bench/view-connections"])}markDirty(){this.titleMarkDirty=!0}goToSheet(){if(this.saveQueryName==="")f.default.fire({icon:"error",title:"oops!",text:"Please enter title to save",width:"400px"});else if(this.fromFileId){let i=btoa(this.fileId.toString()),e=btoa(this.qurtySetId.toString());if(this.datasourceQuerysetId===null||this.datasourceQuerysetId===void 0){let n=btoa("null");if(this.titleMarkDirty){let u={file_id:this.fileId,query_set_id:this.qurtySetId,query_name:this.saveQueryName};this.workbechService.updateQuerySetTitle(u).subscribe({next:b=>{this.router.navigate(["/workbench/sheets/fileId/"+i+"/"+e+"/"+n])},error:b=>{console.log(b)}})}else this.router.navigate(["/workbench/sheets/fileId/"+i+"/"+e+"/"+n])}else{let n=btoa(this.datasourceQuerysetId.toString());if(this.titleMarkDirty){let u={database_id:this.databaseId,query_set_id:this.qurtySetId,query_name:this.saveQueryName};this.workbechService.updateQuerySetTitle(u).subscribe({next:b=>{this.router.navigate(["/workbench/sheets/fileId/"+i+"/"+e+"/"+n])},error:b=>{console.log(b)}})}else this.router.navigate(["/workbench/sheets/fileId/"+i+"/"+e+"/"+n])}}else if(this.fromDatabasId){let i=btoa(this.databaseId.toString()),e=btoa(this.qurtySetId.toString());if(this.datasourceQuerysetId===null||this.datasourceQuerysetId===void 0){let n=btoa("null");if(this.titleMarkDirty){let u={database_id:this.databaseId,query_set_id:this.qurtySetId,query_name:this.saveQueryName};this.workbechService.updateQuerySetTitle(u).subscribe({next:b=>{this.router.navigate(["/workbench/sheets/dbId/"+i+"/"+e+"/"+n])},error:b=>{console.log(b)}})}else this.router.navigate(["/workbench/sheets/dbId/"+i+"/"+e+"/"+n])}else{let n=btoa(this.datasourceQuerysetId.toString());if(this.titleMarkDirty){let u={database_id:this.databaseId,query_set_id:this.qurtySetId,query_name:this.saveQueryName};this.workbechService.updateQuerySetTitle(u).subscribe({next:b=>{this.router.navigate(["/workbench/sheets/dbId/"+i+"/"+e+"/"+n])},error:b=>{console.log(b)}})}else this.router.navigate(["/workbench/sheets/dbId/"+i+"/"+e+"/"+n])}}}saveQuery(){if(this.saveQueryName==="")f.default.fire({icon:"error",title:"oops!",text:"Please enter name to save query",width:"400px"});else{let i={database_id:this.databaseId,query_set_id:this.qurtySetId,query_name:this.saveQueryName,custom_query:this.sqlQuery};this.workbechService.saveQueryName(i).subscribe({next:e=>{console.log(e),e&&f.default.fire({icon:"success",title:"Done!",text:"Query Saved Successfully",width:"400px"})},error:e=>{console.log(e),f.default.fire({icon:"error",title:"oops!",text:e.error.message,width:"400px"})}})}}updateCustmQuery(){if(this.saveQueryName==="")f.default.fire({icon:"error",title:"oops!",text:"Please enter name to save query",width:"400px"});else{let i={database_id:this.databaseId,queryset_id:this.qurtySetId,query_name:this.saveQueryName,custom_query:this.sqlQuery};this.fromFileId&&(delete i.database_id,i.file_id=this.fileId),this.workbechService.updateCustmQuery(i).subscribe({next:e=>{console.log(e),this.sqlQuery=e.custom_query,this.saveQueryName=e.query_name,this.cutmquryTable=e,this.custmQryTime=e.query_exection_time,this.custmQryRows=e.no_of_rows},error:e=>{console.log(e)}})}}};s.\u0275fac=function(e){return new(e||s)(M(ke),M(Z),M(X),M(fe))},s.\u0275cmp=B({type:s,selectors:[["app-database"]],standalone:!0,features:[$],decls:10,vars:2,consts:[["content",""],["applyFiltersModal",""],["editFilters",""],["destinationList","cdkDropList"],["originList","cdkDropList"],["title","Database","title1","home","activeitem","Database"],[1,"main-container","container-fluid"],[1,"row","main-container"],[1,"col-xxl-2","col-xl-2","col-lg-2","col-md-2","p-1"],[1,"card-header","border-bottom","d-block"],[1,"d-flex","align-items-center","justify-content-between"],[1,"mb-0","border-bottom"],[3,"click"],[1,"add-txt","text-info"],[1,"mb-0",3,"ngbTooltip"],[1,"card","mb-0","p-4","br-0","border-bottom"],[1,"mb-0"],[1,"card","mb-0","br-0"],[1,"card","mb-0","br-0","pt-2",2,"height","539px"],[1,"card-header","p-1","border-bottom-0"],[1,"input-group"],["type","text","placeholder","Search Tables",1,"form-control","border-end-0",3,"ngModelChange","keyup","ngModel"],["type","button","aria-label","button",1,"btn","input-group-text","btn-primary","tx-fixed-white","border-start-0",3,"click"],["aria-hidden","true",1,"fe","fe-search"],[1,"card-body","p-1"],["ngbAccordion","","id","accordionExample",1,"accordion",3,"closeOthers"],["ngbAccordionItem","","class","accordion-item",3,"collapsed",4,"ngFor","ngForOf"],[1,"col-xl-10","col-md-12","p-1"],[1,"card-body","p-0"],[1,"col-xl-12","col-md-12","p-0"],[1,"card-header","d-flex","align-items-center","justify-content-between"],[1,"flex-grow-1"],["type","text","placeholder","Title","aria-label","Sheet",1,"form-control",3,"ngModelChange","change","ngModel"],[1,"right"],["data-bs-effect","effect-super-scaled","data-bs-toggle","modal",1,"modal-effect","btn","btn-primary","m-1"],[3,"btnClickEvent","buttonName","classesList","previledgeId","isBtn","isIcon"],[1,"d-flex"],[1,"col-xxl-6","col-xl-6","col-lg-6","col-md-6","p-0"],[1,"card","card-body","databse-T-H","mb-0","br-0","p-0"],["cdkDropList","",1,"card-body","example-list-drop","mb-0","border","border-0",3,"cdkDropListDropped","cdkDropListData"],["cdkDrag","",1,"example-box","p-2","border","border-dark-subtle"],[1,"fs-12","mt-2","mb-0","drag-txt"],[1,"card","databse-T-H","mb-0","br-0"],[1,"card-body","overflow-scroll"],[1,"tags"],[1,"col-xl-12","col-md-12","p-1"],[1,"row","p-1"],[1,"table-joining-card","p-0","col-xxl-6","col-xl-6","col-lg-6","col-md-6"],[1,""],[1,"card","br-0","joining-T-H","br-0"],[1,"m-0"],["data-bs-toggle","tooltip","ngbtooltip","fa fa-chevron-left",1,"fa","fa-chevron-left","chevron-left-icon",2,"border","none",3,"click"],[1,"card-body"],[3,"ngClass"],[1,"card","br-0","joining-T-H",3,"ngClass"],[1,"card-header","d-flex","align-items-center"],[1,"card-body","d-flex","align-items-center","justify-content-center","p-0"],[1,"modal-footer","border-0"],[2,"margin-left","36px"],[3,"buttonName","classesList","previledgeId","isBtn","isIcon"],["ngbAccordionItem","",1,"accordion-item",3,"collapsed"],["ngbAccordionHeader","",1,"accordion-header",3,"id"],["ngbAccordionButton","","type","button","data-bs-toggle","collapse","data-bs-target","#collapse","aria-expanded","true","aria-controls","collapse",1,"accordion-button","p-3","fw-500"],["ngbAccordionCollapse","","aria-labelledby","heading","data-bs-parent","#accordionExample",1,"accordion-collapse","collapse",3,"id"],["ngbAccordionBody","",1,"accordion-body","p-2","overflow-scroll","database-dropdown",2,"height","auto","max-height","350px"],["cdkDropList","",1,"sub-menu",3,"cdkDropListDropped","cdkDropListData","cdkDropListConnectedTo"],["class","sub-menu-item example-box subMenuFlex p-2","cdkDrag","",4,"ngFor","ngForOf"],["cdkDrag","",1,"sub-menu-item","example-box","subMenuFlex","p-2"],[1,"fa","fa-table",2,"padding-right","10px"],[3,"ngbTooltip"],["data-bs-effect","effect-super-scaled","data-bs-toggle","modal",1,"modal-effect","btn","btn-primary","m-1",3,"click"],[1,"fa","fa-filter"],["aria-label","anchor",1,"btn","btn-icon","btn-sm","btn-danger-light","btn-wave","waves-effect","waves-light",3,"click"],["ngbTooltip","Delete database",1,"ri-delete-bin-7-line"],["id","row16",1,"tag","rounded-pill","bg-primary","tx-fixed-white","alert"],[1,"tag-avatar","avatar","avatar-sm","bg-white","text-primary","rounded-pill"],[1,"fa","fa-circle",2,"opacity","0.5"],[1,"fa","fa-circle",2,"opacity","0.5","margin-left","-10px"],["data-bs-dismiss","alert","aria-hidden","true",1,"tag-addon","rounded-pill","bg-white-transparent",3,"click"],[1,"fe","fe-x"],[1,"gap-1","d-flex","flex-wrap","p-2"],["ngbDropdown","",1,"btn-group","my-2","dropdown"],["type","button","ngbDropdownToggle","","data-bs-toggle","dropdown","aria-expanded","false",1,"dropdown-toggle","btn","btn-info-light",2,"width","124px"],["ngbDropdownMenu","",1,"dropdown-menu","drpdwnhgt"],["type","button","ngbDropdownToggle","","data-bs-toggle","dropdown","aria-expanded","false",1,"dropdown-toggle","btn","btn-info-light",2,"width","93px"],["ngbDropdownMenu","",1,"dropdown-menu",2,"background-color","#ffffff"],["ngbDropdownItem","",1,"dropdown-item",3,"click"],["type","button","ngbDropdownToggle","","data-bs-toggle","dropdown","aria-expanded","false",1,"dropdown-toggle","btn","btn-info-light",2,"width","124px",3,"disabled"],[1,"modal-footer",2,"border-block-start","none"],["aria-expanded","false",1,"btn","btn-secondary",3,"click"],["aria-expanded","false",1,"btn","btn-primary",3,"click","disabled"],[1,"dropdown-plus-title"],["data-bs-toggle","tooltip","ngbtooltip","fa fa-chevron-left",1,"fa","fa-chevron-right","chevron-right-icon","p-2",2,"border","none"],["data-bs-toggle","tooltip","ngbtooltip","fa fa-chevron-left",1,"fa","fa-chevron-right","chevron-right-icon","p-2",2,"border","none",3,"click"],[1,"TextTransform"],[1,"table-responsive",2,"overflow-y","scroll","height","233px"],[1,"table","border","text-nowrap","text-md-nowrap","table-striped","table-bordered","mb-0"],[2,"position","sticky","top","-1px","background-color","#00a5a2"],[1,"fa","fa-table"],[1,"time"],[1,"card","mb-0","br-0",2,"height","467px","overflow-y","scroll"],[1,"sidebar"],[1,"menu-item"],[1,"card","mb-0",2,"height","250px"],["type","text","placeholder","Title","aria-label","Sheet",1,"form-control",3,"ngModelChange","ngModel"],[1,"btn","btn-blue-light","m-1",3,"click"],[1,"card-body","p-2"],["placeholder","Enter your SQL query here",1,"query-text",2,"outline","none","border","none","width","100%",3,"ngModelChange","ngModel"],[1,"modal-footer","p-1","me-4","border-0"],[3,"buttonName","classesList","previledgeId","isBtn","isIcon","btnClickEvent",4,"ngIf"],[1,"col-xl-12","col-md-12","p-0","mt-1"],[1,"card","mb-0",2,"height","349px"],["class","table-responsive","style","overflow-y: scroll;height: 233px;",4,"ngIf"],[1,"",3,"click"],[1,"arrow","d-flex"],[1,"fa","fa-chevron-down",2,"font-size","11px","color","#333335","margin-top","7px !important","margin-right","5px"],[1,"sub-menu"],[1,"fa","fa-chevron-right",2,"font-size","11px","color","#333335","margin-top","7px !important","margin-right","5px"],[1,"sub-menu-item","example-box","subMenuFlex"],[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body","p-0"],[1,"table-responsive",2,"max-height","210px"],[1,"table","table-bordered","text-nowrap","mb-0","custom-table"],[1,"modal-footer"],["type","button",1,"btn","ripple","btn-secondary",3,"click"],[1,"border-bottom","user-list"],[2,"cursor","pointer",3,"click"],["type","button",1,"btn","ripple","btn-primary",3,"click","disabled"],[1,"form-check"],["type","checkbox","id","selectAll",1,"form-check-input",3,"ngModelChange","change","ngModel"],["for","selectAll",1,"form-check-label"],[2,"width","46px"],["type","checkbox",1,"form-check-input",3,"ngModelChange","change","id","name","ngModel"],["for","defaultCheck1",1,"form-check-label"],[1,"modal-header","p-2","bg-light"],["type","button",1,"btn","ripple","btn-primary",3,"click"],[1,"hstack","justify-content-center","fs-1"],["aria-label","anchor",1,"btn","btn-icon","btn-sm","btn-info-light","btn-wave","waves-effect","waves-light",3,"click"],[1,"ri-edit-line"],["aria-label","anchor",1,"btn","btn-icon","btn-sm","btn-danger-light","btn-wave","waves-effect","waves-light",2,"margin-left","4px",3,"click"],[1,"ri-delete-bin-7-line"]],template:function(e,n){e&1&&(S(0,"app-page-header",5),a(1,"div",6),x(2,Ze,72,30,"div",7)(3,pt,52,15,"div",7)(4,wt,2,2,"ng-template",null,0,A)(6,St,15,0,"ng-template",null,1,A)(8,It,22,2,"ng-template",null,2,A),l()),e&2&&(r(2),C(2,n.tableJoiningUI?2:-1),r(),C(3,n.customSql?3:-1))},dependencies:[we,ye,Te,Se,Ce,ce,pe,me,_e,se,de,ge,he,be,ue,xe,re,oe,ne,ae,le,K,G,U,H,Y,Ie],styles:[".example-container[_ngcontent-%COMP%]{max-width:100%;max-height:611px;overflow-y:scroll;margin:0 25px 25px 0;display:inline-block;vertical-align:top}.example-list[_ngcontent-%COMP%]{width:623px;max-width:100%;border:solid 2px #eef1f8;min-height:259px;max-height:611px;background:#fff;border-radius:4px;overflow:scroll;display:flex}.example-list-drop[_ngcontent-%COMP%]{min-height:60px;max-height:254px;background:#fff;border-radius:4px;width:358px;overflow:scroll;display:block}.example-box[_ngcontent-%COMP%]{padding:20px;color:#000000de;display:flex;flex-direction:row;align-items:center;justify-content:space-between;box-sizing:border-box;cursor:move;background:#fff;font-size:14px;margin-right:5px}.cdk-drag-preview[_ngcontent-%COMP%]{box-sizing:border-box;border-radius:4px;box-shadow:0 5px 5px -3px #0003,0 8px 10px 1px #00000024,0 3px 14px 2px #0000001f}.cdk-drag-placeholder[_ngcontent-%COMP%]{opacity:0}.cdk-drag-animating[_ngcontent-%COMP%]{transition:transform .25s cubic-bezier(0,0,.2,1)}.example-box[_ngcontent-%COMP%]:last-child{border:none}.example-list.cdk-drop-list-dragging[_ngcontent-%COMP%]   .example-box[_ngcontent-%COMP%]:not(.cdk-drag-placeholder){transition:transform .25s cubic-bezier(0,0,.2,1)}.drop-zone[_ngcontent-%COMP%]{margin:40px}.side-card[_ngcontent-%COMP%]{position:relative;top:-343px;left:221px}.dropdown-menu-scrollable[_ngcontent-%COMP%]{max-height:200px!important;overflow-y:auto!important}.drag-txt[_ngcontent-%COMP%]{text-align:center;font-weight:100;color:#c1c1c1}ul.dropdown-menu[_ngcontent-%COMP%]{box-shadow:none;background-color:transparent}h6.dropdown-header[_ngcontent-%COMP%]{font-weight:700;background-color:#f0f8ff}.card-header[_ngcontent-%COMP%]{background-color:#fff}.sidebar[_ngcontent-%COMP%]{width:230px;padding:10px}.menu-item[_ngcontent-%COMP%]{margin-bottom:10px}.menu-title[_ngcontent-%COMP%]{cursor:pointer;font-weight:700;display:flex;justify-content:space-between}.sub-menu[_ngcontent-%COMP%]{margin-top:5px;padding-left:10px}.sub-menu-item[_ngcontent-%COMP%]{padding:5px 0;margin-bottom:5px}.arrow[_ngcontent-%COMP%]{font-size:18px;font-weight:600;margin-left:-18px;padding-left:35px!important;cursor:pointer}.right-card.expanded[_ngcontent-%COMP%]{max-width:1226px;min-width:1226px;margin:auto 0}button.TextTransform[_ngcontent-%COMP%]{top:178px;position:absolute;transform:translate(0) rotate(270deg);left:-124px;padding:10px 88px;border:none;border-bottom:1px solid #9b9999}.drpdwnhgt[_ngcontent-%COMP%]{height:220px;overflow-y:scroll;background-color:#fff!important}.table-left[_ngcontent-%COMP%]{margin-left:48px}.table-right[_ngcontent-%COMP%]{margin-left:0!important}.subMenuFlex[_ngcontent-%COMP%]{display:flex;justify-content:flex-start}.databse-T-H[_ngcontent-%COMP%]{height:250px}.ds-th[_ngcontent-%COMP%]{height:540px;overflow-y:scroll}a[_ngcontent-%COMP%]{cursor:pointer}.cdk-drag.sub-menu-item.example-box.subMenuFlex[_ngcontent-%COMP%]:hover{background-color:#f0f8ff}.table-card-header[_ngcontent-%COMP%]{background-color:#f2fafa}.table[_ngcontent-%COMP%] > [_ngcontent-%COMP%]:not(:last-child) > [_ngcontent-%COMP%]:last-child > *[_ngcontent-%COMP%]{border-block-end-color:var(--default-border);color:#fff}.chevron-right-icon[_ngcontent-%COMP%], .chevron-left-icon[_ngcontent-%COMP%]{cursor:pointer}span.time[_ngcontent-%COMP%]{background-color:#5ac189;color:#fff;padding:3px 10px;border-radius:5px;margin:5px}.swal2-container[_ngcontent-%COMP%]{display:-webkit-box;display:flex;position:fixed;z-index:3000000!important}[_ngcontent-%COMP%]::-webkit-scrollbar{width:5px}[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#fff!important}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#c0c0c0a8!important}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#000}.custom-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{height:40px}.custom-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:4px 8px 1px 12px}.query-text[_ngcontent-%COMP%]{width:100%;height:122px;min-height:122px;max-height:122px;overflow-y:scroll;outline:none;border:1px solid #edebeb;border-radius:5px}"],data:{animation:[ee("toggle",[J("open",N({width:"610px",opacity:1})),J("closed",N({width:"0px",opacity:0,display:"none"})),ie("open <=> closed",[te("0.3s ease-in-out")])])]}});let o=s;return o})();export{Jt as DatabaseComponent};
