import{a as T}from"./chunk-3CUW3WNJ.js";import{a as B}from"./chunk-CYKCQD5B.js";import{A,U as D,c as k,d as c,e as N,f as F,k as P,n as j,p as R,y as _}from"./chunk-GR2TZYVC.js";import"./chunk-LOSEKLOO.js";import{Cb as o,Gc as x,Ja as l,Ka as n,Kb as w,Kc as C,Lc as E,Oc as I,Pa as b,Za as d,cb as S,ec as y,ga as f,ib as t,jb as i,kb as m,rb as p,xa as v}from"./chunk-CB3CSPGG.js";import"./chunk-BRV2THHE.js";import{f as O}from"./chunk-WT5K5NLM.js";var h=O(B());var W=(()=>{let a=class a{toggleVisibility(){this.showPassword=!this.showPassword,this.toggleClass==="off-line"?this.toggleClass="line":this.toggleClass="off-line"}toggleVisibility1(){this.showPassword1=!this.showPassword1,this.toggleClass1==="off-line"?this.toggleClass1="line":this.toggleClass1="off-line"}constructor(e,s,r,g,L,M,V,z){this.document=e,this.elementRef=s,this.router=r,this.renderer=g,this.rolesService=L,this.sanitizer=M,this.formBuilder=V,this.authService=z,this.showPassword=!1,this.showPassword1=!1,this.toggleClass="off-line",this.toggleClass1="off-line",this.loginForm=this.formBuilder.group({email:["",[c.required,c.pattern("^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,4}$")]],password:["",c.required]})}get f(){return this.loginForm.controls}ngOnInit(){this.renderer.addClass(this.document.body,"login-img"),this.renderer.addClass(this.document.body,"ltr")}ngOnDestroy(){this.renderer.removeClass(this.document.body,"login-img"),this.renderer.removeClass(this.document.body,"ltr")}onSubmit(){this.authService.login(this.f.email.value,this.f.password.value).subscribe({next:e=>{console.log(e);let s={Token:e.accessToken},r={userName:e.username};localStorage.setItem("currentUser",JSON.stringify(s)),localStorage.setItem("username",JSON.stringify(r)),e.previlages&&this.rolesService.setRoleBasedPreviledges(e.previlages),e.accessToken&&this.router.navigate(["workbench/landingpage"])},error:e=>{console.log(e),e.error.message==="Account is in In-Active, please Activate your account"?(h.default.fire({icon:"error",title:"oops!",text:e.error.message,width:"400px"}),this.router.navigate(["/authentication/email-reactivation"])):h.default.fire({icon:"error",title:"oops!",text:e.error.message,width:"400px"})}})}};a.\u0275fac=function(s){return new(s||a)(n(y),n(v),n(C),n(b),n(T),n(x),n(_),n(D))},a.\u0275cmp=f({type:a,selectors:[["app-login"]],standalone:!0,features:[w],decls:46,vars:6,consts:[[1,""],[1,"text-center"],["src","./assets/images/brand/insightappstext.png","alt","",1,"header-brand-img"],[1,"container-lg"],[1,"row","justify-content-center","mt-4","mx-0"],[1,"col-xl-4","col-lg-6"],[1,"card","shadow-none"],[1,"card-body","p-sm-6"],[1,"text-center","mb-4"],[1,"mb-1"],[1,"row",3,"ngSubmit","formGroup"],[1,"col-sm-12"],[1,"mb-3"],[1,"mb-2","fw-500"],[1,"text-danger","ms-1"],["type","email","formControlName","email","placeholder","Enter your Email",1,"form-control","ms-0"],[1,"input-group","has-validation"],["type","password","id","input-password","formControlName","password","placeholder","Password",1,"form-control",3,"type"],["type","button","id","button-addon21",1,"btn","btn-light",3,"click"],[1,"col-xl-12"],[1,"d-flex","mb-3"],[1,"ms-auto"],["routerLink","/authentication/forgot-password",1,"tx-primary","ms-1","tx-13"],[1,"d-grid","mb-3"],["routerLink","/dashboard","type","submit",1,"btn","btn-primary",3,"disabled"],[1,"mb-0","tx-14"],["routerLink","/authentication/register",1,"tx-primary","ms-1","text-decoration-underline"]],template:function(s,r){s&1&&(t(0,"div",0)(1,"div",1)(2,"a"),m(3,"img",2),i()()(),t(4,"div",3)(5,"div",4)(6,"div",5)(7,"div",6)(8,"div",7)(9,"div",8)(10,"h4",9),o(11,"Sign In"),i(),t(12,"p"),o(13,"Sign in to your account to continue."),i()(),t(14,"div",10),p("ngSubmit",function(){return r.onSubmit()}),t(15,"form")(16,"div",11)(17,"div",12)(18,"label",13),o(19,"Email"),t(20,"span",14),o(21,"*"),i()(),m(22,"input",15),i()(),t(23,"div",11)(24,"div",12)(25,"label",13),o(26,"Password"),t(27,"span",14),o(28,"*"),i()(),t(29,"div",16),m(30,"input",17),t(31,"button",18),p("click",function(){return r.toggleVisibility1()}),m(32,"i"),i()()()(),t(33,"div",19)(34,"div",20)(35,"div",21)(36,"a",22),o(37,"Forgot Password?"),i()()(),t(38,"div",23)(39,"button",24),o(40," Login"),i()(),t(41,"div",1)(42,"p",25),o(43,"Don't have an account yet? "),t(44,"a",26),o(45,"Sign Up"),i()()()()()()()()()()()),s&2&&(l(14),d("formGroup",r.loginForm),l(16),d("type",r.showPassword1?"text":"password"),l(2),S("ri-eye-",r.toggleClass1," align-middle"),l(7),d("disabled",!r.loginForm.valid))},dependencies:[I,E,A,P,k,N,F,j,R]});let u=a;return u})();export{W as LoginComponent};
