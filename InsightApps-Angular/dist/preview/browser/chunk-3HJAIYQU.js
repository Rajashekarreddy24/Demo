import{a as Zu,b as Qu,c as wr}from"./chunk-AUA2ZVHF.js";import{a as Ku,b as rl}from"./chunk-MMIPX5P7.js";import{c as Bt,d as $o,e as br,f as qn,g as St,h as ol,i as Et,j as Yo,k as oi,l as nl,m as $t,n as sl,o as $u,p as Yu,q as Kn,r as Xu,s as oo,t as qu}from"./chunk-G7HRDCEB.js";import{a as tl,b as il}from"./chunk-EIEFFRCX.js";import{a as pr,c as Xn,d as Hu,n as Wu,p as ju,q as Uu,t as Gu}from"./chunk-TFGPENSM.js";import{c as zu,d as gr,f as Go,g as mr,i as fr}from"./chunk-DUBUW4ZU.js";import{a as Fu,z as Ou}from"./chunk-GR2TZYVC.js";import{$a as ii,$b as Dt,Ab as rt,Ba as rr,Bb as el,Cb as Lu,Db as Ru,E as Cu,G as Au,Ja as pi,Jb as io,K as Su,Ka as ce,Kb as $n,La as Wo,Mb as Nu,Na as Pu,Nb as Vu,P as Eu,R as nr,Ra as eo,S as Tu,Sa as ar,U as Bo,Ua as Un,Wa as to,Xa as Vi,Ya as lr,Za as bi,_ as sr,_a as Mu,_b as Yn,a as Do,aa as zo,ac as ur,b as wu,ba as Fo,bb as cr,c as jn,da as qa,db as Ka,ec as Du,f as ku,fa as Oe,fb as Za,ga as fi,gb as Qa,ha as Oo,hb as Ja,ia as Ji,ib as Nt,j as vu,jb as wi,kb as jo,n as xu,oa as Ho,ob as Uo,pa as Ke,qa as Ze,rb as ki,sb as vi,tb as dr,tc as Bu,u as ir,ub as hr,v as yu,x as or,xa as ti,xb as Gn,y as _u,ya as He,yb as Vt,za as Iu,zb as st}from"./chunk-CB3CSPGG.js";import{a as B,b as Ce,c as No,d as Vo,f as Xa,h as Qi,i as Ae}from"./chunk-WT5K5NLM.js";var yg=Vo((bl,_r)=>{"use strict";function Ju(s,e){var t=Object.keys(s);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(s);e&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(s,o).enumerable})),t.push.apply(t,i)}return t}function F(s){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Ju(Object(t),!0).forEach(function(i){kr(s,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(t)):Ju(Object(t)).forEach(function(i){Object.defineProperty(s,i,Object.getOwnPropertyDescriptor(t,i))})}return s}function Ue(s){return Ue=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ue(s)}function H(s,e){if(!(s instanceof e))throw new TypeError("Cannot call a class as a function")}function eg(s,e){for(var t=0;t<e.length;t++){var i=e[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(s,i.key,i)}}function W(s,e,t){return e&&eg(s.prototype,e),t&&eg(s,t),s}function kr(s,e,t){return e in s?Object.defineProperty(s,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):s[e]=t,s}function ts(s,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");s.prototype=Object.create(e&&e.prototype,{constructor:{value:s,writable:!0,configurable:!0}}),e&&gl(s,e)}function vr(s){return vr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},vr(s)}function gl(s,e){return gl=Object.setPrototypeOf||function(t,i){return t.__proto__=i,t},gl(s,e)}function sg(s){if(s===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return s}function is(s){var e=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var t,i=vr(s);if(e){var o=vr(this).constructor;t=Reflect.construct(i,arguments,o)}else t=i.apply(this,arguments);return function(n,r){if(r&&(typeof r=="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return sg(n)}(this,t)}}function rg(s,e){return function(t){if(Array.isArray(t))return t}(s)||function(t,i){var o=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(o!=null){var n,r,a=[],l=!0,c=!1;try{for(o=o.call(t);!(l=(n=o.next()).done)&&(a.push(n.value),!i||a.length!==i);l=!0);}catch(d){c=!0,r=d}finally{try{l||o.return==null||o.return()}finally{if(c)throw r}}return a}}(s,e)||ag(s,e)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function at(s){return function(e){if(Array.isArray(e))return ml(e)}(s)||function(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}(s)||ag(s)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function ag(s,e){if(s){if(typeof s=="string")return ml(s,e);var t=Object.prototype.toString.call(s).slice(8,-1);return t==="Object"&&s.constructor&&(t=s.constructor.name),t==="Map"||t==="Set"?Array.from(s):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?ml(s,e):void 0}}function ml(s,e){(e==null||e>s.length)&&(e=s.length);for(var t=0,i=new Array(e);t<e;t++)i[t]=s[t];return i}var T=function(){function s(){H(this,s)}return W(s,[{key:"shadeRGBColor",value:function(e,t){var i=t.split(","),o=e<0?0:255,n=e<0?-1*e:e,r=parseInt(i[0].slice(4),10),a=parseInt(i[1],10),l=parseInt(i[2],10);return"rgb("+(Math.round((o-r)*n)+r)+","+(Math.round((o-a)*n)+a)+","+(Math.round((o-l)*n)+l)+")"}},{key:"shadeHexColor",value:function(e,t){var i=parseInt(t.slice(1),16),o=e<0?0:255,n=e<0?-1*e:e,r=i>>16,a=i>>8&255,l=255&i;return"#"+(16777216+65536*(Math.round((o-r)*n)+r)+256*(Math.round((o-a)*n)+a)+(Math.round((o-l)*n)+l)).toString(16).slice(1)}},{key:"shadeColor",value:function(e,t){return s.isColorHex(t)?this.shadeHexColor(e,t):this.shadeRGBColor(e,t)}}],[{key:"bind",value:function(e,t){return function(){return e.apply(t,arguments)}}},{key:"isObject",value:function(e){return e&&Ue(e)==="object"&&!Array.isArray(e)&&e!=null}},{key:"is",value:function(e,t){return Object.prototype.toString.call(t)==="[object "+e+"]"}},{key:"listToArray",value:function(e){var t,i=[];for(t=0;t<e.length;t++)i[t]=e[t];return i}},{key:"extend",value:function(e,t){var i=this;typeof Object.assign!="function"&&(Object.assign=function(n){if(n==null)throw new TypeError("Cannot convert undefined or null to object");for(var r=Object(n),a=1;a<arguments.length;a++){var l=arguments[a];if(l!=null)for(var c in l)l.hasOwnProperty(c)&&(r[c]=l[c])}return r});var o=Object.assign({},e);return this.isObject(e)&&this.isObject(t)&&Object.keys(t).forEach(function(n){i.isObject(t[n])&&n in e?o[n]=i.extend(e[n],t[n]):Object.assign(o,kr({},n,t[n]))}),o}},{key:"extendArray",value:function(e,t){var i=[];return e.map(function(o){i.push(s.extend(t,o))}),e=i}},{key:"monthMod",value:function(e){return e%12}},{key:"clone",value:function(e){if(s.is("Array",e)){for(var t=[],i=0;i<e.length;i++)t[i]=this.clone(e[i]);return t}if(s.is("Null",e))return null;if(s.is("Date",e))return e;if(Ue(e)==="object"){var o={};for(var n in e)e.hasOwnProperty(n)&&(o[n]=this.clone(e[n]));return o}return e}},{key:"log10",value:function(e){return Math.log(e)/Math.LN10}},{key:"roundToBase10",value:function(e){return Math.pow(10,Math.floor(Math.log10(e)))}},{key:"roundToBase",value:function(e,t){return Math.pow(t,Math.floor(Math.log(e)/Math.log(t)))}},{key:"parseNumber",value:function(e){return e===null?e:parseFloat(e)}},{key:"stripNumber",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2;return Number.isInteger(e)?e:parseFloat(e.toPrecision(t))}},{key:"randomId",value:function(){return(Math.random()+1).toString(36).substring(4)}},{key:"noExponents",value:function(e){var t=String(e).split(/[eE]/);if(t.length===1)return t[0];var i="",o=e<0?"-":"",n=t[0].replace(".",""),r=Number(t[1])+1;if(r<0){for(i=o+"0.";r++;)i+="0";return i+n.replace(/^-/,"")}for(r-=n.length;r--;)i+="0";return n+i}},{key:"getDimensions",value:function(e){var t=getComputedStyle(e,null),i=e.clientHeight,o=e.clientWidth;return i-=parseFloat(t.paddingTop)+parseFloat(t.paddingBottom),[o-=parseFloat(t.paddingLeft)+parseFloat(t.paddingRight),i]}},{key:"getBoundingClientRect",value:function(e){var t=e.getBoundingClientRect();return{top:t.top,right:t.right,bottom:t.bottom,left:t.left,width:e.clientWidth,height:e.clientHeight,x:t.left,y:t.top}}},{key:"getLargestStringFromArr",value:function(e){return e.reduce(function(t,i){return Array.isArray(i)&&(i=i.reduce(function(o,n){return o.length>n.length?o:n})),t.length>i.length?t:i},0)}},{key:"hexToRgba",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"#999999",t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:.6;e.substring(0,1)!=="#"&&(e="#999999");var i=e.replace("#","");i=i.match(new RegExp("(.{"+i.length/3+"})","g"));for(var o=0;o<i.length;o++)i[o]=parseInt(i[o].length===1?i[o]+i[o]:i[o],16);return t!==void 0&&i.push(t),"rgba("+i.join(",")+")"}},{key:"getOpacityFromRGBA",value:function(e){return parseFloat(e.replace(/^.*,(.+)\)/,"$1"))}},{key:"rgb2hex",value:function(e){return(e=e.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?/i))&&e.length===4?"#"+("0"+parseInt(e[1],10).toString(16)).slice(-2)+("0"+parseInt(e[2],10).toString(16)).slice(-2)+("0"+parseInt(e[3],10).toString(16)).slice(-2):""}},{key:"isColorHex",value:function(e){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)|(^#[0-9A-F]{8}$)/i.test(e)}},{key:"getPolygonPos",value:function(e,t){for(var i=[],o=2*Math.PI/t,n=0;n<t;n++){var r={};r.x=e*Math.sin(n*o),r.y=-e*Math.cos(n*o),i.push(r)}return i}},{key:"polarToCartesian",value:function(e,t,i,o){var n=(o-90)*Math.PI/180;return{x:e+i*Math.cos(n),y:t+i*Math.sin(n)}}},{key:"escapeString",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"x",i=e.toString().slice();return i=i.replace(/[` ~!@#$%^&*()|+\=?;:'",.<>{}[\]\\/]/gi,t)}},{key:"negToZero",value:function(e){return e<0?0:e}},{key:"moveIndexInArray",value:function(e,t,i){if(i>=e.length)for(var o=i-e.length+1;o--;)e.push(void 0);return e.splice(i,0,e.splice(t,1)[0]),e}},{key:"extractNumber",value:function(e){return parseFloat(e.replace(/[^\d.]*/g,""))}},{key:"findAncestor",value:function(e,t){for(;(e=e.parentElement)&&!e.classList.contains(t););return e}},{key:"setELstyles",value:function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e.style.key=t[i])}},{key:"preciseAddition",value:function(e,t){var i=(String(e).split(".")[1]||"").length,o=(String(t).split(".")[1]||"").length,n=Math.pow(10,Math.max(i,o));return(Math.round(e*n)+Math.round(t*n))/n}},{key:"isNumber",value:function(e){return!isNaN(e)&&parseFloat(Number(e))===e&&!isNaN(parseInt(e,10))}},{key:"isFloat",value:function(e){return Number(e)===e&&e%1!=0}},{key:"isSafari",value:function(){return/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}},{key:"isFirefox",value:function(){return navigator.userAgent.toLowerCase().indexOf("firefox")>-1}},{key:"isIE11",value:function(){if(window.navigator.userAgent.indexOf("MSIE")!==-1||window.navigator.appVersion.indexOf("Trident/")>-1)return!0}},{key:"isIE",value:function(){var e=window.navigator.userAgent,t=e.indexOf("MSIE ");if(t>0)return parseInt(e.substring(t+5,e.indexOf(".",t)),10);if(e.indexOf("Trident/")>0){var i=e.indexOf("rv:");return parseInt(e.substring(i+3,e.indexOf(".",i)),10)}var o=e.indexOf("Edge/");return o>0&&parseInt(e.substring(o+5,e.indexOf(".",o)),10)}},{key:"getGCD",value:function(e,t){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:7,o=Math.pow(10,i-Math.floor(Math.log10(Math.max(e,t))));for(e=Math.round(Math.abs(e)*o),t=Math.round(Math.abs(t)*o);t;){var n=t;t=e%t,e=n}return e/o}},{key:"getPrimeFactors",value:function(e){for(var t=[],i=2;e>=2;)e%i==0?(t.push(i),e/=i):i++;return t}},{key:"mod",value:function(e,t){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:7,o=Math.pow(10,i-Math.floor(Math.log10(Math.max(e,t))));return(e=Math.round(Math.abs(e)*o))%(t=Math.round(Math.abs(t)*o))/o}}]),s}(),Ko=function(){function s(e){H(this,s),this.ctx=e,this.w=e.w,this.setEasingFunctions()}return W(s,[{key:"setEasingFunctions",value:function(){var e;if(!this.w.globals.easing){switch(this.w.config.chart.animations.easing){case"linear":e="-";break;case"easein":e="<";break;case"easeout":e=">";break;case"easeinout":default:e="<>";break;case"swing":e=function(t){var i=1.70158;return(t-=1)*t*((i+1)*t+i)+1};break;case"bounce":e=function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375};break;case"elastic":e=function(t){return t===!!t?t:Math.pow(2,-10*t)*Math.sin((t-.075)*(2*Math.PI)/.3)+1}}this.w.globals.easing=e}}},{key:"animateLine",value:function(e,t,i,o){e.attr(t).animate(o).attr(i)}},{key:"animateMarker",value:function(e,t,i,o){e.attr({opacity:0}).animate(t,i).attr({opacity:1}).afterAll(function(){o()})}},{key:"animateRect",value:function(e,t,i,o,n){e.attr(t).animate(o).attr(i).afterAll(function(){return n()})}},{key:"animatePathsGradually",value:function(e){var t=e.el,i=e.realIndex,o=e.j,n=e.fill,r=e.pathFrom,a=e.pathTo,l=e.speed,c=e.delay,d=this.w,h=0;d.config.chart.animations.animateGradually.enabled&&(h=d.config.chart.animations.animateGradually.delay),d.config.chart.animations.dynamicAnimation.enabled&&d.globals.dataChanged&&d.config.chart.type!=="bar"&&(h=0),this.morphSVG(t,i,o,d.config.chart.type!=="line"||d.globals.comboCharts?n:"stroke",r,a,l,c*h)}},{key:"showDelayedElements",value:function(){this.w.globals.delayedElements.forEach(function(e){var t=e.el;t.classList.remove("apexcharts-element-hidden"),t.classList.add("apexcharts-hidden-element-shown")})}},{key:"animationCompleted",value:function(e){var t=this.w;t.globals.animationEnded||(t.globals.animationEnded=!0,this.showDelayedElements(),typeof t.config.chart.events.animationEnd=="function"&&t.config.chart.events.animationEnd(this.ctx,{el:e,w:t}))}},{key:"morphSVG",value:function(e,t,i,o,n,r,a,l){var c=this,d=this.w;n||(n=e.attr("pathFrom")),r||(r=e.attr("pathTo"));var h=function(g){return d.config.chart.type==="radar"&&(a=1),"M 0 ".concat(d.globals.gridHeight)};(!n||n.indexOf("undefined")>-1||n.indexOf("NaN")>-1)&&(n=h()),(!r||r.indexOf("undefined")>-1||r.indexOf("NaN")>-1)&&(r=h()),d.globals.shouldAnimate||(a=1),e.plot(n).animate(1,d.globals.easing,l).plot(n).animate(a,d.globals.easing,l).plot(r).afterAll(function(){T.isNumber(i)?i===d.globals.series[d.globals.maxValsInArrayIndex].length-2&&d.globals.shouldAnimate&&c.animationCompleted(e):o!=="none"&&d.globals.shouldAnimate&&(!d.globals.comboCharts&&t===d.globals.series.length-1||d.globals.comboCharts)&&c.animationCompleted(e),c.showDelayedElements()})}}]),s}(),lt=function(){function s(e){H(this,s),this.ctx=e,this.w=e.w}return W(s,[{key:"getDefaultFilter",value:function(e,t){var i=this.w;e.unfilter(!0),new window.SVG.Filter().size("120%","180%","-5%","-40%"),i.config.states.normal.filter!=="none"?this.applyFilter(e,t,i.config.states.normal.filter.type,i.config.states.normal.filter.value):i.config.chart.dropShadow.enabled&&this.dropShadow(e,i.config.chart.dropShadow,t)}},{key:"addNormalFilter",value:function(e,t){var i=this.w;i.config.chart.dropShadow.enabled&&!e.node.classList.contains("apexcharts-marker")&&this.dropShadow(e,i.config.chart.dropShadow,t)}},{key:"addLightenFilter",value:function(e,t,i){var o=this,n=this.w,r=i.intensity;e.unfilter(!0),new window.SVG.Filter,e.filter(function(a){var l=n.config.chart.dropShadow;(l.enabled?o.addShadow(a,t,l):a).componentTransfer({rgb:{type:"linear",slope:1.5,intercept:r}})}),e.filterer.node.setAttribute("filterUnits","userSpaceOnUse"),this._scaleFilterSize(e.filterer.node)}},{key:"addDarkenFilter",value:function(e,t,i){var o=this,n=this.w,r=i.intensity;e.unfilter(!0),new window.SVG.Filter,e.filter(function(a){var l=n.config.chart.dropShadow;(l.enabled?o.addShadow(a,t,l):a).componentTransfer({rgb:{type:"linear",slope:r}})}),e.filterer.node.setAttribute("filterUnits","userSpaceOnUse"),this._scaleFilterSize(e.filterer.node)}},{key:"applyFilter",value:function(e,t,i){var o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:.5;switch(i){case"none":this.addNormalFilter(e,t);break;case"lighten":this.addLightenFilter(e,t,{intensity:o});break;case"darken":this.addDarkenFilter(e,t,{intensity:o})}}},{key:"addShadow",value:function(e,t,i){var o,n=this.w,r=i.blur,a=i.top,l=i.left,c=i.color,d=i.opacity;if(((o=n.config.chart.dropShadow.enabledOnSeries)===null||o===void 0?void 0:o.length)>0&&n.config.chart.dropShadow.enabledOnSeries.indexOf(t)===-1)return e;var h=e.flood(Array.isArray(c)?c[t]:c,d).composite(e.sourceAlpha,"in").offset(l,a).gaussianBlur(r).merge(e.source);return e.blend(e.source,h)}},{key:"dropShadow",value:function(e,t){var i,o,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,r=t.top,a=t.left,l=t.blur,c=t.color,d=t.opacity,h=t.noUserSpaceOnUse,g=this.w;return e.unfilter(!0),T.isIE()&&g.config.chart.type==="radialBar"||((i=g.config.chart.dropShadow.enabledOnSeries)===null||i===void 0?void 0:i.length)>0&&((o=g.config.chart.dropShadow.enabledOnSeries)===null||o===void 0?void 0:o.indexOf(n))===-1||(c=Array.isArray(c)?c[n]:c,e.filter(function(m){var p=null;p=T.isSafari()||T.isFirefox()||T.isIE()?m.flood(c,d).composite(m.sourceAlpha,"in").offset(a,r).gaussianBlur(l):m.flood(c,d).composite(m.sourceAlpha,"in").offset(a,r).gaussianBlur(l).merge(m.source),m.blend(m.source,p)}),h||e.filterer.node.setAttribute("filterUnits","userSpaceOnUse"),this._scaleFilterSize(e.filterer.node)),e}},{key:"setSelectionFilter",value:function(e,t,i){var o=this.w;if(o.globals.selectedDataPoints[t]!==void 0&&o.globals.selectedDataPoints[t].indexOf(i)>-1){e.node.setAttribute("selected",!0);var n=o.config.states.active.filter;n!=="none"&&this.applyFilter(e,t,n.type,n.value)}}},{key:"_scaleFilterSize",value:function(e){(function(t){for(var i in t)t.hasOwnProperty(i)&&e.setAttribute(i,t[i])})({width:"200%",height:"200%",x:"-50%",y:"-50%"})}}]),s}(),N=function(){function s(e){H(this,s),this.ctx=e,this.w=e.w}return W(s,[{key:"roundPathCorners",value:function(e,t){function i(C,A,S){var P=A.x-C.x,L=A.y-C.y,I=Math.sqrt(P*P+L*L);return o(C,A,Math.min(1,S/I))}function o(C,A,S){return{x:C.x+(A.x-C.x)*S,y:C.y+(A.y-C.y)*S}}function n(C,A){C.length>2&&(C[C.length-2]=A.x,C[C.length-1]=A.y)}function r(C){return{x:parseFloat(C[C.length-2]),y:parseFloat(C[C.length-1])}}e.indexOf("NaN")>-1&&(e="");var a=e.split(/[,\s]/).reduce(function(C,A){var S=A.match("([a-zA-Z])(.+)");return S?(C.push(S[1]),C.push(S[2])):C.push(A),C},[]).reduce(function(C,A){return parseFloat(A)==A&&C.length?C[C.length-1].push(A):C.push([A]),C},[]),l=[];if(a.length>1){var c=r(a[0]),d=null;a[a.length-1][0]=="Z"&&a[0].length>2&&(d=["L",c.x,c.y],a[a.length-1]=d),l.push(a[0]);for(var h=1;h<a.length;h++){var g=l[l.length-1],m=a[h],p=m==d?a[1]:a[h+1];if(p&&g&&g.length>2&&m[0]=="L"&&p.length>2&&p[0]=="L"){var b,k,v=r(g),x=r(m),u=r(p);b=i(x,v,t),k=i(x,u,t),n(m,b),m.origPoint=x,l.push(m);var f=o(b,x,.5),w=o(x,k,.5),y=["C",f.x,f.y,w.x,w.y,k.x,k.y];y.origPoint=x,l.push(y)}else l.push(m)}if(d){var _=r(l[l.length-1]);l.push(["Z"]),n(l[0],_)}}else l=a;return l.reduce(function(C,A){return C+A.join(" ")+" "},"")}},{key:"drawLine",value:function(e,t,i,o){var n=arguments.length>4&&arguments[4]!==void 0?arguments[4]:"#a8a8a8",r=arguments.length>5&&arguments[5]!==void 0?arguments[5]:0,a=arguments.length>6&&arguments[6]!==void 0?arguments[6]:null,l=arguments.length>7&&arguments[7]!==void 0?arguments[7]:"butt";return this.w.globals.dom.Paper.line().attr({x1:e,y1:t,x2:i,y2:o,stroke:n,"stroke-dasharray":r,"stroke-width":a,"stroke-linecap":l})}},{key:"drawRect",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,n=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0,r=arguments.length>5&&arguments[5]!==void 0?arguments[5]:"#fefefe",a=arguments.length>6&&arguments[6]!==void 0?arguments[6]:1,l=arguments.length>7&&arguments[7]!==void 0?arguments[7]:null,c=arguments.length>8&&arguments[8]!==void 0?arguments[8]:null,d=arguments.length>9&&arguments[9]!==void 0?arguments[9]:0,h=this.w.globals.dom.Paper.rect();return h.attr({x:e,y:t,width:i>0?i:0,height:o>0?o:0,rx:n,ry:n,opacity:a,"stroke-width":l!==null?l:0,stroke:c!==null?c:"none","stroke-dasharray":d}),h.node.setAttribute("fill",r),h}},{key:"drawPolygon",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"#e1e1e1",i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"none";return this.w.globals.dom.Paper.polygon(e).attr({fill:o,stroke:t,"stroke-width":i})}},{key:"drawCircle",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;e<0&&(e=0);var i=this.w.globals.dom.Paper.circle(2*e);return t!==null&&i.attr(t),i}},{key:"drawPath",value:function(e){var t=e.d,i=t===void 0?"":t,o=e.stroke,n=o===void 0?"#a8a8a8":o,r=e.strokeWidth,a=r===void 0?1:r,l=e.fill,c=e.fillOpacity,d=c===void 0?1:c,h=e.strokeOpacity,g=h===void 0?1:h,m=e.classes,p=e.strokeLinecap,b=p===void 0?null:p,k=e.strokeDashArray,v=k===void 0?0:k,x=this.w;return b===null&&(b=x.config.stroke.lineCap),(i.indexOf("undefined")>-1||i.indexOf("NaN")>-1)&&(i="M 0 ".concat(x.globals.gridHeight)),x.globals.dom.Paper.path(i).attr({fill:l,"fill-opacity":d,stroke:n,"stroke-opacity":g,"stroke-linecap":b,"stroke-width":a,"stroke-dasharray":v,class:m})}},{key:"group",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,t=this.w.globals.dom.Paper.group();return e!==null&&t.attr(e),t}},{key:"move",value:function(e,t){var i=["M",e,t].join(" ");return i}},{key:"line",value:function(e,t){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,o=null;return i===null?o=[" L",e,t].join(" "):i==="H"?o=[" H",e].join(" "):i==="V"&&(o=[" V",t].join(" ")),o}},{key:"curve",value:function(e,t,i,o,n,r){var a=["C",e,t,i,o,n,r].join(" ");return a}},{key:"quadraticCurve",value:function(e,t,i,o){return["Q",e,t,i,o].join(" ")}},{key:"arc",value:function(e,t,i,o,n,r,a){var l="A";arguments.length>7&&arguments[7]!==void 0&&arguments[7]&&(l="a");var c=[l,e,t,i,o,n,r,a].join(" ");return c}},{key:"renderPaths",value:function(e){var t,i=e.j,o=e.realIndex,n=e.pathFrom,r=e.pathTo,a=e.stroke,l=e.strokeWidth,c=e.strokeLinecap,d=e.fill,h=e.animationDelay,g=e.initialSpeed,m=e.dataChangeSpeed,p=e.className,b=e.shouldClipToGrid,k=b===void 0||b,v=e.bindEventsOnPaths,x=v===void 0||v,u=e.drawShadow,f=u===void 0||u,w=this.w,y=new lt(this.ctx),_=new Ko(this.ctx),C=this.w.config.chart.animations.enabled,A=C&&this.w.config.chart.animations.dynamicAnimation.enabled,S=!!(C&&!w.globals.resized||A&&w.globals.dataChanged&&w.globals.shouldAnimate);S?t=n:(t=r,w.globals.animationEnded=!0);var P=w.config.stroke.dashArray,L=0;L=Array.isArray(P)?P[o]:w.config.stroke.dashArray;var I=this.drawPath({d:t,stroke:a,strokeWidth:l,fill:d,fillOpacity:1,classes:p,strokeLinecap:c,strokeDashArray:L});if(I.attr("index",o),k&&I.attr({"clip-path":"url(#gridRectMask".concat(w.globals.cuid,")")}),w.config.states.normal.filter.type!=="none")y.getDefaultFilter(I,o);else if(w.config.chart.dropShadow.enabled&&f){var R=w.config.chart.dropShadow;y.dropShadow(I,R,o)}x&&(I.node.addEventListener("mouseenter",this.pathMouseEnter.bind(this,I)),I.node.addEventListener("mouseleave",this.pathMouseLeave.bind(this,I)),I.node.addEventListener("mousedown",this.pathMouseDown.bind(this,I))),I.attr({pathTo:r,pathFrom:n});var z={el:I,j:i,realIndex:o,pathFrom:n,pathTo:r,fill:d,strokeWidth:l,delay:h};return!C||w.globals.resized||w.globals.dataChanged?!w.globals.resized&&w.globals.dataChanged||_.showDelayedElements():_.animatePathsGradually(F(F({},z),{},{speed:g})),w.globals.dataChanged&&A&&S&&_.animatePathsGradually(F(F({},z),{},{speed:m})),I}},{key:"drawPattern",value:function(e,t,i){var o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"#a8a8a8",n=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;return this.w.globals.dom.Paper.pattern(t,i,function(r){e==="horizontalLines"?r.line(0,0,i,0).stroke({color:o,width:n+1}):e==="verticalLines"?r.line(0,0,0,t).stroke({color:o,width:n+1}):e==="slantedLines"?r.line(0,0,t,i).stroke({color:o,width:n}):e==="squares"?r.rect(t,i).fill("none").stroke({color:o,width:n}):e==="circles"&&r.circle(t).fill("none").stroke({color:o,width:n})})}},{key:"drawGradient",value:function(e,t,i,o,n){var r,a=arguments.length>5&&arguments[5]!==void 0?arguments[5]:null,l=arguments.length>6&&arguments[6]!==void 0?arguments[6]:null,c=arguments.length>7&&arguments[7]!==void 0?arguments[7]:null,d=arguments.length>8&&arguments[8]!==void 0?arguments[8]:0,h=this.w;t.length<9&&t.indexOf("#")===0&&(t=T.hexToRgba(t,o)),i.length<9&&i.indexOf("#")===0&&(i=T.hexToRgba(i,n));var g=0,m=1,p=1,b=null;l!==null&&(g=l[0]!==void 0?l[0]/100:0,m=l[1]!==void 0?l[1]/100:1,p=l[2]!==void 0?l[2]/100:1,b=l[3]!==void 0?l[3]/100:null);var k=!(h.config.chart.type!=="donut"&&h.config.chart.type!=="pie"&&h.config.chart.type!=="polarArea"&&h.config.chart.type!=="bubble");if(r=c===null||c.length===0?h.globals.dom.Paper.gradient(k?"radial":"linear",function(u){u.at(g,t,o),u.at(m,i,n),u.at(p,i,n),b!==null&&u.at(b,t,o)}):h.globals.dom.Paper.gradient(k?"radial":"linear",function(u){(Array.isArray(c[d])?c[d]:c).forEach(function(f){u.at(f.offset/100,f.color,f.opacity)})}),k){var v=h.globals.gridWidth/2,x=h.globals.gridHeight/2;h.config.chart.type!=="bubble"?r.attr({gradientUnits:"userSpaceOnUse",cx:v,cy:x,r:a}):r.attr({cx:.5,cy:.5,r:.8,fx:.2,fy:.2})}else e==="vertical"?r.from(0,0).to(0,1):e==="diagonal"?r.from(0,0).to(1,1):e==="horizontal"?r.from(0,1).to(1,1):e==="diagonal2"&&r.from(1,0).to(0,1);return r}},{key:"getTextBasedOnMaxWidth",value:function(e){var t=e.text,i=e.maxWidth,o=e.fontSize,n=e.fontFamily,r=this.getTextRects(t,o,n),a=r.width/t.length,l=Math.floor(i/a);return i<r.width?t.slice(0,l-3)+"...":t}},{key:"drawText",value:function(e){var t=this,i=e.x,o=e.y,n=e.text,r=e.textAnchor,a=e.fontSize,l=e.fontFamily,c=e.fontWeight,d=e.foreColor,h=e.opacity,g=e.maxWidth,m=e.cssClass,p=m===void 0?"":m,b=e.isPlainText,k=b===void 0||b,v=e.dominantBaseline,x=v===void 0?"auto":v,u=this.w;n===void 0&&(n="");var f=n;r||(r="start"),d&&d.length||(d=u.config.chart.foreColor),l=l||u.config.chart.fontFamily,c=c||"regular";var w,y={maxWidth:g,fontSize:a=a||"11px",fontFamily:l};return Array.isArray(n)?w=u.globals.dom.Paper.text(function(_){for(var C=0;C<n.length;C++)f=n[C],g&&(f=t.getTextBasedOnMaxWidth(F({text:n[C]},y))),C===0?_.tspan(f):_.tspan(f).newLine()}):(g&&(f=this.getTextBasedOnMaxWidth(F({text:n},y))),w=k?u.globals.dom.Paper.plain(n):u.globals.dom.Paper.text(function(_){return _.tspan(f)})),w.attr({x:i,y:o,"text-anchor":r,"dominant-baseline":x,"font-size":a,"font-family":l,"font-weight":c,fill:d,class:"apexcharts-text "+p}),w.node.style.fontFamily=l,w.node.style.opacity=h,w}},{key:"getMarkerPath",value:function(e,t,i,o){var n="";switch(i){case"cross":n="M ".concat(e-(o/=1.4)," ").concat(t-o," L ").concat(e+o," ").concat(t+o,"  M ").concat(e-o," ").concat(t+o," L ").concat(e+o," ").concat(t-o);break;case"plus":n="M ".concat(e-(o/=1.12)," ").concat(t," L ").concat(e+o," ").concat(t,"  M ").concat(e," ").concat(t-o," L ").concat(e," ").concat(t+o);break;case"star":case"sparkle":var r=5;o*=1.15,i==="sparkle"&&(o/=1.1,r=4);for(var a=Math.PI/r,l=0;l<=2*r;l++){var c=l*a,d=l%2==0?o:o/2;n+=(l===0?"M":"L")+(e+d*Math.sin(c))+","+(t-d*Math.cos(c))}n+="Z";break;case"triangle":n="M ".concat(e," ").concat(t-o,` 
             L `).concat(e+o," ").concat(t+o,` 
             L `).concat(e-o," ").concat(t+o,` 
             Z`);break;case"square":case"rect":n="M ".concat(e-(o/=1.125)," ").concat(t-o,` 
           L `).concat(e+o," ").concat(t-o,` 
           L `).concat(e+o," ").concat(t+o,` 
           L `).concat(e-o," ").concat(t+o,` 
           Z`);break;case"diamond":o*=1.05,n="M ".concat(e," ").concat(t-o,` 
             L `).concat(e+o," ").concat(t,` 
             L `).concat(e," ").concat(t+o,` 
             L `).concat(e-o," ").concat(t,` 
            Z`);break;case"line":n="M ".concat(e-(o/=1.1)," ").concat(t,` 
           L `).concat(e+o," ").concat(t);break;default:o*=2,n="M ".concat(e,", ").concat(t,` 
           m -`).concat(o/2,`, 0 
           a `).concat(o/2,",").concat(o/2," 0 1,0 ").concat(o,`,0 
           a `).concat(o/2,",").concat(o/2," 0 1,0 -").concat(o,",0")}return n}},{key:"drawMarkerShape",value:function(e,t,i,o,n){var r=this.drawPath({d:this.getMarkerPath(e,t,i,o,n),stroke:n.pointStrokeColor,strokeDashArray:n.pointStrokeDashArray,strokeWidth:n.pointStrokeWidth,fill:n.pointFillColor,fillOpacity:n.pointFillOpacity,strokeOpacity:n.pointStrokeOpacity});return r.attr({cx:e,cy:t,shape:n.shape,class:n.class?n.class:""}),r}},{key:"drawMarker",value:function(e,t,i){e=e||0;var o=i.pSize||0;return T.isNumber(t)||(o=0,t=0),this.drawMarkerShape(e,t,i?.shape,o,F(F({},i),i.shape==="line"||i.shape==="plus"||i.shape==="cross"?{pointStrokeColor:i.pointFillColor,pointStrokeOpacity:i.pointFillOpacity}:{}))}},{key:"pathMouseEnter",value:function(e,t){var i=this.w,o=new lt(this.ctx),n=parseInt(e.node.getAttribute("index"),10),r=parseInt(e.node.getAttribute("j"),10);if(typeof i.config.chart.events.dataPointMouseEnter=="function"&&i.config.chart.events.dataPointMouseEnter(t,this.ctx,{seriesIndex:n,dataPointIndex:r,w:i}),this.ctx.events.fireEvent("dataPointMouseEnter",[t,this.ctx,{seriesIndex:n,dataPointIndex:r,w:i}]),(i.config.states.active.filter.type==="none"||e.node.getAttribute("selected")!=="true")&&i.config.states.hover.filter.type!=="none"&&!i.globals.isTouchDevice){var a=i.config.states.hover.filter;o.applyFilter(e,n,a.type,a.value)}}},{key:"pathMouseLeave",value:function(e,t){var i=this.w,o=new lt(this.ctx),n=parseInt(e.node.getAttribute("index"),10),r=parseInt(e.node.getAttribute("j"),10);typeof i.config.chart.events.dataPointMouseLeave=="function"&&i.config.chart.events.dataPointMouseLeave(t,this.ctx,{seriesIndex:n,dataPointIndex:r,w:i}),this.ctx.events.fireEvent("dataPointMouseLeave",[t,this.ctx,{seriesIndex:n,dataPointIndex:r,w:i}]),i.config.states.active.filter.type!=="none"&&e.node.getAttribute("selected")==="true"||i.config.states.hover.filter.type!=="none"&&o.getDefaultFilter(e,n)}},{key:"pathMouseDown",value:function(e,t){var i=this.w,o=new lt(this.ctx),n=parseInt(e.node.getAttribute("index"),10),r=parseInt(e.node.getAttribute("j"),10),a="false";if(e.node.getAttribute("selected")==="true"){if(e.node.setAttribute("selected","false"),i.globals.selectedDataPoints[n].indexOf(r)>-1){var l=i.globals.selectedDataPoints[n].indexOf(r);i.globals.selectedDataPoints[n].splice(l,1)}}else{if(!i.config.states.active.allowMultipleDataPointsSelection&&i.globals.selectedDataPoints.length>0){i.globals.selectedDataPoints=[];var c=i.globals.dom.Paper.select(".apexcharts-series path").members,d=i.globals.dom.Paper.select(".apexcharts-series circle, .apexcharts-series rect").members,h=function(p){Array.prototype.forEach.call(p,function(b){b.node.setAttribute("selected","false"),o.getDefaultFilter(b,n)})};h(c),h(d)}e.node.setAttribute("selected","true"),a="true",i.globals.selectedDataPoints[n]===void 0&&(i.globals.selectedDataPoints[n]=[]),i.globals.selectedDataPoints[n].push(r)}if(a==="true"){var g=i.config.states.active.filter;if(g!=="none")o.applyFilter(e,n,g.type,g.value);else if(i.config.states.hover.filter!=="none"&&!i.globals.isTouchDevice){var m=i.config.states.hover.filter;o.applyFilter(e,n,m.type,m.value)}}else i.config.states.active.filter.type!=="none"&&(i.config.states.hover.filter.type==="none"||i.globals.isTouchDevice?o.getDefaultFilter(e,n):(m=i.config.states.hover.filter,o.applyFilter(e,n,m.type,m.value)));typeof i.config.chart.events.dataPointSelection=="function"&&i.config.chart.events.dataPointSelection(t,this.ctx,{selectedDataPoints:i.globals.selectedDataPoints,seriesIndex:n,dataPointIndex:r,w:i}),t&&this.ctx.events.fireEvent("dataPointSelection",[t,this.ctx,{selectedDataPoints:i.globals.selectedDataPoints,seriesIndex:n,dataPointIndex:r,w:i}])}},{key:"rotateAroundCenter",value:function(e){var t={};return e&&typeof e.getBBox=="function"&&(t=e.getBBox()),{x:t.x+t.width/2,y:t.y+t.height/2}}},{key:"getTextRects",value:function(e,t,i,o){var n=!(arguments.length>4&&arguments[4]!==void 0)||arguments[4],r=this.w,a=this.drawText({x:-200,y:-200,text:e,textAnchor:"start",fontSize:t,fontFamily:i,foreColor:"#fff",opacity:0});o&&a.attr("transform",o),r.globals.dom.Paper.add(a);var l=a.bbox();return n||(l=a.node.getBoundingClientRect()),a.remove(),{width:l.width,height:l.height}}},{key:"placeTextWithEllipsis",value:function(e,t,i){if(typeof e.getComputedTextLength=="function"&&(e.textContent=t,t.length>0&&e.getComputedTextLength()>=i/1.1)){for(var o=t.length-3;o>0;o-=3)if(e.getSubStringLength(0,o)<=i/1.1)return void(e.textContent=t.substring(0,o)+"...");e.textContent="."}}}],[{key:"setAttrs",value:function(e,t){for(var i in t)t.hasOwnProperty(i)&&e.setAttribute(i,t[i])}}]),s}(),De=function(){function s(e){H(this,s),this.ctx=e,this.w=e.w}return W(s,[{key:"getStackedSeriesTotals",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=this.w,i=[];if(t.globals.series.length===0)return i;for(var o=0;o<t.globals.series[t.globals.maxValsInArrayIndex].length;o++){for(var n=0,r=0;r<t.globals.series.length;r++)t.globals.series[r][o]!==void 0&&e.indexOf(r)===-1&&(n+=t.globals.series[r][o]);i.push(n)}return i}},{key:"getSeriesTotalByIndex",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;return e===null?this.w.config.series.reduce(function(t,i){return t+i},0):this.w.globals.series[e].reduce(function(t,i){return t+i},0)}},{key:"getStackedSeriesTotalsByGroups",value:function(){var e=this,t=this.w,i=[];return t.globals.seriesGroups.forEach(function(o){var n=[];t.config.series.forEach(function(a,l){o.indexOf(t.globals.seriesNames[l])>-1&&n.push(l)});var r=t.globals.series.map(function(a,l){return n.indexOf(l)===-1?l:-1}).filter(function(a){return a!==-1});i.push(e.getStackedSeriesTotals(r))}),i}},{key:"setSeriesYAxisMappings",value:function(){var e=this.w.globals,t=this.w.config,i=[],o=[],n=[],r=e.series.length>t.yaxis.length||t.yaxis.some(function(h){return Array.isArray(h.seriesName)});t.series.forEach(function(h,g){n.push(g),o.push(null)}),t.yaxis.forEach(function(h,g){i[g]=[]});var a=[];t.yaxis.forEach(function(h,g){var m=!1;if(h.seriesName){var p=[];Array.isArray(h.seriesName)?p=h.seriesName:p.push(h.seriesName),p.forEach(function(b){t.series.forEach(function(k,v){if(k.name===b){var x=v;g===v||r?!r||n.indexOf(v)>-1?i[g].push([g,v]):console.warn("Series '"+k.name+"' referenced more than once in what looks like the new style. That is, when using either seriesName: [], or when there are more series than yaxes."):(i[v].push([v,g]),x=g),m=!0,(x=n.indexOf(x))!==-1&&n.splice(x,1)}})})}m||a.push(g)}),i=i.map(function(h,g){var m=[];return h.forEach(function(p){o[p[1]]=p[0],m.push(p[1])}),m});for(var l=t.yaxis.length-1,c=0;c<a.length&&(l=a[c],i[l]=[],n);c++){var d=n[0];n.shift(),i[l].push(d),o[d]=l}n.forEach(function(h){i[l].push(h),o[h]=l}),e.seriesYAxisMap=i.map(function(h){return h}),e.seriesYAxisReverseMap=o.map(function(h){return h}),e.seriesYAxisMap.forEach(function(h,g){h.forEach(function(m){t.series[m]&&t.series[m].group===void 0&&(t.series[m].group="apexcharts-axis-".concat(g.toString()))})})}},{key:"isSeriesNull",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;return(e===null?this.w.config.series.filter(function(t){return t!==null}):this.w.config.series[e].data.filter(function(t){return t!==null})).length===0}},{key:"seriesHaveSameValues",value:function(e){return this.w.globals.series[e].every(function(t,i,o){return t===o[0]})}},{key:"getCategoryLabels",value:function(e){var t=this.w,i=e.slice();return t.config.xaxis.convertedCatToNumeric&&(i=e.map(function(o,n){return t.config.xaxis.labels.formatter(o-t.globals.minX+1)})),i}},{key:"getLargestSeries",value:function(){var e=this.w;e.globals.maxValsInArrayIndex=e.globals.series.map(function(t){return t.length}).indexOf(Math.max.apply(Math,e.globals.series.map(function(t){return t.length})))}},{key:"getLargestMarkerSize",value:function(){var e=this.w,t=0;return e.globals.markers.size.forEach(function(i){t=Math.max(t,i)}),e.config.markers.discrete&&e.config.markers.discrete.length&&e.config.markers.discrete.forEach(function(i){t=Math.max(t,i.size)}),t>0&&(t+=e.config.markers.hover.sizeOffset+1),e.globals.markers.largestSize=t,t}},{key:"getSeriesTotals",value:function(){var e=this.w;e.globals.seriesTotals=e.globals.series.map(function(t,i){var o=0;if(Array.isArray(t))for(var n=0;n<t.length;n++)o+=t[n];else o+=t;return o})}},{key:"getSeriesTotalsXRange",value:function(e,t){var i=this.w;return i.globals.series.map(function(o,n){for(var r=0,a=0;a<o.length;a++)i.globals.seriesX[n][a]>e&&i.globals.seriesX[n][a]<t&&(r+=o[a]);return r})}},{key:"getPercentSeries",value:function(){var e=this.w;e.globals.seriesPercent=e.globals.series.map(function(t,i){var o=[];if(Array.isArray(t))for(var n=0;n<t.length;n++){var r=e.globals.stackedSeriesTotals[n],a=0;r&&(a=100*t[n]/r),o.push(a)}else{var l=100*t/e.globals.seriesTotals.reduce(function(c,d){return c+d},0);o.push(l)}return o})}},{key:"getCalculatedRatios",value:function(){var e,t,i,o=this,n=this.w,r=n.globals,a=[],l=0,c=[],d=.1,h=0;if(r.yRange=[],r.isMultipleYAxis)for(var g=0;g<r.minYArr.length;g++)r.yRange.push(Math.abs(r.minYArr[g]-r.maxYArr[g])),c.push(0);else r.yRange.push(Math.abs(r.minY-r.maxY));r.xRange=Math.abs(r.maxX-r.minX),r.zRange=Math.abs(r.maxZ-r.minZ);for(var m=0;m<r.yRange.length;m++)a.push(r.yRange[m]/r.gridHeight);if(t=r.xRange/r.gridWidth,e=r.yRange/r.gridWidth,i=r.xRange/r.gridHeight,(l=r.zRange/r.gridHeight*16)||(l=1),r.minY!==Number.MIN_VALUE&&Math.abs(r.minY)!==0&&(r.hasNegs=!0),n.globals.seriesYAxisReverseMap.length>0){var p=function(k,v){var x=n.config.yaxis[n.globals.seriesYAxisReverseMap[v]],u=k<0?-1:1;return k=Math.abs(k),x.logarithmic&&(k=o.getBaseLog(x.logBase,k)),-u*k/a[v]};if(r.isMultipleYAxis){c=[];for(var b=0;b<a.length;b++)c.push(p(r.minYArr[b],b))}else(c=[]).push(p(r.minY,0)),r.minY!==Number.MIN_VALUE&&Math.abs(r.minY)!==0&&(d=-r.minY/e,h=r.minX/t)}else(c=[]).push(0),d=0,h=0;return{yRatio:a,invertedYRatio:e,zRatio:l,xRatio:t,invertedXRatio:i,baseLineInvertedY:d,baseLineY:c,baseLineX:h}}},{key:"getLogSeries",value:function(e){var t=this,i=this.w;return i.globals.seriesLog=e.map(function(o,n){var r=i.globals.seriesYAxisReverseMap[n];return i.config.yaxis[r]&&i.config.yaxis[r].logarithmic?o.map(function(a){return a===null?null:t.getLogVal(i.config.yaxis[r].logBase,a,n)}):o}),i.globals.invalidLogScale?e:i.globals.seriesLog}},{key:"getBaseLog",value:function(e,t){return Math.log(t)/Math.log(e)}},{key:"getLogVal",value:function(e,t,i){if(t<=0)return 0;var o=this.w,n=o.globals.minYArr[i]===0?-1:this.getBaseLog(e,o.globals.minYArr[i]),r=(o.globals.maxYArr[i]===0?0:this.getBaseLog(e,o.globals.maxYArr[i]))-n;return t<1?t/r:(this.getBaseLog(e,t)-n)/r}},{key:"getLogYRatios",value:function(e){var t=this,i=this.w,o=this.w.globals;return o.yLogRatio=e.slice(),o.logYRange=o.yRange.map(function(n,r){var a=i.globals.seriesYAxisReverseMap[r];if(i.config.yaxis[a]&&t.w.config.yaxis[a].logarithmic){var l,c=-Number.MAX_VALUE,d=Number.MIN_VALUE;return o.seriesLog.forEach(function(h,g){h.forEach(function(m){i.config.yaxis[g]&&i.config.yaxis[g].logarithmic&&(c=Math.max(m,c),d=Math.min(m,d))})}),l=Math.pow(o.yRange[r],Math.abs(d-c)/o.yRange[r]),o.yLogRatio[r]=l/o.gridHeight,l}}),o.invalidLogScale?e.slice():o.yLogRatio}},{key:"drawSeriesByGroup",value:function(e,t,i,o){var n=this.w,r=[];return e.series.length>0&&t.forEach(function(a){var l=[],c=[];e.i.forEach(function(d,h){n.config.series[d].group===a&&(l.push(e.series[h]),c.push(d))}),l.length>0&&r.push(o.draw(l,i,c))}),r}}],[{key:"checkComboSeries",value:function(e,t){var i=!1,o=0,n=0;return t===void 0&&(t="line"),e.length&&e[0].type!==void 0&&e.forEach(function(r){r.type!=="bar"&&r.type!=="column"&&r.type!=="candlestick"&&r.type!=="boxPlot"||o++,r.type!==void 0&&r.type!==t&&n++}),n>0&&(i=!0),{comboBarCount:o,comboCharts:i}}},{key:"extendArrayProps",value:function(e,t,i){var o,n,r,a,l,c;return(o=t)!==null&&o!==void 0&&o.yaxis&&(t=e.extendYAxis(t,i)),(n=t)!==null&&n!==void 0&&n.annotations&&(t.annotations.yaxis&&(t=e.extendYAxisAnnotations(t)),(r=t)!==null&&r!==void 0&&(a=r.annotations)!==null&&a!==void 0&&a.xaxis&&(t=e.extendXAxisAnnotations(t)),(l=t)!==null&&l!==void 0&&(c=l.annotations)!==null&&c!==void 0&&c.points&&(t=e.extendPointAnnotations(t))),t}}]),s}(),Cr=function(){function s(e){H(this,s),this.w=e.w,this.annoCtx=e}return W(s,[{key:"setOrientations",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,i=this.w;if(e.label.orientation==="vertical"){var o=t!==null?t:0,n=i.globals.dom.baseEl.querySelector(".apexcharts-xaxis-annotations .apexcharts-xaxis-annotation-label[rel='".concat(o,"']"));if(n!==null){var r=n.getBoundingClientRect();n.setAttribute("x",parseFloat(n.getAttribute("x"))-r.height+4),e.label.position==="top"?n.setAttribute("y",parseFloat(n.getAttribute("y"))+r.width):n.setAttribute("y",parseFloat(n.getAttribute("y"))-r.width);var a=this.annoCtx.graphics.rotateAroundCenter(n),l=a.x,c=a.y;n.setAttribute("transform","rotate(-90 ".concat(l," ").concat(c,")"))}}}},{key:"addBackgroundToAnno",value:function(e,t){var i=this.w;if(!e||t.label.text===void 0||t.label.text!==void 0&&!String(t.label.text).trim())return null;var o=i.globals.dom.baseEl.querySelector(".apexcharts-grid").getBoundingClientRect(),n=e.getBoundingClientRect(),r=t.label.style.padding.left,a=t.label.style.padding.right,l=t.label.style.padding.top,c=t.label.style.padding.bottom;t.label.orientation==="vertical"&&(l=t.label.style.padding.left,c=t.label.style.padding.right,r=t.label.style.padding.top,a=t.label.style.padding.bottom);var d=n.left-o.left-r,h=n.top-o.top-l,g=this.annoCtx.graphics.drawRect(d-i.globals.barPadForNumericAxis,h,n.width+r+a,n.height+l+c,t.label.borderRadius,t.label.style.background,1,t.label.borderWidth,t.label.borderColor,0);return t.id&&g.node.classList.add(t.id),g}},{key:"annotationsBackground",value:function(){var e=this,t=this.w,i=function(o,n,r){var a=t.globals.dom.baseEl.querySelector(".apexcharts-".concat(r,"-annotations .apexcharts-").concat(r,"-annotation-label[rel='").concat(n,"']"));if(a){var l=a.parentNode,c=e.addBackgroundToAnno(a,o);c&&(l.insertBefore(c.node,a),o.label.mouseEnter&&c.node.addEventListener("mouseenter",o.label.mouseEnter.bind(e,o)),o.label.mouseLeave&&c.node.addEventListener("mouseleave",o.label.mouseLeave.bind(e,o)),o.label.click&&c.node.addEventListener("click",o.label.click.bind(e,o)))}};t.config.annotations.xaxis.map(function(o,n){i(o,n,"xaxis")}),t.config.annotations.yaxis.map(function(o,n){i(o,n,"yaxis")}),t.config.annotations.points.map(function(o,n){i(o,n,"point")})}},{key:"getY1Y2",value:function(e,t){var i,o=e==="y1"?t.y:t.y2,n=!1,r=this.w;if(this.annoCtx.invertAxis){var a=r.globals.labels;r.config.xaxis.convertedCatToNumeric&&(a=r.globals.categoryLabels);var l=a.indexOf(o),c=r.globals.dom.baseEl.querySelector(".apexcharts-yaxis-texts-g text:nth-child("+(l+1)+")");i=c?parseFloat(c.getAttribute("y")):(r.globals.gridHeight/a.length-1)*(l+1)-r.globals.barHeight,t.seriesIndex!==void 0&&r.globals.barHeight&&(i=i-r.globals.barHeight/2*(r.globals.series.length-1)+r.globals.barHeight*t.seriesIndex)}else{var d,h=r.globals.seriesYAxisMap[t.yAxisIndex][0];r.config.yaxis[t.yAxisIndex].logarithmic?d=(o=new De(this.annoCtx.ctx).getLogVal(r.config.yaxis[t.yAxisIndex].logBase,o,h))/r.globals.yLogRatio[h]:d=(o-r.globals.minYArr[h])/(r.globals.yRange[h]/r.globals.gridHeight),d>r.globals.gridHeight?(d=r.globals.gridHeight,n=!0):d<0&&(d=0,n=!0),i=r.globals.gridHeight-d,!t.marker||t.y!==void 0&&t.y!==null||(i=0),r.config.yaxis[t.yAxisIndex]&&r.config.yaxis[t.yAxisIndex].reversed&&(i=d)}return typeof o=="string"&&o.indexOf("px")>-1&&(i=parseFloat(o)),{yP:i,clipped:n}}},{key:"getX1X2",value:function(e,t){var i,o=e==="x1"?t.x:t.x2,n=this.w,r=this.annoCtx.invertAxis?n.globals.minY:n.globals.minX,a=this.annoCtx.invertAxis?n.globals.maxY:n.globals.maxX,l=this.annoCtx.invertAxis?n.globals.yRange[0]:n.globals.xRange,c=!1;return i=this.annoCtx.inversedReversedAxis?(a-o)/(l/n.globals.gridWidth):(o-r)/(l/n.globals.gridWidth),n.config.xaxis.type!=="category"&&!n.config.xaxis.convertedCatToNumeric||this.annoCtx.invertAxis||n.globals.dataFormatXNumeric||n.config.chart.sparkline.enabled||(i=this.getStringX(o)),typeof o=="string"&&o.indexOf("px")>-1&&(i=parseFloat(o)),o==null&&t.marker&&(i=n.globals.gridWidth),t.seriesIndex!==void 0&&n.globals.barWidth&&!this.annoCtx.invertAxis&&(i=i-n.globals.barWidth/2*(n.globals.series.length-1)+n.globals.barWidth*t.seriesIndex),i>n.globals.gridWidth?(i=n.globals.gridWidth,c=!0):i<0&&(i=0,c=!0),{x:i,clipped:c}}},{key:"getStringX",value:function(e){var t=this.w,i=e;t.config.xaxis.convertedCatToNumeric&&t.globals.categoryLabels.length&&(e=t.globals.categoryLabels.indexOf(e)+1);var o=t.globals.labels.indexOf(e),n=t.globals.dom.baseEl.querySelector(".apexcharts-xaxis-texts-g text:nth-child("+(o+1)+")");return n&&(i=parseFloat(n.getAttribute("x"))),i}}]),s}(),Cw=function(){function s(e){H(this,s),this.w=e.w,this.annoCtx=e,this.invertAxis=this.annoCtx.invertAxis,this.helpers=new Cr(this.annoCtx)}return W(s,[{key:"addXaxisAnnotation",value:function(e,t,i){var o,n=this.w,r=this.helpers.getX1X2("x1",e),a=r.x,l=r.clipped,c=!0,d=e.label.text,h=e.strokeDashArray;if(T.isNumber(a)){if(e.x2===null||e.x2===void 0){if(!l){var g=this.annoCtx.graphics.drawLine(a+e.offsetX,0+e.offsetY,a+e.offsetX,n.globals.gridHeight+e.offsetY,e.borderColor,h,e.borderWidth);t.appendChild(g.node),e.id&&g.node.classList.add(e.id)}}else{var m=this.helpers.getX1X2("x2",e);if(o=m.x,c=m.clipped,!l||!c){if(o<a){var p=a;a=o,o=p}var b=this.annoCtx.graphics.drawRect(a+e.offsetX,0+e.offsetY,o-a,n.globals.gridHeight+e.offsetY,0,e.fillColor,e.opacity,1,e.borderColor,h);b.node.classList.add("apexcharts-annotation-rect"),b.attr("clip-path","url(#gridRectMask".concat(n.globals.cuid,")")),t.appendChild(b.node),e.id&&b.node.classList.add(e.id)}}if(!l||!c){var k=this.annoCtx.graphics.getTextRects(d,parseFloat(e.label.style.fontSize)),v=e.label.position==="top"?4:e.label.position==="center"?n.globals.gridHeight/2+(e.label.orientation==="vertical"?k.width/2:0):n.globals.gridHeight,x=this.annoCtx.graphics.drawText({x:a+e.label.offsetX,y:v+e.label.offsetY-(e.label.orientation==="vertical"?e.label.position==="top"?k.width/2-12:-k.width/2:0),text:d,textAnchor:e.label.textAnchor,fontSize:e.label.style.fontSize,fontFamily:e.label.style.fontFamily,fontWeight:e.label.style.fontWeight,foreColor:e.label.style.color,cssClass:"apexcharts-xaxis-annotation-label ".concat(e.label.style.cssClass," ").concat(e.id?e.id:"")});x.attr({rel:i}),t.appendChild(x.node),this.annoCtx.helpers.setOrientations(e,i)}}}},{key:"drawXAxisAnnotations",value:function(){var e=this,t=this.w,i=this.annoCtx.graphics.group({class:"apexcharts-xaxis-annotations"});return t.config.annotations.xaxis.map(function(o,n){e.addXaxisAnnotation(o,i.node,n)}),i}}]),s}(),Qe=function(){function s(e){H(this,s),this.ctx=e,this.w=e.w,this.months31=[1,3,5,7,8,10,12],this.months30=[2,4,6,9,11],this.daysCntOfYear=[0,31,59,90,120,151,181,212,243,273,304,334]}return W(s,[{key:"isValidDate",value:function(e){return typeof e!="number"&&!isNaN(this.parseDate(e))}},{key:"getTimeStamp",value:function(e){return Date.parse(e)?this.w.config.xaxis.labels.datetimeUTC?new Date(new Date(e).toISOString().substr(0,25)).getTime():new Date(e).getTime():e}},{key:"getDate",value:function(e){return this.w.config.xaxis.labels.datetimeUTC?new Date(new Date(e).toUTCString()):new Date(e)}},{key:"parseDate",value:function(e){var t=Date.parse(e);if(!isNaN(t))return this.getTimeStamp(e);var i=Date.parse(e.replace(/-/g,"/").replace(/[a-z]+/gi," "));return i=this.getTimeStamp(i)}},{key:"parseDateWithTimezone",value:function(e){return Date.parse(e.replace(/-/g,"/").replace(/[a-z]+/gi," "))}},{key:"formatDate",value:function(e,t){var i=this.w.globals.locale,o=this.w.config.xaxis.labels.datetimeUTC,n=["\0"].concat(at(i.months)),r=[""].concat(at(i.shortMonths)),a=[""].concat(at(i.days)),l=[""].concat(at(i.shortDays));function c(C,A){var S=C+"";for(A=A||2;S.length<A;)S="0"+S;return S}var d=o?e.getUTCFullYear():e.getFullYear();t=(t=(t=t.replace(/(^|[^\\])yyyy+/g,"$1"+d)).replace(/(^|[^\\])yy/g,"$1"+d.toString().substr(2,2))).replace(/(^|[^\\])y/g,"$1"+d);var h=(o?e.getUTCMonth():e.getMonth())+1;t=(t=(t=(t=t.replace(/(^|[^\\])MMMM+/g,"$1"+n[0])).replace(/(^|[^\\])MMM/g,"$1"+r[0])).replace(/(^|[^\\])MM/g,"$1"+c(h))).replace(/(^|[^\\])M/g,"$1"+h);var g=o?e.getUTCDate():e.getDate();t=(t=(t=(t=t.replace(/(^|[^\\])dddd+/g,"$1"+a[0])).replace(/(^|[^\\])ddd/g,"$1"+l[0])).replace(/(^|[^\\])dd/g,"$1"+c(g))).replace(/(^|[^\\])d/g,"$1"+g);var m=o?e.getUTCHours():e.getHours(),p=m>12?m-12:m===0?12:m;t=(t=(t=(t=t.replace(/(^|[^\\])HH+/g,"$1"+c(m))).replace(/(^|[^\\])H/g,"$1"+m)).replace(/(^|[^\\])hh+/g,"$1"+c(p))).replace(/(^|[^\\])h/g,"$1"+p);var b=o?e.getUTCMinutes():e.getMinutes();t=(t=t.replace(/(^|[^\\])mm+/g,"$1"+c(b))).replace(/(^|[^\\])m/g,"$1"+b);var k=o?e.getUTCSeconds():e.getSeconds();t=(t=t.replace(/(^|[^\\])ss+/g,"$1"+c(k))).replace(/(^|[^\\])s/g,"$1"+k);var v=o?e.getUTCMilliseconds():e.getMilliseconds();t=t.replace(/(^|[^\\])fff+/g,"$1"+c(v,3)),v=Math.round(v/10),t=t.replace(/(^|[^\\])ff/g,"$1"+c(v)),v=Math.round(v/10);var x=m<12?"AM":"PM";t=(t=(t=t.replace(/(^|[^\\])f/g,"$1"+v)).replace(/(^|[^\\])TT+/g,"$1"+x)).replace(/(^|[^\\])T/g,"$1"+x.charAt(0));var u=x.toLowerCase();t=(t=t.replace(/(^|[^\\])tt+/g,"$1"+u)).replace(/(^|[^\\])t/g,"$1"+u.charAt(0));var f=-e.getTimezoneOffset(),w=o||!f?"Z":f>0?"+":"-";if(!o){var y=(f=Math.abs(f))%60;w+=c(Math.floor(f/60))+":"+c(y)}t=t.replace(/(^|[^\\])K/g,"$1"+w);var _=(o?e.getUTCDay():e.getDay())+1;return t=(t=(t=(t=(t=t.replace(new RegExp(a[0],"g"),a[_])).replace(new RegExp(l[0],"g"),l[_])).replace(new RegExp(n[0],"g"),n[h])).replace(new RegExp(r[0],"g"),r[h])).replace(/\\(.)/g,"$1")}},{key:"getTimeUnitsfromTimestamp",value:function(e,t,i){var o=this.w;o.config.xaxis.min!==void 0&&(e=o.config.xaxis.min),o.config.xaxis.max!==void 0&&(t=o.config.xaxis.max);var n=this.getDate(e),r=this.getDate(t),a=this.formatDate(n,"yyyy MM dd HH mm ss fff").split(" "),l=this.formatDate(r,"yyyy MM dd HH mm ss fff").split(" ");return{minMillisecond:parseInt(a[6],10),maxMillisecond:parseInt(l[6],10),minSecond:parseInt(a[5],10),maxSecond:parseInt(l[5],10),minMinute:parseInt(a[4],10),maxMinute:parseInt(l[4],10),minHour:parseInt(a[3],10),maxHour:parseInt(l[3],10),minDate:parseInt(a[2],10),maxDate:parseInt(l[2],10),minMonth:parseInt(a[1],10)-1,maxMonth:parseInt(l[1],10)-1,minYear:parseInt(a[0],10),maxYear:parseInt(l[0],10)}}},{key:"isLeapYear",value:function(e){return e%4==0&&e%100!=0||e%400==0}},{key:"calculcateLastDaysOfMonth",value:function(e,t,i){return this.determineDaysOfMonths(e,t)-i}},{key:"determineDaysOfYear",value:function(e){var t=365;return this.isLeapYear(e)&&(t=366),t}},{key:"determineRemainingDaysOfYear",value:function(e,t,i){var o=this.daysCntOfYear[t]+i;return t>1&&this.isLeapYear()&&o++,o}},{key:"determineDaysOfMonths",value:function(e,t){var i=30;switch(e=T.monthMod(e),!0){case this.months30.indexOf(e)>-1:e===2&&(i=this.isLeapYear(t)?29:28);break;case this.months31.indexOf(e)>-1:default:i=31}return i}}]),s}(),os=function(){function s(e){H(this,s),this.ctx=e,this.w=e.w,this.tooltipKeyFormat="dd MMM"}return W(s,[{key:"xLabelFormat",value:function(e,t,i,o){var n=this.w;if(n.config.xaxis.type==="datetime"&&n.config.xaxis.labels.formatter===void 0&&n.config.tooltip.x.formatter===void 0){var r=new Qe(this.ctx);return r.formatDate(r.getDate(t),n.config.tooltip.x.format)}return e(t,i,o)}},{key:"defaultGeneralFormatter",value:function(e){return Array.isArray(e)?e.map(function(t){return t}):e}},{key:"defaultYFormatter",value:function(e,t,i){var o=this.w;if(T.isNumber(e))if(o.globals.yValueDecimal!==0)e=e.toFixed(t.decimalsInFloat!==void 0?t.decimalsInFloat:o.globals.yValueDecimal);else{var n=e.toFixed(0);e=e==n?n:e.toFixed(1)}return e}},{key:"setLabelFormatters",value:function(){var e=this,t=this.w;return t.globals.xaxisTooltipFormatter=function(i){return e.defaultGeneralFormatter(i)},t.globals.ttKeyFormatter=function(i){return e.defaultGeneralFormatter(i)},t.globals.ttZFormatter=function(i){return i},t.globals.legendFormatter=function(i){return e.defaultGeneralFormatter(i)},t.config.xaxis.labels.formatter!==void 0?t.globals.xLabelFormatter=t.config.xaxis.labels.formatter:t.globals.xLabelFormatter=function(i){if(T.isNumber(i)){if(!t.config.xaxis.convertedCatToNumeric&&t.config.xaxis.type==="numeric"){if(T.isNumber(t.config.xaxis.decimalsInFloat))return i.toFixed(t.config.xaxis.decimalsInFloat);var o=t.globals.maxX-t.globals.minX;return o>0&&o<100?i.toFixed(1):i.toFixed(0)}return t.globals.isBarHorizontal&&t.globals.maxY-t.globals.minYArr<4?i.toFixed(1):i.toFixed(0)}return i},typeof t.config.tooltip.x.formatter=="function"?t.globals.ttKeyFormatter=t.config.tooltip.x.formatter:t.globals.ttKeyFormatter=t.globals.xLabelFormatter,typeof t.config.xaxis.tooltip.formatter=="function"&&(t.globals.xaxisTooltipFormatter=t.config.xaxis.tooltip.formatter),(Array.isArray(t.config.tooltip.y)||t.config.tooltip.y.formatter!==void 0)&&(t.globals.ttVal=t.config.tooltip.y),t.config.tooltip.z.formatter!==void 0&&(t.globals.ttZFormatter=t.config.tooltip.z.formatter),t.config.legend.formatter!==void 0&&(t.globals.legendFormatter=t.config.legend.formatter),t.config.yaxis.forEach(function(i,o){i.labels.formatter!==void 0?t.globals.yLabelFormatters[o]=i.labels.formatter:t.globals.yLabelFormatters[o]=function(n){return t.globals.xyCharts?Array.isArray(n)?n.map(function(r){return e.defaultYFormatter(r,i,o)}):e.defaultYFormatter(n,i,o):n}}),t.globals}},{key:"heatmapLabelFormatters",value:function(){var e=this.w;if(e.config.chart.type==="heatmap"){e.globals.yAxisScale[0].result=e.globals.seriesNames.slice();var t=e.globals.seriesNames.reduce(function(i,o){return i.length>o.length?i:o},0);e.globals.yAxisScale[0].niceMax=t,e.globals.yAxisScale[0].niceMin=t}}}]),s}(),Di=function(){function s(e){H(this,s),this.ctx=e,this.w=e.w}return W(s,[{key:"getLabel",value:function(e,t,i,o){var n=arguments.length>4&&arguments[4]!==void 0?arguments[4]:[],r=arguments.length>5&&arguments[5]!==void 0?arguments[5]:"12px",a=!(arguments.length>6&&arguments[6]!==void 0)||arguments[6],l=this.w,c=e[o]===void 0?"":e[o],d=c,h=l.globals.xLabelFormatter,g=l.config.xaxis.labels.formatter,m=!1,p=new os(this.ctx),b=c;a&&(d=p.xLabelFormat(h,c,b,{i:o,dateFormatter:new Qe(this.ctx).formatDate,w:l}),g!==void 0&&(d=g(c,e[o],{i:o,dateFormatter:new Qe(this.ctx).formatDate,w:l})));var k,v;t.length>0?(k=t[o].unit,v=null,t.forEach(function(w){w.unit==="month"?v="year":w.unit==="day"?v="month":w.unit==="hour"?v="day":w.unit==="minute"&&(v="hour")}),m=v===k,i=t[o].position,d=t[o].value):l.config.xaxis.type==="datetime"&&g===void 0&&(d=""),d===void 0&&(d=""),d=Array.isArray(d)?d:d.toString();var x=new N(this.ctx),u={};u=l.globals.rotateXLabels&&a?x.getTextRects(d,parseInt(r,10),null,"rotate(".concat(l.config.xaxis.labels.rotate," 0 0)"),!1):x.getTextRects(d,parseInt(r,10));var f=!l.config.xaxis.labels.showDuplicates&&this.ctx.timeScale;return!Array.isArray(d)&&(String(d)==="NaN"||n.indexOf(d)>=0&&f)&&(d=""),{x:i,text:d,textRect:u,isBold:m}}},{key:"checkLabelBasedOnTickamount",value:function(e,t,i){var o=this.w,n=o.config.xaxis.tickAmount;return n==="dataPoints"&&(n=Math.round(o.globals.gridWidth/120)),n>i||e%Math.round(i/(n+1))==0||(t.text=""),t}},{key:"checkForOverflowingLabels",value:function(e,t,i,o,n){var r=this.w;if(e===0&&r.globals.skipFirstTimelinelabel&&(t.text=""),e===i-1&&r.globals.skipLastTimelinelabel&&(t.text=""),r.config.xaxis.labels.hideOverlappingLabels&&o.length>0){var a=n[n.length-1];t.x<a.textRect.width/(r.globals.rotateXLabels?Math.abs(r.config.xaxis.labels.rotate)/12:1.01)+a.x&&(t.text="")}return t}},{key:"checkForReversedLabels",value:function(e,t){var i=this.w;return i.config.yaxis[e]&&i.config.yaxis[e].reversed&&t.reverse(),t}},{key:"yAxisAllSeriesCollapsed",value:function(e){var t=this.w.globals;return!t.seriesYAxisMap[e].some(function(i){return t.collapsedSeriesIndices.indexOf(i)===-1})}},{key:"translateYAxisIndex",value:function(e){var t=this.w,i=t.globals,o=t.config.yaxis;return i.series.length>o.length||o.some(function(n){return Array.isArray(n.seriesName)})?e:i.seriesYAxisReverseMap[e]}},{key:"isYAxisHidden",value:function(e){var t=this.w,i=t.config.yaxis[e];if(!i.show||this.yAxisAllSeriesCollapsed(e))return!0;if(!i.showForNullSeries){var o=t.globals.seriesYAxisMap[e],n=new De(this.ctx);return o.every(function(r){return n.isSeriesNull(r)})}return!1}},{key:"getYAxisForeColor",value:function(e,t){var i=this.w;return Array.isArray(e)&&i.globals.yAxisScale[t]&&this.ctx.theme.pushExtraColors(e,i.globals.yAxisScale[t].result.length,!1),e}},{key:"drawYAxisTicks",value:function(e,t,i,o,n,r,a){var l=this.w,c=new N(this.ctx),d=l.globals.translateY+l.config.yaxis[n].labels.offsetY;if(l.globals.isBarHorizontal?d=0:l.config.chart.type==="heatmap"&&(d+=r/2),o.show&&t>0){l.config.yaxis[n].opposite===!0&&(e+=o.width);for(var h=t;h>=0;h--){var g=c.drawLine(e+i.offsetX-o.width+o.offsetX,d+o.offsetY,e+i.offsetX+o.offsetX,d+o.offsetY,o.color);a.add(g),d+=r}}}}]),s}(),Aw=function(){function s(e){H(this,s),this.w=e.w,this.annoCtx=e,this.helpers=new Cr(this.annoCtx),this.axesUtils=new Di(this.annoCtx)}return W(s,[{key:"addYaxisAnnotation",value:function(e,t,i){var o,n=this.w,r=e.strokeDashArray,a=this.helpers.getY1Y2("y1",e),l=a.yP,c=a.clipped,d=!0,h=!1,g=e.label.text;if(e.y2===null||e.y2===void 0){if(!c){h=!0;var m=this.annoCtx.graphics.drawLine(0+e.offsetX,l+e.offsetY,this._getYAxisAnnotationWidth(e),l+e.offsetY,e.borderColor,r,e.borderWidth);t.appendChild(m.node),e.id&&m.node.classList.add(e.id)}}else{if(o=(a=this.helpers.getY1Y2("y2",e)).yP,d=a.clipped,o>l){var p=l;l=o,o=p}if(!c||!d){h=!0;var b=this.annoCtx.graphics.drawRect(0+e.offsetX,o+e.offsetY,this._getYAxisAnnotationWidth(e),l-o,0,e.fillColor,e.opacity,1,e.borderColor,r);b.node.classList.add("apexcharts-annotation-rect"),b.attr("clip-path","url(#gridRectMask".concat(n.globals.cuid,")")),t.appendChild(b.node),e.id&&b.node.classList.add(e.id)}}if(h){var k=e.label.position==="right"?n.globals.gridWidth:e.label.position==="center"?n.globals.gridWidth/2:0,v=this.annoCtx.graphics.drawText({x:k+e.label.offsetX,y:(o??l)+e.label.offsetY-3,text:g,textAnchor:e.label.textAnchor,fontSize:e.label.style.fontSize,fontFamily:e.label.style.fontFamily,fontWeight:e.label.style.fontWeight,foreColor:e.label.style.color,cssClass:"apexcharts-yaxis-annotation-label ".concat(e.label.style.cssClass," ").concat(e.id?e.id:"")});v.attr({rel:i}),t.appendChild(v.node)}}},{key:"_getYAxisAnnotationWidth",value:function(e){var t=this.w;return t.globals.gridWidth,(e.width.indexOf("%")>-1?t.globals.gridWidth*parseInt(e.width,10)/100:parseInt(e.width,10))+e.offsetX}},{key:"drawYAxisAnnotations",value:function(){var e=this,t=this.w,i=this.annoCtx.graphics.group({class:"apexcharts-yaxis-annotations"});return t.config.annotations.yaxis.forEach(function(o,n){o.yAxisIndex=e.axesUtils.translateYAxisIndex(o.yAxisIndex),e.axesUtils.isYAxisHidden(o.yAxisIndex)&&e.axesUtils.yAxisAllSeriesCollapsed(o.yAxisIndex)||e.addYaxisAnnotation(o,i.node,n)}),i}}]),s}(),Sw=function(){function s(e){H(this,s),this.w=e.w,this.annoCtx=e,this.helpers=new Cr(this.annoCtx)}return W(s,[{key:"addPointAnnotation",value:function(e,t,i){if(!(this.w.globals.collapsedSeriesIndices.indexOf(e.seriesIndex)>-1)){var o=this.helpers.getX1X2("x1",e),n=o.x,r=o.clipped,a=(o=this.helpers.getY1Y2("y1",e)).yP,l=o.clipped;if(T.isNumber(n)&&!l&&!r){var c={pSize:e.marker.size,pointStrokeWidth:e.marker.strokeWidth,pointFillColor:e.marker.fillColor,pointStrokeColor:e.marker.strokeColor,shape:e.marker.shape,pRadius:e.marker.radius,class:"apexcharts-point-annotation-marker ".concat(e.marker.cssClass," ").concat(e.id?e.id:"")},d=this.annoCtx.graphics.drawMarker(n+e.marker.offsetX,a+e.marker.offsetY,c);t.appendChild(d.node);var h=e.label.text?e.label.text:"",g=this.annoCtx.graphics.drawText({x:n+e.label.offsetX,y:a+e.label.offsetY-e.marker.size-parseFloat(e.label.style.fontSize)/1.6,text:h,textAnchor:e.label.textAnchor,fontSize:e.label.style.fontSize,fontFamily:e.label.style.fontFamily,fontWeight:e.label.style.fontWeight,foreColor:e.label.style.color,cssClass:"apexcharts-point-annotation-label ".concat(e.label.style.cssClass," ").concat(e.id?e.id:"")});if(g.attr({rel:i}),t.appendChild(g.node),e.customSVG.SVG){var m=this.annoCtx.graphics.group({class:"apexcharts-point-annotations-custom-svg "+e.customSVG.cssClass});m.attr({transform:"translate(".concat(n+e.customSVG.offsetX,", ").concat(a+e.customSVG.offsetY,")")}),m.node.innerHTML=e.customSVG.SVG,t.appendChild(m.node)}if(e.image.path){var p=e.image.width?e.image.width:20,b=e.image.height?e.image.height:20;d=this.annoCtx.addImage({x:n+e.image.offsetX-p/2,y:a+e.image.offsetY-b/2,width:p,height:b,path:e.image.path,appendTo:".apexcharts-point-annotations"})}e.mouseEnter&&d.node.addEventListener("mouseenter",e.mouseEnter.bind(this,e)),e.mouseLeave&&d.node.addEventListener("mouseleave",e.mouseLeave.bind(this,e)),e.click&&d.node.addEventListener("click",e.click.bind(this,e))}}}},{key:"drawPointAnnotations",value:function(){var e=this,t=this.w,i=this.annoCtx.graphics.group({class:"apexcharts-point-annotations"});return t.config.annotations.points.map(function(o,n){e.addPointAnnotation(o,i.node,n)}),i}}]),s}(),lg={name:"en",options:{months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],toolbar:{exportToSVG:"Download SVG",exportToPNG:"Download PNG",exportToCSV:"Download CSV",menu:"Menu",selection:"Selection",selectionZoom:"Selection Zoom",zoomIn:"Zoom In",zoomOut:"Zoom Out",pan:"Panning",reset:"Reset Zoom"}}},no=function(){function s(){H(this,s),this.yAxis={show:!0,showAlways:!1,showForNullSeries:!0,seriesName:void 0,opposite:!1,reversed:!1,logarithmic:!1,logBase:10,tickAmount:void 0,stepSize:void 0,forceNiceScale:!1,max:void 0,min:void 0,floating:!1,decimalsInFloat:void 0,labels:{show:!0,minWidth:0,maxWidth:160,offsetX:0,offsetY:0,align:void 0,rotate:0,padding:20,style:{colors:[],fontSize:"11px",fontWeight:400,fontFamily:void 0,cssClass:""},formatter:void 0},axisBorder:{show:!1,color:"#e0e0e0",width:1,offsetX:0,offsetY:0},axisTicks:{show:!1,color:"#e0e0e0",width:6,offsetX:0,offsetY:0},title:{text:void 0,rotate:-90,offsetY:0,offsetX:0,style:{color:void 0,fontSize:"11px",fontWeight:900,fontFamily:void 0,cssClass:""}},tooltip:{enabled:!1,offsetX:0},crosshairs:{show:!0,position:"front",stroke:{color:"#b6b6b6",width:1,dashArray:0}}},this.pointAnnotation={id:void 0,x:0,y:null,yAxisIndex:0,seriesIndex:void 0,mouseEnter:void 0,mouseLeave:void 0,click:void 0,marker:{size:4,fillColor:"#fff",strokeWidth:2,strokeColor:"#333",shape:"circle",offsetX:0,offsetY:0,cssClass:""},label:{borderColor:"#c2c2c2",borderWidth:1,borderRadius:2,text:void 0,textAnchor:"middle",offsetX:0,offsetY:0,mouseEnter:void 0,mouseLeave:void 0,click:void 0,style:{background:"#fff",color:void 0,fontSize:"11px",fontFamily:void 0,fontWeight:400,cssClass:"",padding:{left:5,right:5,top:2,bottom:2}}},customSVG:{SVG:void 0,cssClass:void 0,offsetX:0,offsetY:0},image:{path:void 0,width:20,height:20,offsetX:0,offsetY:0}},this.yAxisAnnotation={id:void 0,y:0,y2:null,strokeDashArray:1,fillColor:"#c2c2c2",borderColor:"#c2c2c2",borderWidth:1,opacity:.3,offsetX:0,offsetY:0,width:"100%",yAxisIndex:0,label:{borderColor:"#c2c2c2",borderWidth:1,borderRadius:2,text:void 0,textAnchor:"end",position:"right",offsetX:0,offsetY:-3,mouseEnter:void 0,mouseLeave:void 0,click:void 0,style:{background:"#fff",color:void 0,fontSize:"11px",fontFamily:void 0,fontWeight:400,cssClass:"",padding:{left:5,right:5,top:2,bottom:2}}}},this.xAxisAnnotation={id:void 0,x:0,x2:null,strokeDashArray:1,fillColor:"#c2c2c2",borderColor:"#c2c2c2",borderWidth:1,opacity:.3,offsetX:0,offsetY:0,label:{borderColor:"#c2c2c2",borderWidth:1,borderRadius:2,text:void 0,textAnchor:"middle",orientation:"vertical",position:"top",offsetX:0,offsetY:0,mouseEnter:void 0,mouseLeave:void 0,click:void 0,style:{background:"#fff",color:void 0,fontSize:"11px",fontFamily:void 0,fontWeight:400,cssClass:"",padding:{left:5,right:5,top:2,bottom:2}}}},this.text={x:0,y:0,text:"",textAnchor:"start",foreColor:void 0,fontSize:"13px",fontFamily:void 0,fontWeight:400,appendTo:".apexcharts-annotations",backgroundColor:"transparent",borderColor:"#c2c2c2",borderRadius:0,borderWidth:0,paddingLeft:4,paddingRight:4,paddingTop:2,paddingBottom:2}}return W(s,[{key:"init",value:function(){return{annotations:{yaxis:[this.yAxisAnnotation],xaxis:[this.xAxisAnnotation],points:[this.pointAnnotation],texts:[],images:[],shapes:[]},chart:{animations:{enabled:!0,easing:"easeinout",speed:800,animateGradually:{delay:150,enabled:!0},dynamicAnimation:{enabled:!0,speed:350}},background:"",locales:[lg],defaultLocale:"en",dropShadow:{enabled:!1,enabledOnSeries:void 0,top:2,left:2,blur:4,color:"#000",opacity:.35},events:{animationEnd:void 0,beforeMount:void 0,mounted:void 0,updated:void 0,click:void 0,mouseMove:void 0,mouseLeave:void 0,xAxisLabelClick:void 0,legendClick:void 0,markerClick:void 0,selection:void 0,dataPointSelection:void 0,dataPointMouseEnter:void 0,dataPointMouseLeave:void 0,beforeZoom:void 0,beforeResetZoom:void 0,zoomed:void 0,scrolled:void 0,brushScrolled:void 0},foreColor:"#373d3f",fontFamily:"Helvetica, Arial, sans-serif",height:"auto",parentHeightOffset:15,redrawOnParentResize:!0,redrawOnWindowResize:!0,id:void 0,group:void 0,nonce:void 0,offsetX:0,offsetY:0,selection:{enabled:!1,type:"x",fill:{color:"#24292e",opacity:.1},stroke:{width:1,color:"#24292e",opacity:.4,dashArray:3},xaxis:{min:void 0,max:void 0},yaxis:{min:void 0,max:void 0}},sparkline:{enabled:!1},brush:{enabled:!1,autoScaleYaxis:!0,target:void 0,targets:void 0},stacked:!1,stackOnlyBar:!0,stackType:"normal",toolbar:{show:!0,offsetX:0,offsetY:0,tools:{download:!0,selection:!0,zoom:!0,zoomin:!0,zoomout:!0,pan:!0,reset:!0,customIcons:[]},export:{csv:{filename:void 0,columnDelimiter:",",headerCategory:"category",headerValue:"value",categoryFormatter:void 0,valueFormatter:void 0},png:{filename:void 0},svg:{filename:void 0}},autoSelected:"zoom"},type:"line",width:"100%",zoom:{enabled:!0,type:"x",autoScaleYaxis:!1,zoomedArea:{fill:{color:"#90CAF9",opacity:.4},stroke:{color:"#0D47A1",opacity:.4,width:1}}}},plotOptions:{line:{isSlopeChart:!1},area:{fillTo:"origin"},bar:{horizontal:!1,columnWidth:"70%",barHeight:"70%",distributed:!1,borderRadius:0,borderRadiusApplication:"around",borderRadiusWhenStacked:"last",rangeBarOverlap:!0,rangeBarGroupRows:!1,hideZeroBarsWhenGrouped:!1,isDumbbell:!1,dumbbellColors:void 0,isFunnel:!1,isFunnel3d:!0,colors:{ranges:[],backgroundBarColors:[],backgroundBarOpacity:1,backgroundBarRadius:0},dataLabels:{position:"top",maxItems:100,hideOverflowingLabels:!0,orientation:"horizontal",total:{enabled:!1,formatter:void 0,offsetX:0,offsetY:0,style:{color:"#373d3f",fontSize:"12px",fontFamily:void 0,fontWeight:600}}}},bubble:{zScaling:!0,minBubbleRadius:void 0,maxBubbleRadius:void 0},candlestick:{colors:{upward:"#00B746",downward:"#EF403C"},wick:{useFillColor:!0}},boxPlot:{colors:{upper:"#00E396",lower:"#008FFB"}},heatmap:{radius:2,enableShades:!0,shadeIntensity:.5,reverseNegativeShade:!1,distributed:!1,useFillColorAsStroke:!1,colorScale:{inverse:!1,ranges:[],min:void 0,max:void 0}},treemap:{enableShades:!0,shadeIntensity:.5,distributed:!1,reverseNegativeShade:!1,useFillColorAsStroke:!1,borderRadius:4,dataLabels:{format:"scale"},colorScale:{inverse:!1,ranges:[],min:void 0,max:void 0}},radialBar:{inverseOrder:!1,startAngle:0,endAngle:360,offsetX:0,offsetY:0,hollow:{margin:5,size:"50%",background:"transparent",image:void 0,imageWidth:150,imageHeight:150,imageOffsetX:0,imageOffsetY:0,imageClipped:!0,position:"front",dropShadow:{enabled:!1,top:0,left:0,blur:3,color:"#000",opacity:.5}},track:{show:!0,startAngle:void 0,endAngle:void 0,background:"#f2f2f2",strokeWidth:"97%",opacity:1,margin:5,dropShadow:{enabled:!1,top:0,left:0,blur:3,color:"#000",opacity:.5}},dataLabels:{show:!0,name:{show:!0,fontSize:"16px",fontFamily:void 0,fontWeight:600,color:void 0,offsetY:0,formatter:function(e){return e}},value:{show:!0,fontSize:"14px",fontFamily:void 0,fontWeight:400,color:void 0,offsetY:16,formatter:function(e){return e+"%"}},total:{show:!1,label:"Total",fontSize:"16px",fontWeight:600,fontFamily:void 0,color:void 0,formatter:function(e){return e.globals.seriesTotals.reduce(function(t,i){return t+i},0)/e.globals.series.length+"%"}}},barLabels:{enabled:!1,offsetX:0,offsetY:0,useSeriesColors:!0,fontFamily:void 0,fontWeight:600,fontSize:"16px",formatter:function(e){return e},onClick:void 0}},pie:{customScale:1,offsetX:0,offsetY:0,startAngle:0,endAngle:360,expandOnClick:!0,dataLabels:{offset:0,minAngleToShowLabel:10},donut:{size:"65%",background:"transparent",labels:{show:!1,name:{show:!0,fontSize:"16px",fontFamily:void 0,fontWeight:600,color:void 0,offsetY:-10,formatter:function(e){return e}},value:{show:!0,fontSize:"20px",fontFamily:void 0,fontWeight:400,color:void 0,offsetY:10,formatter:function(e){return e}},total:{show:!1,showAlways:!1,label:"Total",fontSize:"16px",fontWeight:400,fontFamily:void 0,color:void 0,formatter:function(e){return e.globals.seriesTotals.reduce(function(t,i){return t+i},0)}}}}},polarArea:{rings:{strokeWidth:1,strokeColor:"#e8e8e8"},spokes:{strokeWidth:1,connectorColors:"#e8e8e8"}},radar:{size:void 0,offsetX:0,offsetY:0,polygons:{strokeWidth:1,strokeColors:"#e8e8e8",connectorColors:"#e8e8e8",fill:{colors:void 0}}}},colors:void 0,dataLabels:{enabled:!0,enabledOnSeries:void 0,formatter:function(e){return e!==null?e:""},textAnchor:"middle",distributed:!1,offsetX:0,offsetY:0,style:{fontSize:"12px",fontFamily:void 0,fontWeight:600,colors:void 0},background:{enabled:!0,foreColor:"#fff",borderRadius:2,padding:4,opacity:.9,borderWidth:1,borderColor:"#fff",dropShadow:{enabled:!1,top:1,left:1,blur:1,color:"#000",opacity:.45}},dropShadow:{enabled:!1,top:1,left:1,blur:1,color:"#000",opacity:.45}},fill:{type:"solid",colors:void 0,opacity:.85,gradient:{shade:"dark",type:"horizontal",shadeIntensity:.5,gradientToColors:void 0,inverseColors:!0,opacityFrom:1,opacityTo:1,stops:[0,50,100],colorStops:[]},image:{src:[],width:void 0,height:void 0},pattern:{style:"squares",width:6,height:6,strokeWidth:2}},forecastDataPoints:{count:0,fillOpacity:.5,strokeWidth:void 0,dashArray:4},grid:{show:!0,borderColor:"#e0e0e0",strokeDashArray:0,position:"back",xaxis:{lines:{show:!1}},yaxis:{lines:{show:!0}},row:{colors:void 0,opacity:.5},column:{colors:void 0,opacity:.5},padding:{top:0,right:10,bottom:0,left:12}},labels:[],legend:{show:!0,showForSingleSeries:!1,showForNullSeries:!0,showForZeroSeries:!0,floating:!1,position:"bottom",horizontalAlign:"center",inverseOrder:!1,fontSize:"12px",fontFamily:void 0,fontWeight:400,width:void 0,height:void 0,formatter:void 0,tooltipHoverFormatter:void 0,offsetX:-20,offsetY:4,customLegendItems:[],labels:{colors:void 0,useSeriesColors:!1},markers:{size:7,fillColors:void 0,strokeWidth:1,shape:void 0,offsetX:0,offsetY:0,customHTML:void 0,onClick:void 0},itemMargin:{horizontal:5,vertical:4},onItemClick:{toggleDataSeries:!0},onItemHover:{highlightDataSeries:!0}},markers:{discrete:[],size:0,colors:void 0,strokeColors:"#fff",strokeWidth:2,strokeOpacity:.9,strokeDashArray:0,fillOpacity:1,shape:"circle",offsetX:0,offsetY:0,showNullDataPoints:!0,onClick:void 0,onDblClick:void 0,hover:{size:void 0,sizeOffset:3}},noData:{text:void 0,align:"center",verticalAlign:"middle",offsetX:0,offsetY:0,style:{color:void 0,fontSize:"14px",fontFamily:void 0}},responsive:[],series:void 0,states:{normal:{filter:{type:"none",value:0}},hover:{filter:{type:"lighten",value:.1}},active:{allowMultipleDataPointsSelection:!1,filter:{type:"darken",value:.5}}},title:{text:void 0,align:"left",margin:5,offsetX:0,offsetY:0,floating:!1,style:{fontSize:"14px",fontWeight:900,fontFamily:void 0,color:void 0}},subtitle:{text:void 0,align:"left",margin:5,offsetX:0,offsetY:30,floating:!1,style:{fontSize:"12px",fontWeight:400,fontFamily:void 0,color:void 0}},stroke:{show:!0,curve:"smooth",lineCap:"butt",width:2,colors:void 0,dashArray:0,fill:{type:"solid",colors:void 0,opacity:.85,gradient:{shade:"dark",type:"horizontal",shadeIntensity:.5,gradientToColors:void 0,inverseColors:!0,opacityFrom:1,opacityTo:1,stops:[0,50,100],colorStops:[]}}},tooltip:{enabled:!0,enabledOnSeries:void 0,shared:!0,hideEmptySeries:!1,followCursor:!1,intersect:!1,inverseOrder:!1,custom:void 0,fillSeriesColor:!1,theme:"light",cssClass:"",style:{fontSize:"12px",fontFamily:void 0},onDatasetHover:{highlightDataSeries:!1},x:{show:!0,format:"dd MMM",formatter:void 0},y:{formatter:void 0,title:{formatter:function(e){return e?e+": ":""}}},z:{formatter:void 0,title:"Size: "},marker:{show:!0,fillColors:void 0},items:{display:"flex"},fixed:{enabled:!1,position:"topRight",offsetX:0,offsetY:0}},xaxis:{type:"category",categories:[],convertedCatToNumeric:!1,offsetX:0,offsetY:0,overwriteCategories:void 0,labels:{show:!0,rotate:-45,rotateAlways:!1,hideOverlappingLabels:!0,trim:!1,minHeight:void 0,maxHeight:120,showDuplicates:!0,style:{colors:[],fontSize:"12px",fontWeight:400,fontFamily:void 0,cssClass:""},offsetX:0,offsetY:0,format:void 0,formatter:void 0,datetimeUTC:!0,datetimeFormatter:{year:"yyyy",month:"MMM 'yy",day:"dd MMM",hour:"HH:mm",minute:"HH:mm:ss",second:"HH:mm:ss"}},group:{groups:[],style:{colors:[],fontSize:"12px",fontWeight:400,fontFamily:void 0,cssClass:""}},axisBorder:{show:!0,color:"#e0e0e0",width:"100%",height:1,offsetX:0,offsetY:0},axisTicks:{show:!0,color:"#e0e0e0",height:6,offsetX:0,offsetY:0},stepSize:void 0,tickAmount:void 0,tickPlacement:"on",min:void 0,max:void 0,range:void 0,floating:!1,decimalsInFloat:void 0,position:"bottom",title:{text:void 0,offsetX:0,offsetY:0,style:{color:void 0,fontSize:"12px",fontWeight:900,fontFamily:void 0,cssClass:""}},crosshairs:{show:!0,width:1,position:"back",opacity:.9,stroke:{color:"#b6b6b6",width:1,dashArray:3},fill:{type:"solid",color:"#B1B9C4",gradient:{colorFrom:"#D8E3F0",colorTo:"#BED1E6",stops:[0,100],opacityFrom:.4,opacityTo:.5}},dropShadow:{enabled:!1,left:0,top:0,blur:1,opacity:.4}},tooltip:{enabled:!0,offsetY:0,formatter:void 0,style:{fontSize:"12px",fontFamily:void 0}}},yaxis:this.yAxis,theme:{mode:"",palette:"palette1",monochrome:{enabled:!1,color:"#008FFB",shadeTo:"light",shadeIntensity:.65}}}}}]),s}(),Ew=function(){function s(e){H(this,s),this.ctx=e,this.w=e.w,this.graphics=new N(this.ctx),this.w.globals.isBarHorizontal&&(this.invertAxis=!0),this.helpers=new Cr(this),this.xAxisAnnotations=new Cw(this),this.yAxisAnnotations=new Aw(this),this.pointsAnnotations=new Sw(this),this.w.globals.isBarHorizontal&&this.w.config.yaxis[0].reversed&&(this.inversedReversedAxis=!0),this.xDivision=this.w.globals.gridWidth/this.w.globals.dataPoints}return W(s,[{key:"drawAxesAnnotations",value:function(){var e=this.w;if(e.globals.axisCharts){for(var t=this.yAxisAnnotations.drawYAxisAnnotations(),i=this.xAxisAnnotations.drawXAxisAnnotations(),o=this.pointsAnnotations.drawPointAnnotations(),n=e.config.chart.animations.enabled,r=[t,i,o],a=[i.node,t.node,o.node],l=0;l<3;l++)e.globals.dom.elGraphical.add(r[l]),!n||e.globals.resized||e.globals.dataChanged||e.config.chart.type!=="scatter"&&e.config.chart.type!=="bubble"&&e.globals.dataPoints>1&&a[l].classList.add("apexcharts-element-hidden"),e.globals.delayedElements.push({el:a[l],index:0});this.helpers.annotationsBackground()}}},{key:"drawImageAnnos",value:function(){var e=this;this.w.config.annotations.images.map(function(t,i){e.addImage(t,i)})}},{key:"drawTextAnnos",value:function(){var e=this;this.w.config.annotations.texts.map(function(t,i){e.addText(t,i)})}},{key:"addXaxisAnnotation",value:function(e,t,i){this.xAxisAnnotations.addXaxisAnnotation(e,t,i)}},{key:"addYaxisAnnotation",value:function(e,t,i){this.yAxisAnnotations.addYaxisAnnotation(e,t,i)}},{key:"addPointAnnotation",value:function(e,t,i){this.pointsAnnotations.addPointAnnotation(e,t,i)}},{key:"addText",value:function(e,t){var i=e.x,o=e.y,n=e.text,r=e.textAnchor,a=e.foreColor,l=e.fontSize,c=e.fontFamily,d=e.fontWeight,h=e.cssClass,g=e.backgroundColor,m=e.borderWidth,p=e.strokeDashArray,b=e.borderRadius,k=e.borderColor,v=e.appendTo,x=v===void 0?".apexcharts-svg":v,u=e.paddingLeft,f=u===void 0?4:u,w=e.paddingRight,y=w===void 0?4:w,_=e.paddingBottom,C=_===void 0?2:_,A=e.paddingTop,S=A===void 0?2:A,P=this.w,L=this.graphics.drawText({x:i,y:o,text:n,textAnchor:r||"start",fontSize:l||"12px",fontWeight:d||"regular",fontFamily:c||P.config.chart.fontFamily,foreColor:a||P.config.chart.foreColor,cssClass:h}),I=P.globals.dom.baseEl.querySelector(x);I&&I.appendChild(L.node);var R=L.bbox();if(n){var z=this.graphics.drawRect(R.x-f,R.y-S,R.width+f+y,R.height+C+S,b,g||"transparent",1,m,k,p);I.insertBefore(z.node,L.node)}}},{key:"addImage",value:function(e,t){var i=this.w,o=e.path,n=e.x,r=n===void 0?0:n,a=e.y,l=a===void 0?0:a,c=e.width,d=c===void 0?20:c,h=e.height,g=h===void 0?20:h,m=e.appendTo,p=m===void 0?".apexcharts-svg":m,b=i.globals.dom.Paper.image(o);b.size(d,g).move(r,l);var k=i.globals.dom.baseEl.querySelector(p);return k&&k.appendChild(b.node),b}},{key:"addXaxisAnnotationExternal",value:function(e,t,i){return this.addAnnotationExternal({params:e,pushToMemory:t,context:i,type:"xaxis",contextMethod:i.addXaxisAnnotation}),i}},{key:"addYaxisAnnotationExternal",value:function(e,t,i){return this.addAnnotationExternal({params:e,pushToMemory:t,context:i,type:"yaxis",contextMethod:i.addYaxisAnnotation}),i}},{key:"addPointAnnotationExternal",value:function(e,t,i){return this.invertAxis===void 0&&(this.invertAxis=i.w.globals.isBarHorizontal),this.addAnnotationExternal({params:e,pushToMemory:t,context:i,type:"point",contextMethod:i.addPointAnnotation}),i}},{key:"addAnnotationExternal",value:function(e){var t=e.params,i=e.pushToMemory,o=e.context,n=e.type,r=e.contextMethod,a=o,l=a.w,c=l.globals.dom.baseEl.querySelector(".apexcharts-".concat(n,"-annotations")),d=c.childNodes.length+1,h=new no,g=Object.assign({},n==="xaxis"?h.xAxisAnnotation:n==="yaxis"?h.yAxisAnnotation:h.pointAnnotation),m=T.extend(g,t);switch(n){case"xaxis":this.addXaxisAnnotation(m,c,d);break;case"yaxis":this.addYaxisAnnotation(m,c,d);break;case"point":this.addPointAnnotation(m,c,d)}var p=l.globals.dom.baseEl.querySelector(".apexcharts-".concat(n,"-annotations .apexcharts-").concat(n,"-annotation-label[rel='").concat(d,"']")),b=this.helpers.addBackgroundToAnno(p,m);return b&&c.insertBefore(b.node,p),i&&l.globals.memory.methodsToExec.push({context:a,id:m.id?m.id:T.randomId(),method:r,label:"addAnnotation",params:t}),o}},{key:"clearAnnotations",value:function(e){var t=e.w,i=t.globals.dom.baseEl.querySelectorAll(".apexcharts-yaxis-annotations, .apexcharts-xaxis-annotations, .apexcharts-point-annotations");t.globals.memory.methodsToExec.map(function(o,n){o.label!=="addText"&&o.label!=="addAnnotation"||t.globals.memory.methodsToExec.splice(n,1)}),i=T.listToArray(i),Array.prototype.forEach.call(i,function(o){for(;o.firstChild;)o.removeChild(o.firstChild)})}},{key:"removeAnnotation",value:function(e,t){var i=e.w,o=i.globals.dom.baseEl.querySelectorAll(".".concat(t));o&&(i.globals.memory.methodsToExec.map(function(n,r){n.id===t&&i.globals.memory.methodsToExec.splice(r,1)}),Array.prototype.forEach.call(o,function(n){n.parentElement.removeChild(n)}))}}]),s}(),al=function(s){var e,t=s.isTimeline,i=s.ctx,o=s.seriesIndex,n=s.dataPointIndex,r=s.y1,a=s.y2,l=s.w,c=l.globals.seriesRangeStart[o][n],d=l.globals.seriesRangeEnd[o][n],h=l.globals.labels[n],g=l.config.series[o].name?l.config.series[o].name:"",m=l.globals.ttKeyFormatter,p=l.config.tooltip.y.title.formatter,b={w:l,seriesIndex:o,dataPointIndex:n,start:c,end:d};typeof p=="function"&&(g=p(g,b)),(e=l.config.series[o].data[n])!==null&&e!==void 0&&e.x&&(h=l.config.series[o].data[n].x),t||l.config.xaxis.type==="datetime"&&(h=new os(i).xLabelFormat(l.globals.ttKeyFormatter,h,h,{i:void 0,dateFormatter:new Qe(i).formatDate,w:l})),typeof m=="function"&&(h=m(h,b)),Number.isFinite(r)&&Number.isFinite(a)&&(c=r,d=a);var k="",v="",x=l.globals.colors[o];if(l.config.tooltip.x.formatter===void 0)if(l.config.xaxis.type==="datetime"){var u=new Qe(i);k=u.formatDate(u.getDate(c),l.config.tooltip.x.format),v=u.formatDate(u.getDate(d),l.config.tooltip.x.format)}else k=c,v=d;else k=l.config.tooltip.x.formatter(c),v=l.config.tooltip.x.formatter(d);return{start:c,end:d,startVal:k,endVal:v,ylabel:h,color:x,seriesName:g}},ll=function(s){var e=s.color,t=s.seriesName,i=s.ylabel,o=s.start,n=s.end,r=s.seriesIndex,a=s.dataPointIndex,l=s.ctx.tooltip.tooltipLabels.getFormatters(r);o=l.yLbFormatter(o),n=l.yLbFormatter(n);var c=l.yLbFormatter(s.w.globals.series[r][a]),d=`<span class="value start-value">
  `.concat(o,`
  </span> <span class="separator">-</span> <span class="value end-value">
  `).concat(n,`
  </span>`);return'<div class="apexcharts-tooltip-rangebar"><div> <span class="series-name" style="color: '+e+'">'+(t||"")+'</span></div><div> <span class="category">'+i+": </span> "+(s.w.globals.comboCharts?s.w.config.series[r].type==="rangeArea"||s.w.config.series[r].type==="rangeBar"?d:"<span>".concat(c,"</span>"):d)+" </div></div>"},Qn=function(){function s(e){H(this,s),this.opts=e}return W(s,[{key:"hideYAxis",value:function(){this.opts.yaxis[0].show=!1,this.opts.yaxis[0].title.text="",this.opts.yaxis[0].axisBorder.show=!1,this.opts.yaxis[0].axisTicks.show=!1,this.opts.yaxis[0].floating=!0}},{key:"line",value:function(){return{chart:{animations:{easing:"swing"}},dataLabels:{enabled:!1},stroke:{width:5,curve:"straight"},markers:{size:0,hover:{sizeOffset:6}},xaxis:{crosshairs:{width:1}}}}},{key:"sparkline",value:function(e){return this.hideYAxis(),T.extend(e,{grid:{show:!1,padding:{left:0,right:0,top:0,bottom:0}},legend:{show:!1},xaxis:{labels:{show:!1},tooltip:{enabled:!1},axisBorder:{show:!1},axisTicks:{show:!1}},chart:{toolbar:{show:!1},zoom:{enabled:!1}},dataLabels:{enabled:!1}})}},{key:"slope",value:function(){return this.hideYAxis(),{chart:{toolbar:{show:!1},zoom:{enabled:!1}},dataLabels:{enabled:!0,formatter:function(e,t){var i=t.w.config.series[t.seriesIndex].name;return e!==null?i+": "+e:""},background:{enabled:!1},offsetX:-5},grid:{xaxis:{lines:{show:!0}},yaxis:{lines:{show:!1}}},xaxis:{position:"top",labels:{style:{fontSize:14,fontWeight:900}},tooltip:{enabled:!1},crosshairs:{show:!1}},markers:{size:8,hover:{sizeOffset:1}},legend:{show:!1},tooltip:{shared:!1,intersect:!0,followCursor:!0},stroke:{width:5,curve:"straight"}}}},{key:"bar",value:function(){return{chart:{stacked:!1,animations:{easing:"swing"}},plotOptions:{bar:{dataLabels:{position:"center"}}},dataLabels:{style:{colors:["#fff"]},background:{enabled:!1}},stroke:{width:0,lineCap:"round"},fill:{opacity:.85},legend:{markers:{shape:"square"}},tooltip:{shared:!1,intersect:!0},xaxis:{tooltip:{enabled:!1},tickPlacement:"between",crosshairs:{width:"barWidth",position:"back",fill:{type:"gradient"},dropShadow:{enabled:!1},stroke:{width:0}}}}}},{key:"funnel",value:function(){return this.hideYAxis(),F(F({},this.bar()),{},{chart:{animations:{easing:"linear",speed:800,animateGradually:{enabled:!1}}},plotOptions:{bar:{horizontal:!0,borderRadiusApplication:"around",borderRadius:0,dataLabels:{position:"center"}}},grid:{show:!1,padding:{left:0,right:0}},xaxis:{labels:{show:!1},tooltip:{enabled:!1},axisBorder:{show:!1},axisTicks:{show:!1}}})}},{key:"candlestick",value:function(){var e=this;return{stroke:{width:1,colors:["#333"]},fill:{opacity:1},dataLabels:{enabled:!1},tooltip:{shared:!0,custom:function(t){var i=t.seriesIndex,o=t.dataPointIndex,n=t.w;return e._getBoxTooltip(n,i,o,["Open","High","","Low","Close"],"candlestick")}},states:{active:{filter:{type:"none"}}},xaxis:{crosshairs:{width:1}}}}},{key:"boxPlot",value:function(){var e=this;return{chart:{animations:{dynamicAnimation:{enabled:!1}}},stroke:{width:1,colors:["#24292e"]},dataLabels:{enabled:!1},tooltip:{shared:!0,custom:function(t){var i=t.seriesIndex,o=t.dataPointIndex,n=t.w;return e._getBoxTooltip(n,i,o,["Minimum","Q1","Median","Q3","Maximum"],"boxPlot")}},markers:{size:7,strokeWidth:1,strokeColors:"#111"},xaxis:{crosshairs:{width:1}}}}},{key:"rangeBar",value:function(){return{chart:{animations:{animateGradually:!1}},stroke:{width:0,lineCap:"square"},plotOptions:{bar:{borderRadius:0,dataLabels:{position:"center"}}},dataLabels:{enabled:!1,formatter:function(e,t){t.ctx;var i=t.seriesIndex,o=t.dataPointIndex,n=t.w,r=function(){var a=n.globals.seriesRangeStart[i][o];return n.globals.seriesRangeEnd[i][o]-a};return n.globals.comboCharts?n.config.series[i].type==="rangeBar"||n.config.series[i].type==="rangeArea"?r():e:r()},background:{enabled:!1},style:{colors:["#fff"]}},markers:{size:10},tooltip:{shared:!1,followCursor:!0,custom:function(e){return e.w.config.plotOptions&&e.w.config.plotOptions.bar&&e.w.config.plotOptions.bar.horizontal?function(t){var i=al(F(F({},t),{},{isTimeline:!0})),o=i.color,n=i.seriesName,r=i.ylabel,a=i.startVal,l=i.endVal;return ll(F(F({},t),{},{color:o,seriesName:n,ylabel:r,start:a,end:l}))}(e):function(t){var i=al(t),o=i.color,n=i.seriesName,r=i.ylabel,a=i.start,l=i.end;return ll(F(F({},t),{},{color:o,seriesName:n,ylabel:r,start:a,end:l}))}(e)}},xaxis:{tickPlacement:"between",tooltip:{enabled:!1},crosshairs:{stroke:{width:0}}}}}},{key:"dumbbell",value:function(e){var t,i;return(t=e.plotOptions.bar)!==null&&t!==void 0&&t.barHeight||(e.plotOptions.bar.barHeight=2),(i=e.plotOptions.bar)!==null&&i!==void 0&&i.columnWidth||(e.plotOptions.bar.columnWidth=2),e}},{key:"area",value:function(){return{stroke:{width:4,fill:{type:"solid",gradient:{inverseColors:!1,shade:"light",type:"vertical",opacityFrom:.65,opacityTo:.5,stops:[0,100,100]}}},fill:{type:"gradient",gradient:{inverseColors:!1,shade:"light",type:"vertical",opacityFrom:.65,opacityTo:.5,stops:[0,100,100]}},markers:{size:0,hover:{sizeOffset:6}},tooltip:{followCursor:!1}}}},{key:"rangeArea",value:function(){return{stroke:{curve:"straight",width:0},fill:{type:"solid",opacity:.6},markers:{size:0},states:{hover:{filter:{type:"none"}},active:{filter:{type:"none"}}},tooltip:{intersect:!1,shared:!0,followCursor:!0,custom:function(e){return function(t){var i=al(t),o=i.color,n=i.seriesName,r=i.ylabel,a=i.start,l=i.end;return ll(F(F({},t),{},{color:o,seriesName:n,ylabel:r,start:a,end:l}))}(e)}}}}},{key:"brush",value:function(e){return T.extend(e,{chart:{toolbar:{autoSelected:"selection",show:!1},zoom:{enabled:!1}},dataLabels:{enabled:!1},stroke:{width:1},tooltip:{enabled:!1},xaxis:{tooltip:{enabled:!1}}})}},{key:"stacked100",value:function(e){e.dataLabels=e.dataLabels||{},e.dataLabels.formatter=e.dataLabels.formatter||void 0;var t=e.dataLabels.formatter;return e.yaxis.forEach(function(i,o){e.yaxis[o].min=0,e.yaxis[o].max=100}),e.chart.type==="bar"&&(e.dataLabels.formatter=t||function(i){return typeof i=="number"&&i?i.toFixed(0)+"%":i}),e}},{key:"stackedBars",value:function(){var e=this.bar();return F(F({},e),{},{plotOptions:F(F({},e.plotOptions),{},{bar:F(F({},e.plotOptions.bar),{},{borderRadiusApplication:"end",borderRadiusWhenStacked:"last"})})})}},{key:"convertCatToNumeric",value:function(e){return e.xaxis.convertedCatToNumeric=!0,e}},{key:"convertCatToNumericXaxis",value:function(e,t,i){e.xaxis.type="numeric",e.xaxis.labels=e.xaxis.labels||{},e.xaxis.labels.formatter=e.xaxis.labels.formatter||function(r){return T.isNumber(r)?Math.floor(r):r};var o=e.xaxis.labels.formatter,n=e.xaxis.categories&&e.xaxis.categories.length?e.xaxis.categories:e.labels;return i&&i.length&&(n=i.map(function(r){return Array.isArray(r)?r:String(r)})),n&&n.length&&(e.xaxis.labels.formatter=function(r){return T.isNumber(r)?o(n[Math.floor(r)-1]):o(r)}),e.xaxis.categories=[],e.labels=[],e.xaxis.tickAmount=e.xaxis.tickAmount||"dataPoints",e}},{key:"bubble",value:function(){return{dataLabels:{style:{colors:["#fff"]}},tooltip:{shared:!1,intersect:!0},xaxis:{crosshairs:{width:0}},fill:{type:"solid",gradient:{shade:"light",inverse:!0,shadeIntensity:.55,opacityFrom:.4,opacityTo:.8}}}}},{key:"scatter",value:function(){return{dataLabels:{enabled:!1},tooltip:{shared:!1,intersect:!0},markers:{size:6,strokeWidth:1,hover:{sizeOffset:2}}}}},{key:"heatmap",value:function(){return{chart:{stacked:!1},fill:{opacity:1},dataLabels:{style:{colors:["#fff"]}},stroke:{colors:["#fff"]},tooltip:{followCursor:!0,marker:{show:!1},x:{show:!1}},legend:{position:"top",markers:{shape:"square"}},grid:{padding:{right:20}}}}},{key:"treemap",value:function(){return{chart:{zoom:{enabled:!1}},dataLabels:{style:{fontSize:14,fontWeight:600,colors:["#fff"]}},stroke:{show:!0,width:2,colors:["#fff"]},legend:{show:!1},fill:{opacity:1,gradient:{stops:[0,100]}},tooltip:{followCursor:!0,x:{show:!1}},grid:{padding:{left:0,right:0}},xaxis:{crosshairs:{show:!1},tooltip:{enabled:!1}}}}},{key:"pie",value:function(){return{chart:{toolbar:{show:!1}},plotOptions:{pie:{donut:{labels:{show:!1}}}},dataLabels:{formatter:function(e){return e.toFixed(1)+"%"},style:{colors:["#fff"]},background:{enabled:!1},dropShadow:{enabled:!0}},stroke:{colors:["#fff"]},fill:{opacity:1,gradient:{shade:"light",stops:[0,100]}},tooltip:{theme:"dark",fillSeriesColor:!0},legend:{position:"right"}}}},{key:"donut",value:function(){return{chart:{toolbar:{show:!1}},dataLabels:{formatter:function(e){return e.toFixed(1)+"%"},style:{colors:["#fff"]},background:{enabled:!1},dropShadow:{enabled:!0}},stroke:{colors:["#fff"]},fill:{opacity:1,gradient:{shade:"light",shadeIntensity:.35,stops:[80,100],opacityFrom:1,opacityTo:1}},tooltip:{theme:"dark",fillSeriesColor:!0},legend:{position:"right"}}}},{key:"polarArea",value:function(){return{chart:{toolbar:{show:!1}},dataLabels:{formatter:function(e){return e.toFixed(1)+"%"},enabled:!1},stroke:{show:!0,width:2},fill:{opacity:.7},tooltip:{theme:"dark",fillSeriesColor:!0},legend:{position:"right"}}}},{key:"radar",value:function(){return this.opts.yaxis[0].labels.offsetY=this.opts.yaxis[0].labels.offsetY?this.opts.yaxis[0].labels.offsetY:6,{dataLabels:{enabled:!1,style:{fontSize:"11px"}},stroke:{width:2},markers:{size:5,strokeWidth:1,strokeOpacity:1},fill:{opacity:.2},tooltip:{shared:!1,intersect:!0,followCursor:!0},grid:{show:!1},xaxis:{labels:{formatter:function(e){return e},style:{colors:["#a8a8a8"],fontSize:"11px"}},tooltip:{enabled:!1},crosshairs:{show:!1}}}}},{key:"radialBar",value:function(){return{chart:{animations:{dynamicAnimation:{enabled:!0,speed:800}},toolbar:{show:!1}},fill:{gradient:{shade:"dark",shadeIntensity:.4,inverseColors:!1,type:"diagonal2",opacityFrom:1,opacityTo:1,stops:[70,98,100]}},legend:{show:!1,position:"right"},tooltip:{enabled:!1,fillSeriesColor:!0}}}},{key:"_getBoxTooltip",value:function(e,t,i,o,n){var r=e.globals.seriesCandleO[t][i],a=e.globals.seriesCandleH[t][i],l=e.globals.seriesCandleM[t][i],c=e.globals.seriesCandleL[t][i],d=e.globals.seriesCandleC[t][i];return e.config.series[t].type&&e.config.series[t].type!==n?`<div class="apexcharts-custom-tooltip">
          `.concat(e.config.series[t].name?e.config.series[t].name:"series-"+(t+1),": <strong>").concat(e.globals.series[t][i],`</strong>
        </div>`):'<div class="apexcharts-tooltip-box apexcharts-tooltip-'.concat(e.config.chart.type,'">')+"<div>".concat(o[0],': <span class="value">')+r+"</span></div>"+"<div>".concat(o[1],': <span class="value">')+a+"</span></div>"+(l?"<div>".concat(o[2],': <span class="value">')+l+"</span></div>":"")+"<div>".concat(o[3],': <span class="value">')+c+"</span></div>"+"<div>".concat(o[4],': <span class="value">')+d+"</span></div></div>"}}]),s}(),Jn=function(){function s(e){H(this,s),this.opts=e}return W(s,[{key:"init",value:function(e){var t=e.responsiveOverride,i=this.opts,o=new no,n=new Qn(i);this.chartType=i.chart.type,i=this.extendYAxis(i),i=this.extendAnnotations(i);var r=o.init(),a={};if(i&&Ue(i)==="object"){var l,c,d,h,g,m,p,b,k,v,x={};x=["line","area","bar","candlestick","boxPlot","rangeBar","rangeArea","bubble","scatter","heatmap","treemap","pie","polarArea","donut","radar","radialBar"].indexOf(i.chart.type)!==-1?n[i.chart.type]():n.line(),(l=i.plotOptions)!==null&&l!==void 0&&(c=l.bar)!==null&&c!==void 0&&c.isFunnel&&(x=n.funnel()),i.chart.stacked&&i.chart.type==="bar"&&(x=n.stackedBars()),(d=i.chart.brush)!==null&&d!==void 0&&d.enabled&&(x=n.brush(x)),(h=i.plotOptions)!==null&&h!==void 0&&(g=h.line)!==null&&g!==void 0&&g.isSlopeChart&&(x=n.slope()),i.chart.stacked&&i.chart.stackType==="100%"&&(i=n.stacked100(i)),(m=i.plotOptions)!==null&&m!==void 0&&(p=m.bar)!==null&&p!==void 0&&p.isDumbbell&&(i=n.dumbbell(i)),this.checkForDarkTheme(window.Apex),this.checkForDarkTheme(i),i.xaxis=i.xaxis||window.Apex.xaxis||{},t||(i.xaxis.convertedCatToNumeric=!1),((b=(i=this.checkForCatToNumericXAxis(this.chartType,x,i)).chart.sparkline)!==null&&b!==void 0&&b.enabled||(k=window.Apex.chart)!==null&&k!==void 0&&(v=k.sparkline)!==null&&v!==void 0&&v.enabled)&&(x=n.sparkline(x)),a=T.extend(r,x)}var u=T.extend(a,window.Apex);return r=T.extend(u,i),r=this.handleUserInputErrors(r)}},{key:"checkForCatToNumericXAxis",value:function(e,t,i){var o,n,r=new Qn(i),a=(e==="bar"||e==="boxPlot")&&((o=i.plotOptions)===null||o===void 0||(n=o.bar)===null||n===void 0?void 0:n.horizontal),l=e==="pie"||e==="polarArea"||e==="donut"||e==="radar"||e==="radialBar"||e==="heatmap",c=i.xaxis.type!=="datetime"&&i.xaxis.type!=="numeric",d=i.xaxis.tickPlacement?i.xaxis.tickPlacement:t.xaxis&&t.xaxis.tickPlacement;return a||l||!c||d==="between"||(i=r.convertCatToNumeric(i)),i}},{key:"extendYAxis",value:function(e,t){var i=new no;(e.yaxis===void 0||!e.yaxis||Array.isArray(e.yaxis)&&e.yaxis.length===0)&&(e.yaxis={}),e.yaxis.constructor!==Array&&window.Apex.yaxis&&window.Apex.yaxis.constructor!==Array&&(e.yaxis=T.extend(e.yaxis,window.Apex.yaxis)),e.yaxis.constructor!==Array?e.yaxis=[T.extend(i.yAxis,e.yaxis)]:e.yaxis=T.extendArray(e.yaxis,i.yAxis);var o=!1;e.yaxis.forEach(function(r){r.logarithmic&&(o=!0)});var n=e.series;return t&&!n&&(n=t.config.series),o&&n.length!==e.yaxis.length&&n.length&&(e.yaxis=n.map(function(r,a){if(r.name||(n[a].name="series-".concat(a+1)),e.yaxis[a])return e.yaxis[a].seriesName=n[a].name,e.yaxis[a];var l=T.extend(i.yAxis,e.yaxis[0]);return l.show=!1,l})),o&&n.length>1&&n.length!==e.yaxis.length&&console.warn("A multi-series logarithmic chart should have equal number of series and y-axes"),e}},{key:"extendAnnotations",value:function(e){return e.annotations===void 0&&(e.annotations={},e.annotations.yaxis=[],e.annotations.xaxis=[],e.annotations.points=[]),e=this.extendYAxisAnnotations(e),e=this.extendXAxisAnnotations(e),e=this.extendPointAnnotations(e)}},{key:"extendYAxisAnnotations",value:function(e){var t=new no;return e.annotations.yaxis=T.extendArray(e.annotations.yaxis!==void 0?e.annotations.yaxis:[],t.yAxisAnnotation),e}},{key:"extendXAxisAnnotations",value:function(e){var t=new no;return e.annotations.xaxis=T.extendArray(e.annotations.xaxis!==void 0?e.annotations.xaxis:[],t.xAxisAnnotation),e}},{key:"extendPointAnnotations",value:function(e){var t=new no;return e.annotations.points=T.extendArray(e.annotations.points!==void 0?e.annotations.points:[],t.pointAnnotation),e}},{key:"checkForDarkTheme",value:function(e){e.theme&&e.theme.mode==="dark"&&(e.tooltip||(e.tooltip={}),e.tooltip.theme!=="light"&&(e.tooltip.theme="dark"),e.chart.foreColor||(e.chart.foreColor="#f6f7f8"),e.theme.palette||(e.theme.palette="palette4"))}},{key:"handleUserInputErrors",value:function(e){var t=e;if(t.tooltip.shared&&t.tooltip.intersect)throw new Error("tooltip.shared cannot be enabled when tooltip.intersect is true. Turn off any other option by setting it to false.");if(t.chart.type==="bar"&&t.plotOptions.bar.horizontal){if(t.yaxis.length>1)throw new Error("Multiple Y Axis for bars are not supported. Switch to column chart by setting plotOptions.bar.horizontal=false");t.yaxis[0].reversed&&(t.yaxis[0].opposite=!0),t.xaxis.tooltip.enabled=!1,t.yaxis[0].tooltip.enabled=!1,t.chart.zoom.enabled=!1}return t.chart.type!=="bar"&&t.chart.type!=="rangeBar"||t.tooltip.shared&&t.xaxis.crosshairs.width==="barWidth"&&t.series.length>1&&(t.xaxis.crosshairs.width="tickWidth"),t.chart.type!=="candlestick"&&t.chart.type!=="boxPlot"||t.yaxis[0].reversed&&(console.warn("Reversed y-axis in ".concat(t.chart.type," chart is not supported.")),t.yaxis[0].reversed=!1),t}}]),s}(),cg=function(){function s(){H(this,s)}return W(s,[{key:"initGlobalVars",value:function(e){e.series=[],e.seriesCandleO=[],e.seriesCandleH=[],e.seriesCandleM=[],e.seriesCandleL=[],e.seriesCandleC=[],e.seriesRangeStart=[],e.seriesRangeEnd=[],e.seriesRange=[],e.seriesPercent=[],e.seriesGoals=[],e.seriesX=[],e.seriesZ=[],e.seriesNames=[],e.seriesTotals=[],e.seriesLog=[],e.seriesColors=[],e.stackedSeriesTotals=[],e.seriesXvalues=[],e.seriesYvalues=[],e.labels=[],e.hasXaxisGroups=!1,e.groups=[],e.barGroups=[],e.lineGroups=[],e.areaGroups=[],e.hasSeriesGroups=!1,e.seriesGroups=[],e.categoryLabels=[],e.timescaleLabels=[],e.noLabelsProvided=!1,e.resizeTimer=null,e.selectionResizeTimer=null,e.delayedElements=[],e.pointsArray=[],e.dataLabelsRects=[],e.isXNumeric=!1,e.skipLastTimelinelabel=!1,e.skipFirstTimelinelabel=!1,e.isDataXYZ=!1,e.isMultiLineX=!1,e.isMultipleYAxis=!1,e.maxY=-Number.MAX_VALUE,e.minY=Number.MIN_VALUE,e.minYArr=[],e.maxYArr=[],e.maxX=-Number.MAX_VALUE,e.minX=Number.MAX_VALUE,e.initialMaxX=-Number.MAX_VALUE,e.initialMinX=Number.MAX_VALUE,e.maxDate=0,e.minDate=Number.MAX_VALUE,e.minZ=Number.MAX_VALUE,e.maxZ=-Number.MAX_VALUE,e.minXDiff=Number.MAX_VALUE,e.yAxisScale=[],e.xAxisScale=null,e.xAxisTicksPositions=[],e.yLabelsCoords=[],e.yTitleCoords=[],e.barPadForNumericAxis=0,e.padHorizontal=0,e.xRange=0,e.yRange=[],e.zRange=0,e.dataPoints=0,e.xTickAmount=0,e.multiAxisTickAmount=0}},{key:"globalVars",value:function(e){return{chartID:null,cuid:null,events:{beforeMount:[],mounted:[],updated:[],clicked:[],selection:[],dataPointSelection:[],zoomed:[],scrolled:[]},colors:[],clientX:null,clientY:null,fill:{colors:[]},stroke:{colors:[]},dataLabels:{style:{colors:[]}},radarPolygons:{fill:{colors:[]}},markers:{colors:[],size:e.markers.size,largestSize:0},animationEnded:!1,isTouchDevice:"ontouchstart"in window||navigator.msMaxTouchPoints,isDirty:!1,isExecCalled:!1,initialConfig:null,initialSeries:[],lastXAxis:[],lastYAxis:[],columnSeries:null,labels:[],timescaleLabels:[],noLabelsProvided:!1,allSeriesCollapsed:!1,collapsedSeries:[],collapsedSeriesIndices:[],ancillaryCollapsedSeries:[],ancillaryCollapsedSeriesIndices:[],risingSeries:[],dataFormatXNumeric:!1,capturedSeriesIndex:-1,capturedDataPointIndex:-1,selectedDataPoints:[],goldenPadding:35,invalidLogScale:!1,ignoreYAxisIndexes:[],maxValsInArrayIndex:0,radialSize:0,selection:void 0,zoomEnabled:e.chart.toolbar.autoSelected==="zoom"&&e.chart.toolbar.tools.zoom&&e.chart.zoom.enabled,panEnabled:e.chart.toolbar.autoSelected==="pan"&&e.chart.toolbar.tools.pan,selectionEnabled:e.chart.toolbar.autoSelected==="selection"&&e.chart.toolbar.tools.selection,yaxis:null,mousedown:!1,lastClientPosition:{},visibleXRange:void 0,yValueDecimal:0,total:0,SVGNS:"http://www.w3.org/2000/svg",svgWidth:0,svgHeight:0,noData:!1,locale:{},dom:{},memory:{methodsToExec:[]},shouldAnimate:!0,skipLastTimelinelabel:!1,skipFirstTimelinelabel:!1,delayedElements:[],axisCharts:!0,isDataXYZ:!1,isSlopeChart:e.plotOptions.line.isSlopeChart,resized:!1,resizeTimer:null,comboCharts:!1,dataChanged:!1,previousPaths:[],allSeriesHasEqualX:!0,pointsArray:[],dataLabelsRects:[],lastDrawnDataLabelsIndexes:[],hasNullValues:!1,easing:null,zoomed:!1,gridWidth:0,gridHeight:0,rotateXLabels:!1,defaultLabels:!1,xLabelFormatter:void 0,yLabelFormatters:[],xaxisTooltipFormatter:void 0,ttKeyFormatter:void 0,ttVal:void 0,ttZFormatter:void 0,LINE_HEIGHT_RATIO:1.618,xAxisLabelsHeight:0,xAxisGroupLabelsHeight:0,xAxisLabelsWidth:0,yAxisLabelsWidth:0,scaleX:1,scaleY:1,translateX:0,translateY:0,translateYAxisX:[],yAxisWidths:[],translateXAxisY:0,translateXAxisX:0,tooltip:null,niceScaleAllowedMagMsd:[[1,1,2,5,5,5,10,10,10,10,10],[1,1,2,5,5,5,10,10,10,10,10]],niceScaleDefaultTicks:[1,2,4,4,6,6,6,6,6,6,6,6,6,6,6,6,6,6,12,12,12,12,12,12,12,12,12,24],seriesYAxisMap:[],seriesYAxisReverseMap:[]}}},{key:"init",value:function(e){var t=this.globalVars(e);return this.initGlobalVars(t),t.initialConfig=T.extend({},e),t.initialSeries=T.clone(e.series),t.lastXAxis=T.clone(t.initialConfig.xaxis),t.lastYAxis=T.clone(t.initialConfig.yaxis),t}}]),s}(),Tw=function(){function s(e){H(this,s),this.opts=e}return W(s,[{key:"init",value:function(){var e=new Jn(this.opts).init({responsiveOverride:!1});return{config:e,globals:new cg().init(e)}}}]),s}(),Yt=function(){function s(e){H(this,s),this.ctx=e,this.w=e.w,this.opts=null,this.seriesIndex=0}return W(s,[{key:"clippedImgArea",value:function(e){var t=this.w,i=t.config,o=parseInt(t.globals.gridWidth,10),n=parseInt(t.globals.gridHeight,10),r=o>n?o:n,a=e.image,l=0,c=0;e.width===void 0&&e.height===void 0?i.fill.image.width!==void 0&&i.fill.image.height!==void 0?(l=i.fill.image.width+1,c=i.fill.image.height):(l=r+1,c=r):(l=e.width,c=e.height);var d=document.createElementNS(t.globals.SVGNS,"pattern");N.setAttrs(d,{id:e.patternID,patternUnits:e.patternUnits?e.patternUnits:"userSpaceOnUse",width:l+"px",height:c+"px"});var h=document.createElementNS(t.globals.SVGNS,"image");d.appendChild(h),h.setAttributeNS(window.SVG.xlink,"href",a),N.setAttrs(h,{x:0,y:0,preserveAspectRatio:"none",width:l+"px",height:c+"px"}),h.style.opacity=e.opacity,t.globals.dom.elDefs.node.appendChild(d)}},{key:"getSeriesIndex",value:function(e){var t=this.w,i=t.config.chart.type;return(i==="bar"||i==="rangeBar")&&t.config.plotOptions.bar.distributed||i==="heatmap"||i==="treemap"?this.seriesIndex=e.seriesNumber:this.seriesIndex=e.seriesNumber%t.globals.series.length,this.seriesIndex}},{key:"fillPath",value:function(e){var t=this.w;this.opts=e;var i,o,n,r=this.w.config;this.seriesIndex=this.getSeriesIndex(e);var a=this.getFillColors()[this.seriesIndex];t.globals.seriesColors[this.seriesIndex]!==void 0&&(a=t.globals.seriesColors[this.seriesIndex]),typeof a=="function"&&(a=a({seriesIndex:this.seriesIndex,dataPointIndex:e.dataPointIndex,value:e.value,w:t}));var l=e.fillType?e.fillType:this.getFillType(this.seriesIndex),c=Array.isArray(r.fill.opacity)?r.fill.opacity[this.seriesIndex]:r.fill.opacity;e.color&&(a=e.color),a||(a="#fff",console.warn("undefined color - ApexCharts"));var d=a;if(a.indexOf("rgb")===-1?a.length<9&&(d=T.hexToRgba(a,c)):a.indexOf("rgba")>-1&&(c=T.getOpacityFromRGBA(a)),e.opacity&&(c=e.opacity),l==="pattern"&&(o=this.handlePatternFill({fillConfig:e.fillConfig,patternFill:o,fillColor:a,fillOpacity:c,defaultColor:d})),l==="gradient"&&(n=this.handleGradientFill({fillConfig:e.fillConfig,fillColor:a,fillOpacity:c,i:this.seriesIndex})),l==="image"){var h=r.fill.image.src,g=e.patternID?e.patternID:"";this.clippedImgArea({opacity:c,image:Array.isArray(h)?e.seriesNumber<h.length?h[e.seriesNumber]:h[0]:h,width:e.width?e.width:void 0,height:e.height?e.height:void 0,patternUnits:e.patternUnits,patternID:"pattern".concat(t.globals.cuid).concat(e.seriesNumber+1).concat(g)}),i="url(#pattern".concat(t.globals.cuid).concat(e.seriesNumber+1).concat(g,")")}else i=l==="gradient"?n:l==="pattern"?o:d;return e.solid&&(i=d),i}},{key:"getFillType",value:function(e){var t=this.w;return Array.isArray(t.config.fill.type)?t.config.fill.type[e]:t.config.fill.type}},{key:"getFillColors",value:function(){var e=this.w,t=e.config,i=this.opts,o=[];return e.globals.comboCharts?e.config.series[this.seriesIndex].type==="line"?Array.isArray(e.globals.stroke.colors)?o=e.globals.stroke.colors:o.push(e.globals.stroke.colors):Array.isArray(e.globals.fill.colors)?o=e.globals.fill.colors:o.push(e.globals.fill.colors):t.chart.type==="line"?Array.isArray(e.globals.stroke.colors)?o=e.globals.stroke.colors:o.push(e.globals.stroke.colors):Array.isArray(e.globals.fill.colors)?o=e.globals.fill.colors:o.push(e.globals.fill.colors),i.fillColors!==void 0&&(o=[],Array.isArray(i.fillColors)?o=i.fillColors.slice():o.push(i.fillColors)),o}},{key:"handlePatternFill",value:function(e){var t=e.fillConfig,i=e.patternFill,o=e.fillColor,n=e.fillOpacity,r=e.defaultColor,a=this.w.config.fill;t&&(a=t);var l=this.opts,c=new N(this.ctx),d=Array.isArray(a.pattern.strokeWidth)?a.pattern.strokeWidth[this.seriesIndex]:a.pattern.strokeWidth,h=o;return Array.isArray(a.pattern.style)?i=a.pattern.style[l.seriesNumber]!==void 0?c.drawPattern(a.pattern.style[l.seriesNumber],a.pattern.width,a.pattern.height,h,d,n):r:i=c.drawPattern(a.pattern.style,a.pattern.width,a.pattern.height,h,d,n),i}},{key:"handleGradientFill",value:function(e){var t=e.fillColor,i=e.fillOpacity,o=e.fillConfig,n=e.i,r=this.w.config.fill;o&&(r=F(F({},r),o));var a,l=this.opts,c=new N(this.ctx),d=new T,h=r.gradient.type,g=t,m=r.gradient.opacityFrom===void 0?i:Array.isArray(r.gradient.opacityFrom)?r.gradient.opacityFrom[n]:r.gradient.opacityFrom;g.indexOf("rgba")>-1&&(m=T.getOpacityFromRGBA(g));var p=r.gradient.opacityTo===void 0?i:Array.isArray(r.gradient.opacityTo)?r.gradient.opacityTo[n]:r.gradient.opacityTo;if(r.gradient.gradientToColors===void 0||r.gradient.gradientToColors.length===0)a=r.gradient.shade==="dark"?d.shadeColor(-1*parseFloat(r.gradient.shadeIntensity),t.indexOf("rgb")>-1?T.rgb2hex(t):t):d.shadeColor(parseFloat(r.gradient.shadeIntensity),t.indexOf("rgb")>-1?T.rgb2hex(t):t);else if(r.gradient.gradientToColors[l.seriesNumber]){var b=r.gradient.gradientToColors[l.seriesNumber];a=b,b.indexOf("rgba")>-1&&(p=T.getOpacityFromRGBA(b))}else a=t;if(r.gradient.gradientFrom&&(g=r.gradient.gradientFrom),r.gradient.gradientTo&&(a=r.gradient.gradientTo),r.gradient.inverseColors){var k=g;g=a,a=k}return g.indexOf("rgb")>-1&&(g=T.rgb2hex(g)),a.indexOf("rgb")>-1&&(a=T.rgb2hex(a)),c.drawGradient(h,g,a,m,p,l.size,r.gradient.stops,r.gradient.colorStops,n)}}]),s}(),Zo=function(){function s(e,t){H(this,s),this.ctx=e,this.w=e.w}return W(s,[{key:"setGlobalMarkerSize",value:function(){var e=this.w;if(e.globals.markers.size=Array.isArray(e.config.markers.size)?e.config.markers.size:[e.config.markers.size],e.globals.markers.size.length>0){if(e.globals.markers.size.length<e.globals.series.length+1)for(var t=0;t<=e.globals.series.length;t++)e.globals.markers.size[t]===void 0&&e.globals.markers.size.push(e.globals.markers.size[0])}else e.globals.markers.size=e.config.series.map(function(i){return e.config.markers.size})}},{key:"plotChartMarkers",value:function(e,t,i,o){var n,r=arguments.length>4&&arguments[4]!==void 0&&arguments[4],a=this.w,l=t,c=e,d=null,h=new N(this.ctx),g=a.config.markers.discrete&&a.config.markers.discrete.length;if((a.globals.markers.size[t]>0||r||g)&&(d=h.group({class:r||g?"":"apexcharts-series-markers"})).attr("clip-path","url(#gridRectMarkerMask".concat(a.globals.cuid,")")),Array.isArray(c.x))for(var m=0;m<c.x.length;m++){var p=i;i===1&&m===0&&(p=0),i===1&&m===1&&(p=1);var b="apexcharts-marker";if(a.config.chart.type!=="line"&&a.config.chart.type!=="area"||a.globals.comboCharts||a.config.tooltip.intersect||(b+=" no-pointer-events"),(Array.isArray(a.config.markers.size)?a.globals.markers.size[t]>0:a.config.markers.size>0)||r||g){T.isNumber(c.y[m])?b+=" w".concat(T.randomId()):b="apexcharts-nullpoint";var k=this.getMarkerConfig({cssClass:b,seriesIndex:t,dataPointIndex:p});a.config.series[l].data[p]&&(a.config.series[l].data[p].fillColor&&(k.pointFillColor=a.config.series[l].data[p].fillColor),a.config.series[l].data[p].strokeColor&&(k.pointStrokeColor=a.config.series[l].data[p].strokeColor)),o!==void 0&&(k.pSize=o),(c.x[m]<-a.globals.markers.largestSize||c.x[m]>a.globals.gridWidth+a.globals.markers.largestSize||c.y[m]<-a.globals.markers.largestSize||c.y[m]>a.globals.gridHeight+a.globals.markers.largestSize)&&(k.pSize=0),(n=h.drawMarker(c.x[m],c.y[m],k)).attr("rel",p),n.attr("j",p),n.attr("index",t),n.node.setAttribute("default-marker-size",k.pSize),new lt(this.ctx).setSelectionFilter(n,t,p),this.addEvents(n),d&&d.add(n)}else a.globals.pointsArray[t]===void 0&&(a.globals.pointsArray[t]=[]),a.globals.pointsArray[t].push([c.x[m],c.y[m]])}return d}},{key:"getMarkerConfig",value:function(e){var t=e.cssClass,i=e.seriesIndex,o=e.dataPointIndex,n=o===void 0?null:o,r=e.radius,a=r===void 0?null:r,l=e.size,c=l===void 0?null:l,d=e.strokeWidth,h=d===void 0?null:d,g=this.w,m=this.getMarkerStyle(i),p=c===null?g.globals.markers.size[i]:c,b=g.config.markers;return n!==null&&b.discrete.length&&b.discrete.map(function(k){k.seriesIndex===i&&k.dataPointIndex===n&&(m.pointStrokeColor=k.strokeColor,m.pointFillColor=k.fillColor,p=k.size,m.pointShape=k.shape)}),{pSize:a===null?p:a,pRadius:a!==null?a:b.radius,pointStrokeWidth:h!==null?h:Array.isArray(b.strokeWidth)?b.strokeWidth[i]:b.strokeWidth,pointStrokeColor:m.pointStrokeColor,pointFillColor:m.pointFillColor,shape:m.pointShape||(Array.isArray(b.shape)?b.shape[i]:b.shape),class:t,pointStrokeOpacity:Array.isArray(b.strokeOpacity)?b.strokeOpacity[i]:b.strokeOpacity,pointStrokeDashArray:Array.isArray(b.strokeDashArray)?b.strokeDashArray[i]:b.strokeDashArray,pointFillOpacity:Array.isArray(b.fillOpacity)?b.fillOpacity[i]:b.fillOpacity,seriesIndex:i}}},{key:"addEvents",value:function(e){var t=this.w,i=new N(this.ctx);e.node.addEventListener("mouseenter",i.pathMouseEnter.bind(this.ctx,e)),e.node.addEventListener("mouseleave",i.pathMouseLeave.bind(this.ctx,e)),e.node.addEventListener("mousedown",i.pathMouseDown.bind(this.ctx,e)),e.node.addEventListener("click",t.config.markers.onClick),e.node.addEventListener("dblclick",t.config.markers.onDblClick),e.node.addEventListener("touchstart",i.pathMouseDown.bind(this.ctx,e),{passive:!0})}},{key:"getMarkerStyle",value:function(e){var t=this.w,i=t.globals.markers.colors,o=t.config.markers.strokeColor||t.config.markers.strokeColors;return{pointStrokeColor:Array.isArray(o)?o[e]:o,pointFillColor:Array.isArray(i)?i[e]:i}}}]),s}(),dg=function(){function s(e){H(this,s),this.ctx=e,this.w=e.w,this.initialAnim=this.w.config.chart.animations.enabled}return W(s,[{key:"draw",value:function(e,t,i){var o=this.w,n=new N(this.ctx),r=i.realIndex,a=i.pointsPos,l=i.zRatio,c=i.elParent,d=n.group({class:"apexcharts-series-markers apexcharts-series-".concat(o.config.chart.type)});if(d.attr("clip-path","url(#gridRectMarkerMask".concat(o.globals.cuid,")")),Array.isArray(a.x))for(var h=0;h<a.x.length;h++){var g=t+1,m=!0;t===0&&h===0&&(g=0),t===0&&h===1&&(g=1);var p=o.globals.markers.size[r];if(l!==1/0){var b=o.config.plotOptions.bubble;p=o.globals.seriesZ[r][g],b.zScaling&&(p/=l),b.minBubbleRadius&&p<b.minBubbleRadius&&(p=b.minBubbleRadius),b.maxBubbleRadius&&p>b.maxBubbleRadius&&(p=b.maxBubbleRadius)}var k=a.x[h],v=a.y[h];if(p=p||0,v!==null&&o.globals.series[r][g]!==void 0||(m=!1),m){var x=this.drawPoint(k,v,p,r,g,t);d.add(x)}c.add(d)}}},{key:"drawPoint",value:function(e,t,i,o,n,r){var a=this.w,l=o,c=new Ko(this.ctx),d=new lt(this.ctx),h=new Yt(this.ctx),g=new Zo(this.ctx),m=new N(this.ctx),p=g.getMarkerConfig({cssClass:"apexcharts-marker",seriesIndex:l,dataPointIndex:n,radius:a.config.chart.type==="bubble"||a.globals.comboCharts&&a.config.series[o]&&a.config.series[o].type==="bubble"?i:null}),b=h.fillPath({seriesNumber:o,dataPointIndex:n,color:p.pointFillColor,patternUnits:"objectBoundingBox",value:a.globals.series[o][r]}),k=m.drawMarker(e,t,p);if(a.config.series[l].data[n]&&a.config.series[l].data[n].fillColor&&(b=a.config.series[l].data[n].fillColor),k.attr({fill:b}),a.config.chart.dropShadow.enabled){var v=a.config.chart.dropShadow;d.dropShadow(k,v,o)}if(!this.initialAnim||a.globals.dataChanged||a.globals.resized)a.globals.animationEnded=!0;else{var x=a.config.chart.animations.speed;c.animateMarker(k,x,a.globals.easing,function(){window.setTimeout(function(){c.animationCompleted(k)},100)})}return k.attr({rel:n,j:n,index:o,"default-marker-size":p.pSize}),d.setSelectionFilter(k,o,n),g.addEvents(k),k.node.classList.add("apexcharts-marker"),k}},{key:"centerTextInBubble",value:function(e){var t=this.w;return{y:e+=parseInt(t.config.dataLabels.style.fontSize,10)/4}}}]),s}(),Xo=function(){function s(e){H(this,s),this.ctx=e,this.w=e.w}return W(s,[{key:"dataLabelsCorrection",value:function(e,t,i,o,n,r,a){var l=this.w,c=!1,d=new N(this.ctx).getTextRects(i,a),h=d.width,g=d.height;t<0&&(t=0),t>l.globals.gridHeight+g&&(t=l.globals.gridHeight+g/2),l.globals.dataLabelsRects[o]===void 0&&(l.globals.dataLabelsRects[o]=[]),l.globals.dataLabelsRects[o].push({x:e,y:t,width:h,height:g});var m=l.globals.dataLabelsRects[o].length-2,p=l.globals.lastDrawnDataLabelsIndexes[o]!==void 0?l.globals.lastDrawnDataLabelsIndexes[o][l.globals.lastDrawnDataLabelsIndexes[o].length-1]:0;if(l.globals.dataLabelsRects[o][m]!==void 0){var b=l.globals.dataLabelsRects[o][p];(e>b.x+b.width||t>b.y+b.height||t+g<b.y||e+h<b.x)&&(c=!0)}return(n===0||r)&&(c=!0),{x:e,y:t,textRects:d,drawnextLabel:c}}},{key:"drawDataLabel",value:function(e){var t=this,i=e.type,o=e.pos,n=e.i,r=e.j,a=e.isRangeStart,l=e.strokeWidth,c=l===void 0?2:l,d=this.w,h=new N(this.ctx),g=d.config.dataLabels,m=0,p=0,b=r,k=null;if(d.globals.collapsedSeriesIndices.indexOf(n)!==-1||!g.enabled||!Array.isArray(o.x))return k;k=h.group({class:"apexcharts-data-labels"});for(var v=0;v<o.x.length;v++)if(m=o.x[v]+g.offsetX,p=o.y[v]+g.offsetY+c,!isNaN(m)){r===1&&v===0&&(b=0),r===1&&v===1&&(b=1);var x=d.globals.series[n][b];i==="rangeArea"&&(x=a?d.globals.seriesRangeStart[n][b]:d.globals.seriesRangeEnd[n][b]);var u="",f=function(y){return d.config.dataLabels.formatter(y,{ctx:t.ctx,seriesIndex:n,dataPointIndex:b,w:d})};d.config.chart.type==="bubble"?(u=f(x=d.globals.seriesZ[n][b]),p=o.y[v],p=new dg(this.ctx).centerTextInBubble(p,n,b).y):x!==void 0&&(u=f(x));var w=d.config.dataLabels.textAnchor;d.globals.isSlopeChart&&(w=b===0?"end":b===d.config.series[n].data.length-1?"start":"middle"),this.plotDataLabelsText({x:m,y:p,text:u,i:n,j:b,parent:k,offsetCorrection:!0,dataLabelsConfig:d.config.dataLabels,textAnchor:w})}return k}},{key:"plotDataLabelsText",value:function(e){var t=this.w,i=new N(this.ctx),o=e.x,n=e.y,r=e.i,a=e.j,l=e.text,c=e.textAnchor,d=e.fontSize,h=e.parent,g=e.dataLabelsConfig,m=e.color,p=e.alwaysDrawDataLabel,b=e.offsetCorrection,k=e.className,v=null;if(Array.isArray(t.config.dataLabels.enabledOnSeries)&&t.config.dataLabels.enabledOnSeries.indexOf(r)<0)return v;var x={x:o,y:n,drawnextLabel:!0,textRects:null};b&&(x=this.dataLabelsCorrection(o,n,l,r,a,p,parseInt(g.style.fontSize,10))),t.globals.zoomed||(o=x.x,n=x.y),x.textRects&&(o<-20-x.textRects.width||o>t.globals.gridWidth+x.textRects.width+30)&&(l="");var u=t.globals.dataLabels.style.colors[r];((t.config.chart.type==="bar"||t.config.chart.type==="rangeBar")&&t.config.plotOptions.bar.distributed||t.config.dataLabels.distributed)&&(u=t.globals.dataLabels.style.colors[a]),typeof u=="function"&&(u=u({series:t.globals.series,seriesIndex:r,dataPointIndex:a,w:t})),m&&(u=m);var f=g.offsetX,w=g.offsetY;if(t.config.chart.type!=="bar"&&t.config.chart.type!=="rangeBar"||(f=0,w=0),t.globals.isSlopeChart&&(a!==0&&(f=-2*g.offsetX+5),a!==0&&a!==t.config.series[r].data.length-1&&(f=0)),x.drawnextLabel){if((v=i.drawText({width:100,height:parseInt(g.style.fontSize,10),x:o+f,y:n+w,foreColor:u,textAnchor:c||g.textAnchor,text:l,fontSize:d||g.style.fontSize,fontFamily:g.style.fontFamily,fontWeight:g.style.fontWeight||"normal"})).attr({class:k||"apexcharts-datalabel",cx:o,cy:n}),g.dropShadow.enabled){var y=g.dropShadow;new lt(this.ctx).dropShadow(v,y)}h.add(v),t.globals.lastDrawnDataLabelsIndexes[r]===void 0&&(t.globals.lastDrawnDataLabelsIndexes[r]=[]),t.globals.lastDrawnDataLabelsIndexes[r].push(a)}return v}},{key:"addBackgroundToDataLabel",value:function(e,t){var i=this.w,o=i.config.dataLabels.background,n=o.padding,r=o.padding/2,a=t.width,l=t.height,c=new N(this.ctx).drawRect(t.x-n,t.y-r/2,a+2*n,l+r,o.borderRadius,i.config.chart.background!=="transparent"&&i.config.chart.background?i.config.chart.background:"#fff",o.opacity,o.borderWidth,o.borderColor);return o.dropShadow.enabled&&new lt(this.ctx).dropShadow(c,o.dropShadow),c}},{key:"dataLabelsBackground",value:function(){var e=this.w;if(e.config.chart.type!=="bubble")for(var t=e.globals.dom.baseEl.querySelectorAll(".apexcharts-datalabels text"),i=0;i<t.length;i++){var o=t[i],n=o.getBBox(),r=null;if(n.width&&n.height&&(r=this.addBackgroundToDataLabel(o,n)),r){o.parentNode.insertBefore(r.node,o);var a=o.getAttribute("fill");e.config.chart.animations.enabled&&!e.globals.resized&&!e.globals.dataChanged?r.animate().attr({fill:a}):r.attr({fill:a}),o.setAttribute("fill",e.config.dataLabels.background.foreColor)}}}},{key:"bringForward",value:function(){for(var e=this.w,t=e.globals.dom.baseEl.querySelectorAll(".apexcharts-datalabels"),i=e.globals.dom.baseEl.querySelector(".apexcharts-plot-series:last-child"),o=0;o<t.length;o++)i&&i.insertBefore(t[o],i.nextSibling)}}]),s}(),zt=function(){function s(e){H(this,s),this.ctx=e,this.w=e.w,this.legendInactiveClass="legend-mouseover-inactive"}return W(s,[{key:"getAllSeriesEls",value:function(){return this.w.globals.dom.baseEl.getElementsByClassName("apexcharts-series")}},{key:"getSeriesByName",value:function(e){return this.w.globals.dom.baseEl.querySelector(".apexcharts-inner .apexcharts-series[seriesName='".concat(T.escapeString(e),"']"))}},{key:"isSeriesHidden",value:function(e){var t=this.getSeriesByName(e),i=parseInt(t.getAttribute("data:realIndex"),10);return{isHidden:t.classList.contains("apexcharts-series-collapsed"),realIndex:i}}},{key:"addCollapsedClassToSeries",value:function(e,t){var i=this.w;function o(n){for(var r=0;r<n.length;r++)n[r].index===t&&e.node.classList.add("apexcharts-series-collapsed")}o(i.globals.collapsedSeries),o(i.globals.ancillaryCollapsedSeries)}},{key:"toggleSeries",value:function(e){var t=this.isSeriesHidden(e);return this.ctx.legend.legendHelpers.toggleDataSeries(t.realIndex,t.isHidden),t.isHidden}},{key:"showSeries",value:function(e){var t=this.isSeriesHidden(e);t.isHidden&&this.ctx.legend.legendHelpers.toggleDataSeries(t.realIndex,!0)}},{key:"hideSeries",value:function(e){var t=this.isSeriesHidden(e);t.isHidden||this.ctx.legend.legendHelpers.toggleDataSeries(t.realIndex,!1)}},{key:"resetSeries",value:function(){var e=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0],t=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1],i=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2],o=this.w,n=T.clone(o.globals.initialSeries);o.globals.previousPaths=[],i?(o.globals.collapsedSeries=[],o.globals.ancillaryCollapsedSeries=[],o.globals.collapsedSeriesIndices=[],o.globals.ancillaryCollapsedSeriesIndices=[]):n=this.emptyCollapsedSeries(n),o.config.series=n,e&&(t&&(o.globals.zoomed=!1,this.ctx.updateHelpers.revertDefaultAxisMinMax()),this.ctx.updateHelpers._updateSeries(n,o.config.chart.animations.dynamicAnimation.enabled))}},{key:"emptyCollapsedSeries",value:function(e){for(var t=this.w,i=0;i<e.length;i++)t.globals.collapsedSeriesIndices.indexOf(i)>-1&&(e[i].data=[]);return e}},{key:"toggleSeriesOnHover",value:function(e,t){var i=this.w;t||(t=e.target);var o=i.globals.dom.baseEl.querySelectorAll(".apexcharts-series, .apexcharts-datalabels, .apexcharts-yaxis");if(e.type==="mousemove"){var n=parseInt(t.getAttribute("rel"),10)-1,r=null,a=null,l=null;if(i.globals.axisCharts||i.config.chart.type==="radialBar")if(i.globals.axisCharts){r=i.globals.dom.baseEl.querySelector(".apexcharts-series[data\\:realIndex='".concat(n,"']")),a=i.globals.dom.baseEl.querySelector(".apexcharts-datalabels[data\\:realIndex='".concat(n,"']"));var c=i.globals.seriesYAxisReverseMap[n];l=i.globals.dom.baseEl.querySelector(".apexcharts-yaxis[rel='".concat(c,"']"))}else r=i.globals.dom.baseEl.querySelector(".apexcharts-series[rel='".concat(n+1,"']"));else r=i.globals.dom.baseEl.querySelector(".apexcharts-series[rel='".concat(n+1,"'] path"));for(var d=0;d<o.length;d++)o[d].classList.add(this.legendInactiveClass);r!==null&&(i.globals.axisCharts||r.parentNode.classList.remove(this.legendInactiveClass),r.classList.remove(this.legendInactiveClass),a!==null&&a.classList.remove(this.legendInactiveClass),l!==null&&l.classList.remove(this.legendInactiveClass))}else if(e.type==="mouseout")for(var h=0;h<o.length;h++)o[h].classList.remove(this.legendInactiveClass)}},{key:"highlightRangeInSeries",value:function(e,t){var i=this,o=this.w,n=o.globals.dom.baseEl.getElementsByClassName("apexcharts-heatmap-rect"),r=function(l){for(var c=0;c<n.length;c++)n[c].classList[l](i.legendInactiveClass)};if(e.type==="mousemove"){var a=parseInt(t.getAttribute("rel"),10)-1;r("add"),function(l){for(var c=0;c<n.length;c++){var d=parseInt(n[c].getAttribute("val"),10);d>=l.from&&d<=l.to&&n[c].classList.remove(i.legendInactiveClass)}}(o.config.plotOptions.heatmap.colorScale.ranges[a])}else e.type==="mouseout"&&r("remove")}},{key:"getActiveConfigSeriesIndex",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"asc",t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],i=this.w,o=0;if(i.config.series.length>1){for(var n=i.config.series.map(function(a,l){return a.data&&a.data.length>0&&i.globals.collapsedSeriesIndices.indexOf(l)===-1&&(!i.globals.comboCharts||t.length===0||t.length&&t.indexOf(i.config.series[l].type)>-1)?l:-1}),r=e==="asc"?0:n.length-1;e==="asc"?r<n.length:r>=0;e==="asc"?r++:r--)if(n[r]!==-1){o=n[r];break}}return o}},{key:"getBarSeriesIndices",value:function(){return this.w.globals.comboCharts?this.w.config.series.map(function(e,t){return e.type==="bar"||e.type==="column"?t:-1}).filter(function(e){return e!==-1}):this.w.config.series.map(function(e,t){return t})}},{key:"getPreviousPaths",value:function(){var e=this.w;function t(r,a,l){for(var c=r[a].childNodes,d={type:l,paths:[],realIndex:r[a].getAttribute("data:realIndex")},h=0;h<c.length;h++)if(c[h].hasAttribute("pathTo")){var g=c[h].getAttribute("pathTo");d.paths.push({d:g})}e.globals.previousPaths.push(d)}e.globals.previousPaths=[],["line","area","bar","rangebar","rangeArea","candlestick","radar"].forEach(function(r){for(var a,l=(a=r,e.globals.dom.baseEl.querySelectorAll(".apexcharts-".concat(a,"-series .apexcharts-series"))),c=0;c<l.length;c++)t(l,c,r)}),this.handlePrevBubbleScatterPaths("bubble"),this.handlePrevBubbleScatterPaths("scatter");var i=e.globals.dom.baseEl.querySelectorAll(".apexcharts-".concat(e.config.chart.type," .apexcharts-series"));if(i.length>0)for(var o=function(r){for(var a=e.globals.dom.baseEl.querySelectorAll(".apexcharts-".concat(e.config.chart.type," .apexcharts-series[data\\:realIndex='").concat(r,"'] rect")),l=[],c=function(h){var g=function(p){return a[h].getAttribute(p)},m={x:parseFloat(g("x")),y:parseFloat(g("y")),width:parseFloat(g("width")),height:parseFloat(g("height"))};l.push({rect:m,color:a[h].getAttribute("color")})},d=0;d<a.length;d++)c(d);e.globals.previousPaths.push(l)},n=0;n<i.length;n++)o(n);e.globals.axisCharts||(e.globals.previousPaths=e.globals.series)}},{key:"handlePrevBubbleScatterPaths",value:function(e){var t=this.w,i=t.globals.dom.baseEl.querySelectorAll(".apexcharts-".concat(e,"-series .apexcharts-series"));if(i.length>0)for(var o=0;o<i.length;o++){for(var n=t.globals.dom.baseEl.querySelectorAll(".apexcharts-".concat(e,"-series .apexcharts-series[data\\:realIndex='").concat(o,"'] circle")),r=[],a=0;a<n.length;a++)r.push({x:n[a].getAttribute("cx"),y:n[a].getAttribute("cy"),r:n[a].getAttribute("r")});t.globals.previousPaths.push(r)}}},{key:"clearPreviousPaths",value:function(){var e=this.w;e.globals.previousPaths=[],e.globals.allSeriesCollapsed=!1}},{key:"handleNoData",value:function(){var e=this.w,t=e.config.noData,i=new N(this.ctx),o=e.globals.svgWidth/2,n=e.globals.svgHeight/2,r="middle";if(e.globals.noData=!0,e.globals.animationEnded=!0,t.align==="left"?(o=10,r="start"):t.align==="right"&&(o=e.globals.svgWidth-10,r="end"),t.verticalAlign==="top"?n=50:t.verticalAlign==="bottom"&&(n=e.globals.svgHeight-50),o+=t.offsetX,n=n+parseInt(t.style.fontSize,10)+2+t.offsetY,t.text!==void 0&&t.text!==""){var a=i.drawText({x:o,y:n,text:t.text,textAnchor:r,fontSize:t.style.fontSize,fontFamily:t.style.fontFamily,foreColor:t.style.color,opacity:1,class:"apexcharts-text-nodata"});e.globals.dom.Paper.add(a)}}},{key:"setNullSeriesToZeroValues",value:function(e){for(var t=this.w,i=0;i<e.length;i++)if(e[i].length===0)for(var o=0;o<e[t.globals.maxValsInArrayIndex].length;o++)e[i].push(0);return e}},{key:"hasAllSeriesEqualX",value:function(){for(var e=!0,t=this.w,i=this.filteredSeriesX(),o=0;o<i.length-1;o++)if(i[o][0]!==i[o+1][0]){e=!1;break}return t.globals.allSeriesHasEqualX=e,e}},{key:"filteredSeriesX",value:function(){var e=this.w.globals.seriesX.map(function(t){return t.length>0?t:[]});return e}}]),s}(),hg=function(){function s(e){H(this,s),this.ctx=e,this.w=e.w,this.twoDSeries=[],this.threeDSeries=[],this.twoDSeriesX=[],this.seriesGoals=[],this.coreUtils=new De(this.ctx)}return W(s,[{key:"isMultiFormat",value:function(){return this.isFormatXY()||this.isFormat2DArray()}},{key:"isFormatXY",value:function(){var e=this.w.config.series.slice(),t=new zt(this.ctx);if(this.activeSeriesIndex=t.getActiveConfigSeriesIndex(),e[this.activeSeriesIndex].data!==void 0&&e[this.activeSeriesIndex].data.length>0&&e[this.activeSeriesIndex].data[0]!==null&&e[this.activeSeriesIndex].data[0].x!==void 0&&e[this.activeSeriesIndex].data[0]!==null)return!0}},{key:"isFormat2DArray",value:function(){var e=this.w.config.series.slice(),t=new zt(this.ctx);if(this.activeSeriesIndex=t.getActiveConfigSeriesIndex(),e[this.activeSeriesIndex].data!==void 0&&e[this.activeSeriesIndex].data.length>0&&e[this.activeSeriesIndex].data[0]!==void 0&&e[this.activeSeriesIndex].data[0]!==null&&e[this.activeSeriesIndex].data[0].constructor===Array)return!0}},{key:"handleFormat2DArray",value:function(e,t){for(var i=this.w.config,o=this.w.globals,n=i.chart.type==="boxPlot"||i.series[t].type==="boxPlot",r=0;r<e[t].data.length;r++)if(e[t].data[r][1]!==void 0&&(Array.isArray(e[t].data[r][1])&&e[t].data[r][1].length===4&&!n?this.twoDSeries.push(T.parseNumber(e[t].data[r][1][3])):e[t].data[r].length>=5?this.twoDSeries.push(T.parseNumber(e[t].data[r][4])):this.twoDSeries.push(T.parseNumber(e[t].data[r][1])),o.dataFormatXNumeric=!0),i.xaxis.type==="datetime"){var a=new Date(e[t].data[r][0]);a=new Date(a).getTime(),this.twoDSeriesX.push(a)}else this.twoDSeriesX.push(e[t].data[r][0]);for(var l=0;l<e[t].data.length;l++)e[t].data[l][2]!==void 0&&(this.threeDSeries.push(e[t].data[l][2]),o.isDataXYZ=!0)}},{key:"handleFormatXY",value:function(e,t){var i=this.w.config,o=this.w.globals,n=new Qe(this.ctx),r=t;o.collapsedSeriesIndices.indexOf(t)>-1&&(r=this.activeSeriesIndex);for(var a=0;a<e[t].data.length;a++)e[t].data[a].y!==void 0&&(Array.isArray(e[t].data[a].y)?this.twoDSeries.push(T.parseNumber(e[t].data[a].y[e[t].data[a].y.length-1])):this.twoDSeries.push(T.parseNumber(e[t].data[a].y))),e[t].data[a].goals!==void 0&&Array.isArray(e[t].data[a].goals)?(this.seriesGoals[t]===void 0&&(this.seriesGoals[t]=[]),this.seriesGoals[t].push(e[t].data[a].goals)):(this.seriesGoals[t]===void 0&&(this.seriesGoals[t]=[]),this.seriesGoals[t].push(null));for(var l=0;l<e[r].data.length;l++){var c=typeof e[r].data[l].x=="string",d=Array.isArray(e[r].data[l].x),h=!d&&!!n.isValidDate(e[r].data[l].x);if(c||h)if(c||i.xaxis.convertedCatToNumeric){var g=o.isBarHorizontal&&o.isRangeData;i.xaxis.type!=="datetime"||g?(this.fallbackToCategory=!0,this.twoDSeriesX.push(e[r].data[l].x),isNaN(e[r].data[l].x)||this.w.config.xaxis.type==="category"||typeof e[r].data[l].x=="string"||(o.isXNumeric=!0)):this.twoDSeriesX.push(n.parseDate(e[r].data[l].x))}else i.xaxis.type==="datetime"?this.twoDSeriesX.push(n.parseDate(e[r].data[l].x.toString())):(o.dataFormatXNumeric=!0,o.isXNumeric=!0,this.twoDSeriesX.push(parseFloat(e[r].data[l].x)));else d?(this.fallbackToCategory=!0,this.twoDSeriesX.push(e[r].data[l].x)):(o.isXNumeric=!0,o.dataFormatXNumeric=!0,this.twoDSeriesX.push(e[r].data[l].x))}if(e[t].data[0]&&e[t].data[0].z!==void 0){for(var m=0;m<e[t].data.length;m++)this.threeDSeries.push(e[t].data[m].z);o.isDataXYZ=!0}}},{key:"handleRangeData",value:function(e,t){var i=this.w.globals,o={};return this.isFormat2DArray()?o=this.handleRangeDataFormat("array",e,t):this.isFormatXY()&&(o=this.handleRangeDataFormat("xy",e,t)),i.seriesRangeStart.push(o.start===void 0?[]:o.start),i.seriesRangeEnd.push(o.end===void 0?[]:o.end),i.seriesRange.push(o.rangeUniques),i.seriesRange.forEach(function(n,r){n&&n.forEach(function(a,l){a.y.forEach(function(c,d){for(var h=0;h<a.y.length;h++)if(d!==h){var g=c.y1,m=c.y2,p=a.y[h].y1;g<=a.y[h].y2&&p<=m&&(a.overlaps.indexOf(c.rangeName)<0&&a.overlaps.push(c.rangeName),a.overlaps.indexOf(a.y[h].rangeName)<0&&a.overlaps.push(a.y[h].rangeName))}})})}),o}},{key:"handleCandleStickBoxData",value:function(e,t){var i=this.w.globals,o={};return this.isFormat2DArray()?o=this.handleCandleStickBoxDataFormat("array",e,t):this.isFormatXY()&&(o=this.handleCandleStickBoxDataFormat("xy",e,t)),i.seriesCandleO[t]=o.o,i.seriesCandleH[t]=o.h,i.seriesCandleM[t]=o.m,i.seriesCandleL[t]=o.l,i.seriesCandleC[t]=o.c,o}},{key:"handleRangeDataFormat",value:function(e,t,i){var o=[],n=[],r=t[i].data.filter(function(d,h,g){return h===g.findIndex(function(m){return m.x===d.x})}).map(function(d,h){return{x:d.x,overlaps:[],y:[]}});if(e==="array")for(var a=0;a<t[i].data.length;a++)Array.isArray(t[i].data[a])?(o.push(t[i].data[a][1][0]),n.push(t[i].data[a][1][1])):(o.push(t[i].data[a]),n.push(t[i].data[a]));else if(e==="xy")for(var l=function(d){var h=Array.isArray(t[i].data[d].y),g=T.randomId(),m=t[i].data[d].x,p={y1:h?t[i].data[d].y[0]:t[i].data[d].y,y2:h?t[i].data[d].y[1]:t[i].data[d].y,rangeName:g};t[i].data[d].rangeName=g;var b=r.findIndex(function(k){return k.x===m});r[b].y.push(p),o.push(p.y1),n.push(p.y2)},c=0;c<t[i].data.length;c++)l(c);return{start:o,end:n,rangeUniques:r}}},{key:"handleCandleStickBoxDataFormat",value:function(e,t,i){var o=this.w,n=o.config.chart.type==="boxPlot"||o.config.series[i].type==="boxPlot",r=[],a=[],l=[],c=[],d=[];if(e==="array")if(n&&t[i].data[0].length===6||!n&&t[i].data[0].length===5)for(var h=0;h<t[i].data.length;h++)r.push(t[i].data[h][1]),a.push(t[i].data[h][2]),n?(l.push(t[i].data[h][3]),c.push(t[i].data[h][4]),d.push(t[i].data[h][5])):(c.push(t[i].data[h][3]),d.push(t[i].data[h][4]));else for(var g=0;g<t[i].data.length;g++)Array.isArray(t[i].data[g][1])&&(r.push(t[i].data[g][1][0]),a.push(t[i].data[g][1][1]),n?(l.push(t[i].data[g][1][2]),c.push(t[i].data[g][1][3]),d.push(t[i].data[g][1][4])):(c.push(t[i].data[g][1][2]),d.push(t[i].data[g][1][3])));else if(e==="xy")for(var m=0;m<t[i].data.length;m++)Array.isArray(t[i].data[m].y)&&(r.push(t[i].data[m].y[0]),a.push(t[i].data[m].y[1]),n?(l.push(t[i].data[m].y[2]),c.push(t[i].data[m].y[3]),d.push(t[i].data[m].y[4])):(c.push(t[i].data[m].y[2]),d.push(t[i].data[m].y[3])));return{o:r,h:a,m:l,l:c,c:d}}},{key:"parseDataAxisCharts",value:function(e){var t=this,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.ctx,o=this.w.config,n=this.w.globals,r=new Qe(i),a=o.labels.length>0?o.labels.slice():o.xaxis.categories.slice();n.isRangeBar=o.chart.type==="rangeBar"&&n.isBarHorizontal,n.hasXaxisGroups=o.xaxis.type==="category"&&o.xaxis.group.groups.length>0,n.hasXaxisGroups&&(n.groups=o.xaxis.group.groups),e.forEach(function(m,p){m.name!==void 0?n.seriesNames.push(m.name):n.seriesNames.push("series-"+parseInt(p+1,10))}),this.coreUtils.setSeriesYAxisMappings();var l=[],c=at(new Set(o.series.map(function(m){return m.group})));o.series.forEach(function(m,p){var b=c.indexOf(m.group);l[b]||(l[b]=[]),l[b].push(n.seriesNames[p])}),n.seriesGroups=l;for(var d=function(){for(var m=0;m<a.length;m++)if(typeof a[m]=="string"){if(!r.isValidDate(a[m]))throw new Error("You have provided invalid Date format. Please provide a valid JavaScript Date");t.twoDSeriesX.push(r.parseDate(a[m]))}else t.twoDSeriesX.push(a[m])},h=0;h<e.length;h++){if(this.twoDSeries=[],this.twoDSeriesX=[],this.threeDSeries=[],e[h].data===void 0)return void console.error("It is a possibility that you may have not included 'data' property in series.");if(o.chart.type!=="rangeBar"&&o.chart.type!=="rangeArea"&&e[h].type!=="rangeBar"&&e[h].type!=="rangeArea"||(n.isRangeData=!0,o.chart.type!=="rangeBar"&&o.chart.type!=="rangeArea"||this.handleRangeData(e,h)),this.isMultiFormat())this.isFormat2DArray()?this.handleFormat2DArray(e,h):this.isFormatXY()&&this.handleFormatXY(e,h),o.chart.type!=="candlestick"&&e[h].type!=="candlestick"&&o.chart.type!=="boxPlot"&&e[h].type!=="boxPlot"||this.handleCandleStickBoxData(e,h),n.series.push(this.twoDSeries),n.labels.push(this.twoDSeriesX),n.seriesX.push(this.twoDSeriesX),n.seriesGoals=this.seriesGoals,h!==this.activeSeriesIndex||this.fallbackToCategory||(n.isXNumeric=!0);else{o.xaxis.type==="datetime"?(n.isXNumeric=!0,d(),n.seriesX.push(this.twoDSeriesX)):o.xaxis.type==="numeric"&&(n.isXNumeric=!0,a.length>0&&(this.twoDSeriesX=a,n.seriesX.push(this.twoDSeriesX))),n.labels.push(this.twoDSeriesX);var g=e[h].data.map(function(m){return T.parseNumber(m)});n.series.push(g)}n.seriesZ.push(this.threeDSeries),e[h].color!==void 0?n.seriesColors.push(e[h].color):n.seriesColors.push(void 0)}return this.w}},{key:"parseDataNonAxisCharts",value:function(e){var t=this.w.globals,i=this.w.config;t.series=e.slice(),t.seriesNames=i.labels.slice();for(var o=0;o<t.series.length;o++)t.seriesNames[o]===void 0&&t.seriesNames.push("series-"+(o+1));return this.w}},{key:"handleExternalLabelsData",value:function(e){var t=this.w.config,i=this.w.globals;t.xaxis.categories.length>0?i.labels=t.xaxis.categories:t.labels.length>0?i.labels=t.labels.slice():this.fallbackToCategory?(i.labels=i.labels[0],i.seriesRange.length&&(i.seriesRange.map(function(o){o.forEach(function(n){i.labels.indexOf(n.x)<0&&n.x&&i.labels.push(n.x)})}),i.labels=Array.from(new Set(i.labels.map(JSON.stringify)),JSON.parse)),t.xaxis.convertedCatToNumeric&&(new Qn(t).convertCatToNumericXaxis(t,this.ctx,i.seriesX[0]),this._generateExternalLabels(e))):this._generateExternalLabels(e)}},{key:"_generateExternalLabels",value:function(e){var t=this.w.globals,i=this.w.config,o=[];if(t.axisCharts){if(t.series.length>0)if(this.isFormatXY())for(var n=i.series.map(function(h,g){return h.data.filter(function(m,p,b){return b.findIndex(function(k){return k.x===m.x})===p})}),r=n.reduce(function(h,g,m,p){return p[h].length>g.length?h:m},0),a=0;a<n[r].length;a++)o.push(a+1);else for(var l=0;l<t.series[t.maxValsInArrayIndex].length;l++)o.push(l+1);t.seriesX=[];for(var c=0;c<e.length;c++)t.seriesX.push(o);this.w.globals.isBarHorizontal||(t.isXNumeric=!0)}if(o.length===0){o=t.axisCharts?[]:t.series.map(function(h,g){return g+1});for(var d=0;d<e.length;d++)t.seriesX.push(o)}t.labels=o,i.xaxis.convertedCatToNumeric&&(t.categoryLabels=o.map(function(h){return i.xaxis.labels.formatter(h)})),t.noLabelsProvided=!0}},{key:"parseData",value:function(e){var t=this.w,i=t.config,o=t.globals;if(this.excludeCollapsedSeriesInYAxis(),this.fallbackToCategory=!1,this.ctx.core.resetGlobals(),this.ctx.core.isMultipleY(),o.axisCharts?(this.parseDataAxisCharts(e),this.coreUtils.getLargestSeries()):this.parseDataNonAxisCharts(e),i.chart.stacked){var n=new zt(this.ctx);o.series=n.setNullSeriesToZeroValues(o.series)}this.coreUtils.getSeriesTotals(),o.axisCharts&&(o.stackedSeriesTotals=this.coreUtils.getStackedSeriesTotals(),o.stackedSeriesTotalsByGroups=this.coreUtils.getStackedSeriesTotalsByGroups()),this.coreUtils.getPercentSeries(),o.dataFormatXNumeric||o.isXNumeric&&(i.xaxis.type!=="numeric"||i.labels.length!==0||i.xaxis.categories.length!==0)||this.handleExternalLabelsData(e);for(var r=this.coreUtils.getCategoryLabels(o.labels),a=0;a<r.length;a++)if(Array.isArray(r[a])){o.isMultiLineX=!0;break}}},{key:"excludeCollapsedSeriesInYAxis",value:function(){var e=this.w,t=[];e.globals.seriesYAxisMap.forEach(function(i,o){var n=0;i.forEach(function(r){e.globals.collapsedSeriesIndices.indexOf(r)!==-1&&n++}),n>0&&n==i.length&&t.push(o)}),e.globals.ignoreYAxisIndexes=t.map(function(i){return i})}}]),s}(),xr=function(){function s(e){H(this,s),this.ctx=e,this.w=e.w}return W(s,[{key:"scaleSvgNode",value:function(e,t){var i=parseFloat(e.getAttributeNS(null,"width")),o=parseFloat(e.getAttributeNS(null,"height"));e.setAttributeNS(null,"width",i*t),e.setAttributeNS(null,"height",o*t),e.setAttributeNS(null,"viewBox","0 0 "+i+" "+o)}},{key:"fixSvgStringForIe11",value:function(e){if(!T.isIE11())return e.replace(/&nbsp;/g,"&#160;");var t=0,i=e.replace(/xmlns="http:\/\/www.w3.org\/2000\/svg"/g,function(o){return++t===2?'xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:svgjs="http://svgjs.dev"':o});return i=(i=i.replace(/xmlns:NS\d+=""/g,"")).replace(/NS\d+:(\w+:\w+=")/g,"$1")}},{key:"getSvgString",value:function(e){e==null&&(e=1);var t=this.w.globals.dom.Paper.svg();if(e!==1){var i=this.w.globals.dom.Paper.node.cloneNode(!0);this.scaleSvgNode(i,e),t=new XMLSerializer().serializeToString(i)}return this.fixSvgStringForIe11(t)}},{key:"cleanup",value:function(){var e=this.w,t=e.globals.dom.baseEl.getElementsByClassName("apexcharts-xcrosshairs"),i=e.globals.dom.baseEl.getElementsByClassName("apexcharts-ycrosshairs"),o=e.globals.dom.baseEl.querySelectorAll(".apexcharts-zoom-rect, .apexcharts-selection-rect");Array.prototype.forEach.call(o,function(n){n.setAttribute("width",0)}),t&&t[0]&&(t[0].setAttribute("x",-500),t[0].setAttribute("x1",-500),t[0].setAttribute("x2",-500)),i&&i[0]&&(i[0].setAttribute("y",-100),i[0].setAttribute("y1",-100),i[0].setAttribute("y2",-100))}},{key:"svgUrl",value:function(){this.cleanup();var e=this.getSvgString(),t=new Blob([e],{type:"image/svg+xml;charset=utf-8"});return URL.createObjectURL(t)}},{key:"dataURI",value:function(e){var t=this;return new Promise(function(i){var o=t.w,n=e?e.scale||e.width/o.globals.svgWidth:1;t.cleanup();var r=document.createElement("canvas");r.width=o.globals.svgWidth*n,r.height=parseInt(o.globals.dom.elWrap.style.height,10)*n;var a=o.config.chart.background!=="transparent"&&o.config.chart.background?o.config.chart.background:"#fff",l=r.getContext("2d");l.fillStyle=a,l.fillRect(0,0,r.width*n,r.height*n);var c=t.getSvgString(n);if(window.canvg&&T.isIE11()){var d=window.canvg.Canvg.fromString(l,c,{ignoreClear:!0,ignoreDimensions:!0});d.start();var h=r.msToBlob();d.stop(),i({blob:h})}else{var g="data:image/svg+xml,"+encodeURIComponent(c),m=new Image;m.crossOrigin="anonymous",m.onload=function(){if(l.drawImage(m,0,0),r.msToBlob){var p=r.msToBlob();i({blob:p})}else{var b=r.toDataURL("image/png");i({imgURI:b})}},m.src=g}})}},{key:"exportToSVG",value:function(){this.triggerDownload(this.svgUrl(),this.w.config.chart.toolbar.export.svg.filename,".svg")}},{key:"exportToPng",value:function(){var e=this;this.dataURI().then(function(t){var i=t.imgURI,o=t.blob;o?navigator.msSaveOrOpenBlob(o,e.w.globals.chartID+".png"):e.triggerDownload(i,e.w.config.chart.toolbar.export.png.filename,".png")})}},{key:"exportToCSV",value:function(e){var t=this,i=e.series,o=e.fileName,n=e.columnDelimiter,r=n===void 0?",":n,a=e.lineDelimiter,l=a===void 0?`
`:a,c=this.w;i||(i=c.config.series);var d,h,g=[],m=[],p="",b=c.globals.series.map(function(_,C){return c.globals.collapsedSeriesIndices.indexOf(C)===-1?_:[]}),k=function(_){return typeof c.config.chart.toolbar.export.csv.categoryFormatter=="function"?c.config.chart.toolbar.export.csv.categoryFormatter(_):c.config.xaxis.type==="datetime"&&String(_).length>=10?new Date(_).toDateString():T.isNumber(_)?_:_.split(r).join("")},v=function(_){return typeof c.config.chart.toolbar.export.csv.valueFormatter=="function"?c.config.chart.toolbar.export.csv.valueFormatter(_):_},x=Math.max.apply(Math,at(i.map(function(_){return _.data?_.data.length:0}))),u=new hg(this.ctx),f=new Di(this.ctx),w=function(_){var C="";if(c.globals.axisCharts){if(c.config.xaxis.type==="category"||c.config.xaxis.convertedCatToNumeric)if(c.globals.isBarHorizontal){var A=c.globals.yLabelFormatters[0],S=new zt(t.ctx).getActiveConfigSeriesIndex();C=A(c.globals.labels[_],{seriesIndex:S,dataPointIndex:_,w:c})}else C=f.getLabel(c.globals.labels,c.globals.timescaleLabels,0,_).text;c.config.xaxis.type==="datetime"&&(c.config.xaxis.categories.length?C=c.config.xaxis.categories[_]:c.config.labels.length&&(C=c.config.labels[_]))}else C=c.config.labels[_];return C===null?"nullvalue":(Array.isArray(C)&&(C=C.join(" ")),T.isNumber(C)?C:C.split(r).join(""))},y=function(_,C){if(g.length&&C===0&&m.push(g.join(r)),_.data){_.data=_.data.length&&_.data||at(Array(x)).map(function(){return""});for(var A=0;A<_.data.length;A++){g=[];var S=w(A);if(S!=="nullvalue"){if(S||(u.isFormatXY()?S=i[C].data[A].x:u.isFormat2DArray()&&(S=i[C].data[A]?i[C].data[A][0]:"")),C===0){g.push(k(S));for(var P=0;P<c.globals.series.length;P++){var L,I=u.isFormatXY()?(L=i[P].data[A])===null||L===void 0?void 0:L.y:b[P][A];g.push(v(I))}}(c.config.chart.type==="candlestick"||_.type&&_.type==="candlestick")&&(g.pop(),g.push(c.globals.seriesCandleO[C][A]),g.push(c.globals.seriesCandleH[C][A]),g.push(c.globals.seriesCandleL[C][A]),g.push(c.globals.seriesCandleC[C][A])),(c.config.chart.type==="boxPlot"||_.type&&_.type==="boxPlot")&&(g.pop(),g.push(c.globals.seriesCandleO[C][A]),g.push(c.globals.seriesCandleH[C][A]),g.push(c.globals.seriesCandleM[C][A]),g.push(c.globals.seriesCandleL[C][A]),g.push(c.globals.seriesCandleC[C][A])),c.config.chart.type==="rangeBar"&&(g.pop(),g.push(c.globals.seriesRangeStart[C][A]),g.push(c.globals.seriesRangeEnd[C][A])),g.length&&m.push(g.join(r))}}}};g.push(c.config.chart.toolbar.export.csv.headerCategory),c.config.chart.type==="boxPlot"?(g.push("minimum"),g.push("q1"),g.push("median"),g.push("q3"),g.push("maximum")):c.config.chart.type==="candlestick"?(g.push("open"),g.push("high"),g.push("low"),g.push("close")):c.config.chart.type==="rangeBar"?(g.push("minimum"),g.push("maximum")):i.map(function(_,C){var A=(_.name?_.name:"series-".concat(C))+"";c.globals.axisCharts&&g.push(A.split(r).join("")?A.split(r).join(""):"series-".concat(C))}),c.globals.axisCharts||(g.push(c.config.chart.toolbar.export.csv.headerValue),m.push(g.join(r))),c.globals.allSeriesHasEqualX||!c.globals.axisCharts||c.config.xaxis.categories.length||c.config.labels.length?i.map(function(_,C){c.globals.axisCharts?y(_,C):((g=[]).push(k(c.globals.labels[C])),g.push(v(b[C])),m.push(g.join(r)))}):(d=new Set,h={},i.forEach(function(_,C){_?.data.forEach(function(A){var S,P;if(u.isFormatXY())S=A.x,P=A.y;else{if(!u.isFormat2DArray())return;S=A[0],P=A[1]}h[S]||(h[S]=Array(i.length).fill("")),h[S][C]=v(P),d.add(S)})}),g.length&&m.push(g.join(r)),Array.from(d).sort().forEach(function(_){m.push([k(_),h[_].join(r)])})),p+=m.join(l),this.triggerDownload("data:text/csv; charset=utf-8,"+encodeURIComponent("\uFEFF"+p),o||c.config.chart.toolbar.export.csv.filename,".csv")}},{key:"triggerDownload",value:function(e,t,i){var o=document.createElement("a");o.href=e,o.download=(t||this.w.globals.chartID)+i,document.body.appendChild(o),o.click(),document.body.removeChild(o)}}]),s}(),es=function(){function s(e,t){H(this,s),this.ctx=e,this.elgrid=t,this.w=e.w;var i=this.w;this.axesUtils=new Di(e),this.xaxisLabels=i.globals.labels.slice(),i.globals.timescaleLabels.length>0&&!i.globals.isBarHorizontal&&(this.xaxisLabels=i.globals.timescaleLabels.slice()),i.config.xaxis.overwriteCategories&&(this.xaxisLabels=i.config.xaxis.overwriteCategories),this.drawnLabels=[],this.drawnLabelsRects=[],i.config.xaxis.position==="top"?this.offY=0:this.offY=i.globals.gridHeight,this.offY=this.offY+i.config.xaxis.axisBorder.offsetY,this.isCategoryBarHorizontal=i.config.chart.type==="bar"&&i.config.plotOptions.bar.horizontal,this.xaxisFontSize=i.config.xaxis.labels.style.fontSize,this.xaxisFontFamily=i.config.xaxis.labels.style.fontFamily,this.xaxisForeColors=i.config.xaxis.labels.style.colors,this.xaxisBorderWidth=i.config.xaxis.axisBorder.width,this.isCategoryBarHorizontal&&(this.xaxisBorderWidth=i.config.yaxis[0].axisBorder.width.toString()),this.xaxisBorderWidth.indexOf("%")>-1?this.xaxisBorderWidth=i.globals.gridWidth*parseInt(this.xaxisBorderWidth,10)/100:this.xaxisBorderWidth=parseInt(this.xaxisBorderWidth,10),this.xaxisBorderHeight=i.config.xaxis.axisBorder.height,this.yaxis=i.config.yaxis[0]}return W(s,[{key:"drawXaxis",value:function(){var e=this.w,t=new N(this.ctx),i=t.group({class:"apexcharts-xaxis",transform:"translate(".concat(e.config.xaxis.offsetX,", ").concat(e.config.xaxis.offsetY,")")}),o=t.group({class:"apexcharts-xaxis-texts-g",transform:"translate(".concat(e.globals.translateXAxisX,", ").concat(e.globals.translateXAxisY,")")});i.add(o);for(var n=[],r=0;r<this.xaxisLabels.length;r++)n.push(this.xaxisLabels[r]);if(this.drawXAxisLabelAndGroup(!0,t,o,n,e.globals.isXNumeric,function(p,b){return b}),e.globals.hasXaxisGroups){var a=e.globals.groups;n=[];for(var l=0;l<a.length;l++)n.push(a[l].title);var c={};e.config.xaxis.group.style&&(c.xaxisFontSize=e.config.xaxis.group.style.fontSize,c.xaxisFontFamily=e.config.xaxis.group.style.fontFamily,c.xaxisForeColors=e.config.xaxis.group.style.colors,c.fontWeight=e.config.xaxis.group.style.fontWeight,c.cssClass=e.config.xaxis.group.style.cssClass),this.drawXAxisLabelAndGroup(!1,t,o,n,!1,function(p,b){return a[p].cols*b},c)}if(e.config.xaxis.title.text!==void 0){var d=t.group({class:"apexcharts-xaxis-title"}),h=t.drawText({x:e.globals.gridWidth/2+e.config.xaxis.title.offsetX,y:this.offY+parseFloat(this.xaxisFontSize)+(e.config.xaxis.position==="bottom"?e.globals.xAxisLabelsHeight:-e.globals.xAxisLabelsHeight-10)+e.config.xaxis.title.offsetY,text:e.config.xaxis.title.text,textAnchor:"middle",fontSize:e.config.xaxis.title.style.fontSize,fontFamily:e.config.xaxis.title.style.fontFamily,fontWeight:e.config.xaxis.title.style.fontWeight,foreColor:e.config.xaxis.title.style.color,cssClass:"apexcharts-xaxis-title-text "+e.config.xaxis.title.style.cssClass});d.add(h),i.add(d)}if(e.config.xaxis.axisBorder.show){var g=e.globals.barPadForNumericAxis,m=t.drawLine(e.globals.padHorizontal+e.config.xaxis.axisBorder.offsetX-g,this.offY,this.xaxisBorderWidth+g,this.offY,e.config.xaxis.axisBorder.color,0,this.xaxisBorderHeight);this.elgrid&&this.elgrid.elGridBorders&&e.config.grid.show?this.elgrid.elGridBorders.add(m):i.add(m)}return i}},{key:"drawXAxisLabelAndGroup",value:function(e,t,i,o,n,r){var a,l=this,c=arguments.length>6&&arguments[6]!==void 0?arguments[6]:{},d=[],h=[],g=this.w,m=c.xaxisFontSize||this.xaxisFontSize,p=c.xaxisFontFamily||this.xaxisFontFamily,b=c.xaxisForeColors||this.xaxisForeColors,k=c.fontWeight||g.config.xaxis.labels.style.fontWeight,v=c.cssClass||g.config.xaxis.labels.style.cssClass,x=g.globals.padHorizontal,u=o.length,f=g.config.xaxis.type==="category"?g.globals.dataPoints:u;if(f===0&&u>f&&(f=u),n){var w=f>1?f-1:f;a=g.globals.gridWidth/Math.min(w,u-1),x=x+r(0,a)/2+g.config.xaxis.labels.offsetX}else a=g.globals.gridWidth/f,x=x+r(0,a)+g.config.xaxis.labels.offsetX;for(var y=function(C){var A=x-r(C,a)/2+g.config.xaxis.labels.offsetX;C===0&&u===1&&a/2===x&&f===1&&(A=g.globals.gridWidth/2);var S=l.axesUtils.getLabel(o,g.globals.timescaleLabels,A,C,d,m,e),P=28;if(g.globals.rotateXLabels&&e&&(P=22),g.config.xaxis.title.text&&g.config.xaxis.position==="top"&&(P+=parseFloat(g.config.xaxis.title.style.fontSize)+2),e||(P=P+parseFloat(m)+(g.globals.xAxisLabelsHeight-g.globals.xAxisGroupLabelsHeight)+(g.globals.rotateXLabels?10:0)),S=g.config.xaxis.tickAmount!==void 0&&g.config.xaxis.tickAmount!=="dataPoints"&&g.config.xaxis.type!=="datetime"?l.axesUtils.checkLabelBasedOnTickamount(C,S,u):l.axesUtils.checkForOverflowingLabels(C,S,u,d,h),g.config.xaxis.labels.show){var L=t.drawText({x:S.x,y:l.offY+g.config.xaxis.labels.offsetY+P-(g.config.xaxis.position==="top"?g.globals.xAxisHeight+g.config.xaxis.axisTicks.height-2:0),text:S.text,textAnchor:"middle",fontWeight:S.isBold?600:k,fontSize:m,fontFamily:p,foreColor:Array.isArray(b)?e&&g.config.xaxis.convertedCatToNumeric?b[g.globals.minX+C-1]:b[C]:b,isPlainText:!1,cssClass:(e?"apexcharts-xaxis-label ":"apexcharts-xaxis-group-label ")+v});if(i.add(L),L.on("click",function(R){if(typeof g.config.chart.events.xAxisLabelClick=="function"){var z=Object.assign({},g,{labelIndex:C});g.config.chart.events.xAxisLabelClick(R,l.ctx,z)}}),e){var I=document.createElementNS(g.globals.SVGNS,"title");I.textContent=Array.isArray(S.text)?S.text.join(" "):S.text,L.node.appendChild(I),S.text!==""&&(d.push(S.text),h.push(S))}}C<u-1&&(x+=r(C+1,a))},_=0;_<=u-1;_++)y(_)}},{key:"drawXaxisInversed",value:function(e){var t,i,o=this,n=this.w,r=new N(this.ctx),a=n.config.yaxis[0].opposite?n.globals.translateYAxisX[e]:0,l=r.group({class:"apexcharts-yaxis apexcharts-xaxis-inversed",rel:e}),c=r.group({class:"apexcharts-yaxis-texts-g apexcharts-xaxis-inversed-texts-g",transform:"translate("+a+", 0)"});l.add(c);var d=[];if(n.config.yaxis[e].show)for(var h=0;h<this.xaxisLabels.length;h++)d.push(this.xaxisLabels[h]);t=n.globals.gridHeight/d.length,i=-t/2.2;var g=n.globals.yLabelFormatters[0],m=n.config.yaxis[0].labels;if(m.show)for(var p=function(w){var y=d[w]===void 0?"":d[w];y=g(y,{seriesIndex:e,dataPointIndex:w,w:n});var _=o.axesUtils.getYAxisForeColor(m.style.colors,e),C=0;Array.isArray(y)&&(C=y.length/2*parseInt(m.style.fontSize,10));var A=m.offsetX-15,S="end";o.yaxis.opposite&&(S="start"),n.config.yaxis[0].labels.align==="left"?(A=m.offsetX,S="start"):n.config.yaxis[0].labels.align==="center"?(A=m.offsetX,S="middle"):n.config.yaxis[0].labels.align==="right"&&(S="end");var P=r.drawText({x:A,y:i+t+m.offsetY-C,text:y,textAnchor:S,foreColor:Array.isArray(_)?_[w]:_,fontSize:m.style.fontSize,fontFamily:m.style.fontFamily,fontWeight:m.style.fontWeight,isPlainText:!1,cssClass:"apexcharts-yaxis-label "+m.style.cssClass,maxWidth:m.maxWidth});c.add(P),P.on("click",function(R){if(typeof n.config.chart.events.xAxisLabelClick=="function"){var z=Object.assign({},n,{labelIndex:w});n.config.chart.events.xAxisLabelClick(R,o.ctx,z)}});var L=document.createElementNS(n.globals.SVGNS,"title");if(L.textContent=Array.isArray(y)?y.join(" "):y,P.node.appendChild(L),n.config.yaxis[e].labels.rotate!==0){var I=r.rotateAroundCenter(P.node);P.node.setAttribute("transform","rotate(".concat(n.config.yaxis[e].labels.rotate," 0 ").concat(I.y,")"))}i+=t},b=0;b<=d.length-1;b++)p(b);if(n.config.yaxis[0].title.text!==void 0){var k=r.group({class:"apexcharts-yaxis-title apexcharts-xaxis-title-inversed",transform:"translate("+a+", 0)"}),v=r.drawText({x:n.config.yaxis[0].title.offsetX,y:n.globals.gridHeight/2+n.config.yaxis[0].title.offsetY,text:n.config.yaxis[0].title.text,textAnchor:"middle",foreColor:n.config.yaxis[0].title.style.color,fontSize:n.config.yaxis[0].title.style.fontSize,fontWeight:n.config.yaxis[0].title.style.fontWeight,fontFamily:n.config.yaxis[0].title.style.fontFamily,cssClass:"apexcharts-yaxis-title-text "+n.config.yaxis[0].title.style.cssClass});k.add(v),l.add(k)}var x=0;this.isCategoryBarHorizontal&&n.config.yaxis[0].opposite&&(x=n.globals.gridWidth);var u=n.config.xaxis.axisBorder;if(u.show){var f=r.drawLine(n.globals.padHorizontal+u.offsetX+x,1+u.offsetY,n.globals.padHorizontal+u.offsetX+x,n.globals.gridHeight+u.offsetY,u.color,0);this.elgrid&&this.elgrid.elGridBorders&&n.config.grid.show?this.elgrid.elGridBorders.add(f):l.add(f)}return n.config.yaxis[0].axisTicks.show&&this.axesUtils.drawYAxisTicks(x,d.length,n.config.yaxis[0].axisBorder,n.config.yaxis[0].axisTicks,0,t,l),l}},{key:"drawXaxisTicks",value:function(e,t,i){var o=this.w,n=e;if(!(e<0||e-2>o.globals.gridWidth)){var r=this.offY+o.config.xaxis.axisTicks.offsetY;if(t=t+r+o.config.xaxis.axisTicks.height,o.config.xaxis.position==="top"&&(t=r-o.config.xaxis.axisTicks.height),o.config.xaxis.axisTicks.show){var a=new N(this.ctx).drawLine(e+o.config.xaxis.axisTicks.offsetX,r+o.config.xaxis.offsetY,n+o.config.xaxis.axisTicks.offsetX,t+o.config.xaxis.offsetY,o.config.xaxis.axisTicks.color);i.add(a),a.node.classList.add("apexcharts-xaxis-tick")}}}},{key:"getXAxisTicksPositions",value:function(){var e=this.w,t=[],i=this.xaxisLabels.length,o=e.globals.padHorizontal;if(e.globals.timescaleLabels.length>0)for(var n=0;n<i;n++)o=this.xaxisLabels[n].position,t.push(o);else for(var r=i,a=0;a<r;a++){var l=r;e.globals.isXNumeric&&e.config.chart.type!=="bar"&&(l-=1),o+=e.globals.gridWidth/l,t.push(o)}return t}},{key:"xAxisLabelCorrections",value:function(){var e=this.w,t=new N(this.ctx),i=e.globals.dom.baseEl.querySelector(".apexcharts-xaxis-texts-g"),o=e.globals.dom.baseEl.querySelectorAll(".apexcharts-xaxis-texts-g text:not(.apexcharts-xaxis-group-label)"),n=e.globals.dom.baseEl.querySelectorAll(".apexcharts-yaxis-inversed text"),r=e.globals.dom.baseEl.querySelectorAll(".apexcharts-xaxis-inversed-texts-g text tspan");if(e.globals.rotateXLabels||e.config.xaxis.labels.rotateAlways)for(var a=0;a<o.length;a++){var l=t.rotateAroundCenter(o[a]);l.y=l.y-1,l.x=l.x+1,o[a].setAttribute("transform","rotate(".concat(e.config.xaxis.labels.rotate," ").concat(l.x," ").concat(l.y,")")),o[a].setAttribute("text-anchor","end"),i.setAttribute("transform","translate(0, ".concat(-10,")"));var c=o[a].childNodes;e.config.xaxis.labels.trim&&Array.prototype.forEach.call(c,function(m){t.placeTextWithEllipsis(m,m.textContent,e.globals.xAxisLabelsHeight-(e.config.legend.position==="bottom"?20:10))})}else(function(){for(var m=e.globals.gridWidth/(e.globals.labels.length+1),p=0;p<o.length;p++){var b=o[p].childNodes;e.config.xaxis.labels.trim&&e.config.xaxis.type!=="datetime"&&Array.prototype.forEach.call(b,function(k){t.placeTextWithEllipsis(k,k.textContent,m)})}})();if(n.length>0){var d=n[n.length-1].getBBox(),h=n[0].getBBox();d.x<-20&&n[n.length-1].parentNode.removeChild(n[n.length-1]),h.x+h.width>e.globals.gridWidth&&!e.globals.isBarHorizontal&&n[0].parentNode.removeChild(n[0]);for(var g=0;g<r.length;g++)t.placeTextWithEllipsis(r[g],r[g].textContent,e.config.yaxis[0].labels.maxWidth-(e.config.yaxis[0].title.text?2*parseFloat(e.config.yaxis[0].title.style.fontSize):0)-15)}}}]),s}(),ug=function(){function s(e){H(this,s),this.ctx=e,this.w=e.w;var t=this.w;this.xaxisLabels=t.globals.labels.slice(),this.axesUtils=new Di(e),this.isRangeBar=t.globals.seriesRange.length&&t.globals.isBarHorizontal,t.globals.timescaleLabels.length>0&&(this.xaxisLabels=t.globals.timescaleLabels.slice())}return W(s,[{key:"drawGridArea",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,t=this.w,i=new N(this.ctx);e===null&&(e=i.group({class:"apexcharts-grid"}));var o=i.drawLine(t.globals.padHorizontal,1,t.globals.padHorizontal,t.globals.gridHeight,"transparent"),n=i.drawLine(t.globals.padHorizontal,t.globals.gridHeight,t.globals.gridWidth,t.globals.gridHeight,"transparent");return e.add(n),e.add(o),e}},{key:"drawGrid",value:function(){var e=null;return this.w.globals.axisCharts&&(e=this.renderGrid(),this.drawGridArea(e.el)),e}},{key:"createGridMask",value:function(){var e=this.w,t=e.globals,i=new N(this.ctx),o=Array.isArray(e.config.stroke.width)?0:e.config.stroke.width;if(Array.isArray(e.config.stroke.width)){var n=0;e.config.stroke.width.forEach(function(h){n=Math.max(n,h)}),o=n}t.dom.elGridRectMask=document.createElementNS(t.SVGNS,"clipPath"),t.dom.elGridRectMask.setAttribute("id","gridRectMask".concat(t.cuid)),t.dom.elGridRectMarkerMask=document.createElementNS(t.SVGNS,"clipPath"),t.dom.elGridRectMarkerMask.setAttribute("id","gridRectMarkerMask".concat(t.cuid)),t.dom.elForecastMask=document.createElementNS(t.SVGNS,"clipPath"),t.dom.elForecastMask.setAttribute("id","forecastMask".concat(t.cuid)),t.dom.elNonForecastMask=document.createElementNS(t.SVGNS,"clipPath"),t.dom.elNonForecastMask.setAttribute("id","nonForecastMask".concat(t.cuid));var r=e.config.chart.type,a=0,l=0;(r==="bar"||r==="rangeBar"||r==="candlestick"||r==="boxPlot"||e.globals.comboBarCount>0)&&e.globals.isXNumeric&&!e.globals.isBarHorizontal&&(a=e.config.grid.padding.left,l=e.config.grid.padding.right,t.barPadForNumericAxis>a&&(a=t.barPadForNumericAxis,l=t.barPadForNumericAxis)),t.dom.elGridRect=i.drawRect(-o/2-a-2,-o/2-2,t.gridWidth+o+l+a+4,t.gridHeight+o+4,0,"#fff");var c=e.globals.markers.largestSize+1;t.dom.elGridRectMarker=i.drawRect(2*-c,2*-c,t.gridWidth+4*c,t.gridHeight+4*c,0,"#fff"),t.dom.elGridRectMask.appendChild(t.dom.elGridRect.node),t.dom.elGridRectMarkerMask.appendChild(t.dom.elGridRectMarker.node);var d=t.dom.baseEl.querySelector("defs");d.appendChild(t.dom.elGridRectMask),d.appendChild(t.dom.elForecastMask),d.appendChild(t.dom.elNonForecastMask),d.appendChild(t.dom.elGridRectMarkerMask)}},{key:"_drawGridLines",value:function(e){var t=e.i,i=e.x1,o=e.y1,n=e.x2,r=e.y2,a=e.xCount,l=e.parent,c=this.w;if(!(t===0&&c.globals.skipFirstTimelinelabel||t===a-1&&c.globals.skipLastTimelinelabel&&!c.config.xaxis.labels.formatter||c.config.chart.type==="radar")){c.config.grid.xaxis.lines.show&&this._drawGridLine({i:t,x1:i,y1:o,x2:n,y2:r,xCount:a,parent:l});var d=0;if(c.globals.hasXaxisGroups&&c.config.xaxis.tickPlacement==="between"){var h=c.globals.groups;if(h){for(var g=0,m=0;g<t&&m<h.length;m++)g+=h[m].cols;g===t&&(d=.6*c.globals.xAxisLabelsHeight)}}new es(this.ctx).drawXaxisTicks(i,d,c.globals.dom.elGraphical)}}},{key:"_drawGridLine",value:function(e){var t=e.i,i=e.x1,o=e.y1,n=e.x2,r=e.y2,a=e.xCount,l=e.parent,c=this.w,d=!1,h=l.node.classList.contains("apexcharts-gridlines-horizontal"),g=c.config.grid.strokeDashArray,m=c.globals.barPadForNumericAxis;(o===0&&r===0||i===0&&n===0)&&(d=!0),o===c.globals.gridHeight&&r===c.globals.gridHeight&&(d=!0),!c.globals.isBarHorizontal||t!==0&&t!==a-1||(d=!0);var p=new N(this).drawLine(i-(h?m:0),o,n+(h?m:0),r,c.config.grid.borderColor,g);p.node.classList.add("apexcharts-gridline"),d&&c.config.grid.show?this.elGridBorders.add(p):l.add(p)}},{key:"_drawGridBandRect",value:function(e){var t=e.c,i=e.x1,o=e.y1,n=e.x2,r=e.y2,a=e.type,l=this.w,c=new N(this.ctx),d=l.globals.barPadForNumericAxis;if(a!=="column"||l.config.xaxis.type!=="datetime"){var h=l.config.grid[a].colors[t],g=c.drawRect(i-(a==="row"?d:0),o,n+(a==="row"?2*d:0),r,0,h,l.config.grid[a].opacity);this.elg.add(g),g.attr("clip-path","url(#gridRectMask".concat(l.globals.cuid,")")),g.node.classList.add("apexcharts-grid-".concat(a))}}},{key:"_drawXYLines",value:function(e){var t=this,i=e.xCount,o=e.tickAmount,n=this.w;if(n.config.grid.xaxis.lines.show||n.config.xaxis.axisTicks.show){var r,a=n.globals.padHorizontal,l=n.globals.gridHeight;n.globals.timescaleLabels.length?function(p){for(var b=p.xC,k=p.x1,v=p.y1,x=p.x2,u=p.y2,f=0;f<b;f++)k=t.xaxisLabels[f].position,x=t.xaxisLabels[f].position,t._drawGridLines({i:f,x1:k,y1:v,x2:x,y2:u,xCount:i,parent:t.elgridLinesV})}({xC:i,x1:a,y1:0,x2:r,y2:l}):(n.globals.isXNumeric&&(i=n.globals.xAxisScale.result.length),function(p){for(var b=p.xC,k=p.x1,v=p.y1,x=p.x2,u=p.y2,f=0;f<b+(n.globals.isXNumeric?0:1);f++)f===0&&b===1&&n.globals.dataPoints===1&&(x=k=n.globals.gridWidth/2),t._drawGridLines({i:f,x1:k,y1:v,x2:x,y2:u,xCount:i,parent:t.elgridLinesV}),x=k+=n.globals.gridWidth/(n.globals.isXNumeric?b-1:b)}({xC:i,x1:a,y1:0,x2:r,y2:l}))}if(n.config.grid.yaxis.lines.show){var c=0,d=0,h=n.globals.gridWidth,g=o+1;this.isRangeBar&&(g=n.globals.labels.length);for(var m=0;m<g+(this.isRangeBar?1:0);m++)this._drawGridLine({i:m,xCount:g+(this.isRangeBar?1:0),x1:0,y1:c,x2:h,y2:d,parent:this.elgridLinesH}),d=c+=n.globals.gridHeight/(this.isRangeBar?g:o)}}},{key:"_drawInvertedXYLines",value:function(e){var t=e.xCount,i=this.w;if(i.config.grid.xaxis.lines.show||i.config.xaxis.axisTicks.show)for(var o,n=i.globals.padHorizontal,r=i.globals.gridHeight,a=0;a<t+1;a++)i.config.grid.xaxis.lines.show&&this._drawGridLine({i:a,xCount:t+1,x1:n,y1:0,x2:o,y2:r,parent:this.elgridLinesV}),new es(this.ctx).drawXaxisTicks(n,0,i.globals.dom.elGraphical),o=n+=i.globals.gridWidth/t;if(i.config.grid.yaxis.lines.show)for(var l=0,c=0,d=i.globals.gridWidth,h=0;h<i.globals.dataPoints+1;h++)this._drawGridLine({i:h,xCount:i.globals.dataPoints+1,x1:0,y1:l,x2:d,y2:c,parent:this.elgridLinesH}),c=l+=i.globals.gridHeight/i.globals.dataPoints}},{key:"renderGrid",value:function(){var e=this.w,t=e.globals,i=new N(this.ctx);this.elg=i.group({class:"apexcharts-grid"}),this.elgridLinesH=i.group({class:"apexcharts-gridlines-horizontal"}),this.elgridLinesV=i.group({class:"apexcharts-gridlines-vertical"}),this.elGridBorders=i.group({class:"apexcharts-grid-borders"}),this.elg.add(this.elgridLinesH),this.elg.add(this.elgridLinesV),e.config.grid.show||(this.elgridLinesV.hide(),this.elgridLinesH.hide(),this.elGridBorders.hide());for(var o=0;o<t.seriesYAxisMap.length&&t.ignoreYAxisIndexes.indexOf(o)!==-1;)o++;o===t.seriesYAxisMap.length&&(o=0);var n,r=t.yAxisScale[o].result.length-1;if(!t.isBarHorizontal||this.isRangeBar){var a,l,c;n=this.xaxisLabels.length,this.isRangeBar&&(r=t.labels.length,e.config.xaxis.tickAmount&&e.config.xaxis.labels.formatter&&(n=e.config.xaxis.tickAmount),((a=t.yAxisScale)===null||a===void 0||(l=a[o])===null||l===void 0||(c=l.result)===null||c===void 0?void 0:c.length)>0&&e.config.xaxis.type!=="datetime"&&(n=t.yAxisScale[o].result.length-1)),this._drawXYLines({xCount:n,tickAmount:r})}else n=r,r=t.xTickAmount,this._drawInvertedXYLines({xCount:n,tickAmount:r});return this.drawGridBands(n,r),{el:this.elg,elGridBorders:this.elGridBorders,xAxisTickWidth:t.gridWidth/n}}},{key:"drawGridBands",value:function(e,t){var i=this.w;if(i.config.grid.row.colors!==void 0&&i.config.grid.row.colors.length>0)for(var o=0,n=i.globals.gridHeight/t,r=i.globals.gridWidth,a=0,l=0;a<t;a++,l++)l>=i.config.grid.row.colors.length&&(l=0),this._drawGridBandRect({c:l,x1:0,y1:o,x2:r,y2:n,type:"row"}),o+=i.globals.gridHeight/t;if(i.config.grid.column.colors!==void 0&&i.config.grid.column.colors.length>0)for(var c=i.globals.isBarHorizontal||i.config.xaxis.tickPlacement!=="on"||i.config.xaxis.type!=="category"&&!i.config.xaxis.convertedCatToNumeric?e:e-1,d=i.globals.padHorizontal,h=i.globals.padHorizontal+i.globals.gridWidth/c,g=i.globals.gridHeight,m=0,p=0;m<e;m++,p++)p>=i.config.grid.column.colors.length&&(p=0),this._drawGridBandRect({c:p,x1:d,y1:0,x2:h,y2:g,type:"column"}),d+=i.globals.gridWidth/c}}]),s}(),gg=function(){function s(e){H(this,s),this.ctx=e,this.w=e.w}return W(s,[{key:"niceScale",value:function(e,t){var i,o,n,r,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,l=1e-11,c=this.w,d=c.globals;d.isBarHorizontal?(i=c.config.xaxis,o=Math.max((d.svgWidth-100)/25,2)):(i=c.config.yaxis[a],o=Math.max((d.svgHeight-100)/15,2)),n=i.min!==void 0&&i.min!==null,r=i.max!==void 0&&i.min!==null;var h=i.stepSize!==void 0&&i.stepSize!==null,g=i.tickAmount!==void 0&&i.tickAmount!==null,m=g?i.tickAmount:i.forceNiceScale?d.niceScaleDefaultTicks[Math.min(Math.round(o/2),d.niceScaleDefaultTicks.length-1)]:10;if(d.isMultipleYAxis&&!g&&d.multiAxisTickAmount>0&&(m=d.multiAxisTickAmount,g=!0),m=m==="dataPoints"?d.dataPoints-1:Math.abs(Math.round(m)),(e===Number.MIN_VALUE&&t===0||!T.isNumber(e)&&!T.isNumber(t)||e===Number.MIN_VALUE&&t===-Number.MAX_VALUE)&&(e=T.isNumber(i.min)?i.min:0,t=T.isNumber(i.max)?i.max:e+m,d.allSeriesCollapsed=!1),e>t){console.warn("axis.min cannot be greater than axis.max: swapping min and max");var p=t;t=e,e=p}else e===t&&(e=e===0?0:e-1,t=t===0?2:t+1);var b=[];m<1&&(m=1);var k=m,v=Math.abs(t-e);i.forceNiceScale&&(!n&&e>0&&e/v<.15&&(e=0,n=!0),!r&&t<0&&-t/v<.15&&(t=0,r=!0),v=Math.abs(t-e));var x=v/k,u=x,f=Math.floor(Math.log10(u)),w=Math.pow(10,f),y=Math.ceil(u/w);if(x=u=(y=d.niceScaleAllowedMagMsd[d.yValueDecimal===0?0:1][y])*w,d.isBarHorizontal&&i.stepSize&&i.type!=="datetime"?(x=i.stepSize,h=!0):h&&(x=i.stepSize),h&&i.forceNiceScale){var _=Math.floor(Math.log10(x));x*=Math.pow(10,f-_)}if(n&&r){var C=v/k;if(g)if(h)if(T.mod(v,x)!=0){var A=T.getGCD(x,C);x=C/A<10?A:C}else T.mod(x,C)==0?x=C:(C=x,g=!1);else x=C;else if(h)T.mod(v,x)==0?C=x:x=C;else if(T.mod(v,x)==0)C=x;else{C=v/(k=Math.ceil(v/x));var S=T.getGCD(v,x);v/S<o&&(C=S),x=C}k=Math.round(v/x)}else{if(n||r){if(r)if(g)e=t-x*k;else{var P=e;e=x*Math.floor(e/x),Math.abs(t-e)/T.getGCD(v,x)>o&&(e=t-x*m,e+=x*Math.floor((P-e)/x))}else if(n)if(g)t=e+x*k;else{var L=t;t=x*Math.ceil(t/x),Math.abs(t-e)/T.getGCD(v,x)>o&&(t=e+x*m,t+=x*Math.ceil((L-t)/x))}}else if(g){var I=x/(t-e>t?1:2),R=I*Math.floor(e/I);Math.abs(R-e)<=I/2?t=(e=R)+x*k:e=(t=I*Math.ceil(t/I))-x*k}else e=x*Math.floor(e/x),t=x*Math.ceil(t/x);v=Math.abs(t-e),x=T.getGCD(v,x),k=Math.round(v/x)}if(g||n||r||(k=Math.ceil((v-l)/(x+l)))>16&&T.getPrimeFactors(k).length<2&&k++,!g&&i.forceNiceScale&&d.yValueDecimal===0&&k>v&&(k=v,x=Math.round(v/k)),k>o&&(!g&&!h||i.forceNiceScale)){var z=T.getPrimeFactors(k),U=z.length-1,X=k;e:for(var q=0;q<U;q++)for(var te=0;te<=U-q;te++){for(var J=Math.min(te+q,U),le=X,Ee=1,Me=te;Me<=J;Me++)Ee*=z[Me];if((le/=Ee)<o){X=le;break e}}x=X===k?v:v/X,k=Math.round(v/x)}d.isMultipleYAxis&&d.multiAxisTickAmount==0&&d.ignoreYAxisIndexes.indexOf(a)<0&&(d.multiAxisTickAmount=k);var _e=e-x,At=x*l;do _e+=x,b.push(T.stripNumber(_e,7));while(t-_e>At);return{result:b,niceMin:b[0],niceMax:b[b.length-1]}}},{key:"linearScale",value:function(e,t){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:10,o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,n=arguments.length>4&&arguments[4]!==void 0?arguments[4]:void 0,r=Math.abs(t-e),a=[];if(e===t)return{result:a=[e],niceMin:a[0],niceMax:a[a.length-1]};(i=this._adjustTicksForSmallRange(i,o,r))==="dataPoints"&&(i=this.w.globals.dataPoints-1),n||(n=r/i),n=Math.round(10*(n+Number.EPSILON))/10,i===Number.MAX_VALUE&&(i=5,n=1);for(var l=e;i>=0;)a.push(l),l=T.preciseAddition(l,n),i-=1;return{result:a,niceMin:a[0],niceMax:a[a.length-1]}}},{key:"logarithmicScaleNice",value:function(e,t,i){t<=0&&(t=Math.max(e,i)),e<=0&&(e=Math.min(t,i));for(var o=[],n=Math.ceil(Math.log(t)/Math.log(i)+1),r=Math.floor(Math.log(e)/Math.log(i));r<n;r++)o.push(Math.pow(i,r));return{result:o,niceMin:o[0],niceMax:o[o.length-1]}}},{key:"logarithmicScale",value:function(e,t,i){t<=0&&(t=Math.max(e,i)),e<=0&&(e=Math.min(t,i));for(var o=[],n=Math.log(t)/Math.log(i),r=Math.log(e)/Math.log(i),a=n-r,l=Math.round(a),c=a/l,d=0,h=r;d<l;d++,h+=c)o.push(Math.pow(i,h));return o.push(Math.pow(i,n)),{result:o,niceMin:e,niceMax:t}}},{key:"_adjustTicksForSmallRange",value:function(e,t,i){var o=e;if(t!==void 0&&this.w.config.yaxis[t].labels.formatter&&this.w.config.yaxis[t].tickAmount===void 0){var n=Number(this.w.config.yaxis[t].labels.formatter(1));T.isNumber(n)&&this.w.globals.yValueDecimal===0&&(o=Math.ceil(i))}return o<e?o:e}},{key:"setYScaleForIndex",value:function(e,t,i){var o=this.w.globals,n=this.w.config,r=o.isBarHorizontal?n.xaxis:n.yaxis[e];o.yAxisScale[e]===void 0&&(o.yAxisScale[e]=[]);var a=Math.abs(i-t);r.logarithmic&&a<=5&&(o.invalidLogScale=!0),r.logarithmic&&a>5?(o.allSeriesCollapsed=!1,o.yAxisScale[e]=r.forceNiceScale?this.logarithmicScaleNice(t,i,r.logBase):this.logarithmicScale(t,i,r.logBase)):i!==-Number.MAX_VALUE&&T.isNumber(i)&&t!==Number.MAX_VALUE&&T.isNumber(t)?(o.allSeriesCollapsed=!1,o.yAxisScale[e]=this.niceScale(t,i,e)):o.yAxisScale[e]=this.niceScale(Number.MIN_VALUE,0,e)}},{key:"setXScale",value:function(e,t){var i=this.w,o=i.globals,n=Math.abs(t-e);if(t!==-Number.MAX_VALUE&&T.isNumber(t)){var r=o.xTickAmount+1;n<10&&n>1&&(r=n),o.xAxisScale=this.linearScale(e,t,r,0,i.config.xaxis.stepSize)}else o.xAxisScale=this.linearScale(0,10,10);return o.xAxisScale}},{key:"setSeriesYAxisMappings",value:function(){var e=this.w.globals,t=this.w.config,i=[],o=[],n=[],r=e.series.length>t.yaxis.length||t.yaxis.some(function(h){return Array.isArray(h.seriesName)});t.series.forEach(function(h,g){n.push(g),o.push(null)}),t.yaxis.forEach(function(h,g){i[g]=[]});var a=[];t.yaxis.forEach(function(h,g){var m=!1;if(h.seriesName){var p=[];Array.isArray(h.seriesName)?p=h.seriesName:p.push(h.seriesName),p.forEach(function(b){t.series.forEach(function(k,v){if(k.name===b){var x=v;g===v||r?!r||n.indexOf(v)>-1?i[g].push([g,v]):console.warn("Series '"+k.name+"' referenced more than once in what looks like the new style. That is, when using either seriesName: [], or when there are more series than yaxes."):(i[v].push([v,g]),x=g),m=!0,(x=n.indexOf(x))!==-1&&n.splice(x,1)}})})}m||a.push(g)}),i=i.map(function(h,g){var m=[];return h.forEach(function(p){o[p[1]]=p[0],m.push(p[1])}),m});for(var l=t.yaxis.length-1,c=0;c<a.length&&(l=a[c],i[l]=[],n);c++){var d=n[0];n.shift(),i[l].push(d),o[d]=l}n.forEach(function(h){i[l].push(h),o[h]=l}),e.seriesYAxisMap=i.map(function(h){return h}),e.seriesYAxisReverseMap=o.map(function(h){return h})}},{key:"scaleMultipleYAxes",value:function(){var e=this,t=this.w.config,i=this.w.globals;this.setSeriesYAxisMappings();var o=i.seriesYAxisMap,n=i.minYArr,r=i.maxYArr;i.allSeriesCollapsed=!0,i.barGroups=[],o.forEach(function(a,l){var c=[];a.forEach(function(d){var h=t.series[d].group;c.indexOf(h)<0&&c.push(h)}),a.length>0?function(){var d,h,g=Number.MAX_VALUE,m=-Number.MAX_VALUE,p=g,b=m;if(t.chart.stacked)(function(){var x=i.seriesX[a[0]],u=[],f=[],w=[];c.forEach(function(){u.push(x.map(function(){return Number.MIN_VALUE})),f.push(x.map(function(){return Number.MIN_VALUE})),w.push(x.map(function(){return Number.MIN_VALUE}))});for(var y=function(C){!d&&t.series[a[C]].type&&(d=t.series[a[C]].type);var A=a[C];h=t.series[A].group?t.series[A].group:"axis-".concat(l),!(i.collapsedSeriesIndices.indexOf(A)<0&&i.ancillaryCollapsedSeriesIndices.indexOf(A)<0)||(i.allSeriesCollapsed=!1,c.forEach(function(S,P){if(t.series[A].group===S)for(var L=0;L<i.series[A].length;L++){var I=i.series[A][L];I>=0?f[P][L]+=I:w[P][L]+=I,u[P][L]+=I,p=Math.min(p,I),b=Math.max(b,I)}})),d!=="bar"&&d!=="column"||i.barGroups.push(h)},_=0;_<a.length;_++)y(_);d||(d=t.chart.type),d==="bar"||d==="column"?c.forEach(function(C,A){g=Math.min(g,Math.min.apply(null,w[A])),m=Math.max(m,Math.max.apply(null,f[A]))}):(c.forEach(function(C,A){p=Math.min(p,Math.min.apply(null,u[A])),b=Math.max(b,Math.max.apply(null,u[A]))}),g=p,m=b),g===Number.MIN_VALUE&&m===Number.MIN_VALUE&&(m=-Number.MAX_VALUE)})();else for(var k=0;k<a.length;k++){var v=a[k];g=Math.min(g,n[v]),m=Math.max(m,r[v]),!(i.collapsedSeriesIndices.indexOf(v)<0&&i.ancillaryCollapsedSeriesIndices.indexOf(v)<0)||(i.allSeriesCollapsed=!1)}t.yaxis[l].min!==void 0&&(g=typeof t.yaxis[l].min=="function"?t.yaxis[l].min(g):t.yaxis[l].min),t.yaxis[l].max!==void 0&&(m=typeof t.yaxis[l].max=="function"?t.yaxis[l].max(m):t.yaxis[l].max),i.barGroups=i.barGroups.filter(function(x,u,f){return f.indexOf(x)===u}),e.setYScaleForIndex(l,g,m),a.forEach(function(x){n[x]=i.yAxisScale[l].niceMin,r[x]=i.yAxisScale[l].niceMax})}():e.setYScaleForIndex(l,0,-Number.MAX_VALUE)})}}]),s}(),fl=function(){function s(e){H(this,s),this.ctx=e,this.w=e.w,this.scales=new gg(e)}return W(s,[{key:"init",value:function(){this.setYRange(),this.setXRange(),this.setZRange()}},{key:"getMinYMaxY",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:-Number.MAX_VALUE,o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,n=this.w.config,r=this.w.globals,a=-Number.MAX_VALUE,l=Number.MIN_VALUE;o===null&&(o=e+1);var c=r.series,d=c,h=c;n.chart.type==="candlestick"?(d=r.seriesCandleL,h=r.seriesCandleH):n.chart.type==="boxPlot"?(d=r.seriesCandleO,h=r.seriesCandleC):r.isRangeData&&(d=r.seriesRangeStart,h=r.seriesRangeEnd);var g=!1;if(r.seriesX.length>=o){var m,p=(m=r.brushSource)===null||m===void 0?void 0:m.w.config.chart.brush;(n.chart.zoom.enabled&&n.chart.zoom.autoScaleYaxis||p!=null&&p.enabled&&p!=null&&p.autoScaleYaxis)&&(g=!0)}for(var b=e;b<o;b++){r.dataPoints=Math.max(r.dataPoints,c[b].length);var k=n.series[b].type;r.categoryLabels.length&&(r.dataPoints=r.categoryLabels.filter(function(w){return w!==void 0}).length),r.labels.length&&n.xaxis.type!=="datetime"&&r.series.reduce(function(w,y){return w+y.length},0)!==0&&(r.dataPoints=Math.max(r.dataPoints,r.labels.length));var v=0,x=c[b].length-1;if(g){if(n.xaxis.min)for(;v<x&&r.seriesX[b][v]<n.xaxis.min;v++);if(n.xaxis.max)for(;x>v&&r.seriesX[b][x]>n.xaxis.max;x--);}for(var u=v;u<=x&&u<r.series[b].length;u++){var f=c[b][u];if(f!==null&&T.isNumber(f)){switch(h[b][u]!==void 0&&(a=Math.max(a,h[b][u]),t=Math.min(t,h[b][u])),d[b][u]!==void 0&&(t=Math.min(t,d[b][u]),i=Math.max(i,d[b][u])),k){case"candlestick":r.seriesCandleC[b][u]!==void 0&&(a=Math.max(a,r.seriesCandleH[b][u]),t=Math.min(t,r.seriesCandleL[b][u]));break;case"boxPlot":r.seriesCandleC[b][u]!==void 0&&(a=Math.max(a,r.seriesCandleC[b][u]),t=Math.min(t,r.seriesCandleO[b][u]))}k&&k!=="candlestick"&&k!=="boxPlot"&&k!=="rangeArea"&&k!=="rangeBar"&&(a=Math.max(a,r.series[b][u]),t=Math.min(t,r.series[b][u])),i=a,r.seriesGoals[b]&&r.seriesGoals[b][u]&&Array.isArray(r.seriesGoals[b][u])&&r.seriesGoals[b][u].forEach(function(w){l!==Number.MIN_VALUE&&(l=Math.min(l,w.value),t=l),a=Math.max(a,w.value),i=a}),T.isFloat(f)&&(f=T.noExponents(f),r.yValueDecimal=Math.max(r.yValueDecimal,f.toString().split(".")[1].length)),l>d[b][u]&&d[b][u]<0&&(l=d[b][u])}else r.hasNullValues=!0}k!=="bar"&&k!=="column"||(l<0&&a<0&&(a=0,i=Math.max(i,0)),l===Number.MIN_VALUE&&(l=0,t=Math.min(t,0)))}return n.chart.type==="rangeBar"&&r.seriesRangeStart.length&&r.isBarHorizontal&&(l=t),n.chart.type==="bar"&&(l<0&&a<0&&(a=0),l===Number.MIN_VALUE&&(l=0)),{minY:l,maxY:a,lowestY:t,highestY:i}}},{key:"setYRange",value:function(){var e=this.w.globals,t=this.w.config;e.maxY=-Number.MAX_VALUE,e.minY=Number.MIN_VALUE;var i,o=Number.MAX_VALUE;if(e.isMultipleYAxis){o=Number.MAX_VALUE;for(var n=0;n<e.series.length;n++)i=this.getMinYMaxY(n),e.minYArr[n]=i.lowestY,e.maxYArr[n]=i.highestY,o=Math.min(o,i.lowestY)}return i=this.getMinYMaxY(0,o,null,e.series.length),t.chart.type==="bar"?(e.minY=i.minY,e.maxY=i.maxY):(e.minY=i.lowestY,e.maxY=i.highestY),o=i.lowestY,t.chart.stacked&&this._setStackedMinMax(),t.chart.type==="line"||t.chart.type==="area"||t.chart.type==="scatter"||t.chart.type==="candlestick"||t.chart.type==="boxPlot"||t.chart.type==="rangeBar"&&!e.isBarHorizontal?e.minY===Number.MIN_VALUE&&o!==-Number.MAX_VALUE&&o!==e.maxY&&(e.minY=o):e.minY=i.minY,t.yaxis.forEach(function(r,a){r.max!==void 0&&(typeof r.max=="number"?e.maxYArr[a]=r.max:typeof r.max=="function"&&(e.maxYArr[a]=r.max(e.isMultipleYAxis?e.maxYArr[a]:e.maxY)),e.maxY=e.maxYArr[a]),r.min!==void 0&&(typeof r.min=="number"?e.minYArr[a]=r.min:typeof r.min=="function"&&(e.minYArr[a]=r.min(e.isMultipleYAxis?e.minYArr[a]===Number.MIN_VALUE?0:e.minYArr[a]:e.minY)),e.minY=e.minYArr[a])}),e.isBarHorizontal&&["min","max"].forEach(function(r){t.xaxis[r]!==void 0&&typeof t.xaxis[r]=="number"&&(r==="min"?e.minY=t.xaxis[r]:e.maxY=t.xaxis[r])}),e.isMultipleYAxis?(this.scales.scaleMultipleYAxes(),e.minY=o):(this.scales.setYScaleForIndex(0,e.minY,e.maxY),e.minY=e.yAxisScale[0].niceMin,e.maxY=e.yAxisScale[0].niceMax,e.minYArr[0]=e.minY,e.maxYArr[0]=e.maxY),e.barGroups=[],e.lineGroups=[],e.areaGroups=[],t.series.forEach(function(r){switch(r.type||t.chart.type){case"bar":case"column":e.barGroups.push(r.group);break;case"line":e.lineGroups.push(r.group);break;case"area":e.areaGroups.push(r.group)}}),e.barGroups=e.barGroups.filter(function(r,a,l){return l.indexOf(r)===a}),e.lineGroups=e.lineGroups.filter(function(r,a,l){return l.indexOf(r)===a}),e.areaGroups=e.areaGroups.filter(function(r,a,l){return l.indexOf(r)===a}),{minY:e.minY,maxY:e.maxY,minYArr:e.minYArr,maxYArr:e.maxYArr,yAxisScale:e.yAxisScale}}},{key:"setXRange",value:function(){var e=this.w.globals,t=this.w.config,i=t.xaxis.type==="numeric"||t.xaxis.type==="datetime"||t.xaxis.type==="category"&&!e.noLabelsProvided||e.noLabelsProvided||e.isXNumeric;if(e.isXNumeric&&function(){for(var a=0;a<e.series.length;a++)if(e.labels[a])for(var l=0;l<e.labels[a].length;l++)e.labels[a][l]!==null&&T.isNumber(e.labels[a][l])&&(e.maxX=Math.max(e.maxX,e.labels[a][l]),e.initialMaxX=Math.max(e.maxX,e.labels[a][l]),e.minX=Math.min(e.minX,e.labels[a][l]),e.initialMinX=Math.min(e.minX,e.labels[a][l]))}(),e.noLabelsProvided&&t.xaxis.categories.length===0&&(e.maxX=e.labels[e.labels.length-1],e.initialMaxX=e.labels[e.labels.length-1],e.minX=1,e.initialMinX=1),e.isXNumeric||e.noLabelsProvided||e.dataFormatXNumeric){var o;if(t.xaxis.tickAmount===void 0?(o=Math.round(e.svgWidth/150),t.xaxis.type==="numeric"&&e.dataPoints<30&&(o=e.dataPoints-1),o>e.dataPoints&&e.dataPoints!==0&&(o=e.dataPoints-1)):t.xaxis.tickAmount==="dataPoints"?(e.series.length>1&&(o=e.series[e.maxValsInArrayIndex].length-1),e.isXNumeric&&(o=e.maxX-e.minX-1)):o=t.xaxis.tickAmount,e.xTickAmount=o,t.xaxis.max!==void 0&&typeof t.xaxis.max=="number"&&(e.maxX=t.xaxis.max),t.xaxis.min!==void 0&&typeof t.xaxis.min=="number"&&(e.minX=t.xaxis.min),t.xaxis.range!==void 0&&(e.minX=e.maxX-t.xaxis.range),e.minX!==Number.MAX_VALUE&&e.maxX!==-Number.MAX_VALUE)if(t.xaxis.convertedCatToNumeric&&!e.dataFormatXNumeric){for(var n=[],r=e.minX-1;r<e.maxX;r++)n.push(r+1);e.xAxisScale={result:n,niceMin:n[0],niceMax:n[n.length-1]}}else e.xAxisScale=this.scales.setXScale(e.minX,e.maxX);else e.xAxisScale=this.scales.linearScale(0,o,o,0,t.xaxis.stepSize),e.noLabelsProvided&&e.labels.length>0&&(e.xAxisScale=this.scales.linearScale(1,e.labels.length,o-1,0,t.xaxis.stepSize),e.seriesX=e.labels.slice());i&&(e.labels=e.xAxisScale.result.slice())}return e.isBarHorizontal&&e.labels.length&&(e.xTickAmount=e.labels.length),this._handleSingleDataPoint(),this._getMinXDiff(),{minX:e.minX,maxX:e.maxX}}},{key:"setZRange",value:function(){var e=this.w.globals;if(e.isDataXYZ){for(var t=0;t<e.series.length;t++)if(e.seriesZ[t]!==void 0)for(var i=0;i<e.seriesZ[t].length;i++)e.seriesZ[t][i]!==null&&T.isNumber(e.seriesZ[t][i])&&(e.maxZ=Math.max(e.maxZ,e.seriesZ[t][i]),e.minZ=Math.min(e.minZ,e.seriesZ[t][i]))}}},{key:"_handleSingleDataPoint",value:function(){var e=this.w.globals,t=this.w.config;if(e.minX===e.maxX){var i=new Qe(this.ctx);if(t.xaxis.type==="datetime"){var o=i.getDate(e.minX);t.xaxis.labels.datetimeUTC?o.setUTCDate(o.getUTCDate()-2):o.setDate(o.getDate()-2),e.minX=new Date(o).getTime();var n=i.getDate(e.maxX);t.xaxis.labels.datetimeUTC?n.setUTCDate(n.getUTCDate()+2):n.setDate(n.getDate()+2),e.maxX=new Date(n).getTime()}else(t.xaxis.type==="numeric"||t.xaxis.type==="category"&&!e.noLabelsProvided)&&(e.minX=e.minX-2,e.initialMinX=e.minX,e.maxX=e.maxX+2,e.initialMaxX=e.maxX)}}},{key:"_getMinXDiff",value:function(){var e=this.w.globals;e.isXNumeric&&e.seriesX.forEach(function(t,i){t.length===1&&t.push(e.seriesX[e.maxValsInArrayIndex][e.seriesX[e.maxValsInArrayIndex].length-1]);var o=t.slice();o.sort(function(n,r){return n-r}),o.forEach(function(n,r){if(r>0){var a=n-o[r-1];a>0&&(e.minXDiff=Math.min(a,e.minXDiff))}}),e.dataPoints!==1&&e.minXDiff!==Number.MAX_VALUE||(e.minXDiff=.5)})}},{key:"_setStackedMinMax",value:function(){var e=this,t=this.w.globals;if(t.series.length){var i=t.seriesGroups;i.length||(i=[this.w.globals.seriesNames.map(function(r){return r})]);var o={},n={};i.forEach(function(r){o[r]=[],n[r]=[],e.w.config.series.map(function(a,l){return r.indexOf(t.seriesNames[l])>-1?l:null}).filter(function(a){return a!==null}).forEach(function(a){for(var l=0;l<t.series[t.maxValsInArrayIndex].length;l++){var c,d,h,g;o[r][l]===void 0&&(o[r][l]=0,n[r][l]=0),(e.w.config.chart.stacked&&!t.comboCharts||e.w.config.chart.stacked&&t.comboCharts&&(!e.w.config.chart.stackOnlyBar||((c=e.w.config.series)===null||c===void 0||(d=c[a])===null||d===void 0?void 0:d.type)==="bar"||((h=e.w.config.series)===null||h===void 0||(g=h[a])===null||g===void 0?void 0:g.type)==="column"))&&t.series[a][l]!==null&&T.isNumber(t.series[a][l])&&(t.series[a][l]>0?o[r][l]+=parseFloat(t.series[a][l])+1e-4:n[r][l]+=parseFloat(t.series[a][l]))}})}),Object.entries(o).forEach(function(r){var a=rg(r,1)[0];o[a].forEach(function(l,c){t.maxY=Math.max(t.maxY,o[a][c]),t.minY=Math.min(t.minY,n[a][c])})})}}}]),s}(),wl=function(){function s(e,t){H(this,s),this.ctx=e,this.elgrid=t,this.w=e.w;var i=this.w;this.xaxisFontSize=i.config.xaxis.labels.style.fontSize,this.axisFontFamily=i.config.xaxis.labels.style.fontFamily,this.xaxisForeColors=i.config.xaxis.labels.style.colors,this.isCategoryBarHorizontal=i.config.chart.type==="bar"&&i.config.plotOptions.bar.horizontal,this.xAxisoffX=0,i.config.xaxis.position==="bottom"&&(this.xAxisoffX=i.globals.gridHeight),this.drawnLabels=[],this.axesUtils=new Di(e)}return W(s,[{key:"drawYaxis",value:function(e){var t=this,i=this.w,o=new N(this.ctx),n=i.config.yaxis[e].labels.style,r=n.fontSize,a=n.fontFamily,l=n.fontWeight,c=o.group({class:"apexcharts-yaxis",rel:e,transform:"translate("+i.globals.translateYAxisX[e]+", 0)"});if(this.axesUtils.isYAxisHidden(e))return c;var d=o.group({class:"apexcharts-yaxis-texts-g"});c.add(d);var h=i.globals.yAxisScale[e].result.length-1,g=i.globals.gridHeight/h,m=i.globals.yLabelFormatters[e],p=i.globals.yAxisScale[e].result.slice();p=this.axesUtils.checkForReversedLabels(e,p);var b="";if(i.config.yaxis[e].labels.show){var k=i.globals.translateY+i.config.yaxis[e].labels.offsetY;i.globals.isBarHorizontal?k=0:i.config.chart.type==="heatmap"&&(k-=g/2),k+=parseInt(i.config.yaxis[e].labels.style.fontSize,10)/3;for(var v=function(A){var S=p[A];S=m(S,A,i);var P=i.config.yaxis[e].labels.padding;i.config.yaxis[e].opposite&&i.config.yaxis.length!==0&&(P*=-1);var L="end";i.config.yaxis[e].opposite&&(L="start"),i.config.yaxis[e].labels.align==="left"?L="start":i.config.yaxis[e].labels.align==="center"?L="middle":i.config.yaxis[e].labels.align==="right"&&(L="end");var I=t.axesUtils.getYAxisForeColor(n.colors,e),R=T.listToArray(i.globals.dom.baseEl.querySelectorAll(".apexcharts-yaxis[rel='".concat(e,"'] .apexcharts-yaxis-label tspan"))).map(function(te){return te.textContent}),z=o.drawText({x:P,y:k,text:R.indexOf(S)>=0?"":S,textAnchor:L,fontSize:r,fontFamily:a,fontWeight:l,maxWidth:i.config.yaxis[e].labels.maxWidth,foreColor:Array.isArray(I)?I[A]:I,isPlainText:!1,cssClass:"apexcharts-yaxis-label "+n.cssClass});A===h&&(b=z),d.add(z);var U=document.createElementNS(i.globals.SVGNS,"title");if(U.textContent=Array.isArray(S)?S.join(" "):S,z.node.appendChild(U),i.config.yaxis[e].labels.rotate!==0){var X=o.rotateAroundCenter(b.node),q=o.rotateAroundCenter(z.node);z.node.setAttribute("transform","rotate(".concat(i.config.yaxis[e].labels.rotate," ").concat(X.x," ").concat(q.y,")"))}k+=g},x=h;x>=0;x--)v(x)}if(i.config.yaxis[e].title.text!==void 0){var u=o.group({class:"apexcharts-yaxis-title"}),f=0;i.config.yaxis[e].opposite&&(f=i.globals.translateYAxisX[e]);var w=o.drawText({x:f,y:i.globals.gridHeight/2+i.globals.translateY+i.config.yaxis[e].title.offsetY,text:i.config.yaxis[e].title.text,textAnchor:"end",foreColor:i.config.yaxis[e].title.style.color,fontSize:i.config.yaxis[e].title.style.fontSize,fontWeight:i.config.yaxis[e].title.style.fontWeight,fontFamily:i.config.yaxis[e].title.style.fontFamily,cssClass:"apexcharts-yaxis-title-text "+i.config.yaxis[e].title.style.cssClass});u.add(w),c.add(u)}var y=i.config.yaxis[e].axisBorder,_=31+y.offsetX;if(i.config.yaxis[e].opposite&&(_=-31-y.offsetX),y.show){var C=o.drawLine(_,i.globals.translateY+y.offsetY-2,_,i.globals.gridHeight+i.globals.translateY+y.offsetY+2,y.color,0,y.width);c.add(C)}return i.config.yaxis[e].axisTicks.show&&this.axesUtils.drawYAxisTicks(_,h,y,i.config.yaxis[e].axisTicks,e,g,c),c}},{key:"drawYaxisInversed",value:function(e){var t=this.w,i=new N(this.ctx),o=i.group({class:"apexcharts-xaxis apexcharts-yaxis-inversed"}),n=i.group({class:"apexcharts-xaxis-texts-g",transform:"translate(".concat(t.globals.translateXAxisX,", ").concat(t.globals.translateXAxisY,")")});o.add(n);var r=t.globals.yAxisScale[e].result.length-1,a=t.globals.gridWidth/r+.1,l=a+t.config.xaxis.labels.offsetX,c=t.globals.xLabelFormatter,d=t.globals.yAxisScale[e].result.slice(),h=t.globals.timescaleLabels;h.length>0&&(this.xaxisLabels=h.slice(),r=(d=h.slice()).length),d=this.axesUtils.checkForReversedLabels(e,d);var g=h.length;if(t.config.xaxis.labels.show)for(var m=g?0:r;g?m<g:m>=0;g?m++:m--){var p=d[m];p=c(p,m,t);var b=t.globals.gridWidth+t.globals.padHorizontal-(l-a+t.config.xaxis.labels.offsetX);if(h.length){var k=this.axesUtils.getLabel(d,h,b,m,this.drawnLabels,this.xaxisFontSize);b=k.x,p=k.text,this.drawnLabels.push(k.text),m===0&&t.globals.skipFirstTimelinelabel&&(p=""),m===d.length-1&&t.globals.skipLastTimelinelabel&&(p="")}var v=i.drawText({x:b,y:this.xAxisoffX+t.config.xaxis.labels.offsetY+30-(t.config.xaxis.position==="top"?t.globals.xAxisHeight+t.config.xaxis.axisTicks.height-2:0),text:p,textAnchor:"middle",foreColor:Array.isArray(this.xaxisForeColors)?this.xaxisForeColors[e]:this.xaxisForeColors,fontSize:this.xaxisFontSize,fontFamily:this.xaxisFontFamily,fontWeight:t.config.xaxis.labels.style.fontWeight,isPlainText:!1,cssClass:"apexcharts-xaxis-label "+t.config.xaxis.labels.style.cssClass});n.add(v),v.tspan(p);var x=document.createElementNS(t.globals.SVGNS,"title");x.textContent=p,v.node.appendChild(x),l+=a}return this.inversedYAxisTitleText(o),this.inversedYAxisBorder(o),o}},{key:"inversedYAxisBorder",value:function(e){var t=this.w,i=new N(this.ctx),o=t.config.xaxis.axisBorder;if(o.show){var n=0;t.config.chart.type==="bar"&&t.globals.isXNumeric&&(n-=15);var r=i.drawLine(t.globals.padHorizontal+n+o.offsetX,this.xAxisoffX,t.globals.gridWidth,this.xAxisoffX,o.color,0,o.height);this.elgrid&&this.elgrid.elGridBorders&&t.config.grid.show?this.elgrid.elGridBorders.add(r):e.add(r)}}},{key:"inversedYAxisTitleText",value:function(e){var t=this.w,i=new N(this.ctx);if(t.config.xaxis.title.text!==void 0){var o=i.group({class:"apexcharts-xaxis-title apexcharts-yaxis-title-inversed"}),n=i.drawText({x:t.globals.gridWidth/2+t.config.xaxis.title.offsetX,y:this.xAxisoffX+parseFloat(this.xaxisFontSize)+parseFloat(t.config.xaxis.title.style.fontSize)+t.config.xaxis.title.offsetY+20,text:t.config.xaxis.title.text,textAnchor:"middle",fontSize:t.config.xaxis.title.style.fontSize,fontFamily:t.config.xaxis.title.style.fontFamily,fontWeight:t.config.xaxis.title.style.fontWeight,foreColor:t.config.xaxis.title.style.color,cssClass:"apexcharts-xaxis-title-text "+t.config.xaxis.title.style.cssClass});o.add(n),e.add(o)}}},{key:"yAxisTitleRotate",value:function(e,t){var i=this.w,o=new N(this.ctx),n={width:0,height:0},r={width:0,height:0},a=i.globals.dom.baseEl.querySelector(" .apexcharts-yaxis[rel='".concat(e,"'] .apexcharts-yaxis-texts-g"));a!==null&&(n=a.getBoundingClientRect());var l=i.globals.dom.baseEl.querySelector(".apexcharts-yaxis[rel='".concat(e,"'] .apexcharts-yaxis-title text"));if(l!==null&&(r=l.getBoundingClientRect()),l!==null){var c=this.xPaddingForYAxisTitle(e,n,r,t);l.setAttribute("x",c.xPos-(t?10:0))}if(l!==null){var d=o.rotateAroundCenter(l);l.setAttribute("transform","rotate(".concat(t?-1*i.config.yaxis[e].title.rotate:i.config.yaxis[e].title.rotate," ").concat(d.x," ").concat(d.y,")"))}}},{key:"xPaddingForYAxisTitle",value:function(e,t,i,o){var n=this.w,r=0,a=0,l=10;return n.config.yaxis[e].title.text===void 0||e<0?{xPos:a,padd:0}:(o?(a=t.width+n.config.yaxis[e].title.offsetX+i.width/2+l/2,(r+=1)===0&&(a-=l/2)):(a=-1*t.width+n.config.yaxis[e].title.offsetX+l/2+i.width/2,n.globals.isBarHorizontal&&(l=25,a=-1*t.width-n.config.yaxis[e].title.offsetX-l)),{xPos:a,padd:l})}},{key:"setYAxisXPosition",value:function(e,t){var i=this.w,o=0,n=0,r=18,a=1;i.config.yaxis.length>1&&(this.multipleYs=!0),i.config.yaxis.map(function(l,c){var d=i.globals.ignoreYAxisIndexes.indexOf(c)>-1||!l.show||l.floating||e[c].width===0,h=e[c].width+t[c].width;l.opposite?i.globals.isBarHorizontal?(n=i.globals.gridWidth+i.globals.translateX-1,i.globals.translateYAxisX[c]=n-l.labels.offsetX):(n=i.globals.gridWidth+i.globals.translateX+a,d||(a=a+h+20),i.globals.translateYAxisX[c]=n-l.labels.offsetX+20):(o=i.globals.translateX-r,d||(r=r+h+20),i.globals.translateYAxisX[c]=o+l.labels.offsetX)})}},{key:"setYAxisTextAlignments",value:function(){var e=this.w,t=e.globals.dom.baseEl.getElementsByClassName("apexcharts-yaxis");(t=T.listToArray(t)).forEach(function(i,o){var n=e.config.yaxis[o];if(n&&!n.floating&&n.labels.align!==void 0){var r=e.globals.dom.baseEl.querySelector(".apexcharts-yaxis[rel='".concat(o,"'] .apexcharts-yaxis-texts-g")),a=e.globals.dom.baseEl.querySelectorAll(".apexcharts-yaxis[rel='".concat(o,"'] .apexcharts-yaxis-label"));a=T.listToArray(a);var l=r.getBoundingClientRect();n.labels.align==="left"?(a.forEach(function(c,d){c.setAttribute("text-anchor","start")}),n.opposite||r.setAttribute("transform","translate(-".concat(l.width,", 0)"))):n.labels.align==="center"?(a.forEach(function(c,d){c.setAttribute("text-anchor","middle")}),r.setAttribute("transform","translate(".concat(l.width/2*(n.opposite?1:-1),", 0)"))):n.labels.align==="right"&&(a.forEach(function(c,d){c.setAttribute("text-anchor","end")}),n.opposite&&r.setAttribute("transform","translate(".concat(l.width,", 0)")))}})}}]),s}(),Iw=function(){function s(e){H(this,s),this.ctx=e,this.w=e.w,this.documentEvent=T.bind(this.documentEvent,this)}return W(s,[{key:"addEventListener",value:function(e,t){var i=this.w;i.globals.events.hasOwnProperty(e)?i.globals.events[e].push(t):i.globals.events[e]=[t]}},{key:"removeEventListener",value:function(e,t){var i=this.w;if(i.globals.events.hasOwnProperty(e)){var o=i.globals.events[e].indexOf(t);o!==-1&&i.globals.events[e].splice(o,1)}}},{key:"fireEvent",value:function(e,t){var i=this.w;if(i.globals.events.hasOwnProperty(e)){t&&t.length||(t=[]);for(var o=i.globals.events[e],n=o.length,r=0;r<n;r++)o[r].apply(null,t)}}},{key:"setupEventHandlers",value:function(){var e=this,t=this.w,i=this.ctx,o=t.globals.dom.baseEl.querySelector(t.globals.chartClass);this.ctx.eventList.forEach(function(n){o.addEventListener(n,function(r){var a=Object.assign({},t,{seriesIndex:t.globals.axisCharts?t.globals.capturedSeriesIndex:0,dataPointIndex:t.globals.capturedDataPointIndex});r.type==="mousemove"||r.type==="touchmove"?typeof t.config.chart.events.mouseMove=="function"&&t.config.chart.events.mouseMove(r,i,a):r.type==="mouseleave"||r.type==="touchleave"?typeof t.config.chart.events.mouseLeave=="function"&&t.config.chart.events.mouseLeave(r,i,a):(r.type==="mouseup"&&r.which===1||r.type==="touchend")&&(typeof t.config.chart.events.click=="function"&&t.config.chart.events.click(r,i,a),i.ctx.events.fireEvent("click",[r,i,a]))},{capture:!1,passive:!0})}),this.ctx.eventList.forEach(function(n){t.globals.dom.baseEl.addEventListener(n,e.documentEvent,{passive:!0})}),this.ctx.core.setupBrushHandler()}},{key:"documentEvent",value:function(e){var t=this.w,i=e.target.className;if(e.type==="click"){var o=t.globals.dom.baseEl.querySelector(".apexcharts-menu");o&&o.classList.contains("apexcharts-menu-open")&&i!=="apexcharts-menu-icon"&&o.classList.remove("apexcharts-menu-open")}t.globals.clientX=e.type==="touchmove"?e.touches[0].clientX:e.clientX,t.globals.clientY=e.type==="touchmove"?e.touches[0].clientY:e.clientY}}]),s}(),Pw=function(){function s(e){H(this,s),this.ctx=e,this.w=e.w}return W(s,[{key:"setCurrentLocaleValues",value:function(e){var t=this.w.config.chart.locales;window.Apex.chart&&window.Apex.chart.locales&&window.Apex.chart.locales.length>0&&(t=this.w.config.chart.locales.concat(window.Apex.chart.locales));var i=t.filter(function(n){return n.name===e})[0];if(!i)throw new Error("Wrong locale name provided. Please make sure you set the correct locale name in options");var o=T.extend(lg,i);this.w.globals.locale=o.options}}]),s}(),Mw=function(){function s(e){H(this,s),this.ctx=e,this.w=e.w}return W(s,[{key:"drawAxis",value:function(e,t){var i,o,n=this,r=this.w.globals,a=this.w.config,l=new es(this.ctx,t),c=new wl(this.ctx,t);r.axisCharts&&e!=="radar"&&(r.isBarHorizontal?(o=c.drawYaxisInversed(0),i=l.drawXaxisInversed(0),r.dom.elGraphical.add(i),r.dom.elGraphical.add(o)):(i=l.drawXaxis(),r.dom.elGraphical.add(i),a.yaxis.map(function(d,h){if(r.ignoreYAxisIndexes.indexOf(h)===-1&&(o=c.drawYaxis(h),r.dom.Paper.add(o),n.w.config.grid.position==="back")){var g=r.dom.Paper.children()[1];g.remove(),r.dom.Paper.add(g)}})))}}]),s}(),pl=function(){function s(e){H(this,s),this.ctx=e,this.w=e.w}return W(s,[{key:"drawXCrosshairs",value:function(){var e=this.w,t=new N(this.ctx),i=new lt(this.ctx),o=e.config.xaxis.crosshairs.fill.gradient,n=e.config.xaxis.crosshairs.dropShadow,r=e.config.xaxis.crosshairs.fill.type,a=o.colorFrom,l=o.colorTo,c=o.opacityFrom,d=o.opacityTo,h=o.stops,g=n.enabled,m=n.left,p=n.top,b=n.blur,k=n.color,v=n.opacity,x=e.config.xaxis.crosshairs.fill.color;if(e.config.xaxis.crosshairs.show){r==="gradient"&&(x=t.drawGradient("vertical",a,l,c,d,null,h,null));var u=t.drawRect();e.config.xaxis.crosshairs.width===1&&(u=t.drawLine());var f=e.globals.gridHeight;(!T.isNumber(f)||f<0)&&(f=0);var w=e.config.xaxis.crosshairs.width;(!T.isNumber(w)||w<0)&&(w=0),u.attr({class:"apexcharts-xcrosshairs",x:0,y:0,y2:f,width:w,height:f,fill:x,filter:"none","fill-opacity":e.config.xaxis.crosshairs.opacity,stroke:e.config.xaxis.crosshairs.stroke.color,"stroke-width":e.config.xaxis.crosshairs.stroke.width,"stroke-dasharray":e.config.xaxis.crosshairs.stroke.dashArray}),g&&(u=i.dropShadow(u,{left:m,top:p,blur:b,color:k,opacity:v})),e.globals.dom.elGraphical.add(u)}}},{key:"drawYCrosshairs",value:function(){var e=this.w,t=new N(this.ctx),i=e.config.yaxis[0].crosshairs,o=e.globals.barPadForNumericAxis;if(e.config.yaxis[0].crosshairs.show){var n=t.drawLine(-o,0,e.globals.gridWidth+o,0,i.stroke.color,i.stroke.dashArray,i.stroke.width);n.attr({class:"apexcharts-ycrosshairs"}),e.globals.dom.elGraphical.add(n)}var r=t.drawLine(-o,0,e.globals.gridWidth+o,0,i.stroke.color,0,0);r.attr({class:"apexcharts-ycrosshairs-hidden"}),e.globals.dom.elGraphical.add(r)}}]),s}(),Lw=function(){function s(e){H(this,s),this.ctx=e,this.w=e.w}return W(s,[{key:"checkResponsiveConfig",value:function(e){var t=this,i=this.w,o=i.config;if(o.responsive.length!==0){var n=o.responsive.slice();n.sort(function(c,d){return c.breakpoint>d.breakpoint?1:d.breakpoint>c.breakpoint?-1:0}).reverse();var r=new Jn({}),a=function(){var c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},d=n[0].breakpoint,h=window.innerWidth>0?window.innerWidth:screen.width;if(h>d){var g=T.clone(i.globals.initialConfig);g.series=T.clone(i.config.series);var m=De.extendArrayProps(r,g,i);c=T.extend(m,c),c=T.extend(i.config,c),t.overrideResponsiveOptions(c)}else for(var p=0;p<n.length;p++)h<n[p].breakpoint&&(c=De.extendArrayProps(r,n[p].options,i),c=T.extend(i.config,c),t.overrideResponsiveOptions(c))};if(e){var l=De.extendArrayProps(r,e,i);l=T.extend(i.config,l),a(l=T.extend(l,e))}else a({})}}},{key:"overrideResponsiveOptions",value:function(e){var t=new Jn(e).init({responsiveOverride:!0});this.w.config=t}}]),s}(),Rw=function(){function s(e){H(this,s),this.ctx=e,this.colors=[],this.w=e.w;var t=this.w;this.isColorFn=!1,this.isHeatmapDistributed=t.config.chart.type==="treemap"&&t.config.plotOptions.treemap.distributed||t.config.chart.type==="heatmap"&&t.config.plotOptions.heatmap.distributed,this.isBarDistributed=t.config.plotOptions.bar.distributed&&(t.config.chart.type==="bar"||t.config.chart.type==="rangeBar")}return W(s,[{key:"init",value:function(){this.setDefaultColors()}},{key:"setDefaultColors",value:function(){var e,t=this,i=this.w,o=new T;if(i.globals.dom.elWrap.classList.add("apexcharts-theme-".concat(i.config.theme.mode)),i.config.colors===void 0||((e=i.config.colors)===null||e===void 0?void 0:e.length)===0?i.globals.colors=this.predefined():(i.globals.colors=i.config.colors,Array.isArray(i.config.colors)&&i.config.colors.length>0&&typeof i.config.colors[0]=="function"&&(i.globals.colors=i.config.series.map(function(p,b){var k=i.config.colors[b];return k||(k=i.config.colors[0]),typeof k=="function"?(t.isColorFn=!0,k({value:i.globals.axisCharts?i.globals.series[b][0]?i.globals.series[b][0]:0:i.globals.series[b],seriesIndex:b,dataPointIndex:b,w:i})):k}))),i.globals.seriesColors.map(function(p,b){p&&(i.globals.colors[b]=p)}),i.config.theme.monochrome.enabled){var n=[],r=i.globals.series.length;(this.isBarDistributed||this.isHeatmapDistributed)&&(r=i.globals.series[0].length*i.globals.series.length);for(var a=i.config.theme.monochrome.color,l=1/(r/i.config.theme.monochrome.shadeIntensity),c=i.config.theme.monochrome.shadeTo,d=0,h=0;h<r;h++){var g=void 0;c==="dark"?(g=o.shadeColor(-1*d,a),d+=l):(g=o.shadeColor(d,a),d+=l),n.push(g)}i.globals.colors=n.slice()}var m=i.globals.colors.slice();this.pushExtraColors(i.globals.colors),["fill","stroke"].forEach(function(p){i.config[p].colors===void 0?i.globals[p].colors=t.isColorFn?i.config.colors:m:i.globals[p].colors=i.config[p].colors.slice(),t.pushExtraColors(i.globals[p].colors)}),i.config.dataLabels.style.colors===void 0?i.globals.dataLabels.style.colors=m:i.globals.dataLabels.style.colors=i.config.dataLabels.style.colors.slice(),this.pushExtraColors(i.globals.dataLabels.style.colors,50),i.config.plotOptions.radar.polygons.fill.colors===void 0?i.globals.radarPolygons.fill.colors=[i.config.theme.mode==="dark"?"#424242":"none"]:i.globals.radarPolygons.fill.colors=i.config.plotOptions.radar.polygons.fill.colors.slice(),this.pushExtraColors(i.globals.radarPolygons.fill.colors,20),i.config.markers.colors===void 0?i.globals.markers.colors=m:i.globals.markers.colors=i.config.markers.colors.slice(),this.pushExtraColors(i.globals.markers.colors)}},{key:"pushExtraColors",value:function(e,t){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,o=this.w,n=t||o.globals.series.length;if(i===null&&(i=this.isBarDistributed||this.isHeatmapDistributed||o.config.chart.type==="heatmap"&&o.config.plotOptions.heatmap.colorScale.inverse),i&&o.globals.series.length&&(n=o.globals.series[o.globals.maxValsInArrayIndex].length*o.globals.series.length),e.length<n)for(var r=n-e.length,a=0;a<r;a++)e.push(e[a])}},{key:"updateThemeOptions",value:function(e){e.chart=e.chart||{},e.tooltip=e.tooltip||{};var t=e.theme.mode,i=t==="dark"?"palette4":t==="light"?"palette1":e.theme.palette||"palette1",o=t==="dark"?"#f6f7f8":t==="light"?"#373d3f":e.chart.foreColor||"#373d3f";return e.tooltip.theme=t||"light",e.chart.foreColor=o,e.theme.palette=i,e}},{key:"predefined",value:function(){switch(this.w.config.theme.palette){case"palette1":default:this.colors=["#008FFB","#00E396","#FEB019","#FF4560","#775DD0"];break;case"palette2":this.colors=["#3f51b5","#03a9f4","#4caf50","#f9ce1d","#FF9800"];break;case"palette3":this.colors=["#33b2df","#546E7A","#d4526e","#13d8aa","#A5978B"];break;case"palette4":this.colors=["#4ecdc4","#c7f464","#81D4FA","#fd6a6a","#546E7A"];break;case"palette5":this.colors=["#2b908f","#f9a3a4","#90ee7e","#fa4443","#69d2e7"];break;case"palette6":this.colors=["#449DD1","#F86624","#EA3546","#662E9B","#C5D86D"];break;case"palette7":this.colors=["#D7263D","#1B998B","#2E294E","#F46036","#E2C044"];break;case"palette8":this.colors=["#662E9B","#F86624","#F9C80E","#EA3546","#43BCCD"];break;case"palette9":this.colors=["#5C4742","#A5978B","#8D5B4C","#5A2A27","#C4BBAF"];break;case"palette10":this.colors=["#A300D6","#7D02EB","#5653FE","#2983FF","#00B1F2"]}return this.colors}}]),s}(),Nw=function(){function s(e){H(this,s),this.ctx=e,this.w=e.w}return W(s,[{key:"draw",value:function(){this.drawTitleSubtitle("title"),this.drawTitleSubtitle("subtitle")}},{key:"drawTitleSubtitle",value:function(e){var t=this.w,i=e==="title"?t.config.title:t.config.subtitle,o=t.globals.svgWidth/2,n=i.offsetY,r="middle";if(i.align==="left"?(o=10,r="start"):i.align==="right"&&(o=t.globals.svgWidth-10,r="end"),o+=i.offsetX,n=n+parseInt(i.style.fontSize,10)+i.margin/2,i.text!==void 0){var a=new N(this.ctx).drawText({x:o,y:n,text:i.text,textAnchor:r,fontSize:i.style.fontSize,fontFamily:i.style.fontFamily,fontWeight:i.style.fontWeight,foreColor:i.style.color,opacity:1});a.node.setAttribute("class","apexcharts-".concat(e,"-text")),t.globals.dom.Paper.add(a)}}}]),s}(),Vw=function(){function s(e){H(this,s),this.w=e.w,this.dCtx=e}return W(s,[{key:"getTitleSubtitleCoords",value:function(e){var t=this.w,i=0,o=0,n=e==="title"?t.config.title.floating:t.config.subtitle.floating,r=t.globals.dom.baseEl.querySelector(".apexcharts-".concat(e,"-text"));if(r!==null&&!n){var a=r.getBoundingClientRect();i=a.width,o=t.globals.axisCharts?a.height+5:a.height}return{width:i,height:o}}},{key:"getLegendsRect",value:function(){var e=this.w,t=e.globals.dom.elLegendWrap;e.config.legend.height||e.config.legend.position!=="top"&&e.config.legend.position!=="bottom"||(t.style.maxHeight=e.globals.svgHeight/2+"px");var i=Object.assign({},T.getBoundingClientRect(t));return t!==null&&!e.config.legend.floating&&e.config.legend.show?this.dCtx.lgRect={x:i.x,y:i.y,height:i.height,width:i.height===0?0:i.width}:this.dCtx.lgRect={x:0,y:0,height:0,width:0},e.config.legend.position!=="left"&&e.config.legend.position!=="right"||1.5*this.dCtx.lgRect.width>e.globals.svgWidth&&(this.dCtx.lgRect.width=e.globals.svgWidth/1.5),this.dCtx.lgRect}},{key:"getDatalabelsRect",value:function(){var e=this,t=this.w,i=[];t.config.series.forEach(function(l,c){l.data.forEach(function(d,h){var g;g=t.globals.series[c][h],o=t.config.dataLabels.formatter(g,{ctx:e.dCtx.ctx,seriesIndex:c,dataPointIndex:h,w:t}),i.push(o)})});var o=T.getLargestStringFromArr(i),n=new N(this.dCtx.ctx),r=t.config.dataLabels.style,a=n.getTextRects(o,parseInt(r.fontSize),r.fontFamily);return{width:1.05*a.width,height:a.height}}},{key:"getLargestStringFromMultiArr",value:function(e,t){var i=e;if(this.w.globals.isMultiLineX){var o=t.map(function(r,a){return Array.isArray(r)?r.length:1}),n=Math.max.apply(Math,at(o));i=t[o.indexOf(n)]}return i}}]),s}(),Dw=function(){function s(e){H(this,s),this.w=e.w,this.dCtx=e}return W(s,[{key:"getxAxisLabelsCoords",value:function(){var e,t=this.w,i=t.globals.labels.slice();if(t.config.xaxis.convertedCatToNumeric&&i.length===0&&(i=t.globals.categoryLabels),t.globals.timescaleLabels.length>0){var o=this.getxAxisTimeScaleLabelsCoords();e={width:o.width,height:o.height},t.globals.rotateXLabels=!1}else{this.dCtx.lgWidthForSideLegends=t.config.legend.position!=="left"&&t.config.legend.position!=="right"||t.config.legend.floating?0:this.dCtx.lgRect.width;var n=t.globals.xLabelFormatter,r=T.getLargestStringFromArr(i),a=this.dCtx.dimHelpers.getLargestStringFromMultiArr(r,i);t.globals.isBarHorizontal&&(a=r=t.globals.yAxisScale[0].result.reduce(function(p,b){return p.length>b.length?p:b},0));var l=new os(this.dCtx.ctx),c=r;r=l.xLabelFormat(n,r,c,{i:void 0,dateFormatter:new Qe(this.dCtx.ctx).formatDate,w:t}),a=l.xLabelFormat(n,a,c,{i:void 0,dateFormatter:new Qe(this.dCtx.ctx).formatDate,w:t}),(t.config.xaxis.convertedCatToNumeric&&r===void 0||String(r).trim()==="")&&(a=r="1");var d=new N(this.dCtx.ctx),h=d.getTextRects(r,t.config.xaxis.labels.style.fontSize),g=h;if(r!==a&&(g=d.getTextRects(a,t.config.xaxis.labels.style.fontSize)),(e={width:h.width>=g.width?h.width:g.width,height:h.height>=g.height?h.height:g.height}).width*i.length>t.globals.svgWidth-this.dCtx.lgWidthForSideLegends-this.dCtx.yAxisWidth-this.dCtx.gridPad.left-this.dCtx.gridPad.right&&t.config.xaxis.labels.rotate!==0||t.config.xaxis.labels.rotateAlways){if(!t.globals.isBarHorizontal){t.globals.rotateXLabels=!0;var m=function(p){return d.getTextRects(p,t.config.xaxis.labels.style.fontSize,t.config.xaxis.labels.style.fontFamily,"rotate(".concat(t.config.xaxis.labels.rotate," 0 0)"),!1)};h=m(r),r!==a&&(g=m(a)),e.height=(h.height>g.height?h.height:g.height)/1.5,e.width=h.width>g.width?h.width:g.width}}else t.globals.rotateXLabels=!1}return t.config.xaxis.labels.show||(e={width:0,height:0}),{width:e.width,height:e.height}}},{key:"getxAxisGroupLabelsCoords",value:function(){var e,t=this.w;if(!t.globals.hasXaxisGroups)return{width:0,height:0};var i,o=((e=t.config.xaxis.group.style)===null||e===void 0?void 0:e.fontSize)||t.config.xaxis.labels.style.fontSize,n=t.globals.groups.map(function(h){return h.title}),r=T.getLargestStringFromArr(n),a=this.dCtx.dimHelpers.getLargestStringFromMultiArr(r,n),l=new N(this.dCtx.ctx),c=l.getTextRects(r,o),d=c;return r!==a&&(d=l.getTextRects(a,o)),i={width:c.width>=d.width?c.width:d.width,height:c.height>=d.height?c.height:d.height},t.config.xaxis.labels.show||(i={width:0,height:0}),{width:i.width,height:i.height}}},{key:"getxAxisTitleCoords",value:function(){var e=this.w,t=0,i=0;if(e.config.xaxis.title.text!==void 0){var o=new N(this.dCtx.ctx).getTextRects(e.config.xaxis.title.text,e.config.xaxis.title.style.fontSize);t=o.width,i=o.height}return{width:t,height:i}}},{key:"getxAxisTimeScaleLabelsCoords",value:function(){var e,t=this.w;this.dCtx.timescaleLabels=t.globals.timescaleLabels.slice();var i=this.dCtx.timescaleLabels.map(function(n){return n.value}),o=i.reduce(function(n,r){return n===void 0?(console.error("You have possibly supplied invalid Date format. Please supply a valid JavaScript Date"),0):n.length>r.length?n:r},0);return 1.05*(e=new N(this.dCtx.ctx).getTextRects(o,t.config.xaxis.labels.style.fontSize)).width*i.length>t.globals.gridWidth&&t.config.xaxis.labels.rotate!==0&&(t.globals.overlappingXLabels=!0),e}},{key:"additionalPaddingXLabels",value:function(e){var t=this,i=this.w,o=i.globals,n=i.config,r=n.xaxis.type,a=e.width;o.skipLastTimelinelabel=!1,o.skipFirstTimelinelabel=!1;var l=i.config.yaxis[0].opposite&&i.globals.isBarHorizontal,c=function(d,h){n.yaxis.length>1&&function(g){return o.collapsedSeriesIndices.indexOf(g)!==-1}(h)||function(g){if(t.dCtx.timescaleLabels&&t.dCtx.timescaleLabels.length){var m=t.dCtx.timescaleLabels[0],p=t.dCtx.timescaleLabels[t.dCtx.timescaleLabels.length-1].position+a/1.75-t.dCtx.yAxisWidthRight,b=m.position-a/1.75+t.dCtx.yAxisWidthLeft,k=i.config.legend.position==="right"&&t.dCtx.lgRect.width>0?t.dCtx.lgRect.width:0;p>o.svgWidth-o.translateX-k&&(o.skipLastTimelinelabel=!0),b<-(g.show&&!g.floating||n.chart.type!=="bar"&&n.chart.type!=="candlestick"&&n.chart.type!=="rangeBar"&&n.chart.type!=="boxPlot"?10:a/1.75)&&(o.skipFirstTimelinelabel=!0)}else r==="datetime"?t.dCtx.gridPad.right<a&&!o.rotateXLabels&&(o.skipLastTimelinelabel=!0):r!=="datetime"&&t.dCtx.gridPad.right<a/2-t.dCtx.yAxisWidthRight&&!o.rotateXLabels&&!i.config.xaxis.labels.trim&&(t.dCtx.xPadRight=a/2+1)}(d)};n.yaxis.forEach(function(d,h){l?(t.dCtx.gridPad.left<a&&(t.dCtx.xPadLeft=a/2+1),t.dCtx.xPadRight=a/2+1):c(d,h)})}}]),s}(),Bw=function(){function s(e){H(this,s),this.w=e.w,this.dCtx=e}return W(s,[{key:"getyAxisLabelsCoords",value:function(){var e=this,t=this.w,i=[],o=10,n=new Di(this.dCtx.ctx);return t.config.yaxis.map(function(r,a){var l={seriesIndex:a,dataPointIndex:-1,w:t},c=t.globals.yAxisScale[a],d=0;if(!n.isYAxisHidden(a)&&r.labels.show&&r.labels.minWidth!==void 0&&(d=r.labels.minWidth),!n.isYAxisHidden(a)&&r.labels.show&&c.result.length){var h=t.globals.yLabelFormatters[a],g=c.niceMin===Number.MIN_VALUE?0:c.niceMin,m=c.result.reduce(function(f,w){var y,_;return((y=String(h(f,l)))===null||y===void 0?void 0:y.length)>((_=String(h(w,l)))===null||_===void 0?void 0:_.length)?f:w},g),p=m=h(m,l);if(m!==void 0&&m.length!==0||(m=c.niceMax),t.globals.isBarHorizontal){o=0;var b=t.globals.labels.slice();m=T.getLargestStringFromArr(b),m=h(m,{seriesIndex:a,dataPointIndex:-1,w:t}),p=e.dCtx.dimHelpers.getLargestStringFromMultiArr(m,b)}var k=new N(e.dCtx.ctx),v="rotate(".concat(r.labels.rotate," 0 0)"),x=k.getTextRects(m,r.labels.style.fontSize,r.labels.style.fontFamily,v,!1),u=x;m!==p&&(u=k.getTextRects(p,r.labels.style.fontSize,r.labels.style.fontFamily,v,!1)),i.push({width:(d>u.width||d>x.width?d:u.width>x.width?u.width:x.width)+o,height:u.height>x.height?u.height:x.height})}else i.push({width:0,height:0})}),i}},{key:"getyAxisTitleCoords",value:function(){var e=this,t=this.w,i=[];return t.config.yaxis.map(function(o,n){if(o.show&&o.title.text!==void 0){var r=new N(e.dCtx.ctx),a="rotate(".concat(o.title.rotate," 0 0)"),l=r.getTextRects(o.title.text,o.title.style.fontSize,o.title.style.fontFamily,a,!1);i.push({width:l.width,height:l.height})}else i.push({width:0,height:0})}),i}},{key:"getTotalYAxisWidth",value:function(){var e=this.w,t=0,i=0,o=0,n=e.globals.yAxisScale.length>1?10:0,r=new Di(this.dCtx.ctx),a=function(l,c){var d=e.config.yaxis[c].floating,h=0;l.width>0&&!d?(h=l.width+n,function(g){return e.globals.ignoreYAxisIndexes.indexOf(g)>-1}(c)&&(h=h-l.width-n)):h=d||r.isYAxisHidden(c)?0:5,e.config.yaxis[c].opposite?o+=h:i+=h,t+=h};return e.globals.yLabelsCoords.map(function(l,c){a(l,c)}),e.globals.yTitleCoords.map(function(l,c){a(l,c)}),e.globals.isBarHorizontal&&!e.config.yaxis[0].floating&&(t=e.globals.yLabelsCoords[0].width+e.globals.yTitleCoords[0].width+15),this.dCtx.yAxisWidthLeft=i,this.dCtx.yAxisWidthRight=o,t}}]),s}(),zw=function(){function s(e){H(this,s),this.w=e.w,this.dCtx=e}return W(s,[{key:"gridPadForColumnsInNumericAxis",value:function(e){var t=this.w,i=t.config,o=t.globals;if(o.noData||o.collapsedSeries.length+o.ancillaryCollapsedSeries.length===i.series.length)return 0;var n=function(m){return m==="bar"||m==="rangeBar"||m==="candlestick"||m==="boxPlot"},r=i.chart.type,a=0,l=n(r)?i.series.length:1;o.comboBarCount>0&&(l=o.comboBarCount),o.collapsedSeries.forEach(function(m){n(m.type)&&(l-=1)}),i.chart.stacked&&(l=1);var c=n(r)||o.comboBarCount>0,d=Math.abs(o.initialMaxX-o.initialMinX);if(c&&o.isXNumeric&&!o.isBarHorizontal&&l>0&&d!==0){var h,g;d<=3&&(d=o.dataPoints),h=d/e,o.minXDiff&&o.minXDiff/h>0&&(g=o.minXDiff/h),g>e/2&&(g/=2),(a=g*parseInt(i.plotOptions.bar.columnWidth,10)/100)<1&&(a=1),o.barPadForNumericAxis=a}return a}},{key:"gridPadFortitleSubtitle",value:function(){var e=this,t=this.w,i=t.globals,o=this.dCtx.isSparkline||!t.globals.axisCharts?0:10;["title","subtitle"].forEach(function(a){t.config[a].text!==void 0?o+=t.config[a].margin:o+=e.dCtx.isSparkline||!t.globals.axisCharts?0:5}),!t.config.legend.show||t.config.legend.position!=="bottom"||t.config.legend.floating||t.globals.axisCharts||(o+=10);var n=this.dCtx.dimHelpers.getTitleSubtitleCoords("title"),r=this.dCtx.dimHelpers.getTitleSubtitleCoords("subtitle");i.gridHeight=i.gridHeight-n.height-r.height-o,i.translateY=i.translateY+n.height+r.height+o}},{key:"setGridXPosForDualYAxis",value:function(e,t){var i=this.w,o=new Di(this.dCtx.ctx);i.config.yaxis.map(function(n,r){i.globals.ignoreYAxisIndexes.indexOf(r)!==-1||n.floating||o.isYAxisHidden(r)||(n.opposite&&(i.globals.translateX=i.globals.translateX-(t[r].width+e[r].width)-parseInt(i.config.yaxis[r].labels.style.fontSize,10)/1.2-12),i.globals.translateX<2&&(i.globals.translateX=2))})}}]),s}(),yr=function(){function s(e){H(this,s),this.ctx=e,this.w=e.w,this.lgRect={},this.yAxisWidth=0,this.yAxisWidthLeft=0,this.yAxisWidthRight=0,this.xAxisHeight=0,this.isSparkline=this.w.config.chart.sparkline.enabled,this.dimHelpers=new Vw(this),this.dimYAxis=new Bw(this),this.dimXAxis=new Dw(this),this.dimGrid=new zw(this),this.lgWidthForSideLegends=0,this.gridPad=this.w.config.grid.padding,this.xPadRight=0,this.xPadLeft=0}return W(s,[{key:"plotCoords",value:function(){var e=this,t=this.w,i=t.globals;this.lgRect=this.dimHelpers.getLegendsRect(),this.datalabelsCoords={width:0,height:0};var o=Array.isArray(t.config.stroke.width)?Math.max.apply(Math,at(t.config.stroke.width)):t.config.stroke.width;this.isSparkline&&((t.config.markers.discrete.length>0||t.config.markers.size>0)&&Object.entries(this.gridPad).forEach(function(r){var a=rg(r,2),l=a[0],c=a[1];e.gridPad[l]=Math.max(c,e.w.globals.markers.largestSize/1.5)}),this.gridPad.top=Math.max(o/2,this.gridPad.top),this.gridPad.bottom=Math.max(o/2,this.gridPad.bottom)),i.axisCharts?this.setDimensionsForAxisCharts():this.setDimensionsForNonAxisCharts(),this.dimGrid.gridPadFortitleSubtitle(),i.gridHeight=i.gridHeight-this.gridPad.top-this.gridPad.bottom,i.gridWidth=i.gridWidth-this.gridPad.left-this.gridPad.right-this.xPadRight-this.xPadLeft;var n=this.dimGrid.gridPadForColumnsInNumericAxis(i.gridWidth);i.gridWidth=i.gridWidth-2*n,i.translateX=i.translateX+this.gridPad.left+this.xPadLeft+(n>0?n:0),i.translateY=i.translateY+this.gridPad.top}},{key:"setDimensionsForAxisCharts",value:function(){var e=this,t=this.w,i=t.globals,o=this.dimYAxis.getyAxisLabelsCoords(),n=this.dimYAxis.getyAxisTitleCoords();i.isSlopeChart&&(this.datalabelsCoords=this.dimHelpers.getDatalabelsRect()),t.globals.yLabelsCoords=[],t.globals.yTitleCoords=[],t.config.yaxis.map(function(m,p){t.globals.yLabelsCoords.push({width:o[p].width,index:p}),t.globals.yTitleCoords.push({width:n[p].width,index:p})}),this.yAxisWidth=this.dimYAxis.getTotalYAxisWidth();var r=this.dimXAxis.getxAxisLabelsCoords(),a=this.dimXAxis.getxAxisGroupLabelsCoords(),l=this.dimXAxis.getxAxisTitleCoords();this.conditionalChecksForAxisCoords(r,l,a),i.translateXAxisY=t.globals.rotateXLabels?this.xAxisHeight/8:-4,i.translateXAxisX=t.globals.rotateXLabels&&t.globals.isXNumeric&&t.config.xaxis.labels.rotate<=-45?-this.xAxisWidth/4:0,t.globals.isBarHorizontal&&(i.rotateXLabels=!1,i.translateXAxisY=parseInt(t.config.xaxis.labels.style.fontSize,10)/1.5*-1),i.translateXAxisY=i.translateXAxisY+t.config.xaxis.labels.offsetY,i.translateXAxisX=i.translateXAxisX+t.config.xaxis.labels.offsetX;var c=this.yAxisWidth,d=this.xAxisHeight;i.xAxisLabelsHeight=this.xAxisHeight-l.height,i.xAxisGroupLabelsHeight=i.xAxisLabelsHeight-r.height,i.xAxisLabelsWidth=this.xAxisWidth,i.xAxisHeight=this.xAxisHeight;var h=10;(t.config.chart.type==="radar"||this.isSparkline)&&(c=0,d=i.goldenPadding),this.isSparkline&&(this.lgRect={height:0,width:0}),(this.isSparkline||t.config.chart.type==="treemap")&&(c=0,d=0,h=0),this.isSparkline||this.dimXAxis.additionalPaddingXLabels(r);var g=function(){i.translateX=c+e.datalabelsCoords.width,i.gridHeight=i.svgHeight-e.lgRect.height-d-(e.isSparkline||t.config.chart.type==="treemap"?0:t.globals.rotateXLabels?10:15),i.gridWidth=i.svgWidth-c-2*e.datalabelsCoords.width};switch(t.config.xaxis.position==="top"&&(h=i.xAxisHeight-t.config.xaxis.axisTicks.height-5),t.config.legend.position){case"bottom":i.translateY=h,g();break;case"top":i.translateY=this.lgRect.height+h,g();break;case"left":i.translateY=h,i.translateX=this.lgRect.width+c+this.datalabelsCoords.width,i.gridHeight=i.svgHeight-d-12,i.gridWidth=i.svgWidth-this.lgRect.width-c-2*this.datalabelsCoords.width;break;case"right":i.translateY=h,i.translateX=c+this.datalabelsCoords.width,i.gridHeight=i.svgHeight-d-12,i.gridWidth=i.svgWidth-this.lgRect.width-c-2*this.datalabelsCoords.width-5;break;default:throw new Error("Legend position not supported")}this.dimGrid.setGridXPosForDualYAxis(n,o),new wl(this.ctx).setYAxisXPosition(o,n)}},{key:"setDimensionsForNonAxisCharts",value:function(){var e=this.w,t=e.globals,i=e.config,o=0;e.config.legend.show&&!e.config.legend.floating&&(o=20);var n=i.chart.type==="pie"||i.chart.type==="polarArea"||i.chart.type==="donut"?"pie":"radialBar",r=i.plotOptions[n].offsetY,a=i.plotOptions[n].offsetX;if(!i.legend.show||i.legend.floating){t.gridHeight=t.svgHeight-i.grid.padding.top-i.grid.padding.bottom;var l=t.dom.elWrap.getBoundingClientRect().width;return t.gridWidth=Math.min(l,t.gridHeight)-i.grid.padding.left-i.grid.padding.right,t.translateY=r,void(t.translateX=a+(t.svgWidth-t.gridWidth)/2)}switch(i.legend.position){case"bottom":t.gridHeight=t.svgHeight-this.lgRect.height-t.goldenPadding,t.gridWidth=t.svgWidth,t.translateY=r-10,t.translateX=a+(t.svgWidth-t.gridWidth)/2;break;case"top":t.gridHeight=t.svgHeight-this.lgRect.height-t.goldenPadding,t.gridWidth=t.svgWidth,t.translateY=this.lgRect.height+r+10,t.translateX=a+(t.svgWidth-t.gridWidth)/2;break;case"left":t.gridWidth=t.svgWidth-this.lgRect.width-o,t.gridHeight=i.chart.height!=="auto"?t.svgHeight:t.gridWidth,t.translateY=r,t.translateX=a+this.lgRect.width+o;break;case"right":t.gridWidth=t.svgWidth-this.lgRect.width-o-5,t.gridHeight=i.chart.height!=="auto"?t.svgHeight:t.gridWidth,t.translateY=r,t.translateX=a+10;break;default:throw new Error("Legend position not supported")}}},{key:"conditionalChecksForAxisCoords",value:function(e,t,i){var o=this.w,n=o.globals.hasXaxisGroups?2:1,r=i.height+e.height+t.height,a=o.globals.isMultiLineX?1.2:o.globals.LINE_HEIGHT_RATIO,l=o.globals.rotateXLabels?22:10,c=o.globals.rotateXLabels&&o.config.legend.position==="bottom"?10:0;this.xAxisHeight=r*a+n*l+c,this.xAxisWidth=e.width,this.xAxisHeight-t.height>o.config.xaxis.labels.maxHeight&&(this.xAxisHeight=o.config.xaxis.labels.maxHeight),o.config.xaxis.labels.minHeight&&this.xAxisHeight<o.config.xaxis.labels.minHeight&&(this.xAxisHeight=o.config.xaxis.labels.minHeight),o.config.xaxis.floating&&(this.xAxisHeight=0);var d=0,h=0;o.config.yaxis.forEach(function(g){d+=g.labels.minWidth,h+=g.labels.maxWidth}),this.yAxisWidth<d&&(this.yAxisWidth=d),this.yAxisWidth>h&&(this.yAxisWidth=h)}}]),s}(),Fw=function(){function s(e){H(this,s),this.w=e.w,this.lgCtx=e}return W(s,[{key:"getLegendStyles",value:function(){var e,t,i,o=document.createElement("style");o.setAttribute("type","text/css");var n=((e=this.lgCtx.ctx)===null||e===void 0||(t=e.opts)===null||t===void 0||(i=t.chart)===null||i===void 0?void 0:i.nonce)||this.w.config.chart.nonce;n&&o.setAttribute("nonce",n);var r=document.createTextNode(`
      .apexcharts-legend {
        display: flex;
        overflow: auto;
        padding: 0 10px;
      }
      .apexcharts-legend.apx-legend-position-bottom, .apexcharts-legend.apx-legend-position-top {
        flex-wrap: wrap
      }
      .apexcharts-legend.apx-legend-position-right, .apexcharts-legend.apx-legend-position-left {
        flex-direction: column;
        bottom: 0;
      }
      .apexcharts-legend.apx-legend-position-bottom.apexcharts-align-left, .apexcharts-legend.apx-legend-position-top.apexcharts-align-left, .apexcharts-legend.apx-legend-position-right, .apexcharts-legend.apx-legend-position-left {
        justify-content: flex-start;
      }
      .apexcharts-legend.apx-legend-position-bottom.apexcharts-align-center, .apexcharts-legend.apx-legend-position-top.apexcharts-align-center {
        justify-content: center;
      }
      .apexcharts-legend.apx-legend-position-bottom.apexcharts-align-right, .apexcharts-legend.apx-legend-position-top.apexcharts-align-right {
        justify-content: flex-end;
      }
      .apexcharts-legend-series {
        cursor: pointer;
        line-height: normal;
        display: flex;
        align-items: center;
      }
      .apexcharts-legend-text {
        position: relative;
        font-size: 14px;
      }
      .apexcharts-legend-text *, .apexcharts-legend-marker * {
        pointer-events: none;
      }
      .apexcharts-legend-marker {
        position: relative;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        margin-right: 1px;
      }

      .apexcharts-legend-series.apexcharts-no-click {
        cursor: auto;
      }
      .apexcharts-legend .apexcharts-hidden-zero-series, .apexcharts-legend .apexcharts-hidden-null-series {
        display: none !important;
      }
      .apexcharts-inactive-legend {
        opacity: 0.45;
      }`);return o.appendChild(r),o}},{key:"getLegendDimensions",value:function(){var e=this.w.globals.dom.baseEl.querySelector(".apexcharts-legend"),t=e.offsetWidth;return{clwh:e.offsetHeight,clww:t}}},{key:"appendToForeignObject",value:function(){this.w.globals.dom.elLegendForeign.appendChild(this.getLegendStyles())}},{key:"toggleDataSeries",value:function(e,t){var i=this,o=this.w;if(o.globals.axisCharts||o.config.chart.type==="radialBar"){o.globals.resized=!0;var n=null,r=null;o.globals.risingSeries=[],o.globals.axisCharts?(n=o.globals.dom.baseEl.querySelector(".apexcharts-series[data\\:realIndex='".concat(e,"']")),r=parseInt(n.getAttribute("data:realIndex"),10)):(n=o.globals.dom.baseEl.querySelector(".apexcharts-series[rel='".concat(e+1,"']")),r=parseInt(n.getAttribute("rel"),10)-1),t?[{cs:o.globals.collapsedSeries,csi:o.globals.collapsedSeriesIndices},{cs:o.globals.ancillaryCollapsedSeries,csi:o.globals.ancillaryCollapsedSeriesIndices}].forEach(function(d){i.riseCollapsedSeries(d.cs,d.csi,r)}):this.hideSeries({seriesEl:n,realIndex:r})}else{var a=o.globals.dom.Paper.select(" .apexcharts-series[rel='".concat(e+1,"'] path")),l=o.config.chart.type;if(l==="pie"||l==="polarArea"||l==="donut"){var c=o.config.plotOptions.pie.donut.labels;new N(this.lgCtx.ctx).pathMouseDown(a.members[0],null),this.lgCtx.ctx.pie.printDataLabelsInner(a.members[0].node,c)}a.fire("click")}}},{key:"hideSeries",value:function(e){var t=e.seriesEl,i=e.realIndex,o=this.w,n=o.globals,r=T.clone(o.config.series);if(n.axisCharts){var a=o.config.yaxis[n.seriesYAxisReverseMap[i]];if(a&&a.show&&a.showAlways)n.ancillaryCollapsedSeriesIndices.indexOf(i)<0&&(n.ancillaryCollapsedSeries.push({index:i,data:r[i].data.slice(),type:t.parentNode.className.baseVal.split("-")[1]}),n.ancillaryCollapsedSeriesIndices.push(i));else if(n.collapsedSeriesIndices.indexOf(i)<0){n.collapsedSeries.push({index:i,data:r[i].data.slice(),type:t.parentNode.className.baseVal.split("-")[1]}),n.collapsedSeriesIndices.push(i);var l=n.risingSeries.indexOf(i);n.risingSeries.splice(l,1)}}else n.collapsedSeries.push({index:i,data:r[i]}),n.collapsedSeriesIndices.push(i);for(var c=t.childNodes,d=0;d<c.length;d++)c[d].classList.contains("apexcharts-series-markers-wrap")&&(c[d].classList.contains("apexcharts-hide")?c[d].classList.remove("apexcharts-hide"):c[d].classList.add("apexcharts-hide"));n.allSeriesCollapsed=n.collapsedSeries.length+n.ancillaryCollapsedSeries.length===o.config.series.length,r=this._getSeriesBasedOnCollapsedState(r),this.lgCtx.ctx.updateHelpers._updateSeries(r,o.config.chart.animations.dynamicAnimation.enabled)}},{key:"riseCollapsedSeries",value:function(e,t,i){var o=this.w,n=T.clone(o.config.series);if(e.length>0){for(var r=0;r<e.length;r++)e[r].index===i&&(o.globals.axisCharts?(n[i].data=e[r].data.slice(),e.splice(r,1),t.splice(r,1),o.globals.risingSeries.push(i)):(n[i]=e[r].data,e.splice(r,1),t.splice(r,1),o.globals.risingSeries.push(i)));n=this._getSeriesBasedOnCollapsedState(n),this.lgCtx.ctx.updateHelpers._updateSeries(n,o.config.chart.animations.dynamicAnimation.enabled)}}},{key:"_getSeriesBasedOnCollapsedState",value:function(e){var t=this.w,i=0;return t.globals.axisCharts?e.forEach(function(o,n){t.globals.collapsedSeriesIndices.indexOf(n)<0&&t.globals.ancillaryCollapsedSeriesIndices.indexOf(n)<0||(e[n].data=[],i++)}):e.forEach(function(o,n){!t.globals.collapsedSeriesIndices.indexOf(n)<0&&(e[n]=0,i++)}),t.globals.allSeriesCollapsed=i===e.length,e}}]),s}(),mg=function(){function s(e){H(this,s),this.ctx=e,this.w=e.w,this.onLegendClick=this.onLegendClick.bind(this),this.onLegendHovered=this.onLegendHovered.bind(this),this.isBarsDistributed=this.w.config.chart.type==="bar"&&this.w.config.plotOptions.bar.distributed&&this.w.config.series.length===1,this.legendHelpers=new Fw(this)}return W(s,[{key:"init",value:function(){var e=this.w,t=e.globals,i=e.config;if((i.legend.showForSingleSeries&&t.series.length===1||this.isBarsDistributed||t.series.length>1||!t.axisCharts)&&i.legend.show){for(;t.dom.elLegendWrap.firstChild;)t.dom.elLegendWrap.removeChild(t.dom.elLegendWrap.firstChild);this.drawLegends(),T.isIE11()?document.getElementsByTagName("head")[0].appendChild(this.legendHelpers.getLegendStyles()):this.legendHelpers.appendToForeignObject(),i.legend.position==="bottom"||i.legend.position==="top"?this.legendAlignHorizontal():i.legend.position!=="right"&&i.legend.position!=="left"||this.legendAlignVertical()}}},{key:"createLegendMarker",value:function(e){var t=e.i,i=e.fillcolor,o=this.w,n=document.createElement("span");n.classList.add("apexcharts-legend-marker");var r=o.config.legend.markers.shape||o.config.markers.shape,a=r;Array.isArray(r)&&(a=r[t]);var l=Array.isArray(o.config.legend.markers.size)?parseFloat(o.config.legend.markers.size[t]):parseFloat(o.config.legend.markers.size),c=Array.isArray(o.config.legend.markers.offsetX)?parseFloat(o.config.legend.markers.offsetX[t]):parseFloat(o.config.legend.markers.offsetX),d=Array.isArray(o.config.legend.markers.offsetY)?parseFloat(o.config.legend.markers.offsetY[t]):parseFloat(o.config.legend.markers.offsetY),h=Array.isArray(o.config.legend.markers.strokeWidth)?parseFloat(o.config.legend.markers.strokeWidth[t]):parseFloat(o.config.legend.markers.strokeWidth),g=n.style;if(g.height=2*(l+h)+"px",g.width=2*(l+h)+"px",g.left=c+"px",g.top=d+"px",o.config.legend.markers.customHTML)g.background="transparent",g.color=i[t],Array.isArray(o.config.legend.markers.customHTML)?o.config.legend.markers.customHTML[t]&&(n.innerHTML=o.config.legend.markers.customHTML[t]()):n.innerHTML=o.config.legend.markers.customHTML();else{var m=new Zo(this.ctx).getMarkerConfig({cssClass:"apexcharts-legend-marker apexcharts-marker apexcharts-marker-".concat(a),seriesIndex:t,strokeWidth:h,size:l}),p=SVG(n).size("100%","100%"),b=new N(this.ctx).drawMarker(0,0,F(F({},m),{},{pointFillColor:Array.isArray(i)?i[t]:m.pointFillColor,shape:a}));SVG.select(".apexcharts-legend-marker.apexcharts-marker").members.forEach(function(k){k.node.classList.contains("apexcharts-marker-triangle")?k.node.style.transform="translate(50%, 45%)":k.node.style.transform="translate(50%, 50%)"}),p.add(b)}return n}},{key:"drawLegends",value:function(){var e=this,t=this.w,i=t.config.legend.fontFamily,o=t.globals.seriesNames,n=t.config.legend.markers.fillColors?t.config.legend.markers.fillColors.slice():t.globals.colors.slice();if(t.config.chart.type==="heatmap"){var r=t.config.plotOptions.heatmap.colorScale.ranges;o=r.map(function(w){return w.name?w.name:w.from+" - "+w.to}),n=r.map(function(w){return w.color})}else this.isBarsDistributed&&(o=t.globals.labels.slice());t.config.legend.customLegendItems.length&&(o=t.config.legend.customLegendItems);for(var a=t.globals.legendFormatter,l=t.config.legend.inverseOrder,c=l?o.length-1:0;l?c>=0:c<=o.length-1;l?c--:c++){var d,h=a(o[c],{seriesIndex:c,w:t}),g=!1,m=!1;if(t.globals.collapsedSeries.length>0)for(var p=0;p<t.globals.collapsedSeries.length;p++)t.globals.collapsedSeries[p].index===c&&(g=!0);if(t.globals.ancillaryCollapsedSeriesIndices.length>0)for(var b=0;b<t.globals.ancillaryCollapsedSeriesIndices.length;b++)t.globals.ancillaryCollapsedSeriesIndices[b]===c&&(m=!0);var k=this.createLegendMarker({i:c,fillcolor:n});N.setAttrs(k,{rel:c+1,"data:collapsed":g||m}),(g||m)&&k.classList.add("apexcharts-inactive-legend");var v=document.createElement("div"),x=document.createElement("span");x.classList.add("apexcharts-legend-text"),x.innerHTML=Array.isArray(h)?h.join(" "):h;var u=t.config.legend.labels.useSeriesColors?t.globals.colors[c]:Array.isArray(t.config.legend.labels.colors)?(d=t.config.legend.labels.colors)===null||d===void 0?void 0:d[c]:t.config.legend.labels.colors;u||(u=t.config.chart.foreColor),x.style.color=u,x.style.fontSize=parseFloat(t.config.legend.fontSize)+"px",x.style.fontWeight=t.config.legend.fontWeight,x.style.fontFamily=i||t.config.chart.fontFamily,N.setAttrs(x,{rel:c+1,i:c,"data:default-text":encodeURIComponent(h),"data:collapsed":g||m}),v.appendChild(k),v.appendChild(x);var f=new De(this.ctx);t.config.legend.showForZeroSeries||f.getSeriesTotalByIndex(c)===0&&f.seriesHaveSameValues(c)&&!f.isSeriesNull(c)&&t.globals.collapsedSeriesIndices.indexOf(c)===-1&&t.globals.ancillaryCollapsedSeriesIndices.indexOf(c)===-1&&v.classList.add("apexcharts-hidden-zero-series"),t.config.legend.showForNullSeries||f.isSeriesNull(c)&&t.globals.collapsedSeriesIndices.indexOf(c)===-1&&t.globals.ancillaryCollapsedSeriesIndices.indexOf(c)===-1&&v.classList.add("apexcharts-hidden-null-series"),t.globals.dom.elLegendWrap.appendChild(v),t.globals.dom.elLegendWrap.classList.add("apexcharts-align-".concat(t.config.legend.horizontalAlign)),t.globals.dom.elLegendWrap.classList.add("apx-legend-position-"+t.config.legend.position),v.classList.add("apexcharts-legend-series"),v.style.margin="".concat(t.config.legend.itemMargin.vertical,"px ").concat(t.config.legend.itemMargin.horizontal,"px"),t.globals.dom.elLegendWrap.style.width=t.config.legend.width?t.config.legend.width+"px":"",t.globals.dom.elLegendWrap.style.height=t.config.legend.height?t.config.legend.height+"px":"",N.setAttrs(v,{rel:c+1,seriesName:T.escapeString(o[c]),"data:collapsed":g||m}),(g||m)&&v.classList.add("apexcharts-inactive-legend"),t.config.legend.onItemClick.toggleDataSeries||v.classList.add("apexcharts-no-click")}t.globals.dom.elWrap.addEventListener("click",e.onLegendClick,!0),t.config.legend.onItemHover.highlightDataSeries&&t.config.legend.customLegendItems.length===0&&(t.globals.dom.elWrap.addEventListener("mousemove",e.onLegendHovered,!0),t.globals.dom.elWrap.addEventListener("mouseout",e.onLegendHovered,!0))}},{key:"setLegendWrapXY",value:function(e,t){var i=this.w,o=i.globals.dom.elLegendWrap,n=o.getBoundingClientRect(),r=0,a=0;if(i.config.legend.position==="bottom")a+=i.globals.svgHeight-n.height/2;else if(i.config.legend.position==="top"){var l=new yr(this.ctx),c=l.dimHelpers.getTitleSubtitleCoords("title").height,d=l.dimHelpers.getTitleSubtitleCoords("subtitle").height;a=a+(c>0?c-10:0)+(d>0?d-10:0)}o.style.position="absolute",r=r+e+i.config.legend.offsetX,a=a+t+i.config.legend.offsetY,o.style.left=r+"px",o.style.top=a+"px",i.config.legend.position==="bottom"?(o.style.top="auto",o.style.bottom=5-i.config.legend.offsetY+"px"):i.config.legend.position==="right"&&(o.style.left="auto",o.style.right=25+i.config.legend.offsetX+"px"),["width","height"].forEach(function(h){o.style[h]&&(o.style[h]=parseInt(i.config.legend[h],10)+"px")})}},{key:"legendAlignHorizontal",value:function(){var e=this.w;e.globals.dom.elLegendWrap.style.right=0;var t=this.legendHelpers.getLegendDimensions(),i=new yr(this.ctx),o=i.dimHelpers.getTitleSubtitleCoords("title"),n=i.dimHelpers.getTitleSubtitleCoords("subtitle"),r=0;e.config.legend.position==="bottom"?r=-t.clwh/1.8:e.config.legend.position==="top"&&(r=o.height+n.height+e.config.title.margin+e.config.subtitle.margin-10),this.setLegendWrapXY(20,r)}},{key:"legendAlignVertical",value:function(){var e=this.w,t=this.legendHelpers.getLegendDimensions(),i=0;e.config.legend.position==="left"&&(i=20),e.config.legend.position==="right"&&(i=e.globals.svgWidth-t.clww-10),this.setLegendWrapXY(i,20)}},{key:"onLegendHovered",value:function(e){var t=this.w,i=e.target.classList.contains("apexcharts-legend-series")||e.target.classList.contains("apexcharts-legend-text")||e.target.classList.contains("apexcharts-legend-marker");if(t.config.chart.type==="heatmap"||this.isBarsDistributed){if(i){var o=parseInt(e.target.getAttribute("rel"),10)-1;this.ctx.events.fireEvent("legendHover",[this.ctx,o,this.w]),new zt(this.ctx).highlightRangeInSeries(e,e.target)}}else!e.target.classList.contains("apexcharts-inactive-legend")&&i&&new zt(this.ctx).toggleSeriesOnHover(e,e.target)}},{key:"onLegendClick",value:function(e){var t=this.w;if(!t.config.legend.customLegendItems.length&&(e.target.classList.contains("apexcharts-legend-series")||e.target.classList.contains("apexcharts-legend-text")||e.target.classList.contains("apexcharts-legend-marker"))){var i=parseInt(e.target.getAttribute("rel"),10)-1,o=e.target.getAttribute("data:collapsed")==="true",n=this.w.config.chart.events.legendClick;typeof n=="function"&&n(this.ctx,i,this.w),this.ctx.events.fireEvent("legendClick",[this.ctx,i,this.w]);var r=this.w.config.legend.markers.onClick;typeof r=="function"&&e.target.classList.contains("apexcharts-legend-marker")&&(r(this.ctx,i,this.w),this.ctx.events.fireEvent("legendMarkerClick",[this.ctx,i,this.w])),t.config.chart.type!=="treemap"&&t.config.chart.type!=="heatmap"&&!this.isBarsDistributed&&t.config.legend.onItemClick.toggleDataSeries&&this.legendHelpers.toggleDataSeries(i,o)}}}]),s}(),fg=function(){function s(e){H(this,s),this.ctx=e,this.w=e.w;var t=this.w;this.ev=this.w.config.chart.events,this.selectedClass="apexcharts-selected",this.localeValues=this.w.globals.locale.toolbar,this.minX=t.globals.minX,this.maxX=t.globals.maxX}return W(s,[{key:"createToolbar",value:function(){var e=this,t=this.w,i=function(){return document.createElement("div")},o=i();if(o.setAttribute("class","apexcharts-toolbar"),o.style.top=t.config.chart.toolbar.offsetY+"px",o.style.right=3-t.config.chart.toolbar.offsetX+"px",t.globals.dom.elWrap.appendChild(o),this.elZoom=i(),this.elZoomIn=i(),this.elZoomOut=i(),this.elPan=i(),this.elSelection=i(),this.elZoomReset=i(),this.elMenuIcon=i(),this.elMenu=i(),this.elCustomIcons=[],this.t=t.config.chart.toolbar.tools,Array.isArray(this.t.customIcons))for(var n=0;n<this.t.customIcons.length;n++)this.elCustomIcons.push(i());var r=[],a=function(h,g,m){var p=h.toLowerCase();e.t[p]&&t.config.chart.zoom.enabled&&r.push({el:g,icon:typeof e.t[p]=="string"?e.t[p]:m,title:e.localeValues[h],class:"apexcharts-".concat(p,"-icon")})};a("zoomIn",this.elZoomIn,`<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
    <path d="M0 0h24v24H0z" fill="none"/>
    <path d="M13 7h-2v4H7v2h4v4h2v-4h4v-2h-4V7zm-1-5C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"/>
</svg>
`),a("zoomOut",this.elZoomOut,`<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
    <path d="M0 0h24v24H0z" fill="none"/>
    <path d="M7 11v2h10v-2H7zm5-9C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"/>
</svg>
`);var l=function(h){e.t[h]&&t.config.chart[h].enabled&&r.push({el:h==="zoom"?e.elZoom:e.elSelection,icon:typeof e.t[h]=="string"?e.t[h]:h==="zoom"?`<svg xmlns="http://www.w3.org/2000/svg" fill="#000000" height="24" viewBox="0 0 24 24" width="24">
    <path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/>
    <path d="M0 0h24v24H0V0z" fill="none"/>
    <path d="M12 10h-2v2H9v-2H7V9h2V7h1v2h2v1z"/>
</svg>`:`<svg fill="#6E8192" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">
    <path d="M0 0h24v24H0z" fill="none"/>
    <path d="M3 5h2V3c-1.1 0-2 .9-2 2zm0 8h2v-2H3v2zm4 8h2v-2H7v2zM3 9h2V7H3v2zm10-6h-2v2h2V3zm6 0v2h2c0-1.1-.9-2-2-2zM5 21v-2H3c0 1.1.9 2 2 2zm-2-4h2v-2H3v2zM9 3H7v2h2V3zm2 18h2v-2h-2v2zm8-8h2v-2h-2v2zm0 8c1.1 0 2-.9 2-2h-2v2zm0-12h2V7h-2v2zm0 8h2v-2h-2v2zm-4 4h2v-2h-2v2zm0-16h2V3h-2v2z"/>
</svg>`,title:e.localeValues[h==="zoom"?"selectionZoom":"selection"],class:t.globals.isTouchDevice?"apexcharts-element-hidden":"apexcharts-".concat(h,"-icon")})};l("zoom"),l("selection"),this.t.pan&&t.config.chart.zoom.enabled&&r.push({el:this.elPan,icon:typeof this.t.pan=="string"?this.t.pan:`<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" fill="#000000" height="24" viewBox="0 0 24 24" width="24">
    <defs>
        <path d="M0 0h24v24H0z" id="a"/>
    </defs>
    <clipPath id="b">
        <use overflow="visible" xlink:href="#a"/>
    </clipPath>
    <path clip-path="url(#b)" d="M23 5.5V20c0 2.2-1.8 4-4 4h-7.3c-1.08 0-2.1-.43-2.85-1.19L1 14.83s1.26-1.23 1.3-1.25c.22-.19.49-.29.79-.29.22 0 .42.06.6.16.04.01 4.31 2.46 4.31 2.46V4c0-.83.67-1.5 1.5-1.5S11 3.17 11 4v7h1V1.5c0-.83.67-1.5 1.5-1.5S15 .67 15 1.5V11h1V2.5c0-.83.67-1.5 1.5-1.5s1.5.67 1.5 1.5V11h1V5.5c0-.83.67-1.5 1.5-1.5s1.5.67 1.5 1.5z"/>
</svg>`,title:this.localeValues.pan,class:t.globals.isTouchDevice?"apexcharts-element-hidden":"apexcharts-pan-icon"}),a("reset",this.elZoomReset,`<svg fill="#000000" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">
    <path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/>
    <path d="M0 0h24v24H0z" fill="none"/>
</svg>`),this.t.download&&r.push({el:this.elMenuIcon,icon:typeof this.t.download=="string"?this.t.download:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/></svg>',title:this.localeValues.menu,class:"apexcharts-menu-icon"});for(var c=0;c<this.elCustomIcons.length;c++)r.push({el:this.elCustomIcons[c],icon:this.t.customIcons[c].icon,title:this.t.customIcons[c].title,index:this.t.customIcons[c].index,class:"apexcharts-toolbar-custom-icon "+this.t.customIcons[c].class});r.forEach(function(h,g){h.index&&T.moveIndexInArray(r,g,h.index)});for(var d=0;d<r.length;d++)N.setAttrs(r[d].el,{class:r[d].class,title:r[d].title}),r[d].el.innerHTML=r[d].icon,o.appendChild(r[d].el);this._createHamburgerMenu(o),t.globals.zoomEnabled?this.elZoom.classList.add(this.selectedClass):t.globals.panEnabled?this.elPan.classList.add(this.selectedClass):t.globals.selectionEnabled&&this.elSelection.classList.add(this.selectedClass),this.addToolbarEventListeners()}},{key:"_createHamburgerMenu",value:function(e){this.elMenuItems=[],e.appendChild(this.elMenu),N.setAttrs(this.elMenu,{class:"apexcharts-menu"});for(var t=[{name:"exportSVG",title:this.localeValues.exportToSVG},{name:"exportPNG",title:this.localeValues.exportToPNG},{name:"exportCSV",title:this.localeValues.exportToCSV}],i=0;i<t.length;i++)this.elMenuItems.push(document.createElement("div")),this.elMenuItems[i].innerHTML=t[i].title,N.setAttrs(this.elMenuItems[i],{class:"apexcharts-menu-item ".concat(t[i].name),title:t[i].title}),this.elMenu.appendChild(this.elMenuItems[i])}},{key:"addToolbarEventListeners",value:function(){var e=this;this.elZoomReset.addEventListener("click",this.handleZoomReset.bind(this)),this.elSelection.addEventListener("click",this.toggleZoomSelection.bind(this,"selection")),this.elZoom.addEventListener("click",this.toggleZoomSelection.bind(this,"zoom")),this.elZoomIn.addEventListener("click",this.handleZoomIn.bind(this)),this.elZoomOut.addEventListener("click",this.handleZoomOut.bind(this)),this.elPan.addEventListener("click",this.togglePanning.bind(this)),this.elMenuIcon.addEventListener("click",this.toggleMenu.bind(this)),this.elMenuItems.forEach(function(i){i.classList.contains("exportSVG")?i.addEventListener("click",e.handleDownload.bind(e,"svg")):i.classList.contains("exportPNG")?i.addEventListener("click",e.handleDownload.bind(e,"png")):i.classList.contains("exportCSV")&&i.addEventListener("click",e.handleDownload.bind(e,"csv"))});for(var t=0;t<this.t.customIcons.length;t++)this.elCustomIcons[t].addEventListener("click",this.t.customIcons[t].click.bind(this,this.ctx,this.ctx.w))}},{key:"toggleZoomSelection",value:function(e){this.ctx.getSyncedCharts().forEach(function(t){t.ctx.toolbar.toggleOtherControls();var i=e==="selection"?t.ctx.toolbar.elSelection:t.ctx.toolbar.elZoom,o=e==="selection"?"selectionEnabled":"zoomEnabled";t.w.globals[o]=!t.w.globals[o],i.classList.contains(t.ctx.toolbar.selectedClass)?i.classList.remove(t.ctx.toolbar.selectedClass):i.classList.add(t.ctx.toolbar.selectedClass)})}},{key:"getToolbarIconsReference",value:function(){var e=this.w;this.elZoom||(this.elZoom=e.globals.dom.baseEl.querySelector(".apexcharts-zoom-icon")),this.elPan||(this.elPan=e.globals.dom.baseEl.querySelector(".apexcharts-pan-icon")),this.elSelection||(this.elSelection=e.globals.dom.baseEl.querySelector(".apexcharts-selection-icon"))}},{key:"enableZoomPanFromToolbar",value:function(e){this.toggleOtherControls(),e==="pan"?this.w.globals.panEnabled=!0:this.w.globals.zoomEnabled=!0;var t=e==="pan"?this.elPan:this.elZoom,i=e==="pan"?this.elZoom:this.elPan;t&&t.classList.add(this.selectedClass),i&&i.classList.remove(this.selectedClass)}},{key:"togglePanning",value:function(){this.ctx.getSyncedCharts().forEach(function(e){e.ctx.toolbar.toggleOtherControls(),e.w.globals.panEnabled=!e.w.globals.panEnabled,e.ctx.toolbar.elPan.classList.contains(e.ctx.toolbar.selectedClass)?e.ctx.toolbar.elPan.classList.remove(e.ctx.toolbar.selectedClass):e.ctx.toolbar.elPan.classList.add(e.ctx.toolbar.selectedClass)})}},{key:"toggleOtherControls",value:function(){var e=this,t=this.w;t.globals.panEnabled=!1,t.globals.zoomEnabled=!1,t.globals.selectionEnabled=!1,this.getToolbarIconsReference(),[this.elPan,this.elSelection,this.elZoom].forEach(function(i){i&&i.classList.remove(e.selectedClass)})}},{key:"handleZoomIn",value:function(){var e=this.w;e.globals.isRangeBar&&(this.minX=e.globals.minY,this.maxX=e.globals.maxY);var t=(this.minX+this.maxX)/2,i=(this.minX+t)/2,o=(this.maxX+t)/2,n=this._getNewMinXMaxX(i,o);e.globals.disableZoomIn||this.zoomUpdateOptions(n.minX,n.maxX)}},{key:"handleZoomOut",value:function(){var e=this.w;if(e.globals.isRangeBar&&(this.minX=e.globals.minY,this.maxX=e.globals.maxY),!(e.config.xaxis.type==="datetime"&&new Date(this.minX).getUTCFullYear()<1e3)){var t=(this.minX+this.maxX)/2,i=this.minX-(t-this.minX),o=this.maxX-(t-this.maxX),n=this._getNewMinXMaxX(i,o);e.globals.disableZoomOut||this.zoomUpdateOptions(n.minX,n.maxX)}}},{key:"_getNewMinXMaxX",value:function(e,t){var i=this.w.config.xaxis.convertedCatToNumeric;return{minX:i?Math.floor(e):e,maxX:i?Math.floor(t):t}}},{key:"zoomUpdateOptions",value:function(e,t){var i=this.w;if(e!==void 0||t!==void 0){if(!(i.config.xaxis.convertedCatToNumeric&&(e<1&&(e=1,t=i.globals.dataPoints),t-e<2))){var o={min:e,max:t},n=this.getBeforeZoomRange(o);n&&(o=n.xaxis);var r={xaxis:o},a=T.clone(i.globals.initialConfig.yaxis);i.config.chart.group||(r.yaxis=a),this.w.globals.zoomed=!0,this.ctx.updateHelpers._updateOptions(r,!1,this.w.config.chart.animations.dynamicAnimation.enabled),this.zoomCallback(o,a)}}else this.handleZoomReset()}},{key:"zoomCallback",value:function(e,t){typeof this.ev.zoomed=="function"&&this.ev.zoomed(this.ctx,{xaxis:e,yaxis:t})}},{key:"getBeforeZoomRange",value:function(e,t){var i=null;return typeof this.ev.beforeZoom=="function"&&(i=this.ev.beforeZoom(this,{xaxis:e,yaxis:t})),i}},{key:"toggleMenu",value:function(){var e=this;window.setTimeout(function(){e.elMenu.classList.contains("apexcharts-menu-open")?e.elMenu.classList.remove("apexcharts-menu-open"):e.elMenu.classList.add("apexcharts-menu-open")},0)}},{key:"handleDownload",value:function(e){var t=this.w,i=new xr(this.ctx);switch(e){case"svg":i.exportToSVG(this.ctx);break;case"png":i.exportToPng(this.ctx);break;case"csv":i.exportToCSV({series:t.config.series,columnDelimiter:t.config.chart.toolbar.export.csv.columnDelimiter})}}},{key:"handleZoomReset",value:function(e){this.ctx.getSyncedCharts().forEach(function(t){var i=t.w;if(i.globals.lastXAxis.min=i.globals.initialConfig.xaxis.min,i.globals.lastXAxis.max=i.globals.initialConfig.xaxis.max,t.updateHelpers.revertDefaultAxisMinMax(),typeof i.config.chart.events.beforeResetZoom=="function"){var o=i.config.chart.events.beforeResetZoom(t,i);o&&t.updateHelpers.revertDefaultAxisMinMax(o)}typeof i.config.chart.events.zoomed=="function"&&t.ctx.toolbar.zoomCallback({min:i.config.xaxis.min,max:i.config.xaxis.max}),i.globals.zoomed=!1;var n=t.ctx.series.emptyCollapsedSeries(T.clone(i.globals.initialSeries));t.updateHelpers._updateSeries(n,i.config.chart.animations.dynamicAnimation.enabled)})}},{key:"destroy",value:function(){this.elZoom=null,this.elZoomIn=null,this.elZoomOut=null,this.elPan=null,this.elSelection=null,this.elZoomReset=null,this.elMenuIcon=null}}]),s}(),Ow=function(s){ts(t,fg);var e=is(t);function t(i){var o;return H(this,t),(o=e.call(this,i)).ctx=i,o.w=i.w,o.dragged=!1,o.graphics=new N(o.ctx),o.eventList=["mousedown","mouseleave","mousemove","touchstart","touchmove","mouseup","touchend"],o.clientX=0,o.clientY=0,o.startX=0,o.endX=0,o.dragX=0,o.startY=0,o.endY=0,o.dragY=0,o.moveDirection="none",o}return W(t,[{key:"init",value:function(i){var o=this,n=i.xyRatios,r=this.w,a=this;this.xyRatios=n,this.zoomRect=this.graphics.drawRect(0,0,0,0),this.selectionRect=this.graphics.drawRect(0,0,0,0),this.gridRect=r.globals.dom.baseEl.querySelector(".apexcharts-grid"),this.zoomRect.node.classList.add("apexcharts-zoom-rect"),this.selectionRect.node.classList.add("apexcharts-selection-rect"),r.globals.dom.elGraphical.add(this.zoomRect),r.globals.dom.elGraphical.add(this.selectionRect),r.config.chart.selection.type==="x"?this.slDraggableRect=this.selectionRect.draggable({minX:0,minY:0,maxX:r.globals.gridWidth,maxY:r.globals.gridHeight}).on("dragmove",this.selectionDragging.bind(this,"dragging")):r.config.chart.selection.type==="y"?this.slDraggableRect=this.selectionRect.draggable({minX:0,maxX:r.globals.gridWidth}).on("dragmove",this.selectionDragging.bind(this,"dragging")):this.slDraggableRect=this.selectionRect.draggable().on("dragmove",this.selectionDragging.bind(this,"dragging")),this.preselectedSelection(),this.hoverArea=r.globals.dom.baseEl.querySelector("".concat(r.globals.chartClass," .apexcharts-svg")),this.hoverArea.classList.add("apexcharts-zoomable"),this.eventList.forEach(function(l){o.hoverArea.addEventListener(l,a.svgMouseEvents.bind(a,n),{capture:!1,passive:!0})})}},{key:"destroy",value:function(){this.slDraggableRect&&(this.slDraggableRect.draggable(!1),this.slDraggableRect.off(),this.selectionRect.off()),this.selectionRect=null,this.zoomRect=null,this.gridRect=null}},{key:"svgMouseEvents",value:function(i,o){var n=this.w,r=this,a=this.ctx.toolbar,l=n.globals.zoomEnabled?n.config.chart.zoom.type:n.config.chart.selection.type,c=n.config.chart.toolbar.autoSelected;if(o.shiftKey?(this.shiftWasPressed=!0,a.enableZoomPanFromToolbar(c==="pan"?"zoom":"pan")):this.shiftWasPressed&&(a.enableZoomPanFromToolbar(c),this.shiftWasPressed=!1),o.target){var d,h=o.target.classList;if(o.target.parentNode&&o.target.parentNode!==null&&(d=o.target.parentNode.classList),!(h.contains("apexcharts-selection-rect")||h.contains("apexcharts-legend-marker")||h.contains("apexcharts-legend-text")||d&&d.contains("apexcharts-toolbar"))){if(r.clientX=o.type==="touchmove"||o.type==="touchstart"?o.touches[0].clientX:o.type==="touchend"?o.changedTouches[0].clientX:o.clientX,r.clientY=o.type==="touchmove"||o.type==="touchstart"?o.touches[0].clientY:o.type==="touchend"?o.changedTouches[0].clientY:o.clientY,o.type==="mousedown"&&o.which===1){var g=r.gridRect.getBoundingClientRect();r.startX=r.clientX-g.left,r.startY=r.clientY-g.top,r.dragged=!1,r.w.globals.mousedown=!0}if((o.type==="mousemove"&&o.which===1||o.type==="touchmove")&&(r.dragged=!0,n.globals.panEnabled?(n.globals.selection=null,r.w.globals.mousedown&&r.panDragging({context:r,zoomtype:l,xyRatios:i})):(r.w.globals.mousedown&&n.globals.zoomEnabled||r.w.globals.mousedown&&n.globals.selectionEnabled)&&(r.selection=r.selectionDrawing({context:r,zoomtype:l}))),o.type==="mouseup"||o.type==="touchend"||o.type==="mouseleave"){var m,p=(m=r.gridRect)===null||m===void 0?void 0:m.getBoundingClientRect();p&&r.w.globals.mousedown&&(r.endX=r.clientX-p.left,r.endY=r.clientY-p.top,r.dragX=Math.abs(r.endX-r.startX),r.dragY=Math.abs(r.endY-r.startY),(n.globals.zoomEnabled||n.globals.selectionEnabled)&&r.selectionDrawn({context:r,zoomtype:l}),n.globals.panEnabled&&n.config.xaxis.convertedCatToNumeric&&r.delayedPanScrolled()),n.globals.zoomEnabled&&r.hideSelectionRect(this.selectionRect),r.dragged=!1,r.w.globals.mousedown=!1}this.makeSelectionRectDraggable()}}}},{key:"makeSelectionRectDraggable",value:function(){var i=this.w;if(this.selectionRect){var o=this.selectionRect.node.getBoundingClientRect();o.width>0&&o.height>0&&this.slDraggableRect.selectize({points:"l, r",pointSize:8,pointType:"rect"}).resize({constraint:{minX:0,minY:0,maxX:i.globals.gridWidth,maxY:i.globals.gridHeight}}).on("resizing",this.selectionDragging.bind(this,"resizing"))}}},{key:"preselectedSelection",value:function(){var i=this.w,o=this.xyRatios;if(!i.globals.zoomEnabled){if(i.globals.selection!==void 0&&i.globals.selection!==null)this.drawSelectionRect(i.globals.selection);else if(i.config.chart.selection.xaxis.min!==void 0&&i.config.chart.selection.xaxis.max!==void 0){var n=(i.config.chart.selection.xaxis.min-i.globals.minX)/o.xRatio,r=i.globals.gridWidth-(i.globals.maxX-i.config.chart.selection.xaxis.max)/o.xRatio-n;i.globals.isRangeBar&&(n=(i.config.chart.selection.xaxis.min-i.globals.yAxisScale[0].niceMin)/o.invertedYRatio,r=(i.config.chart.selection.xaxis.max-i.config.chart.selection.xaxis.min)/o.invertedYRatio);var a={x:n,y:0,width:r,height:i.globals.gridHeight,translateX:0,translateY:0,selectionEnabled:!0};this.drawSelectionRect(a),this.makeSelectionRectDraggable(),typeof i.config.chart.events.selection=="function"&&i.config.chart.events.selection(this.ctx,{xaxis:{min:i.config.chart.selection.xaxis.min,max:i.config.chart.selection.xaxis.max},yaxis:{}})}}}},{key:"drawSelectionRect",value:function(i){var o=i.x,n=i.y,r=i.width,a=i.height,l=i.translateX,c=l===void 0?0:l,d=i.translateY,h=d===void 0?0:d,g=this.w,m=this.zoomRect,p=this.selectionRect;if(this.dragged||g.globals.selection!==null){var b={transform:"translate("+c+", "+h+")"};g.globals.zoomEnabled&&this.dragged&&(r<0&&(r=1),m.attr({x:o,y:n,width:r,height:a,fill:g.config.chart.zoom.zoomedArea.fill.color,"fill-opacity":g.config.chart.zoom.zoomedArea.fill.opacity,stroke:g.config.chart.zoom.zoomedArea.stroke.color,"stroke-width":g.config.chart.zoom.zoomedArea.stroke.width,"stroke-opacity":g.config.chart.zoom.zoomedArea.stroke.opacity}),N.setAttrs(m.node,b)),g.globals.selectionEnabled&&(p.attr({x:o,y:n,width:r>0?r:0,height:a>0?a:0,fill:g.config.chart.selection.fill.color,"fill-opacity":g.config.chart.selection.fill.opacity,stroke:g.config.chart.selection.stroke.color,"stroke-width":g.config.chart.selection.stroke.width,"stroke-dasharray":g.config.chart.selection.stroke.dashArray,"stroke-opacity":g.config.chart.selection.stroke.opacity}),N.setAttrs(p.node,b))}}},{key:"hideSelectionRect",value:function(i){i&&i.attr({x:0,y:0,width:0,height:0})}},{key:"selectionDrawing",value:function(i){var o=i.context,n=i.zoomtype,r=this.w,a=o,l=this.gridRect.getBoundingClientRect(),c=a.startX-1,d=a.startY,h=!1,g=!1,m=a.clientX-l.left-c,p=a.clientY-l.top-d,b={};return Math.abs(m+c)>r.globals.gridWidth?m=r.globals.gridWidth-c:a.clientX-l.left<0&&(m=c),c>a.clientX-l.left&&(h=!0,m=Math.abs(m)),d>a.clientY-l.top&&(g=!0,p=Math.abs(p)),b=n==="x"?{x:h?c-m:c,y:0,width:m,height:r.globals.gridHeight}:n==="y"?{x:0,y:g?d-p:d,width:r.globals.gridWidth,height:p}:{x:h?c-m:c,y:g?d-p:d,width:m,height:p},a.drawSelectionRect(b),a.selectionDragging("resizing"),b}},{key:"selectionDragging",value:function(i,o){var n=this,r=this.w,a=this.xyRatios,l=this.selectionRect,c=0;i==="resizing"&&(c=30);var d=function(g){return parseFloat(l.node.getAttribute(g))},h={x:d("x"),y:d("y"),width:d("width"),height:d("height")};r.globals.selection=h,typeof r.config.chart.events.selection=="function"&&r.globals.selectionEnabled&&(clearTimeout(this.w.globals.selectionResizeTimer),this.w.globals.selectionResizeTimer=window.setTimeout(function(){var g,m,p,b,k=n.gridRect.getBoundingClientRect(),v=l.node.getBoundingClientRect();r.globals.isRangeBar?(g=r.globals.yAxisScale[0].niceMin+(v.left-k.left)*a.invertedYRatio,m=r.globals.yAxisScale[0].niceMin+(v.right-k.left)*a.invertedYRatio,p=0,b=1):(g=r.globals.xAxisScale.niceMin+(v.left-k.left)*a.xRatio,m=r.globals.xAxisScale.niceMin+(v.right-k.left)*a.xRatio,p=r.globals.yAxisScale[0].niceMin+(k.bottom-v.bottom)*a.yRatio[0],b=r.globals.yAxisScale[0].niceMax-(v.top-k.top)*a.yRatio[0]);var x={xaxis:{min:g,max:m},yaxis:{min:p,max:b}};r.config.chart.events.selection(n.ctx,x),r.config.chart.brush.enabled&&r.config.chart.events.brushScrolled!==void 0&&r.config.chart.events.brushScrolled(n.ctx,x)},c))}},{key:"selectionDrawn",value:function(i){var o=i.context,n=i.zoomtype,r=this.w,a=o,l=this.xyRatios,c=this.ctx.toolbar;if(a.startX>a.endX){var d=a.startX;a.startX=a.endX,a.endX=d}if(a.startY>a.endY){var h=a.startY;a.startY=a.endY,a.endY=h}var g=void 0,m=void 0;r.globals.isRangeBar?(g=r.globals.yAxisScale[0].niceMin+a.startX*l.invertedYRatio,m=r.globals.yAxisScale[0].niceMin+a.endX*l.invertedYRatio):(g=r.globals.xAxisScale.niceMin+a.startX*l.xRatio,m=r.globals.xAxisScale.niceMin+a.endX*l.xRatio);var p=[],b=[];if(r.config.yaxis.forEach(function(y,_){var C=r.globals.seriesYAxisMap[_][0];p.push(r.globals.yAxisScale[_].niceMax-l.yRatio[C]*a.startY),b.push(r.globals.yAxisScale[_].niceMax-l.yRatio[C]*a.endY)}),a.dragged&&(a.dragX>10||a.dragY>10)&&g!==m){if(r.globals.zoomEnabled){var k=T.clone(r.globals.initialConfig.yaxis),v=T.clone(r.globals.initialConfig.xaxis);if(r.globals.zoomed=!0,r.config.xaxis.convertedCatToNumeric&&(g=Math.floor(g),m=Math.floor(m),g<1&&(g=1,m=r.globals.dataPoints),m-g<2&&(m=g+1)),n!=="xy"&&n!=="x"||(v={min:g,max:m}),n!=="xy"&&n!=="y"||k.forEach(function(y,_){k[_].min=b[_],k[_].max=p[_]}),c){var x=c.getBeforeZoomRange(v,k);x&&(v=x.xaxis?x.xaxis:v,k=x.yaxis?x.yaxis:k)}var u={xaxis:v};r.config.chart.group||(u.yaxis=k),a.ctx.updateHelpers._updateOptions(u,!1,a.w.config.chart.animations.dynamicAnimation.enabled),typeof r.config.chart.events.zoomed=="function"&&c.zoomCallback(v,k)}else if(r.globals.selectionEnabled){var f,w=null;f={min:g,max:m},n!=="xy"&&n!=="y"||(w=T.clone(r.config.yaxis)).forEach(function(y,_){w[_].min=b[_],w[_].max=p[_]}),r.globals.selection=a.selection,typeof r.config.chart.events.selection=="function"&&r.config.chart.events.selection(a.ctx,{xaxis:f,yaxis:w})}}}},{key:"panDragging",value:function(i){var o=i.context,n=this.w,r=o;if(n.globals.lastClientPosition.x!==void 0){var a=n.globals.lastClientPosition.x-r.clientX,l=n.globals.lastClientPosition.y-r.clientY;Math.abs(a)>Math.abs(l)&&a>0?this.moveDirection="left":Math.abs(a)>Math.abs(l)&&a<0?this.moveDirection="right":Math.abs(l)>Math.abs(a)&&l>0?this.moveDirection="up":Math.abs(l)>Math.abs(a)&&l<0&&(this.moveDirection="down")}n.globals.lastClientPosition={x:r.clientX,y:r.clientY};var c=n.globals.isRangeBar?n.globals.minY:n.globals.minX,d=n.globals.isRangeBar?n.globals.maxY:n.globals.maxX;n.config.xaxis.convertedCatToNumeric||r.panScrolled(c,d)}},{key:"delayedPanScrolled",value:function(){var i=this.w,o=i.globals.minX,n=i.globals.maxX,r=(i.globals.maxX-i.globals.minX)/2;this.moveDirection==="left"?(o=i.globals.minX+r,n=i.globals.maxX+r):this.moveDirection==="right"&&(o=i.globals.minX-r,n=i.globals.maxX-r),o=Math.floor(o),n=Math.floor(n),this.updateScrolledChart({xaxis:{min:o,max:n}},o,n)}},{key:"panScrolled",value:function(i,o){var n=this.w,r=this.xyRatios,a=T.clone(n.globals.initialConfig.yaxis),l=r.xRatio,c=n.globals.minX,d=n.globals.maxX;n.globals.isRangeBar&&(l=r.invertedYRatio,c=n.globals.minY,d=n.globals.maxY),this.moveDirection==="left"?(i=c+n.globals.gridWidth/15*l,o=d+n.globals.gridWidth/15*l):this.moveDirection==="right"&&(i=c-n.globals.gridWidth/15*l,o=d-n.globals.gridWidth/15*l),n.globals.isRangeBar||(i<n.globals.initialMinX||o>n.globals.initialMaxX)&&(i=c,o=d);var h={xaxis:{min:i,max:o}};n.config.chart.group||(h.yaxis=a),this.updateScrolledChart(h,i,o)}},{key:"updateScrolledChart",value:function(i,o,n){var r=this.w;this.ctx.updateHelpers._updateOptions(i,!1,!1),typeof r.config.chart.events.scrolled=="function"&&r.config.chart.events.scrolled(this.ctx,{xaxis:{min:o,max:n}})}}]),t}(),pg=function(){function s(e){H(this,s),this.w=e.w,this.ttCtx=e,this.ctx=e.ctx}return W(s,[{key:"getNearestValues",value:function(e){var t=e.hoverArea,i=e.elGrid,o=e.clientX,n=e.clientY,r=this.w,a=i.getBoundingClientRect(),l=a.width,c=a.height,d=l/(r.globals.dataPoints-1),h=c/r.globals.dataPoints,g=this.hasBars();!r.globals.comboCharts&&!g||r.config.xaxis.convertedCatToNumeric||(d=l/r.globals.dataPoints);var m=o-a.left-r.globals.barPadForNumericAxis,p=n-a.top;m<0||p<0||m>l||p>c?(t.classList.remove("hovering-zoom"),t.classList.remove("hovering-pan")):r.globals.zoomEnabled?(t.classList.remove("hovering-pan"),t.classList.add("hovering-zoom")):r.globals.panEnabled&&(t.classList.remove("hovering-zoom"),t.classList.add("hovering-pan"));var b=Math.round(m/d),k=Math.floor(p/h);g&&!r.config.xaxis.convertedCatToNumeric&&(b=Math.ceil(m/d),b-=1);var v=null,x=null,u=r.globals.seriesXvalues.map(function(C){return C.filter(function(A){return T.isNumber(A)})}),f=r.globals.seriesYvalues.map(function(C){return C.filter(function(A){return T.isNumber(A)})});if(r.globals.isXNumeric){var w=this.ttCtx.getElGrid().getBoundingClientRect(),y=m*(w.width/l),_=p*(w.height/c);v=(x=this.closestInMultiArray(y,_,u,f)).index,b=x.j,v!==null&&(u=r.globals.seriesXvalues[v],b=(x=this.closestInArray(y,u)).index)}return r.globals.capturedSeriesIndex=v===null?-1:v,(!b||b<1)&&(b=0),r.globals.isBarHorizontal?r.globals.capturedDataPointIndex=k:r.globals.capturedDataPointIndex=b,{capturedSeries:v,j:r.globals.isBarHorizontal?k:b,hoverX:m,hoverY:p}}},{key:"closestInMultiArray",value:function(e,t,i,o){var n=this.w,r=0,a=null,l=-1;n.globals.series.length>1?r=this.getFirstActiveXArray(i):a=0;var c=i[r][0],d=Math.abs(e-c);if(i.forEach(function(m){m.forEach(function(p,b){var k=Math.abs(e-p);k<=d&&(d=k,l=b)})}),l!==-1){var h=o[r][l],g=Math.abs(t-h);a=r,o.forEach(function(m,p){var b=Math.abs(t-m[l]);b<=g&&(g=b,a=p)})}return{index:a,j:l}}},{key:"getFirstActiveXArray",value:function(e){for(var t=this.w,i=0,o=e.map(function(r,a){return r.length>0?a:-1}),n=0;n<o.length;n++)if(o[n]!==-1&&t.globals.collapsedSeriesIndices.indexOf(n)===-1&&t.globals.ancillaryCollapsedSeriesIndices.indexOf(n)===-1){i=o[n];break}return i}},{key:"closestInArray",value:function(e,t){for(var i=t[0],o=null,n=Math.abs(e-i),r=0;r<t.length;r++){var a=Math.abs(e-t[r]);a<n&&(n=a,o=r)}return{index:o}}},{key:"isXoverlap",value:function(e){var t=[],i=this.w.globals.seriesX.filter(function(n){return n[0]!==void 0});if(i.length>0)for(var o=0;o<i.length-1;o++)i[o][e]!==void 0&&i[o+1][e]!==void 0&&i[o][e]!==i[o+1][e]&&t.push("unEqual");return t.length===0}},{key:"isInitialSeriesSameLen",value:function(){for(var e=!0,t=this.w.globals.initialSeries,i=0;i<t.length-1;i++)if(t[i].data.length!==t[i+1].data.length){e=!1;break}return e}},{key:"getBarsHeight",value:function(e){return at(e).reduce(function(t,i){return t+i.getBBox().height},0)}},{key:"getElMarkers",value:function(e){return typeof e=="number"?this.w.globals.dom.baseEl.querySelectorAll(".apexcharts-series[data\\:realIndex='".concat(e,"'] .apexcharts-series-markers-wrap > *")):this.w.globals.dom.baseEl.querySelectorAll(".apexcharts-series-markers-wrap > *")}},{key:"getAllMarkers",value:function(){var e=this.w.globals.dom.baseEl.querySelectorAll(".apexcharts-series-markers-wrap");(e=at(e)).sort(function(i,o){var n=Number(i.getAttribute("data:realIndex")),r=Number(o.getAttribute("data:realIndex"));return r<n?1:r>n?-1:0});var t=[];return e.forEach(function(i){t.push(i.querySelector(".apexcharts-marker"))}),t}},{key:"hasMarkers",value:function(e){return this.getElMarkers(e).length>0}},{key:"getPathFromPoint",value:function(e,t){var i=Number(e.getAttribute("cx")),o=Number(e.getAttribute("cy")),n=e.getAttribute("shape");return new N(this.ctx).getMarkerPath(i,o,n,t)}},{key:"getElBars",value:function(){return this.w.globals.dom.baseEl.querySelectorAll(".apexcharts-bar-series,  .apexcharts-candlestick-series, .apexcharts-boxPlot-series, .apexcharts-rangebar-series")}},{key:"hasBars",value:function(){return this.getElBars().length>0}},{key:"getHoverMarkerSize",value:function(e){var t=this.w,i=t.config.markers.hover.size;return i===void 0&&(i=t.globals.markers.size[e]+t.config.markers.hover.sizeOffset),i}},{key:"toggleAllTooltipSeriesGroups",value:function(e){var t=this.w,i=this.ttCtx;i.allTooltipSeriesGroups.length===0&&(i.allTooltipSeriesGroups=t.globals.dom.baseEl.querySelectorAll(".apexcharts-tooltip-series-group"));for(var o=i.allTooltipSeriesGroups,n=0;n<o.length;n++)e==="enable"?(o[n].classList.add("apexcharts-active"),o[n].style.display=t.config.tooltip.items.display):(o[n].classList.remove("apexcharts-active"),o[n].style.display="none")}}]),s}(),Hw=function(){function s(e){H(this,s),this.w=e.w,this.ctx=e.ctx,this.ttCtx=e,this.tooltipUtil=new pg(e)}return W(s,[{key:"drawSeriesTexts",value:function(e){var t=e.shared,i=t===void 0||t,o=e.ttItems,n=e.i,r=n===void 0?0:n,a=e.j,l=a===void 0?null:a,c=e.y1,d=e.y2,h=e.e,g=this.w;g.config.tooltip.custom!==void 0?this.handleCustomTooltip({i:r,j:l,y1:c,y2:d,w:g}):this.toggleActiveInactiveSeries(i,r);var m=this.getValuesToPrint({i:r,j:l});this.printLabels({i:r,j:l,values:m,ttItems:o,shared:i,e:h});var p=this.ttCtx.getElTooltip();this.ttCtx.tooltipRect.ttWidth=p.getBoundingClientRect().width,this.ttCtx.tooltipRect.ttHeight=p.getBoundingClientRect().height}},{key:"printLabels",value:function(e){var t,i=this,o=e.i,n=e.j,r=e.values,a=e.ttItems,l=e.shared,c=e.e,d=this.w,h=[],g=function(w){return d.globals.seriesGoals[w]&&d.globals.seriesGoals[w][n]&&Array.isArray(d.globals.seriesGoals[w][n])},m=r.xVal,p=r.zVal,b=r.xAxisTTVal,k="",v=d.globals.colors[o];n!==null&&d.config.plotOptions.bar.distributed&&(v=d.globals.colors[n]);for(var x=function(w,y){var _=i.getFormatters(o);k=i.getSeriesName({fn:_.yLbTitleFormatter,index:o,seriesIndex:o,j:n}),d.config.chart.type==="treemap"&&(k=_.yLbTitleFormatter(String(d.config.series[o].data[n].x),{series:d.globals.series,seriesIndex:o,dataPointIndex:n,w:d}));var C=d.config.tooltip.inverseOrder?y:w;if(d.globals.axisCharts){var A=function(L){var I,R,z,U;return d.globals.isRangeData?_.yLbFormatter((I=d.globals.seriesRangeStart)===null||I===void 0||(R=I[L])===null||R===void 0?void 0:R[n],{series:d.globals.seriesRangeStart,seriesIndex:L,dataPointIndex:n,w:d})+" - "+_.yLbFormatter((z=d.globals.seriesRangeEnd)===null||z===void 0||(U=z[L])===null||U===void 0?void 0:U[n],{series:d.globals.seriesRangeEnd,seriesIndex:L,dataPointIndex:n,w:d}):_.yLbFormatter(d.globals.series[L][n],{series:d.globals.series,seriesIndex:L,dataPointIndex:n,w:d})};if(l)_=i.getFormatters(C),k=i.getSeriesName({fn:_.yLbTitleFormatter,index:C,seriesIndex:o,j:n}),v=d.globals.colors[C],t=A(C),g(C)&&(h=d.globals.seriesGoals[C][n].map(function(L){return{attrs:L,val:_.yLbFormatter(L.value,{seriesIndex:C,dataPointIndex:n,w:d})}}));else{var S,P=c==null||(S=c.target)===null||S===void 0?void 0:S.getAttribute("fill");P&&(v=P.indexOf("url")!==-1?document.querySelector(P.substr(4).slice(0,-1)).childNodes[0].getAttribute("stroke"):P),t=A(o),g(o)&&Array.isArray(d.globals.seriesGoals[o][n])&&(h=d.globals.seriesGoals[o][n].map(function(L){return{attrs:L,val:_.yLbFormatter(L.value,{seriesIndex:o,dataPointIndex:n,w:d})}}))}}n===null&&(t=_.yLbFormatter(d.globals.series[o],F(F({},d),{},{seriesIndex:o,dataPointIndex:o}))),i.DOMHandling({i:o,t:C,j:n,ttItems:a,values:{val:t,goalVals:h,xVal:m,xAxisTTVal:b,zVal:p},seriesName:k,shared:l,pColor:v})},u=0,f=d.globals.series.length-1;u<d.globals.series.length;u++,f--)x(u,f)}},{key:"getFormatters",value:function(e){var t,i=this.w,o=i.globals.yLabelFormatters[e];return i.globals.ttVal!==void 0?Array.isArray(i.globals.ttVal)?(o=i.globals.ttVal[e]&&i.globals.ttVal[e].formatter,t=i.globals.ttVal[e]&&i.globals.ttVal[e].title&&i.globals.ttVal[e].title.formatter):(o=i.globals.ttVal.formatter,typeof i.globals.ttVal.title.formatter=="function"&&(t=i.globals.ttVal.title.formatter)):t=i.config.tooltip.y.title.formatter,typeof o!="function"&&(o=i.globals.yLabelFormatters[0]?i.globals.yLabelFormatters[0]:function(n){return n}),typeof t!="function"&&(t=function(n){return n}),{yLbFormatter:o,yLbTitleFormatter:t}}},{key:"getSeriesName",value:function(e){var t=e.fn,i=e.index,o=e.seriesIndex,n=e.j,r=this.w;return t(String(r.globals.seriesNames[i]),{series:r.globals.series,seriesIndex:o,dataPointIndex:n,w:r})}},{key:"DOMHandling",value:function(e){e.i;var t=e.t,i=e.j,o=e.ttItems,n=e.values,r=e.seriesName,a=e.shared,l=e.pColor,c=this.w,d=this.ttCtx,h=n.val,g=n.goalVals,m=n.xVal,p=n.xAxisTTVal,b=n.zVal,k=null;k=o[t].children,c.config.tooltip.fillSeriesColor&&(o[t].style.backgroundColor=l,k[0].style.display="none"),d.showTooltipTitle&&(d.tooltipTitle===null&&(d.tooltipTitle=c.globals.dom.baseEl.querySelector(".apexcharts-tooltip-title")),d.tooltipTitle.innerHTML=m),d.isXAxisTooltipEnabled&&(d.xaxisTooltipText.innerHTML=p!==""?p:m);var v=o[t].querySelector(".apexcharts-tooltip-text-y-label");v&&(v.innerHTML=r||"");var x=o[t].querySelector(".apexcharts-tooltip-text-y-value");x&&(x.innerHTML=h!==void 0?h:""),k[0]&&k[0].classList.contains("apexcharts-tooltip-marker")&&(c.config.tooltip.marker.fillColors&&Array.isArray(c.config.tooltip.marker.fillColors)&&(l=c.config.tooltip.marker.fillColors[t]),k[0].style.backgroundColor=l),c.config.tooltip.marker.show||(k[0].style.display="none");var u=o[t].querySelector(".apexcharts-tooltip-text-goals-label"),f=o[t].querySelector(".apexcharts-tooltip-text-goals-value");if(g.length&&c.globals.seriesGoals[t]){var w=function(){var C="<div >",A="<div>";g.forEach(function(S,P){C+=' <div style="display: flex"><span class="apexcharts-tooltip-marker" style="background-color: '.concat(S.attrs.strokeColor,'; height: 3px; border-radius: 0; top: 5px;"></span> ').concat(S.attrs.name,"</div>"),A+="<div>".concat(S.val,"</div>")}),u.innerHTML=C+"</div>",f.innerHTML=A+"</div>"};a?c.globals.seriesGoals[t][i]&&Array.isArray(c.globals.seriesGoals[t][i])?w():(u.innerHTML="",f.innerHTML=""):w()}else u.innerHTML="",f.innerHTML="";if(b!==null&&(o[t].querySelector(".apexcharts-tooltip-text-z-label").innerHTML=c.config.tooltip.z.title,o[t].querySelector(".apexcharts-tooltip-text-z-value").innerHTML=b!==void 0?b:""),a&&k[0]){if(c.config.tooltip.hideEmptySeries){var y=o[t].querySelector(".apexcharts-tooltip-marker"),_=o[t].querySelector(".apexcharts-tooltip-text");parseFloat(h)==0?(y.style.display="none",_.style.display="none"):(y.style.display="block",_.style.display="block")}h==null||c.globals.ancillaryCollapsedSeriesIndices.indexOf(t)>-1||c.globals.collapsedSeriesIndices.indexOf(t)>-1||Array.isArray(d.tConfig.enabledOnSeries)&&d.tConfig.enabledOnSeries.indexOf(t)===-1?k[0].parentNode.style.display="none":k[0].parentNode.style.display=c.config.tooltip.items.display}else Array.isArray(d.tConfig.enabledOnSeries)&&d.tConfig.enabledOnSeries.indexOf(t)===-1&&(k[0].parentNode.style.display="none")}},{key:"toggleActiveInactiveSeries",value:function(e,t){var i=this.w;if(e)this.tooltipUtil.toggleAllTooltipSeriesGroups("enable");else{this.tooltipUtil.toggleAllTooltipSeriesGroups("disable");var o=i.globals.dom.baseEl.querySelector(".apexcharts-tooltip-series-group-".concat(t));o&&(o.classList.add("apexcharts-active"),o.style.display=i.config.tooltip.items.display)}}},{key:"getValuesToPrint",value:function(e){var t=e.i,i=e.j,o=this.w,n=this.ctx.series.filteredSeriesX(),r="",a="",l=null,c=null,d={series:o.globals.series,seriesIndex:t,dataPointIndex:i,w:o},h=o.globals.ttZFormatter;i===null?c=o.globals.series[t]:o.globals.isXNumeric&&o.config.chart.type!=="treemap"?(r=n[t][i],n[t].length===0&&(r=n[this.tooltipUtil.getFirstActiveXArray(n)][i])):r=o.globals.labels[i]!==void 0?o.globals.labels[i]:"";var g=r;return o.globals.isXNumeric&&o.config.xaxis.type==="datetime"?r=new os(this.ctx).xLabelFormat(o.globals.ttKeyFormatter,g,g,{i:void 0,dateFormatter:new Qe(this.ctx).formatDate,w:this.w}):r=o.globals.isBarHorizontal?o.globals.yLabelFormatters[0](g,d):o.globals.xLabelFormatter(g,d),o.config.tooltip.x.formatter!==void 0&&(r=o.globals.ttKeyFormatter(g,d)),o.globals.seriesZ.length>0&&o.globals.seriesZ[t].length>0&&(l=h(o.globals.seriesZ[t][i],o)),a=typeof o.config.xaxis.tooltip.formatter=="function"?o.globals.xaxisTooltipFormatter(g,d):r,{val:Array.isArray(c)?c.join(" "):c,xVal:Array.isArray(r)?r.join(" "):r,xAxisTTVal:Array.isArray(a)?a.join(" "):a,zVal:l}}},{key:"handleCustomTooltip",value:function(e){var t=e.i,i=e.j,o=e.y1,n=e.y2,r=e.w,a=this.ttCtx.getElTooltip(),l=r.config.tooltip.custom;Array.isArray(l)&&l[t]&&(l=l[t]),a.innerHTML=l({ctx:this.ctx,series:r.globals.series,seriesIndex:t,dataPointIndex:i,y1:o,y2:n,w:r})}}]),s}(),bg=function(){function s(e){H(this,s),this.ttCtx=e,this.ctx=e.ctx,this.w=e.w}return W(s,[{key:"moveXCrosshairs",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,i=this.ttCtx,o=this.w,n=i.getElXCrosshairs(),r=e-i.xcrosshairsWidth/2,a=o.globals.labels.slice().length;if(t!==null&&(r=o.globals.gridWidth/a*t),n===null||o.globals.isBarHorizontal||(n.setAttribute("x",r),n.setAttribute("x1",r),n.setAttribute("x2",r),n.setAttribute("y2",o.globals.gridHeight),n.classList.add("apexcharts-active")),r<0&&(r=0),r>o.globals.gridWidth&&(r=o.globals.gridWidth),i.isXAxisTooltipEnabled){var l=r;o.config.xaxis.crosshairs.width!=="tickWidth"&&o.config.xaxis.crosshairs.width!=="barWidth"||(l=r+i.xcrosshairsWidth/2),this.moveXAxisTooltip(l)}}},{key:"moveYCrosshairs",value:function(e){var t=this.ttCtx;t.ycrosshairs!==null&&N.setAttrs(t.ycrosshairs,{y1:e,y2:e}),t.ycrosshairsHidden!==null&&N.setAttrs(t.ycrosshairsHidden,{y1:e,y2:e})}},{key:"moveXAxisTooltip",value:function(e){var t=this.w,i=this.ttCtx;if(i.xaxisTooltip!==null&&i.xcrosshairsWidth!==0){i.xaxisTooltip.classList.add("apexcharts-active");var o=i.xaxisOffY+t.config.xaxis.tooltip.offsetY+t.globals.translateY+1+t.config.xaxis.offsetY;if(e-=i.xaxisTooltip.getBoundingClientRect().width/2,!isNaN(e)){e+=t.globals.translateX;var n;n=new N(this.ctx).getTextRects(i.xaxisTooltipText.innerHTML),i.xaxisTooltipText.style.minWidth=n.width+"px",i.xaxisTooltip.style.left=e+"px",i.xaxisTooltip.style.top=o+"px"}}}},{key:"moveYAxisTooltip",value:function(e){var t=this.w,i=this.ttCtx;i.yaxisTTEls===null&&(i.yaxisTTEls=t.globals.dom.baseEl.querySelectorAll(".apexcharts-yaxistooltip"));var o=parseInt(i.ycrosshairsHidden.getAttribute("y1"),10),n=t.globals.translateY+o,r=i.yaxisTTEls[e].getBoundingClientRect().height,a=t.globals.translateYAxisX[e]-2;t.config.yaxis[e].opposite&&(a-=26),n-=r/2,t.globals.ignoreYAxisIndexes.indexOf(e)===-1?(i.yaxisTTEls[e].classList.add("apexcharts-active"),i.yaxisTTEls[e].style.top=n+"px",i.yaxisTTEls[e].style.left=a+t.config.yaxis[e].tooltip.offsetX+"px"):i.yaxisTTEls[e].classList.remove("apexcharts-active")}},{key:"moveTooltip",value:function(e,t){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,o=this.w,n=this.ttCtx,r=n.getElTooltip(),a=n.tooltipRect,l=i!==null?parseFloat(i):1,c=parseFloat(e)+l+5,d=parseFloat(t)+l/2;if(c>o.globals.gridWidth/2&&(c=c-a.ttWidth-l-10),c>o.globals.gridWidth-a.ttWidth-10&&(c=o.globals.gridWidth-a.ttWidth),c<-20&&(c=-20),o.config.tooltip.followCursor){var h=n.getElGrid().getBoundingClientRect();(c=n.e.clientX-h.left)>o.globals.gridWidth/2&&(c-=n.tooltipRect.ttWidth),(d=n.e.clientY+o.globals.translateY-h.top)>o.globals.gridHeight/2&&(d-=n.tooltipRect.ttHeight)}else o.globals.isBarHorizontal||a.ttHeight/2+d>o.globals.gridHeight&&(d=o.globals.gridHeight-a.ttHeight+o.globals.translateY);isNaN(c)||(c+=o.globals.translateX,r.style.left=c+"px",r.style.top=d+"px")}},{key:"moveMarkers",value:function(e,t){var i=this.w,o=this.ttCtx;if(i.globals.markers.size[e]>0)for(var n=i.globals.dom.baseEl.querySelectorAll(" .apexcharts-series[data\\:realIndex='".concat(e,"'] .apexcharts-marker")),r=0;r<n.length;r++)parseInt(n[r].getAttribute("rel"),10)===t&&(o.marker.resetPointsSize(),o.marker.enlargeCurrentPoint(t,n[r]));else o.marker.resetPointsSize(),this.moveDynamicPointOnHover(t,e)}},{key:"moveDynamicPointOnHover",value:function(e,t){var i,o,n,r,a=this.w,l=this.ttCtx,c=new N(this.ctx),d=a.globals.pointsArray,h=l.tooltipUtil.getHoverMarkerSize(t),g=a.config.series[t].type;if(!g||g!=="column"&&g!=="candlestick"&&g!=="boxPlot"){n=(i=d[t][e])===null||i===void 0?void 0:i[0],r=((o=d[t][e])===null||o===void 0?void 0:o[1])||0;var m=a.globals.dom.baseEl.querySelector(".apexcharts-series[data\\:realIndex='".concat(t,"'] .apexcharts-series-markers path"));if(m&&r<a.globals.gridHeight&&r>0){var p=m.getAttribute("shape"),b=c.getMarkerPath(n,r,p,1.5*h);m.setAttribute("d",b)}this.moveXCrosshairs(n),l.fixedTooltip||this.moveTooltip(n,r,h)}}},{key:"moveDynamicPointsOnHover",value:function(e){var t,i=this.ttCtx,o=i.w,n=0,r=0,a=o.globals.pointsArray,l=new zt(this.ctx),c=new N(this.ctx);t=l.getActiveConfigSeriesIndex("asc",["line","area","scatter","bubble"]);var d=i.tooltipUtil.getHoverMarkerSize(t);a[t]&&(n=a[t][e][0],r=a[t][e][1]);var h=i.tooltipUtil.getAllMarkers();if(h!==null)for(var g=0;g<o.globals.series.length;g++){var m=a[g];if(o.globals.comboCharts&&m===void 0&&h.splice(g,0,null),m&&m.length){var p=a[g][e][1],b=void 0;h[g].setAttribute("cx",n);var k=h[g].getAttribute("shape");if(o.config.chart.type==="rangeArea"&&!o.globals.comboCharts){var v=e+o.globals.series[g].length;b=a[g][v][1],p-=Math.abs(p-b)/2}if(p!==null&&!isNaN(p)&&p<o.globals.gridHeight+d&&p+d>0){var x=c.getMarkerPath(n,p,k,d);h[g].setAttribute("d",x)}else h[g].setAttribute("d","")}}this.moveXCrosshairs(n),i.fixedTooltip||this.moveTooltip(n,r||o.globals.gridHeight,d)}},{key:"moveStickyTooltipOverBars",value:function(e,t){var i=this.w,o=this.ttCtx,n=i.globals.columnSeries?i.globals.columnSeries.length:i.globals.series.length,r=n>=2&&n%2==0?Math.floor(n/2):Math.floor(n/2)+1;i.globals.isBarHorizontal&&(r=new zt(this.ctx).getActiveConfigSeriesIndex("desc")+1);var a=i.globals.dom.baseEl.querySelector(".apexcharts-bar-series .apexcharts-series[rel='".concat(r,"'] path[j='").concat(e,"'], .apexcharts-candlestick-series .apexcharts-series[rel='").concat(r,"'] path[j='").concat(e,"'], .apexcharts-boxPlot-series .apexcharts-series[rel='").concat(r,"'] path[j='").concat(e,"'], .apexcharts-rangebar-series .apexcharts-series[rel='").concat(r,"'] path[j='").concat(e,"']"));a||typeof t!="number"||(a=i.globals.dom.baseEl.querySelector(".apexcharts-bar-series .apexcharts-series[data\\:realIndex='".concat(t,"'] path[j='").concat(e,`'],
        .apexcharts-candlestick-series .apexcharts-series[data\\:realIndex='`).concat(t,"'] path[j='").concat(e,`'],
        .apexcharts-boxPlot-series .apexcharts-series[data\\:realIndex='`).concat(t,"'] path[j='").concat(e,`'],
        .apexcharts-rangebar-series .apexcharts-series[data\\:realIndex='`).concat(t,"'] path[j='").concat(e,"']")));var l=a?parseFloat(a.getAttribute("cx")):0,c=a?parseFloat(a.getAttribute("cy")):0,d=a?parseFloat(a.getAttribute("barWidth")):0,h=o.getElGrid().getBoundingClientRect(),g=a&&(a.classList.contains("apexcharts-candlestick-area")||a.classList.contains("apexcharts-boxPlot-area"));i.globals.isXNumeric?(a&&!g&&(l-=n%2!=0?d/2:0),a&&g&&i.globals.comboCharts&&(l-=d/2)):i.globals.isBarHorizontal||(l=o.xAxisTicksPositions[e-1]+o.dataPointsDividedWidth/2,isNaN(l)&&(l=o.xAxisTicksPositions[e]-o.dataPointsDividedWidth/2)),i.globals.isBarHorizontal?c-=o.tooltipRect.ttHeight:i.config.tooltip.followCursor?c=o.e.clientY-h.top-o.tooltipRect.ttHeight/2:c+o.tooltipRect.ttHeight+15>i.globals.gridHeight&&(c=i.globals.gridHeight),i.globals.isBarHorizontal||this.moveXCrosshairs(l),o.fixedTooltip||this.moveTooltip(l,c||i.globals.gridHeight)}}]),s}(),Ww=function(){function s(e){H(this,s),this.w=e.w,this.ttCtx=e,this.ctx=e.ctx,this.tooltipPosition=new bg(e)}return W(s,[{key:"drawDynamicPoints",value:function(){var e=this.w,t=new N(this.ctx),i=new Zo(this.ctx),o=e.globals.dom.baseEl.querySelectorAll(".apexcharts-series");o=at(o),e.config.chart.stacked&&o.sort(function(h,g){return parseFloat(h.getAttribute("data:realIndex"))-parseFloat(g.getAttribute("data:realIndex"))});for(var n=0;n<o.length;n++){var r=o[n].querySelector(".apexcharts-series-markers-wrap");if(r!==null){var a=void 0,l="apexcharts-marker w".concat((Math.random()+1).toString(36).substring(4));e.config.chart.type!=="line"&&e.config.chart.type!=="area"||e.globals.comboCharts||e.config.tooltip.intersect||(l+=" no-pointer-events");var c=i.getMarkerConfig({cssClass:l,seriesIndex:Number(r.getAttribute("data:realIndex"))});(a=t.drawMarker(0,0,c)).node.setAttribute("default-marker-size",0);var d=document.createElementNS(e.globals.SVGNS,"g");d.classList.add("apexcharts-series-markers"),d.appendChild(a.node),r.appendChild(d)}}}},{key:"enlargeCurrentPoint",value:function(e,t){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,n=this.w;n.config.chart.type!=="bubble"&&this.newPointSize(e,t);var r=t.getAttribute("cx"),a=t.getAttribute("cy");if(i!==null&&o!==null&&(r=i,a=o),this.tooltipPosition.moveXCrosshairs(r),!this.fixedTooltip){if(n.config.chart.type==="radar"){var l=this.ttCtx.getElGrid().getBoundingClientRect();r=this.ttCtx.e.clientX-l.left}this.tooltipPosition.moveTooltip(r,a,n.config.markers.hover.size)}}},{key:"enlargePoints",value:function(e){for(var t=this.w,i=this,o=this.ttCtx,n=e,r=t.globals.dom.baseEl.querySelectorAll(".apexcharts-series:not(.apexcharts-series-collapsed) .apexcharts-marker"),a=t.config.markers.hover.size,l=0;l<r.length;l++){var c=r[l].getAttribute("rel"),d=r[l].getAttribute("index");if(a===void 0&&(a=t.globals.markers.size[d]+t.config.markers.hover.sizeOffset),n===parseInt(c,10)){i.newPointSize(n,r[l]);var h=r[l].getAttribute("cx"),g=r[l].getAttribute("cy");i.tooltipPosition.moveXCrosshairs(h),o.fixedTooltip||i.tooltipPosition.moveTooltip(h,g,a)}else i.oldPointSize(r[l])}}},{key:"newPointSize",value:function(e,t){var i=this.w,o=i.config.markers.hover.size,n=e===0?t.parentNode.firstChild:t.parentNode.lastChild;if(n.getAttribute("default-marker-size")!=="0"){var r=parseInt(n.getAttribute("index"),10);o===void 0&&(o=i.globals.markers.size[r]+i.config.markers.hover.sizeOffset),o<0&&(o=0);var a=this.ttCtx.tooltipUtil.getPathFromPoint(t,o);t.setAttribute("d",a)}}},{key:"oldPointSize",value:function(e){var t=parseFloat(e.getAttribute("default-marker-size")),i=this.ttCtx.tooltipUtil.getPathFromPoint(e,t);e.setAttribute("d",i)}},{key:"resetPointsSize",value:function(){for(var e=this.w.globals.dom.baseEl.querySelectorAll(".apexcharts-series:not(.apexcharts-series-collapsed) .apexcharts-marker"),t=0;t<e.length;t++){var i=parseFloat(e[t].getAttribute("default-marker-size"));if(T.isNumber(i)&&i>=0){var o=this.ttCtx.tooltipUtil.getPathFromPoint(e[t],i);e[t].setAttribute("d",o)}else e[t].setAttribute("d","M0,0")}}}]),s}(),jw=function(){function s(e){H(this,s),this.w=e.w;var t=this.w;this.ttCtx=e,this.isVerticalGroupedRangeBar=!t.globals.isBarHorizontal&&t.config.chart.type==="rangeBar"&&t.config.plotOptions.bar.rangeBarGroupRows}return W(s,[{key:"getAttr",value:function(e,t){return parseFloat(e.target.getAttribute(t))}},{key:"handleHeatTreeTooltip",value:function(e){var t=e.e,i=e.opt,o=e.x,n=e.y,r=e.type,a=this.ttCtx,l=this.w;if(t.target.classList.contains("apexcharts-".concat(r,"-rect"))){var c=this.getAttr(t,"i"),d=this.getAttr(t,"j"),h=this.getAttr(t,"cx"),g=this.getAttr(t,"cy"),m=this.getAttr(t,"width"),p=this.getAttr(t,"height");if(a.tooltipLabels.drawSeriesTexts({ttItems:i.ttItems,i:c,j:d,shared:!1,e:t}),l.globals.capturedSeriesIndex=c,l.globals.capturedDataPointIndex=d,o=h+a.tooltipRect.ttWidth/2+m,n=g+a.tooltipRect.ttHeight/2-p/2,a.tooltipPosition.moveXCrosshairs(h+m/2),o>l.globals.gridWidth/2&&(o=h-a.tooltipRect.ttWidth/2+m),a.w.config.tooltip.followCursor){var b=l.globals.dom.elWrap.getBoundingClientRect();o=l.globals.clientX-b.left-(o>l.globals.gridWidth/2?a.tooltipRect.ttWidth:0),n=l.globals.clientY-b.top-(n>l.globals.gridHeight/2?a.tooltipRect.ttHeight:0)}}return{x:o,y:n}}},{key:"handleMarkerTooltip",value:function(e){var t,i,o=e.e,n=e.opt,r=e.x,a=e.y,l=this.w,c=this.ttCtx;if(o.target.classList.contains("apexcharts-marker")){var d=parseInt(n.paths.getAttribute("cx"),10),h=parseInt(n.paths.getAttribute("cy"),10),g=parseFloat(n.paths.getAttribute("val"));if(i=parseInt(n.paths.getAttribute("rel"),10),t=parseInt(n.paths.parentNode.parentNode.parentNode.getAttribute("rel"),10)-1,c.intersect){var m=T.findAncestor(n.paths,"apexcharts-series");m&&(t=parseInt(m.getAttribute("data:realIndex"),10))}if(c.tooltipLabels.drawSeriesTexts({ttItems:n.ttItems,i:t,j:i,shared:!c.showOnIntersect&&l.config.tooltip.shared,e:o}),o.type==="mouseup"&&c.markerClick(o,t,i),l.globals.capturedSeriesIndex=t,l.globals.capturedDataPointIndex=i,r=d,a=h+l.globals.translateY-1.4*c.tooltipRect.ttHeight,c.w.config.tooltip.followCursor){var p=c.getElGrid().getBoundingClientRect();a=c.e.clientY+l.globals.translateY-p.top}g<0&&(a=h),c.marker.enlargeCurrentPoint(i,n.paths,r,a)}return{x:r,y:a}}},{key:"handleBarTooltip",value:function(e){var t,i,o=e.e,n=e.opt,r=this.w,a=this.ttCtx,l=a.getElTooltip(),c=0,d=0,h=0,g=this.getBarTooltipXY({e:o,opt:n});t=g.i,g.barHeight;var m=g.j;r.globals.capturedSeriesIndex=t,r.globals.capturedDataPointIndex=m,r.globals.isBarHorizontal&&a.tooltipUtil.hasBars()||!r.config.tooltip.shared?(d=g.x,h=g.y,i=Array.isArray(r.config.stroke.width)?r.config.stroke.width[t]:r.config.stroke.width,c=d):r.globals.comboCharts||r.config.tooltip.shared||(c/=2),isNaN(h)&&(h=r.globals.svgHeight-a.tooltipRect.ttHeight);var p=parseInt(n.paths.parentNode.getAttribute("data:realIndex"),10);if(r.globals.isMultipleYAxis?r.config.yaxis[p]&&r.config.yaxis[p].reversed:r.config.yaxis[0].reversed,d+a.tooltipRect.ttWidth>r.globals.gridWidth?d-=a.tooltipRect.ttWidth:d<0&&(d=0),a.w.config.tooltip.followCursor){var b=a.getElGrid().getBoundingClientRect();h=a.e.clientY-b.top}a.tooltip===null&&(a.tooltip=r.globals.dom.baseEl.querySelector(".apexcharts-tooltip")),r.config.tooltip.shared||(r.globals.comboBarCount>0?a.tooltipPosition.moveXCrosshairs(c+i/2):a.tooltipPosition.moveXCrosshairs(c)),!a.fixedTooltip&&(!r.config.tooltip.shared||r.globals.isBarHorizontal&&a.tooltipUtil.hasBars())&&(h=h+r.globals.translateY-a.tooltipRect.ttHeight/2,l.style.left=d+r.globals.translateX+"px",l.style.top=h+"px")}},{key:"getBarTooltipXY",value:function(e){var t=this,i=e.e,o=e.opt,n=this.w,r=null,a=this.ttCtx,l=0,c=0,d=0,h=0,g=0,m=i.target.classList;if(m.contains("apexcharts-bar-area")||m.contains("apexcharts-candlestick-area")||m.contains("apexcharts-boxPlot-area")||m.contains("apexcharts-rangebar-area")){var p=i.target,b=p.getBoundingClientRect(),k=o.elGrid.getBoundingClientRect(),v=b.height;g=b.height;var x=b.width,u=parseInt(p.getAttribute("cx"),10),f=parseInt(p.getAttribute("cy"),10);h=parseFloat(p.getAttribute("barWidth"));var w=i.type==="touchmove"?i.touches[0].clientX:i.clientX;r=parseInt(p.getAttribute("j"),10),l=parseInt(p.parentNode.getAttribute("rel"),10)-1;var y=p.getAttribute("data-range-y1"),_=p.getAttribute("data-range-y2");n.globals.comboCharts&&(l=parseInt(p.parentNode.getAttribute("data:realIndex"),10));var C=function(S){return n.globals.isXNumeric?u-x/2:t.isVerticalGroupedRangeBar?u+x/2:u-a.dataPointsDividedWidth+x/2},A=function(){return f-a.dataPointsDividedHeight+v/2-a.tooltipRect.ttHeight/2};a.tooltipLabels.drawSeriesTexts({ttItems:o.ttItems,i:l,j:r,y1:y?parseInt(y,10):null,y2:_?parseInt(_,10):null,shared:!a.showOnIntersect&&n.config.tooltip.shared,e:i}),n.config.tooltip.followCursor?n.globals.isBarHorizontal?(c=w-k.left+15,d=A()):(c=C(),d=i.clientY-k.top-a.tooltipRect.ttHeight/2-15):n.globals.isBarHorizontal?((c=u)<a.xyRatios.baseLineInvertedY&&(c=u-a.tooltipRect.ttWidth),d=A()):(c=C(),d=f)}return{x:c,y:d,barHeight:g,barWidth:h,i:l,j:r}}}]),s}(),Uw=function(){function s(e){H(this,s),this.w=e.w,this.ttCtx=e}return W(s,[{key:"drawXaxisTooltip",value:function(){var e=this.w,t=this.ttCtx,i=e.config.xaxis.position==="bottom";t.xaxisOffY=i?e.globals.gridHeight+1:-e.globals.xAxisHeight-e.config.xaxis.axisTicks.height+3;var o=i?"apexcharts-xaxistooltip apexcharts-xaxistooltip-bottom":"apexcharts-xaxistooltip apexcharts-xaxistooltip-top",n=e.globals.dom.elWrap;t.isXAxisTooltipEnabled&&e.globals.dom.baseEl.querySelector(".apexcharts-xaxistooltip")===null&&(t.xaxisTooltip=document.createElement("div"),t.xaxisTooltip.setAttribute("class",o+" apexcharts-theme-"+e.config.tooltip.theme),n.appendChild(t.xaxisTooltip),t.xaxisTooltipText=document.createElement("div"),t.xaxisTooltipText.classList.add("apexcharts-xaxistooltip-text"),t.xaxisTooltipText.style.fontFamily=e.config.xaxis.tooltip.style.fontFamily||e.config.chart.fontFamily,t.xaxisTooltipText.style.fontSize=e.config.xaxis.tooltip.style.fontSize,t.xaxisTooltip.appendChild(t.xaxisTooltipText))}},{key:"drawYaxisTooltip",value:function(){for(var e=this.w,t=this.ttCtx,i=0;i<e.config.yaxis.length;i++){var o=e.config.yaxis[i].opposite||e.config.yaxis[i].crosshairs.opposite;t.yaxisOffX=o?e.globals.gridWidth+1:1;var n="apexcharts-yaxistooltip apexcharts-yaxistooltip-".concat(i,o?" apexcharts-yaxistooltip-right":" apexcharts-yaxistooltip-left"),r=e.globals.dom.elWrap;e.globals.dom.baseEl.querySelector(".apexcharts-yaxistooltip apexcharts-yaxistooltip-".concat(i))===null&&(t.yaxisTooltip=document.createElement("div"),t.yaxisTooltip.setAttribute("class",n+" apexcharts-theme-"+e.config.tooltip.theme),r.appendChild(t.yaxisTooltip),i===0&&(t.yaxisTooltipText=[]),t.yaxisTooltipText[i]=document.createElement("div"),t.yaxisTooltipText[i].classList.add("apexcharts-yaxistooltip-text"),t.yaxisTooltip.appendChild(t.yaxisTooltipText[i]))}}},{key:"setXCrosshairWidth",value:function(){var e=this.w,t=this.ttCtx,i=t.getElXCrosshairs();if(t.xcrosshairsWidth=parseInt(e.config.xaxis.crosshairs.width,10),e.globals.comboCharts){var o=e.globals.dom.baseEl.querySelector(".apexcharts-bar-area");if(o!==null&&e.config.xaxis.crosshairs.width==="barWidth"){var n=parseFloat(o.getAttribute("barWidth"));t.xcrosshairsWidth=n}else if(e.config.xaxis.crosshairs.width==="tickWidth"){var r=e.globals.labels.length;t.xcrosshairsWidth=e.globals.gridWidth/r}}else if(e.config.xaxis.crosshairs.width==="tickWidth"){var a=e.globals.labels.length;t.xcrosshairsWidth=e.globals.gridWidth/a}else if(e.config.xaxis.crosshairs.width==="barWidth"){var l=e.globals.dom.baseEl.querySelector(".apexcharts-bar-area");if(l!==null){var c=parseFloat(l.getAttribute("barWidth"));t.xcrosshairsWidth=c}else t.xcrosshairsWidth=1}e.globals.isBarHorizontal&&(t.xcrosshairsWidth=0),i!==null&&t.xcrosshairsWidth>0&&i.setAttribute("width",t.xcrosshairsWidth)}},{key:"handleYCrosshair",value:function(){var e=this.w,t=this.ttCtx;t.ycrosshairs=e.globals.dom.baseEl.querySelector(".apexcharts-ycrosshairs"),t.ycrosshairsHidden=e.globals.dom.baseEl.querySelector(".apexcharts-ycrosshairs-hidden")}},{key:"drawYaxisTooltipText",value:function(e,t,i){var o=this.ttCtx,n=this.w,r=n.globals,a=r.seriesYAxisMap[e];if(o.yaxisTooltips[e]&&a.length>0){var l=r.yLabelFormatters[e],c=o.getElGrid().getBoundingClientRect(),d=a[0],h=0;i.yRatio.length>1&&(h=d);var g=(t-c.top)*i.yRatio[h],m=r.maxYArr[d]-r.minYArr[d],p=r.minYArr[d]+(m-g);n.config.yaxis[e].reversed&&(p=r.maxYArr[d]-(m-g)),o.tooltipPosition.moveYCrosshairs(t-c.top),o.yaxisTooltipText[e].innerHTML=l(p),o.tooltipPosition.moveYAxisTooltip(e)}}}]),s}(),tg=function(){function s(e){H(this,s),this.ctx=e,this.w=e.w;var t=this.w;this.tConfig=t.config.tooltip,this.tooltipUtil=new pg(this),this.tooltipLabels=new Hw(this),this.tooltipPosition=new bg(this),this.marker=new Ww(this),this.intersect=new jw(this),this.axesTooltip=new Uw(this),this.showOnIntersect=this.tConfig.intersect,this.showTooltipTitle=this.tConfig.x.show,this.fixedTooltip=this.tConfig.fixed.enabled,this.xaxisTooltip=null,this.yaxisTTEls=null,this.isBarShared=!t.globals.isBarHorizontal&&this.tConfig.shared,this.lastHoverTime=Date.now()}return W(s,[{key:"getElTooltip",value:function(e){return e||(e=this),e.w.globals.dom.baseEl?e.w.globals.dom.baseEl.querySelector(".apexcharts-tooltip"):null}},{key:"getElXCrosshairs",value:function(){return this.w.globals.dom.baseEl.querySelector(".apexcharts-xcrosshairs")}},{key:"getElGrid",value:function(){return this.w.globals.dom.baseEl.querySelector(".apexcharts-grid")}},{key:"drawTooltip",value:function(e){var t=this.w;this.xyRatios=e,this.isXAxisTooltipEnabled=t.config.xaxis.tooltip.enabled&&t.globals.axisCharts,this.yaxisTooltips=t.config.yaxis.map(function(r,a){return!!(r.show&&r.tooltip.enabled&&t.globals.axisCharts)}),this.allTooltipSeriesGroups=[],t.globals.axisCharts||(this.showTooltipTitle=!1);var i=document.createElement("div");if(i.classList.add("apexcharts-tooltip"),t.config.tooltip.cssClass&&i.classList.add(t.config.tooltip.cssClass),i.classList.add("apexcharts-theme-".concat(this.tConfig.theme)),t.globals.dom.elWrap.appendChild(i),t.globals.axisCharts){this.axesTooltip.drawXaxisTooltip(),this.axesTooltip.drawYaxisTooltip(),this.axesTooltip.setXCrosshairWidth(),this.axesTooltip.handleYCrosshair();var o=new es(this.ctx);this.xAxisTicksPositions=o.getXAxisTicksPositions()}if(!t.globals.comboCharts&&!this.tConfig.intersect&&t.config.chart.type!=="rangeBar"||this.tConfig.shared||(this.showOnIntersect=!0),t.config.markers.size!==0&&t.globals.markers.largestSize!==0||this.marker.drawDynamicPoints(this),t.globals.collapsedSeries.length!==t.globals.series.length){this.dataPointsDividedHeight=t.globals.gridHeight/t.globals.dataPoints,this.dataPointsDividedWidth=t.globals.gridWidth/t.globals.dataPoints,this.showTooltipTitle&&(this.tooltipTitle=document.createElement("div"),this.tooltipTitle.classList.add("apexcharts-tooltip-title"),this.tooltipTitle.style.fontFamily=this.tConfig.style.fontFamily||t.config.chart.fontFamily,this.tooltipTitle.style.fontSize=this.tConfig.style.fontSize,i.appendChild(this.tooltipTitle));var n=t.globals.series.length;(t.globals.xyCharts||t.globals.comboCharts)&&this.tConfig.shared&&(n=this.showOnIntersect?1:t.globals.series.length),this.legendLabels=t.globals.dom.baseEl.querySelectorAll(".apexcharts-legend-text"),this.ttItems=this.createTTElements(n),this.addSVGEvents()}}},{key:"createTTElements",value:function(e){for(var t=this,i=this.w,o=[],n=this.getElTooltip(),r=function(l){var c=document.createElement("div");c.classList.add("apexcharts-tooltip-series-group","apexcharts-tooltip-series-group-".concat(l)),c.style.order=i.config.tooltip.inverseOrder?e-l:l+1;var d=document.createElement("span");d.classList.add("apexcharts-tooltip-marker"),d.style.backgroundColor=i.globals.colors[l],c.appendChild(d);var h=document.createElement("div");h.classList.add("apexcharts-tooltip-text"),h.style.fontFamily=t.tConfig.style.fontFamily||i.config.chart.fontFamily,h.style.fontSize=t.tConfig.style.fontSize,["y","goals","z"].forEach(function(g){var m=document.createElement("div");m.classList.add("apexcharts-tooltip-".concat(g,"-group"));var p=document.createElement("span");p.classList.add("apexcharts-tooltip-text-".concat(g,"-label")),m.appendChild(p);var b=document.createElement("span");b.classList.add("apexcharts-tooltip-text-".concat(g,"-value")),m.appendChild(b),h.appendChild(m)}),c.appendChild(h),n.appendChild(c),o.push(c)},a=0;a<e;a++)r(a);return o}},{key:"addSVGEvents",value:function(){var e=this.w,t=e.config.chart.type,i=this.getElTooltip(),o=!(t!=="bar"&&t!=="candlestick"&&t!=="boxPlot"&&t!=="rangeBar"),n=t==="area"||t==="line"||t==="scatter"||t==="bubble"||t==="radar",r=e.globals.dom.Paper.node,a=this.getElGrid();a&&(this.seriesBound=a.getBoundingClientRect());var l,c=[],d=[],h={hoverArea:r,elGrid:a,tooltipEl:i,tooltipY:c,tooltipX:d,ttItems:this.ttItems};if(e.globals.axisCharts&&(n?l=e.globals.dom.baseEl.querySelectorAll(".apexcharts-series[data\\:longestSeries='true'] .apexcharts-marker"):o?l=e.globals.dom.baseEl.querySelectorAll(".apexcharts-series .apexcharts-bar-area, .apexcharts-series .apexcharts-candlestick-area, .apexcharts-series .apexcharts-boxPlot-area, .apexcharts-series .apexcharts-rangebar-area"):t!=="heatmap"&&t!=="treemap"||(l=e.globals.dom.baseEl.querySelectorAll(".apexcharts-series .apexcharts-heatmap, .apexcharts-series .apexcharts-treemap")),l&&l.length))for(var g=0;g<l.length;g++)c.push(l[g].getAttribute("cy")),d.push(l[g].getAttribute("cx"));if(e.globals.xyCharts&&!this.showOnIntersect||e.globals.comboCharts&&!this.showOnIntersect||o&&this.tooltipUtil.hasBars()&&this.tConfig.shared)this.addPathsEventListeners([r],h);else if(o&&!e.globals.comboCharts||n&&this.showOnIntersect)this.addDatapointEventsListeners(h);else if(!e.globals.axisCharts||t==="heatmap"||t==="treemap"){var m=e.globals.dom.baseEl.querySelectorAll(".apexcharts-series");this.addPathsEventListeners(m,h)}if(this.showOnIntersect){var p=e.globals.dom.baseEl.querySelectorAll(".apexcharts-line-series .apexcharts-marker, .apexcharts-area-series .apexcharts-marker");p.length>0&&this.addPathsEventListeners(p,h),this.tooltipUtil.hasBars()&&!this.tConfig.shared&&this.addDatapointEventsListeners(h)}}},{key:"drawFixedTooltipRect",value:function(){var e=this.w,t=this.getElTooltip(),i=t.getBoundingClientRect(),o=i.width+10,n=i.height+10,r=this.tConfig.fixed.offsetX,a=this.tConfig.fixed.offsetY,l=this.tConfig.fixed.position.toLowerCase();return l.indexOf("right")>-1&&(r=r+e.globals.svgWidth-o+10),l.indexOf("bottom")>-1&&(a=a+e.globals.svgHeight-n-10),t.style.left=r+"px",t.style.top=a+"px",{x:r,y:a,ttWidth:o,ttHeight:n}}},{key:"addDatapointEventsListeners",value:function(e){var t=this.w.globals.dom.baseEl.querySelectorAll(".apexcharts-series-markers .apexcharts-marker, .apexcharts-bar-area, .apexcharts-candlestick-area, .apexcharts-boxPlot-area, .apexcharts-rangebar-area");this.addPathsEventListeners(t,e)}},{key:"addPathsEventListeners",value:function(e,t){for(var i=this,o=function(r){var a={paths:e[r],tooltipEl:t.tooltipEl,tooltipY:t.tooltipY,tooltipX:t.tooltipX,elGrid:t.elGrid,hoverArea:t.hoverArea,ttItems:t.ttItems};["mousemove","mouseup","touchmove","mouseout","touchend"].map(function(l){return e[r].addEventListener(l,i.onSeriesHover.bind(i,a),{capture:!1,passive:!0})})},n=0;n<e.length;n++)o(n)}},{key:"onSeriesHover",value:function(e,t){var i=this,o=Date.now()-this.lastHoverTime;o>=100?this.seriesHover(e,t):(clearTimeout(this.seriesHoverTimeout),this.seriesHoverTimeout=setTimeout(function(){i.seriesHover(e,t)},100-o))}},{key:"seriesHover",value:function(e,t){var i=this;this.lastHoverTime=Date.now();var o=[],n=this.w;n.config.chart.group&&(o=this.ctx.getGroupedCharts()),n.globals.axisCharts&&(n.globals.minX===-1/0&&n.globals.maxX===1/0||n.globals.dataPoints===0)||(o.length?o.forEach(function(r){var a=i.getElTooltip(r),l={paths:e.paths,tooltipEl:a,tooltipY:e.tooltipY,tooltipX:e.tooltipX,elGrid:e.elGrid,hoverArea:e.hoverArea,ttItems:r.w.globals.tooltip.ttItems};r.w.globals.minX===i.w.globals.minX&&r.w.globals.maxX===i.w.globals.maxX&&r.w.globals.tooltip.seriesHoverByContext({chartCtx:r,ttCtx:r.w.globals.tooltip,opt:l,e:t})}):this.seriesHoverByContext({chartCtx:this.ctx,ttCtx:this.w.globals.tooltip,opt:e,e:t}))}},{key:"seriesHoverByContext",value:function(e){var t=e.chartCtx,i=e.ttCtx,o=e.opt,n=e.e,r=t.w,a=this.getElTooltip();a&&(i.tooltipRect={x:0,y:0,ttWidth:a.getBoundingClientRect().width,ttHeight:a.getBoundingClientRect().height},i.e=n,i.tooltipUtil.hasBars()&&!r.globals.comboCharts&&!i.isBarShared&&this.tConfig.onDatasetHover.highlightDataSeries&&new zt(t).toggleSeriesOnHover(n,n.target.parentNode),i.fixedTooltip&&i.drawFixedTooltipRect(),r.globals.axisCharts?i.axisChartsTooltips({e:n,opt:o,tooltipRect:i.tooltipRect}):i.nonAxisChartsTooltips({e:n,opt:o,tooltipRect:i.tooltipRect}))}},{key:"axisChartsTooltips",value:function(e){var t,i,o=e.e,n=e.opt,r=this.w,a=n.elGrid.getBoundingClientRect(),l=o.type==="touchmove"?o.touches[0].clientX:o.clientX,c=o.type==="touchmove"?o.touches[0].clientY:o.clientY;if(this.clientY=c,this.clientX=l,r.globals.capturedSeriesIndex=-1,r.globals.capturedDataPointIndex=-1,c<a.top||c>a.top+a.height)this.handleMouseOut(n);else{if(Array.isArray(this.tConfig.enabledOnSeries)&&!r.config.tooltip.shared){var d=parseInt(n.paths.getAttribute("index"),10);if(this.tConfig.enabledOnSeries.indexOf(d)<0)return void this.handleMouseOut(n)}var h=this.getElTooltip(),g=this.getElXCrosshairs(),m=r.globals.xyCharts||r.config.chart.type==="bar"&&!r.globals.isBarHorizontal&&this.tooltipUtil.hasBars()&&this.tConfig.shared||r.globals.comboCharts&&this.tooltipUtil.hasBars();if(o.type==="mousemove"||o.type==="touchmove"||o.type==="mouseup"){if(r.globals.collapsedSeries.length+r.globals.ancillaryCollapsedSeries.length===r.globals.series.length)return;g!==null&&g.classList.add("apexcharts-active");var p=this.yaxisTooltips.filter(function(v){return v===!0});if(this.ycrosshairs!==null&&p.length&&this.ycrosshairs.classList.add("apexcharts-active"),m&&!this.showOnIntersect)this.handleStickyTooltip(o,l,c,n);else if(r.config.chart.type==="heatmap"||r.config.chart.type==="treemap"){var b=this.intersect.handleHeatTreeTooltip({e:o,opt:n,x:t,y:i,type:r.config.chart.type});t=b.x,i=b.y,h.style.left=t+"px",h.style.top=i+"px"}else this.tooltipUtil.hasBars()&&this.intersect.handleBarTooltip({e:o,opt:n}),this.tooltipUtil.hasMarkers()&&this.intersect.handleMarkerTooltip({e:o,opt:n,x:t,y:i});if(this.yaxisTooltips.length)for(var k=0;k<r.config.yaxis.length;k++)this.axesTooltip.drawYaxisTooltipText(k,c,this.xyRatios);r.globals.dom.baseEl.classList.add("apexcharts-tooltip-active"),n.tooltipEl.classList.add("apexcharts-active")}else o.type!=="mouseout"&&o.type!=="touchend"||this.handleMouseOut(n)}}},{key:"nonAxisChartsTooltips",value:function(e){var t=e.e,i=e.opt,o=e.tooltipRect,n=this.w,r=i.paths.getAttribute("rel"),a=this.getElTooltip(),l=n.globals.dom.elWrap.getBoundingClientRect();if(t.type==="mousemove"||t.type==="touchmove"){n.globals.dom.baseEl.classList.add("apexcharts-tooltip-active"),a.classList.add("apexcharts-active"),this.tooltipLabels.drawSeriesTexts({ttItems:i.ttItems,i:parseInt(r,10)-1,shared:!1});var c=n.globals.clientX-l.left-o.ttWidth/2,d=n.globals.clientY-l.top-o.ttHeight-10;if(a.style.left=c+"px",a.style.top=d+"px",n.config.legend.tooltipHoverFormatter){var h=r-1,g=(0,n.config.legend.tooltipHoverFormatter)(this.legendLabels[h].getAttribute("data:default-text"),{seriesIndex:h,dataPointIndex:h,w:n});this.legendLabels[h].innerHTML=g}}else t.type!=="mouseout"&&t.type!=="touchend"||(a.classList.remove("apexcharts-active"),n.globals.dom.baseEl.classList.remove("apexcharts-tooltip-active"),n.config.legend.tooltipHoverFormatter&&this.legendLabels.forEach(function(m){var p=m.getAttribute("data:default-text");m.innerHTML=decodeURIComponent(p)}))}},{key:"handleStickyTooltip",value:function(e,t,i,o){var n=this.w,r=this.tooltipUtil.getNearestValues({context:this,hoverArea:o.hoverArea,elGrid:o.elGrid,clientX:t,clientY:i}),a=r.j,l=r.capturedSeries;n.globals.collapsedSeriesIndices.includes(l)&&(l=null);var c=o.elGrid.getBoundingClientRect();if(r.hoverX<0||r.hoverX>c.width)this.handleMouseOut(o);else if(l!==null)this.handleStickyCapturedSeries(e,l,o,a);else if(this.tooltipUtil.isXoverlap(a)||n.globals.isBarHorizontal){var d=n.globals.series.findIndex(function(h,g){return!n.globals.collapsedSeriesIndices.includes(g)});this.create(e,this,d,a,o.ttItems)}}},{key:"handleStickyCapturedSeries",value:function(e,t,i,o){var n=this.w;if(!this.tConfig.shared&&n.globals.series[t][o]===null)return void this.handleMouseOut(i);if(n.globals.series[t][o]!==void 0)this.tConfig.shared&&this.tooltipUtil.isXoverlap(o)&&this.tooltipUtil.isInitialSeriesSameLen()?this.create(e,this,t,o,i.ttItems):this.create(e,this,t,o,i.ttItems,!1);else if(this.tooltipUtil.isXoverlap(o)){var r=n.globals.series.findIndex(function(a,l){return!n.globals.collapsedSeriesIndices.includes(l)});this.create(e,this,r,o,i.ttItems)}}},{key:"deactivateHoverFilter",value:function(){for(var e=this.w,t=new N(this.ctx),i=e.globals.dom.Paper.select(".apexcharts-bar-area"),o=0;o<i.length;o++)t.pathMouseLeave(i[o])}},{key:"handleMouseOut",value:function(e){var t=this.w,i=this.getElXCrosshairs();if(t.globals.dom.baseEl.classList.remove("apexcharts-tooltip-active"),e.tooltipEl.classList.remove("apexcharts-active"),this.deactivateHoverFilter(),t.config.chart.type!=="bubble"&&this.marker.resetPointsSize(),i!==null&&i.classList.remove("apexcharts-active"),this.ycrosshairs!==null&&this.ycrosshairs.classList.remove("apexcharts-active"),this.isXAxisTooltipEnabled&&this.xaxisTooltip.classList.remove("apexcharts-active"),this.yaxisTooltips.length){this.yaxisTTEls===null&&(this.yaxisTTEls=t.globals.dom.baseEl.querySelectorAll(".apexcharts-yaxistooltip"));for(var o=0;o<this.yaxisTTEls.length;o++)this.yaxisTTEls[o].classList.remove("apexcharts-active")}t.config.legend.tooltipHoverFormatter&&this.legendLabels.forEach(function(n){var r=n.getAttribute("data:default-text");n.innerHTML=decodeURIComponent(r)})}},{key:"markerClick",value:function(e,t,i){var o=this.w;typeof o.config.chart.events.markerClick=="function"&&o.config.chart.events.markerClick(e,this.ctx,{seriesIndex:t,dataPointIndex:i,w:o}),this.ctx.events.fireEvent("markerClick",[e,this.ctx,{seriesIndex:t,dataPointIndex:i,w:o}])}},{key:"create",value:function(e,t,i,o,n){var r,a,l,c,d,h,g,m,p,b,k,v,x,u,f,w,y=arguments.length>5&&arguments[5]!==void 0?arguments[5]:null,_=this.w,C=t;e.type==="mouseup"&&this.markerClick(e,i,o),y===null&&(y=this.tConfig.shared);var A=this.tooltipUtil.hasMarkers(i),S=this.tooltipUtil.getElBars();if(_.config.legend.tooltipHoverFormatter){var P=_.config.legend.tooltipHoverFormatter,L=Array.from(this.legendLabels);L.forEach(function(Ee){var Me=Ee.getAttribute("data:default-text");Ee.innerHTML=decodeURIComponent(Me)});for(var I=0;I<L.length;I++){var R=L[I],z=parseInt(R.getAttribute("i"),10),U=decodeURIComponent(R.getAttribute("data:default-text")),X=P(U,{seriesIndex:y?z:i,dataPointIndex:o,w:_});if(y)R.innerHTML=_.globals.collapsedSeriesIndices.indexOf(z)<0?X:U;else if(R.innerHTML=z===i?X:U,i===z)break}}var q=F(F({ttItems:n,i,j:o},((r=_.globals.seriesRange)===null||r===void 0||(a=r[i])===null||a===void 0||(l=a[o])===null||l===void 0||(c=l.y[0])===null||c===void 0?void 0:c.y1)!==void 0&&{y1:(d=_.globals.seriesRange)===null||d===void 0||(h=d[i])===null||h===void 0||(g=h[o])===null||g===void 0||(m=g.y[0])===null||m===void 0?void 0:m.y1}),((p=_.globals.seriesRange)===null||p===void 0||(b=p[i])===null||b===void 0||(k=b[o])===null||k===void 0||(v=k.y[0])===null||v===void 0?void 0:v.y2)!==void 0&&{y2:(x=_.globals.seriesRange)===null||x===void 0||(u=x[i])===null||u===void 0||(f=u[o])===null||f===void 0||(w=f.y[0])===null||w===void 0?void 0:w.y2});if(y){if(C.tooltipLabels.drawSeriesTexts(F(F({},q),{},{shared:!this.showOnIntersect&&this.tConfig.shared})),A)_.globals.markers.largestSize>0?C.marker.enlargePoints(o):C.tooltipPosition.moveDynamicPointsOnHover(o);else if(this.tooltipUtil.hasBars()&&(this.barSeriesHeight=this.tooltipUtil.getBarsHeight(S),this.barSeriesHeight>0)){var te=new N(this.ctx),J=_.globals.dom.Paper.select(".apexcharts-bar-area[j='".concat(o,"']"));this.deactivateHoverFilter(),this.tooltipPosition.moveStickyTooltipOverBars(o,i);for(var le=0;le<J.length;le++)te.pathMouseEnter(J[le])}}else C.tooltipLabels.drawSeriesTexts(F({shared:!1},q)),this.tooltipUtil.hasBars()&&C.tooltipPosition.moveStickyTooltipOverBars(o,i),A&&C.tooltipPosition.moveMarkers(i,o)}}]),s}(),Gw=function(){function s(e){H(this,s),this.w=e.w,this.barCtx=e,this.totalFormatter=this.w.config.plotOptions.bar.dataLabels.total.formatter,this.totalFormatter||(this.totalFormatter=this.w.config.dataLabels.formatter)}return W(s,[{key:"handleBarDataLabels",value:function(e){var t,i,o=e.x,n=e.y,r=e.y1,a=e.y2,l=e.i,c=e.j,d=e.realIndex,h=e.columnGroupIndex,g=e.series,m=e.barHeight,p=e.barWidth,b=e.barXPosition,k=e.barYPosition,v=e.visibleSeries,x=e.renderedPath,u=this.w,f=new N(this.barCtx.ctx),w=Array.isArray(this.barCtx.strokeWidth)?this.barCtx.strokeWidth[d]:this.barCtx.strokeWidth;u.globals.isXNumeric&&!u.globals.isBarHorizontal?(t=o+parseFloat(p*(v+1)),i=n+parseFloat(m*(v+1))-w):(t=o+parseFloat(p*v),i=n+parseFloat(m*v));var y,_=null,C=o,A=n,S={},P=u.config.dataLabels,L=this.barCtx.barOptions.dataLabels,I=this.barCtx.barOptions.dataLabels.total;k!==void 0&&this.barCtx.isRangeBar&&(i=k,A=k),b!==void 0&&this.barCtx.isVerticalGroupedRangeBar&&(t=b,C=b);var R=P.offsetX,z=P.offsetY,U={width:0,height:0};if(u.config.dataLabels.enabled){var X=u.globals.series[l][c];U=f.getTextRects(u.globals.yLabelFormatters[0](X),parseFloat(P.style.fontSize))}var q={x:o,y:n,i:l,j:c,realIndex:d,columnGroupIndex:h,renderedPath:x,bcx:t,bcy:i,barHeight:m,barWidth:p,textRects:U,strokeWidth:w,dataLabelsX:C,dataLabelsY:A,dataLabelsConfig:P,barDataLabelsConfig:L,barTotalDataLabelsConfig:I,offX:R,offY:z};return S=this.barCtx.isHorizontal?this.calculateBarsDataLabelsPosition(q):this.calculateColumnsDataLabelsPosition(q),x.attr({cy:S.bcy,cx:S.bcx,j:c,val:u.globals.series[l][c],barHeight:m,barWidth:p}),y=this.drawCalculatedDataLabels({x:S.dataLabelsX,y:S.dataLabelsY,val:this.barCtx.isRangeBar?[r,a]:u.config.chart.stackType==="100%"?g[l][c]:u.globals.series[l][c],i:d,j:c,barWidth:p,barHeight:m,textRects:U,dataLabelsConfig:P}),u.config.chart.stacked&&I.enabled&&(_=this.drawTotalDataLabels({x:S.totalDataLabelsX,y:S.totalDataLabelsY,barWidth:p,barHeight:m,realIndex:d,textAnchor:S.totalDataLabelsAnchor,val:this.getStackedTotalDataLabel({realIndex:d,j:c}),dataLabelsConfig:P,barTotalDataLabelsConfig:I})),{dataLabels:y,totalDataLabels:_}}},{key:"getStackedTotalDataLabel",value:function(e){var t=e.realIndex,i=e.j,o=this.w,n=this.barCtx.stackedSeriesTotals[i];return this.totalFormatter&&(n=this.totalFormatter(n,F(F({},o),{},{seriesIndex:t,dataPointIndex:i,w:o}))),n}},{key:"calculateColumnsDataLabelsPosition",value:function(e){var t=this.w,i=e.i,o=e.j,n=e.realIndex;e.columnGroupIndex;var r,a,l=e.y,c=e.bcx,d=e.barWidth,h=e.barHeight,g=e.textRects,m=e.dataLabelsX,p=e.dataLabelsY,b=e.dataLabelsConfig,k=e.barDataLabelsConfig,v=e.barTotalDataLabelsConfig,x=e.strokeWidth,u=e.offX,f=e.offY,w=c;h=Math.abs(h);var y=t.config.plotOptions.bar.dataLabels.orientation==="vertical",_=this.barCtx.barHelpers.getZeroValueEncounters({i,j:o}).zeroEncounters;c-=x/2;var C=t.globals.gridWidth/t.globals.dataPoints;this.barCtx.isVerticalGroupedRangeBar?m+=d/2:(m=t.globals.isXNumeric?c-d/2+u:c-C+d/2+u,_>0&&t.config.plotOptions.bar.hideZeroBarsWhenGrouped&&(m-=d*_)),y&&(m=m+g.height/2-x/2-2);var A=t.globals.series[i][o]<0,S=l;switch(this.barCtx.isReversed&&(S=l+(A?h:-h)),k.position){case"center":p=y?A?S-h/2+f:S+h/2-f:A?S-h/2+g.height/2+f:S+h/2+g.height/2-f;break;case"bottom":p=y?A?S-h+f:S+h-f:A?S-h+g.height+x+f:S+h-g.height/2+x-f;break;case"top":p=y?A?S+f:S-f:A?S-g.height/2-f:S+g.height+f}if(this.barCtx.lastActiveBarSerieIndex===n&&v.enabled){var P=new N(this.barCtx.ctx).getTextRects(this.getStackedTotalDataLabel({realIndex:n,j:o}),b.fontSize);r=A?S-P.height/2-f-v.offsetY+18:S+P.height+f+v.offsetY-18;var L=C;a=w+(t.globals.isXNumeric?-d*t.globals.barGroups.length/2:t.globals.barGroups.length*d/2-(t.globals.barGroups.length-1)*d-L)+v.offsetX}return t.config.chart.stacked||(p<0?p=0+x:p+g.height/3>t.globals.gridHeight&&(p=t.globals.gridHeight-x)),{bcx:c,bcy:l,dataLabelsX:m,dataLabelsY:p,totalDataLabelsX:a,totalDataLabelsY:r,totalDataLabelsAnchor:"middle"}}},{key:"calculateBarsDataLabelsPosition",value:function(e){var t=this.w,i=e.x,o=e.i,n=e.j,r=e.realIndex;e.columnGroupIndex;var a=e.bcy,l=e.barHeight,c=e.barWidth,d=e.textRects,h=e.dataLabelsX,g=e.strokeWidth,m=e.dataLabelsConfig,p=e.barDataLabelsConfig,b=e.barTotalDataLabelsConfig,k=e.offX,v=e.offY,x=t.globals.gridHeight/t.globals.dataPoints;c=Math.abs(c);var u,f,w=a-(this.barCtx.isRangeBar?0:x)+l/2+d.height/2+v-3,y="start",_=t.globals.series[o][n]<0,C=i;switch(this.barCtx.isReversed&&(C=i+(_?-c:c),y=_?"start":"end"),p.position){case"center":h=_?C+c/2-k:Math.max(d.width/2,C-c/2)+k;break;case"bottom":h=_?C+c-g-Math.round(d.width/2)-k:C-c+g+Math.round(d.width/2)+k;break;case"top":h=_?C-g+Math.round(d.width/2)-k:C-g-Math.round(d.width/2)+k}if(this.barCtx.lastActiveBarSerieIndex===r&&b.enabled){var A=new N(this.barCtx.ctx).getTextRects(this.getStackedTotalDataLabel({realIndex:r,j:n}),m.fontSize);_?(u=C-g-k-b.offsetX,y="end"):u=C+k+b.offsetX+(this.barCtx.isReversed?-(c+g):g),f=w-d.height/2+A.height/2+b.offsetY+g}return t.config.chart.stacked||(h<0?h=h+d.width+g:h+d.width/2>t.globals.gridWidth&&(h=t.globals.gridWidth-d.width-g)),{bcx:i,bcy:a,dataLabelsX:h,dataLabelsY:w,totalDataLabelsX:u,totalDataLabelsY:f,totalDataLabelsAnchor:y}}},{key:"drawCalculatedDataLabels",value:function(e){var t=e.x,i=e.y,o=e.val,n=e.i,r=e.j,a=e.textRects,l=e.barHeight,c=e.barWidth,d=e.dataLabelsConfig,h=this.w,g="rotate(0)";h.config.plotOptions.bar.dataLabels.orientation==="vertical"&&(g="rotate(-90, ".concat(t,", ").concat(i,")"));var m=new Xo(this.barCtx.ctx),p=new N(this.barCtx.ctx),b=d.formatter,k=null,v=h.globals.collapsedSeriesIndices.indexOf(n)>-1;if(d.enabled&&!v){k=p.group({class:"apexcharts-data-labels",transform:g});var x="";o!==void 0&&(x=b(o,F(F({},h),{},{seriesIndex:n,dataPointIndex:r,w:h}))),!o&&h.config.plotOptions.bar.hideZeroBarsWhenGrouped&&(x="");var u=h.globals.series[n][r]<0,f=h.config.plotOptions.bar.dataLabels.position;h.config.plotOptions.bar.dataLabels.orientation==="vertical"&&(f==="top"&&(d.textAnchor=u?"end":"start"),f==="center"&&(d.textAnchor="middle"),f==="bottom"&&(d.textAnchor=u?"end":"start")),this.barCtx.isRangeBar&&this.barCtx.barOptions.dataLabels.hideOverflowingLabels&&c<p.getTextRects(x,parseFloat(d.style.fontSize)).width&&(x=""),h.config.chart.stacked&&this.barCtx.barOptions.dataLabels.hideOverflowingLabels&&(this.barCtx.isHorizontal?a.width/1.6>Math.abs(c)&&(x=""):a.height/1.6>Math.abs(l)&&(x=""));var w=F({},d);this.barCtx.isHorizontal&&o<0&&(d.textAnchor==="start"?w.textAnchor="end":d.textAnchor==="end"&&(w.textAnchor="start")),m.plotDataLabelsText({x:t,y:i,text:x,i:n,j:r,parent:k,dataLabelsConfig:w,alwaysDrawDataLabel:!0,offsetCorrection:!0})}return k}},{key:"drawTotalDataLabels",value:function(e){var t=e.x,i=e.y,o=e.val;e.barWidth,e.barHeight;var n=e.realIndex,r=e.textAnchor,a=e.barTotalDataLabelsConfig;this.w;var l,c=new N(this.barCtx.ctx);return a.enabled&&t!==void 0&&i!==void 0&&this.barCtx.lastActiveBarSerieIndex===n&&(l=c.drawText({x:t,y:i,foreColor:a.style.color,text:o,textAnchor:r,fontFamily:a.style.fontFamily,fontSize:a.style.fontSize,fontWeight:a.style.fontWeight})),l}}]),s}(),$w=function(){function s(e){H(this,s),this.w=e.w,this.barCtx=e}return W(s,[{key:"initVariables",value:function(e){var t=this.w;this.barCtx.series=e,this.barCtx.totalItems=0,this.barCtx.seriesLen=0,this.barCtx.visibleI=-1,this.barCtx.visibleItems=1;for(var i=0;i<e.length;i++)if(e[i].length>0&&(this.barCtx.seriesLen=this.barCtx.seriesLen+1,this.barCtx.totalItems+=e[i].length),t.globals.isXNumeric)for(var o=0;o<e[i].length;o++)t.globals.seriesX[i][o]>t.globals.minX&&t.globals.seriesX[i][o]<t.globals.maxX&&this.barCtx.visibleItems++;else this.barCtx.visibleItems=t.globals.dataPoints;this.barCtx.seriesLen===0&&(this.barCtx.seriesLen=1),this.barCtx.zeroSerieses=[],t.globals.comboCharts||this.checkZeroSeries({series:e})}},{key:"initialPositions",value:function(){var e,t,i,o,n,r,a,l,c=this.w,d=c.globals.dataPoints;this.barCtx.isRangeBar&&(d=c.globals.labels.length);var h=this.barCtx.seriesLen;if(c.config.plotOptions.bar.rangeBarGroupRows&&(h=1),this.barCtx.isHorizontal)n=(i=c.globals.gridHeight/d)/h,c.globals.isXNumeric&&(n=(i=c.globals.gridHeight/this.barCtx.totalItems)/this.barCtx.seriesLen),n=n*parseInt(this.barCtx.barOptions.barHeight,10)/100,String(this.barCtx.barOptions.barHeight).indexOf("%")===-1&&(n=parseInt(this.barCtx.barOptions.barHeight,10)),l=this.barCtx.baseLineInvertedY+c.globals.padHorizontal+(this.barCtx.isReversed?c.globals.gridWidth:0)-(this.barCtx.isReversed?2*this.barCtx.baseLineInvertedY:0),this.barCtx.isFunnel&&(l=c.globals.gridWidth/2),t=(i-n*this.barCtx.seriesLen)/2;else{if(o=c.globals.gridWidth/this.barCtx.visibleItems,c.config.xaxis.convertedCatToNumeric&&(o=c.globals.gridWidth/c.globals.dataPoints),r=o/h*parseInt(this.barCtx.barOptions.columnWidth,10)/100,c.globals.isXNumeric){var g=this.barCtx.xRatio;c.globals.minXDiff&&c.globals.minXDiff!==.5&&c.globals.minXDiff/g>0&&(o=c.globals.minXDiff/g),(r=o/h*parseInt(this.barCtx.barOptions.columnWidth,10)/100)<1&&(r=1)}String(this.barCtx.barOptions.columnWidth).indexOf("%")===-1&&(r=parseInt(this.barCtx.barOptions.columnWidth,10)),a=c.globals.gridHeight-this.barCtx.baseLineY[this.barCtx.translationsIndex]-(this.barCtx.isReversed?c.globals.gridHeight:0)+(this.barCtx.isReversed?2*this.barCtx.baseLineY[this.barCtx.translationsIndex]:0),e=c.globals.padHorizontal+(o-r*this.barCtx.seriesLen)/2}return c.globals.barHeight=n,c.globals.barWidth=r,{x:e,y:t,yDivision:i,xDivision:o,barHeight:n,barWidth:r,zeroH:a,zeroW:l}}},{key:"initializeStackedPrevVars",value:function(e){e.w.globals.seriesGroups.forEach(function(t){e[t]||(e[t]={}),e[t].prevY=[],e[t].prevX=[],e[t].prevYF=[],e[t].prevXF=[],e[t].prevYVal=[],e[t].prevXVal=[]})}},{key:"initializeStackedXYVars",value:function(e){e.w.globals.seriesGroups.forEach(function(t){e[t]||(e[t]={}),e[t].xArrj=[],e[t].xArrjF=[],e[t].xArrjVal=[],e[t].yArrj=[],e[t].yArrjF=[],e[t].yArrjVal=[]})}},{key:"getPathFillColor",value:function(e,t,i,o){var n,r,a,l,c,d=this.w,h=new Yt(this.barCtx.ctx),g=null,m=this.barCtx.barOptions.distributed?i:t;return this.barCtx.barOptions.colors.ranges.length>0&&this.barCtx.barOptions.colors.ranges.map(function(p){e[t][i]>=p.from&&e[t][i]<=p.to&&(g=p.color)}),(n=d.config.series[t].data[i])!==null&&n!==void 0&&n.fillColor&&(g=d.config.series[t].data[i].fillColor),h.fillPath({seriesNumber:this.barCtx.barOptions.distributed?m:o,dataPointIndex:i,color:g,value:e[t][i],fillConfig:(r=d.config.series[t].data[i])===null||r===void 0?void 0:r.fill,fillType:(a=d.config.series[t].data[i])!==null&&a!==void 0&&(l=a.fill)!==null&&l!==void 0&&l.type?(c=d.config.series[t].data[i])===null||c===void 0?void 0:c.fill.type:Array.isArray(d.config.fill.type)?d.config.fill.type[o]:d.config.fill.type})}},{key:"getStrokeWidth",value:function(e,t,i){var o=0,n=this.w;return this.barCtx.series[e][t]===void 0||this.barCtx.series[e][t]===null?this.barCtx.isNullValue=!0:this.barCtx.isNullValue=!1,n.config.stroke.show&&(this.barCtx.isNullValue||(o=Array.isArray(this.barCtx.strokeWidth)?this.barCtx.strokeWidth[i]:this.barCtx.strokeWidth)),o}},{key:"shouldApplyRadius",value:function(e){var t=this.w,i=!1;return t.config.plotOptions.bar.borderRadius>0&&(t.config.chart.stacked&&t.config.plotOptions.bar.borderRadiusWhenStacked==="last"?this.barCtx.lastActiveBarSerieIndex===e&&(i=!0):i=!0),i}},{key:"barBackground",value:function(e){var t=e.j,i=e.i,o=e.x1,n=e.x2,r=e.y1,a=e.y2,l=e.elSeries,c=this.w,d=new N(this.barCtx.ctx),h=new zt(this.barCtx.ctx).getActiveConfigSeriesIndex();if(this.barCtx.barOptions.colors.backgroundBarColors.length>0&&h===i){t>=this.barCtx.barOptions.colors.backgroundBarColors.length&&(t%=this.barCtx.barOptions.colors.backgroundBarColors.length);var g=this.barCtx.barOptions.colors.backgroundBarColors[t],m=d.drawRect(o!==void 0?o:0,r!==void 0?r:0,n!==void 0?n:c.globals.gridWidth,a!==void 0?a:c.globals.gridHeight,this.barCtx.barOptions.colors.backgroundBarRadius,g,this.barCtx.barOptions.colors.backgroundBarOpacity);l.add(m),m.node.classList.add("apexcharts-backgroundBar")}}},{key:"getColumnPaths",value:function(e){var t,i=e.barWidth,o=e.barXPosition,n=e.y1,r=e.y2,a=e.strokeWidth,l=e.seriesGroup,c=e.realIndex,d=e.i,h=e.j,g=e.w,m=new N(this.barCtx.ctx);(a=Array.isArray(a)?a[c]:a)||(a=0);var p=i,b=o;(t=g.config.series[c].data[h])!==null&&t!==void 0&&t.columnWidthOffset&&(b=o-g.config.series[c].data[h].columnWidthOffset/2,p=i+g.config.series[c].data[h].columnWidthOffset);var k=a/2,v=b+k,x=b+p-k;n+=.001-k,r+=.001+k;var u=m.move(v,n),f=m.move(v,n),w=m.line(x,n);if(g.globals.previousPaths.length>0&&(f=this.barCtx.getPreviousPath(c,h,!1)),u=u+m.line(v,r)+m.line(x,r)+m.line(x,n)+(g.config.plotOptions.bar.borderRadiusApplication==="around"?" Z":" z"),f=f+m.line(v,n)+w+w+w+w+w+m.line(v,n)+(g.config.plotOptions.bar.borderRadiusApplication==="around"?" Z":" z"),this.shouldApplyRadius(c)&&(u=m.roundPathCorners(u,g.config.plotOptions.bar.borderRadius)),g.config.chart.stacked){var y=this.barCtx;(y=this.barCtx[l]).yArrj.push(r-k),y.yArrjF.push(Math.abs(n-r+a)),y.yArrjVal.push(this.barCtx.series[d][h])}return{pathTo:u,pathFrom:f}}},{key:"getBarpaths",value:function(e){var t,i=e.barYPosition,o=e.barHeight,n=e.x1,r=e.x2,a=e.strokeWidth,l=e.seriesGroup,c=e.realIndex,d=e.i,h=e.j,g=e.w,m=new N(this.barCtx.ctx);(a=Array.isArray(a)?a[c]:a)||(a=0);var p=i,b=o;(t=g.config.series[c].data[h])!==null&&t!==void 0&&t.barHeightOffset&&(p=i-g.config.series[c].data[h].barHeightOffset/2,b=o+g.config.series[c].data[h].barHeightOffset);var k=a/2,v=p+k,x=p+b-k;n+=.001-k,r+=.001+k;var u=m.move(n,v),f=m.move(n,v);g.globals.previousPaths.length>0&&(f=this.barCtx.getPreviousPath(c,h,!1));var w=m.line(n,x);if(u=u+m.line(r,v)+m.line(r,x)+w+(g.config.plotOptions.bar.borderRadiusApplication==="around"?" Z":" z"),f=f+m.line(n,v)+w+w+w+w+w+m.line(n,v)+(g.config.plotOptions.bar.borderRadiusApplication==="around"?" Z":" z"),this.shouldApplyRadius(c)&&(u=m.roundPathCorners(u,g.config.plotOptions.bar.borderRadius)),g.config.chart.stacked){var y=this.barCtx;(y=this.barCtx[l]).xArrj.push(r+k),y.xArrjF.push(Math.abs(n-r)),y.xArrjVal.push(this.barCtx.series[d][h])}return{pathTo:u,pathFrom:f}}},{key:"checkZeroSeries",value:function(e){for(var t=e.series,i=this.w,o=0;o<t.length;o++){for(var n=0,r=0;r<t[i.globals.maxValsInArrayIndex].length;r++)n+=t[o][r];n===0&&this.barCtx.zeroSerieses.push(o)}}},{key:"getXForValue",value:function(e,t){var i=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2]?t:null;return e!=null&&(i=t+e/this.barCtx.invertedYRatio-2*(this.barCtx.isReversed?e/this.barCtx.invertedYRatio:0)),i}},{key:"getYForValue",value:function(e,t,i){var o=!(arguments.length>3&&arguments[3]!==void 0)||arguments[3]?t:null;return e!=null&&(o=t-e/this.barCtx.yRatio[i]+2*(this.barCtx.isReversed?e/this.barCtx.yRatio[i]:0)),o}},{key:"getGoalValues",value:function(e,t,i,o,n,r){var a=this,l=this.w,c=[],d=function(m,p){var b;c.push((kr(b={},e,e==="x"?a.getXForValue(m,t,!1):a.getYForValue(m,i,r,!1)),kr(b,"attrs",p),b))};if(l.globals.seriesGoals[o]&&l.globals.seriesGoals[o][n]&&Array.isArray(l.globals.seriesGoals[o][n])&&l.globals.seriesGoals[o][n].forEach(function(m){d(m.value,m)}),this.barCtx.barOptions.isDumbbell&&l.globals.seriesRange.length){var h=this.barCtx.barOptions.dumbbellColors?this.barCtx.barOptions.dumbbellColors:l.globals.colors,g={strokeHeight:e==="x"?0:l.globals.markers.size[o],strokeWidth:e==="x"?l.globals.markers.size[o]:0,strokeDashArray:0,strokeLineCap:"round",strokeColor:Array.isArray(h[o])?h[o][0]:h[o]};d(l.globals.seriesRangeStart[o][n],g),d(l.globals.seriesRangeEnd[o][n],F(F({},g),{},{strokeColor:Array.isArray(h[o])?h[o][1]:h[o]}))}return c}},{key:"drawGoalLine",value:function(e){var t=e.barXPosition,i=e.barYPosition,o=e.goalX,n=e.goalY,r=e.barWidth,a=e.barHeight,l=new N(this.barCtx.ctx),c=l.group({className:"apexcharts-bar-goals-groups"});c.node.classList.add("apexcharts-element-hidden"),this.barCtx.w.globals.delayedElements.push({el:c.node}),c.attr("clip-path","url(#gridRectMarkerMask".concat(this.barCtx.w.globals.cuid,")"));var d=null;return this.barCtx.isHorizontal?Array.isArray(o)&&o.forEach(function(h){if(h.x>=-1&&h.x<=l.w.globals.gridWidth+1){var g=h.attrs.strokeHeight!==void 0?h.attrs.strokeHeight:a/2,m=i+g+a/2;d=l.drawLine(h.x,m-2*g,h.x,m,h.attrs.strokeColor?h.attrs.strokeColor:void 0,h.attrs.strokeDashArray,h.attrs.strokeWidth?h.attrs.strokeWidth:2,h.attrs.strokeLineCap),c.add(d)}}):Array.isArray(n)&&n.forEach(function(h){if(h.y>=-1&&h.y<=l.w.globals.gridHeight+1){var g=h.attrs.strokeWidth!==void 0?h.attrs.strokeWidth:r/2,m=t+g+r/2;d=l.drawLine(m-2*g,h.y,m,h.y,h.attrs.strokeColor?h.attrs.strokeColor:void 0,h.attrs.strokeDashArray,h.attrs.strokeHeight?h.attrs.strokeHeight:2,h.attrs.strokeLineCap),c.add(d)}}),c}},{key:"drawBarShadow",value:function(e){var t=e.prevPaths,i=e.currPaths,o=e.color,n=this.w,r=t.x,a=t.x1,l=t.barYPosition,c=i.x,d=i.x1,h=i.barYPosition,g=l+i.barHeight,m=new N(this.barCtx.ctx),p=new T,b=m.move(a,g)+m.line(r,g)+m.line(c,h)+m.line(d,h)+m.line(a,g)+(n.config.plotOptions.bar.borderRadiusApplication==="around"?" Z":" z");return m.drawPath({d:b,fill:p.shadeColor(.5,T.rgb2hex(o)),stroke:"none",strokeWidth:0,fillOpacity:1,classes:"apexcharts-bar-shadows"})}},{key:"getZeroValueEncounters",value:function(e){var t,i=e.i,o=e.j,n=this.w,r=0,a=0;return(n.config.plotOptions.bar.horizontal?n.globals.series.map(function(l,c){return c}):((t=n.globals.columnSeries)===null||t===void 0?void 0:t.i.map(function(l){return l}))||[]).forEach(function(l){var c=n.globals.seriesPercent[l][o];c&&r++,l<i&&c===0&&a++}),{nonZeroColumns:r,zeroEncounters:a}}},{key:"getGroupIndex",value:function(e){var t=this.w,i=t.globals.seriesGroups.findIndex(function(r){return r.indexOf(t.globals.seriesNames[e])>-1}),o=this.barCtx.columnGroupIndices,n=o.indexOf(i);return n<0&&(o.push(i),n=o.length-1),{groupIndex:i,columnGroupIndex:n}}}]),s}(),qo=function(){function s(e,t){H(this,s),this.ctx=e,this.w=e.w;var i=this.w;this.barOptions=i.config.plotOptions.bar,this.isHorizontal=this.barOptions.horizontal,this.strokeWidth=i.config.stroke.width,this.isNullValue=!1,this.isRangeBar=i.globals.seriesRange.length&&this.isHorizontal,this.isVerticalGroupedRangeBar=!i.globals.isBarHorizontal&&i.globals.seriesRange.length&&i.config.plotOptions.bar.rangeBarGroupRows,this.isFunnel=this.barOptions.isFunnel,this.xyRatios=t,this.xyRatios!==null&&(this.xRatio=t.xRatio,this.yRatio=t.yRatio,this.invertedXRatio=t.invertedXRatio,this.invertedYRatio=t.invertedYRatio,this.baseLineY=t.baseLineY,this.baseLineInvertedY=t.baseLineInvertedY),this.yaxisIndex=0,this.translationsIndex=0,this.seriesLen=0,this.pathArr=[];var o=new zt(this.ctx);this.lastActiveBarSerieIndex=o.getActiveConfigSeriesIndex("desc",["bar","column"]),this.columnGroupIndices=[];var n=o.getBarSeriesIndices(),r=new De(this.ctx);this.stackedSeriesTotals=r.getStackedSeriesTotals(this.w.config.series.map(function(a,l){return n.indexOf(l)===-1?l:-1}).filter(function(a){return a!==-1})),this.barHelpers=new $w(this)}return W(s,[{key:"draw",value:function(e,t){var i=this.w,o=new N(this.ctx),n=new De(this.ctx,i);e=n.getLogSeries(e),this.series=e,this.yRatio=n.getLogYRatios(this.yRatio),this.barHelpers.initVariables(e);var r=o.group({class:"apexcharts-bar-series apexcharts-plot-series"});i.config.dataLabels.enabled&&this.totalItems>this.barOptions.dataLabels.maxItems&&console.warn("WARNING: DataLabels are enabled but there are too many to display. This may cause performance issue when rendering - ApexCharts");for(var a=0,l=0;a<e.length;a++,l++){var c,d,h,g,m=void 0,p=void 0,b=[],k=[],v=i.globals.comboCharts?t[a]:a,x=this.barHelpers.getGroupIndex(v).columnGroupIndex,u=o.group({class:"apexcharts-series",rel:a+1,seriesName:T.escapeString(i.globals.seriesNames[v]),"data:realIndex":v});this.ctx.series.addCollapsedClassToSeries(u,v),e[a].length>0&&(this.visibleI=this.visibleI+1);var f=0,w=0;this.yRatio.length>1&&(this.yaxisIndex=i.globals.seriesYAxisReverseMap[v],this.translationsIndex=v);var y=this.translationsIndex;this.isReversed=i.config.yaxis[this.yaxisIndex]&&i.config.yaxis[this.yaxisIndex].reversed;var _=this.barHelpers.initialPositions();p=_.y,f=_.barHeight,d=_.yDivision,g=_.zeroW,m=_.x,w=_.barWidth,c=_.xDivision,h=_.zeroH,this.horizontal||k.push(m+w/2);var C=o.group({class:"apexcharts-datalabels","data:realIndex":v});i.globals.delayedElements.push({el:C.node}),C.node.classList.add("apexcharts-element-hidden");var A=o.group({class:"apexcharts-bar-goals-markers"}),S=o.group({class:"apexcharts-bar-shadows"});i.globals.delayedElements.push({el:S.node}),S.node.classList.add("apexcharts-element-hidden");for(var P=0;P<e[a].length;P++){var L=this.barHelpers.getStrokeWidth(a,P,v),I=null,R={indexes:{i:a,j:P,realIndex:v,translationsIndex:y,bc:l},x:m,y:p,strokeWidth:L,elSeries:u};this.isHorizontal?(I=this.drawBarPaths(F(F({},R),{},{barHeight:f,zeroW:g,yDivision:d})),w=this.series[a][P]/this.invertedYRatio):(I=this.drawColumnPaths(F(F({},R),{},{xDivision:c,barWidth:w,zeroH:h})),f=this.series[a][P]/this.yRatio[y]);var z=this.barHelpers.getPathFillColor(e,a,P,v);if(this.isFunnel&&this.barOptions.isFunnel3d&&this.pathArr.length&&P>0){var U=this.barHelpers.drawBarShadow({color:typeof z=="string"&&z?.indexOf("url")===-1?z:T.hexToRgba(i.globals.colors[a]),prevPaths:this.pathArr[this.pathArr.length-1],currPaths:I});U&&S.add(U)}this.pathArr.push(I);var X=this.barHelpers.drawGoalLine({barXPosition:I.barXPosition,barYPosition:I.barYPosition,goalX:I.goalX,goalY:I.goalY,barHeight:f,barWidth:w});X&&A.add(X),p=I.y,m=I.x,P>0&&k.push(m+w/2),b.push(p),this.renderSeries({realIndex:v,pathFill:z,j:P,i:a,columnGroupIndex:x,pathFrom:I.pathFrom,pathTo:I.pathTo,strokeWidth:L,elSeries:u,x:m,y:p,series:e,barHeight:Math.abs(I.barHeight?I.barHeight:f),barWidth:Math.abs(I.barWidth?I.barWidth:w),elDataLabelsWrap:C,elGoalsMarkers:A,elBarShadows:S,visibleSeries:this.visibleI,type:"bar"})}i.globals.seriesXvalues[v]=k,i.globals.seriesYvalues[v]=b,r.add(u)}return r}},{key:"renderSeries",value:function(e){var t=e.realIndex,i=e.pathFill,o=e.lineFill,n=e.j,r=e.i,a=e.columnGroupIndex,l=e.pathFrom,c=e.pathTo,d=e.strokeWidth,h=e.elSeries,g=e.x,m=e.y,p=e.y1,b=e.y2,k=e.series,v=e.barHeight,x=e.barWidth,u=e.barXPosition,f=e.barYPosition,w=e.elDataLabelsWrap,y=e.elGoalsMarkers,_=e.elBarShadows,C=e.visibleSeries,A=e.type,S=this.w,P=new N(this.ctx);if(!o){var L=typeof S.globals.stroke.colors[t]=="function"?function(X){var q,te=S.config.stroke.colors;return Array.isArray(te)&&te.length>0&&((q=te[X])||(q=""),typeof q=="function")?q({value:S.globals.series[X][n],dataPointIndex:n,w:S}):q}(t):S.globals.stroke.colors[t];o=this.barOptions.distributed?S.globals.stroke.colors[n]:L}S.config.series[r].data[n]&&S.config.series[r].data[n].strokeColor&&(o=S.config.series[r].data[n].strokeColor),this.isNullValue&&(i="none");var I=n/S.config.chart.animations.animateGradually.delay*(S.config.chart.animations.speed/S.globals.dataPoints)/2.4,R=P.renderPaths({i:r,j:n,realIndex:t,pathFrom:l,pathTo:c,stroke:o,strokeWidth:d,strokeLineCap:S.config.stroke.lineCap,fill:i,animationDelay:I,initialSpeed:S.config.chart.animations.speed,dataChangeSpeed:S.config.chart.animations.dynamicAnimation.speed,className:"apexcharts-".concat(A,"-area")});R.attr("clip-path","url(#gridRectMask".concat(S.globals.cuid,")"));var z=S.config.forecastDataPoints;z.count>0&&n>=S.globals.dataPoints-z.count&&(R.node.setAttribute("stroke-dasharray",z.dashArray),R.node.setAttribute("stroke-width",z.strokeWidth),R.node.setAttribute("fill-opacity",z.fillOpacity)),p!==void 0&&b!==void 0&&(R.attr("data-range-y1",p),R.attr("data-range-y2",b)),new lt(this.ctx).setSelectionFilter(R,t,n),h.add(R);var U=new Gw(this).handleBarDataLabels({x:g,y:m,y1:p,y2:b,i:r,j:n,series:k,realIndex:t,columnGroupIndex:a,barHeight:v,barWidth:x,barXPosition:u,barYPosition:f,renderedPath:R,visibleSeries:C});return U.dataLabels!==null&&w.add(U.dataLabels),U.totalDataLabels&&w.add(U.totalDataLabels),h.add(w),y&&h.add(y),_&&h.add(_),h}},{key:"drawBarPaths",value:function(e){var t,i=e.indexes,o=e.barHeight,n=e.strokeWidth,r=e.zeroW,a=e.x,l=e.y,c=e.yDivision,d=e.elSeries,h=this.w,g=i.i,m=i.j;if(h.globals.isXNumeric)t=(l=(h.globals.seriesX[g][m]-h.globals.minX)/this.invertedXRatio-o)+o*this.visibleI;else if(h.config.plotOptions.bar.hideZeroBarsWhenGrouped){var p=0,b=0;h.globals.seriesPercent.forEach(function(v,x){v[m]&&p++,x<g&&v[m]===0&&b++}),p>0&&(o=this.seriesLen*o/p),t=l+o*this.visibleI,t-=o*b}else t=l+o*this.visibleI;this.isFunnel&&(r-=(this.barHelpers.getXForValue(this.series[g][m],r)-r)/2),a=this.barHelpers.getXForValue(this.series[g][m],r);var k=this.barHelpers.getBarpaths({barYPosition:t,barHeight:o,x1:r,x2:a,strokeWidth:n,series:this.series,realIndex:i.realIndex,i:g,j:m,w:h});return h.globals.isXNumeric||(l+=c),this.barHelpers.barBackground({j:m,i:g,y1:t-o*this.visibleI,y2:o*this.seriesLen,elSeries:d}),{pathTo:k.pathTo,pathFrom:k.pathFrom,x1:r,x:a,y:l,goalX:this.barHelpers.getGoalValues("x",r,null,g,m),barYPosition:t,barHeight:o}}},{key:"drawColumnPaths",value:function(e){var t,i=e.indexes,o=e.x,n=e.y,r=e.xDivision,a=e.barWidth,l=e.zeroH,c=e.strokeWidth,d=e.elSeries,h=this.w,g=i.realIndex,m=i.translationsIndex,p=i.i,b=i.j,k=i.bc;if(h.globals.isXNumeric){var v=this.getBarXForNumericXAxis({x:o,j:b,realIndex:g,barWidth:a});o=v.x,t=v.barXPosition}else if(h.config.plotOptions.bar.hideZeroBarsWhenGrouped){var x=this.barHelpers.getZeroValueEncounters({i:p,j:b}),u=x.nonZeroColumns,f=x.zeroEncounters;u>0&&(a=this.seriesLen*a/u),t=o+a*this.visibleI,t-=a*f}else t=o+a*this.visibleI;n=this.barHelpers.getYForValue(this.series[p][b],l,m);var w=this.barHelpers.getColumnPaths({barXPosition:t,barWidth:a,y1:l,y2:n,strokeWidth:c,series:this.series,realIndex:g,i:p,j:b,w:h});return h.globals.isXNumeric||(o+=r),this.barHelpers.barBackground({bc:k,j:b,i:p,x1:t-c/2-a*this.visibleI,x2:a*this.seriesLen+c/2,elSeries:d}),{pathTo:w.pathTo,pathFrom:w.pathFrom,x:o,y:n,goalY:this.barHelpers.getGoalValues("y",null,l,p,b,m),barXPosition:t,barWidth:a}}},{key:"getBarXForNumericXAxis",value:function(e){var t=e.x,i=e.barWidth,o=e.realIndex,n=e.j,r=this.w,a=o;return r.globals.seriesX[o].length||(a=r.globals.maxValsInArrayIndex),r.globals.seriesX[a][n]&&(t=(r.globals.seriesX[a][n]-r.globals.minX)/this.xRatio-i*this.seriesLen/2),{barXPosition:t+i*this.visibleI,x:t}}},{key:"getPreviousPath",value:function(e,t){for(var i,o=this.w,n=0;n<o.globals.previousPaths.length;n++){var r=o.globals.previousPaths[n];r.paths&&r.paths.length>0&&parseInt(r.realIndex,10)===parseInt(e,10)&&o.globals.previousPaths[n].paths[t]!==void 0&&(i=o.globals.previousPaths[n].paths[t].d)}return i}}]),s}(),ig=function(s){ts(t,qo);var e=is(t);function t(){return H(this,t),e.apply(this,arguments)}return W(t,[{key:"draw",value:function(i,o){var n=this,r=this.w;this.graphics=new N(this.ctx),this.bar=new qo(this.ctx,this.xyRatios);var a=new De(this.ctx,r);i=a.getLogSeries(i),this.yRatio=a.getLogYRatios(this.yRatio),this.barHelpers.initVariables(i),r.config.chart.stackType==="100%"&&(i=r.globals.comboCharts?o.map(function(p){return r.globals.seriesPercent[p]}):r.globals.seriesPercent.slice()),this.series=i,this.barHelpers.initializeStackedPrevVars(this);for(var l=this.graphics.group({class:"apexcharts-bar-series apexcharts-plot-series"}),c=0,d=0,h=function(p,b){var k=void 0,v=void 0,x=void 0,u=void 0,f=r.globals.comboCharts?o[p]:p,w=n.barHelpers.getGroupIndex(f),y=w.groupIndex,_=w.columnGroupIndex;n.groupCtx=n[r.globals.seriesGroups[y]];var C=[],A=[],S=0;n.yRatio.length>1&&(n.yaxisIndex=r.globals.seriesYAxisReverseMap[f][0],S=f),n.isReversed=r.config.yaxis[n.yaxisIndex]&&r.config.yaxis[n.yaxisIndex].reversed;var P=n.graphics.group({class:"apexcharts-series",seriesName:T.escapeString(r.globals.seriesNames[f]),rel:p+1,"data:realIndex":f});n.ctx.series.addCollapsedClassToSeries(P,f);var L=n.graphics.group({class:"apexcharts-datalabels","data:realIndex":f}),I=n.graphics.group({class:"apexcharts-bar-goals-markers"}),R=0,z=0,U=n.initialPositions(c,d,k,v,x,u,S);d=U.y,R=U.barHeight,v=U.yDivision,u=U.zeroW,c=U.x,z=U.barWidth,k=U.xDivision,x=U.zeroH,r.globals.barHeight=R,r.globals.barWidth=z,n.barHelpers.initializeStackedXYVars(n),n.groupCtx.prevY.length===1&&n.groupCtx.prevY[0].every(function(Me){return isNaN(Me)})&&(n.groupCtx.prevY[0]=n.groupCtx.prevY[0].map(function(){return x}),n.groupCtx.prevYF[0]=n.groupCtx.prevYF[0].map(function(){return 0}));for(var X=0;X<r.globals.dataPoints;X++){var q=n.barHelpers.getStrokeWidth(p,X,f),te={indexes:{i:p,j:X,realIndex:f,translationsIndex:S,bc:b},strokeWidth:q,x:c,y:d,elSeries:P,columnGroupIndex:_,seriesGroup:r.globals.seriesGroups[y]},J=null;n.isHorizontal?(J=n.drawStackedBarPaths(F(F({},te),{},{zeroW:u,barHeight:R,yDivision:v})),z=n.series[p][X]/n.invertedYRatio):(J=n.drawStackedColumnPaths(F(F({},te),{},{xDivision:k,barWidth:z,zeroH:x})),R=n.series[p][X]/n.yRatio[S]);var le=n.barHelpers.drawGoalLine({barXPosition:J.barXPosition,barYPosition:J.barYPosition,goalX:J.goalX,goalY:J.goalY,barHeight:R,barWidth:z});le&&I.add(le),d=J.y,c=J.x,C.push(c),A.push(d);var Ee=n.barHelpers.getPathFillColor(i,p,X,f);P=n.renderSeries({realIndex:f,pathFill:Ee,j:X,i:p,columnGroupIndex:_,pathFrom:J.pathFrom,pathTo:J.pathTo,strokeWidth:q,elSeries:P,x:c,y:d,series:i,barHeight:R,barWidth:z,elDataLabelsWrap:L,elGoalsMarkers:I,type:"bar",visibleSeries:_})}r.globals.seriesXvalues[f]=C,r.globals.seriesYvalues[f]=A,n.groupCtx.prevY.push(n.groupCtx.yArrj),n.groupCtx.prevYF.push(n.groupCtx.yArrjF),n.groupCtx.prevYVal.push(n.groupCtx.yArrjVal),n.groupCtx.prevX.push(n.groupCtx.xArrj),n.groupCtx.prevXF.push(n.groupCtx.xArrjF),n.groupCtx.prevXVal.push(n.groupCtx.xArrjVal),l.add(P)},g=0,m=0;g<i.length;g++,m++)h(g,m);return l}},{key:"initialPositions",value:function(i,o,n,r,a,l,c){var d,h,g=this.w;if(this.isHorizontal){r=g.globals.gridHeight/g.globals.dataPoints;var m=g.config.plotOptions.bar.barHeight;d=String(m).indexOf("%")===-1?parseInt(m,10):r*parseInt(m,10)/100,l=g.globals.padHorizontal+(this.isReversed?g.globals.gridWidth-this.baseLineInvertedY:this.baseLineInvertedY),o=(r-d)/2}else{h=n=g.globals.gridWidth/g.globals.dataPoints;var p=g.config.plotOptions.bar.columnWidth;g.globals.isXNumeric&&g.globals.dataPoints>1?h=(n=g.globals.minXDiff/this.xRatio)*parseInt(this.barOptions.columnWidth,10)/100:String(p).indexOf("%")===-1?h=parseInt(p,10):h*=parseInt(p,10)/100,a=g.globals.gridHeight-this.baseLineY[c]-(this.isReversed?g.globals.gridHeight:0),i=g.globals.padHorizontal+(n-h)/2}var b=g.globals.barGroups.length||1;return{x:i,y:o,yDivision:r,xDivision:n,barHeight:d/b,barWidth:h/b,zeroH:a,zeroW:l}}},{key:"drawStackedBarPaths",value:function(i){for(var o,n=i.indexes,r=i.barHeight,a=i.strokeWidth,l=i.zeroW,c=i.x,d=i.y,h=i.columnGroupIndex,g=i.seriesGroup,m=i.yDivision,p=i.elSeries,b=this.w,k=d+h*r,v=n.i,x=n.j,u=n.realIndex,f=n.translationsIndex,w=0,y=0;y<this.groupCtx.prevXF.length;y++)w+=this.groupCtx.prevXF[y][x];var _;if((_=g.indexOf(b.config.series[u].name))>0){var C=l;this.groupCtx.prevXVal[_-1][x]<0?C=this.series[v][x]>=0?this.groupCtx.prevX[_-1][x]+w-2*(this.isReversed?w:0):this.groupCtx.prevX[_-1][x]:this.groupCtx.prevXVal[_-1][x]>=0&&(C=this.series[v][x]>=0?this.groupCtx.prevX[_-1][x]:this.groupCtx.prevX[_-1][x]-w+2*(this.isReversed?w:0)),o=C}else o=l;c=this.series[v][x]===null?o:o+this.series[v][x]/this.invertedYRatio-2*(this.isReversed?this.series[v][x]/this.invertedYRatio:0);var A=this.barHelpers.getBarpaths({barYPosition:k,barHeight:r,x1:o,x2:c,strokeWidth:a,series:this.series,realIndex:n.realIndex,seriesGroup:g,i:v,j:x,w:b});return this.barHelpers.barBackground({j:x,i:v,y1:k,y2:r,elSeries:p}),d+=m,{pathTo:A.pathTo,pathFrom:A.pathFrom,goalX:this.barHelpers.getGoalValues("x",l,null,v,x,f),barXPosition:o,barYPosition:k,x:c,y:d}}},{key:"drawStackedColumnPaths",value:function(i){var o=i.indexes,n=i.x,r=i.y,a=i.xDivision,l=i.barWidth,c=i.zeroH,d=i.columnGroupIndex,h=i.seriesGroup,g=i.elSeries,m=this.w,p=o.i,b=o.j,k=o.bc,v=o.realIndex,x=o.translationsIndex;if(m.globals.isXNumeric){var u=m.globals.seriesX[v][b];u||(u=0),n=(u-m.globals.minX)/this.xRatio-l/2*m.globals.barGroups.length}for(var f,w=n+d*l,y=0,_=0;_<this.groupCtx.prevYF.length;_++)y+=isNaN(this.groupCtx.prevYF[_][b])?0:this.groupCtx.prevYF[_][b];var C=p;if(h&&(C=h.indexOf(m.globals.seriesNames[v])),C>0&&!m.globals.isXNumeric||C>0&&m.globals.isXNumeric&&m.globals.seriesX[v-1][b]===m.globals.seriesX[v][b]){var A,S,P,L=Math.min(this.yRatio.length+1,v+1);if(this.groupCtx.prevY[C-1]!==void 0&&this.groupCtx.prevY[C-1].length)for(var I=1;I<L;I++){var R;if(!isNaN((R=this.groupCtx.prevY[C-I])===null||R===void 0?void 0:R[b])){P=this.groupCtx.prevY[C-I][b];break}}for(var z=1;z<L;z++){var U,X;if(((U=this.groupCtx.prevYVal[C-z])===null||U===void 0?void 0:U[b])<0){S=this.series[p][b]>=0?P-y+2*(this.isReversed?y:0):P;break}if(((X=this.groupCtx.prevYVal[C-z])===null||X===void 0?void 0:X[b])>=0){S=this.series[p][b]>=0?P:P+y-2*(this.isReversed?y:0);break}}S===void 0&&(S=m.globals.gridHeight),f=(A=this.groupCtx.prevYF[0])!==null&&A!==void 0&&A.every(function(te){return te===0})&&this.groupCtx.prevYF.slice(1,C).every(function(te){return te.every(function(J){return isNaN(J)})})?c:S}else f=c;r=this.series[p][b]?f-this.series[p][b]/this.yRatio[x]+2*(this.isReversed?this.series[p][b]/this.yRatio[x]:0):f;var q=this.barHelpers.getColumnPaths({barXPosition:w,barWidth:l,y1:f,y2:r,yRatio:this.yRatio[x],strokeWidth:this.strokeWidth,series:this.series,seriesGroup:h,realIndex:o.realIndex,i:p,j:b,w:m});return this.barHelpers.barBackground({bc:k,j:b,i:p,x1:w,x2:l,elSeries:g}),{pathTo:q.pathTo,pathFrom:q.pathFrom,goalY:this.barHelpers.getGoalValues("y",null,c,p,b),barXPosition:w,x:m.globals.isXNumeric?n:n+a,y:r}}}]),t}(),cl=function(s){ts(t,qo);var e=is(t);function t(){return H(this,t),e.apply(this,arguments)}return W(t,[{key:"draw",value:function(i,o,n){var r=this,a=this.w,l=new N(this.ctx),c=a.globals.comboCharts?o:a.config.chart.type,d=new Yt(this.ctx);this.candlestickOptions=this.w.config.plotOptions.candlestick,this.boxOptions=this.w.config.plotOptions.boxPlot,this.isHorizontal=a.config.plotOptions.bar.horizontal;var h=new De(this.ctx,a);i=h.getLogSeries(i),this.series=i,this.yRatio=h.getLogYRatios(this.yRatio),this.barHelpers.initVariables(i);for(var g=l.group({class:"apexcharts-".concat(c,"-series apexcharts-plot-series")}),m=function(b){r.isBoxPlot=a.config.chart.type==="boxPlot"||a.config.series[b].type==="boxPlot";var k,v,x,u,f=void 0,w=void 0,y=[],_=[],C=a.globals.comboCharts?n[b]:b,A=r.barHelpers.getGroupIndex(C).columnGroupIndex,S=l.group({class:"apexcharts-series",seriesName:T.escapeString(a.globals.seriesNames[C]),rel:b+1,"data:realIndex":C});r.ctx.series.addCollapsedClassToSeries(S,C),i[b].length>0&&(r.visibleI=r.visibleI+1);var P,L,I=0;r.yRatio.length>1&&(r.yaxisIndex=a.globals.seriesYAxisReverseMap[C][0],I=C);var R=r.barHelpers.initialPositions();w=R.y,P=R.barHeight,v=R.yDivision,u=R.zeroW,f=R.x,L=R.barWidth,k=R.xDivision,x=R.zeroH,_.push(f+L/2);for(var z=l.group({class:"apexcharts-datalabels","data:realIndex":C}),U=function(q){var te=r.barHelpers.getStrokeWidth(b,q,C),J=null,le={indexes:{i:b,j:q,realIndex:C,translationsIndex:I},x:f,y:w,strokeWidth:te,elSeries:S};J=r.isHorizontal?r.drawHorizontalBoxPaths(F(F({},le),{},{yDivision:v,barHeight:P,zeroW:u})):r.drawVerticalBoxPaths(F(F({},le),{},{xDivision:k,barWidth:L,zeroH:x})),w=J.y,f=J.x,q>0&&_.push(f+L/2),y.push(w),J.pathTo.forEach(function(Ee,Me){var _e=!r.isBoxPlot&&r.candlestickOptions.wick.useFillColor?J.color[Me]:a.globals.stroke.colors[b],At=d.fillPath({seriesNumber:C,dataPointIndex:q,color:J.color[Me],value:i[b][q]});r.renderSeries({realIndex:C,pathFill:At,lineFill:_e,j:q,i:b,pathFrom:J.pathFrom,pathTo:Ee,strokeWidth:te,elSeries:S,x:f,y:w,series:i,columnGroupIndex:A,barHeight:P,barWidth:L,elDataLabelsWrap:z,visibleSeries:r.visibleI,type:a.config.chart.type})})},X=0;X<a.globals.dataPoints;X++)U(X);a.globals.seriesXvalues[C]=_,a.globals.seriesYvalues[C]=y,g.add(S)},p=0;p<i.length;p++)m(p);return g}},{key:"drawVerticalBoxPaths",value:function(i){var o=i.indexes,n=i.x;i.y;var r=i.xDivision,a=i.barWidth,l=i.zeroH,c=i.strokeWidth,d=this.w,h=new N(this.ctx),g=o.i,m=o.j,p=!0,b=d.config.plotOptions.candlestick.colors.upward,k=d.config.plotOptions.candlestick.colors.downward,v="";this.isBoxPlot&&(v=[this.boxOptions.colors.lower,this.boxOptions.colors.upper]);var x=this.yRatio[o.translationsIndex],u=o.realIndex,f=this.getOHLCValue(u,m),w=l,y=l;f.o>f.c&&(p=!1);var _=Math.min(f.o,f.c),C=Math.max(f.o,f.c),A=f.m;d.globals.isXNumeric&&(n=(d.globals.seriesX[u][m]-d.globals.minX)/this.xRatio-a/2);var S=n+a*this.visibleI;this.series[g][m]===void 0||this.series[g][m]===null?(_=l,C=l):(_=l-_/x,C=l-C/x,w=l-f.h/x,y=l-f.l/x,A=l-f.m/x);var P=h.move(S,l),L=h.move(S+a/2,_);return d.globals.previousPaths.length>0&&(L=this.getPreviousPath(u,m,!0)),P=this.isBoxPlot?[h.move(S,_)+h.line(S+a/2,_)+h.line(S+a/2,w)+h.line(S+a/4,w)+h.line(S+a-a/4,w)+h.line(S+a/2,w)+h.line(S+a/2,_)+h.line(S+a,_)+h.line(S+a,A)+h.line(S,A)+h.line(S,_+c/2),h.move(S,A)+h.line(S+a,A)+h.line(S+a,C)+h.line(S+a/2,C)+h.line(S+a/2,y)+h.line(S+a-a/4,y)+h.line(S+a/4,y)+h.line(S+a/2,y)+h.line(S+a/2,C)+h.line(S,C)+h.line(S,A)+"z"]:[h.move(S,C)+h.line(S+a/2,C)+h.line(S+a/2,w)+h.line(S+a/2,C)+h.line(S+a,C)+h.line(S+a,_)+h.line(S+a/2,_)+h.line(S+a/2,y)+h.line(S+a/2,_)+h.line(S,_)+h.line(S,C-c/2)],L+=h.move(S,_),d.globals.isXNumeric||(n+=r),{pathTo:P,pathFrom:L,x:n,y:C,barXPosition:S,color:this.isBoxPlot?v:p?[b]:[k]}}},{key:"drawHorizontalBoxPaths",value:function(i){var o=i.indexes;i.x;var n=i.y,r=i.yDivision,a=i.barHeight,l=i.zeroW,c=i.strokeWidth,d=this.w,h=new N(this.ctx),g=o.i,m=o.j,p=this.boxOptions.colors.lower;this.isBoxPlot&&(p=[this.boxOptions.colors.lower,this.boxOptions.colors.upper]);var b=this.invertedYRatio,k=o.realIndex,v=this.getOHLCValue(k,m),x=l,u=l,f=Math.min(v.o,v.c),w=Math.max(v.o,v.c),y=v.m;d.globals.isXNumeric&&(n=(d.globals.seriesX[k][m]-d.globals.minX)/this.invertedXRatio-a/2);var _=n+a*this.visibleI;this.series[g][m]===void 0||this.series[g][m]===null?(f=l,w=l):(f=l+f/b,w=l+w/b,x=l+v.h/b,u=l+v.l/b,y=l+v.m/b);var C=h.move(l,_),A=h.move(f,_+a/2);return d.globals.previousPaths.length>0&&(A=this.getPreviousPath(k,m,!0)),C=[h.move(f,_)+h.line(f,_+a/2)+h.line(x,_+a/2)+h.line(x,_+a/2-a/4)+h.line(x,_+a/2+a/4)+h.line(x,_+a/2)+h.line(f,_+a/2)+h.line(f,_+a)+h.line(y,_+a)+h.line(y,_)+h.line(f+c/2,_),h.move(y,_)+h.line(y,_+a)+h.line(w,_+a)+h.line(w,_+a/2)+h.line(u,_+a/2)+h.line(u,_+a-a/4)+h.line(u,_+a/4)+h.line(u,_+a/2)+h.line(w,_+a/2)+h.line(w,_)+h.line(y,_)+"z"],A+=h.move(f,_),d.globals.isXNumeric||(n+=r),{pathTo:C,pathFrom:A,x:w,y:n,barYPosition:_,color:p}}},{key:"getOHLCValue",value:function(i,o){var n=this.w;return{o:this.isBoxPlot?n.globals.seriesCandleH[i][o]:n.globals.seriesCandleO[i][o],h:this.isBoxPlot?n.globals.seriesCandleO[i][o]:n.globals.seriesCandleH[i][o],m:n.globals.seriesCandleM[i][o],l:this.isBoxPlot?n.globals.seriesCandleC[i][o]:n.globals.seriesCandleL[i][o],c:this.isBoxPlot?n.globals.seriesCandleL[i][o]:n.globals.seriesCandleC[i][o]}}}]),t}(),wg=function(){function s(e){H(this,s),this.ctx=e,this.w=e.w}return W(s,[{key:"checkColorRange",value:function(){var e=this.w,t=!1,i=e.config.plotOptions[e.config.chart.type];return i.colorScale.ranges.length>0&&i.colorScale.ranges.map(function(o,n){o.from<=0&&(t=!0)}),t}},{key:"getShadeColor",value:function(e,t,i,o){var n=this.w,r=1,a=n.config.plotOptions[e].shadeIntensity,l=this.determineColor(e,t,i);n.globals.hasNegs||o?r=n.config.plotOptions[e].reverseNegativeShade?l.percent<0?l.percent/100*(1.25*a):(1-l.percent/100)*(1.25*a):l.percent<=0?1-(1+l.percent/100)*a:(1-l.percent/100)*a:(r=1-l.percent/100,e==="treemap"&&(r=(1-l.percent/100)*(1.25*a)));var c=l.color,d=new T;return n.config.plotOptions[e].enableShades&&(c=this.w.config.theme.mode==="dark"?T.hexToRgba(d.shadeColor(-1*r,l.color),n.config.fill.opacity):T.hexToRgba(d.shadeColor(r,l.color),n.config.fill.opacity)),{color:c,colorProps:l}}},{key:"determineColor",value:function(e,t,i){var o=this.w,n=o.globals.series[t][i],r=o.config.plotOptions[e],a=r.colorScale.inverse?i:t;r.distributed&&o.config.chart.type==="treemap"&&(a=i);var l=o.globals.colors[a],c=null,d=Math.min.apply(Math,at(o.globals.series[t])),h=Math.max.apply(Math,at(o.globals.series[t]));r.distributed||e!=="heatmap"||(d=o.globals.minY,h=o.globals.maxY),r.colorScale.min!==void 0&&(d=r.colorScale.min<o.globals.minY?r.colorScale.min:o.globals.minY,h=r.colorScale.max>o.globals.maxY?r.colorScale.max:o.globals.maxY);var g=Math.abs(h)+Math.abs(d),m=100*n/(g===0?g-1e-6:g);return r.colorScale.ranges.length>0&&r.colorScale.ranges.map(function(p,b){if(n>=p.from&&n<=p.to){l=p.color,c=p.foreColor?p.foreColor:null,d=p.from,h=p.to;var k=Math.abs(h)+Math.abs(d);m=100*n/(k===0?k-1e-6:k)}}),{color:l,foreColor:c,percent:m}}},{key:"calculateDataLabels",value:function(e){var t=e.text,i=e.x,o=e.y,n=e.i,r=e.j,a=e.colorProps,l=e.fontSize,c=this.w.config.dataLabels,d=new N(this.ctx),h=new Xo(this.ctx),g=null;if(c.enabled){g=d.group({class:"apexcharts-data-labels"});var m=c.offsetX,p=c.offsetY,b=i+m,k=o+parseFloat(c.style.fontSize)/3+p;h.plotDataLabelsText({x:b,y:k,text:t,i:n,j:r,color:a.foreColor,parent:g,fontSize:l,dataLabelsConfig:c})}return g}},{key:"addListeners",value:function(e){var t=new N(this.ctx);e.node.addEventListener("mouseenter",t.pathMouseEnter.bind(this,e)),e.node.addEventListener("mouseleave",t.pathMouseLeave.bind(this,e)),e.node.addEventListener("mousedown",t.pathMouseDown.bind(this,e))}}]),s}(),Yw=function(){function s(e,t){H(this,s),this.ctx=e,this.w=e.w,this.xRatio=t.xRatio,this.yRatio=t.yRatio,this.dynamicAnim=this.w.config.chart.animations.dynamicAnimation,this.helpers=new wg(e),this.rectRadius=this.w.config.plotOptions.heatmap.radius,this.strokeWidth=this.w.config.stroke.show?this.w.config.stroke.width:0}return W(s,[{key:"draw",value:function(e){var t=this.w,i=new N(this.ctx),o=i.group({class:"apexcharts-heatmap"});o.attr("clip-path","url(#gridRectMask".concat(t.globals.cuid,")"));var n=t.globals.gridWidth/t.globals.dataPoints,r=t.globals.gridHeight/t.globals.series.length,a=0,l=!1;this.negRange=this.helpers.checkColorRange();var c=e.slice();t.config.yaxis[0].reversed&&(l=!0,c.reverse());for(var d=l?0:c.length-1;l?d<c.length:d>=0;l?d++:d--){var h=i.group({class:"apexcharts-series apexcharts-heatmap-series",seriesName:T.escapeString(t.globals.seriesNames[d]),rel:d+1,"data:realIndex":d});if(this.ctx.series.addCollapsedClassToSeries(h,d),t.config.chart.dropShadow.enabled){var g=t.config.chart.dropShadow;new lt(this.ctx).dropShadow(h,g,d)}for(var m=0,p=t.config.plotOptions.heatmap.shadeIntensity,b=0;b<c[d].length;b++){var k=this.helpers.getShadeColor(t.config.chart.type,d,b,this.negRange),v=k.color,x=k.colorProps;t.config.fill.type==="image"&&(v=new Yt(this.ctx).fillPath({seriesNumber:d,dataPointIndex:b,opacity:t.globals.hasNegs?x.percent<0?1-(1+x.percent/100):p+x.percent/100:x.percent/100,patternID:T.randomId(),width:t.config.fill.image.width?t.config.fill.image.width:n,height:t.config.fill.image.height?t.config.fill.image.height:r}));var u=this.rectRadius,f=i.drawRect(m,a,n,r,u);if(f.attr({cx:m,cy:a}),f.node.classList.add("apexcharts-heatmap-rect"),h.add(f),f.attr({fill:v,i:d,index:d,j:b,val:e[d][b],"stroke-width":this.strokeWidth,stroke:t.config.plotOptions.heatmap.useFillColorAsStroke?v:t.globals.stroke.colors[0],color:v}),this.helpers.addListeners(f),t.config.chart.animations.enabled&&!t.globals.dataChanged){var w=1;t.globals.resized||(w=t.config.chart.animations.speed),this.animateHeatMap(f,m,a,n,r,w)}if(t.globals.dataChanged){var y=1;if(this.dynamicAnim.enabled&&t.globals.shouldAnimate){y=this.dynamicAnim.speed;var _=t.globals.previousPaths[d]&&t.globals.previousPaths[d][b]&&t.globals.previousPaths[d][b].color;_||(_="rgba(255, 255, 255, 0)"),this.animateHeatColor(f,T.isColorHex(_)?_:T.rgb2hex(_),T.isColorHex(v)?v:T.rgb2hex(v),y)}}var C=(0,t.config.dataLabels.formatter)(t.globals.series[d][b],{value:t.globals.series[d][b],seriesIndex:d,dataPointIndex:b,w:t}),A=this.helpers.calculateDataLabels({text:C,x:m+n/2,y:a+r/2,i:d,j:b,colorProps:x,series:c});A!==null&&h.add(A),m+=n}a+=r,o.add(h)}var S=t.globals.yAxisScale[0].result.slice();return t.config.yaxis[0].reversed?S.unshift(""):S.push(""),t.globals.yAxisScale[0].result=S,o}},{key:"animateHeatMap",value:function(e,t,i,o,n,r){var a=new Ko(this.ctx);a.animateRect(e,{x:t+o/2,y:i+n/2,width:0,height:0},{x:t,y:i,width:o,height:n},r,function(){a.animationCompleted(e)})}},{key:"animateHeatColor",value:function(e,t,i,o){e.attr({fill:t}).animate(o).attr({fill:i})}}]),s}(),kg=function(){function s(e){H(this,s),this.ctx=e,this.w=e.w}return W(s,[{key:"drawYAxisTexts",value:function(e,t,i,o){var n=this.w,r=n.config.yaxis[0],a=n.globals.yLabelFormatters[0];return new N(this.ctx).drawText({x:e+r.labels.offsetX,y:t+r.labels.offsetY,text:a(o,i),textAnchor:"middle",fontSize:r.labels.style.fontSize,fontFamily:r.labels.style.fontFamily,foreColor:Array.isArray(r.labels.style.colors)?r.labels.style.colors[i]:r.labels.style.colors})}}]),s}(),vg=function(){function s(e){H(this,s),this.ctx=e,this.w=e.w;var t=this.w;this.chartType=this.w.config.chart.type,this.initialAnim=this.w.config.chart.animations.enabled,this.dynamicAnim=this.initialAnim&&this.w.config.chart.animations.dynamicAnimation.enabled,this.animBeginArr=[0],this.animDur=0,this.donutDataLabels=this.w.config.plotOptions.pie.donut.labels,this.lineColorArr=t.globals.stroke.colors!==void 0?t.globals.stroke.colors:t.globals.colors,this.defaultSize=Math.min(t.globals.gridWidth,t.globals.gridHeight),this.centerY=this.defaultSize/2,this.centerX=t.globals.gridWidth/2,t.config.chart.type==="radialBar"?this.fullAngle=360:this.fullAngle=Math.abs(t.config.plotOptions.pie.endAngle-t.config.plotOptions.pie.startAngle),this.initialAngle=t.config.plotOptions.pie.startAngle%this.fullAngle,t.globals.radialSize=this.defaultSize/2.05-t.config.stroke.width-(t.config.chart.sparkline.enabled?0:t.config.chart.dropShadow.blur),this.donutSize=t.globals.radialSize*parseInt(t.config.plotOptions.pie.donut.size,10)/100;var i=t.config.plotOptions.pie.customScale,o=t.globals.gridWidth/2,n=t.globals.gridHeight/2;this.translateX=o-o*i,this.translateY=n-n*i,this.dataLabelsGroup=new N(this.ctx).group({class:"apexcharts-datalabels-group",transform:"translate(".concat(this.translateX,", ").concat(this.translateY,") scale(").concat(i,")")}),this.maxY=0,this.sliceLabels=[],this.sliceSizes=[],this.prevSectorAngleArr=[]}return W(s,[{key:"draw",value:function(e){var t=this,i=this.w,o=new N(this.ctx),n=o.group({class:"apexcharts-pie"});if(i.globals.noData)return n;for(var r=0,a=0;a<e.length;a++)r+=T.negToZero(e[a]);var l=[],c=o.group();r===0&&(r=1e-5),e.forEach(function(u){t.maxY=Math.max(t.maxY,u)}),i.config.yaxis[0].max&&(this.maxY=i.config.yaxis[0].max),i.config.grid.position==="back"&&this.chartType==="polarArea"&&this.drawPolarElements(n);for(var d=0;d<e.length;d++){var h=this.fullAngle*T.negToZero(e[d])/r;l.push(h),this.chartType==="polarArea"?(l[d]=this.fullAngle/e.length,this.sliceSizes.push(i.globals.radialSize*e[d]/this.maxY)):this.sliceSizes.push(i.globals.radialSize)}if(i.globals.dataChanged){for(var g,m=0,p=0;p<i.globals.previousPaths.length;p++)m+=T.negToZero(i.globals.previousPaths[p]);for(var b=0;b<i.globals.previousPaths.length;b++)g=this.fullAngle*T.negToZero(i.globals.previousPaths[b])/m,this.prevSectorAngleArr.push(g)}if(this.donutSize<0&&(this.donutSize=0),this.chartType==="donut"){var k=o.drawCircle(this.donutSize);k.attr({cx:this.centerX,cy:this.centerY,fill:i.config.plotOptions.pie.donut.background?i.config.plotOptions.pie.donut.background:"transparent"}),c.add(k)}var v=this.drawArcs(l,e);if(this.sliceLabels.forEach(function(u){v.add(u)}),c.attr({transform:"translate(".concat(this.translateX,", ").concat(this.translateY,") scale(").concat(i.config.plotOptions.pie.customScale,")")}),c.add(v),n.add(c),this.donutDataLabels.show){var x=this.renderInnerDataLabels(this.dataLabelsGroup,this.donutDataLabels,{hollowSize:this.donutSize,centerX:this.centerX,centerY:this.centerY,opacity:this.donutDataLabels.show});n.add(x)}return i.config.grid.position==="front"&&this.chartType==="polarArea"&&this.drawPolarElements(n),n}},{key:"drawArcs",value:function(e,t){var i=this.w,o=new lt(this.ctx),n=new N(this.ctx),r=new Yt(this.ctx),a=n.group({class:"apexcharts-slices"}),l=this.initialAngle,c=this.initialAngle,d=this.initialAngle,h=this.initialAngle;this.strokeWidth=i.config.stroke.show?i.config.stroke.width:0;for(var g=0;g<e.length;g++){var m=n.group({class:"apexcharts-series apexcharts-pie-series",seriesName:T.escapeString(i.globals.seriesNames[g]),rel:g+1,"data:realIndex":g});a.add(m),c=h,d=(l=d)+e[g],h=c+this.prevSectorAngleArr[g];var p=d<l?this.fullAngle+d-l:d-l,b=r.fillPath({seriesNumber:g,size:this.sliceSizes[g],value:t[g]}),k=this.getChangedPath(c,h),v=n.drawPath({d:k,stroke:Array.isArray(this.lineColorArr)?this.lineColorArr[g]:this.lineColorArr,strokeWidth:0,fill:b,fillOpacity:i.config.fill.opacity,classes:"apexcharts-pie-area apexcharts-".concat(this.chartType.toLowerCase(),"-slice-").concat(g)});if(v.attr({index:0,j:g}),o.setSelectionFilter(v,0,g),i.config.chart.dropShadow.enabled){var x=i.config.chart.dropShadow;o.dropShadow(v,x,g)}this.addListeners(v,this.donutDataLabels),N.setAttrs(v.node,{"data:angle":p,"data:startAngle":l,"data:strokeWidth":this.strokeWidth,"data:value":t[g]});var u={x:0,y:0};this.chartType==="pie"||this.chartType==="polarArea"?u=T.polarToCartesian(this.centerX,this.centerY,i.globals.radialSize/1.25+i.config.plotOptions.pie.dataLabels.offset,(l+p/2)%this.fullAngle):this.chartType==="donut"&&(u=T.polarToCartesian(this.centerX,this.centerY,(i.globals.radialSize+this.donutSize)/2+i.config.plotOptions.pie.dataLabels.offset,(l+p/2)%this.fullAngle)),m.add(v);var f=0;if(!this.initialAnim||i.globals.resized||i.globals.dataChanged?this.animBeginArr.push(0):((f=p/this.fullAngle*i.config.chart.animations.speed)===0&&(f=1),this.animDur=f+this.animDur,this.animBeginArr.push(this.animDur)),this.dynamicAnim&&i.globals.dataChanged?this.animatePaths(v,{size:this.sliceSizes[g],endAngle:d,startAngle:l,prevStartAngle:c,prevEndAngle:h,animateStartingPos:!0,i:g,animBeginArr:this.animBeginArr,shouldSetPrevPaths:!0,dur:i.config.chart.animations.dynamicAnimation.speed}):this.animatePaths(v,{size:this.sliceSizes[g],endAngle:d,startAngle:l,i:g,totalItems:e.length-1,animBeginArr:this.animBeginArr,dur:f}),i.config.plotOptions.pie.expandOnClick&&this.chartType!=="polarArea"&&v.node.addEventListener("mouseup",this.pieClicked.bind(this,g)),i.globals.selectedDataPoints[0]!==void 0&&i.globals.selectedDataPoints[0].indexOf(g)>-1&&this.pieClicked(g),i.config.dataLabels.enabled){var w=u.x,y=u.y,_=100*p/this.fullAngle+"%";if(p!==0&&i.config.plotOptions.pie.dataLabels.minAngleToShowLabel<e[g]){var C=i.config.dataLabels.formatter;C!==void 0&&(_=C(i.globals.seriesPercent[g][0],{seriesIndex:g,w:i}));var A=i.globals.dataLabels.style.colors[g],S=n.group({class:"apexcharts-datalabels"}),P=n.drawText({x:w,y,text:_,textAnchor:"middle",fontSize:i.config.dataLabels.style.fontSize,fontFamily:i.config.dataLabels.style.fontFamily,fontWeight:i.config.dataLabels.style.fontWeight,foreColor:A});if(S.add(P),i.config.dataLabels.dropShadow.enabled){var L=i.config.dataLabels.dropShadow;o.dropShadow(P,L)}P.node.classList.add("apexcharts-pie-label"),i.config.chart.animations.animate&&i.globals.resized===!1&&(P.node.classList.add("apexcharts-pie-label-delay"),P.node.style.animationDelay=i.config.chart.animations.speed/940+"s"),this.sliceLabels.push(S)}}}return a}},{key:"addListeners",value:function(e,t){var i=new N(this.ctx);e.node.addEventListener("mouseenter",i.pathMouseEnter.bind(this,e)),e.node.addEventListener("mouseleave",i.pathMouseLeave.bind(this,e)),e.node.addEventListener("mouseleave",this.revertDataLabelsInner.bind(this,e.node,t)),e.node.addEventListener("mousedown",i.pathMouseDown.bind(this,e)),this.donutDataLabels.total.showAlways||(e.node.addEventListener("mouseenter",this.printDataLabelsInner.bind(this,e.node,t)),e.node.addEventListener("mousedown",this.printDataLabelsInner.bind(this,e.node,t)))}},{key:"animatePaths",value:function(e,t){var i=this.w,o=t.endAngle<t.startAngle?this.fullAngle+t.endAngle-t.startAngle:t.endAngle-t.startAngle,n=o,r=t.startAngle,a=t.startAngle;t.prevStartAngle!==void 0&&t.prevEndAngle!==void 0&&(r=t.prevEndAngle,n=t.prevEndAngle<t.prevStartAngle?this.fullAngle+t.prevEndAngle-t.prevStartAngle:t.prevEndAngle-t.prevStartAngle),t.i===i.config.series.length-1&&(o+a>this.fullAngle?t.endAngle=t.endAngle-(o+a):o+a<this.fullAngle&&(t.endAngle=t.endAngle+(this.fullAngle-(o+a)))),o===this.fullAngle&&(o=this.fullAngle-.01),this.animateArc(e,r,a,o,n,t)}},{key:"animateArc",value:function(e,t,i,o,n,r){var a,l=this,c=this.w,d=new Ko(this.ctx),h=r.size;(isNaN(t)||isNaN(n))&&(t=i,n=o,r.dur=0);var g=o,m=i,p=t<i?this.fullAngle+t-i:t-i;c.globals.dataChanged&&r.shouldSetPrevPaths&&r.prevEndAngle&&(a=l.getPiePath({me:l,startAngle:r.prevStartAngle,angle:r.prevEndAngle<r.prevStartAngle?this.fullAngle+r.prevEndAngle-r.prevStartAngle:r.prevEndAngle-r.prevStartAngle,size:h}),e.attr({d:a})),r.dur!==0?e.animate(r.dur,c.globals.easing,r.animBeginArr[r.i]).afterAll(function(){l.chartType!=="pie"&&l.chartType!=="donut"&&l.chartType!=="polarArea"||this.animate(c.config.chart.animations.dynamicAnimation.speed).attr({"stroke-width":l.strokeWidth}),r.i===c.config.series.length-1&&d.animationCompleted(e)}).during(function(b){g=p+(o-p)*b,r.animateStartingPos&&(g=n+(o-n)*b,m=t-n+(i-(t-n))*b),a=l.getPiePath({me:l,startAngle:m,angle:g,size:h}),e.node.setAttribute("data:pathOrig",a),e.attr({d:a})}):(a=l.getPiePath({me:l,startAngle:m,angle:o,size:h}),r.isTrack||(c.globals.animationEnded=!0),e.node.setAttribute("data:pathOrig",a),e.attr({d:a,"stroke-width":l.strokeWidth}))}},{key:"pieClicked",value:function(e){var t,i=this.w,o=this,n=o.sliceSizes[e]+(i.config.plotOptions.pie.expandOnClick?4:0),r=i.globals.dom.Paper.select(".apexcharts-".concat(o.chartType.toLowerCase(),"-slice-").concat(e)).members[0];if(r.attr("data:pieClicked")!=="true"){var a=i.globals.dom.baseEl.getElementsByClassName("apexcharts-pie-area");Array.prototype.forEach.call(a,function(h){h.setAttribute("data:pieClicked","false");var g=h.getAttribute("data:pathOrig");g&&h.setAttribute("d",g)}),i.globals.capturedDataPointIndex=e,r.attr("data:pieClicked","true");var l=parseInt(r.attr("data:startAngle"),10),c=parseInt(r.attr("data:angle"),10);t=o.getPiePath({me:o,startAngle:l,angle:c,size:n}),c!==360&&r.plot(t)}else{r.attr({"data:pieClicked":"false"}),this.revertDataLabelsInner(r.node,this.donutDataLabels);var d=r.attr("data:pathOrig");r.attr({d})}}},{key:"getChangedPath",value:function(e,t){var i="";return this.dynamicAnim&&this.w.globals.dataChanged&&(i=this.getPiePath({me:this,startAngle:e,angle:t-e,size:this.size})),i}},{key:"getPiePath",value:function(e){var t,i=e.me,o=e.startAngle,n=e.angle,r=e.size,a=new N(this.ctx),l=o,c=Math.PI*(l-90)/180,d=n+o;Math.ceil(d)>=this.fullAngle+this.w.config.plotOptions.pie.startAngle%this.fullAngle&&(d=this.fullAngle+this.w.config.plotOptions.pie.startAngle%this.fullAngle-.01),Math.ceil(d)>this.fullAngle&&(d-=this.fullAngle);var h=Math.PI*(d-90)/180,g=i.centerX+r*Math.cos(c),m=i.centerY+r*Math.sin(c),p=i.centerX+r*Math.cos(h),b=i.centerY+r*Math.sin(h),k=T.polarToCartesian(i.centerX,i.centerY,i.donutSize,d),v=T.polarToCartesian(i.centerX,i.centerY,i.donutSize,l),x=n>180?1:0,u=["M",g,m,"A",r,r,0,x,1,p,b];return t=i.chartType==="donut"?[].concat(u,["L",k.x,k.y,"A",i.donutSize,i.donutSize,0,x,0,v.x,v.y,"L",g,m,"z"]).join(" "):i.chartType==="pie"||i.chartType==="polarArea"?[].concat(u,["L",i.centerX,i.centerY,"L",g,m]).join(" "):[].concat(u).join(" "),a.roundPathCorners(t,2*this.strokeWidth)}},{key:"drawPolarElements",value:function(e){var t=this.w,i=new gg(this.ctx),o=new N(this.ctx),n=new kg(this.ctx),r=o.group(),a=o.group(),l=i.niceScale(0,Math.ceil(this.maxY),0),c=l.result.reverse(),d=l.result.length;this.maxY=l.niceMax;for(var h=t.globals.radialSize,g=h/(d-1),m=0;m<d-1;m++){var p=o.drawCircle(h);if(p.attr({cx:this.centerX,cy:this.centerY,fill:"none","stroke-width":t.config.plotOptions.polarArea.rings.strokeWidth,stroke:t.config.plotOptions.polarArea.rings.strokeColor}),t.config.yaxis[0].show){var b=n.drawYAxisTexts(this.centerX,this.centerY-h+parseInt(t.config.yaxis[0].labels.style.fontSize,10)/2,m,c[m]);a.add(b)}r.add(p),h-=g}this.drawSpokes(e),e.add(r),e.add(a)}},{key:"renderInnerDataLabels",value:function(e,t,i){var o=this.w,n=new N(this.ctx),r=t.total.show;e.node.innerHTML="",e.node.style.opacity=i.opacity;var a,l,c=i.centerX,d=i.centerY;a=t.name.color===void 0?o.globals.colors[0]:t.name.color;var h=t.name.fontSize,g=t.name.fontFamily,m=t.name.fontWeight;l=t.value.color===void 0?o.config.chart.foreColor:t.value.color;var p=t.value.formatter,b="",k="";if(r?(a=t.total.color,h=t.total.fontSize,g=t.total.fontFamily,m=t.total.fontWeight,k=t.total.label,b=t.total.formatter(o)):o.globals.series.length===1&&(b=p(o.globals.series[0],o),k=o.globals.seriesNames[0]),k&&(k=t.name.formatter(k,t.total.show,o)),t.name.show){var v=n.drawText({x:c,y:d+parseFloat(t.name.offsetY),text:k,textAnchor:"middle",foreColor:a,fontSize:h,fontWeight:m,fontFamily:g});v.node.classList.add("apexcharts-datalabel-label"),e.add(v)}if(t.value.show){var x=t.name.show?parseFloat(t.value.offsetY)+16:t.value.offsetY,u=n.drawText({x:c,y:d+x,text:b,textAnchor:"middle",foreColor:l,fontWeight:t.value.fontWeight,fontSize:t.value.fontSize,fontFamily:t.value.fontFamily});u.node.classList.add("apexcharts-datalabel-value"),e.add(u)}return e}},{key:"printInnerLabels",value:function(e,t,i,o){var n,r=this.w;o?n=e.name.color===void 0?r.globals.colors[parseInt(o.parentNode.getAttribute("rel"),10)-1]:e.name.color:r.globals.series.length>1&&e.total.show&&(n=e.total.color);var a=r.globals.dom.baseEl.querySelector(".apexcharts-datalabel-label"),l=r.globals.dom.baseEl.querySelector(".apexcharts-datalabel-value");i=(0,e.value.formatter)(i,r),o||typeof e.total.formatter!="function"||(i=e.total.formatter(r));var c=t===e.total.label;t=e.name.formatter(t,c,r),a!==null&&(a.textContent=t),l!==null&&(l.textContent=i),a!==null&&(a.style.fill=n)}},{key:"printDataLabelsInner",value:function(e,t){var i=this.w,o=e.getAttribute("data:value"),n=i.globals.seriesNames[parseInt(e.parentNode.getAttribute("rel"),10)-1];i.globals.series.length>1&&this.printInnerLabels(t,n,o,e);var r=i.globals.dom.baseEl.querySelector(".apexcharts-datalabels-group");r!==null&&(r.style.opacity=1)}},{key:"drawSpokes",value:function(e){var t=this,i=this.w,o=new N(this.ctx),n=i.config.plotOptions.polarArea.spokes;if(n.strokeWidth!==0){for(var r=[],a=360/i.globals.series.length,l=0;l<i.globals.series.length;l++)r.push(T.polarToCartesian(this.centerX,this.centerY,i.globals.radialSize,i.config.plotOptions.pie.startAngle+a*l));r.forEach(function(c,d){var h=o.drawLine(c.x,c.y,t.centerX,t.centerY,Array.isArray(n.connectorColors)?n.connectorColors[d]:n.connectorColors);e.add(h)})}}},{key:"revertDataLabelsInner",value:function(){var e=this.w;if(this.donutDataLabels.show){var t=e.globals.dom.Paper.select(".apexcharts-datalabels-group").members[0],i=this.renderInnerDataLabels(t,this.donutDataLabels,{hollowSize:this.donutSize,centerX:this.centerX,centerY:this.centerY,opacity:this.donutDataLabels.show});e.globals.dom.Paper.select(".apexcharts-radialbar, .apexcharts-pie").members[0].add(i)}}}]),s}(),Xw=function(){function s(e){H(this,s),this.ctx=e,this.w=e.w,this.chartType=this.w.config.chart.type,this.initialAnim=this.w.config.chart.animations.enabled,this.dynamicAnim=this.initialAnim&&this.w.config.chart.animations.dynamicAnimation.enabled,this.animDur=0;var t=this.w;this.graphics=new N(this.ctx),this.lineColorArr=t.globals.stroke.colors!==void 0?t.globals.stroke.colors:t.globals.colors,this.defaultSize=t.globals.svgHeight<t.globals.svgWidth?t.globals.gridHeight+1.5*t.globals.goldenPadding:t.globals.gridWidth,this.isLog=t.config.yaxis[0].logarithmic,this.logBase=t.config.yaxis[0].logBase,this.coreUtils=new De(this.ctx),this.maxValue=this.isLog?this.coreUtils.getLogVal(this.logBase,t.globals.maxY,0):t.globals.maxY,this.minValue=this.isLog?this.coreUtils.getLogVal(this.logBase,this.w.globals.minY,0):t.globals.minY,this.polygons=t.config.plotOptions.radar.polygons,this.strokeWidth=t.config.stroke.show?t.config.stroke.width:0,this.size=this.defaultSize/2.1-this.strokeWidth-t.config.chart.dropShadow.blur,t.config.xaxis.labels.show&&(this.size=this.size-t.globals.xAxisLabelsWidth/1.75),t.config.plotOptions.radar.size!==void 0&&(this.size=t.config.plotOptions.radar.size),this.dataRadiusOfPercent=[],this.dataRadius=[],this.angleArr=[],this.yaxisLabelsTextsPos=[]}return W(s,[{key:"draw",value:function(e){var t=this,i=this.w,o=new Yt(this.ctx),n=[],r=new Xo(this.ctx);e.length&&(this.dataPointsLen=e[i.globals.maxValsInArrayIndex].length),this.disAngle=2*Math.PI/this.dataPointsLen;var a=i.globals.gridWidth/2,l=i.globals.gridHeight/2,c=a+i.config.plotOptions.radar.offsetX,d=l+i.config.plotOptions.radar.offsetY,h=this.graphics.group({class:"apexcharts-radar-series apexcharts-plot-series",transform:"translate(".concat(c||0,", ").concat(d||0,")")}),g=[],m=null,p=null;if(this.yaxisLabels=this.graphics.group({class:"apexcharts-yaxis"}),e.forEach(function(k,v){var x=k.length===i.globals.dataPoints,u=t.graphics.group().attr({class:"apexcharts-series","data:longestSeries":x,seriesName:T.escapeString(i.globals.seriesNames[v]),rel:v+1,"data:realIndex":v});t.dataRadiusOfPercent[v]=[],t.dataRadius[v]=[],t.angleArr[v]=[],k.forEach(function(I,R){var z=Math.abs(t.maxValue-t.minValue);I-=t.minValue,t.isLog&&(I=t.coreUtils.getLogVal(t.logBase,I,0)),t.dataRadiusOfPercent[v][R]=I/z,t.dataRadius[v][R]=t.dataRadiusOfPercent[v][R]*t.size,t.angleArr[v][R]=R*t.disAngle}),g=t.getDataPointsPos(t.dataRadius[v],t.angleArr[v]);var f=t.createPaths(g,{x:0,y:0});m=t.graphics.group({class:"apexcharts-series-markers-wrap apexcharts-element-hidden"}),p=t.graphics.group({class:"apexcharts-datalabels","data:realIndex":v}),i.globals.delayedElements.push({el:m.node,index:v});var w={i:v,realIndex:v,animationDelay:v,initialSpeed:i.config.chart.animations.speed,dataChangeSpeed:i.config.chart.animations.dynamicAnimation.speed,className:"apexcharts-radar",shouldClipToGrid:!1,bindEventsOnPaths:!1,stroke:i.globals.stroke.colors[v],strokeLineCap:i.config.stroke.lineCap},y=null;i.globals.previousPaths.length>0&&(y=t.getPreviousPath(v));for(var _=0;_<f.linePathsTo.length;_++){var C=t.graphics.renderPaths(F(F({},w),{},{pathFrom:y===null?f.linePathsFrom[_]:y,pathTo:f.linePathsTo[_],strokeWidth:Array.isArray(t.strokeWidth)?t.strokeWidth[v]:t.strokeWidth,fill:"none",drawShadow:!1}));u.add(C);var A=o.fillPath({seriesNumber:v}),S=t.graphics.renderPaths(F(F({},w),{},{pathFrom:y===null?f.areaPathsFrom[_]:y,pathTo:f.areaPathsTo[_],strokeWidth:0,fill:A,drawShadow:!1}));if(i.config.chart.dropShadow.enabled){var P=new lt(t.ctx),L=i.config.chart.dropShadow;P.dropShadow(S,Object.assign({},L,{noUserSpaceOnUse:!0}),v)}u.add(S)}k.forEach(function(I,R){var z=new Zo(t.ctx).getMarkerConfig({cssClass:"apexcharts-marker",seriesIndex:v,dataPointIndex:R}),U=t.graphics.drawMarker(g[R].x,g[R].y,z);U.attr("rel",R),U.attr("j",R),U.attr("index",v),U.node.setAttribute("default-marker-size",z.pSize);var X=t.graphics.group({class:"apexcharts-series-markers"});X&&X.add(U),m.add(X),u.add(m);var q=i.config.dataLabels;if(q.enabled){var te=q.formatter(i.globals.series[v][R],{seriesIndex:v,dataPointIndex:R,w:i});r.plotDataLabelsText({x:g[R].x,y:g[R].y,text:te,textAnchor:"middle",i:v,j:v,parent:p,offsetCorrection:!1,dataLabelsConfig:F({},q)})}u.add(p)}),n.push(u)}),this.drawPolygons({parent:h}),i.config.xaxis.labels.show){var b=this.drawXAxisTexts();h.add(b)}return n.forEach(function(k){h.add(k)}),h.add(this.yaxisLabels),h}},{key:"drawPolygons",value:function(e){for(var t=this,i=this.w,o=e.parent,n=new kg(this.ctx),r=i.globals.yAxisScale[0].result.reverse(),a=r.length,l=[],c=this.size/(a-1),d=0;d<a;d++)l[d]=c*d;l.reverse();var h=[],g=[];l.forEach(function(m,p){var b=T.getPolygonPos(m,t.dataPointsLen),k="";b.forEach(function(v,x){if(p===0){var u=t.graphics.drawLine(v.x,v.y,0,0,Array.isArray(t.polygons.connectorColors)?t.polygons.connectorColors[x]:t.polygons.connectorColors);g.push(u)}x===0&&t.yaxisLabelsTextsPos.push({x:v.x,y:v.y}),k+=v.x+","+v.y+" "}),h.push(k)}),h.forEach(function(m,p){var b=t.polygons.strokeColors,k=t.polygons.strokeWidth,v=t.graphics.drawPolygon(m,Array.isArray(b)?b[p]:b,Array.isArray(k)?k[p]:k,i.globals.radarPolygons.fill.colors[p]);o.add(v)}),g.forEach(function(m){o.add(m)}),i.config.yaxis[0].show&&this.yaxisLabelsTextsPos.forEach(function(m,p){var b=n.drawYAxisTexts(m.x,m.y,p,r[p]);t.yaxisLabels.add(b)})}},{key:"drawXAxisTexts",value:function(){var e=this,t=this.w,i=t.config.xaxis.labels,o=this.graphics.group({class:"apexcharts-xaxis"}),n=T.getPolygonPos(this.size,this.dataPointsLen);return t.globals.labels.forEach(function(r,a){var l=t.config.xaxis.labels.formatter,c=new Xo(e.ctx);if(n[a]){var d=e.getTextPos(n[a],e.size),h=l(r,{seriesIndex:-1,dataPointIndex:a,w:t});c.plotDataLabelsText({x:d.newX,y:d.newY,text:h,textAnchor:d.textAnchor,i:a,j:a,parent:o,className:"apexcharts-xaxis-label",color:Array.isArray(i.style.colors)&&i.style.colors[a]?i.style.colors[a]:"#a8a8a8",dataLabelsConfig:F({textAnchor:d.textAnchor,dropShadow:{enabled:!1}},i),offsetCorrection:!1}).on("click",function(g){if(typeof t.config.chart.events.xAxisLabelClick=="function"){var m=Object.assign({},t,{labelIndex:a});t.config.chart.events.xAxisLabelClick(g,e.ctx,m)}})}}),o}},{key:"createPaths",value:function(e,t){var i=this,o=[],n=[],r=[],a=[];if(e.length){n=[this.graphics.move(t.x,t.y)],a=[this.graphics.move(t.x,t.y)];var l=this.graphics.move(e[0].x,e[0].y),c=this.graphics.move(e[0].x,e[0].y);e.forEach(function(d,h){l+=i.graphics.line(d.x,d.y),c+=i.graphics.line(d.x,d.y),h===e.length-1&&(l+="Z",c+="Z")}),o.push(l),r.push(c)}return{linePathsFrom:n,linePathsTo:o,areaPathsFrom:a,areaPathsTo:r}}},{key:"getTextPos",value:function(e,t){var i="middle",o=e.x,n=e.y;return Math.abs(e.x)>=10?e.x>0?(i="start",o+=10):e.x<0&&(i="end",o-=10):i="middle",Math.abs(e.y)>=t-10&&(e.y<0?n-=10:e.y>0&&(n+=10)),{textAnchor:i,newX:o,newY:n}}},{key:"getPreviousPath",value:function(e){for(var t=this.w,i=null,o=0;o<t.globals.previousPaths.length;o++){var n=t.globals.previousPaths[o];n.paths.length>0&&parseInt(n.realIndex,10)===parseInt(e,10)&&t.globals.previousPaths[o].paths[0]!==void 0&&(i=t.globals.previousPaths[o].paths[0].d)}return i}},{key:"getDataPointsPos",value:function(e,t){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.dataPointsLen;e=e||[],t=t||[];for(var o=[],n=0;n<i;n++){var r={};r.x=e[n]*Math.sin(t[n]),r.y=-e[n]*Math.cos(t[n]),o.push(r)}return o}}]),s}(),qw=function(s){ts(t,vg);var e=is(t);function t(i){var o;H(this,t),(o=e.call(this,i)).ctx=i,o.w=i.w,o.animBeginArr=[0],o.animDur=0;var n=o.w;return o.startAngle=n.config.plotOptions.radialBar.startAngle,o.endAngle=n.config.plotOptions.radialBar.endAngle,o.totalAngle=Math.abs(n.config.plotOptions.radialBar.endAngle-n.config.plotOptions.radialBar.startAngle),o.trackStartAngle=n.config.plotOptions.radialBar.track.startAngle,o.trackEndAngle=n.config.plotOptions.radialBar.track.endAngle,o.barLabels=o.w.config.plotOptions.radialBar.barLabels,o.donutDataLabels=o.w.config.plotOptions.radialBar.dataLabels,o.radialDataLabels=o.donutDataLabels,o.trackStartAngle||(o.trackStartAngle=o.startAngle),o.trackEndAngle||(o.trackEndAngle=o.endAngle),o.endAngle===360&&(o.endAngle=359.99),o.margin=parseInt(n.config.plotOptions.radialBar.track.margin,10),o.onBarLabelClick=o.onBarLabelClick.bind(sg(o)),o}return W(t,[{key:"draw",value:function(i){var o=this.w,n=new N(this.ctx),r=n.group({class:"apexcharts-radialbar"});if(o.globals.noData)return r;var a=n.group(),l=this.defaultSize/2,c=o.globals.gridWidth/2,d=this.defaultSize/2.05;o.config.chart.sparkline.enabled||(d=d-o.config.stroke.width-o.config.chart.dropShadow.blur);var h=o.globals.fill.colors;if(o.config.plotOptions.radialBar.track.show){var g=this.drawTracks({size:d,centerX:c,centerY:l,colorArr:h,series:i});a.add(g)}var m=this.drawArcs({size:d,centerX:c,centerY:l,colorArr:h,series:i}),p=360;o.config.plotOptions.radialBar.startAngle<0&&(p=this.totalAngle);var b=(360-p)/360;if(o.globals.radialSize=d-d*b,this.radialDataLabels.value.show){var k=Math.max(this.radialDataLabels.value.offsetY,this.radialDataLabels.name.offsetY);o.globals.radialSize+=k*b}return a.add(m.g),o.config.plotOptions.radialBar.hollow.position==="front"&&(m.g.add(m.elHollow),m.dataLabels&&m.g.add(m.dataLabels)),r.add(a),r}},{key:"drawTracks",value:function(i){var o=this.w,n=new N(this.ctx),r=n.group({class:"apexcharts-tracks"}),a=new lt(this.ctx),l=new Yt(this.ctx),c=this.getStrokeWidth(i);i.size=i.size-c/2;for(var d=0;d<i.series.length;d++){var h=n.group({class:"apexcharts-radialbar-track apexcharts-track"});r.add(h),h.attr({rel:d+1}),i.size=i.size-c-this.margin;var g=o.config.plotOptions.radialBar.track,m=l.fillPath({seriesNumber:0,size:i.size,fillColors:Array.isArray(g.background)?g.background[d]:g.background,solid:!0}),p=this.trackStartAngle,b=this.trackEndAngle;Math.abs(b)+Math.abs(p)>=360&&(b=360-Math.abs(this.startAngle)-.1);var k=n.drawPath({d:"",stroke:m,strokeWidth:c*parseInt(g.strokeWidth,10)/100,fill:"none",strokeOpacity:g.opacity,classes:"apexcharts-radialbar-area"});if(g.dropShadow.enabled){var v=g.dropShadow;a.dropShadow(k,v)}h.add(k),k.attr("id","apexcharts-radialbarTrack-"+d),this.animatePaths(k,{centerX:i.centerX,centerY:i.centerY,endAngle:b,startAngle:p,size:i.size,i:d,totalItems:2,animBeginArr:0,dur:0,isTrack:!0,easing:o.globals.easing})}return r}},{key:"drawArcs",value:function(i){var o=this.w,n=new N(this.ctx),r=new Yt(this.ctx),a=new lt(this.ctx),l=n.group(),c=this.getStrokeWidth(i);i.size=i.size-c/2;var d=o.config.plotOptions.radialBar.hollow.background,h=i.size-c*i.series.length-this.margin*i.series.length-c*parseInt(o.config.plotOptions.radialBar.track.strokeWidth,10)/100/2,g=h-o.config.plotOptions.radialBar.hollow.margin;o.config.plotOptions.radialBar.hollow.image!==void 0&&(d=this.drawHollowImage(i,l,h,d));var m=this.drawHollow({size:g,centerX:i.centerX,centerY:i.centerY,fill:d||"transparent"});if(o.config.plotOptions.radialBar.hollow.dropShadow.enabled){var p=o.config.plotOptions.radialBar.hollow.dropShadow;a.dropShadow(m,p)}var b=1;!this.radialDataLabels.total.show&&o.globals.series.length>1&&(b=0);var k=null;if(this.radialDataLabels.show){var v=o.globals.dom.Paper.select(".apexcharts-datalabels-group").members[0];k=this.renderInnerDataLabels(v,this.radialDataLabels,{hollowSize:h,centerX:i.centerX,centerY:i.centerY,opacity:b})}o.config.plotOptions.radialBar.hollow.position==="back"&&(l.add(m),k&&l.add(k));var x=!1;o.config.plotOptions.radialBar.inverseOrder&&(x=!0);for(var u=x?i.series.length-1:0;x?u>=0:u<i.series.length;x?u--:u++){var f=n.group({class:"apexcharts-series apexcharts-radial-series",seriesName:T.escapeString(o.globals.seriesNames[u])});l.add(f),f.attr({rel:u+1,"data:realIndex":u}),this.ctx.series.addCollapsedClassToSeries(f,u),i.size=i.size-c-this.margin;var w=r.fillPath({seriesNumber:u,size:i.size,value:i.series[u]}),y=this.startAngle,_=void 0,C=T.negToZero(i.series[u]>100?100:i.series[u])/100,A=Math.round(this.totalAngle*C)+this.startAngle,S=void 0;o.globals.dataChanged&&(_=this.startAngle,S=Math.round(this.totalAngle*T.negToZero(o.globals.previousPaths[u])/100)+_),Math.abs(A)+Math.abs(y)>=360&&(A-=.01),Math.abs(S)+Math.abs(_)>=360&&(S-=.01);var P=A-y,L=Array.isArray(o.config.stroke.dashArray)?o.config.stroke.dashArray[u]:o.config.stroke.dashArray,I=n.drawPath({d:"",stroke:w,strokeWidth:c,fill:"none",fillOpacity:o.config.fill.opacity,classes:"apexcharts-radialbar-area apexcharts-radialbar-slice-"+u,strokeDashArray:L});if(N.setAttrs(I.node,{"data:angle":P,"data:value":i.series[u]}),o.config.chart.dropShadow.enabled){var R=o.config.chart.dropShadow;a.dropShadow(I,R,u)}if(a.setSelectionFilter(I,0,u),this.addListeners(I,this.radialDataLabels),f.add(I),I.attr({index:0,j:u}),this.barLabels.enabled){var z=T.polarToCartesian(i.centerX,i.centerY,i.size,y),U=this.barLabels.formatter(o.globals.seriesNames[u],{seriesIndex:u,w:o}),X=["apexcharts-radialbar-label"];this.barLabels.onClick||X.push("apexcharts-no-click");var q=this.barLabels.useSeriesColors?o.globals.colors[u]:o.config.chart.foreColor;q||(q=o.config.chart.foreColor);var te=z.x+this.barLabels.offsetX,J=z.y+this.barLabels.offsetY,le=n.drawText({x:te,y:J,text:U,textAnchor:"end",dominantBaseline:"middle",fontFamily:this.barLabels.fontFamily,fontWeight:this.barLabels.fontWeight,fontSize:this.barLabels.fontSize,foreColor:q,cssClass:X.join(" ")});le.on("click",this.onBarLabelClick),le.attr({rel:u+1}),y!==0&&le.attr({"transform-origin":"".concat(te," ").concat(J),transform:"rotate(".concat(y," 0 0)")}),f.add(le)}var Ee=0;!this.initialAnim||o.globals.resized||o.globals.dataChanged||(Ee=o.config.chart.animations.speed),o.globals.dataChanged&&(Ee=o.config.chart.animations.dynamicAnimation.speed),this.animDur=Ee/(1.2*i.series.length)+this.animDur,this.animBeginArr.push(this.animDur),this.animatePaths(I,{centerX:i.centerX,centerY:i.centerY,endAngle:A,startAngle:y,prevEndAngle:S,prevStartAngle:_,size:i.size,i:u,totalItems:2,animBeginArr:this.animBeginArr,dur:Ee,shouldSetPrevPaths:!0,easing:o.globals.easing})}return{g:l,elHollow:m,dataLabels:k}}},{key:"drawHollow",value:function(i){var o=new N(this.ctx).drawCircle(2*i.size);return o.attr({class:"apexcharts-radialbar-hollow",cx:i.centerX,cy:i.centerY,r:i.size,fill:i.fill}),o}},{key:"drawHollowImage",value:function(i,o,n,r){var a=this.w,l=new Yt(this.ctx),c=T.randomId(),d=a.config.plotOptions.radialBar.hollow.image;if(a.config.plotOptions.radialBar.hollow.imageClipped)l.clippedImgArea({width:n,height:n,image:d,patternID:"pattern".concat(a.globals.cuid).concat(c)}),r="url(#pattern".concat(a.globals.cuid).concat(c,")");else{var h=a.config.plotOptions.radialBar.hollow.imageWidth,g=a.config.plotOptions.radialBar.hollow.imageHeight;if(h===void 0&&g===void 0){var m=a.globals.dom.Paper.image(d).loaded(function(b){this.move(i.centerX-b.width/2+a.config.plotOptions.radialBar.hollow.imageOffsetX,i.centerY-b.height/2+a.config.plotOptions.radialBar.hollow.imageOffsetY)});o.add(m)}else{var p=a.globals.dom.Paper.image(d).loaded(function(b){this.move(i.centerX-h/2+a.config.plotOptions.radialBar.hollow.imageOffsetX,i.centerY-g/2+a.config.plotOptions.radialBar.hollow.imageOffsetY),this.size(h,g)});o.add(p)}}return r}},{key:"getStrokeWidth",value:function(i){var o=this.w;return i.size*(100-parseInt(o.config.plotOptions.radialBar.hollow.size,10))/100/(i.series.length+1)-this.margin}},{key:"onBarLabelClick",value:function(i){var o=parseInt(i.target.getAttribute("rel"),10)-1,n=this.barLabels.onClick,r=this.w;n&&n(r.globals.seriesNames[o],{w:r,seriesIndex:o})}}]),t}(),Kw=function(s){ts(t,qo);var e=is(t);function t(){return H(this,t),e.apply(this,arguments)}return W(t,[{key:"draw",value:function(i,o){var n=this.w,r=new N(this.ctx);this.rangeBarOptions=this.w.config.plotOptions.rangeBar,this.series=i,this.seriesRangeStart=n.globals.seriesRangeStart,this.seriesRangeEnd=n.globals.seriesRangeEnd,this.barHelpers.initVariables(i);for(var a=r.group({class:"apexcharts-rangebar-series apexcharts-plot-series"}),l=0;l<i.length;l++){var c,d,h,g,m=void 0,p=void 0,b=n.globals.comboCharts?o[l]:l,k=this.barHelpers.getGroupIndex(b).columnGroupIndex,v=r.group({class:"apexcharts-series",seriesName:T.escapeString(n.globals.seriesNames[b]),rel:l+1,"data:realIndex":b});this.ctx.series.addCollapsedClassToSeries(v,b),i[l].length>0&&(this.visibleI=this.visibleI+1);var x=0,u=0,f=0;this.yRatio.length>1&&(this.yaxisIndex=n.globals.seriesYAxisReverseMap[b][0],f=b);var w=this.barHelpers.initialPositions();p=w.y,g=w.zeroW,m=w.x,u=w.barWidth,x=w.barHeight,c=w.xDivision,d=w.yDivision,h=w.zeroH;for(var y=r.group({class:"apexcharts-datalabels","data:realIndex":b}),_=r.group({class:"apexcharts-rangebar-goals-markers"}),C=0;C<n.globals.dataPoints;C++){var A=this.barHelpers.getStrokeWidth(l,C,b),S=this.seriesRangeStart[l][C],P=this.seriesRangeEnd[l][C],L=null,I=null,R=null,z={x:m,y:p,strokeWidth:A,elSeries:v},U=this.seriesLen;if(n.config.plotOptions.bar.rangeBarGroupRows&&(U=1),n.config.series[l].data[C]===void 0)break;if(this.isHorizontal){R=p+x*this.visibleI;var X=(d-x*U)/2;if(n.config.series[l].data[C].x){var q=this.detectOverlappingBars({i:l,j:C,barYPosition:R,srty:X,barHeight:x,yDivision:d,initPositions:w});x=q.barHeight,R=q.barYPosition}u=(L=this.drawRangeBarPaths(F({indexes:{i:l,j:C,realIndex:b},barHeight:x,barYPosition:R,zeroW:g,yDivision:d,y1:S,y2:P},z))).barWidth}else{n.globals.isXNumeric&&(m=(n.globals.seriesX[l][C]-n.globals.minX)/this.xRatio-u/2),I=m+u*this.visibleI;var te=(c-u*U)/2;if(n.config.series[l].data[C].x){var J=this.detectOverlappingBars({i:l,j:C,barXPosition:I,srtx:te,barWidth:u,xDivision:c,initPositions:w});u=J.barWidth,I=J.barXPosition}x=(L=this.drawRangeColumnPaths(F({indexes:{i:l,j:C,realIndex:b,translationsIndex:f},barWidth:u,barXPosition:I,zeroH:h,xDivision:c},z))).barHeight}var le=this.barHelpers.drawGoalLine({barXPosition:L.barXPosition,barYPosition:R,goalX:L.goalX,goalY:L.goalY,barHeight:x,barWidth:u});le&&_.add(le),p=L.y,m=L.x;var Ee=this.barHelpers.getPathFillColor(i,l,C,b),Me=n.globals.stroke.colors[b];this.renderSeries({realIndex:b,pathFill:Ee,lineFill:Me,j:C,i:l,x:m,y:p,y1:S,y2:P,pathFrom:L.pathFrom,pathTo:L.pathTo,strokeWidth:A,elSeries:v,series:i,barHeight:x,barWidth:u,barXPosition:I,barYPosition:R,columnGroupIndex:k,elDataLabelsWrap:y,elGoalsMarkers:_,visibleSeries:this.visibleI,type:"rangebar"})}a.add(v)}return a}},{key:"detectOverlappingBars",value:function(i){var o=i.i,n=i.j,r=i.barYPosition,a=i.barXPosition,l=i.srty,c=i.srtx,d=i.barHeight,h=i.barWidth,g=i.yDivision,m=i.xDivision,p=i.initPositions,b=this.w,k=[],v=b.config.series[o].data[n].rangeName,x=b.config.series[o].data[n].x,u=Array.isArray(x)?x.join(" "):x,f=b.globals.labels.map(function(y){return Array.isArray(y)?y.join(" "):y}).indexOf(u),w=b.globals.seriesRange[o].findIndex(function(y){return y.x===u&&y.overlaps.length>0});return this.isHorizontal?(r=b.config.plotOptions.bar.rangeBarGroupRows?l+g*f:l+d*this.visibleI+g*f,w>-1&&!b.config.plotOptions.bar.rangeBarOverlap&&(k=b.globals.seriesRange[o][w].overlaps).indexOf(v)>-1&&(r=(d=p.barHeight/k.length)*this.visibleI+g*(100-parseInt(this.barOptions.barHeight,10))/100/2+d*(this.visibleI+k.indexOf(v))+g*f)):(f>-1&&!b.globals.timescaleLabels.length&&(a=b.config.plotOptions.bar.rangeBarGroupRows?c+m*f:c+h*this.visibleI+m*f),w>-1&&!b.config.plotOptions.bar.rangeBarOverlap&&(k=b.globals.seriesRange[o][w].overlaps).indexOf(v)>-1&&(a=(h=p.barWidth/k.length)*this.visibleI+m*(100-parseInt(this.barOptions.barWidth,10))/100/2+h*(this.visibleI+k.indexOf(v))+m*f)),{barYPosition:r,barXPosition:a,barHeight:d,barWidth:h}}},{key:"drawRangeColumnPaths",value:function(i){var o=i.indexes,n=i.x,r=i.xDivision,a=i.barWidth,l=i.barXPosition,c=i.zeroH,d=this.w,h=o.i,g=o.j,m=o.realIndex,p=o.translationsIndex,b=this.yRatio[p],k=this.getRangeValue(m,g),v=Math.min(k.start,k.end),x=Math.max(k.start,k.end);this.series[h][g]===void 0||this.series[h][g]===null?v=c:(v=c-v/b,x=c-x/b);var u=Math.abs(x-v),f=this.barHelpers.getColumnPaths({barXPosition:l,barWidth:a,y1:v,y2:x,strokeWidth:this.strokeWidth,series:this.seriesRangeEnd,realIndex:m,i:m,j:g,w:d});if(d.globals.isXNumeric){var w=this.getBarXForNumericXAxis({x:n,j:g,realIndex:m,barWidth:a});n=w.x,l=w.barXPosition}else n+=r;return{pathTo:f.pathTo,pathFrom:f.pathFrom,barHeight:u,x:n,y:k.start<0&&k.end<0?v:x,goalY:this.barHelpers.getGoalValues("y",null,c,h,g,p),barXPosition:l}}},{key:"preventBarOverflow",value:function(i){var o=this.w;return i<0&&(i=0),i>o.globals.gridWidth&&(i=o.globals.gridWidth),i}},{key:"drawRangeBarPaths",value:function(i){var o=i.indexes,n=i.y,r=i.y1,a=i.y2,l=i.yDivision,c=i.barHeight,d=i.barYPosition,h=i.zeroW,g=this.w,m=o.realIndex,p=o.j,b=this.preventBarOverflow(h+r/this.invertedYRatio),k=this.preventBarOverflow(h+a/this.invertedYRatio),v=this.getRangeValue(m,p),x=Math.abs(k-b),u=this.barHelpers.getBarpaths({barYPosition:d,barHeight:c,x1:b,x2:k,strokeWidth:this.strokeWidth,series:this.seriesRangeEnd,i:m,realIndex:m,j:p,w:g});return g.globals.isXNumeric||(n+=l),{pathTo:u.pathTo,pathFrom:u.pathFrom,barWidth:x,x:v.start<0&&v.end<0?b:k,goalX:this.barHelpers.getGoalValues("x",h,null,m,p),y:n}}},{key:"getRangeValue",value:function(i,o){var n=this.w;return{start:n.globals.seriesRangeStart[i][o],end:n.globals.seriesRangeEnd[i][o]}}}]),t}(),Zw=function(){function s(e){H(this,s),this.w=e.w,this.lineCtx=e}return W(s,[{key:"sameValueSeriesFix",value:function(e,t){var i=this.w;if((i.config.fill.type==="gradient"||i.config.fill.type[e]==="gradient")&&new De(this.lineCtx.ctx,i).seriesHaveSameValues(e)){var o=t[e].slice();o[o.length-1]=o[o.length-1]+1e-6,t[e]=o}return t}},{key:"calculatePoints",value:function(e){var t=e.series,i=e.realIndex,o=e.x,n=e.y,r=e.i,a=e.j,l=e.prevY,c=this.w,d=[],h=[];if(a===0){var g=this.lineCtx.categoryAxisCorrection+c.config.markers.offsetX;c.globals.isXNumeric&&(g=(c.globals.seriesX[i][0]-c.globals.minX)/this.lineCtx.xRatio+c.config.markers.offsetX),d.push(g),h.push(T.isNumber(t[r][0])?l+c.config.markers.offsetY:null),d.push(o+c.config.markers.offsetX),h.push(T.isNumber(t[r][a+1])?n+c.config.markers.offsetY:null)}else d.push(o+c.config.markers.offsetX),h.push(T.isNumber(t[r][a+1])?n+c.config.markers.offsetY:null);return{x:d,y:h}}},{key:"checkPreviousPaths",value:function(e){for(var t=e.pathFromLine,i=e.pathFromArea,o=e.realIndex,n=this.w,r=0;r<n.globals.previousPaths.length;r++){var a=n.globals.previousPaths[r];(a.type==="line"||a.type==="area")&&a.paths.length>0&&parseInt(a.realIndex,10)===parseInt(o,10)&&(a.type==="line"?(this.lineCtx.appendPathFrom=!1,t=n.globals.previousPaths[r].paths[0].d):a.type==="area"&&(this.lineCtx.appendPathFrom=!1,i=n.globals.previousPaths[r].paths[0].d,n.config.stroke.show&&n.globals.previousPaths[r].paths[1]&&(t=n.globals.previousPaths[r].paths[1].d)))}return{pathFromLine:t,pathFromArea:i}}},{key:"determineFirstPrevY",value:function(e){var t,i,o,n=e.i,r=e.realIndex,a=e.series,l=e.prevY,c=e.lineYPosition,d=e.translationsIndex,h=this.w,g=h.config.chart.stacked&&!h.globals.comboCharts||h.config.chart.stacked&&h.globals.comboCharts&&(!this.w.config.chart.stackOnlyBar||((t=this.w.config.series[r])===null||t===void 0?void 0:t.type)==="bar"||((i=this.w.config.series[r])===null||i===void 0?void 0:i.type)==="column");if(((o=a[n])===null||o===void 0?void 0:o[0])!==void 0)l=(c=g&&n>0?this.lineCtx.prevSeriesY[n-1][0]:this.lineCtx.zeroY)-a[n][0]/this.lineCtx.yRatio[d]+2*(this.lineCtx.isReversed?a[n][0]/this.lineCtx.yRatio[d]:0);else if(g&&n>0&&a[n][0]===void 0){for(var m=n-1;m>=0;m--)if(a[m][0]!==null&&a[m][0]!==void 0){l=c=this.lineCtx.prevSeriesY[m][0];break}}return{prevY:l,lineYPosition:c}}}]),s}(),Qw=function(s){for(var e,t,i,o,n=function(d){for(var h=[],g=d[0],m=d[1],p=h[0]=dl(g,m),b=1,k=d.length-1;b<k;b++)g=m,m=d[b+1],h[b]=.5*(p+(p=dl(g,m)));return h[b]=p,h}(s),r=s.length-1,a=[],l=0;l<r;l++)i=dl(s[l],s[l+1]),Math.abs(i)<1e-6?n[l]=n[l+1]=0:(o=(e=n[l]/i)*e+(t=n[l+1]/i)*t)>9&&(o=3*i/Math.sqrt(o),n[l]=o*e,n[l+1]=o*t);for(var c=0;c<=r;c++)o=(s[Math.min(r,c+1)][0]-s[Math.max(0,c-1)][0])/(6*(1+n[c]*n[c])),a.push([o||0,n[c]*o||0]);return a},Jw=function(s){var e=Qw(s),t=s[1],i=s[0],o=[],n=e[1],r=e[0];o.push(i,[i[0]+r[0],i[1]+r[1],t[0]-n[0],t[1]-n[1],t[0],t[1]]);for(var a=2,l=e.length;a<l;a++){var c=s[a],d=e[a];o.push([c[0]-d[0],c[1]-d[1],c[0],c[1]])}return o},ek=function(s,e,t){var i=s.slice(e,t);if(e){if(t-e>1&&i[1].length<6){var o=i[0].length;i[1]=[2*i[0][o-2]-i[0][o-4],2*i[0][o-1]-i[0][o-3]].concat(i[1])}i[0]=i[0].slice(-2)}return i};function dl(s,e){return(e[1]-s[1])/(e[0]-s[0])}var hl=function(){function s(e,t,i){H(this,s),this.ctx=e,this.w=e.w,this.xyRatios=t,this.pointsChart=!(this.w.config.chart.type!=="bubble"&&this.w.config.chart.type!=="scatter")||i,this.scatter=new dg(this.ctx),this.noNegatives=this.w.globals.minX===Number.MAX_VALUE,this.lineHelpers=new Zw(this),this.markers=new Zo(this.ctx),this.prevSeriesY=[],this.categoryAxisCorrection=0,this.yaxisIndex=0}return W(s,[{key:"draw",value:function(e,t,i,o){var n,r=this.w,a=new N(this.ctx),l=r.globals.comboCharts?t:r.config.chart.type,c=a.group({class:"apexcharts-".concat(l,"-series apexcharts-plot-series")}),d=new De(this.ctx,r);this.yRatio=this.xyRatios.yRatio,this.zRatio=this.xyRatios.zRatio,this.xRatio=this.xyRatios.xRatio,this.baseLineY=this.xyRatios.baseLineY,e=d.getLogSeries(e),this.yRatio=d.getLogYRatios(this.yRatio),this.prevSeriesY=[];for(var h=[],g=0;g<e.length;g++){e=this.lineHelpers.sameValueSeriesFix(g,e);var m=r.globals.comboCharts?i[g]:g,p=this.yRatio.length>1?m:0;this._initSerieVariables(e,g,m);var b=[],k=[],v=[],x=r.globals.padHorizontal+this.categoryAxisCorrection;this.ctx.series.addCollapsedClassToSeries(this.elSeries,m),r.globals.isXNumeric&&r.globals.seriesX.length>0&&(x=(r.globals.seriesX[m][0]-r.globals.minX)/this.xRatio),v.push(x);var u,f=x,w=void 0,y=f,_=this.zeroY,C=this.zeroY;_=this.lineHelpers.determineFirstPrevY({i:g,realIndex:m,series:e,prevY:_,lineYPosition:0,translationsIndex:p}).prevY,r.config.stroke.curve==="monotoneCubic"&&e[g][0]===null?b.push(null):b.push(_),u=_,l==="rangeArea"&&(w=C=this.lineHelpers.determineFirstPrevY({i:g,realIndex:m,series:o,prevY:C,lineYPosition:0,translationsIndex:p}).prevY,k.push(b[0]!==null?C:null));var A=this._calculatePathsFrom({type:l,series:e,i:g,realIndex:m,translationsIndex:p,prevX:y,prevY:_,prevY2:C}),S=[b[0]],P=[k[0]],L={type:l,series:e,realIndex:m,translationsIndex:p,i:g,x,y:1,pX:f,pY:u,pathsFrom:A,linePaths:[],areaPaths:[],seriesIndex:i,lineYPosition:0,xArrj:v,yArrj:b,y2Arrj:k,seriesRangeEnd:o},I=this._iterateOverDataPoints(F(F({},L),{},{iterations:l==="rangeArea"?e[g].length-1:void 0,isRangeStart:!0}));if(l==="rangeArea"){for(var R=this._calculatePathsFrom({series:o,i:g,realIndex:m,prevX:y,prevY:C}),z=this._iterateOverDataPoints(F(F({},L),{},{series:o,xArrj:[x],yArrj:S,y2Arrj:P,pY:w,areaPaths:I.areaPaths,pathsFrom:R,iterations:o[g].length-1,isRangeStart:!1})),U=I.linePaths.length/2,X=0;X<U;X++)I.linePaths[X]=z.linePaths[X+U]+I.linePaths[X];I.linePaths.splice(U),I.pathFromLine=z.pathFromLine+I.pathFromLine}else I.pathFromArea+="z";this._handlePaths({type:l,realIndex:m,i:g,paths:I}),this.elSeries.add(this.elPointsMain),this.elSeries.add(this.elDataLabelsWrap),h.push(this.elSeries)}if(((n=r.config.series[0])===null||n===void 0?void 0:n.zIndex)!==void 0&&h.sort(function(J,le){return Number(J.node.getAttribute("zIndex"))-Number(le.node.getAttribute("zIndex"))}),r.config.chart.stacked)for(var q=h.length-1;q>=0;q--)c.add(h[q]);else for(var te=0;te<h.length;te++)c.add(h[te]);return c}},{key:"_initSerieVariables",value:function(e,t,i){var o=this.w,n=new N(this.ctx);this.xDivision=o.globals.gridWidth/(o.globals.dataPoints-(o.config.xaxis.tickPlacement==="on"?1:0)),this.strokeWidth=Array.isArray(o.config.stroke.width)?o.config.stroke.width[i]:o.config.stroke.width;var r=0;this.yRatio.length>1&&(this.yaxisIndex=o.globals.seriesYAxisReverseMap[i],r=i),this.isReversed=o.config.yaxis[this.yaxisIndex]&&o.config.yaxis[this.yaxisIndex].reversed,this.zeroY=o.globals.gridHeight-this.baseLineY[r]-(this.isReversed?o.globals.gridHeight:0)+(this.isReversed?2*this.baseLineY[r]:0),this.areaBottomY=this.zeroY,(this.zeroY>o.globals.gridHeight||o.config.plotOptions.area.fillTo==="end")&&(this.areaBottomY=o.globals.gridHeight),this.categoryAxisCorrection=this.xDivision/2,this.elSeries=n.group({class:"apexcharts-series",zIndex:o.config.series[i].zIndex!==void 0?o.config.series[i].zIndex:i,seriesName:T.escapeString(o.globals.seriesNames[i])}),this.elPointsMain=n.group({class:"apexcharts-series-markers-wrap","data:realIndex":i}),this.elDataLabelsWrap=n.group({class:"apexcharts-datalabels","data:realIndex":i});var a=e[t].length===o.globals.dataPoints;this.elSeries.attr({"data:longestSeries":a,rel:t+1,"data:realIndex":i}),this.appendPathFrom=!0}},{key:"_calculatePathsFrom",value:function(e){var t,i,o,n,r=e.type,a=e.series,l=e.i,c=e.realIndex,d=e.translationsIndex,h=e.prevX,g=e.prevY,m=e.prevY2,p=this.w,b=new N(this.ctx);if(a[l][0]===null){for(var k=0;k<a[l].length;k++)if(a[l][k]!==null){h=this.xDivision*k,g=this.zeroY-a[l][k]/this.yRatio[d],t=b.move(h,g),i=b.move(h,this.areaBottomY);break}}else t=b.move(h,g),r==="rangeArea"&&(t=b.move(h,m)+b.line(h,g)),i=b.move(h,this.areaBottomY)+b.line(h,g);if(o=b.move(0,this.zeroY)+b.line(0,this.zeroY),n=b.move(0,this.zeroY)+b.line(0,this.zeroY),p.globals.previousPaths.length>0){var v=this.lineHelpers.checkPreviousPaths({pathFromLine:o,pathFromArea:n,realIndex:c});o=v.pathFromLine,n=v.pathFromArea}return{prevX:h,prevY:g,linePath:t,areaPath:i,pathFromLine:o,pathFromArea:n}}},{key:"_handlePaths",value:function(e){var t=e.type,i=e.realIndex,o=e.i,n=e.paths,r=this.w,a=new N(this.ctx),l=new Yt(this.ctx);this.prevSeriesY.push(n.yArrj),r.globals.seriesXvalues[i]=n.xArrj,r.globals.seriesYvalues[i]=n.yArrj;var c=r.config.forecastDataPoints;if(c.count>0&&t!=="rangeArea"){var d=r.globals.seriesXvalues[i][r.globals.seriesXvalues[i].length-c.count-1],h=a.drawRect(d,0,r.globals.gridWidth,r.globals.gridHeight,0);r.globals.dom.elForecastMask.appendChild(h.node);var g=a.drawRect(0,0,d,r.globals.gridHeight,0);r.globals.dom.elNonForecastMask.appendChild(g.node)}this.pointsChart||r.globals.delayedElements.push({el:this.elPointsMain.node,index:i});var m={i:o,realIndex:i,animationDelay:o,initialSpeed:r.config.chart.animations.speed,dataChangeSpeed:r.config.chart.animations.dynamicAnimation.speed,className:"apexcharts-".concat(t)};if(t==="area")for(var p=l.fillPath({seriesNumber:i}),b=0;b<n.areaPaths.length;b++){var k=a.renderPaths(F(F({},m),{},{pathFrom:n.pathFromArea,pathTo:n.areaPaths[b],stroke:"none",strokeWidth:0,strokeLineCap:null,fill:p}));this.elSeries.add(k)}if(r.config.stroke.show&&!this.pointsChart){var v=null;if(t==="line")v=l.fillPath({seriesNumber:i,i:o});else if(r.config.stroke.fill.type==="solid")v=r.globals.stroke.colors[i];else{var x=r.config.fill;r.config.fill=r.config.stroke.fill,v=l.fillPath({seriesNumber:i,i:o}),r.config.fill=x}for(var u=0;u<n.linePaths.length;u++){var f=v;t==="rangeArea"&&(f=l.fillPath({seriesNumber:i}));var w=F(F({},m),{},{pathFrom:n.pathFromLine,pathTo:n.linePaths[u],stroke:v,strokeWidth:this.strokeWidth,strokeLineCap:r.config.stroke.lineCap,fill:t==="rangeArea"?f:"none"}),y=a.renderPaths(w);if(this.elSeries.add(y),y.attr("fill-rule","evenodd"),c.count>0&&t!=="rangeArea"){var _=a.renderPaths(w);_.node.setAttribute("stroke-dasharray",c.dashArray),c.strokeWidth&&_.node.setAttribute("stroke-width",c.strokeWidth),this.elSeries.add(_),_.attr("clip-path","url(#forecastMask".concat(r.globals.cuid,")")),y.attr("clip-path","url(#nonForecastMask".concat(r.globals.cuid,")"))}}}}},{key:"_iterateOverDataPoints",value:function(e){var t,i,o=this,n=e.type,r=e.series,a=e.iterations,l=e.realIndex,c=e.translationsIndex,d=e.i,h=e.x,g=e.y,m=e.pX,p=e.pY,b=e.pathsFrom,k=e.linePaths,v=e.areaPaths,x=e.seriesIndex,u=e.lineYPosition,f=e.xArrj,w=e.yArrj,y=e.y2Arrj,_=e.isRangeStart,C=e.seriesRangeEnd,A=this.w,S=new N(this.ctx),P=this.yRatio,L=b.prevY,I=b.linePath,R=b.areaPath,z=b.pathFromLine,U=b.pathFromArea,X=T.isNumber(A.globals.minYArr[l])?A.globals.minYArr[l]:A.globals.minY;a||(a=A.globals.dataPoints>1?A.globals.dataPoints-1:A.globals.dataPoints);var q=function(ot,nt){return nt-ot/P[c]+2*(o.isReversed?ot/P[c]:0)},te=g,J=A.config.chart.stacked&&!A.globals.comboCharts||A.config.chart.stacked&&A.globals.comboCharts&&(!this.w.config.chart.stackOnlyBar||((t=this.w.config.series[l])===null||t===void 0?void 0:t.type)==="bar"||((i=this.w.config.series[l])===null||i===void 0?void 0:i.type)==="column"),le=A.config.stroke.curve;Array.isArray(le)&&(le=Array.isArray(x)?le[x[d]]:le[d]);for(var Ee,Me=0,_e=0;_e<a;_e++){var At=r[d][_e+1]===void 0||r[d][_e+1]===null;if(A.globals.isXNumeric){var pe=A.globals.seriesX[l][_e+1];A.globals.seriesX[l][_e+1]===void 0&&(pe=A.globals.seriesX[l][a-1]),h=(pe-A.globals.minX)/this.xRatio}else h+=this.xDivision;J?d>0&&A.globals.collapsedSeries.length<A.config.series.length-1?u=this.prevSeriesY[function(ot){for(var nt=ot;nt>0;nt--){if(!(A.globals.collapsedSeriesIndices.indexOf(x?.[nt]||nt)>-1))return nt;nt--}return 0}(d-1)][_e+1]:u=this.zeroY:u=this.zeroY,At?g=q(X,u):(g=q(r[d][_e+1],u),n==="rangeArea"&&(te=q(C[d][_e+1],u))),f.push(h),!At||A.config.stroke.curve!=="smooth"&&A.config.stroke.curve!=="monotoneCubic"?(w.push(g),y.push(te)):(w.push(null),y.push(null));var fe=this.lineHelpers.calculatePoints({series:r,x:h,y:g,realIndex:l,i:d,j:_e,prevY:L}),be=this._createPaths({type:n,series:r,i:d,realIndex:l,j:_e,x:h,y:g,y2:te,xArrj:f,yArrj:w,y2Arrj:y,pX:m,pY:p,pathState:Me,segmentStartX:Ee,linePath:I,areaPath:R,linePaths:k,areaPaths:v,curve:le,isRangeStart:_});v=be.areaPaths,k=be.linePaths,m=be.pX,p=be.pY,Me=be.pathState,Ee=be.segmentStartX,R=be.areaPath,I=be.linePath,!this.appendPathFrom||le==="monotoneCubic"&&n==="rangeArea"||(z+=S.line(h,this.zeroY),U+=S.line(h,this.zeroY)),this.handleNullDataPoints(r,fe,d,_e,l),this._handleMarkersAndLabels({type:n,pointsPos:fe,i:d,j:_e,realIndex:l,isRangeStart:_})}return{yArrj:w,xArrj:f,pathFromArea:U,areaPaths:v,pathFromLine:z,linePaths:k,linePath:I,areaPath:R}}},{key:"_handleMarkersAndLabels",value:function(e){var t=e.type,i=e.pointsPos,o=e.isRangeStart,n=e.i,r=e.j,a=e.realIndex,l=this.w,c=new Xo(this.ctx);if(this.pointsChart)this.scatter.draw(this.elSeries,r,{realIndex:a,pointsPos:i,zRatio:this.zRatio,elParent:this.elPointsMain});else{l.globals.series[n].length>1&&this.elPointsMain.node.classList.add("apexcharts-element-hidden");var d=this.markers.plotChartMarkers(i,a,r+1);d!==null&&this.elPointsMain.add(d)}var h=c.drawDataLabel({type:t,isRangeStart:o,pos:i,i:a,j:r+1});h!==null&&this.elDataLabelsWrap.add(h)}},{key:"_createPaths",value:function(e){var t=e.type,i=e.series,o=e.i;e.realIndex;var n=e.j,r=e.x,a=e.y,l=e.xArrj,c=e.yArrj,d=e.y2,h=e.y2Arrj,g=e.pX,m=e.pY,p=e.pathState,b=e.segmentStartX,k=e.linePath,v=e.areaPath,x=e.linePaths,u=e.areaPaths,f=e.curve,w=e.isRangeStart;this.w;var y,_=new N(this.ctx),C=this.areaBottomY,A=t==="rangeArea",S=t==="rangeArea"&&w;switch(f){case"monotoneCubic":var P=w?c:h;switch(p){case 0:if(P[n+1]===null)break;p=1;case 1:if(!(A?l.length===i[o].length:n===i[o].length-2))break;case 2:var L=w?l:l.slice().reverse(),I=w?P:P.slice().reverse(),R=(y=I,L.map(function(pe,fe){return[pe,y[fe]]}).filter(function(pe){return pe[1]!==null})),z=R.length>1?Jw(R):R,U=[];A&&(S?u=R:U=u.reverse());var X=0,q=0;if(function(pe,fe){for(var be=function(Wn){var ft=[],mi=0;return Wn.forEach(function(_w){_w!==null?mi++:mi>0&&(ft.push(mi),mi=0)}),mi>0&&ft.push(mi),ft}(pe),ot=[],nt=0,ei=0;nt<be.length;ei+=be[nt++])ot[nt]=ek(fe,ei,ei+be[nt]);return ot}(I,z).forEach(function(pe){X++;var fe=function(nt){for(var ei="",Wn=0;Wn<nt.length;Wn++){var ft=nt[Wn],mi=ft.length;mi>4?(ei+="C".concat(ft[0],", ").concat(ft[1]),ei+=", ".concat(ft[2],", ").concat(ft[3]),ei+=", ".concat(ft[4],", ").concat(ft[5])):mi>2&&(ei+="S".concat(ft[0],", ").concat(ft[1]),ei+=", ".concat(ft[2],", ").concat(ft[3]))}return ei}(pe),be=q,ot=(q+=pe.length)-1;S?k=_.move(R[be][0],R[be][1])+fe:A?k=_.move(U[be][0],U[be][1])+_.line(R[be][0],R[be][1])+fe+_.line(U[ot][0],U[ot][1]):(k=_.move(R[be][0],R[be][1])+fe,v=k+_.line(R[ot][0],C)+_.line(R[be][0],C)+"z",u.push(v)),x.push(k)}),A&&X>1&&!S){var te=x.slice(X).reverse();x.splice(X),te.forEach(function(pe){return x.push(pe)})}p=0}break;case"smooth":var J=.35*(r-g);if(i[o][n]===null)p=0;else switch(p){case 0:if(b=g,k=S?_.move(g,h[n])+_.line(g,m):_.move(g,m),v=_.move(g,m),p=1,n<i[o].length-2){var le=_.curve(g+J,m,r-J,a,r,a);k+=le,v+=le;break}case 1:if(i[o][n+1]===null)k+=S?_.line(g,d):_.move(g,m),v+=_.line(g,C)+_.line(b,C)+"z",x.push(k),u.push(v),p=-1;else{var Ee=_.curve(g+J,m,r-J,a,r,a);k+=Ee,v+=Ee,n>=i[o].length-2&&(S&&(k+=_.curve(r,a,r,a,r,d)+_.move(r,d)),v+=_.curve(r,a,r,a,r,C)+_.line(b,C)+"z",x.push(k),u.push(v),p=-1)}}g=r,m=a;break;default:var Me=function(pe,fe,be){var ot=[];switch(pe){case"stepline":ot=_.line(fe,null,"H")+_.line(null,be,"V");break;case"linestep":ot=_.line(null,be,"V")+_.line(fe,null,"H");break;case"straight":ot=_.line(fe,be)}return ot};if(i[o][n]===null)p=0;else switch(p){case 0:if(b=g,k=S?_.move(g,h[n])+_.line(g,m):_.move(g,m),v=_.move(g,m),p=1,n<i[o].length-2){var _e=Me(f,r,a);k+=_e,v+=_e;break}case 1:if(i[o][n+1]===null)k+=S?_.line(g,d):_.move(g,m),v+=_.line(g,C)+_.line(b,C)+"z",x.push(k),u.push(v),p=-1;else{var At=Me(f,r,a);k+=At,v+=At,n>=i[o].length-2&&(S&&(k+=_.line(r,d)),v+=_.line(r,C)+_.line(b,C)+"z",x.push(k),u.push(v),p=-1)}}g=r,m=a}return{linePaths:x,areaPaths:u,pX:g,pY:m,pathState:p,segmentStartX:b,linePath:k,areaPath:v}}},{key:"handleNullDataPoints",value:function(e,t,i,o,n){var r=this.w;if(e[i][o]===null&&r.config.markers.showNullDataPoints||e[i].length===1){var a=this.strokeWidth-r.config.markers.strokeWidth/2;a>0||(a=0);var l=this.markers.plotChartMarkers(t,n,o+1,a,!0);l!==null&&this.elPointsMain.add(l)}}}]),s}();window.TreemapSquared={},window.TreemapSquared.generate=function(){function s(a,l,c,d){this.xoffset=a,this.yoffset=l,this.height=d,this.width=c,this.shortestEdge=function(){return Math.min(this.height,this.width)},this.getCoordinates=function(h){var g,m=[],p=this.xoffset,b=this.yoffset,k=n(h)/this.height,v=n(h)/this.width;if(this.width>=this.height)for(g=0;g<h.length;g++)m.push([p,b,p+k,b+h[g]/k]),b+=h[g]/k;else for(g=0;g<h.length;g++)m.push([p,b,p+h[g]/v,b+v]),p+=h[g]/v;return m},this.cutArea=function(h){var g;if(this.width>=this.height){var m=h/this.height,p=this.width-m;g=new s(this.xoffset+m,this.yoffset,p,this.height)}else{var b=h/this.width,k=this.height-b;g=new s(this.xoffset,this.yoffset+b,this.width,k)}return g}}function e(a,l,c,d,h){d=d===void 0?0:d,h=h===void 0?0:h;var g=t(function(m,p){var b,k=[],v=p/n(m);for(b=0;b<m.length;b++)k[b]=m[b]*v;return k}(a,l*c),[],new s(d,h,l,c),[]);return function(m){var p,b,k=[];for(p=0;p<m.length;p++)for(b=0;b<m[p].length;b++)k.push(m[p][b]);return k}(g)}function t(a,l,c,d){var h,g,m;if(a.length!==0)return h=c.shortestEdge(),function(p,b,k){var v;if(p.length===0)return!0;(v=p.slice()).push(b);var x=i(p,k),u=i(v,k);return x>=u}(l,g=a[0],h)?(l.push(g),t(a.slice(1),l,c,d)):(m=c.cutArea(n(l),d),d.push(c.getCoordinates(l)),t(a,[],m,d)),d;d.push(c.getCoordinates(l))}function i(a,l){var c=Math.min.apply(Math,a),d=Math.max.apply(Math,a),h=n(a);return Math.max(Math.pow(l,2)*d/Math.pow(h,2),Math.pow(h,2)/(Math.pow(l,2)*c))}function o(a){return a&&a.constructor===Array}function n(a){var l,c=0;for(l=0;l<a.length;l++)c+=a[l];return c}function r(a){var l,c=0;if(o(a[0]))for(l=0;l<a.length;l++)c+=r(a[l]);else c=n(a);return c}return function a(l,c,d,h,g){h=h===void 0?0:h,g=g===void 0?0:g;var m,p,b=[],k=[];if(o(l[0])){for(p=0;p<l.length;p++)b[p]=r(l[p]);for(m=e(b,c,d,h,g),p=0;p<l.length;p++)k.push(a(l[p],m[p][2]-m[p][0],m[p][3]-m[p][1],m[p][0],m[p][1]))}else k=e(l,c,d,h,g);return k}}();var xi,Zn,tk=function(){function s(e,t){H(this,s),this.ctx=e,this.w=e.w,this.strokeWidth=this.w.config.stroke.width,this.helpers=new wg(e),this.dynamicAnim=this.w.config.chart.animations.dynamicAnimation,this.labels=[]}return W(s,[{key:"draw",value:function(e){var t=this,i=this.w,o=new N(this.ctx),n=new Yt(this.ctx),r=o.group({class:"apexcharts-treemap"});if(i.globals.noData)return r;var a=[];return e.forEach(function(l){var c=l.map(function(d){return Math.abs(d)});a.push(c)}),this.negRange=this.helpers.checkColorRange(),i.config.series.forEach(function(l,c){l.data.forEach(function(d){Array.isArray(t.labels[c])||(t.labels[c]=[]),t.labels[c].push(d.x)})}),window.TreemapSquared.generate(a,i.globals.gridWidth,i.globals.gridHeight).forEach(function(l,c){var d=o.group({class:"apexcharts-series apexcharts-treemap-series",seriesName:T.escapeString(i.globals.seriesNames[c]),rel:c+1,"data:realIndex":c});if(i.config.chart.dropShadow.enabled){var h=i.config.chart.dropShadow;new lt(t.ctx).dropShadow(r,h,c)}var g=o.group({class:"apexcharts-data-labels"});l.forEach(function(m,p){var b=m[0],k=m[1],v=m[2],x=m[3],u=o.drawRect(b,k,v-b,x-k,i.config.plotOptions.treemap.borderRadius,"#fff",1,t.strokeWidth,i.config.plotOptions.treemap.useFillColorAsStroke?w:i.globals.stroke.colors[c]);u.attr({cx:b,cy:k,index:c,i:c,j:p,width:v-b,height:x-k});var f=t.helpers.getShadeColor(i.config.chart.type,c,p,t.negRange),w=f.color;i.config.series[c].data[p]!==void 0&&i.config.series[c].data[p].fillColor&&(w=i.config.series[c].data[p].fillColor);var y=n.fillPath({color:w,seriesNumber:c,dataPointIndex:p});u.node.classList.add("apexcharts-treemap-rect"),u.attr({fill:y}),t.helpers.addListeners(u);var _={x:b+(v-b)/2,y:k+(x-k)/2,width:0,height:0},C={x:b,y:k,width:v-b,height:x-k};if(i.config.chart.animations.enabled&&!i.globals.dataChanged){var A=1;i.globals.resized||(A=i.config.chart.animations.speed),t.animateTreemap(u,_,C,A)}if(i.globals.dataChanged){var S=1;t.dynamicAnim.enabled&&i.globals.shouldAnimate&&(S=t.dynamicAnim.speed,i.globals.previousPaths[c]&&i.globals.previousPaths[c][p]&&i.globals.previousPaths[c][p].rect&&(_=i.globals.previousPaths[c][p].rect),t.animateTreemap(u,_,C,S))}var P=t.getFontSize(m),L=i.config.dataLabels.formatter(t.labels[c][p],{value:i.globals.series[c][p],seriesIndex:c,dataPointIndex:p,w:i});i.config.plotOptions.treemap.dataLabels.format==="truncate"&&(P=parseInt(i.config.dataLabels.style.fontSize,10),L=t.truncateLabels(L,P,b,k,v,x));var I=t.helpers.calculateDataLabels({text:L,x:(b+v)/2,y:(k+x)/2+t.strokeWidth/2+P/3,i:c,j:p,colorProps:f,fontSize:P,series:e});i.config.dataLabels.enabled&&I&&t.rotateToFitLabel(I,P,L,b,k,v,x),d.add(u),I!==null&&d.add(I)}),d.add(g),r.add(d)}),r}},{key:"getFontSize",value:function(e){var t=this.w,i,o,n,r,a=function l(c){var d,h=0;if(Array.isArray(c[0]))for(d=0;d<c.length;d++)h+=l(c[d]);else for(d=0;d<c.length;d++)h+=c[d].length;return h}(this.labels)/function l(c){var d,h=0;if(Array.isArray(c[0]))for(d=0;d<c.length;d++)h+=l(c[d]);else for(d=0;d<c.length;d++)h+=1;return h}(this.labels);return i=e[2]-e[0],o=e[3]-e[1],n=i*o,r=Math.pow(n,.5),Math.min(r/a,parseInt(t.config.dataLabels.style.fontSize,10))}},{key:"rotateToFitLabel",value:function(e,t,i,o,n,r,a){var l=new N(this.ctx),c=l.getTextRects(i,t);if(c.width+this.w.config.stroke.width+5>r-o&&c.width<=a-n){var d=l.rotateAroundCenter(e.node);e.node.setAttribute("transform","rotate(-90 ".concat(d.x," ").concat(d.y,") translate(").concat(c.height/3,")"))}}},{key:"truncateLabels",value:function(e,t,i,o,n,r){var a=new N(this.ctx),l=a.getTextRects(e,t).width+this.w.config.stroke.width+5>n-i&&r-o>n-i?r-o:n-i,c=a.getTextBasedOnMaxWidth({text:e,maxWidth:l,fontSize:t});return e.length!==c.length&&l/t<5?"":c}},{key:"animateTreemap",value:function(e,t,i,o){var n=new Ko(this.ctx);n.animateRect(e,{x:t.x,y:t.y,width:t.width,height:t.height},{x:i.x,y:i.y,width:i.width,height:i.height},o,function(){n.animationCompleted(e)})}}]),s}(),xg=86400,ik=10/xg,ok=function(){function s(e){H(this,s),this.ctx=e,this.w=e.w,this.timeScaleArray=[],this.utc=this.w.config.xaxis.labels.datetimeUTC}return W(s,[{key:"calculateTimeScaleTicks",value:function(e,t){var i=this,o=this.w;if(o.globals.allSeriesCollapsed)return o.globals.labels=[],o.globals.timescaleLabels=[],[];var n=new Qe(this.ctx),r=(t-e)/864e5;this.determineInterval(r),o.globals.disableZoomIn=!1,o.globals.disableZoomOut=!1,r<ik?o.globals.disableZoomIn=!0:r>5e4&&(o.globals.disableZoomOut=!0);var a=n.getTimeUnitsfromTimestamp(e,t,this.utc),l=o.globals.gridWidth/r,c=l/24,d=c/60,h=d/60,g=Math.floor(24*r),m=Math.floor(1440*r),p=Math.floor(r*xg),b=Math.floor(r),k=Math.floor(r/30),v=Math.floor(r/365),x={minMillisecond:a.minMillisecond,minSecond:a.minSecond,minMinute:a.minMinute,minHour:a.minHour,minDate:a.minDate,minMonth:a.minMonth,minYear:a.minYear},u={firstVal:x,currentMillisecond:x.minMillisecond,currentSecond:x.minSecond,currentMinute:x.minMinute,currentHour:x.minHour,currentMonthDate:x.minDate,currentDate:x.minDate,currentMonth:x.minMonth,currentYear:x.minYear,daysWidthOnXAxis:l,hoursWidthOnXAxis:c,minutesWidthOnXAxis:d,secondsWidthOnXAxis:h,numberOfSeconds:p,numberOfMinutes:m,numberOfHours:g,numberOfDays:b,numberOfMonths:k,numberOfYears:v};switch(this.tickInterval){case"years":this.generateYearScale(u);break;case"months":case"half_year":this.generateMonthScale(u);break;case"months_days":case"months_fortnight":case"days":case"week_days":this.generateDayScale(u);break;case"hours":this.generateHourScale(u);break;case"minutes_fives":case"minutes":this.generateMinuteScale(u);break;case"seconds_tens":case"seconds_fives":case"seconds":this.generateSecondScale(u)}var f=this.timeScaleArray.map(function(w){var y={position:w.position,unit:w.unit,year:w.year,day:w.day?w.day:1,hour:w.hour?w.hour:0,month:w.month+1};return w.unit==="month"?F(F({},y),{},{day:1,value:w.value+1}):w.unit==="day"||w.unit==="hour"?F(F({},y),{},{value:w.value}):w.unit==="minute"?F(F({},y),{},{value:w.value,minute:w.value}):w.unit==="second"?F(F({},y),{},{value:w.value,minute:w.minute,second:w.second}):w});return f.filter(function(w){var y=1,_=Math.ceil(o.globals.gridWidth/120),C=w.value;o.config.xaxis.tickAmount!==void 0&&(_=o.config.xaxis.tickAmount),f.length>_&&(y=Math.floor(f.length/_));var A=!1,S=!1;switch(i.tickInterval){case"years":w.unit==="year"&&(A=!0);break;case"half_year":y=7,w.unit==="year"&&(A=!0);break;case"months":y=1,w.unit==="year"&&(A=!0);break;case"months_fortnight":y=15,w.unit!=="year"&&w.unit!=="month"||(A=!0),C===30&&(S=!0);break;case"months_days":y=10,w.unit==="month"&&(A=!0),C===30&&(S=!0);break;case"week_days":y=8,w.unit==="month"&&(A=!0);break;case"days":y=1,w.unit==="month"&&(A=!0);break;case"hours":w.unit==="day"&&(A=!0);break;case"minutes_fives":case"seconds_fives":C%5!=0&&(S=!0);break;case"seconds_tens":C%10!=0&&(S=!0)}if(i.tickInterval==="hours"||i.tickInterval==="minutes_fives"||i.tickInterval==="seconds_tens"||i.tickInterval==="seconds_fives"){if(!S)return!0}else if((C%y==0||A)&&!S)return!0})}},{key:"recalcDimensionsBasedOnFormat",value:function(e,t){var i=this.w,o=this.formatDates(e),n=this.removeOverlappingTS(o);i.globals.timescaleLabels=n.slice(),new yr(this.ctx).plotCoords()}},{key:"determineInterval",value:function(e){var t=24*e,i=60*t;switch(!0){case e/365>5:this.tickInterval="years";break;case e>800:this.tickInterval="half_year";break;case e>180:this.tickInterval="months";break;case e>90:this.tickInterval="months_fortnight";break;case e>60:this.tickInterval="months_days";break;case e>30:this.tickInterval="week_days";break;case e>2:this.tickInterval="days";break;case t>2.4:this.tickInterval="hours";break;case i>15:this.tickInterval="minutes_fives";break;case i>5:this.tickInterval="minutes";break;case i>1:this.tickInterval="seconds_tens";break;case 60*i>20:this.tickInterval="seconds_fives";break;default:this.tickInterval="seconds"}}},{key:"generateYearScale",value:function(e){var t=e.firstVal,i=e.currentMonth,o=e.currentYear,n=e.daysWidthOnXAxis,r=e.numberOfYears,a=t.minYear,l=0,c=new Qe(this.ctx),d="year";if(t.minDate>1||t.minMonth>0){var h=c.determineRemainingDaysOfYear(t.minYear,t.minMonth,t.minDate);l=(c.determineDaysOfYear(t.minYear)-h+1)*n,a=t.minYear+1,this.timeScaleArray.push({position:l,value:a,unit:d,year:a,month:T.monthMod(i+1)})}else t.minDate===1&&t.minMonth===0&&this.timeScaleArray.push({position:l,value:a,unit:d,year:o,month:T.monthMod(i+1)});for(var g=a,m=l,p=0;p<r;p++)g++,m=c.determineDaysOfYear(g-1)*n+m,this.timeScaleArray.push({position:m,value:g,unit:d,year:g,month:1})}},{key:"generateMonthScale",value:function(e){var t=e.firstVal,i=e.currentMonthDate,o=e.currentMonth,n=e.currentYear,r=e.daysWidthOnXAxis,a=e.numberOfMonths,l=o,c=0,d=new Qe(this.ctx),h="month",g=0;if(t.minDate>1){c=(d.determineDaysOfMonths(o+1,t.minYear)-i+1)*r,l=T.monthMod(o+1);var m=n+g,p=T.monthMod(l),b=l;l===0&&(h="year",b=m,p=1,m+=g+=1),this.timeScaleArray.push({position:c,value:b,unit:h,year:m,month:p})}else this.timeScaleArray.push({position:c,value:l,unit:h,year:n,month:T.monthMod(o)});for(var k=l+1,v=c,x=0,u=1;x<a;x++,u++){(k=T.monthMod(k))===0?(h="year",g+=1):h="month";var f=this._getYear(n,k,g);v=d.determineDaysOfMonths(k,f)*r+v;var w=k===0?f:k;this.timeScaleArray.push({position:v,value:w,unit:h,year:f,month:k===0?1:k}),k++}}},{key:"generateDayScale",value:function(e){var t=e.firstVal,i=e.currentMonth,o=e.currentYear,n=e.hoursWidthOnXAxis,r=e.numberOfDays,a=new Qe(this.ctx),l="day",c=t.minDate+1,d=c,h=function(u,f,w){return u>a.determineDaysOfMonths(f+1,w)&&(d=1,l="month",m=f+=1),f},g=(24-t.minHour)*n,m=c,p=h(d,i,o);t.minHour===0&&t.minDate===1?(g=0,m=T.monthMod(t.minMonth),l="month",d=t.minDate):t.minDate!==1&&t.minHour===0&&t.minMinute===0&&(g=0,c=t.minDate,m=c,p=h(d=c,i,o)),this.timeScaleArray.push({position:g,value:m,unit:l,year:this._getYear(o,p,0),month:T.monthMod(p),day:d});for(var b=g,k=0;k<r;k++){l="day",p=h(d+=1,p,this._getYear(o,p,0));var v=this._getYear(o,p,0);b=24*n+b;var x=d===1?T.monthMod(p):d;this.timeScaleArray.push({position:b,value:x,unit:l,year:v,month:T.monthMod(p),day:x})}}},{key:"generateHourScale",value:function(e){var t=e.firstVal,i=e.currentDate,o=e.currentMonth,n=e.currentYear,r=e.minutesWidthOnXAxis,a=e.numberOfHours,l=new Qe(this.ctx),c="hour",d=function(y,_){return y>l.determineDaysOfMonths(_+1,n)&&(k=1,_+=1),{month:_,date:k}},h=function(y,_){return y>l.determineDaysOfMonths(_+1,n)?_+=1:_},g=60-(t.minMinute+t.minSecond/60),m=g*r,p=t.minHour+1,b=p;g===60&&(m=0,b=p=t.minHour);var k=i;b>=24&&(b=0,k+=1,c="day");var v=d(k,o).month;v=h(k,v),this.timeScaleArray.push({position:m,value:p,unit:c,day:k,hour:b,year:n,month:T.monthMod(v)}),b++;for(var x=m,u=0;u<a;u++){c="hour",b>=24&&(b=0,c="day",v=d(k+=1,v).month,v=h(k,v));var f=this._getYear(n,v,0);x=60*r+x;var w=b===0?k:b;this.timeScaleArray.push({position:x,value:w,unit:c,hour:b,day:k,year:f,month:T.monthMod(v)}),b++}}},{key:"generateMinuteScale",value:function(e){for(var t=e.currentMillisecond,i=e.currentSecond,o=e.currentMinute,n=e.currentHour,r=e.currentDate,a=e.currentMonth,l=e.currentYear,c=e.minutesWidthOnXAxis,d=e.secondsWidthOnXAxis,h=e.numberOfMinutes,g=o+1,m=r,p=a,b=l,k=n,v=(60-i-t/1e3)*d,x=0;x<h;x++)g>=60&&(g=0,(k+=1)===24&&(k=0)),this.timeScaleArray.push({position:v,value:g,unit:"minute",hour:k,minute:g,day:m,year:this._getYear(b,p,0),month:T.monthMod(p)}),v+=c,g++}},{key:"generateSecondScale",value:function(e){for(var t=e.currentMillisecond,i=e.currentSecond,o=e.currentMinute,n=e.currentHour,r=e.currentDate,a=e.currentMonth,l=e.currentYear,c=e.secondsWidthOnXAxis,d=e.numberOfSeconds,h=i+1,g=o,m=r,p=a,b=l,k=n,v=(1e3-t)/1e3*c,x=0;x<d;x++)h>=60&&(h=0,++g>=60&&(g=0,++k===24&&(k=0))),this.timeScaleArray.push({position:v,value:h,unit:"second",hour:k,minute:g,second:h,day:m,year:this._getYear(b,p,0),month:T.monthMod(p)}),v+=c,h++}},{key:"createRawDateString",value:function(e,t){var i=e.year;return e.month===0&&(e.month=1),i+="-"+("0"+e.month.toString()).slice(-2),e.unit==="day"?i+=e.unit==="day"?"-"+("0"+t).slice(-2):"-01":i+="-"+("0"+(e.day?e.day:"1")).slice(-2),e.unit==="hour"?i+=e.unit==="hour"?"T"+("0"+t).slice(-2):"T00":i+="T"+("0"+(e.hour?e.hour:"0")).slice(-2),e.unit==="minute"?i+=":"+("0"+t).slice(-2):i+=":"+(e.minute?("0"+e.minute).slice(-2):"00"),e.unit==="second"?i+=":"+("0"+t).slice(-2):i+=":00",this.utc&&(i+=".000Z"),i}},{key:"formatDates",value:function(e){var t=this,i=this.w;return e.map(function(o){var n=o.value.toString(),r=new Qe(t.ctx),a=t.createRawDateString(o,n),l=r.getDate(r.parseDate(a));if(t.utc||(l=r.getDate(r.parseDateWithTimezone(a))),i.config.xaxis.labels.format===void 0){var c="dd MMM",d=i.config.xaxis.labels.datetimeFormatter;o.unit==="year"&&(c=d.year),o.unit==="month"&&(c=d.month),o.unit==="day"&&(c=d.day),o.unit==="hour"&&(c=d.hour),o.unit==="minute"&&(c=d.minute),o.unit==="second"&&(c=d.second),n=r.formatDate(l,c)}else n=r.formatDate(l,i.config.xaxis.labels.format);return{dateString:a,position:o.position,value:n,unit:o.unit,year:o.year,month:o.month}})}},{key:"removeOverlappingTS",value:function(e){var t,i=this,o=new N(this.ctx),n=!1;e.length>0&&e[0].value&&e.every(function(l){return l.value.length===e[0].value.length})&&(n=!0,t=o.getTextRects(e[0].value).width);var r=0,a=e.map(function(l,c){if(c>0&&i.w.config.xaxis.labels.hideOverlappingLabels){var d=n?t:o.getTextRects(e[r].value).width,h=e[r].position;return l.position>h+d+10?(r=c,l):null}return l});return a=a.filter(function(l){return l!==null})}},{key:"_getYear",value:function(e,t,i){return e+Math.floor(t/12)+i}}]),s}(),nk=function(){function s(e,t){H(this,s),this.ctx=t,this.w=t.w,this.el=e}return W(s,[{key:"setupElements",value:function(){var e=this.w.globals,t=this.w.config,i=t.chart.type;e.axisCharts=["line","area","bar","rangeBar","rangeArea","candlestick","boxPlot","scatter","bubble","radar","heatmap","treemap"].indexOf(i)>-1,e.xyCharts=["line","area","bar","rangeBar","rangeArea","candlestick","boxPlot","scatter","bubble"].indexOf(i)>-1,e.isBarHorizontal=(t.chart.type==="bar"||t.chart.type==="rangeBar"||t.chart.type==="boxPlot")&&t.plotOptions.bar.horizontal,e.chartClass=".apexcharts"+e.chartID,e.dom.baseEl=this.el,e.dom.elWrap=document.createElement("div"),N.setAttrs(e.dom.elWrap,{id:e.chartClass.substring(1),class:"apexcharts-canvas "+e.chartClass.substring(1)}),this.el.appendChild(e.dom.elWrap),e.dom.Paper=new window.SVG.Doc(e.dom.elWrap),e.dom.Paper.attr({class:"apexcharts-svg","xmlns:data":"ApexChartsNS",transform:"translate(".concat(t.chart.offsetX,", ").concat(t.chart.offsetY,")")}),e.dom.Paper.node.style.background=t.theme.mode!=="dark"||t.chart.background?t.theme.mode!=="light"||t.chart.background?t.chart.background:"#fff":"#424242",this.setSVGDimensions(),e.dom.elLegendForeign=document.createElementNS(e.SVGNS,"foreignObject"),N.setAttrs(e.dom.elLegendForeign,{x:0,y:0,width:e.svgWidth,height:e.svgHeight}),e.dom.elLegendWrap=document.createElement("div"),e.dom.elLegendWrap.classList.add("apexcharts-legend"),e.dom.elLegendWrap.setAttribute("xmlns","http://www.w3.org/1999/xhtml"),e.dom.elLegendForeign.appendChild(e.dom.elLegendWrap),e.dom.Paper.node.appendChild(e.dom.elLegendForeign),e.dom.elGraphical=e.dom.Paper.group().attr({class:"apexcharts-inner apexcharts-graphical"}),e.dom.elDefs=e.dom.Paper.defs(),e.dom.Paper.add(e.dom.elGraphical),e.dom.elGraphical.add(e.dom.elDefs)}},{key:"plotChartType",value:function(e,t){var i=this.w,o=i.config,n=i.globals,r={series:[],i:[]},a={series:[],i:[]},l={series:[],i:[]},c={series:[],i:[]},d={series:[],i:[]},h={series:[],i:[]},g={series:[],i:[]},m={series:[],i:[]},p={series:[],seriesRangeEnd:[],i:[]},b=o.chart.type!==void 0?o.chart.type:"line",k=null,v=0;n.series.forEach(function(I,R){var z=e[R].type||b;switch(z){case"column":case"bar":d.series.push(I),d.i.push(R),i.globals.columnSeries=d;break;case"area":a.series.push(I),a.i.push(R);break;case"line":r.series.push(I),r.i.push(R);break;case"scatter":l.series.push(I),l.i.push(R);break;case"bubble":c.series.push(I),c.i.push(R);break;case"candlestick":h.series.push(I),h.i.push(R);break;case"boxPlot":g.series.push(I),g.i.push(R);break;case"rangeBar":m.series.push(I),m.i.push(R);break;case"rangeArea":p.series.push(n.seriesRangeStart[R]),p.seriesRangeEnd.push(n.seriesRangeEnd[R]),p.i.push(R);break;case"heatmap":case"treemap":case"pie":case"donut":case"polarArea":case"radialBar":case"radar":k=z;break;default:console.warn("You have specified an unrecognized series type (",z,").")}b!==z&&z!=="scatter"&&v++}),v>0&&(k!==null&&console.warn("Chart or series type ",k," can not appear with other chart or series types."),d.series.length>0&&o.plotOptions.bar.horizontal&&(v-=d.length,d={series:[],i:[]},i.globals.columnSeries={series:[],i:[]},console.warn("Horizontal bars are not supported in a mixed/combo chart. Please turn off `plotOptions.bar.horizontal`"))),n.comboCharts||(n.comboCharts=v>0);var x=new hl(this.ctx,t),u=new cl(this.ctx,t);this.ctx.pie=new vg(this.ctx);var f=new qw(this.ctx);this.ctx.rangeBar=new Kw(this.ctx,t);var w=new Xw(this.ctx),y=[];if(n.comboCharts){var _,C,A=new De(this.ctx);if(a.series.length>0&&(_=y).push.apply(_,at(A.drawSeriesByGroup(a,n.areaGroups,"area",x))),d.series.length>0)if(i.config.chart.stacked){var S=new ig(this.ctx,t);y.push(S.draw(d.series,d.i))}else this.ctx.bar=new qo(this.ctx,t),y.push(this.ctx.bar.draw(d.series,d.i));if(p.series.length>0&&y.push(x.draw(p.series,"rangeArea",p.i,p.seriesRangeEnd)),r.series.length>0&&(C=y).push.apply(C,at(A.drawSeriesByGroup(r,n.lineGroups,"line",x))),h.series.length>0&&y.push(u.draw(h.series,"candlestick",h.i)),g.series.length>0&&y.push(u.draw(g.series,"boxPlot",g.i)),m.series.length>0&&y.push(this.ctx.rangeBar.draw(m.series,m.i)),l.series.length>0){var P=new hl(this.ctx,t,!0);y.push(P.draw(l.series,"scatter",l.i))}if(c.series.length>0){var L=new hl(this.ctx,t,!0);y.push(L.draw(c.series,"bubble",c.i))}}else switch(o.chart.type){case"line":y=x.draw(n.series,"line");break;case"area":y=x.draw(n.series,"area");break;case"bar":o.chart.stacked?y=new ig(this.ctx,t).draw(n.series):(this.ctx.bar=new qo(this.ctx,t),y=this.ctx.bar.draw(n.series));break;case"candlestick":y=new cl(this.ctx,t).draw(n.series,"candlestick");break;case"boxPlot":y=new cl(this.ctx,t).draw(n.series,o.chart.type);break;case"rangeBar":y=this.ctx.rangeBar.draw(n.series);break;case"rangeArea":y=x.draw(n.seriesRangeStart,"rangeArea",void 0,n.seriesRangeEnd);break;case"heatmap":y=new Yw(this.ctx,t).draw(n.series);break;case"treemap":y=new tk(this.ctx,t).draw(n.series);break;case"pie":case"donut":case"polarArea":y=this.ctx.pie.draw(n.series);break;case"radialBar":y=f.draw(n.series);break;case"radar":y=w.draw(n.series);break;default:y=x.draw(n.series)}return y}},{key:"setSVGDimensions",value:function(){var e=this.w.globals,t=this.w.config;t.chart.width||(t.chart.width="100%"),t.chart.height||(t.chart.height="auto"),e.svgWidth=t.chart.width,e.svgHeight=t.chart.height;var i=T.getDimensions(this.el),o=t.chart.width.toString().split(/[0-9]+/g).pop();o==="%"?T.isNumber(i[0])&&(i[0].width===0&&(i=T.getDimensions(this.el.parentNode)),e.svgWidth=i[0]*parseInt(t.chart.width,10)/100):o!=="px"&&o!==""||(e.svgWidth=parseInt(t.chart.width,10));var n=String(t.chart.height).toString().split(/[0-9]+/g).pop();if(e.svgHeight!=="auto"&&e.svgHeight!=="")if(n==="%"){var r=T.getDimensions(this.el.parentNode);e.svgHeight=r[1]*parseInt(t.chart.height,10)/100}else e.svgHeight=parseInt(t.chart.height,10);else e.axisCharts?e.svgHeight=e.svgWidth/1.61:e.svgHeight=e.svgWidth/1.2;if(e.svgWidth<0&&(e.svgWidth=0),e.svgHeight<0&&(e.svgHeight=0),N.setAttrs(e.dom.Paper.node,{width:e.svgWidth,height:e.svgHeight}),n!=="%"){var a=t.chart.sparkline.enabled?0:e.axisCharts?t.chart.parentHeightOffset:0;e.dom.Paper.node.parentNode.parentNode.style.minHeight=e.svgHeight+a+"px"}e.dom.elWrap.style.width=e.svgWidth+"px",e.dom.elWrap.style.height=e.svgHeight+"px"}},{key:"shiftGraphPosition",value:function(){var e=this.w.globals,t=e.translateY,i={transform:"translate("+e.translateX+", "+t+")"};N.setAttrs(e.dom.elGraphical.node,i)}},{key:"resizeNonAxisCharts",value:function(){var e=this.w,t=e.globals,i=0,o=e.config.chart.sparkline.enabled?1:15;o+=e.config.grid.padding.bottom,e.config.legend.position!=="top"&&e.config.legend.position!=="bottom"||!e.config.legend.show||e.config.legend.floating||(i=new mg(this.ctx).legendHelpers.getLegendDimensions().clwh+10);var n=e.globals.dom.baseEl.querySelector(".apexcharts-radialbar, .apexcharts-pie"),r=2.05*e.globals.radialSize;if(n&&!e.config.chart.sparkline.enabled&&e.config.plotOptions.radialBar.startAngle!==0){var a=T.getBoundingClientRect(n);r=a.bottom;var l=a.bottom-a.top;r=Math.max(2.05*e.globals.radialSize,l)}var c=r+t.translateY+i+o;t.dom.elLegendForeign&&t.dom.elLegendForeign.setAttribute("height",c),e.config.chart.height&&String(e.config.chart.height).indexOf("%")>0||(t.dom.elWrap.style.height=c+"px",N.setAttrs(t.dom.Paper.node,{height:c}),t.dom.Paper.node.parentNode.parentNode.style.minHeight=c+"px")}},{key:"coreCalculations",value:function(){new fl(this.ctx).init()}},{key:"resetGlobals",value:function(){var e=this,t=function(){return e.w.config.series.map(function(n){return[]})},i=new cg,o=this.w.globals;i.initGlobalVars(o),o.seriesXvalues=t(),o.seriesYvalues=t()}},{key:"isMultipleY",value:function(){if(this.w.config.yaxis.constructor===Array&&this.w.config.yaxis.length>1)return this.w.globals.isMultipleYAxis=!0,!0}},{key:"xySettings",value:function(){var e=null,t=this.w;if(t.globals.axisCharts){if(t.config.xaxis.crosshairs.position==="back"&&new pl(this.ctx).drawXCrosshairs(),t.config.yaxis[0].crosshairs.position==="back"&&new pl(this.ctx).drawYCrosshairs(),t.config.xaxis.type==="datetime"&&t.config.xaxis.labels.formatter===void 0){this.ctx.timeScale=new ok(this.ctx);var i=[];isFinite(t.globals.minX)&&isFinite(t.globals.maxX)&&!t.globals.isBarHorizontal?i=this.ctx.timeScale.calculateTimeScaleTicks(t.globals.minX,t.globals.maxX):t.globals.isBarHorizontal&&(i=this.ctx.timeScale.calculateTimeScaleTicks(t.globals.minY,t.globals.maxY)),this.ctx.timeScale.recalcDimensionsBasedOnFormat(i)}e=new De(this.ctx).getCalculatedRatios()}return e}},{key:"updateSourceChart",value:function(e){this.ctx.w.globals.selection=void 0,this.ctx.updateHelpers._updateOptions({chart:{selection:{xaxis:{min:e.w.globals.minX,max:e.w.globals.maxX}}}},!1,!1)}},{key:"setupBrushHandler",value:function(){var e=this,t=this.w;if(t.config.chart.brush.enabled&&typeof t.config.chart.events.selection!="function"){var i=Array.isArray(t.config.chart.brush.targets)?t.config.chart.brush.targets:[t.config.chart.brush.target];i.forEach(function(o){var n=ApexCharts.getChartByID(o);n.w.globals.brushSource=e.ctx,typeof n.w.config.chart.events.zoomed!="function"&&(n.w.config.chart.events.zoomed=function(){e.updateSourceChart(n)}),typeof n.w.config.chart.events.scrolled!="function"&&(n.w.config.chart.events.scrolled=function(){e.updateSourceChart(n)})}),t.config.chart.events.selection=function(o,n){i.forEach(function(r){ApexCharts.getChartByID(r).ctx.updateHelpers._updateOptions({xaxis:{min:n.xaxis.min,max:n.xaxis.max}},!1,!1,!1,!1)})}}}}]),s}(),sk=function(){function s(e){H(this,s),this.ctx=e,this.w=e.w}return W(s,[{key:"_updateOptions",value:function(e){var t=this,i=arguments.length>1&&arguments[1]!==void 0&&arguments[1],o=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2],n=!(arguments.length>3&&arguments[3]!==void 0)||arguments[3],r=arguments.length>4&&arguments[4]!==void 0&&arguments[4];return new Promise(function(a){var l=[t.ctx];n&&(l=t.ctx.getSyncedCharts()),t.ctx.w.globals.isExecCalled&&(l=[t.ctx],t.ctx.w.globals.isExecCalled=!1),l.forEach(function(c,d){var h=c.w;if(h.globals.shouldAnimate=o,i||(h.globals.resized=!0,h.globals.dataChanged=!0,o&&c.series.getPreviousPaths()),e&&Ue(e)==="object"&&(c.config=new Jn(e),e=De.extendArrayProps(c.config,e,h),c.w.globals.chartID!==t.ctx.w.globals.chartID&&delete e.series,h.config=T.extend(h.config,e),r&&(h.globals.lastXAxis=e.xaxis?T.clone(e.xaxis):[],h.globals.lastYAxis=e.yaxis?T.clone(e.yaxis):[],h.globals.initialConfig=T.extend({},h.config),h.globals.initialSeries=T.clone(h.config.series),e.series))){for(var g=0;g<h.globals.collapsedSeriesIndices.length;g++){var m=h.config.series[h.globals.collapsedSeriesIndices[g]];h.globals.collapsedSeries[g].data=h.globals.axisCharts?m.data.slice():m}for(var p=0;p<h.globals.ancillaryCollapsedSeriesIndices.length;p++){var b=h.config.series[h.globals.ancillaryCollapsedSeriesIndices[p]];h.globals.ancillaryCollapsedSeries[p].data=h.globals.axisCharts?b.data.slice():b}c.series.emptyCollapsedSeries(h.config.series)}return c.update(e).then(function(){d===l.length-1&&a(c)})})})}},{key:"_updateSeries",value:function(e,t){var i=this,o=arguments.length>2&&arguments[2]!==void 0&&arguments[2];return new Promise(function(n){var r,a=i.w;return a.globals.shouldAnimate=t,a.globals.dataChanged=!0,t&&i.ctx.series.getPreviousPaths(),a.globals.axisCharts?((r=e.map(function(l,c){return i._extendSeries(l,c)})).length===0&&(r=[{data:[]}]),a.config.series=r):a.config.series=e.slice(),o&&(a.globals.initialConfig.series=T.clone(a.config.series),a.globals.initialSeries=T.clone(a.config.series)),i.ctx.update().then(function(){n(i.ctx)})})}},{key:"_extendSeries",value:function(e,t){var i=this.w,o=i.config.series[t];return F(F({},i.config.series[t]),{},{name:e.name?e.name:o?.name,color:e.color?e.color:o?.color,type:e.type?e.type:o?.type,group:e.group?e.group:o?.group,data:e.data?e.data:o?.data,zIndex:e.zIndex!==void 0?e.zIndex:t})}},{key:"toggleDataPointSelection",value:function(e,t){var i=this.w,o=null,n=".apexcharts-series[data\\:realIndex='".concat(e,"']");return i.globals.axisCharts?o=i.globals.dom.Paper.select("".concat(n," path[j='").concat(t,"'], ").concat(n," circle[j='").concat(t,"'], ").concat(n," rect[j='").concat(t,"']")).members[0]:t===void 0&&(o=i.globals.dom.Paper.select("".concat(n," path[j='").concat(e,"']")).members[0],i.config.chart.type!=="pie"&&i.config.chart.type!=="polarArea"&&i.config.chart.type!=="donut"||this.ctx.pie.pieClicked(e)),o?(new N(this.ctx).pathMouseDown(o,null),o.node?o.node:null):(console.warn("toggleDataPointSelection: Element not found"),null)}},{key:"forceXAxisUpdate",value:function(e){var t=this.w;if(["min","max"].forEach(function(o){e.xaxis[o]!==void 0&&(t.config.xaxis[o]=e.xaxis[o],t.globals.lastXAxis[o]=e.xaxis[o])}),e.xaxis.categories&&e.xaxis.categories.length&&(t.config.xaxis.categories=e.xaxis.categories),t.config.xaxis.convertedCatToNumeric){var i=new Qn(e);e=i.convertCatToNumericXaxis(e,this.ctx)}return e}},{key:"forceYAxisUpdate",value:function(e){return e.chart&&e.chart.stacked&&e.chart.stackType==="100%"&&(Array.isArray(e.yaxis)?e.yaxis.forEach(function(t,i){e.yaxis[i].min=0,e.yaxis[i].max=100}):(e.yaxis.min=0,e.yaxis.max=100)),e}},{key:"revertDefaultAxisMinMax",value:function(e){var t=this,i=this.w,o=i.globals.lastXAxis,n=i.globals.lastYAxis;e&&e.xaxis&&(o=e.xaxis),e&&e.yaxis&&(n=e.yaxis),i.config.xaxis.min=o.min,i.config.xaxis.max=o.max;var r=function(a){n[a]!==void 0&&(i.config.yaxis[a].min=n[a].min,i.config.yaxis[a].max=n[a].max)};i.config.yaxis.map(function(a,l){i.globals.zoomed||n[l]!==void 0?r(l):t.ctx.opts.yaxis[l]!==void 0&&(a.min=t.ctx.opts.yaxis[l].min,a.max=t.ctx.opts.yaxis[l].max)})}}]),s}();xi=typeof window<"u"?window:void 0,Zn=function(s,e){var t=(this!==void 0?this:s).SVG=function(u){if(t.supported)return u=new t.Doc(u),t.parser.draw||t.prepare(),u};if(t.ns="http://www.w3.org/2000/svg",t.xmlns="http://www.w3.org/2000/xmlns/",t.xlink="http://www.w3.org/1999/xlink",t.svgjs="http://svgjs.dev",t.supported=!0,!t.supported)return!1;t.did=1e3,t.eid=function(u){return"Svgjs"+d(u)+t.did++},t.create=function(u){var f=e.createElementNS(this.ns,u);return f.setAttribute("id",this.eid(u)),f},t.extend=function(){var u,f;f=(u=[].slice.call(arguments)).pop();for(var w=u.length-1;w>=0;w--)if(u[w])for(var y in f)u[w].prototype[y]=f[y];t.Set&&t.Set.inherit&&t.Set.inherit()},t.invent=function(u){var f=typeof u.create=="function"?u.create:function(){this.constructor.call(this,t.create(u.create))};return u.inherit&&(f.prototype=new u.inherit),u.extend&&t.extend(f,u.extend),u.construct&&t.extend(u.parent||t.Container,u.construct),f},t.adopt=function(u){return u?u.instance?u.instance:((f=u.nodeName=="svg"?u.parentNode instanceof s.SVGElement?new t.Nested:new t.Doc:u.nodeName=="linearGradient"?new t.Gradient("linear"):u.nodeName=="radialGradient"?new t.Gradient("radial"):t[d(u.nodeName)]?new t[d(u.nodeName)]:new t.Element(u)).type=u.nodeName,f.node=u,u.instance=f,f instanceof t.Doc&&f.namespace().defs(),f.setData(JSON.parse(u.getAttribute("svgjs:data"))||{}),f):null;var f},t.prepare=function(){var u=e.getElementsByTagName("body")[0],f=(u?new t.Doc(u):t.adopt(e.documentElement).nested()).size(2,0);t.parser={body:u||e.documentElement,draw:f.style("opacity:0;position:absolute;left:-100%;top:-100%;overflow:hidden").node,poly:f.polyline().node,path:f.path().node,native:t.create("svg")}},t.parser={native:t.create("svg")},e.addEventListener("DOMContentLoaded",function(){t.parser.draw||t.prepare()},!1),t.regex={numberAndUnit:/^([+-]?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?)([a-z%]*)$/i,hex:/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,rgb:/rgb\((\d+),(\d+),(\d+)\)/,reference:/#([a-z0-9\-_]+)/i,transforms:/\)\s*,?\s*/,whitespace:/\s/g,isHex:/^#[a-f0-9]{3,6}$/i,isRgb:/^rgb\(/,isCss:/[^:]+:[^;]+;?/,isBlank:/^(\s+)?$/,isNumber:/^[+-]?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,isPercent:/^-?[\d\.]+%$/,isImage:/\.(jpg|jpeg|png|gif|svg)(\?[^=]+.*)?/i,delimiter:/[\s,]+/,hyphen:/([^e])\-/gi,pathLetters:/[MLHVCSQTAZ]/gi,isPathLetter:/[MLHVCSQTAZ]/i,numbersWithDots:/((\d?\.\d+(?:e[+-]?\d+)?)((?:\.\d+(?:e[+-]?\d+)?)+))+/gi,dots:/\./g},t.utils={map:function(u,f){for(var w=u.length,y=[],_=0;_<w;_++)y.push(f(u[_]));return y},filter:function(u,f){for(var w=u.length,y=[],_=0;_<w;_++)f(u[_])&&y.push(u[_]);return y},filterSVGElements:function(u){return this.filter(u,function(f){return f instanceof s.SVGElement})}},t.defaults={attrs:{"fill-opacity":1,"stroke-opacity":1,"stroke-width":0,"stroke-linejoin":"miter","stroke-linecap":"butt",fill:"#000000",stroke:"#000000",opacity:1,x:0,y:0,cx:0,cy:0,width:0,height:0,r:0,rx:0,ry:0,offset:0,"stop-opacity":1,"stop-color":"#000000","font-size":16,"font-family":"Helvetica, Arial, sans-serif","text-anchor":"start"}},t.Color=function(u){var f,w;this.r=0,this.g=0,this.b=0,u&&(typeof u=="string"?t.regex.isRgb.test(u)?(f=t.regex.rgb.exec(u.replace(t.regex.whitespace,"")),this.r=parseInt(f[1]),this.g=parseInt(f[2]),this.b=parseInt(f[3])):t.regex.isHex.test(u)&&(f=t.regex.hex.exec((w=u).length==4?["#",w.substring(1,2),w.substring(1,2),w.substring(2,3),w.substring(2,3),w.substring(3,4),w.substring(3,4)].join(""):w),this.r=parseInt(f[1],16),this.g=parseInt(f[2],16),this.b=parseInt(f[3],16)):Ue(u)==="object"&&(this.r=u.r,this.g=u.g,this.b=u.b))},t.extend(t.Color,{toString:function(){return this.toHex()},toHex:function(){return"#"+h(this.r)+h(this.g)+h(this.b)},toRgb:function(){return"rgb("+[this.r,this.g,this.b].join()+")"},brightness:function(){return this.r/255*.3+this.g/255*.59+this.b/255*.11},morph:function(u){return this.destination=new t.Color(u),this},at:function(u){return this.destination?(u=u<0?0:u>1?1:u,new t.Color({r:~~(this.r+(this.destination.r-this.r)*u),g:~~(this.g+(this.destination.g-this.g)*u),b:~~(this.b+(this.destination.b-this.b)*u)})):this}}),t.Color.test=function(u){return u+="",t.regex.isHex.test(u)||t.regex.isRgb.test(u)},t.Color.isRgb=function(u){return u&&typeof u.r=="number"&&typeof u.g=="number"&&typeof u.b=="number"},t.Color.isColor=function(u){return t.Color.isRgb(u)||t.Color.test(u)},t.Array=function(u,f){(u=(u||[]).valueOf()).length==0&&f&&(u=f.valueOf()),this.value=this.parse(u)},t.extend(t.Array,{toString:function(){return this.value.join(" ")},valueOf:function(){return this.value},parse:function(u){return u=u.valueOf(),Array.isArray(u)?u:this.split(u)}}),t.PointArray=function(u,f){t.Array.call(this,u,f||[[0,0]])},t.PointArray.prototype=new t.Array,t.PointArray.prototype.constructor=t.PointArray;for(var i={M:function(u,f,w){return f.x=w.x=u[0],f.y=w.y=u[1],["M",f.x,f.y]},L:function(u,f){return f.x=u[0],f.y=u[1],["L",u[0],u[1]]},H:function(u,f){return f.x=u[0],["H",u[0]]},V:function(u,f){return f.y=u[0],["V",u[0]]},C:function(u,f){return f.x=u[4],f.y=u[5],["C",u[0],u[1],u[2],u[3],u[4],u[5]]},Q:function(u,f){return f.x=u[2],f.y=u[3],["Q",u[0],u[1],u[2],u[3]]},S:function(u,f){return f.x=u[2],f.y=u[3],["S",u[0],u[1],u[2],u[3]]},Z:function(u,f,w){return f.x=w.x,f.y=w.y,["Z"]}},o="mlhvqtcsaz".split(""),n=0,r=o.length;n<r;++n)i[o[n]]=function(u){return function(f,w,y){if(u=="H")f[0]=f[0]+w.x;else if(u=="V")f[0]=f[0]+w.y;else if(u=="A")f[5]=f[5]+w.x,f[6]=f[6]+w.y;else for(var _=0,C=f.length;_<C;++_)f[_]=f[_]+(_%2?w.y:w.x);if(i&&typeof i[u]=="function")return i[u](f,w,y)}}(o[n].toUpperCase());t.PathArray=function(u,f){t.Array.call(this,u,f||[["M",0,0]])},t.PathArray.prototype=new t.Array,t.PathArray.prototype.constructor=t.PathArray,t.extend(t.PathArray,{toString:function(){return function(u){for(var f=0,w=u.length,y="";f<w;f++)y+=u[f][0],u[f][1]!=null&&(y+=u[f][1],u[f][2]!=null&&(y+=" ",y+=u[f][2],u[f][3]!=null&&(y+=" ",y+=u[f][3],y+=" ",y+=u[f][4],u[f][5]!=null&&(y+=" ",y+=u[f][5],y+=" ",y+=u[f][6],u[f][7]!=null&&(y+=" ",y+=u[f][7])))));return y+" "}(this.value)},move:function(u,f){var w=this.bbox();return w.x,w.y,this},at:function(u){if(!this.destination)return this;for(var f=this.value,w=this.destination.value,y=[],_=new t.PathArray,C=0,A=f.length;C<A;C++){y[C]=[f[C][0]];for(var S=1,P=f[C].length;S<P;S++)y[C][S]=f[C][S]+(w[C][S]-f[C][S])*u;y[C][0]==="A"&&(y[C][4]=+(y[C][4]!=0),y[C][5]=+(y[C][5]!=0))}return _.value=y,_},parse:function(u){if(u instanceof t.PathArray)return u.valueOf();var f,w={M:2,L:2,H:1,V:1,C:6,S:4,Q:4,T:2,A:7,Z:0};u=typeof u=="string"?u.replace(t.regex.numbersWithDots,l).replace(t.regex.pathLetters," $& ").replace(t.regex.hyphen,"$1 -").trim().split(t.regex.delimiter):u.reduce(function(P,L){return[].concat.call(P,L)},[]);var y=[],_=new t.Point,C=new t.Point,A=0,S=u.length;do t.regex.isPathLetter.test(u[A])?(f=u[A],++A):f=="M"?f="L":f=="m"&&(f="l"),y.push(i[f].call(null,u.slice(A,A+=w[f.toUpperCase()]).map(parseFloat),_,C));while(S>A);return y},bbox:function(){return t.parser.draw||t.prepare(),t.parser.path.setAttribute("d",this.toString()),t.parser.path.getBBox()}}),t.Number=t.invent({create:function(u,f){this.value=0,this.unit=f||"",typeof u=="number"?this.value=isNaN(u)?0:isFinite(u)?u:u<0?-34e37:34e37:typeof u=="string"?(f=u.match(t.regex.numberAndUnit))&&(this.value=parseFloat(f[1]),f[5]=="%"?this.value/=100:f[5]=="s"&&(this.value*=1e3),this.unit=f[5]):u instanceof t.Number&&(this.value=u.valueOf(),this.unit=u.unit)},extend:{toString:function(){return(this.unit=="%"?~~(1e8*this.value)/1e6:this.unit=="s"?this.value/1e3:this.value)+this.unit},toJSON:function(){return this.toString()},valueOf:function(){return this.value},plus:function(u){return u=new t.Number(u),new t.Number(this+u,this.unit||u.unit)},minus:function(u){return u=new t.Number(u),new t.Number(this-u,this.unit||u.unit)},times:function(u){return u=new t.Number(u),new t.Number(this*u,this.unit||u.unit)},divide:function(u){return u=new t.Number(u),new t.Number(this/u,this.unit||u.unit)},to:function(u){var f=new t.Number(this);return typeof u=="string"&&(f.unit=u),f},morph:function(u){return this.destination=new t.Number(u),u.relative&&(this.destination.value+=this.value),this},at:function(u){return this.destination?new t.Number(this.destination).minus(this).times(u).plus(this):this}}}),t.Element=t.invent({create:function(u){this._stroke=t.defaults.attrs.stroke,this._event=null,this.dom={},(this.node=u)&&(this.type=u.nodeName,this.node.instance=this,this._stroke=u.getAttribute("stroke")||this._stroke)},extend:{x:function(u){return this.attr("x",u)},y:function(u){return this.attr("y",u)},cx:function(u){return u==null?this.x()+this.width()/2:this.x(u-this.width()/2)},cy:function(u){return u==null?this.y()+this.height()/2:this.y(u-this.height()/2)},move:function(u,f){return this.x(u).y(f)},center:function(u,f){return this.cx(u).cy(f)},width:function(u){return this.attr("width",u)},height:function(u){return this.attr("height",u)},size:function(u,f){var w=g(this,u,f);return this.width(new t.Number(w.width)).height(new t.Number(w.height))},clone:function(u){this.writeDataToDom();var f=b(this.node.cloneNode(!0));return u?u.add(f):this.after(f),f},remove:function(){return this.parent()&&this.parent().removeElement(this),this},replace:function(u){return this.after(u).remove(),u},addTo:function(u){return u.put(this)},putIn:function(u){return u.add(this)},id:function(u){return this.attr("id",u)},show:function(){return this.style("display","")},hide:function(){return this.style("display","none")},visible:function(){return this.style("display")!="none"},toString:function(){return this.attr("id")},classes:function(){var u=this.attr("class");return u==null?[]:u.trim().split(t.regex.delimiter)},hasClass:function(u){return this.classes().indexOf(u)!=-1},addClass:function(u){if(!this.hasClass(u)){var f=this.classes();f.push(u),this.attr("class",f.join(" "))}return this},removeClass:function(u){return this.hasClass(u)&&this.attr("class",this.classes().filter(function(f){return f!=u}).join(" ")),this},toggleClass:function(u){return this.hasClass(u)?this.removeClass(u):this.addClass(u)},reference:function(u){return t.get(this.attr(u))},parent:function(u){var f=this;if(!f.node.parentNode)return null;if(f=t.adopt(f.node.parentNode),!u)return f;for(;f&&f.node instanceof s.SVGElement;){if(typeof u=="string"?f.matches(u):f instanceof u)return f;if(!f.node.parentNode||f.node.parentNode.nodeName=="#document")return null;f=t.adopt(f.node.parentNode)}},doc:function(){return this instanceof t.Doc?this:this.parent(t.Doc)},parents:function(u){var f=[],w=this;do{if(!(w=w.parent(u))||!w.node)break;f.push(w)}while(w.parent);return f},matches:function(u){return function(f,w){return(f.matches||f.matchesSelector||f.msMatchesSelector||f.mozMatchesSelector||f.webkitMatchesSelector||f.oMatchesSelector).call(f,w)}(this.node,u)},native:function(){return this.node},svg:function(u){var f=e.createElementNS("http://www.w3.org/2000/svg","svg");if(!(u&&this instanceof t.Parent))return f.appendChild(u=e.createElementNS("http://www.w3.org/2000/svg","svg")),this.writeDataToDom(),u.appendChild(this.node.cloneNode(!0)),f.innerHTML.replace(/^<svg>/,"").replace(/<\/svg>$/,"");f.innerHTML="<svg>"+u.replace(/\n/,"").replace(/<([\w:-]+)([^<]+?)\/>/g,"<$1$2></$1>")+"</svg>";for(var w=0,y=f.firstChild.childNodes.length;w<y;w++)this.node.appendChild(f.firstChild.firstChild);return this},writeDataToDom:function(){return(this.each||this.lines)&&(this.each?this:this.lines()).each(function(){this.writeDataToDom()}),this.node.removeAttribute("svgjs:data"),Object.keys(this.dom).length&&this.node.setAttribute("svgjs:data",JSON.stringify(this.dom)),this},setData:function(u){return this.dom=u,this},is:function(u){return function(f,w){return f instanceof w}(this,u)}}}),t.easing={"-":function(u){return u},"<>":function(u){return-Math.cos(u*Math.PI)/2+.5},">":function(u){return Math.sin(u*Math.PI/2)},"<":function(u){return 1-Math.cos(u*Math.PI/2)}},t.morph=function(u){return function(f,w){return new t.MorphObj(f,w).at(u)}},t.Situation=t.invent({create:function(u){this.init=!1,this.reversed=!1,this.reversing=!1,this.duration=new t.Number(u.duration).valueOf(),this.delay=new t.Number(u.delay).valueOf(),this.start=+new Date+this.delay,this.finish=this.start+this.duration,this.ease=u.ease,this.loop=0,this.loops=!1,this.animations={},this.attrs={},this.styles={},this.transforms=[],this.once={}}}),t.FX=t.invent({create:function(u){this._target=u,this.situations=[],this.active=!1,this.situation=null,this.paused=!1,this.lastPos=0,this.pos=0,this.absPos=0,this._speed=1},extend:{animate:function(u,f,w){Ue(u)==="object"&&(f=u.ease,w=u.delay,u=u.duration);var y=new t.Situation({duration:u||1e3,delay:w||0,ease:t.easing[f||"-"]||f});return this.queue(y),this},target:function(u){return u&&u instanceof t.Element?(this._target=u,this):this._target},timeToAbsPos:function(u){return(u-this.situation.start)/(this.situation.duration/this._speed)},absPosToTime:function(u){return this.situation.duration/this._speed*u+this.situation.start},startAnimFrame:function(){this.stopAnimFrame(),this.animationFrame=s.requestAnimationFrame((function(){this.step()}).bind(this))},stopAnimFrame:function(){s.cancelAnimationFrame(this.animationFrame)},start:function(){return!this.active&&this.situation&&(this.active=!0,this.startCurrent()),this},startCurrent:function(){return this.situation.start=+new Date+this.situation.delay/this._speed,this.situation.finish=this.situation.start+this.situation.duration/this._speed,this.initAnimations().step()},queue:function(u){return(typeof u=="function"||u instanceof t.Situation)&&this.situations.push(u),this.situation||(this.situation=this.situations.shift()),this},dequeue:function(){return this.stop(),this.situation=this.situations.shift(),this.situation&&(this.situation instanceof t.Situation?this.start():this.situation.call(this)),this},initAnimations:function(){var u,f=this.situation;if(f.init)return this;for(var w in f.animations){u=this.target()[w](),Array.isArray(u)||(u=[u]),Array.isArray(f.animations[w])||(f.animations[w]=[f.animations[w]]);for(var y=u.length;y--;)f.animations[w][y]instanceof t.Number&&(u[y]=new t.Number(u[y])),f.animations[w][y]=u[y].morph(f.animations[w][y])}for(var w in f.attrs)f.attrs[w]=new t.MorphObj(this.target().attr(w),f.attrs[w]);for(var w in f.styles)f.styles[w]=new t.MorphObj(this.target().style(w),f.styles[w]);return f.initialTransformation=this.target().matrixify(),f.init=!0,this},clearQueue:function(){return this.situations=[],this},clearCurrent:function(){return this.situation=null,this},stop:function(u,f){var w=this.active;return this.active=!1,f&&this.clearQueue(),u&&this.situation&&(!w&&this.startCurrent(),this.atEnd()),this.stopAnimFrame(),this.clearCurrent()},after:function(u){var f=this.last();return this.target().on("finished.fx",function w(y){y.detail.situation==f&&(u.call(this,f),this.off("finished.fx",w))}),this._callStart()},during:function(u){var f=this.last(),w=function(y){y.detail.situation==f&&u.call(this,y.detail.pos,t.morph(y.detail.pos),y.detail.eased,f)};return this.target().off("during.fx",w).on("during.fx",w),this.after(function(){this.off("during.fx",w)}),this._callStart()},afterAll:function(u){var f=function w(y){u.call(this),this.off("allfinished.fx",w)};return this.target().off("allfinished.fx",f).on("allfinished.fx",f),this._callStart()},last:function(){return this.situations.length?this.situations[this.situations.length-1]:this.situation},add:function(u,f,w){return this.last()[w||"animations"][u]=f,this._callStart()},step:function(u){var f,w,y;u||(this.absPos=this.timeToAbsPos(+new Date)),this.situation.loops!==!1?(f=Math.max(this.absPos,0),w=Math.floor(f),this.situation.loops===!0||w<this.situation.loops?(this.pos=f-w,y=this.situation.loop,this.situation.loop=w):(this.absPos=this.situation.loops,this.pos=1,y=this.situation.loop-1,this.situation.loop=this.situation.loops),this.situation.reversing&&(this.situation.reversed=this.situation.reversed!=!!((this.situation.loop-y)%2))):(this.absPos=Math.min(this.absPos,1),this.pos=this.absPos),this.pos<0&&(this.pos=0),this.situation.reversed&&(this.pos=1-this.pos);var _=this.situation.ease(this.pos);for(var C in this.situation.once)C>this.lastPos&&C<=_&&(this.situation.once[C].call(this.target(),this.pos,_),delete this.situation.once[C]);return this.active&&this.target().fire("during",{pos:this.pos,eased:_,fx:this,situation:this.situation}),this.situation?(this.eachAt(),this.pos==1&&!this.situation.reversed||this.situation.reversed&&this.pos==0?(this.stopAnimFrame(),this.target().fire("finished",{fx:this,situation:this.situation}),this.situations.length||(this.target().fire("allfinished"),this.situations.length||(this.target().off(".fx"),this.active=!1)),this.active?this.dequeue():this.clearCurrent()):!this.paused&&this.active&&this.startAnimFrame(),this.lastPos=_,this):this},eachAt:function(){var u,f=this,w=this.target(),y=this.situation;for(var _ in y.animations)u=[].concat(y.animations[_]).map(function(S){return typeof S!="string"&&S.at?S.at(y.ease(f.pos),f.pos):S}),w[_].apply(w,u);for(var _ in y.attrs)u=[_].concat(y.attrs[_]).map(function(P){return typeof P!="string"&&P.at?P.at(y.ease(f.pos),f.pos):P}),w.attr.apply(w,u);for(var _ in y.styles)u=[_].concat(y.styles[_]).map(function(P){return typeof P!="string"&&P.at?P.at(y.ease(f.pos),f.pos):P}),w.style.apply(w,u);if(y.transforms.length){u=y.initialTransformation,_=0;for(var C=y.transforms.length;_<C;_++){var A=y.transforms[_];A instanceof t.Matrix?u=A.relative?u.multiply(new t.Matrix().morph(A).at(y.ease(this.pos))):u.morph(A).at(y.ease(this.pos)):(A.relative||A.undo(u.extract()),u=u.multiply(A.at(y.ease(this.pos))))}w.matrix(u)}return this},once:function(u,f,w){var y=this.last();return w||(u=y.ease(u)),y.once[u]=f,this},_callStart:function(){return setTimeout((function(){this.start()}).bind(this),0),this}},parent:t.Element,construct:{animate:function(u,f,w){return(this.fx||(this.fx=new t.FX(this))).animate(u,f,w)},delay:function(u){return(this.fx||(this.fx=new t.FX(this))).delay(u)},stop:function(u,f){return this.fx&&this.fx.stop(u,f),this},finish:function(){return this.fx&&this.fx.finish(),this}}}),t.MorphObj=t.invent({create:function(u,f){return t.Color.isColor(f)?new t.Color(u).morph(f):t.regex.delimiter.test(u)?t.regex.pathLetters.test(u)?new t.PathArray(u).morph(f):new t.Array(u).morph(f):t.regex.numberAndUnit.test(f)?new t.Number(u).morph(f):(this.value=u,void(this.destination=f))},extend:{at:function(u,f){return f<1?this.value:this.destination},valueOf:function(){return this.value}}}),t.extend(t.FX,{attr:function(u,f,w){if(Ue(u)==="object")for(var y in u)this.attr(y,u[y]);else this.add(u,f,"attrs");return this},plot:function(u,f,w,y){return arguments.length==4?this.plot([u,f,w,y]):this.add("plot",new(this.target()).morphArray(u))}}),t.Box=t.invent({create:function(u,f,w,y){if(!(Ue(u)!=="object"||u instanceof t.Element))return t.Box.call(this,u.left!=null?u.left:u.x,u.top!=null?u.top:u.y,u.width,u.height);var _;arguments.length==4&&(this.x=u,this.y=f,this.width=w,this.height=y),(_=this).x==null&&(_.x=0,_.y=0,_.width=0,_.height=0),_.w=_.width,_.h=_.height,_.x2=_.x+_.width,_.y2=_.y+_.height,_.cx=_.x+_.width/2,_.cy=_.y+_.height/2}}),t.BBox=t.invent({create:function(u){if(t.Box.apply(this,[].slice.call(arguments)),u instanceof t.Element){var f;try{if(!e.documentElement.contains){for(var w=u.node;w.parentNode;)w=w.parentNode;if(w!=e)throw new Error("Element not in the dom")}f=u.node.getBBox()}catch{if(u instanceof t.Shape){t.parser.draw||t.prepare();var y=u.clone(t.parser.draw.instance).show();y&&y.node&&typeof y.node.getBBox=="function"&&(f=y.node.getBBox()),y&&typeof y.remove=="function"&&y.remove()}else f={x:u.node.clientLeft,y:u.node.clientTop,width:u.node.clientWidth,height:u.node.clientHeight}}t.Box.call(this,f)}},inherit:t.Box,parent:t.Element,construct:{bbox:function(){return new t.BBox(this)}}}),t.BBox.prototype.constructor=t.BBox,t.Matrix=t.invent({create:function(u){var f=p([1,0,0,1,0,0]);u=u===null?f:u instanceof t.Element?u.matrixify():typeof u=="string"?p(u.split(t.regex.delimiter).map(parseFloat)):arguments.length==6?p([].slice.call(arguments)):Array.isArray(u)?p(u):u&&Ue(u)==="object"?u:f;for(var w=v.length-1;w>=0;--w)this[v[w]]=u[v[w]]!=null?u[v[w]]:f[v[w]]},extend:{extract:function(){var u=m(this,0,1);m(this,1,0);var f=180/Math.PI*Math.atan2(u.y,u.x)-90;return{x:this.e,y:this.f,transformedX:(this.e*Math.cos(f*Math.PI/180)+this.f*Math.sin(f*Math.PI/180))/Math.sqrt(this.a*this.a+this.b*this.b),transformedY:(this.f*Math.cos(f*Math.PI/180)+this.e*Math.sin(-f*Math.PI/180))/Math.sqrt(this.c*this.c+this.d*this.d),rotation:f,a:this.a,b:this.b,c:this.c,d:this.d,e:this.e,f:this.f,matrix:new t.Matrix(this)}},clone:function(){return new t.Matrix(this)},morph:function(u){return this.destination=new t.Matrix(u),this},multiply:function(u){return new t.Matrix(this.native().multiply(function(f){return f instanceof t.Matrix||(f=new t.Matrix(f)),f}(u).native()))},inverse:function(){return new t.Matrix(this.native().inverse())},translate:function(u,f){return new t.Matrix(this.native().translate(u||0,f||0))},native:function(){for(var u=t.parser.native.createSVGMatrix(),f=v.length-1;f>=0;f--)u[v[f]]=this[v[f]];return u},toString:function(){return"matrix("+k(this.a)+","+k(this.b)+","+k(this.c)+","+k(this.d)+","+k(this.e)+","+k(this.f)+")"}},parent:t.Element,construct:{ctm:function(){return new t.Matrix(this.node.getCTM())},screenCTM:function(){if(this instanceof t.Nested){var u=this.rect(1,1),f=u.node.getScreenCTM();return u.remove(),new t.Matrix(f)}return new t.Matrix(this.node.getScreenCTM())}}}),t.Point=t.invent({create:function(u,f){var w;w=Array.isArray(u)?{x:u[0],y:u[1]}:Ue(u)==="object"?{x:u.x,y:u.y}:u!=null?{x:u,y:f??u}:{x:0,y:0},this.x=w.x,this.y=w.y},extend:{clone:function(){return new t.Point(this)},morph:function(u,f){return this.destination=new t.Point(u,f),this}}}),t.extend(t.Element,{point:function(u,f){return new t.Point(u,f).transform(this.screenCTM().inverse())}}),t.extend(t.Element,{attr:function(u,f,w){if(u==null){for(u={},w=(f=this.node.attributes).length-1;w>=0;w--)u[f[w].nodeName]=t.regex.isNumber.test(f[w].nodeValue)?parseFloat(f[w].nodeValue):f[w].nodeValue;return u}if(Ue(u)==="object")for(var y in u)this.attr(y,u[y]);else if(f===null)this.node.removeAttribute(u);else{if(f==null)return(f=this.node.getAttribute(u))==null?t.defaults.attrs[u]:t.regex.isNumber.test(f)?parseFloat(f):f;u=="stroke-width"?this.attr("stroke",parseFloat(f)>0?this._stroke:null):u=="stroke"&&(this._stroke=f),u!="fill"&&u!="stroke"||(t.regex.isImage.test(f)&&(f=this.doc().defs().image(f,0,0)),f instanceof t.Image&&(f=this.doc().defs().pattern(0,0,function(){this.add(f)}))),typeof f=="number"?f=new t.Number(f):t.Color.isColor(f)?f=new t.Color(f):Array.isArray(f)&&(f=new t.Array(f)),u=="leading"?this.leading&&this.leading(f):typeof w=="string"?this.node.setAttributeNS(w,u,f.toString()):this.node.setAttribute(u,f.toString()),!this.rebuild||u!="font-size"&&u!="x"||this.rebuild(u,f)}return this}}),t.extend(t.Element,{transform:function(u,f){var w;return Ue(u)!=="object"?(w=new t.Matrix(this).extract(),typeof u=="string"?w[u]:w):(w=new t.Matrix(this),f=!!f||!!u.relative,u.a!=null&&(w=f?w.multiply(new t.Matrix(u)):new t.Matrix(u)),this.attr("transform",w))}}),t.extend(t.Element,{untransform:function(){return this.attr("transform",null)},matrixify:function(){return(this.attr("transform")||"").split(t.regex.transforms).slice(0,-1).map(function(u){var f=u.trim().split("(");return[f[0],f[1].split(t.regex.delimiter).map(function(w){return parseFloat(w)})]}).reduce(function(u,f){return f[0]=="matrix"?u.multiply(p(f[1])):u[f[0]].apply(u,f[1])},new t.Matrix)},toParent:function(u){if(this==u)return this;var f=this.screenCTM(),w=u.screenCTM().inverse();return this.addTo(u).untransform().transform(w.multiply(f)),this},toDoc:function(){return this.toParent(this.doc())}}),t.Transformation=t.invent({create:function(u,f){if(arguments.length>1&&typeof f!="boolean")return this.constructor.call(this,[].slice.call(arguments));if(Array.isArray(u))for(var w=0,y=this.arguments.length;w<y;++w)this[this.arguments[w]]=u[w];else if(u&&Ue(u)==="object")for(w=0,y=this.arguments.length;w<y;++w)this[this.arguments[w]]=u[this.arguments[w]];this.inversed=!1,f===!0&&(this.inversed=!0)}}),t.Translate=t.invent({parent:t.Matrix,inherit:t.Transformation,create:function(u,f){this.constructor.apply(this,[].slice.call(arguments))},extend:{arguments:["transformedX","transformedY"],method:"translate"}}),t.extend(t.Element,{style:function(u,f){if(arguments.length==0)return this.node.style.cssText||"";if(arguments.length<2)if(Ue(u)==="object")for(var w in u)this.style(w,u[w]);else{if(!t.regex.isCss.test(u))return this.node.style[c(u)];for(u=u.split(/\s*;\s*/).filter(function(y){return!!y}).map(function(y){return y.split(/\s*:\s*/)});f=u.pop();)this.style(f[0],f[1])}else this.node.style[c(u)]=f===null||t.regex.isBlank.test(f)?"":f;return this}}),t.Parent=t.invent({create:function(u){this.constructor.call(this,u)},inherit:t.Element,extend:{children:function(){return t.utils.map(t.utils.filterSVGElements(this.node.childNodes),function(u){return t.adopt(u)})},add:function(u,f){return f==null?this.node.appendChild(u.node):u.node!=this.node.childNodes[f]&&this.node.insertBefore(u.node,this.node.childNodes[f]),this},put:function(u,f){return this.add(u,f),u},has:function(u){return this.index(u)>=0},index:function(u){return[].slice.call(this.node.childNodes).indexOf(u.node)},get:function(u){return t.adopt(this.node.childNodes[u])},first:function(){return this.get(0)},last:function(){return this.get(this.node.childNodes.length-1)},each:function(u,f){for(var w=this.children(),y=0,_=w.length;y<_;y++)w[y]instanceof t.Element&&u.apply(w[y],[y,w]),f&&w[y]instanceof t.Container&&w[y].each(u,f);return this},removeElement:function(u){return this.node.removeChild(u.node),this},clear:function(){for(;this.node.hasChildNodes();)this.node.removeChild(this.node.lastChild);return delete this._defs,this},defs:function(){return this.doc().defs()}}}),t.extend(t.Parent,{ungroup:function(u,f){return f===0||this instanceof t.Defs||this.node==t.parser.draw||(u=u||(this instanceof t.Doc?this:this.parent(t.Parent)),f=f||1/0,this.each(function(){return this instanceof t.Defs?this:this instanceof t.Parent?this.ungroup(u,f-1):this.toParent(u)}),this.node.firstChild||this.remove()),this},flatten:function(u,f){return this.ungroup(u,f)}}),t.Container=t.invent({create:function(u){this.constructor.call(this,u)},inherit:t.Parent}),t.ViewBox=t.invent({parent:t.Container,construct:{}}),["click","dblclick","mousedown","mouseup","mouseover","mouseout","mousemove","touchstart","touchmove","touchleave","touchend","touchcancel"].forEach(function(u){t.Element.prototype[u]=function(f){return t.on(this.node,u,f),this}}),t.listeners=[],t.handlerMap=[],t.listenerId=0,t.on=function(u,f,w,y,_){var C=w.bind(y||u.instance||u),A=(t.handlerMap.indexOf(u)+1||t.handlerMap.push(u))-1,S=f.split(".")[0],P=f.split(".")[1]||"*";t.listeners[A]=t.listeners[A]||{},t.listeners[A][S]=t.listeners[A][S]||{},t.listeners[A][S][P]=t.listeners[A][S][P]||{},w._svgjsListenerId||(w._svgjsListenerId=++t.listenerId),t.listeners[A][S][P][w._svgjsListenerId]=C,u.addEventListener(S,C,_||{passive:!1})},t.off=function(u,f,w){var y=t.handlerMap.indexOf(u),_=f&&f.split(".")[0],C=f&&f.split(".")[1],A="";if(y!=-1)if(w){if(typeof w=="function"&&(w=w._svgjsListenerId),!w)return;t.listeners[y][_]&&t.listeners[y][_][C||"*"]&&(u.removeEventListener(_,t.listeners[y][_][C||"*"][w],!1),delete t.listeners[y][_][C||"*"][w])}else if(C&&_){if(t.listeners[y][_]&&t.listeners[y][_][C]){for(var S in t.listeners[y][_][C])t.off(u,[_,C].join("."),S);delete t.listeners[y][_][C]}}else if(C)for(var P in t.listeners[y])for(var A in t.listeners[y][P])C===A&&t.off(u,[P,C].join("."));else if(_){if(t.listeners[y][_]){for(var A in t.listeners[y][_])t.off(u,[_,A].join("."));delete t.listeners[y][_]}}else{for(var P in t.listeners[y])t.off(u,P);delete t.listeners[y],delete t.handlerMap[y]}},t.extend(t.Element,{on:function(u,f,w,y){return t.on(this.node,u,f,w,y),this},off:function(u,f){return t.off(this.node,u,f),this},fire:function(u,f){return u instanceof s.Event?this.node.dispatchEvent(u):this.node.dispatchEvent(u=new t.CustomEvent(u,{detail:f,cancelable:!0})),this._event=u,this},event:function(){return this._event}}),t.Defs=t.invent({create:"defs",inherit:t.Container}),t.G=t.invent({create:"g",inherit:t.Container,extend:{x:function(u){return u==null?this.transform("x"):this.transform({x:u-this.x()},!0)}},construct:{group:function(){return this.put(new t.G)}}}),t.Doc=t.invent({create:function(u){u&&((u=typeof u=="string"?e.getElementById(u):u).nodeName=="svg"?this.constructor.call(this,u):(this.constructor.call(this,t.create("svg")),u.appendChild(this.node),this.size("100%","100%")),this.namespace().defs())},inherit:t.Container,extend:{namespace:function(){return this.attr({xmlns:t.ns,version:"1.1"}).attr("xmlns:xlink",t.xlink,t.xmlns).attr("xmlns:svgjs",t.svgjs,t.xmlns)},defs:function(){var u;return this._defs||((u=this.node.getElementsByTagName("defs")[0])?this._defs=t.adopt(u):this._defs=new t.Defs,this.node.appendChild(this._defs.node)),this._defs},parent:function(){return this.node.parentNode&&this.node.parentNode.nodeName!="#document"?this.node.parentNode:null},remove:function(){return this.parent()&&this.parent().removeChild(this.node),this},clear:function(){for(;this.node.hasChildNodes();)this.node.removeChild(this.node.lastChild);return delete this._defs,t.parser.draw&&!t.parser.draw.parentNode&&this.node.appendChild(t.parser.draw),this},clone:function(u){this.writeDataToDom();var f=this.node,w=b(f.cloneNode(!0));return u?(u.node||u).appendChild(w.node):f.parentNode.insertBefore(w.node,f.nextSibling),w}}}),t.extend(t.Element,{}),t.Gradient=t.invent({create:function(u){this.constructor.call(this,t.create(u+"Gradient")),this.type=u},inherit:t.Container,extend:{at:function(u,f,w){return this.put(new t.Stop).update(u,f,w)},update:function(u){return this.clear(),typeof u=="function"&&u.call(this,this),this},fill:function(){return"url(#"+this.id()+")"},toString:function(){return this.fill()},attr:function(u,f,w){return u=="transform"&&(u="gradientTransform"),t.Container.prototype.attr.call(this,u,f,w)}},construct:{gradient:function(u,f){return this.defs().gradient(u,f)}}}),t.extend(t.Gradient,t.FX,{from:function(u,f){return(this._target||this).type=="radial"?this.attr({fx:new t.Number(u),fy:new t.Number(f)}):this.attr({x1:new t.Number(u),y1:new t.Number(f)})},to:function(u,f){return(this._target||this).type=="radial"?this.attr({cx:new t.Number(u),cy:new t.Number(f)}):this.attr({x2:new t.Number(u),y2:new t.Number(f)})}}),t.extend(t.Defs,{gradient:function(u,f){return this.put(new t.Gradient(u)).update(f)}}),t.Stop=t.invent({create:"stop",inherit:t.Element,extend:{update:function(u){return(typeof u=="number"||u instanceof t.Number)&&(u={offset:arguments[0],color:arguments[1],opacity:arguments[2]}),u.opacity!=null&&this.attr("stop-opacity",u.opacity),u.color!=null&&this.attr("stop-color",u.color),u.offset!=null&&this.attr("offset",new t.Number(u.offset)),this}}}),t.Pattern=t.invent({create:"pattern",inherit:t.Container,extend:{fill:function(){return"url(#"+this.id()+")"},update:function(u){return this.clear(),typeof u=="function"&&u.call(this,this),this},toString:function(){return this.fill()},attr:function(u,f,w){return u=="transform"&&(u="patternTransform"),t.Container.prototype.attr.call(this,u,f,w)}},construct:{pattern:function(u,f,w){return this.defs().pattern(u,f,w)}}}),t.extend(t.Defs,{pattern:function(u,f,w){return this.put(new t.Pattern).update(w).attr({x:0,y:0,width:u,height:f,patternUnits:"userSpaceOnUse"})}}),t.Shape=t.invent({create:function(u){this.constructor.call(this,u)},inherit:t.Element}),t.Symbol=t.invent({create:"symbol",inherit:t.Container,construct:{symbol:function(){return this.put(new t.Symbol)}}}),t.Use=t.invent({create:"use",inherit:t.Shape,extend:{element:function(u,f){return this.attr("href",(f||"")+"#"+u,t.xlink)}},construct:{use:function(u,f){return this.put(new t.Use).element(u,f)}}}),t.Rect=t.invent({create:"rect",inherit:t.Shape,construct:{rect:function(u,f){return this.put(new t.Rect).size(u,f)}}}),t.Circle=t.invent({create:"circle",inherit:t.Shape,construct:{circle:function(u){return this.put(new t.Circle).rx(new t.Number(u).divide(2)).move(0,0)}}}),t.extend(t.Circle,t.FX,{rx:function(u){return this.attr("r",u)},ry:function(u){return this.rx(u)}}),t.Ellipse=t.invent({create:"ellipse",inherit:t.Shape,construct:{ellipse:function(u,f){return this.put(new t.Ellipse).size(u,f).move(0,0)}}}),t.extend(t.Ellipse,t.Rect,t.FX,{rx:function(u){return this.attr("rx",u)},ry:function(u){return this.attr("ry",u)}}),t.extend(t.Circle,t.Ellipse,{x:function(u){return u==null?this.cx()-this.rx():this.cx(u+this.rx())},y:function(u){return u==null?this.cy()-this.ry():this.cy(u+this.ry())},cx:function(u){return u==null?this.attr("cx"):this.attr("cx",u)},cy:function(u){return u==null?this.attr("cy"):this.attr("cy",u)},width:function(u){return u==null?2*this.rx():this.rx(new t.Number(u).divide(2))},height:function(u){return u==null?2*this.ry():this.ry(new t.Number(u).divide(2))},size:function(u,f){var w=g(this,u,f);return this.rx(new t.Number(w.width).divide(2)).ry(new t.Number(w.height).divide(2))}}),t.Line=t.invent({create:"line",inherit:t.Shape,extend:{array:function(){return new t.PointArray([[this.attr("x1"),this.attr("y1")],[this.attr("x2"),this.attr("y2")]])},plot:function(u,f,w,y){return u==null?this.array():(u=f!==void 0?{x1:u,y1:f,x2:w,y2:y}:new t.PointArray(u).toLine(),this.attr(u))},move:function(u,f){return this.attr(this.array().move(u,f).toLine())},size:function(u,f){var w=g(this,u,f);return this.attr(this.array().size(w.width,w.height).toLine())}},construct:{line:function(u,f,w,y){return t.Line.prototype.plot.apply(this.put(new t.Line),u!=null?[u,f,w,y]:[0,0,0,0])}}}),t.Polyline=t.invent({create:"polyline",inherit:t.Shape,construct:{polyline:function(u){return this.put(new t.Polyline).plot(u||new t.PointArray)}}}),t.Polygon=t.invent({create:"polygon",inherit:t.Shape,construct:{polygon:function(u){return this.put(new t.Polygon).plot(u||new t.PointArray)}}}),t.extend(t.Polyline,t.Polygon,{array:function(){return this._array||(this._array=new t.PointArray(this.attr("points")))},plot:function(u){return u==null?this.array():this.clear().attr("points",typeof u=="string"?u:this._array=new t.PointArray(u))},clear:function(){return delete this._array,this},move:function(u,f){return this.attr("points",this.array().move(u,f))},size:function(u,f){var w=g(this,u,f);return this.attr("points",this.array().size(w.width,w.height))}}),t.extend(t.Line,t.Polyline,t.Polygon,{morphArray:t.PointArray,x:function(u){return u==null?this.bbox().x:this.move(u,this.bbox().y)},y:function(u){return u==null?this.bbox().y:this.move(this.bbox().x,u)},width:function(u){var f=this.bbox();return u==null?f.width:this.size(u,f.height)},height:function(u){var f=this.bbox();return u==null?f.height:this.size(f.width,u)}}),t.Path=t.invent({create:"path",inherit:t.Shape,extend:{morphArray:t.PathArray,array:function(){return this._array||(this._array=new t.PathArray(this.attr("d")))},plot:function(u){return u==null?this.array():this.clear().attr("d",typeof u=="string"?u:this._array=new t.PathArray(u))},clear:function(){return delete this._array,this}},construct:{path:function(u){return this.put(new t.Path).plot(u||new t.PathArray)}}}),t.Image=t.invent({create:"image",inherit:t.Shape,extend:{load:function(u){if(!u)return this;var f=this,w=new s.Image;return t.on(w,"load",function(){t.off(w);var y=f.parent(t.Pattern);y!==null&&(f.width()==0&&f.height()==0&&f.size(w.width,w.height),y&&y.width()==0&&y.height()==0&&y.size(f.width(),f.height()),typeof f._loaded=="function"&&f._loaded.call(f,{width:w.width,height:w.height,ratio:w.width/w.height,url:u}))}),t.on(w,"error",function(y){t.off(w),typeof f._error=="function"&&f._error.call(f,y)}),this.attr("href",w.src=this.src=u,t.xlink)},loaded:function(u){return this._loaded=u,this},error:function(u){return this._error=u,this}},construct:{image:function(u,f,w){return this.put(new t.Image).load(u).size(f||0,w||f||0)}}}),t.Text=t.invent({create:function(){this.constructor.call(this,t.create("text")),this.dom.leading=new t.Number(1.3),this._rebuild=!0,this._build=!1,this.attr("font-family",t.defaults.attrs["font-family"])},inherit:t.Shape,extend:{x:function(u){return u==null?this.attr("x"):this.attr("x",u)},text:function(u){if(u===void 0){u="";for(var f=this.node.childNodes,w=0,y=f.length;w<y;++w)w!=0&&f[w].nodeType!=3&&t.adopt(f[w]).dom.newLined==1&&(u+=`
`),u+=f[w].textContent;return u}if(this.clear().build(!0),typeof u=="function")u.call(this,this);else{w=0;for(var _=(u=u.split(`
`)).length;w<_;w++)this.tspan(u[w]).newLine()}return this.build(!1).rebuild()},size:function(u){return this.attr("font-size",u).rebuild()},leading:function(u){return u==null?this.dom.leading:(this.dom.leading=new t.Number(u),this.rebuild())},lines:function(){var u=(this.textPath&&this.textPath()||this).node,f=t.utils.map(t.utils.filterSVGElements(u.childNodes),function(w){return t.adopt(w)});return new t.Set(f)},rebuild:function(u){if(typeof u=="boolean"&&(this._rebuild=u),this._rebuild){var f=this,w=0,y=this.dom.leading*new t.Number(this.attr("font-size"));this.lines().each(function(){this.dom.newLined&&(f.textPath()||this.attr("x",f.attr("x")),this.text()==`
`?w+=y:(this.attr("dy",y+w),w=0))}),this.fire("rebuild")}return this},build:function(u){return this._build=!!u,this},setData:function(u){return this.dom=u,this.dom.leading=new t.Number(u.leading||1.3),this}},construct:{text:function(u){return this.put(new t.Text).text(u)},plain:function(u){return this.put(new t.Text).plain(u)}}}),t.Tspan=t.invent({create:"tspan",inherit:t.Shape,extend:{text:function(u){return u==null?this.node.textContent+(this.dom.newLined?`
`:""):(typeof u=="function"?u.call(this,this):this.plain(u),this)},dx:function(u){return this.attr("dx",u)},dy:function(u){return this.attr("dy",u)},newLine:function(){var u=this.parent(t.Text);return this.dom.newLined=!0,this.dy(u.dom.leading*u.attr("font-size")).attr("x",u.x())}}}),t.extend(t.Text,t.Tspan,{plain:function(u){return this._build===!1&&this.clear(),this.node.appendChild(e.createTextNode(u)),this},tspan:function(u){var f=(this.textPath&&this.textPath()||this).node,w=new t.Tspan;return this._build===!1&&this.clear(),f.appendChild(w.node),w.text(u)},clear:function(){for(var u=(this.textPath&&this.textPath()||this).node;u.hasChildNodes();)u.removeChild(u.lastChild);return this},length:function(){return this.node.getComputedTextLength()}}),t.TextPath=t.invent({create:"textPath",inherit:t.Parent,parent:t.Text,construct:{morphArray:t.PathArray,array:function(){var u=this.track();return u?u.array():null},plot:function(u){var f=this.track(),w=null;return f&&(w=f.plot(u)),u==null?w:this},track:function(){var u=this.textPath();if(u)return u.reference("href")},textPath:function(){if(this.node.firstChild&&this.node.firstChild.nodeName=="textPath")return t.adopt(this.node.firstChild)}}}),t.Nested=t.invent({create:function(){this.constructor.call(this,t.create("svg")),this.style("overflow","visible")},inherit:t.Container,construct:{nested:function(){return this.put(new t.Nested)}}});var a={stroke:["color","width","opacity","linecap","linejoin","miterlimit","dasharray","dashoffset"],fill:["color","opacity","rule"],prefix:function(u,f){return f=="color"?u:u+"-"+f}};function l(u,f,w,y){return w+y.replace(t.regex.dots," .")}function c(u){return u.toLowerCase().replace(/-(.)/g,function(f,w){return w.toUpperCase()})}function d(u){return u.charAt(0).toUpperCase()+u.slice(1)}function h(u){var f=u.toString(16);return f.length==1?"0"+f:f}function g(u,f,w){if(f==null||w==null){var y=u.bbox();f==null?f=y.width/y.height*w:w==null&&(w=y.height/y.width*f)}return{width:f,height:w}}function m(u,f,w){return{x:f*u.a+w*u.c+0,y:f*u.b+w*u.d+0}}function p(u){return{a:u[0],b:u[1],c:u[2],d:u[3],e:u[4],f:u[5]}}function b(u){for(var f=u.childNodes.length-1;f>=0;f--)u.childNodes[f]instanceof s.SVGElement&&b(u.childNodes[f]);return t.adopt(u).id(t.eid(u.nodeName))}function k(u){return Math.abs(u)>1e-37?u:0}["fill","stroke"].forEach(function(u){var f={};f[u]=function(w){if(w===void 0)return this;if(typeof w=="string"||t.Color.isRgb(w)||w&&typeof w.fill=="function")this.attr(u,w);else for(var y=a[u].length-1;y>=0;y--)w[a[u][y]]!=null&&this.attr(a.prefix(u,a[u][y]),w[a[u][y]]);return this},t.extend(t.Element,t.FX,f)}),t.extend(t.Element,t.FX,{translate:function(u,f){return this.transform({x:u,y:f})},matrix:function(u){return this.attr("transform",new t.Matrix(arguments.length==6?[].slice.call(arguments):u))},opacity:function(u){return this.attr("opacity",u)},dx:function(u){return this.x(new t.Number(u).plus(this instanceof t.FX?0:this.x()),!0)},dy:function(u){return this.y(new t.Number(u).plus(this instanceof t.FX?0:this.y()),!0)}}),t.extend(t.Path,{length:function(){return this.node.getTotalLength()},pointAt:function(u){return this.node.getPointAtLength(u)}}),t.Set=t.invent({create:function(u){Array.isArray(u)?this.members=u:this.clear()},extend:{add:function(){for(var u=[].slice.call(arguments),f=0,w=u.length;f<w;f++)this.members.push(u[f]);return this},remove:function(u){var f=this.index(u);return f>-1&&this.members.splice(f,1),this},each:function(u){for(var f=0,w=this.members.length;f<w;f++)u.apply(this.members[f],[f,this.members]);return this},clear:function(){return this.members=[],this},length:function(){return this.members.length},has:function(u){return this.index(u)>=0},index:function(u){return this.members.indexOf(u)},get:function(u){return this.members[u]},first:function(){return this.get(0)},last:function(){return this.get(this.members.length-1)},valueOf:function(){return this.members}},construct:{set:function(u){return new t.Set(u)}}}),t.FX.Set=t.invent({create:function(u){this.set=u}}),t.Set.inherit=function(){var u=[];for(var f in t.Shape.prototype)typeof t.Shape.prototype[f]=="function"&&typeof t.Set.prototype[f]!="function"&&u.push(f);for(var f in u.forEach(function(y){t.Set.prototype[y]=function(){for(var _=0,C=this.members.length;_<C;_++)this.members[_]&&typeof this.members[_][y]=="function"&&this.members[_][y].apply(this.members[_],arguments);return y=="animate"?this.fx||(this.fx=new t.FX.Set(this)):this}}),u=[],t.FX.prototype)typeof t.FX.prototype[f]=="function"&&typeof t.FX.Set.prototype[f]!="function"&&u.push(f);u.forEach(function(w){t.FX.Set.prototype[w]=function(){for(var y=0,_=this.set.members.length;y<_;y++)this.set.members[y].fx[w].apply(this.set.members[y].fx,arguments);return this}})},t.extend(t.Element,{}),t.extend(t.Element,{remember:function(u,f){if(Ue(arguments[0])==="object")for(var w in u)this.remember(w,u[w]);else{if(arguments.length==1)return this.memory()[u];this.memory()[u]=f}return this},forget:function(){if(arguments.length==0)this._memory={};else for(var u=arguments.length-1;u>=0;u--)delete this.memory()[arguments[u]];return this},memory:function(){return this._memory||(this._memory={})}}),t.get=function(u){var f=e.getElementById(function(w){var y=(w||"").toString().match(t.regex.reference);if(y)return y[1]}(u)||u);return t.adopt(f)},t.select=function(u,f){return new t.Set(t.utils.map((f||e).querySelectorAll(u),function(w){return t.adopt(w)}))},t.extend(t.Parent,{select:function(u){return t.select(u,this.node)}});var v="abcdef".split("");if(typeof s.CustomEvent!="function"){var x=function(u,f){f=f||{bubbles:!1,cancelable:!1,detail:void 0};var w=e.createEvent("CustomEvent");return w.initCustomEvent(u,f.bubbles,f.cancelable,f.detail),w};x.prototype=s.Event.prototype,t.CustomEvent=x}else t.CustomEvent=s.CustomEvent;return t},typeof define=="function"&&define.amd?define(function(){return Zn(xi,xi.document)}):(typeof bl>"u"?"undefined":Ue(bl))==="object"&&typeof _r<"u"?_r.exports=xi.document?Zn(xi,xi.document):function(s){return Zn(s,s.document)}:xi.SVG=Zn(xi,xi.document),(function(){SVG.Filter=SVG.invent({create:"filter",inherit:SVG.Parent,extend:{source:"SourceGraphic",sourceAlpha:"SourceAlpha",background:"BackgroundImage",backgroundAlpha:"BackgroundAlpha",fill:"FillPaint",stroke:"StrokePaint",autoSetIn:!0,put:function(r,a){return this.add(r,a),!r.attr("in")&&this.autoSetIn&&r.attr("in",this.source),r.attr("result")||r.attr("result",r),r},blend:function(r,a,l){return this.put(new SVG.BlendEffect(r,a,l))},colorMatrix:function(r,a){return this.put(new SVG.ColorMatrixEffect(r,a))},convolveMatrix:function(r){return this.put(new SVG.ConvolveMatrixEffect(r))},componentTransfer:function(r){return this.put(new SVG.ComponentTransferEffect(r))},composite:function(r,a,l){return this.put(new SVG.CompositeEffect(r,a,l))},flood:function(r,a){return this.put(new SVG.FloodEffect(r,a))},offset:function(r,a){return this.put(new SVG.OffsetEffect(r,a))},image:function(r){return this.put(new SVG.ImageEffect(r))},merge:function(){var r=[void 0];for(var a in arguments)r.push(arguments[a]);return this.put(new(SVG.MergeEffect.bind.apply(SVG.MergeEffect,r)))},gaussianBlur:function(r,a){return this.put(new SVG.GaussianBlurEffect(r,a))},morphology:function(r,a){return this.put(new SVG.MorphologyEffect(r,a))},diffuseLighting:function(r,a,l){return this.put(new SVG.DiffuseLightingEffect(r,a,l))},displacementMap:function(r,a,l,c,d){return this.put(new SVG.DisplacementMapEffect(r,a,l,c,d))},specularLighting:function(r,a,l,c){return this.put(new SVG.SpecularLightingEffect(r,a,l,c))},tile:function(){return this.put(new SVG.TileEffect)},turbulence:function(r,a,l,c,d){return this.put(new SVG.TurbulenceEffect(r,a,l,c,d))},toString:function(){return"url(#"+this.attr("id")+")"}}}),SVG.extend(SVG.Defs,{filter:function(r){var a=this.put(new SVG.Filter);return typeof r=="function"&&r.call(a,a),a}}),SVG.extend(SVG.Container,{filter:function(r){return this.defs().filter(r)}}),SVG.extend(SVG.Element,SVG.G,SVG.Nested,{filter:function(r){return this.filterer=r instanceof SVG.Element?r:this.doc().filter(r),this.doc()&&this.filterer.doc()!==this.doc()&&this.doc().defs().add(this.filterer),this.attr("filter",this.filterer),this.filterer},unfilter:function(r){return this.filterer&&r===!0&&this.filterer.remove(),delete this.filterer,this.attr("filter",null)}}),SVG.Effect=SVG.invent({create:function(){this.constructor.call(this)},inherit:SVG.Element,extend:{in:function(r){return r==null?this.parent()&&this.parent().select('[result="'+this.attr("in")+'"]').get(0)||this.attr("in"):this.attr("in",r)},result:function(r){return r==null?this.attr("result"):this.attr("result",r)},toString:function(){return this.result()}}}),SVG.ParentEffect=SVG.invent({create:function(){this.constructor.call(this)},inherit:SVG.Parent,extend:{in:function(r){return r==null?this.parent()&&this.parent().select('[result="'+this.attr("in")+'"]').get(0)||this.attr("in"):this.attr("in",r)},result:function(r){return r==null?this.attr("result"):this.attr("result",r)},toString:function(){return this.result()}}});var s={blend:function(r,a){return this.parent()&&this.parent().blend(this,r,a)},colorMatrix:function(r,a){return this.parent()&&this.parent().colorMatrix(r,a).in(this)},convolveMatrix:function(r){return this.parent()&&this.parent().convolveMatrix(r).in(this)},componentTransfer:function(r){return this.parent()&&this.parent().componentTransfer(r).in(this)},composite:function(r,a){return this.parent()&&this.parent().composite(this,r,a)},flood:function(r,a){return this.parent()&&this.parent().flood(r,a)},offset:function(r,a){return this.parent()&&this.parent().offset(r,a).in(this)},image:function(r){return this.parent()&&this.parent().image(r)},merge:function(){return this.parent()&&this.parent().merge.apply(this.parent(),[this].concat(arguments))},gaussianBlur:function(r,a){return this.parent()&&this.parent().gaussianBlur(r,a).in(this)},morphology:function(r,a){return this.parent()&&this.parent().morphology(r,a).in(this)},diffuseLighting:function(r,a,l){return this.parent()&&this.parent().diffuseLighting(r,a,l).in(this)},displacementMap:function(r,a,l,c){return this.parent()&&this.parent().displacementMap(this,r,a,l,c)},specularLighting:function(r,a,l,c){return this.parent()&&this.parent().specularLighting(r,a,l,c).in(this)},tile:function(){return this.parent()&&this.parent().tile().in(this)},turbulence:function(r,a,l,c,d){return this.parent()&&this.parent().turbulence(r,a,l,c,d).in(this)}};SVG.extend(SVG.Effect,s),SVG.extend(SVG.ParentEffect,s),SVG.ChildEffect=SVG.invent({create:function(){this.constructor.call(this)},inherit:SVG.Element,extend:{in:function(r){this.attr("in",r)}}});var e={blend:function(r,a,l){this.attr({in:r,in2:a,mode:l||"normal"})},colorMatrix:function(r,a){r=="matrix"&&(a=o(a)),this.attr({type:r,values:a===void 0?null:a})},convolveMatrix:function(r){r=o(r),this.attr({order:Math.sqrt(r.split(" ").length),kernelMatrix:r})},composite:function(r,a,l){this.attr({in:r,in2:a,operator:l})},flood:function(r,a){this.attr("flood-color",r),a!=null&&this.attr("flood-opacity",a)},offset:function(r,a){this.attr({dx:r,dy:a})},image:function(r){this.attr("href",r,SVG.xlink)},displacementMap:function(r,a,l,c,d){this.attr({in:r,in2:a,scale:l,xChannelSelector:c,yChannelSelector:d})},gaussianBlur:function(r,a){r!=null||a!=null?this.attr("stdDeviation",function(l){if(!Array.isArray(l))return l;for(var c=0,d=l.length,h=[];c<d;c++)h.push(l[c]);return h.join(" ")}(Array.prototype.slice.call(arguments))):this.attr("stdDeviation","0 0")},morphology:function(r,a){this.attr({operator:r,radius:a})},tile:function(){},turbulence:function(r,a,l,c,d){this.attr({numOctaves:a,seed:l,stitchTiles:c,baseFrequency:r,type:d})}},t={merge:function(){var r;if(arguments[0]instanceof SVG.Set){var a=this;arguments[0].each(function(c){this instanceof SVG.MergeNode?a.put(this):(this instanceof SVG.Effect||this instanceof SVG.ParentEffect)&&a.put(new SVG.MergeNode(this))})}else{r=Array.isArray(arguments[0])?arguments[0]:arguments;for(var l=0;l<r.length;l++)r[l]instanceof SVG.MergeNode?this.put(r[l]):this.put(new SVG.MergeNode(r[l]))}},componentTransfer:function(r){if(this.rgb=new SVG.Set,["r","g","b","a"].forEach((function(l){this[l]=new SVG["Func"+l.toUpperCase()]("identity"),this.rgb.add(this[l]),this.node.appendChild(this[l].node)}).bind(this)),r)for(var a in r.rgb&&(["r","g","b"].forEach((function(l){this[l].attr(r.rgb)}).bind(this)),delete r.rgb),r)this[a].attr(r[a])},diffuseLighting:function(r,a,l){this.attr({surfaceScale:r,diffuseConstant:a,kernelUnitLength:l})},specularLighting:function(r,a,l,c){this.attr({surfaceScale:r,diffuseConstant:a,specularExponent:l,kernelUnitLength:c})}},i={distantLight:function(r,a){this.attr({azimuth:r,elevation:a})},pointLight:function(r,a,l){this.attr({x:r,y:a,z:l})},spotLight:function(r,a,l,c,d,h){this.attr({x:r,y:a,z:l,pointsAtX:c,pointsAtY:d,pointsAtZ:h})},mergeNode:function(r){this.attr("in",r)}};function o(r){return Array.isArray(r)&&(r=new SVG.Array(r)),r.toString().replace(/^\s+/,"").replace(/\s+$/,"").replace(/\s+/g," ")}function n(){var r=function(){};for(var a in typeof arguments[arguments.length-1]=="function"&&(r=arguments[arguments.length-1],Array.prototype.splice.call(arguments,arguments.length-1,1)),arguments)for(var l in arguments[a])r(arguments[a][l],l,arguments[a])}["r","g","b","a"].forEach(function(r){i["Func"+r.toUpperCase()]=function(a){switch(this.attr("type",a),a){case"table":this.attr("tableValues",arguments[1]);break;case"linear":this.attr("slope",arguments[1]),this.attr("intercept",arguments[2]);break;case"gamma":this.attr("amplitude",arguments[1]),this.attr("exponent",arguments[2]),this.attr("offset",arguments[2])}}}),n(e,function(r,a){var l=a.charAt(0).toUpperCase()+a.slice(1);SVG[l+"Effect"]=SVG.invent({create:function(){this.constructor.call(this,SVG.create("fe"+l)),r.apply(this,arguments),this.result(this.attr("id")+"Out")},inherit:SVG.Effect,extend:{}})}),n(t,function(r,a){var l=a.charAt(0).toUpperCase()+a.slice(1);SVG[l+"Effect"]=SVG.invent({create:function(){this.constructor.call(this,SVG.create("fe"+l)),r.apply(this,arguments),this.result(this.attr("id")+"Out")},inherit:SVG.ParentEffect,extend:{}})}),n(i,function(r,a){var l=a.charAt(0).toUpperCase()+a.slice(1);SVG[l]=SVG.invent({create:function(){this.constructor.call(this,SVG.create("fe"+l)),r.apply(this,arguments)},inherit:SVG.ChildEffect,extend:{}})}),SVG.extend(SVG.MergeEffect,{in:function(r){return r instanceof SVG.MergeNode?this.add(r,0):this.add(new SVG.MergeNode(r),0),this}}),SVG.extend(SVG.CompositeEffect,SVG.BlendEffect,SVG.DisplacementMapEffect,{in2:function(r){return r==null?this.parent()&&this.parent().select('[result="'+this.attr("in2")+'"]').get(0)||this.attr("in2"):this.attr("in2",r)}}),SVG.filter={sepiatone:[.343,.669,.119,0,0,.249,.626,.13,0,0,.172,.334,.111,0,0,0,0,0,1,0]}}).call(void 0),function(){function s(n,r,a,l,c,d,h){for(var g=n.slice(r,a||h),m=l.slice(c,d||h),p=0,b={pos:[0,0],start:[0,0]},k={pos:[0,0],start:[0,0]};g[p]=e.call(b,g[p]),m[p]=e.call(k,m[p]),g[p][0]!=m[p][0]||g[p][0]=="M"||g[p][0]=="A"&&(g[p][4]!=m[p][4]||g[p][5]!=m[p][5])?(Array.prototype.splice.apply(g,[p,1].concat(i.call(b,g[p]))),Array.prototype.splice.apply(m,[p,1].concat(i.call(k,m[p])))):(g[p]=t.call(b,g[p]),m[p]=t.call(k,m[p])),!(++p==g.length&&p==m.length);)p==g.length&&g.push(["C",b.pos[0],b.pos[1],b.pos[0],b.pos[1],b.pos[0],b.pos[1]]),p==m.length&&m.push(["C",k.pos[0],k.pos[1],k.pos[0],k.pos[1],k.pos[0],k.pos[1]]);return{start:g,dest:m}}function e(n){switch(n[0]){case"z":case"Z":n[0]="L",n[1]=this.start[0],n[2]=this.start[1];break;case"H":n[0]="L",n[2]=this.pos[1];break;case"V":n[0]="L",n[2]=n[1],n[1]=this.pos[0];break;case"T":n[0]="Q",n[3]=n[1],n[4]=n[2],n[1]=this.reflection[1],n[2]=this.reflection[0];break;case"S":n[0]="C",n[6]=n[4],n[5]=n[3],n[4]=n[2],n[3]=n[1],n[2]=this.reflection[1],n[1]=this.reflection[0]}return n}function t(n){var r=n.length;return this.pos=[n[r-2],n[r-1]],"SCQT".indexOf(n[0])!=-1&&(this.reflection=[2*this.pos[0]-n[r-4],2*this.pos[1]-n[r-3]]),n}function i(n){var r=[n];switch(n[0]){case"M":return this.pos=this.start=[n[1],n[2]],r;case"L":n[5]=n[3]=n[1],n[6]=n[4]=n[2],n[1]=this.pos[0],n[2]=this.pos[1];break;case"Q":n[6]=n[4],n[5]=n[3],n[4]=1*n[4]/3+2*n[2]/3,n[3]=1*n[3]/3+2*n[1]/3,n[2]=1*this.pos[1]/3+2*n[2]/3,n[1]=1*this.pos[0]/3+2*n[1]/3;break;case"A":r=function(a,l){var c,d,h,g,m,p,b,k,v,x,u,f,w,y,_,C,A,S,P,L,I,R,z,U,X,q,te=Math.abs(l[1]),J=Math.abs(l[2]),le=l[3]%360,Ee=l[4],Me=l[5],_e=l[6],At=l[7],pe=new SVG.Point(a),fe=new SVG.Point(_e,At),be=[];if(te===0||J===0||pe.x===fe.x&&pe.y===fe.y)return[["C",pe.x,pe.y,fe.x,fe.y,fe.x,fe.y]];for(c=new SVG.Point((pe.x-fe.x)/2,(pe.y-fe.y)/2).transform(new SVG.Matrix().rotate(le)),(d=c.x*c.x/(te*te)+c.y*c.y/(J*J))>1&&(te*=d=Math.sqrt(d),J*=d),h=new SVG.Matrix().rotate(le).scale(1/te,1/J).rotate(-le),pe=pe.transform(h),fe=fe.transform(h),g=[fe.x-pe.x,fe.y-pe.y],p=g[0]*g[0]+g[1]*g[1],m=Math.sqrt(p),g[0]/=m,g[1]/=m,b=p<4?Math.sqrt(1-p/4):0,Ee===Me&&(b*=-1),k=new SVG.Point((fe.x+pe.x)/2+b*-g[1],(fe.y+pe.y)/2+b*g[0]),v=new SVG.Point(pe.x-k.x,pe.y-k.y),x=new SVG.Point(fe.x-k.x,fe.y-k.y),u=Math.acos(v.x/Math.sqrt(v.x*v.x+v.y*v.y)),v.y<0&&(u*=-1),f=Math.acos(x.x/Math.sqrt(x.x*x.x+x.y*x.y)),x.y<0&&(f*=-1),Me&&u>f&&(f+=2*Math.PI),!Me&&u<f&&(f-=2*Math.PI),y=Math.ceil(2*Math.abs(u-f)/Math.PI),C=[],A=u,w=(f-u)/y,_=4*Math.tan(w/4)/3,I=0;I<=y;I++)P=Math.cos(A),S=Math.sin(A),L=new SVG.Point(k.x+P,k.y+S),C[I]=[new SVG.Point(L.x+_*S,L.y-_*P),L,new SVG.Point(L.x-_*S,L.y+_*P)],A+=w;for(C[0][0]=C[0][1].clone(),C[C.length-1][2]=C[C.length-1][1].clone(),h=new SVG.Matrix().rotate(le).scale(te,J).rotate(-le),I=0,R=C.length;I<R;I++)C[I][0]=C[I][0].transform(h),C[I][1]=C[I][1].transform(h),C[I][2]=C[I][2].transform(h);for(I=1,R=C.length;I<R;I++)z=(L=C[I-1][2]).x,U=L.y,X=(L=C[I][0]).x,q=L.y,_e=(L=C[I][1]).x,At=L.y,be.push(["C",z,U,X,q,_e,At]);return be}(this.pos,n),n=r[0]}return n[0]="C",this.pos=[n[5],n[6]],this.reflection=[2*n[5]-n[3],2*n[6]-n[4]],r}function o(n,r){if(r===!1)return!1;for(var a=r,l=n.length;a<l;++a)if(n[a][0]=="M")return a;return!1}SVG.extend(SVG.PathArray,{morph:function(n){for(var r=this.value,a=this.parse(n),l=0,c=0,d=!1,h=!1;l!==!1||c!==!1;){var g;d=o(r,l!==!1&&l+1),h=o(a,c!==!1&&c+1),l===!1&&(l=(g=new SVG.PathArray(m.start).bbox()).height==0||g.width==0?r.push(r[0])-1:r.push(["M",g.x+g.width/2,g.y+g.height/2])-1),c===!1&&(c=(g=new SVG.PathArray(m.dest).bbox()).height==0||g.width==0?a.push(a[0])-1:a.push(["M",g.x+g.width/2,g.y+g.height/2])-1);var m=s(r,l,d,a,c,h);r=r.slice(0,l).concat(m.start,d===!1?[]:r.slice(d)),a=a.slice(0,c).concat(m.dest,h===!1?[]:a.slice(h)),l=d!==!1&&l+m.start.length,c=h!==!1&&c+m.dest.length}return this.value=r,this.destination=new SVG.PathArray,this.destination.value=a,this}})}(),(function(){function s(e){e.remember("_draggable",this),this.el=e}s.prototype.init=function(e,t){var i=this;this.constraint=e,this.value=t,this.el.on("mousedown.drag",function(o){i.start(o)}),this.el.on("touchstart.drag",function(o){i.start(o)})},s.prototype.transformPoint=function(e,t){var i=(e=e||window.event).changedTouches&&e.changedTouches[0]||e;return this.p.x=i.clientX-(t||0),this.p.y=i.clientY,this.p.matrixTransform(this.m)},s.prototype.getBBox=function(){var e=this.el.bbox();return this.el instanceof SVG.Nested&&(e=this.el.rbox()),(this.el instanceof SVG.G||this.el instanceof SVG.Use||this.el instanceof SVG.Nested)&&(e.x=this.el.x(),e.y=this.el.y()),e},s.prototype.start=function(e){if(e.type!="click"&&e.type!="mousedown"&&e.type!="mousemove"||(e.which||e.buttons)==1){var t=this;if(this.el.fire("beforedrag",{event:e,handler:this}),!this.el.event().defaultPrevented){e.preventDefault(),e.stopPropagation(),this.parent=this.parent||this.el.parent(SVG.Nested)||this.el.parent(SVG.Doc),this.p=this.parent.node.createSVGPoint(),this.m=this.el.node.getScreenCTM().inverse();var i,o=this.getBBox();if(this.el instanceof SVG.Text)switch(i=this.el.node.getComputedTextLength(),this.el.attr("text-anchor")){case"middle":i/=2;break;case"start":i=0}this.startPoints={point:this.transformPoint(e,i),box:o,transform:this.el.transform()},SVG.on(window,"mousemove.drag",function(n){t.drag(n)}),SVG.on(window,"touchmove.drag",function(n){t.drag(n)}),SVG.on(window,"mouseup.drag",function(n){t.end(n)}),SVG.on(window,"touchend.drag",function(n){t.end(n)}),this.el.fire("dragstart",{event:e,p:this.startPoints.point,m:this.m,handler:this})}}},s.prototype.drag=function(e){var t=this.getBBox(),i=this.transformPoint(e),o=this.startPoints.box.x+i.x-this.startPoints.point.x,n=this.startPoints.box.y+i.y-this.startPoints.point.y,r=this.constraint,a=i.x-this.startPoints.point.x,l=i.y-this.startPoints.point.y;if(this.el.fire("dragmove",{event:e,p:i,m:this.m,handler:this}),this.el.event().defaultPrevented)return i;if(typeof r=="function"){var c=r.call(this.el,o,n,this.m);typeof c=="boolean"&&(c={x:c,y:c}),c.x===!0?this.el.x(o):c.x!==!1&&this.el.x(c.x),c.y===!0?this.el.y(n):c.y!==!1&&this.el.y(c.y)}else typeof r=="object"&&(r.minX!=null&&o<r.minX?a=(o=r.minX)-this.startPoints.box.x:r.maxX!=null&&o>r.maxX-t.width&&(a=(o=r.maxX-t.width)-this.startPoints.box.x),r.minY!=null&&n<r.minY?l=(n=r.minY)-this.startPoints.box.y:r.maxY!=null&&n>r.maxY-t.height&&(l=(n=r.maxY-t.height)-this.startPoints.box.y),r.snapToGrid!=null&&(o-=o%r.snapToGrid,n-=n%r.snapToGrid,a-=a%r.snapToGrid,l-=l%r.snapToGrid),this.el instanceof SVG.G?this.el.matrix(this.startPoints.transform).transform({x:a,y:l},!0):this.el.move(o,n));return i},s.prototype.end=function(e){var t=this.drag(e);this.el.fire("dragend",{event:e,p:t,m:this.m,handler:this}),SVG.off(window,"mousemove.drag"),SVG.off(window,"touchmove.drag"),SVG.off(window,"mouseup.drag"),SVG.off(window,"touchend.drag")},SVG.extend(SVG.Element,{draggable:function(e,t){typeof e!="function"&&typeof e!="object"||(t=e,e=!0);var i=this.remember("_draggable")||new s(this);return(e=e===void 0||e)?i.init(t||{},e):(this.off("mousedown.drag"),this.off("touchstart.drag")),this}})}).call(void 0),function(){function s(e){this.el=e,e.remember("_selectHandler",this),this.pointSelection={isSelected:!1},this.rectSelection={isSelected:!1},this.pointsList={lt:[0,0],rt:["width",0],rb:["width","height"],lb:[0,"height"],t:["width",0],r:["width","height"],b:["width","height"],l:[0,"height"]},this.pointCoord=function(t,i,o){var n=typeof t!="string"?t:i[t];return o?n/2:n},this.pointCoords=function(t,i){var o=this.pointsList[t];return{x:this.pointCoord(o[0],i,t==="t"||t==="b"),y:this.pointCoord(o[1],i,t==="r"||t==="l")}}}s.prototype.init=function(e,t){var i=this.el.bbox();this.options={};var o=this.el.selectize.defaults.points;for(var n in this.el.selectize.defaults)this.options[n]=this.el.selectize.defaults[n],t[n]!==void 0&&(this.options[n]=t[n]);var r=["points","pointsExclude"];for(var n in r){var a=this.options[r[n]];typeof a=="string"?a=a.length>0?a.split(/\s*,\s*/i):[]:typeof a=="boolean"&&r[n]==="points"&&(a=a?o:[]),this.options[r[n]]=a}this.options.points=[o,this.options.points].reduce(function(l,c){return l.filter(function(d){return c.indexOf(d)>-1})}),this.options.points=[this.options.points,this.options.pointsExclude].reduce(function(l,c){return l.filter(function(d){return c.indexOf(d)<0})}),this.parent=this.el.parent(),this.nested=this.nested||this.parent.group(),this.nested.matrix(new SVG.Matrix(this.el).translate(i.x,i.y)),this.options.deepSelect&&["line","polyline","polygon"].indexOf(this.el.type)!==-1?this.selectPoints(e):this.selectRect(e),this.observe(),this.cleanup()},s.prototype.selectPoints=function(e){return this.pointSelection.isSelected=e,this.pointSelection.set||(this.pointSelection.set=this.parent.set(),this.drawPoints()),this},s.prototype.getPointArray=function(){var e=this.el.bbox();return this.el.array().valueOf().map(function(t){return[t[0]-e.x,t[1]-e.y]})},s.prototype.drawPoints=function(){for(var e=this,t=this.getPointArray(),i=0,o=t.length;i<o;++i){var n=function(a){return function(l){(l=l||window.event).preventDefault?l.preventDefault():l.returnValue=!1,l.stopPropagation();var c=l.pageX||l.touches[0].pageX,d=l.pageY||l.touches[0].pageY;e.el.fire("point",{x:c,y:d,i:a,event:l})}}(i),r=this.drawPoint(t[i][0],t[i][1]).addClass(this.options.classPoints).addClass(this.options.classPoints+"_point").on("touchstart",n).on("mousedown",n);this.pointSelection.set.add(r)}},s.prototype.drawPoint=function(e,t){var i=this.options.pointType;switch(i){case"circle":return this.drawCircle(e,t);case"rect":return this.drawRect(e,t);default:if(typeof i=="function")return i.call(this,e,t);throw new Error("Unknown "+i+" point type!")}},s.prototype.drawCircle=function(e,t){return this.nested.circle(this.options.pointSize).center(e,t)},s.prototype.drawRect=function(e,t){return this.nested.rect(this.options.pointSize,this.options.pointSize).center(e,t)},s.prototype.updatePointSelection=function(){var e=this.getPointArray();this.pointSelection.set.each(function(t){this.cx()===e[t][0]&&this.cy()===e[t][1]||this.center(e[t][0],e[t][1])})},s.prototype.updateRectSelection=function(){var e=this,t=this.el.bbox();if(this.rectSelection.set.get(0).attr({width:t.width,height:t.height}),this.options.points.length&&this.options.points.map(function(o,n){var r=e.pointCoords(o,t);e.rectSelection.set.get(n+1).center(r.x,r.y)}),this.options.rotationPoint){var i=this.rectSelection.set.length();this.rectSelection.set.get(i-1).center(t.width/2,20)}},s.prototype.selectRect=function(e){var t=this,i=this.el.bbox();function o(a){return function(l){(l=l||window.event).preventDefault?l.preventDefault():l.returnValue=!1,l.stopPropagation();var c=l.pageX||l.touches[0].pageX,d=l.pageY||l.touches[0].pageY;t.el.fire(a,{x:c,y:d,event:l})}}if(this.rectSelection.isSelected=e,this.rectSelection.set=this.rectSelection.set||this.parent.set(),this.rectSelection.set.get(0)||this.rectSelection.set.add(this.nested.rect(i.width,i.height).addClass(this.options.classRect)),this.options.points.length&&this.rectSelection.set.length()<2&&(this.options.points.map(function(a,l){var c=t.pointCoords(a,i),d=t.drawPoint(c.x,c.y).attr("class",t.options.classPoints+"_"+a).on("mousedown",o(a)).on("touchstart",o(a));t.rectSelection.set.add(d)}),this.rectSelection.set.each(function(){this.addClass(t.options.classPoints)})),this.options.rotationPoint&&(this.options.points&&!this.rectSelection.set.get(9)||!this.options.points&&!this.rectSelection.set.get(1))){var n=function(a){(a=a||window.event).preventDefault?a.preventDefault():a.returnValue=!1,a.stopPropagation();var l=a.pageX||a.touches[0].pageX,c=a.pageY||a.touches[0].pageY;t.el.fire("rot",{x:l,y:c,event:a})},r=this.drawPoint(i.width/2,20).attr("class",this.options.classPoints+"_rot").on("touchstart",n).on("mousedown",n);this.rectSelection.set.add(r)}},s.prototype.handler=function(){var e=this.el.bbox();this.nested.matrix(new SVG.Matrix(this.el).translate(e.x,e.y)),this.rectSelection.isSelected&&this.updateRectSelection(),this.pointSelection.isSelected&&this.updatePointSelection()},s.prototype.observe=function(){var e=this;if(MutationObserver)if(this.rectSelection.isSelected||this.pointSelection.isSelected)this.observerInst=this.observerInst||new MutationObserver(function(){e.handler()}),this.observerInst.observe(this.el.node,{attributes:!0});else try{this.observerInst.disconnect(),delete this.observerInst}catch{}else this.el.off("DOMAttrModified.select"),(this.rectSelection.isSelected||this.pointSelection.isSelected)&&this.el.on("DOMAttrModified.select",function(){e.handler()})},s.prototype.cleanup=function(){!this.rectSelection.isSelected&&this.rectSelection.set&&(this.rectSelection.set.each(function(){this.remove()}),this.rectSelection.set.clear(),delete this.rectSelection.set),!this.pointSelection.isSelected&&this.pointSelection.set&&(this.pointSelection.set.each(function(){this.remove()}),this.pointSelection.set.clear(),delete this.pointSelection.set),this.pointSelection.isSelected||this.rectSelection.isSelected||(this.nested.remove(),delete this.nested)},SVG.extend(SVG.Element,{selectize:function(e,t){return typeof e=="object"&&(t=e,e=!0),(this.remember("_selectHandler")||new s(this)).init(e===void 0||e,t||{}),this}}),SVG.Element.prototype.selectize.defaults={points:["lt","rt","rb","lb","t","r","b","l"],pointsExclude:[],classRect:"svg_select_boundingRect",classPoints:"svg_select_points",pointSize:7,rotationPoint:!0,deepSelect:!1,pointType:"circle"}}(),function(){(function(){function s(e){e.remember("_resizeHandler",this),this.el=e,this.parameters={},this.lastUpdateCall=null,this.p=e.doc().node.createSVGPoint()}s.prototype.transformPoint=function(e,t,i){return this.p.x=e-(this.offset.x-window.pageXOffset),this.p.y=t-(this.offset.y-window.pageYOffset),this.p.matrixTransform(i||this.m)},s.prototype._extractPosition=function(e){return{x:e.clientX!=null?e.clientX:e.touches[0].clientX,y:e.clientY!=null?e.clientY:e.touches[0].clientY}},s.prototype.init=function(e){var t=this;if(this.stop(),e!=="stop"){for(var i in this.options={},this.el.resize.defaults)this.options[i]=this.el.resize.defaults[i],e[i]!==void 0&&(this.options[i]=e[i]);this.el.on("lt.resize",function(o){t.resize(o||window.event)}),this.el.on("rt.resize",function(o){t.resize(o||window.event)}),this.el.on("rb.resize",function(o){t.resize(o||window.event)}),this.el.on("lb.resize",function(o){t.resize(o||window.event)}),this.el.on("t.resize",function(o){t.resize(o||window.event)}),this.el.on("r.resize",function(o){t.resize(o||window.event)}),this.el.on("b.resize",function(o){t.resize(o||window.event)}),this.el.on("l.resize",function(o){t.resize(o||window.event)}),this.el.on("rot.resize",function(o){t.resize(o||window.event)}),this.el.on("point.resize",function(o){t.resize(o||window.event)}),this.update()}},s.prototype.stop=function(){return this.el.off("lt.resize"),this.el.off("rt.resize"),this.el.off("rb.resize"),this.el.off("lb.resize"),this.el.off("t.resize"),this.el.off("r.resize"),this.el.off("b.resize"),this.el.off("l.resize"),this.el.off("rot.resize"),this.el.off("point.resize"),this},s.prototype.resize=function(e){var t=this;this.m=this.el.node.getScreenCTM().inverse(),this.offset={x:window.pageXOffset,y:window.pageYOffset};var i=this._extractPosition(e.detail.event);if(this.parameters={type:this.el.type,p:this.transformPoint(i.x,i.y),x:e.detail.x,y:e.detail.y,box:this.el.bbox(),rotation:this.el.transform().rotation},this.el.type==="text"&&(this.parameters.fontSize=this.el.attr()["font-size"]),e.detail.i!==void 0){var o=this.el.array().valueOf();this.parameters.i=e.detail.i,this.parameters.pointCoords=[o[e.detail.i][0],o[e.detail.i][1]]}switch(e.type){case"lt":this.calc=function(n,r){var a=this.snapToGrid(n,r);if(this.parameters.box.width-a[0]>0&&this.parameters.box.height-a[1]>0){if(this.parameters.type==="text")return this.el.move(this.parameters.box.x+a[0],this.parameters.box.y),void this.el.attr("font-size",this.parameters.fontSize-a[0]);a=this.checkAspectRatio(a),this.el.move(this.parameters.box.x+a[0],this.parameters.box.y+a[1]).size(this.parameters.box.width-a[0],this.parameters.box.height-a[1])}};break;case"rt":this.calc=function(n,r){var a=this.snapToGrid(n,r,2);if(this.parameters.box.width+a[0]>0&&this.parameters.box.height-a[1]>0){if(this.parameters.type==="text")return this.el.move(this.parameters.box.x-a[0],this.parameters.box.y),void this.el.attr("font-size",this.parameters.fontSize+a[0]);a=this.checkAspectRatio(a,!0),this.el.move(this.parameters.box.x,this.parameters.box.y+a[1]).size(this.parameters.box.width+a[0],this.parameters.box.height-a[1])}};break;case"rb":this.calc=function(n,r){var a=this.snapToGrid(n,r,0);if(this.parameters.box.width+a[0]>0&&this.parameters.box.height+a[1]>0){if(this.parameters.type==="text")return this.el.move(this.parameters.box.x-a[0],this.parameters.box.y),void this.el.attr("font-size",this.parameters.fontSize+a[0]);a=this.checkAspectRatio(a),this.el.move(this.parameters.box.x,this.parameters.box.y).size(this.parameters.box.width+a[0],this.parameters.box.height+a[1])}};break;case"lb":this.calc=function(n,r){var a=this.snapToGrid(n,r,1);if(this.parameters.box.width-a[0]>0&&this.parameters.box.height+a[1]>0){if(this.parameters.type==="text")return this.el.move(this.parameters.box.x+a[0],this.parameters.box.y),void this.el.attr("font-size",this.parameters.fontSize-a[0]);a=this.checkAspectRatio(a,!0),this.el.move(this.parameters.box.x+a[0],this.parameters.box.y).size(this.parameters.box.width-a[0],this.parameters.box.height+a[1])}};break;case"t":this.calc=function(n,r){var a=this.snapToGrid(n,r,2);if(this.parameters.box.height-a[1]>0){if(this.parameters.type==="text")return;this.el.move(this.parameters.box.x,this.parameters.box.y+a[1]).height(this.parameters.box.height-a[1])}};break;case"r":this.calc=function(n,r){var a=this.snapToGrid(n,r,0);if(this.parameters.box.width+a[0]>0){if(this.parameters.type==="text")return;this.el.move(this.parameters.box.x,this.parameters.box.y).width(this.parameters.box.width+a[0])}};break;case"b":this.calc=function(n,r){var a=this.snapToGrid(n,r,0);if(this.parameters.box.height+a[1]>0){if(this.parameters.type==="text")return;this.el.move(this.parameters.box.x,this.parameters.box.y).height(this.parameters.box.height+a[1])}};break;case"l":this.calc=function(n,r){var a=this.snapToGrid(n,r,1);if(this.parameters.box.width-a[0]>0){if(this.parameters.type==="text")return;this.el.move(this.parameters.box.x+a[0],this.parameters.box.y).width(this.parameters.box.width-a[0])}};break;case"rot":this.calc=function(n,r){var a=n+this.parameters.p.x,l=r+this.parameters.p.y,c=Math.atan2(this.parameters.p.y-this.parameters.box.y-this.parameters.box.height/2,this.parameters.p.x-this.parameters.box.x-this.parameters.box.width/2),d=Math.atan2(l-this.parameters.box.y-this.parameters.box.height/2,a-this.parameters.box.x-this.parameters.box.width/2),h=this.parameters.rotation+180*(d-c)/Math.PI+this.options.snapToAngle/2;this.el.center(this.parameters.box.cx,this.parameters.box.cy).rotate(h-h%this.options.snapToAngle,this.parameters.box.cx,this.parameters.box.cy)};break;case"point":this.calc=function(n,r){var a=this.snapToGrid(n,r,this.parameters.pointCoords[0],this.parameters.pointCoords[1]),l=this.el.array().valueOf();l[this.parameters.i][0]=this.parameters.pointCoords[0]+a[0],l[this.parameters.i][1]=this.parameters.pointCoords[1]+a[1],this.el.plot(l)}}this.el.fire("resizestart",{dx:this.parameters.x,dy:this.parameters.y,event:e}),SVG.on(window,"touchmove.resize",function(n){t.update(n||window.event)}),SVG.on(window,"touchend.resize",function(){t.done()}),SVG.on(window,"mousemove.resize",function(n){t.update(n||window.event)}),SVG.on(window,"mouseup.resize",function(){t.done()})},s.prototype.update=function(e){if(e){var t=this._extractPosition(e),i=this.transformPoint(t.x,t.y),o=i.x-this.parameters.p.x,n=i.y-this.parameters.p.y;this.lastUpdateCall=[o,n],this.calc(o,n),this.el.fire("resizing",{dx:o,dy:n,event:e})}else this.lastUpdateCall&&this.calc(this.lastUpdateCall[0],this.lastUpdateCall[1])},s.prototype.done=function(){this.lastUpdateCall=null,SVG.off(window,"mousemove.resize"),SVG.off(window,"mouseup.resize"),SVG.off(window,"touchmove.resize"),SVG.off(window,"touchend.resize"),this.el.fire("resizedone")},s.prototype.snapToGrid=function(e,t,i,o){var n;return o!==void 0?n=[(i+e)%this.options.snapToGrid,(o+t)%this.options.snapToGrid]:(i=i??3,n=[(this.parameters.box.x+e+(1&i?0:this.parameters.box.width))%this.options.snapToGrid,(this.parameters.box.y+t+(2&i?0:this.parameters.box.height))%this.options.snapToGrid]),e<0&&(n[0]-=this.options.snapToGrid),t<0&&(n[1]-=this.options.snapToGrid),e-=Math.abs(n[0])<this.options.snapToGrid/2?n[0]:n[0]-(e<0?-this.options.snapToGrid:this.options.snapToGrid),t-=Math.abs(n[1])<this.options.snapToGrid/2?n[1]:n[1]-(t<0?-this.options.snapToGrid:this.options.snapToGrid),this.constraintToBox(e,t,i,o)},s.prototype.constraintToBox=function(e,t,i,o){var n,r,a=this.options.constraint||{};return o!==void 0?(n=i,r=o):(n=this.parameters.box.x+(1&i?0:this.parameters.box.width),r=this.parameters.box.y+(2&i?0:this.parameters.box.height)),a.minX!==void 0&&n+e<a.minX&&(e=a.minX-n),a.maxX!==void 0&&n+e>a.maxX&&(e=a.maxX-n),a.minY!==void 0&&r+t<a.minY&&(t=a.minY-r),a.maxY!==void 0&&r+t>a.maxY&&(t=a.maxY-r),[e,t]},s.prototype.checkAspectRatio=function(e,t){if(!this.options.saveAspectRatio)return e;var i=e.slice(),o=this.parameters.box.width/this.parameters.box.height,n=this.parameters.box.width+e[0],r=this.parameters.box.height-e[1],a=n/r;return a<o?(i[1]=n/o-this.parameters.box.height,t&&(i[1]=-i[1])):a>o&&(i[0]=this.parameters.box.width-r*o,t&&(i[0]=-i[0])),i},SVG.extend(SVG.Element,{resize:function(e){return(this.remember("_resizeHandler")||new s(this)).init(e||{}),this}}),SVG.Element.prototype.resize.defaults={snapToAngle:.1,snapToGrid:1,constraint:{},saveAspectRatio:!1}}).call(this)}(),window.Apex===void 0&&(window.Apex={});var og=function(){function s(e){H(this,s),this.ctx=e,this.w=e.w}return W(s,[{key:"initModules",value:function(){this.ctx.publicMethods=["updateOptions","updateSeries","appendData","appendSeries","isSeriesHidden","toggleSeries","showSeries","hideSeries","setLocale","resetSeries","zoomX","toggleDataPointSelection","dataURI","exportToCSV","addXaxisAnnotation","addYaxisAnnotation","addPointAnnotation","clearAnnotations","removeAnnotation","paper","destroy"],this.ctx.eventList=["click","mousedown","mousemove","mouseleave","touchstart","touchmove","touchleave","mouseup","touchend"],this.ctx.animations=new Ko(this.ctx),this.ctx.axes=new Mw(this.ctx),this.ctx.core=new nk(this.ctx.el,this.ctx),this.ctx.config=new Jn({}),this.ctx.data=new hg(this.ctx),this.ctx.grid=new ug(this.ctx),this.ctx.graphics=new N(this.ctx),this.ctx.coreUtils=new De(this.ctx),this.ctx.crosshairs=new pl(this.ctx),this.ctx.events=new Iw(this.ctx),this.ctx.exports=new xr(this.ctx),this.ctx.localization=new Pw(this.ctx),this.ctx.options=new no,this.ctx.responsive=new Lw(this.ctx),this.ctx.series=new zt(this.ctx),this.ctx.theme=new Rw(this.ctx),this.ctx.formatters=new os(this.ctx),this.ctx.titleSubtitle=new Nw(this.ctx),this.ctx.legend=new mg(this.ctx),this.ctx.toolbar=new fg(this.ctx),this.ctx.tooltip=new tg(this.ctx),this.ctx.dimensions=new yr(this.ctx),this.ctx.updateHelpers=new sk(this.ctx),this.ctx.zoomPanSelection=new Ow(this.ctx),this.ctx.w.globals.tooltip=new tg(this.ctx)}}]),s}(),ng=function(){function s(e){H(this,s),this.ctx=e,this.w=e.w}return W(s,[{key:"clear",value:function(e){var t=e.isUpdating;this.ctx.zoomPanSelection&&this.ctx.zoomPanSelection.destroy(),this.ctx.toolbar&&this.ctx.toolbar.destroy(),this.ctx.animations=null,this.ctx.axes=null,this.ctx.annotations=null,this.ctx.core=null,this.ctx.data=null,this.ctx.grid=null,this.ctx.series=null,this.ctx.responsive=null,this.ctx.theme=null,this.ctx.formatters=null,this.ctx.titleSubtitle=null,this.ctx.legend=null,this.ctx.dimensions=null,this.ctx.options=null,this.ctx.crosshairs=null,this.ctx.zoomPanSelection=null,this.ctx.updateHelpers=null,this.ctx.toolbar=null,this.ctx.localization=null,this.ctx.w.globals.tooltip=null,this.clearDomElements({isUpdating:t})}},{key:"killSVG",value:function(e){e.each(function(t,i){this.removeClass("*"),this.off(),this.stop()},!0),e.ungroup(),e.clear()}},{key:"clearDomElements",value:function(e){var t=this,i=e.isUpdating,o=this.w.globals.dom.Paper.node;o.parentNode&&o.parentNode.parentNode&&!i&&(o.parentNode.parentNode.style.minHeight="unset");var n=this.w.globals.dom.baseEl;n&&this.ctx.eventList.forEach(function(a){n.removeEventListener(a,t.ctx.events.documentEvent)});var r=this.w.globals.dom;if(this.ctx.el!==null)for(;this.ctx.el.firstChild;)this.ctx.el.removeChild(this.ctx.el.firstChild);this.killSVG(r.Paper),r.Paper.remove(),r.elWrap=null,r.elGraphical=null,r.elLegendWrap=null,r.elLegendForeign=null,r.baseEl=null,r.elGridRect=null,r.elGridRectMask=null,r.elGridRectMarkerMask=null,r.elForecastMask=null,r.elNonForecastMask=null,r.elDefs=null}}]),s}(),ul=new WeakMap,rk=function(){function s(e,t){H(this,s),this.opts=t,this.ctx=this,this.w=new Tw(t).init(),this.el=e,this.w.globals.cuid=T.randomId(),this.w.globals.chartID=this.w.config.chart.id?T.escapeString(this.w.config.chart.id):this.w.globals.cuid,new og(this).initModules(),this.create=T.bind(this.create,this),this.windowResizeHandler=this._windowResizeHandler.bind(this),this.parentResizeHandler=this._parentResizeCallback.bind(this)}return W(s,[{key:"render",value:function(){var e=this;return new Promise(function(t,i){if(e.el!==null){Apex._chartInstances===void 0&&(Apex._chartInstances=[]),e.w.config.chart.id&&Apex._chartInstances.push({id:e.w.globals.chartID,group:e.w.config.chart.group,chart:e}),e.setLocale(e.w.config.chart.defaultLocale);var o=e.w.config.chart.events.beforeMount;typeof o=="function"&&o(e,e.w),e.events.fireEvent("beforeMount",[e,e.w]),window.addEventListener("resize",e.windowResizeHandler),function(g,m){var p=!1;if(g.nodeType!==Node.DOCUMENT_FRAGMENT_NODE){var b=g.getBoundingClientRect();g.style.display!=="none"&&b.width!==0||(p=!0)}var k=new ResizeObserver(function(v){p&&m.call(g,v),p=!0});g.nodeType===Node.DOCUMENT_FRAGMENT_NODE?Array.from(g.children).forEach(function(v){return k.observe(v)}):k.observe(g),ul.set(m,k)}(e.el.parentNode,e.parentResizeHandler);var n=e.el.getRootNode&&e.el.getRootNode(),r=T.is("ShadowRoot",n),a=e.el.ownerDocument,l=r?n.getElementById("apexcharts-css"):a.getElementById("apexcharts-css");if(!l){var c;(l=document.createElement("style")).id="apexcharts-css",l.textContent=`@keyframes opaque {
  0% {
    opacity: 0
  }

  to {
    opacity: 1
  }
}

@keyframes resizeanim {

  0%,
  to {
    opacity: 0
  }
}

.apexcharts-canvas {
  position: relative;
  user-select: none
}

.apexcharts-canvas ::-webkit-scrollbar {
  -webkit-appearance: none;
  width: 6px
}

.apexcharts-canvas ::-webkit-scrollbar-thumb {
  border-radius: 4px;
  background-color: rgba(0, 0, 0, .5);
  box-shadow: 0 0 1px rgba(255, 255, 255, .5);
  -webkit-box-shadow: 0 0 1px rgba(255, 255, 255, .5)
}

.apexcharts-inner {
  position: relative
}

.apexcharts-text tspan {
  font-family: inherit
}

rect.legend-mouseover-inactive,
.legend-mouseover-inactive rect,
.legend-mouseover-inactive path,
.legend-mouseover-inactive circle,
.legend-mouseover-inactive line,
.legend-mouseover-inactive text.apexcharts-yaxis-title-text,
.legend-mouseover-inactive text.apexcharts-yaxis-label {
  transition: .15s ease all;
  opacity: .2
}

.apexcharts-legend-text {
  padding-left: 15px;
  margin-left: -15px;
}

.apexcharts-series-collapsed {
  opacity: 0
}

.apexcharts-tooltip {
  border-radius: 5px;
  box-shadow: 2px 2px 6px -4px #999;
  cursor: default;
  font-size: 14px;
  left: 62px;
  opacity: 0;
  pointer-events: none;
  position: absolute;
  top: 20px;
  display: flex;
  flex-direction: column;
  overflow: hidden;
  white-space: nowrap;
  z-index: 12;
  transition: .15s ease all
}

.apexcharts-tooltip.apexcharts-active {
  opacity: 1;
  transition: .15s ease all
}

.apexcharts-tooltip.apexcharts-theme-light {
  border: 1px solid #e3e3e3;
  background: rgba(255, 255, 255, .96)
}

.apexcharts-tooltip.apexcharts-theme-dark {
  color: #fff;
  background: rgba(30, 30, 30, .8)
}

.apexcharts-tooltip * {
  font-family: inherit
}

.apexcharts-tooltip-title {
  padding: 6px;
  font-size: 15px;
  margin-bottom: 4px
}

.apexcharts-tooltip.apexcharts-theme-light .apexcharts-tooltip-title {
  background: #eceff1;
  border-bottom: 1px solid #ddd
}

.apexcharts-tooltip.apexcharts-theme-dark .apexcharts-tooltip-title {
  background: rgba(0, 0, 0, .7);
  border-bottom: 1px solid #333
}

.apexcharts-tooltip-text-goals-value,
.apexcharts-tooltip-text-y-value,
.apexcharts-tooltip-text-z-value {
  display: inline-block;
  margin-left: 5px;
  font-weight: 600
}

.apexcharts-tooltip-text-goals-label:empty,
.apexcharts-tooltip-text-goals-value:empty,
.apexcharts-tooltip-text-y-label:empty,
.apexcharts-tooltip-text-y-value:empty,
.apexcharts-tooltip-text-z-value:empty,
.apexcharts-tooltip-title:empty {
  display: none
}

.apexcharts-tooltip-text-goals-label,
.apexcharts-tooltip-text-goals-value {
  padding: 6px 0 5px
}

.apexcharts-tooltip-goals-group,
.apexcharts-tooltip-text-goals-label,
.apexcharts-tooltip-text-goals-value {
  display: flex
}

.apexcharts-tooltip-text-goals-label:not(:empty),
.apexcharts-tooltip-text-goals-value:not(:empty) {
  margin-top: -6px
}

.apexcharts-tooltip-marker {
  width: 12px;
  height: 12px;
  position: relative;
  top: 0;
  margin-right: 10px;
  border-radius: 50%
}

.apexcharts-tooltip-series-group {
  padding: 0 10px;
  display: none;
  text-align: left;
  justify-content: left;
  align-items: center
}

.apexcharts-tooltip-series-group.apexcharts-active .apexcharts-tooltip-marker {
  opacity: 1
}

.apexcharts-tooltip-series-group.apexcharts-active,
.apexcharts-tooltip-series-group:last-child {
  padding-bottom: 4px
}

.apexcharts-tooltip-y-group {
  padding: 6px 0 5px
}

.apexcharts-custom-tooltip,
.apexcharts-tooltip-box {
  padding: 4px 8px
}

.apexcharts-tooltip-boxPlot {
  display: flex;
  flex-direction: column-reverse
}

.apexcharts-tooltip-box>div {
  margin: 4px 0
}

.apexcharts-tooltip-box span.value {
  font-weight: 700
}

.apexcharts-tooltip-rangebar {
  padding: 5px 8px
}

.apexcharts-tooltip-rangebar .category {
  font-weight: 600;
  color: #777
}

.apexcharts-tooltip-rangebar .series-name {
  font-weight: 700;
  display: block;
  margin-bottom: 5px
}

.apexcharts-xaxistooltip,
.apexcharts-yaxistooltip {
  opacity: 0;
  pointer-events: none;
  color: #373d3f;
  font-size: 13px;
  text-align: center;
  border-radius: 2px;
  position: absolute;
  z-index: 10;
  background: #eceff1;
  border: 1px solid #90a4ae
}

.apexcharts-xaxistooltip {
  padding: 9px 10px;
  transition: .15s ease all
}

.apexcharts-xaxistooltip.apexcharts-theme-dark {
  background: rgba(0, 0, 0, .7);
  border: 1px solid rgba(0, 0, 0, .5);
  color: #fff
}

.apexcharts-xaxistooltip:after,
.apexcharts-xaxistooltip:before {
  left: 50%;
  border: solid transparent;
  content: " ";
  height: 0;
  width: 0;
  position: absolute;
  pointer-events: none
}

.apexcharts-xaxistooltip:after {
  border-color: transparent;
  border-width: 6px;
  margin-left: -6px
}

.apexcharts-xaxistooltip:before {
  border-color: transparent;
  border-width: 7px;
  margin-left: -7px
}

.apexcharts-xaxistooltip-bottom:after,
.apexcharts-xaxistooltip-bottom:before {
  bottom: 100%
}

.apexcharts-xaxistooltip-top:after,
.apexcharts-xaxistooltip-top:before {
  top: 100%
}

.apexcharts-xaxistooltip-bottom:after {
  border-bottom-color: #eceff1
}

.apexcharts-xaxistooltip-bottom:before {
  border-bottom-color: #90a4ae
}

.apexcharts-xaxistooltip-bottom.apexcharts-theme-dark:after,
.apexcharts-xaxistooltip-bottom.apexcharts-theme-dark:before {
  border-bottom-color: rgba(0, 0, 0, .5)
}

.apexcharts-xaxistooltip-top:after {
  border-top-color: #eceff1
}

.apexcharts-xaxistooltip-top:before {
  border-top-color: #90a4ae
}

.apexcharts-xaxistooltip-top.apexcharts-theme-dark:after,
.apexcharts-xaxistooltip-top.apexcharts-theme-dark:before {
  border-top-color: rgba(0, 0, 0, .5)
}

.apexcharts-xaxistooltip.apexcharts-active {
  opacity: 1;
  transition: .15s ease all
}

.apexcharts-yaxistooltip {
  padding: 4px 10px
}

.apexcharts-yaxistooltip.apexcharts-theme-dark {
  background: rgba(0, 0, 0, .7);
  border: 1px solid rgba(0, 0, 0, .5);
  color: #fff
}

.apexcharts-yaxistooltip:after,
.apexcharts-yaxistooltip:before {
  top: 50%;
  border: solid transparent;
  content: " ";
  height: 0;
  width: 0;
  position: absolute;
  pointer-events: none
}

.apexcharts-yaxistooltip:after {
  border-color: transparent;
  border-width: 6px;
  margin-top: -6px
}

.apexcharts-yaxistooltip:before {
  border-color: transparent;
  border-width: 7px;
  margin-top: -7px
}

.apexcharts-yaxistooltip-left:after,
.apexcharts-yaxistooltip-left:before {
  left: 100%
}

.apexcharts-yaxistooltip-right:after,
.apexcharts-yaxistooltip-right:before {
  right: 100%
}

.apexcharts-yaxistooltip-left:after {
  border-left-color: #eceff1
}

.apexcharts-yaxistooltip-left:before {
  border-left-color: #90a4ae
}

.apexcharts-yaxistooltip-left.apexcharts-theme-dark:after,
.apexcharts-yaxistooltip-left.apexcharts-theme-dark:before {
  border-left-color: rgba(0, 0, 0, .5)
}

.apexcharts-yaxistooltip-right:after {
  border-right-color: #eceff1
}

.apexcharts-yaxistooltip-right:before {
  border-right-color: #90a4ae
}

.apexcharts-yaxistooltip-right.apexcharts-theme-dark:after,
.apexcharts-yaxistooltip-right.apexcharts-theme-dark:before {
  border-right-color: rgba(0, 0, 0, .5)
}

.apexcharts-yaxistooltip.apexcharts-active {
  opacity: 1
}

.apexcharts-yaxistooltip-hidden {
  display: none
}

.apexcharts-xcrosshairs,
.apexcharts-ycrosshairs {
  pointer-events: none;
  opacity: 0;
  transition: .15s ease all
}

.apexcharts-xcrosshairs.apexcharts-active,
.apexcharts-ycrosshairs.apexcharts-active {
  opacity: 1;
  transition: .15s ease all
}

.apexcharts-ycrosshairs-hidden {
  opacity: 0
}

.apexcharts-selection-rect {
  cursor: move
}

.svg_select_boundingRect,
.svg_select_points_rot {
  pointer-events: none;
  opacity: 0;
  visibility: hidden
}

.apexcharts-selection-rect+g .svg_select_boundingRect,
.apexcharts-selection-rect+g .svg_select_points_rot {
  opacity: 0;
  visibility: hidden
}

.apexcharts-selection-rect+g .svg_select_points_l,
.apexcharts-selection-rect+g .svg_select_points_r {
  cursor: ew-resize;
  opacity: 1;
  visibility: visible
}

.svg_select_points {
  fill: #efefef;
  stroke: #333;
  rx: 2
}

.apexcharts-svg.apexcharts-zoomable.hovering-zoom {
  cursor: crosshair
}

.apexcharts-svg.apexcharts-zoomable.hovering-pan {
  cursor: move
}

.apexcharts-menu-icon,
.apexcharts-pan-icon,
.apexcharts-reset-icon,
.apexcharts-selection-icon,
.apexcharts-toolbar-custom-icon,
.apexcharts-zoom-icon,
.apexcharts-zoomin-icon,
.apexcharts-zoomout-icon {
  cursor: pointer;
  width: 20px;
  height: 20px;
  line-height: 24px;
  color: #6e8192;
  text-align: center
}

.apexcharts-menu-icon svg,
.apexcharts-reset-icon svg,
.apexcharts-zoom-icon svg,
.apexcharts-zoomin-icon svg,
.apexcharts-zoomout-icon svg {
  fill: #6e8192
}

.apexcharts-selection-icon svg {
  fill: #444;
  transform: scale(.76)
}

.apexcharts-theme-dark .apexcharts-menu-icon svg,
.apexcharts-theme-dark .apexcharts-pan-icon svg,
.apexcharts-theme-dark .apexcharts-reset-icon svg,
.apexcharts-theme-dark .apexcharts-selection-icon svg,
.apexcharts-theme-dark .apexcharts-toolbar-custom-icon svg,
.apexcharts-theme-dark .apexcharts-zoom-icon svg,
.apexcharts-theme-dark .apexcharts-zoomin-icon svg,
.apexcharts-theme-dark .apexcharts-zoomout-icon svg {
  fill: #f3f4f5
}

.apexcharts-canvas .apexcharts-reset-zoom-icon.apexcharts-selected svg,
.apexcharts-canvas .apexcharts-selection-icon.apexcharts-selected svg,
.apexcharts-canvas .apexcharts-zoom-icon.apexcharts-selected svg {
  fill: #008ffb
}

.apexcharts-theme-light .apexcharts-menu-icon:hover svg,
.apexcharts-theme-light .apexcharts-reset-icon:hover svg,
.apexcharts-theme-light .apexcharts-selection-icon:not(.apexcharts-selected):hover svg,
.apexcharts-theme-light .apexcharts-zoom-icon:not(.apexcharts-selected):hover svg,
.apexcharts-theme-light .apexcharts-zoomin-icon:hover svg,
.apexcharts-theme-light .apexcharts-zoomout-icon:hover svg {
  fill: #333
}

.apexcharts-menu-icon,
.apexcharts-selection-icon {
  position: relative
}

.apexcharts-reset-icon {
  margin-left: 5px
}

.apexcharts-menu-icon,
.apexcharts-reset-icon,
.apexcharts-zoom-icon {
  transform: scale(.85)
}

.apexcharts-zoomin-icon,
.apexcharts-zoomout-icon {
  transform: scale(.7)
}

.apexcharts-zoomout-icon {
  margin-right: 3px
}

.apexcharts-pan-icon {
  transform: scale(.62);
  position: relative;
  left: 1px;
  top: 0
}

.apexcharts-pan-icon svg {
  fill: #fff;
  stroke: #6e8192;
  stroke-width: 2
}

.apexcharts-pan-icon.apexcharts-selected svg {
  stroke: #008ffb
}

.apexcharts-pan-icon:not(.apexcharts-selected):hover svg {
  stroke: #333
}

.apexcharts-toolbar {
  position: absolute;
  z-index: 11;
  max-width: 176px;
  text-align: right;
  border-radius: 3px;
  padding: 0 6px 2px;
  display: flex;
  justify-content: space-between;
  align-items: center
}

.apexcharts-menu {
  background: #fff;
  position: absolute;
  top: 100%;
  border: 1px solid #ddd;
  border-radius: 3px;
  padding: 3px;
  right: 10px;
  opacity: 0;
  min-width: 110px;
  transition: .15s ease all;
  pointer-events: none
}

.apexcharts-menu.apexcharts-menu-open {
  opacity: 1;
  pointer-events: all;
  transition: .15s ease all
}

.apexcharts-menu-item {
  padding: 6px 7px;
  font-size: 12px;
  cursor: pointer
}

.apexcharts-theme-light .apexcharts-menu-item:hover {
  background: #eee
}

.apexcharts-theme-dark .apexcharts-menu {
  background: rgba(0, 0, 0, .7);
  color: #fff
}

@media screen and (min-width:768px) {
  .apexcharts-canvas:hover .apexcharts-toolbar {
    opacity: 1
  }
}

.apexcharts-canvas .apexcharts-element-hidden,
.apexcharts-datalabel.apexcharts-element-hidden,
.apexcharts-hide .apexcharts-series-points {
  opacity: 0;
}

.apexcharts-hidden-element-shown {
  opacity: 1;
  transition: 0.25s ease all;
}

.apexcharts-datalabel,
.apexcharts-datalabel-label,
.apexcharts-datalabel-value,
.apexcharts-datalabels,
.apexcharts-pie-label {
  cursor: default;
  pointer-events: none
}

.apexcharts-pie-label-delay {
  opacity: 0;
  animation-name: opaque;
  animation-duration: .3s;
  animation-fill-mode: forwards;
  animation-timing-function: ease
}

.apexcharts-radialbar-label {
  cursor: pointer;
}

.apexcharts-annotation-rect,
.apexcharts-area-series .apexcharts-area,
.apexcharts-area-series .apexcharts-series-markers .apexcharts-marker.no-pointer-events,
.apexcharts-gridline,
.apexcharts-line,
.apexcharts-line-series .apexcharts-series-markers .apexcharts-marker.no-pointer-events,
.apexcharts-point-annotation-label,
.apexcharts-radar-series path:not(.apexcharts-marker),
.apexcharts-radar-series polygon,
.apexcharts-toolbar svg,
.apexcharts-tooltip .apexcharts-marker,
.apexcharts-xaxis-annotation-label,
.apexcharts-yaxis-annotation-label,
.apexcharts-zoom-rect {
  pointer-events: none
}

.apexcharts-tooltip-active .apexcharts-marker {
  transition: .15s ease all
}

.resize-triggers {
  animation: 1ms resizeanim;
  visibility: hidden;
  opacity: 0;
  height: 100%;
  width: 100%;
  overflow: hidden
}

.contract-trigger:before,
.resize-triggers,
.resize-triggers>div {
  content: " ";
  display: block;
  position: absolute;
  top: 0;
  left: 0
}

.resize-triggers>div {
  height: 100%;
  width: 100%;
  background: #eee;
  overflow: auto
}

.contract-trigger:before {
  overflow: hidden;
  width: 200%;
  height: 200%
}

.apexcharts-bar-goals-markers {
  pointer-events: none
}

.apexcharts-bar-shadows {
  pointer-events: none
}

.apexcharts-rangebar-goals-markers {
  pointer-events: none
}`;var d=((c=e.opts.chart)===null||c===void 0?void 0:c.nonce)||e.w.config.chart.nonce;d&&l.setAttribute("nonce",d),r?n.prepend(l):a.head.appendChild(l)}var h=e.create(e.w.config.series,{});if(!h)return t(e);e.mount(h).then(function(){typeof e.w.config.chart.events.mounted=="function"&&e.w.config.chart.events.mounted(e,e.w),e.events.fireEvent("mounted",[e,e.w]),t(h)}).catch(function(g){i(g)})}else i(new Error("Element not found"))})}},{key:"create",value:function(e,t){var i=this.w;new og(this).initModules();var o=this.w.globals;if(o.noData=!1,o.animationEnded=!1,this.responsive.checkResponsiveConfig(t),i.config.xaxis.convertedCatToNumeric&&new Qn(i.config).convertCatToNumericXaxis(i.config,this.ctx),this.el===null||(this.core.setupElements(),i.config.chart.type==="treemap"&&(i.config.grid.show=!1,i.config.yaxis[0].show=!1),o.svgWidth===0))return o.animationEnded=!0,null;var n=De.checkComboSeries(e,i.config.chart.type);o.comboCharts=n.comboCharts,o.comboBarCount=n.comboBarCount;var r=e.every(function(d){return d.data&&d.data.length===0});(e.length===0||r&&o.collapsedSeries.length<1)&&this.series.handleNoData(),this.events.setupEventHandlers(),this.data.parseData(e),this.theme.init(),new Zo(this).setGlobalMarkerSize(),this.formatters.setLabelFormatters(),this.titleSubtitle.draw(),o.noData&&o.collapsedSeries.length!==o.series.length&&!i.config.legend.showForSingleSeries||this.legend.init(),this.series.hasAllSeriesEqualX(),o.axisCharts&&(this.core.coreCalculations(),i.config.xaxis.type!=="category"&&this.formatters.setLabelFormatters(),this.ctx.toolbar.minX=i.globals.minX,this.ctx.toolbar.maxX=i.globals.maxX),this.formatters.heatmapLabelFormatters(),new De(this).getLargestMarkerSize(),this.dimensions.plotCoords();var a=this.core.xySettings();this.grid.createGridMask();var l=this.core.plotChartType(e,a),c=new Xo(this);return c.bringForward(),i.config.dataLabels.background.enabled&&c.dataLabelsBackground(),this.core.shiftGraphPosition(),{elGraph:l,xyRatios:a,dimensions:{plot:{left:i.globals.translateX,top:i.globals.translateY,width:i.globals.gridWidth,height:i.globals.gridHeight}}}}},{key:"mount",value:function(){var e=this,t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,i=this,o=i.w;return new Promise(function(n,r){if(i.el===null)return r(new Error("Not enough data to display or target element not found"));(t===null||o.globals.allSeriesCollapsed)&&i.series.handleNoData(),i.grid=new ug(i);var a,l,c=i.grid.drawGrid();if(i.annotations=new Ew(i),i.annotations.drawImageAnnos(),i.annotations.drawTextAnnos(),o.config.grid.position==="back"&&(c&&o.globals.dom.elGraphical.add(c.el),c!=null&&(a=c.elGridBorders)!==null&&a!==void 0&&a.node&&o.globals.dom.elGraphical.add(c.elGridBorders)),Array.isArray(t.elGraph))for(var d=0;d<t.elGraph.length;d++)o.globals.dom.elGraphical.add(t.elGraph[d]);else o.globals.dom.elGraphical.add(t.elGraph);o.config.grid.position==="front"&&(c&&o.globals.dom.elGraphical.add(c.el),c!=null&&(l=c.elGridBorders)!==null&&l!==void 0&&l.node&&o.globals.dom.elGraphical.add(c.elGridBorders)),o.config.xaxis.crosshairs.position==="front"&&i.crosshairs.drawXCrosshairs(),o.config.yaxis[0].crosshairs.position==="front"&&i.crosshairs.drawYCrosshairs(),o.config.chart.type!=="treemap"&&i.axes.drawAxis(o.config.chart.type,c);var h=new es(e.ctx,c),g=new wl(e.ctx,c);if(c!==null&&(h.xAxisLabelCorrections(c.xAxisTickWidth),g.setYAxisTextAlignments(),o.config.yaxis.map(function(p,b){o.globals.ignoreYAxisIndexes.indexOf(b)===-1&&g.yAxisTitleRotate(b,p.opposite)})),i.annotations.drawAxesAnnotations(),!o.globals.noData){if(o.config.tooltip.enabled&&!o.globals.noData&&i.w.globals.tooltip.drawTooltip(t.xyRatios),o.globals.axisCharts&&(o.globals.isXNumeric||o.config.xaxis.convertedCatToNumeric||o.globals.isRangeBar))(o.config.chart.zoom.enabled||o.config.chart.selection&&o.config.chart.selection.enabled||o.config.chart.pan&&o.config.chart.pan.enabled)&&i.zoomPanSelection.init({xyRatios:t.xyRatios});else{var m=o.config.chart.toolbar.tools;["zoom","zoomin","zoomout","selection","pan","reset"].forEach(function(p){m[p]=!1})}o.config.chart.toolbar.show&&!o.globals.allSeriesCollapsed&&i.toolbar.createToolbar()}o.globals.memory.methodsToExec.length>0&&o.globals.memory.methodsToExec.forEach(function(p){p.method(p.params,!1,p.context)}),o.globals.axisCharts||o.globals.noData||i.core.resizeNonAxisCharts(),n(i)})}},{key:"destroy",value:function(){var e,t;window.removeEventListener("resize",this.windowResizeHandler),this.el.parentNode,e=this.parentResizeHandler,(t=ul.get(e))&&(t.disconnect(),ul.delete(e));var i=this.w.config.chart.id;i&&Apex._chartInstances.forEach(function(o,n){o.id===T.escapeString(i)&&Apex._chartInstances.splice(n,1)}),new ng(this.ctx).clear({isUpdating:!1})}},{key:"updateOptions",value:function(e){var t=this,i=arguments.length>1&&arguments[1]!==void 0&&arguments[1],o=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2],n=!(arguments.length>3&&arguments[3]!==void 0)||arguments[3],r=!(arguments.length>4&&arguments[4]!==void 0)||arguments[4],a=this.w;return a.globals.selection=void 0,e.series&&(this.series.resetSeries(!1,!0,!1),e.series.length&&e.series[0].data&&(e.series=e.series.map(function(l,c){return t.updateHelpers._extendSeries(l,c)})),this.updateHelpers.revertDefaultAxisMinMax()),e.xaxis&&(e=this.updateHelpers.forceXAxisUpdate(e)),e.yaxis&&(e=this.updateHelpers.forceYAxisUpdate(e)),a.globals.collapsedSeriesIndices.length>0&&this.series.clearPreviousPaths(),e.theme&&(e=this.theme.updateThemeOptions(e)),this.updateHelpers._updateOptions(e,i,o,n,r)}},{key:"updateSeries",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1],i=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2];return this.series.resetSeries(!1),this.updateHelpers.revertDefaultAxisMinMax(),this.updateHelpers._updateSeries(e,t,i)}},{key:"appendSeries",value:function(e){var t=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1],i=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2],o=this.w.config.series.slice();return o.push(e),this.series.resetSeries(!1),this.updateHelpers.revertDefaultAxisMinMax(),this.updateHelpers._updateSeries(o,t,i)}},{key:"appendData",value:function(e){var t=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1],i=this;i.w.globals.dataChanged=!0,i.series.getPreviousPaths();for(var o=i.w.config.series.slice(),n=0;n<o.length;n++)if(e[n]!==null&&e[n]!==void 0)for(var r=0;r<e[n].data.length;r++)o[n].data.push(e[n].data[r]);return i.w.config.series=o,t&&(i.w.globals.initialSeries=T.clone(i.w.config.series)),this.update()}},{key:"update",value:function(e){var t=this;return new Promise(function(i,o){new ng(t.ctx).clear({isUpdating:!0});var n=t.create(t.w.config.series,e);if(!n)return i(t);t.mount(n).then(function(){typeof t.w.config.chart.events.updated=="function"&&t.w.config.chart.events.updated(t,t.w),t.events.fireEvent("updated",[t,t.w]),t.w.globals.isDirty=!0,i(t)}).catch(function(r){o(r)})})}},{key:"getSyncedCharts",value:function(){var e=this.getGroupedCharts(),t=[this];return e.length&&(t=[],e.forEach(function(i){t.push(i)})),t}},{key:"getGroupedCharts",value:function(){var e=this;return Apex._chartInstances.filter(function(t){if(t.group)return!0}).map(function(t){return e.w.config.chart.group===t.group?t.chart:e})}},{key:"toggleSeries",value:function(e){return this.series.toggleSeries(e)}},{key:"highlightSeriesOnLegendHover",value:function(e,t){return this.series.toggleSeriesOnHover(e,t)}},{key:"showSeries",value:function(e){this.series.showSeries(e)}},{key:"hideSeries",value:function(e){this.series.hideSeries(e)}},{key:"isSeriesHidden",value:function(e){this.series.isSeriesHidden(e)}},{key:"resetSeries",value:function(){var e=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0],t=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];this.series.resetSeries(e,t)}},{key:"addEventListener",value:function(e,t){this.events.addEventListener(e,t)}},{key:"removeEventListener",value:function(e,t){this.events.removeEventListener(e,t)}},{key:"addXaxisAnnotation",value:function(e){var t=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1],i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0,o=this;i&&(o=i),o.annotations.addXaxisAnnotationExternal(e,t,o)}},{key:"addYaxisAnnotation",value:function(e){var t=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1],i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0,o=this;i&&(o=i),o.annotations.addYaxisAnnotationExternal(e,t,o)}},{key:"addPointAnnotation",value:function(e){var t=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1],i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0,o=this;i&&(o=i),o.annotations.addPointAnnotationExternal(e,t,o)}},{key:"clearAnnotations",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:void 0,t=this;e&&(t=e),t.annotations.clearAnnotations(t)}},{key:"removeAnnotation",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0,i=this;t&&(i=t),i.annotations.removeAnnotation(i,e)}},{key:"getChartArea",value:function(){return this.w.globals.dom.baseEl.querySelector(".apexcharts-inner")}},{key:"getSeriesTotalXRange",value:function(e,t){return this.coreUtils.getSeriesTotalsXRange(e,t)}},{key:"getHighestValueInSeries",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return new fl(this.ctx).getMinYMaxY(e).highestY}},{key:"getLowestValueInSeries",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return new fl(this.ctx).getMinYMaxY(e).lowestY}},{key:"getSeriesTotal",value:function(){return this.w.globals.seriesTotals}},{key:"toggleDataPointSelection",value:function(e,t){return this.updateHelpers.toggleDataPointSelection(e,t)}},{key:"zoomX",value:function(e,t){this.ctx.toolbar.zoomUpdateOptions(e,t)}},{key:"setLocale",value:function(e){this.localization.setCurrentLocaleValues(e)}},{key:"dataURI",value:function(e){return new xr(this.ctx).dataURI(e)}},{key:"exportToCSV",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return new xr(this.ctx).exportToCSV(e)}},{key:"paper",value:function(){return this.w.globals.dom.Paper}},{key:"_parentResizeCallback",value:function(){this.w.globals.animationEnded&&this.w.config.chart.redrawOnParentResize&&this._windowResize()}},{key:"_windowResize",value:function(){var e=this;clearTimeout(this.w.globals.resizeTimer),this.w.globals.resizeTimer=window.setTimeout(function(){e.w.globals.resized=!0,e.w.globals.dataChanged=!1,e.ctx.update()},150)}},{key:"_windowResizeHandler",value:function(){var e=this.w.config.chart.redrawOnWindowResize;typeof e=="function"&&(e=e()),e&&this._windowResize()}}],[{key:"getChartByID",value:function(e){var t=T.escapeString(e);if(Apex._chartInstances){var i=Apex._chartInstances.filter(function(o){return o.id===t})[0];return i&&i.chart}}},{key:"initOnLoad",value:function(){for(var e=document.querySelectorAll("[data-apexcharts]"),t=0;t<e.length;t++)new s(e[t],JSON.parse(e[t].getAttribute("data-options"))).render()}},{key:"exec",value:function(e,t){var i=this.getChartByID(e);if(i){i.w.globals.isExecCalled=!0;var o=null;if(i.publicMethods.indexOf(t)!==-1){for(var n=arguments.length,r=new Array(n>2?n-2:0),a=2;a<n;a++)r[a-2]=arguments[a];o=i[t].apply(i,r)}return o}}},{key:"merge",value:function(e,t){return T.extend(e,t)}}]),s}();_r.exports=rk});var ip=Vo((VE,tp)=>{"use strict";tp.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}});var sp=Vo((BE,np)=>{"use strict";np.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}});var Zc=Vo((zE,ap)=>{"use strict";var zs=sp(),rp={};for(let s of Object.keys(zs))rp[zs[s]]=s;var Y={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};ap.exports=Y;for(let s of Object.keys(Y)){if(!("channels"in Y[s]))throw new Error("missing channels property: "+s);if(!("labels"in Y[s]))throw new Error("missing channel labels property: "+s);if(Y[s].labels.length!==Y[s].channels)throw new Error("channel and label counts mismatch: "+s);let{channels:e,labels:t}=Y[s];delete Y[s].channels,delete Y[s].labels,Object.defineProperty(Y[s],"channels",{value:e}),Object.defineProperty(Y[s],"labels",{value:t})}Y.rgb.hsl=function(s){let e=s[0]/255,t=s[1]/255,i=s[2]/255,o=Math.min(e,t,i),n=Math.max(e,t,i),r=n-o,a,l;n===o?a=0:e===n?a=(t-i)/r:t===n?a=2+(i-e)/r:i===n&&(a=4+(e-t)/r),a=Math.min(a*60,360),a<0&&(a+=360);let c=(o+n)/2;return n===o?l=0:c<=.5?l=r/(n+o):l=r/(2-n-o),[a,l*100,c*100]};Y.rgb.hsv=function(s){let e,t,i,o,n,r=s[0]/255,a=s[1]/255,l=s[2]/255,c=Math.max(r,a,l),d=c-Math.min(r,a,l),h=function(g){return(c-g)/6/d+1/2};return d===0?(o=0,n=0):(n=d/c,e=h(r),t=h(a),i=h(l),r===c?o=i-t:a===c?o=1/3+e-i:l===c&&(o=2/3+t-e),o<0?o+=1:o>1&&(o-=1)),[o*360,n*100,c*100]};Y.rgb.hwb=function(s){let e=s[0],t=s[1],i=s[2],o=Y.rgb.hsl(s)[0],n=1/255*Math.min(e,Math.min(t,i));return i=1-1/255*Math.max(e,Math.max(t,i)),[o,n*100,i*100]};Y.rgb.cmyk=function(s){let e=s[0]/255,t=s[1]/255,i=s[2]/255,o=Math.min(1-e,1-t,1-i),n=(1-e-o)/(1-o)||0,r=(1-t-o)/(1-o)||0,a=(1-i-o)/(1-o)||0;return[n*100,r*100,a*100,o*100]};function y1(s,e){return(s[0]-e[0])**2+(s[1]-e[1])**2+(s[2]-e[2])**2}Y.rgb.keyword=function(s){let e=rp[s];if(e)return e;let t=1/0,i;for(let o of Object.keys(zs)){let n=zs[o],r=y1(s,n);r<t&&(t=r,i=o)}return i};Y.keyword.rgb=function(s){return zs[s]};Y.rgb.xyz=function(s){let e=s[0]/255,t=s[1]/255,i=s[2]/255;e=e>.04045?((e+.055)/1.055)**2.4:e/12.92,t=t>.04045?((t+.055)/1.055)**2.4:t/12.92,i=i>.04045?((i+.055)/1.055)**2.4:i/12.92;let o=e*.4124+t*.3576+i*.1805,n=e*.2126+t*.7152+i*.0722,r=e*.0193+t*.1192+i*.9505;return[o*100,n*100,r*100]};Y.rgb.lab=function(s){let e=Y.rgb.xyz(s),t=e[0],i=e[1],o=e[2];t/=95.047,i/=100,o/=108.883,t=t>.008856?t**(1/3):7.787*t+16/116,i=i>.008856?i**(1/3):7.787*i+16/116,o=o>.008856?o**(1/3):7.787*o+16/116;let n=116*i-16,r=500*(t-i),a=200*(i-o);return[n,r,a]};Y.hsl.rgb=function(s){let e=s[0]/360,t=s[1]/100,i=s[2]/100,o,n,r;if(t===0)return r=i*255,[r,r,r];i<.5?o=i*(1+t):o=i+t-i*t;let a=2*i-o,l=[0,0,0];for(let c=0;c<3;c++)n=e+1/3*-(c-1),n<0&&n++,n>1&&n--,6*n<1?r=a+(o-a)*6*n:2*n<1?r=o:3*n<2?r=a+(o-a)*(2/3-n)*6:r=a,l[c]=r*255;return l};Y.hsl.hsv=function(s){let e=s[0],t=s[1]/100,i=s[2]/100,o=t,n=Math.max(i,.01);i*=2,t*=i<=1?i:2-i,o*=n<=1?n:2-n;let r=(i+t)/2,a=i===0?2*o/(n+o):2*t/(i+t);return[e,a*100,r*100]};Y.hsv.rgb=function(s){let e=s[0]/60,t=s[1]/100,i=s[2]/100,o=Math.floor(e)%6,n=e-Math.floor(e),r=255*i*(1-t),a=255*i*(1-t*n),l=255*i*(1-t*(1-n));switch(i*=255,o){case 0:return[i,l,r];case 1:return[a,i,r];case 2:return[r,i,l];case 3:return[r,a,i];case 4:return[l,r,i];case 5:return[i,r,a]}};Y.hsv.hsl=function(s){let e=s[0],t=s[1]/100,i=s[2]/100,o=Math.max(i,.01),n,r;r=(2-t)*i;let a=(2-t)*o;return n=t*o,n/=a<=1?a:2-a,n=n||0,r/=2,[e,n*100,r*100]};Y.hwb.rgb=function(s){let e=s[0]/360,t=s[1]/100,i=s[2]/100,o=t+i,n;o>1&&(t/=o,i/=o);let r=Math.floor(6*e),a=1-i;n=6*e-r,r&1&&(n=1-n);let l=t+n*(a-t),c,d,h;switch(r){default:case 6:case 0:c=a,d=l,h=t;break;case 1:c=l,d=a,h=t;break;case 2:c=t,d=a,h=l;break;case 3:c=t,d=l,h=a;break;case 4:c=l,d=t,h=a;break;case 5:c=a,d=t,h=l;break}return[c*255,d*255,h*255]};Y.cmyk.rgb=function(s){let e=s[0]/100,t=s[1]/100,i=s[2]/100,o=s[3]/100,n=1-Math.min(1,e*(1-o)+o),r=1-Math.min(1,t*(1-o)+o),a=1-Math.min(1,i*(1-o)+o);return[n*255,r*255,a*255]};Y.xyz.rgb=function(s){let e=s[0]/100,t=s[1]/100,i=s[2]/100,o,n,r;return o=e*3.2406+t*-1.5372+i*-.4986,n=e*-.9689+t*1.8758+i*.0415,r=e*.0557+t*-.204+i*1.057,o=o>.0031308?1.055*o**(1/2.4)-.055:o*12.92,n=n>.0031308?1.055*n**(1/2.4)-.055:n*12.92,r=r>.0031308?1.055*r**(1/2.4)-.055:r*12.92,o=Math.min(Math.max(0,o),1),n=Math.min(Math.max(0,n),1),r=Math.min(Math.max(0,r),1),[o*255,n*255,r*255]};Y.xyz.lab=function(s){let e=s[0],t=s[1],i=s[2];e/=95.047,t/=100,i/=108.883,e=e>.008856?e**(1/3):7.787*e+16/116,t=t>.008856?t**(1/3):7.787*t+16/116,i=i>.008856?i**(1/3):7.787*i+16/116;let o=116*t-16,n=500*(e-t),r=200*(t-i);return[o,n,r]};Y.lab.xyz=function(s){let e=s[0],t=s[1],i=s[2],o,n,r;n=(e+16)/116,o=t/500+n,r=n-i/200;let a=n**3,l=o**3,c=r**3;return n=a>.008856?a:(n-16/116)/7.787,o=l>.008856?l:(o-16/116)/7.787,r=c>.008856?c:(r-16/116)/7.787,o*=95.047,n*=100,r*=108.883,[o,n,r]};Y.lab.lch=function(s){let e=s[0],t=s[1],i=s[2],o;o=Math.atan2(i,t)*360/2/Math.PI,o<0&&(o+=360);let r=Math.sqrt(t*t+i*i);return[e,r,o]};Y.lch.lab=function(s){let e=s[0],t=s[1],o=s[2]/360*2*Math.PI,n=t*Math.cos(o),r=t*Math.sin(o);return[e,n,r]};Y.rgb.ansi16=function(s,e=null){let[t,i,o]=s,n=e===null?Y.rgb.hsv(s)[2]:e;if(n=Math.round(n/50),n===0)return 30;let r=30+(Math.round(o/255)<<2|Math.round(i/255)<<1|Math.round(t/255));return n===2&&(r+=60),r};Y.hsv.ansi16=function(s){return Y.rgb.ansi16(Y.hsv.rgb(s),s[2])};Y.rgb.ansi256=function(s){let e=s[0],t=s[1],i=s[2];return e===t&&t===i?e<8?16:e>248?231:Math.round((e-8)/247*24)+232:16+36*Math.round(e/255*5)+6*Math.round(t/255*5)+Math.round(i/255*5)};Y.ansi16.rgb=function(s){let e=s%10;if(e===0||e===7)return s>50&&(e+=3.5),e=e/10.5*255,[e,e,e];let t=(~~(s>50)+1)*.5,i=(e&1)*t*255,o=(e>>1&1)*t*255,n=(e>>2&1)*t*255;return[i,o,n]};Y.ansi256.rgb=function(s){if(s>=232){let n=(s-232)*10+8;return[n,n,n]}s-=16;let e,t=Math.floor(s/36)/5*255,i=Math.floor((e=s%36)/6)/5*255,o=e%6/5*255;return[t,i,o]};Y.rgb.hex=function(s){let t=(((Math.round(s[0])&255)<<16)+((Math.round(s[1])&255)<<8)+(Math.round(s[2])&255)).toString(16).toUpperCase();return"000000".substring(t.length)+t};Y.hex.rgb=function(s){let e=s.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!e)return[0,0,0];let t=e[0];e[0].length===3&&(t=t.split("").map(a=>a+a).join(""));let i=parseInt(t,16),o=i>>16&255,n=i>>8&255,r=i&255;return[o,n,r]};Y.rgb.hcg=function(s){let e=s[0]/255,t=s[1]/255,i=s[2]/255,o=Math.max(Math.max(e,t),i),n=Math.min(Math.min(e,t),i),r=o-n,a,l;return r<1?a=n/(1-r):a=0,r<=0?l=0:o===e?l=(t-i)/r%6:o===t?l=2+(i-e)/r:l=4+(e-t)/r,l/=6,l%=1,[l*360,r*100,a*100]};Y.hsl.hcg=function(s){let e=s[1]/100,t=s[2]/100,i=t<.5?2*e*t:2*e*(1-t),o=0;return i<1&&(o=(t-.5*i)/(1-i)),[s[0],i*100,o*100]};Y.hsv.hcg=function(s){let e=s[1]/100,t=s[2]/100,i=e*t,o=0;return i<1&&(o=(t-i)/(1-i)),[s[0],i*100,o*100]};Y.hcg.rgb=function(s){let e=s[0]/360,t=s[1]/100,i=s[2]/100;if(t===0)return[i*255,i*255,i*255];let o=[0,0,0],n=e%1*6,r=n%1,a=1-r,l=0;switch(Math.floor(n)){case 0:o[0]=1,o[1]=r,o[2]=0;break;case 1:o[0]=a,o[1]=1,o[2]=0;break;case 2:o[0]=0,o[1]=1,o[2]=r;break;case 3:o[0]=0,o[1]=a,o[2]=1;break;case 4:o[0]=r,o[1]=0,o[2]=1;break;default:o[0]=1,o[1]=0,o[2]=a}return l=(1-t)*i,[(t*o[0]+l)*255,(t*o[1]+l)*255,(t*o[2]+l)*255]};Y.hcg.hsv=function(s){let e=s[1]/100,t=s[2]/100,i=e+t*(1-e),o=0;return i>0&&(o=e/i),[s[0],o*100,i*100]};Y.hcg.hsl=function(s){let e=s[1]/100,i=s[2]/100*(1-e)+.5*e,o=0;return i>0&&i<.5?o=e/(2*i):i>=.5&&i<1&&(o=e/(2*(1-i))),[s[0],o*100,i*100]};Y.hcg.hwb=function(s){let e=s[1]/100,t=s[2]/100,i=e+t*(1-e);return[s[0],(i-e)*100,(1-i)*100]};Y.hwb.hcg=function(s){let e=s[1]/100,i=1-s[2]/100,o=i-e,n=0;return o<1&&(n=(i-o)/(1-o)),[s[0],o*100,n*100]};Y.apple.rgb=function(s){return[s[0]/65535*255,s[1]/65535*255,s[2]/65535*255]};Y.rgb.apple=function(s){return[s[0]/255*65535,s[1]/255*65535,s[2]/255*65535]};Y.gray.rgb=function(s){return[s[0]/100*255,s[0]/100*255,s[0]/100*255]};Y.gray.hsl=function(s){return[0,0,s[0]]};Y.gray.hsv=Y.gray.hsl;Y.gray.hwb=function(s){return[0,100,s[0]]};Y.gray.cmyk=function(s){return[0,0,0,s[0]]};Y.gray.lab=function(s){return[s[0],0,0]};Y.gray.hex=function(s){let e=Math.round(s[0]/100*255)&255,i=((e<<16)+(e<<8)+e).toString(16).toUpperCase();return"000000".substring(i.length)+i};Y.rgb.gray=function(s){return[(s[0]+s[1]+s[2])/3/255*100]}});var cp=Vo((FE,lp)=>{"use strict";var Kr=Zc();function _1(){let s={},e=Object.keys(Kr);for(let t=e.length,i=0;i<t;i++)s[e[i]]={distance:-1,parent:null};return s}function C1(s){let e=_1(),t=[s];for(e[s].distance=0;t.length;){let i=t.pop(),o=Object.keys(Kr[i]);for(let n=o.length,r=0;r<n;r++){let a=o[r],l=e[a];l.distance===-1&&(l.distance=e[i].distance+1,l.parent=i,t.unshift(a))}}return e}function A1(s,e){return function(t){return e(s(t))}}function S1(s,e){let t=[e[s].parent,s],i=Kr[e[s].parent][s],o=e[s].parent;for(;e[o].parent;)t.unshift(e[o].parent),i=A1(Kr[e[o].parent][o],i),o=e[o].parent;return i.conversion=t,i}lp.exports=function(s){let e=C1(s),t={},i=Object.keys(e);for(let o=i.length,n=0;n<o;n++){let r=i[n];e[r].parent!==null&&(t[r]=S1(r,e))}return t}});var hp=Vo((OE,dp)=>{"use strict";var Qc=Zc(),E1=cp(),vn={},T1=Object.keys(Qc);function I1(s){let e=function(...t){let i=t[0];return i==null?i:(i.length>1&&(t=i),s(t))};return"conversion"in s&&(e.conversion=s.conversion),e}function P1(s){let e=function(...t){let i=t[0];if(i==null)return i;i.length>1&&(t=i);let o=s(t);if(typeof o=="object")for(let n=o.length,r=0;r<n;r++)o[r]=Math.round(o[r]);return o};return"conversion"in s&&(e.conversion=s.conversion),e}T1.forEach(s=>{vn[s]={},Object.defineProperty(vn[s],"channels",{value:Qc[s].channels}),Object.defineProperty(vn[s],"labels",{value:Qc[s].labels});let e=E1(s);Object.keys(e).forEach(i=>{let o=e[i];vn[s][i]=P1(o),vn[s][i].raw=I1(o)})});dp.exports=vn});var kl=Xa(yg(),1),ak=["chart"],pS=(()=>{let e=class e{constructor(i){this.ngZone=i,this.autoUpdateSeries=!0,this.chartReady=new He}ngOnChanges(i){ku.schedule(()=>{if(this.autoUpdateSeries&&Object.keys(i).filter(o=>o!=="series").length===0){this.updateSeries(this.series,!0);return}this.createElement()})}ngOnDestroy(){this.chartObj&&this.chartObj.destroy()}createElement(){let i={};this.annotations&&(i.annotations=this.annotations),this.chart&&(i.chart=this.chart),this.colors&&(i.colors=this.colors),this.dataLabels&&(i.dataLabels=this.dataLabels),this.series&&(i.series=this.series),this.stroke&&(i.stroke=this.stroke),this.labels&&(i.labels=this.labels),this.legend&&(i.legend=this.legend),this.fill&&(i.fill=this.fill),this.tooltip&&(i.tooltip=this.tooltip),this.plotOptions&&(i.plotOptions=this.plotOptions),this.responsive&&(i.responsive=this.responsive),this.markers&&(i.markers=this.markers),this.noData&&(i.noData=this.noData),this.xaxis&&(i.xaxis=this.xaxis),this.yaxis&&(i.yaxis=this.yaxis),this.forecastDataPoints&&(i.forecastDataPoints=this.forecastDataPoints),this.grid&&(i.grid=this.grid),this.states&&(i.states=this.states),this.title&&(i.title=this.title),this.subtitle&&(i.subtitle=this.subtitle),this.theme&&(i.theme=this.theme),this.chartObj&&this.chartObj.destroy(),this.ngZone.runOutsideAngular(()=>{this.chartObj=new kl.default(this.chartElement.nativeElement,i)}),this.render(),this.chartReady.emit({chartObj:this.chartObj})}render(){return this.ngZone.runOutsideAngular(()=>this.chartObj.render())}updateOptions(i,o,n,r){return this.ngZone.runOutsideAngular(()=>this.chartObj.updateOptions(i,o,n,r))}updateSeries(i,o){return this.ngZone.runOutsideAngular(()=>this.chartObj.updateSeries(i,o))}appendSeries(i,o){this.ngZone.runOutsideAngular(()=>this.chartObj.appendSeries(i,o))}appendData(i){this.ngZone.runOutsideAngular(()=>this.chartObj.appendData(i))}toggleSeries(i){return this.ngZone.runOutsideAngular(()=>this.chartObj.toggleSeries(i))}showSeries(i){this.ngZone.runOutsideAngular(()=>this.chartObj.showSeries(i))}hideSeries(i){this.ngZone.runOutsideAngular(()=>this.chartObj.hideSeries(i))}resetSeries(){this.ngZone.runOutsideAngular(()=>this.chartObj.resetSeries())}zoomX(i,o){this.ngZone.runOutsideAngular(()=>this.chartObj.zoomX(i,o))}toggleDataPointSelection(i,o){this.ngZone.runOutsideAngular(()=>this.chartObj.toggleDataPointSelection(i,o))}destroy(){this.chartObj.destroy()}setLocale(i){this.ngZone.runOutsideAngular(()=>this.chartObj.setLocale(i))}paper(){this.ngZone.runOutsideAngular(()=>this.chartObj.paper())}addXaxisAnnotation(i,o,n){this.ngZone.runOutsideAngular(()=>this.chartObj.addXaxisAnnotation(i,o,n))}addYaxisAnnotation(i,o,n){this.ngZone.runOutsideAngular(()=>this.chartObj.addYaxisAnnotation(i,o,n))}addPointAnnotation(i,o,n){this.ngZone.runOutsideAngular(()=>this.chartObj.addPointAnnotation(i,o,n))}removeAnnotation(i,o){this.ngZone.runOutsideAngular(()=>this.chartObj.removeAnnotation(i,o))}clearAnnotations(i){this.ngZone.runOutsideAngular(()=>this.chartObj.clearAnnotations(i))}dataURI(i){return this.chartObj.dataURI(i)}};e.\u0275fac=function(o){return new(o||e)(ce(eo))},e.\u0275cmp=fi({type:e,selectors:[["apx-chart"]],viewQuery:function(o,n){if(o&1&&Vt(ak,7),o&2){let r;st(r=rt())&&(n.chartElement=r.first)}},inputs:{chart:"chart",annotations:"annotations",colors:"colors",dataLabels:"dataLabels",series:"series",stroke:"stroke",labels:"labels",legend:"legend",markers:"markers",noData:"noData",fill:"fill",tooltip:"tooltip",plotOptions:"plotOptions",responsive:"responsive",xaxis:"xaxis",yaxis:"yaxis",forecastDataPoints:"forecastDataPoints",grid:"grid",states:"states",title:"title",subtitle:"subtitle",theme:"theme",autoUpdateSeries:"autoUpdateSeries"},outputs:{chartReady:"chartReady"},features:[Ho],decls:2,vars:0,consts:[["chart",""]],template:function(o,n){o&1&&jo(0,"div",null,0)},encapsulation:2,changeDetection:0});let s=e;return s})();window.ApexCharts=kl.default;var bS=(()=>{let e=class e{};e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=Oo({type:e}),e.\u0275inj=zo({});let s=e;return s})();var _l=["*"];function dk(s,e){s&1&&hr(0)}var hk=["tabListContainer"],uk=["tabList"],gk=["tabListInner"],mk=["nextPaginator"],fk=["previousPaginator"],pk=s=>({animationDuration:s}),bk=(s,e)=>({value:s,params:e});function wk(s,e){}var kk=["tabBodyWrapper"],vk=["tabHeader"];function xk(s,e){}function yk(s,e){if(s&1&&Vi(0,xk,0,0,"ng-template",12),s&2){let t=vi().$implicit;bi("cdkPortalOutlet",t.templateLabel)}}function _k(s,e){if(s&1&&Lu(0),s&2){let t=vi().$implicit;Ru(t.textLabel)}}function Ck(s,e){if(s&1){let t=Uo();Nt(0,"div",7,2),ki("click",function(){let o=Ke(t),n=o.$implicit,r=o.$index,a=vi(),l=el(1);return Ze(a._handleClick(n,l,r))})("cdkFocusChange",function(o){let n=Ke(t).$index,r=vi();return Ze(r._tabFocusChanged(o,n))}),jo(2,"span",8)(3,"div",9),Nt(4,"span",10)(5,"span",11),Vi(6,yk,1,1,null,12)(7,_k,1,1),wi()()()}if(s&2){let t=e.$implicit,i=e.$index,o=el(1),n=vi();cr(t.labelClass),ii("mdc-tab--active",n.selectedIndex===i),bi("id",n._getTabLabelId(i))("disabled",t.disabled)("fitInkBarToContent",n.fitInkBarToContent),lr("tabIndex",n._getTabIndex(i))("aria-posinset",i+1)("aria-setsize",n._tabs.length)("aria-controls",n._getTabContentId(i))("aria-selected",n.selectedIndex===i)("aria-label",t.ariaLabel||null)("aria-labelledby",!t.ariaLabel&&t.ariaLabelledby?t.ariaLabelledby:null),pi(3),bi("matRippleTrigger",o)("matRippleDisabled",t.disabled||n.disableRipple),pi(3),Ka(6,t.templateLabel?6:7)}}function Ak(s,e){s&1&&hr(0)}function Sk(s,e){if(s&1){let t=Uo();Nt(0,"mat-tab-body",13),ki("_onCentered",function(){Ke(t);let o=vi();return Ze(o._removeTabBodyWrapperHeight())})("_onCentering",function(o){Ke(t);let n=vi();return Ze(n._setTabBodyWrapperHeight(o))}),wi()}if(s&2){let t=e.$implicit,i=e.$index,o=vi();cr(t.bodyClass),ii("mat-mdc-tab-body-active",o.selectedIndex===i),bi("id",o._getTabContentId(i))("content",t.content)("position",t.position)("origin",t.origin)("animationDuration",o.animationDuration)("preserveContent",o.preserveContent),lr("tabindex",o.contentTabIndex!=null&&o.selectedIndex===i?o.contentTabIndex:null)("aria-labelledby",o._getTabLabelId(i))("aria-hidden",o.selectedIndex!==i)}}var Ek=new Fo("MatTabContent"),Tk=(()=>{let e=class e{constructor(i){this.template=i}};e.\u0275fac=function(o){return new(o||e)(ce(Wo))},e.\u0275dir=Ji({type:e,selectors:[["","matTabContent",""]],standalone:!0,features:[io([{provide:Ek,useExisting:e}])]});let s=e;return s})(),Ik=new Fo("MatTabLabel"),Sg=new Fo("MAT_TAB"),Pk=(()=>{let e=class e extends Qu{constructor(i,o,n){super(i,o),this._closestTab=n}};e.\u0275fac=function(o){return new(o||e)(ce(Wo),ce(ar),ce(Sg,8))},e.\u0275dir=Ji({type:e,selectors:[["","mat-tab-label",""],["","matTabLabel",""]],standalone:!0,features:[io([{provide:Ik,useExisting:e}]),Un]});let s=e;return s})(),Eg=new Fo("MAT_TAB_GROUP"),Mk=(()=>{let e=class e{get templateLabel(){return this._templateLabel}set templateLabel(i){this._setTemplateLabelInput(i)}get content(){return this._contentPortal}constructor(i,o){this._viewContainerRef=i,this._closestTabGroup=o,this.disabled=!1,this._explicitContent=void 0,this.textLabel="",this._contentPortal=null,this._stateChanges=new jn,this.position=null,this.origin=null,this.isActive=!1}ngOnChanges(i){(i.hasOwnProperty("textLabel")||i.hasOwnProperty("disabled"))&&this._stateChanges.next()}ngOnDestroy(){this._stateChanges.complete()}ngOnInit(){this._contentPortal=new Zu(this._explicitContent||this._implicitContent,this._viewContainerRef)}_setTemplateLabelInput(i){i&&i._closestTab===this&&(this._templateLabel=i)}};e.\u0275fac=function(o){return new(o||e)(ce(ar),ce(Eg,8))},e.\u0275cmp=fi({type:e,selectors:[["mat-tab"]],contentQueries:function(o,n,r){if(o&1&&(Gn(r,Pk,5),Gn(r,Tk,7,Wo)),o&2){let a;st(a=rt())&&(n.templateLabel=a.first),st(a=rt())&&(n._explicitContent=a.first)}},viewQuery:function(o,n){if(o&1&&Vt(Wo,7),o&2){let r;st(r=rt())&&(n._implicitContent=r.first)}},hostAttrs:["hidden",""],inputs:{disabled:[Oe.HasDecoratorInputTransform,"disabled","disabled",Dt],textLabel:[Oe.None,"label","textLabel"],ariaLabel:[Oe.None,"aria-label","ariaLabel"],ariaLabelledby:[Oe.None,"aria-labelledby","ariaLabelledby"],labelClass:"labelClass",bodyClass:"bodyClass"},exportAs:["matTab"],standalone:!0,features:[io([{provide:Sg,useExisting:e}]),to,Ho,$n],ngContentSelectors:_l,decls:1,vars:0,template:function(o,n){o&1&&(dr(),Vi(0,dk,1,0,"ng-template"))},encapsulation:2});let s=e;return s})(),vl="mdc-tab-indicator--active",Cg="mdc-tab-indicator--no-transition",xl=class{constructor(e){this._items=e}hide(){this._items.forEach(e=>e.deactivateInkBar())}alignToElement(e){let t=this._items.find(o=>o.elementRef.nativeElement===e),i=this._currentItem;if(t!==i&&(i?.deactivateInkBar(),t)){let o=i?.elementRef.nativeElement.getBoundingClientRect?.();t.activateInkBar(o),this._currentItem=t}}},Lk=(()=>{let e=class e{constructor(){this._elementRef=qa(ti),this._fitToContent=!1}get fitInkBarToContent(){return this._fitToContent}set fitInkBarToContent(i){this._fitToContent!==i&&(this._fitToContent=i,this._inkBarElement&&this._appendInkBarElement())}activateInkBar(i){let o=this._elementRef.nativeElement;if(!i||!o.getBoundingClientRect||!this._inkBarContentElement){o.classList.add(vl);return}let n=o.getBoundingClientRect(),r=i.width/n.width,a=i.left-n.left;o.classList.add(Cg),this._inkBarContentElement.style.setProperty("transform",`translateX(${a}px) scaleX(${r})`),o.getBoundingClientRect(),o.classList.remove(Cg),o.classList.add(vl),this._inkBarContentElement.style.setProperty("transform","")}deactivateInkBar(){this._elementRef.nativeElement.classList.remove(vl)}ngOnInit(){this._createInkBarElement()}ngOnDestroy(){this._inkBarElement?.remove(),this._inkBarElement=this._inkBarContentElement=null}_createInkBarElement(){let i=this._elementRef.nativeElement.ownerDocument||document,o=this._inkBarElement=i.createElement("span"),n=this._inkBarContentElement=i.createElement("span");o.className="mdc-tab-indicator",n.className="mdc-tab-indicator__content mdc-tab-indicator__content--underline",o.appendChild(this._inkBarContentElement),this._appendInkBarElement()}_appendInkBarElement(){this._inkBarElement;let i=this._fitToContent?this._elementRef.nativeElement.querySelector(".mdc-tab__content"):this._elementRef.nativeElement;i.appendChild(this._inkBarElement)}};e.\u0275fac=function(o){return new(o||e)},e.\u0275dir=Ji({type:e,inputs:{fitInkBarToContent:[Oe.HasDecoratorInputTransform,"fitInkBarToContent","fitInkBarToContent",Dt]},features:[to]});let s=e;return s})();var Tg=(()=>{let e=class e extends Lk{constructor(i){super(),this.elementRef=i,this.disabled=!1}focus(){this.elementRef.nativeElement.focus()}getOffsetLeft(){return this.elementRef.nativeElement.offsetLeft}getOffsetWidth(){return this.elementRef.nativeElement.offsetWidth}};e.\u0275fac=function(o){return new(o||e)(ce(ti))},e.\u0275dir=Ji({type:e,selectors:[["","matTabLabelWrapper",""]],hostVars:3,hostBindings:function(o,n){o&2&&(lr("aria-disabled",!!n.disabled),ii("mat-mdc-tab-disabled",n.disabled))},inputs:{disabled:[Oe.HasDecoratorInputTransform,"disabled","disabled",Dt]},standalone:!0,features:[to,Un]});let s=e;return s})(),Ag=Hu({passive:!0}),Rk=650,Nk=100,Vk=(()=>{let e=class e{get selectedIndex(){return this._selectedIndex}set selectedIndex(i){let o=isNaN(i)?0:i;this._selectedIndex!=o&&(this._selectedIndexChanged=!0,this._selectedIndex=o,this._keyManager&&this._keyManager.updateActiveItem(o))}constructor(i,o,n,r,a,l,c){this._elementRef=i,this._changeDetectorRef=o,this._viewportRuler=n,this._dir=r,this._ngZone=a,this._platform=l,this._animationMode=c,this._scrollDistance=0,this._selectedIndexChanged=!1,this._destroyed=new jn,this._showPaginationControls=!1,this._disableScrollAfter=!0,this._disableScrollBefore=!0,this._stopScrolling=new jn,this.disablePagination=!1,this._selectedIndex=0,this.selectFocusedIndex=new He,this.indexFocused=new He,a.runOutsideAngular(()=>{ir(i.nativeElement,"mouseleave").pipe(Bo(this._destroyed)).subscribe(()=>{this._stopInterval()})})}ngAfterViewInit(){ir(this._previousPaginator.nativeElement,"touchstart",Ag).pipe(Bo(this._destroyed)).subscribe(()=>{this._handlePaginatorPress("before")}),ir(this._nextPaginator.nativeElement,"touchstart",Ag).pipe(Bo(this._destroyed)).subscribe(()=>{this._handlePaginatorPress("after")})}ngAfterContentInit(){let i=this._dir?this._dir.change:xu("ltr"),o=this._viewportRuler.change(150),n=()=>{this.updatePagination(),this._alignInkBarToSelectedTab()};this._keyManager=new Uu(this._items).withHorizontalOrientation(this._getLayoutDirection()).withHomeAndEnd().withWrap().skipPredicate(()=>!1),this._keyManager.updateActiveItem(this._selectedIndex),this._ngZone.onStable.pipe(Cu(1)).subscribe(n),or(i,o,this._items.changes,this._itemsResized()).pipe(Bo(this._destroyed)).subscribe(()=>{this._ngZone.run(()=>{Promise.resolve().then(()=>{this._scrollDistance=Math.max(0,Math.min(this._getMaxScrollDistance(),this._scrollDistance)),n()})}),this._keyManager.withHorizontalOrientation(this._getLayoutDirection())}),this._keyManager.change.subscribe(r=>{this.indexFocused.emit(r),this._setTabFocus(r)})}_itemsResized(){return typeof ResizeObserver!="function"?vu:this._items.changes.pipe(nr(this._items),Tu(i=>new wu(o=>this._ngZone.runOutsideAngular(()=>{let n=new ResizeObserver(r=>o.next(r));return i.forEach(r=>n.observe(r.elementRef.nativeElement)),()=>{n.disconnect()}}))),Eu(1),_u(i=>i.some(o=>o.contentRect.width>0&&o.contentRect.height>0)))}ngAfterContentChecked(){this._tabLabelCount!=this._items.length&&(this.updatePagination(),this._tabLabelCount=this._items.length,this._changeDetectorRef.markForCheck()),this._selectedIndexChanged&&(this._scrollToLabel(this._selectedIndex),this._checkScrollingControls(),this._alignInkBarToSelectedTab(),this._selectedIndexChanged=!1,this._changeDetectorRef.markForCheck()),this._scrollDistanceChanged&&(this._updateTabScrollPosition(),this._scrollDistanceChanged=!1,this._changeDetectorRef.markForCheck())}ngOnDestroy(){this._keyManager?.destroy(),this._destroyed.next(),this._destroyed.complete(),this._stopScrolling.complete()}_handleKeydown(i){if(!ju(i))switch(i.keyCode){case 13:case 32:if(this.focusIndex!==this.selectedIndex){let o=this._items.get(this.focusIndex);o&&!o.disabled&&(this.selectFocusedIndex.emit(this.focusIndex),this._itemSelected(i))}break;default:this._keyManager.onKeydown(i)}}_onContentChanges(){let i=this._elementRef.nativeElement.textContent;i!==this._currentTextContent&&(this._currentTextContent=i||"",this._ngZone.run(()=>{this.updatePagination(),this._alignInkBarToSelectedTab(),this._changeDetectorRef.markForCheck()}))}updatePagination(){this._checkPaginationEnabled(),this._checkScrollingControls(),this._updateTabScrollPosition()}get focusIndex(){return this._keyManager?this._keyManager.activeItemIndex:0}set focusIndex(i){!this._isValidIndex(i)||this.focusIndex===i||!this._keyManager||this._keyManager.setActiveItem(i)}_isValidIndex(i){return this._items?!!this._items.toArray()[i]:!0}_setTabFocus(i){if(this._showPaginationControls&&this._scrollToLabel(i),this._items&&this._items.length){this._items.toArray()[i].focus();let o=this._tabListContainer.nativeElement;this._getLayoutDirection()=="ltr"?o.scrollLeft=0:o.scrollLeft=o.scrollWidth-o.offsetWidth}}_getLayoutDirection(){return this._dir&&this._dir.value==="rtl"?"rtl":"ltr"}_updateTabScrollPosition(){if(this.disablePagination)return;let i=this.scrollDistance,o=this._getLayoutDirection()==="ltr"?-i:i;this._tabList.nativeElement.style.transform=`translateX(${Math.round(o)}px)`,(this._platform.TRIDENT||this._platform.EDGE)&&(this._tabListContainer.nativeElement.scrollLeft=0)}get scrollDistance(){return this._scrollDistance}set scrollDistance(i){this._scrollTo(i)}_scrollHeader(i){let o=this._tabListContainer.nativeElement.offsetWidth,n=(i=="before"?-1:1)*o/3;return this._scrollTo(this._scrollDistance+n)}_handlePaginatorClick(i){this._stopInterval(),this._scrollHeader(i)}_scrollToLabel(i){if(this.disablePagination)return;let o=this._items?this._items.toArray()[i]:null;if(!o)return;let n=this._tabListContainer.nativeElement.offsetWidth,{offsetLeft:r,offsetWidth:a}=o.elementRef.nativeElement,l,c;this._getLayoutDirection()=="ltr"?(l=r,c=l+a):(c=this._tabListInner.nativeElement.offsetWidth-r,l=c-a);let d=this.scrollDistance,h=this.scrollDistance+n;l<d?this.scrollDistance-=d-l:c>h&&(this.scrollDistance+=Math.min(c-h,l-d))}_checkPaginationEnabled(){if(this.disablePagination)this._showPaginationControls=!1;else{let i=this._tabListInner.nativeElement.scrollWidth>this._elementRef.nativeElement.offsetWidth;i||(this.scrollDistance=0),i!==this._showPaginationControls&&this._changeDetectorRef.markForCheck(),this._showPaginationControls=i}}_checkScrollingControls(){this.disablePagination?this._disableScrollAfter=this._disableScrollBefore=!0:(this._disableScrollBefore=this.scrollDistance==0,this._disableScrollAfter=this.scrollDistance==this._getMaxScrollDistance(),this._changeDetectorRef.markForCheck())}_getMaxScrollDistance(){let i=this._tabListInner.nativeElement.scrollWidth,o=this._tabListContainer.nativeElement.offsetWidth;return i-o||0}_alignInkBarToSelectedTab(){let i=this._items&&this._items.length?this._items.toArray()[this.selectedIndex]:null,o=i?i.elementRef.nativeElement:null;o?this._inkBar.alignToElement(o):this._inkBar.hide()}_stopInterval(){this._stopScrolling.next()}_handlePaginatorPress(i,o){o&&o.button!=null&&o.button!==0||(this._stopInterval(),yu(Rk,Nk).pipe(Bo(or(this._stopScrolling,this._destroyed))).subscribe(()=>{let{maxScrollDistance:n,distance:r}=this._scrollHeader(i);(r===0||r>=n)&&this._stopInterval()}))}_scrollTo(i){if(this.disablePagination)return{maxScrollDistance:0,distance:0};let o=this._getMaxScrollDistance();return this._scrollDistance=Math.max(0,Math.min(o,i)),this._scrollDistanceChanged=!0,this._checkScrollingControls(),{maxScrollDistance:o,distance:this._scrollDistance}}};e.\u0275fac=function(o){return new(o||e)(ce(ti),ce(Yn),ce(rl),ce(pr,8),ce(eo),ce(Xn),ce(rr,8))},e.\u0275dir=Ji({type:e,inputs:{disablePagination:[Oe.HasDecoratorInputTransform,"disablePagination","disablePagination",Dt],selectedIndex:[Oe.HasDecoratorInputTransform,"selectedIndex","selectedIndex",ur]},outputs:{selectFocusedIndex:"selectFocusedIndex",indexFocused:"indexFocused"},features:[to]});let s=e;return s})(),Dk=(()=>{let e=class e extends Vk{constructor(i,o,n,r,a,l,c){super(i,o,n,r,a,l,c),this.disableRipple=!1}ngAfterContentInit(){this._inkBar=new xl(this._items),super.ngAfterContentInit()}_itemSelected(i){i.preventDefault()}};e.\u0275fac=function(o){return new(o||e)(ce(ti),ce(Yn),ce(rl),ce(pr,8),ce(eo),ce(Xn),ce(rr,8))},e.\u0275cmp=fi({type:e,selectors:[["mat-tab-header"]],contentQueries:function(o,n,r){if(o&1&&Gn(r,Tg,4),o&2){let a;st(a=rt())&&(n._items=a)}},viewQuery:function(o,n){if(o&1&&(Vt(hk,7),Vt(uk,7),Vt(gk,7),Vt(mk,5),Vt(fk,5)),o&2){let r;st(r=rt())&&(n._tabListContainer=r.first),st(r=rt())&&(n._tabList=r.first),st(r=rt())&&(n._tabListInner=r.first),st(r=rt())&&(n._nextPaginator=r.first),st(r=rt())&&(n._previousPaginator=r.first)}},hostAttrs:[1,"mat-mdc-tab-header"],hostVars:4,hostBindings:function(o,n){o&2&&ii("mat-mdc-tab-header-pagination-controls-enabled",n._showPaginationControls)("mat-mdc-tab-header-rtl",n._getLayoutDirection()=="rtl")},inputs:{disableRipple:[Oe.HasDecoratorInputTransform,"disableRipple","disableRipple",Dt]},standalone:!0,features:[to,Un,$n],ngContentSelectors:_l,decls:13,vars:10,consts:[["previousPaginator",""],["tabListContainer",""],["tabList",""],["tabListInner",""],["nextPaginator",""],["aria-hidden","true","type","button","mat-ripple","","tabindex","-1",1,"mat-mdc-tab-header-pagination","mat-mdc-tab-header-pagination-before",3,"click","mousedown","touchend","matRippleDisabled","disabled"],[1,"mat-mdc-tab-header-pagination-chevron"],[1,"mat-mdc-tab-label-container",3,"keydown"],["role","tablist",1,"mat-mdc-tab-list",3,"cdkObserveContent"],[1,"mat-mdc-tab-labels"],["aria-hidden","true","type","button","mat-ripple","","tabindex","-1",1,"mat-mdc-tab-header-pagination","mat-mdc-tab-header-pagination-after",3,"mousedown","click","touchend","matRippleDisabled","disabled"]],template:function(o,n){if(o&1){let r=Uo();dr(),Nt(0,"button",5,0),ki("click",function(){return Ke(r),Ze(n._handlePaginatorClick("before"))})("mousedown",function(l){return Ke(r),Ze(n._handlePaginatorPress("before",l))})("touchend",function(){return Ke(r),Ze(n._stopInterval())}),jo(2,"div",6),wi(),Nt(3,"div",7,1),ki("keydown",function(l){return Ke(r),Ze(n._handleKeydown(l))}),Nt(5,"div",8,2),ki("cdkObserveContent",function(){return Ke(r),Ze(n._onContentChanges())}),Nt(7,"div",9,3),hr(9),wi()()(),Nt(10,"button",10,4),ki("mousedown",function(l){return Ke(r),Ze(n._handlePaginatorPress("after",l))})("click",function(){return Ke(r),Ze(n._handlePaginatorClick("after"))})("touchend",function(){return Ke(r),Ze(n._stopInterval())}),jo(12,"div",6),wi()}o&2&&(ii("mat-mdc-tab-header-pagination-disabled",n._disableScrollBefore),bi("matRippleDisabled",n._disableScrollBefore||n.disableRipple)("disabled",n._disableScrollBefore||null),pi(3),ii("_mat-animation-noopable",n._animationMode==="NoopAnimations"),pi(7),ii("mat-mdc-tab-header-pagination-disabled",n._disableScrollAfter),bi("matRippleDisabled",n._disableScrollAfter||n.disableRipple)("disabled",n._disableScrollAfter||null))},dependencies:[il,Wu],styles:[".mat-mdc-tab-header{display:flex;overflow:hidden;position:relative;flex-shrink:0}.mdc-tab-indicator .mdc-tab-indicator__content{transition-duration:var(--mat-tab-animation-duration, 250ms)}.mat-mdc-tab-header-pagination{-webkit-user-select:none;user-select:none;position:relative;display:none;justify-content:center;align-items:center;min-width:32px;cursor:pointer;z-index:2;-webkit-tap-highlight-color:rgba(0,0,0,0);touch-action:none;box-sizing:content-box;background:none;border:none;outline:0;padding:0}.mat-mdc-tab-header-pagination::-moz-focus-inner{border:0}.mat-mdc-tab-header-pagination .mat-ripple-element{opacity:.12;background-color:var(--mat-tab-header-inactive-ripple-color)}.mat-mdc-tab-header-pagination-controls-enabled .mat-mdc-tab-header-pagination{display:flex}.mat-mdc-tab-header-pagination-before,.mat-mdc-tab-header-rtl .mat-mdc-tab-header-pagination-after{padding-left:4px}.mat-mdc-tab-header-pagination-before .mat-mdc-tab-header-pagination-chevron,.mat-mdc-tab-header-rtl .mat-mdc-tab-header-pagination-after .mat-mdc-tab-header-pagination-chevron{transform:rotate(-135deg)}.mat-mdc-tab-header-rtl .mat-mdc-tab-header-pagination-before,.mat-mdc-tab-header-pagination-after{padding-right:4px}.mat-mdc-tab-header-rtl .mat-mdc-tab-header-pagination-before .mat-mdc-tab-header-pagination-chevron,.mat-mdc-tab-header-pagination-after .mat-mdc-tab-header-pagination-chevron{transform:rotate(45deg)}.mat-mdc-tab-header-pagination-chevron{border-style:solid;border-width:2px 2px 0 0;height:8px;width:8px;border-color:var(--mat-tab-header-pagination-icon-color)}.mat-mdc-tab-header-pagination-disabled{box-shadow:none;cursor:default;pointer-events:none}.mat-mdc-tab-header-pagination-disabled .mat-mdc-tab-header-pagination-chevron{opacity:.4}.mat-mdc-tab-list{flex-grow:1;position:relative;transition:transform 500ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable .mat-mdc-tab-list{transition:none}._mat-animation-noopable span.mdc-tab-indicator__content,._mat-animation-noopable span.mdc-tab__text-label{transition:none}.mat-mdc-tab-label-container{display:flex;flex-grow:1;overflow:hidden;z-index:1;border-bottom-style:solid;border-bottom-width:var(--mat-tab-header-divider-height);border-bottom-color:var(--mat-tab-header-divider-color)}.mat-mdc-tab-group-inverted-header .mat-mdc-tab-label-container{border-bottom:none;border-top-style:solid;border-top-width:var(--mat-tab-header-divider-height);border-top-color:var(--mat-tab-header-divider-color)}.mat-mdc-tab-labels{display:flex;flex:1 0 auto}[mat-align-tabs=center]>.mat-mdc-tab-header .mat-mdc-tab-labels{justify-content:center}[mat-align-tabs=end]>.mat-mdc-tab-header .mat-mdc-tab-labels{justify-content:flex-end}.mat-mdc-tab::before{margin:5px}.cdk-high-contrast-active .mat-mdc-tab[aria-disabled=true]{color:GrayText}"],encapsulation:2});let s=e;return s})(),Bk=new Fo("MAT_TABS_CONFIG"),zk={translateTab:zu("translateTab",[mr("center, void, left-origin-center, right-origin-center",Go({transform:"none"})),mr("left",Go({transform:"translate3d(-100%, 0, 0)",minHeight:"1px",visibility:"hidden"})),mr("right",Go({transform:"translate3d(100%, 0, 0)",minHeight:"1px",visibility:"hidden"})),fr("* => left, * => right, left => center, right => center",gr("{{animationDuration}} cubic-bezier(0.35, 0, 0.25, 1)")),fr("void => left-origin-center",[Go({transform:"translate3d(-100%, 0, 0)",visibility:"hidden"}),gr("{{animationDuration}} cubic-bezier(0.35, 0, 0.25, 1)")]),fr("void => right-origin-center",[Go({transform:"translate3d(100%, 0, 0)",visibility:"hidden"}),gr("{{animationDuration}} cubic-bezier(0.35, 0, 0.25, 1)")])])},Fk=(()=>{let e=class e extends wr{constructor(i,o,n,r){super(i,o,r),this._host=n,this._centeringSub=Do.EMPTY,this._leavingSub=Do.EMPTY}ngOnInit(){super.ngOnInit(),this._centeringSub=this._host._beforeCentering.pipe(nr(this._host._isCenterPosition(this._host._position))).subscribe(i=>{i&&!this.hasAttached()&&this.attach(this._host._content)}),this._leavingSub=this._host._afterLeavingCenter.subscribe(()=>{this._host.preserveContent||this.detach()})}ngOnDestroy(){super.ngOnDestroy(),this._centeringSub.unsubscribe(),this._leavingSub.unsubscribe()}};e.\u0275fac=function(o){return new(o||e)(ce(Pu),ce(ar),ce(sr(()=>Ig)),ce(Du))},e.\u0275dir=Ji({type:e,selectors:[["","matTabBodyHost",""]],standalone:!0,features:[Un]});let s=e;return s})(),Ig=(()=>{let e=class e{set position(i){this._positionIndex=i,this._computePositionAnimationState()}constructor(i,o,n){this._elementRef=i,this._dir=o,this._dirChangeSubscription=Do.EMPTY,this._translateTabComplete=new jn,this._onCentering=new He,this._beforeCentering=new He,this._afterLeavingCenter=new He,this._onCentered=new He(!0),this.animationDuration="500ms",this.preserveContent=!1,o&&(this._dirChangeSubscription=o.change.subscribe(r=>{this._computePositionAnimationState(r),n.markForCheck()})),this._translateTabComplete.pipe(Au((r,a)=>r.fromState===a.fromState&&r.toState===a.toState)).subscribe(r=>{this._isCenterPosition(r.toState)&&this._isCenterPosition(this._position)&&this._onCentered.emit(),this._isCenterPosition(r.fromState)&&!this._isCenterPosition(this._position)&&this._afterLeavingCenter.emit()})}ngOnInit(){this._position=="center"&&this.origin!=null&&(this._position=this._computePositionFromOrigin(this.origin))}ngOnDestroy(){this._dirChangeSubscription.unsubscribe(),this._translateTabComplete.complete()}_onTranslateTabStarted(i){let o=this._isCenterPosition(i.toState);this._beforeCentering.emit(o),o&&this._onCentering.emit(this._elementRef.nativeElement.clientHeight)}_getLayoutDirection(){return this._dir&&this._dir.value==="rtl"?"rtl":"ltr"}_isCenterPosition(i){return i=="center"||i=="left-origin-center"||i=="right-origin-center"}_computePositionAnimationState(i=this._getLayoutDirection()){this._positionIndex<0?this._position=i=="ltr"?"left":"right":this._positionIndex>0?this._position=i=="ltr"?"right":"left":this._position="center"}_computePositionFromOrigin(i){let o=this._getLayoutDirection();return o=="ltr"&&i<=0||o=="rtl"&&i>0?"left-origin-center":"right-origin-center"}};e.\u0275fac=function(o){return new(o||e)(ce(ti),ce(pr,8),ce(Yn))},e.\u0275cmp=fi({type:e,selectors:[["mat-tab-body"]],viewQuery:function(o,n){if(o&1&&Vt(wr,5),o&2){let r;st(r=rt())&&(n._portalHost=r.first)}},hostAttrs:[1,"mat-mdc-tab-body"],inputs:{_content:[Oe.None,"content","_content"],origin:"origin",animationDuration:"animationDuration",preserveContent:"preserveContent",position:"position"},outputs:{_onCentering:"_onCentering",_beforeCentering:"_beforeCentering",_afterLeavingCenter:"_afterLeavingCenter",_onCentered:"_onCentered"},standalone:!0,features:[$n],decls:3,vars:6,consts:[["content",""],["cdkScrollable","",1,"mat-mdc-tab-body-content"],["matTabBodyHost",""]],template:function(o,n){if(o&1){let r=Uo();Nt(0,"div",1,0),ki("@translateTab.start",function(l){return Ke(r),Ze(n._onTranslateTabStarted(l))})("@translateTab.done",function(l){return Ke(r),Ze(n._translateTabComplete.next(l))}),Vi(2,wk,0,0,"ng-template",2),wi()}o&2&&bi("@translateTab",Vu(3,bk,n._position,Nu(1,pk,n.animationDuration)))},dependencies:[Fk,Ku],styles:['.mat-mdc-tab-body{top:0;left:0;right:0;bottom:0;position:absolute;display:block;overflow:hidden;outline:0;flex-basis:100%}.mat-mdc-tab-body.mat-mdc-tab-body-active{position:relative;overflow-x:hidden;overflow-y:auto;z-index:1;flex-grow:1}.mat-mdc-tab-group.mat-mdc-tab-group-dynamic-height .mat-mdc-tab-body.mat-mdc-tab-body-active{overflow-y:hidden}.mat-mdc-tab-body-content{height:100%;overflow:auto}.mat-mdc-tab-group-dynamic-height .mat-mdc-tab-body-content{overflow:hidden}.mat-mdc-tab-body-content[style*="visibility: hidden"]{display:none}'],encapsulation:2,data:{animation:[zk.translateTab]}});let s=e;return s})(),Ok=0,Hk=!0,KS=(()=>{let e=class e{get fitInkBarToContent(){return this._fitInkBarToContent}set fitInkBarToContent(i){this._fitInkBarToContent=i,this._changeDetectorRef.markForCheck()}get selectedIndex(){return this._selectedIndex}set selectedIndex(i){this._indexToSelect=isNaN(i)?null:i}get animationDuration(){return this._animationDuration}set animationDuration(i){let o=i+"";this._animationDuration=/^\d+$/.test(o)?i+"ms":o}get contentTabIndex(){return this._contentTabIndex}set contentTabIndex(i){this._contentTabIndex=isNaN(i)?null:i}get backgroundColor(){return this._backgroundColor}set backgroundColor(i){if(!Hk)throw new Error("mat-tab-group background color must be set through the Sass theming API");let o=this._elementRef.nativeElement.classList;o.remove("mat-tabs-with-background",`mat-background-${this.backgroundColor}`),i&&o.add("mat-tabs-with-background",`mat-background-${i}`),this._backgroundColor=i}constructor(i,o,n,r){this._elementRef=i,this._changeDetectorRef=o,this._animationMode=r,this._tabs=new Iu,this._indexToSelect=0,this._lastFocusedTabIndex=null,this._tabBodyWrapperHeight=0,this._tabsSubscription=Do.EMPTY,this._tabLabelSubscription=Do.EMPTY,this._fitInkBarToContent=!1,this.stretchTabs=!0,this.dynamicHeight=!1,this._selectedIndex=null,this.headerPosition="above",this.disablePagination=!1,this.disableRipple=!1,this.preserveContent=!1,this.selectedIndexChange=new He,this.focusChange=new He,this.animationDone=new He,this.selectedTabChange=new He(!0),this._isServer=!qa(Xn).isBrowser,this._groupId=Ok++,this.animationDuration=n&&n.animationDuration?n.animationDuration:"500ms",this.disablePagination=n&&n.disablePagination!=null?n.disablePagination:!1,this.dynamicHeight=n&&n.dynamicHeight!=null?n.dynamicHeight:!1,n?.contentTabIndex!=null&&(this.contentTabIndex=n.contentTabIndex),this.preserveContent=!!n?.preserveContent,this.fitInkBarToContent=n&&n.fitInkBarToContent!=null?n.fitInkBarToContent:!1,this.stretchTabs=n&&n.stretchTabs!=null?n.stretchTabs:!0}ngAfterContentChecked(){let i=this._indexToSelect=this._clampTabIndex(this._indexToSelect);if(this._selectedIndex!=i){let o=this._selectedIndex==null;if(!o){this.selectedTabChange.emit(this._createChangeEvent(i));let n=this._tabBodyWrapper.nativeElement;n.style.minHeight=n.clientHeight+"px"}Promise.resolve().then(()=>{this._tabs.forEach((n,r)=>n.isActive=r===i),o||(this.selectedIndexChange.emit(i),this._tabBodyWrapper.nativeElement.style.minHeight="")})}this._tabs.forEach((o,n)=>{o.position=n-i,this._selectedIndex!=null&&o.position==0&&!o.origin&&(o.origin=i-this._selectedIndex)}),this._selectedIndex!==i&&(this._selectedIndex=i,this._lastFocusedTabIndex=null,this._changeDetectorRef.markForCheck())}ngAfterContentInit(){this._subscribeToAllTabChanges(),this._subscribeToTabLabels(),this._tabsSubscription=this._tabs.changes.subscribe(()=>{let i=this._clampTabIndex(this._indexToSelect);if(i===this._selectedIndex){let o=this._tabs.toArray(),n;for(let r=0;r<o.length;r++)if(o[r].isActive){this._indexToSelect=this._selectedIndex=r,this._lastFocusedTabIndex=null,n=o[r];break}!n&&o[i]&&Promise.resolve().then(()=>{o[i].isActive=!0,this.selectedTabChange.emit(this._createChangeEvent(i))})}this._changeDetectorRef.markForCheck()})}_subscribeToAllTabChanges(){this._allTabs.changes.pipe(nr(this._allTabs)).subscribe(i=>{this._tabs.reset(i.filter(o=>o._closestTabGroup===this||!o._closestTabGroup)),this._tabs.notifyOnChanges()})}ngOnDestroy(){this._tabs.destroy(),this._tabsSubscription.unsubscribe(),this._tabLabelSubscription.unsubscribe()}realignInkBar(){this._tabHeader&&this._tabHeader._alignInkBarToSelectedTab()}updatePagination(){this._tabHeader&&this._tabHeader.updatePagination()}focusTab(i){let o=this._tabHeader;o&&(o.focusIndex=i)}_focusChanged(i){this._lastFocusedTabIndex=i,this.focusChange.emit(this._createChangeEvent(i))}_createChangeEvent(i){let o=new yl;return o.index=i,this._tabs&&this._tabs.length&&(o.tab=this._tabs.toArray()[i]),o}_subscribeToTabLabels(){this._tabLabelSubscription&&this._tabLabelSubscription.unsubscribe(),this._tabLabelSubscription=or(...this._tabs.map(i=>i._stateChanges)).subscribe(()=>this._changeDetectorRef.markForCheck())}_clampTabIndex(i){return Math.min(this._tabs.length-1,Math.max(i||0,0))}_getTabLabelId(i){return`mat-tab-label-${this._groupId}-${i}`}_getTabContentId(i){return`mat-tab-content-${this._groupId}-${i}`}_setTabBodyWrapperHeight(i){if(!this.dynamicHeight||!this._tabBodyWrapperHeight)return;let o=this._tabBodyWrapper.nativeElement;o.style.height=this._tabBodyWrapperHeight+"px",this._tabBodyWrapper.nativeElement.offsetHeight&&(o.style.height=i+"px")}_removeTabBodyWrapperHeight(){let i=this._tabBodyWrapper.nativeElement;this._tabBodyWrapperHeight=i.clientHeight,i.style.height="",this.animationDone.emit()}_handleClick(i,o,n){o.focusIndex=n,i.disabled||(this.selectedIndex=n)}_getTabIndex(i){let o=this._lastFocusedTabIndex??this.selectedIndex;return i===o?0:-1}_tabFocusChanged(i,o){i&&i!=="mouse"&&i!=="touch"&&(this._tabHeader.focusIndex=o)}};e.\u0275fac=function(o){return new(o||e)(ce(ti),ce(Yn),ce(Bk,8),ce(rr,8))},e.\u0275cmp=fi({type:e,selectors:[["mat-tab-group"]],contentQueries:function(o,n,r){if(o&1&&Gn(r,Mk,5),o&2){let a;st(a=rt())&&(n._allTabs=a)}},viewQuery:function(o,n){if(o&1&&(Vt(kk,5),Vt(vk,5)),o&2){let r;st(r=rt())&&(n._tabBodyWrapper=r.first),st(r=rt())&&(n._tabHeader=r.first)}},hostAttrs:[1,"mat-mdc-tab-group"],hostVars:10,hostBindings:function(o,n){o&2&&(cr("mat-"+(n.color||"primary")),Mu("--mat-tab-animation-duration",n.animationDuration),ii("mat-mdc-tab-group-dynamic-height",n.dynamicHeight)("mat-mdc-tab-group-inverted-header",n.headerPosition==="below")("mat-mdc-tab-group-stretch-tabs",n.stretchTabs))},inputs:{color:"color",fitInkBarToContent:[Oe.HasDecoratorInputTransform,"fitInkBarToContent","fitInkBarToContent",Dt],stretchTabs:[Oe.HasDecoratorInputTransform,"mat-stretch-tabs","stretchTabs",Dt],dynamicHeight:[Oe.HasDecoratorInputTransform,"dynamicHeight","dynamicHeight",Dt],selectedIndex:[Oe.HasDecoratorInputTransform,"selectedIndex","selectedIndex",ur],headerPosition:"headerPosition",animationDuration:"animationDuration",contentTabIndex:[Oe.HasDecoratorInputTransform,"contentTabIndex","contentTabIndex",ur],disablePagination:[Oe.HasDecoratorInputTransform,"disablePagination","disablePagination",Dt],disableRipple:[Oe.HasDecoratorInputTransform,"disableRipple","disableRipple",Dt],preserveContent:[Oe.HasDecoratorInputTransform,"preserveContent","preserveContent",Dt],backgroundColor:"backgroundColor"},outputs:{selectedIndexChange:"selectedIndexChange",focusChange:"focusChange",animationDone:"animationDone",selectedTabChange:"selectedTabChange"},exportAs:["matTabGroup"],standalone:!0,features:[io([{provide:Eg,useExisting:e}]),to,$n],ngContentSelectors:_l,decls:9,vars:6,consts:[["tabHeader",""],["tabBodyWrapper",""],["tabNode",""],[3,"indexFocused","selectFocusedIndex","selectedIndex","disableRipple","disablePagination"],["role","tab","matTabLabelWrapper","","cdkMonitorElementFocus","",1,"mdc-tab","mat-mdc-tab","mat-mdc-focus-indicator",3,"id","mdc-tab--active","class","disabled","fitInkBarToContent"],[1,"mat-mdc-tab-body-wrapper"],["role","tabpanel",3,"id","mat-mdc-tab-body-active","class","content","position","origin","animationDuration","preserveContent"],["role","tab","matTabLabelWrapper","","cdkMonitorElementFocus","",1,"mdc-tab","mat-mdc-tab","mat-mdc-focus-indicator",3,"click","cdkFocusChange","id","disabled","fitInkBarToContent"],[1,"mdc-tab__ripple"],["mat-ripple","",1,"mat-mdc-tab-ripple",3,"matRippleTrigger","matRippleDisabled"],[1,"mdc-tab__content"],[1,"mdc-tab__text-label"],[3,"cdkPortalOutlet"],["role","tabpanel",3,"_onCentered","_onCentering","id","content","position","origin","animationDuration","preserveContent"]],template:function(o,n){if(o&1){let r=Uo();dr(),Nt(0,"mat-tab-header",3,0),ki("indexFocused",function(l){return Ke(r),Ze(n._focusChanged(l))})("selectFocusedIndex",function(l){return Ke(r),Ze(n.selectedIndex=l)}),Qa(2,Ck,8,17,"div",4,Za),wi(),Vi(4,Ak,1,0),Nt(5,"div",5,1),Qa(7,Sk,1,13,"mat-tab-body",6,Za),wi()}o&2&&(bi("selectedIndex",n.selectedIndex||0)("disableRipple",n.disableRipple)("disablePagination",n.disablePagination),pi(2),Ja(n._tabs),pi(2),Ka(4,n._isServer?4:-1),pi(),ii("_mat-animation-noopable",n._animationMode==="NoopAnimations"),pi(2),Ja(n._tabs))},dependencies:[Dk,Tg,Gu,il,wr,Ig],styles:['.mdc-tab{min-width:90px;padding-right:24px;padding-left:24px;display:flex;flex:1 0 auto;justify-content:center;box-sizing:border-box;margin:0;padding-top:0;padding-bottom:0;border:none;outline:none;text-align:center;white-space:nowrap;cursor:pointer;-webkit-appearance:none;z-index:1}.mdc-tab::-moz-focus-inner{padding:0;border:0}.mdc-tab[hidden]{display:none}.mdc-tab--min-width{flex:0 1 auto}.mdc-tab__content{display:flex;align-items:center;justify-content:center;height:inherit;pointer-events:none}.mdc-tab__text-label{transition:150ms color linear;display:inline-block;line-height:1;z-index:2}.mdc-tab__icon{transition:150ms color linear;z-index:2}.mdc-tab--stacked .mdc-tab__content{flex-direction:column;align-items:center;justify-content:center}.mdc-tab--stacked .mdc-tab__text-label{padding-top:6px;padding-bottom:4px}.mdc-tab--active .mdc-tab__text-label,.mdc-tab--active .mdc-tab__icon{transition-delay:100ms}.mdc-tab:not(.mdc-tab--stacked) .mdc-tab__icon+.mdc-tab__text-label{padding-left:8px;padding-right:0}[dir=rtl] .mdc-tab:not(.mdc-tab--stacked) .mdc-tab__icon+.mdc-tab__text-label,.mdc-tab:not(.mdc-tab--stacked) .mdc-tab__icon+.mdc-tab__text-label[dir=rtl]{padding-left:0;padding-right:8px}.mdc-tab-indicator{display:flex;position:absolute;top:0;left:0;justify-content:center;width:100%;height:100%;pointer-events:none;z-index:1}.mdc-tab-indicator__content{transform-origin:left;opacity:0}.mdc-tab-indicator__content--underline{align-self:flex-end;box-sizing:border-box;width:100%;border-top-style:solid}.mdc-tab-indicator__content--icon{align-self:center;margin:0 auto}.mdc-tab-indicator--active .mdc-tab-indicator__content{opacity:1}.mdc-tab-indicator .mdc-tab-indicator__content{transition:250ms transform cubic-bezier(0.4, 0, 0.2, 1)}.mdc-tab-indicator--no-transition .mdc-tab-indicator__content{transition:none}.mdc-tab-indicator--fade .mdc-tab-indicator__content{transition:150ms opacity linear}.mdc-tab-indicator--active.mdc-tab-indicator--fade .mdc-tab-indicator__content{transition-delay:100ms}.mat-mdc-tab-ripple{position:absolute;top:0;left:0;bottom:0;right:0;pointer-events:none}.mat-mdc-tab{-webkit-tap-highlight-color:rgba(0,0,0,0);-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;text-decoration:none;background:none;font-family:var(--mat-tab-header-label-text-font);font-size:var(--mat-tab-header-label-text-size);letter-spacing:var(--mat-tab-header-label-text-tracking);line-height:var(--mat-tab-header-label-text-line-height);font-weight:var(--mat-tab-header-label-text-weight)}.mat-mdc-tab .mdc-tab-indicator__content--underline{border-color:var(--mdc-tab-indicator-active-indicator-color)}.mat-mdc-tab .mdc-tab-indicator__content--underline{border-top-width:var(--mdc-tab-indicator-active-indicator-height)}.mat-mdc-tab .mdc-tab-indicator__content--underline{border-radius:var(--mdc-tab-indicator-active-indicator-shape)}.mat-mdc-tab:not(.mdc-tab--stacked){height:var(--mdc-secondary-navigation-tab-container-height)}.mat-mdc-tab:not(:disabled).mdc-tab--active .mdc-tab__icon{fill:currentColor}.mat-mdc-tab:not(:disabled):hover.mdc-tab--active .mdc-tab__icon{fill:currentColor}.mat-mdc-tab:not(:disabled):focus.mdc-tab--active .mdc-tab__icon{fill:currentColor}.mat-mdc-tab:not(:disabled):active.mdc-tab--active .mdc-tab__icon{fill:currentColor}.mat-mdc-tab:disabled.mdc-tab--active .mdc-tab__icon{fill:currentColor}.mat-mdc-tab:not(:disabled):not(.mdc-tab--active) .mdc-tab__icon{fill:currentColor}.mat-mdc-tab:not(:disabled):hover:not(.mdc-tab--active) .mdc-tab__icon{fill:currentColor}.mat-mdc-tab:not(:disabled):focus:not(.mdc-tab--active) .mdc-tab__icon{fill:currentColor}.mat-mdc-tab:not(:disabled):active:not(.mdc-tab--active) .mdc-tab__icon{fill:currentColor}.mat-mdc-tab:disabled:not(.mdc-tab--active) .mdc-tab__icon{fill:currentColor}.mat-mdc-tab.mdc-tab{flex-grow:0}.mat-mdc-tab:hover .mdc-tab__text-label{color:var(--mat-tab-header-inactive-hover-label-text-color)}.mat-mdc-tab:focus .mdc-tab__text-label{color:var(--mat-tab-header-inactive-focus-label-text-color)}.mat-mdc-tab.mdc-tab--active .mdc-tab__text-label{color:var(--mat-tab-header-active-label-text-color)}.mat-mdc-tab.mdc-tab--active .mdc-tab__ripple::before,.mat-mdc-tab.mdc-tab--active .mat-ripple-element{background-color:var(--mat-tab-header-active-ripple-color)}.mat-mdc-tab.mdc-tab--active:hover .mdc-tab__text-label{color:var(--mat-tab-header-active-hover-label-text-color)}.mat-mdc-tab.mdc-tab--active:hover .mdc-tab-indicator__content--underline{border-color:var(--mat-tab-header-active-hover-indicator-color)}.mat-mdc-tab.mdc-tab--active:focus .mdc-tab__text-label{color:var(--mat-tab-header-active-focus-label-text-color)}.mat-mdc-tab.mdc-tab--active:focus .mdc-tab-indicator__content--underline{border-color:var(--mat-tab-header-active-focus-indicator-color)}.mat-mdc-tab.mat-mdc-tab-disabled{opacity:.4;pointer-events:none}.mat-mdc-tab.mat-mdc-tab-disabled .mdc-tab__content{pointer-events:none}.mat-mdc-tab.mat-mdc-tab-disabled .mdc-tab__ripple::before,.mat-mdc-tab.mat-mdc-tab-disabled .mat-ripple-element{background-color:var(--mat-tab-header-disabled-ripple-color)}.mat-mdc-tab .mdc-tab__ripple::before{content:"";display:block;position:absolute;top:0;left:0;right:0;bottom:0;opacity:0;pointer-events:none;background-color:var(--mat-tab-header-inactive-ripple-color)}.mat-mdc-tab .mdc-tab__text-label{color:var(--mat-tab-header-inactive-label-text-color);display:inline-flex;align-items:center}.mat-mdc-tab .mdc-tab__content{position:relative;pointer-events:auto}.mat-mdc-tab:hover .mdc-tab__ripple::before{opacity:.04}.mat-mdc-tab.cdk-program-focused .mdc-tab__ripple::before,.mat-mdc-tab.cdk-keyboard-focused .mdc-tab__ripple::before{opacity:.12}.mat-mdc-tab .mat-ripple-element{opacity:.12;background-color:var(--mat-tab-header-inactive-ripple-color)}.mat-mdc-tab-group.mat-mdc-tab-group-stretch-tabs>.mat-mdc-tab-header .mat-mdc-tab{flex-grow:1}.mat-mdc-tab-group{display:flex;flex-direction:column;max-width:100%}.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header,.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header-pagination{background-color:var(--mat-tab-header-with-background-background-color)}.mat-mdc-tab-group.mat-tabs-with-background.mat-primary>.mat-mdc-tab-header .mat-mdc-tab .mdc-tab__text-label{color:var(--mat-tab-header-with-background-foreground-color)}.mat-mdc-tab-group.mat-tabs-with-background.mat-primary>.mat-mdc-tab-header .mdc-tab-indicator__content--underline{border-color:var(--mat-tab-header-with-background-foreground-color)}.mat-mdc-tab-group.mat-tabs-with-background:not(.mat-primary)>.mat-mdc-tab-header .mat-mdc-tab:not(.mdc-tab--active) .mdc-tab__text-label{color:var(--mat-tab-header-with-background-foreground-color)}.mat-mdc-tab-group.mat-tabs-with-background:not(.mat-primary)>.mat-mdc-tab-header .mat-mdc-tab:not(.mdc-tab--active) .mdc-tab-indicator__content--underline{border-color:var(--mat-tab-header-with-background-foreground-color)}.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header .mat-mdc-tab-header-pagination-chevron,.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header .mat-mdc-focus-indicator::before,.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header-pagination .mat-mdc-tab-header-pagination-chevron,.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header-pagination .mat-mdc-focus-indicator::before{border-color:var(--mat-tab-header-with-background-foreground-color)}.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header .mat-ripple-element,.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header .mdc-tab__ripple::before,.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header-pagination .mat-ripple-element,.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header-pagination .mdc-tab__ripple::before{background-color:var(--mat-tab-header-with-background-foreground-color)}.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header .mat-mdc-tab-header-pagination-chevron,.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header-pagination .mat-mdc-tab-header-pagination-chevron{color:var(--mat-tab-header-with-background-foreground-color)}.mat-mdc-tab-group.mat-mdc-tab-group-inverted-header{flex-direction:column-reverse}.mat-mdc-tab-group.mat-mdc-tab-group-inverted-header .mdc-tab-indicator__content--underline{align-self:flex-start}.mat-mdc-tab-body-wrapper{position:relative;overflow:hidden;display:flex;transition:height 500ms cubic-bezier(0.35, 0, 0.25, 1)}.mat-mdc-tab-body-wrapper._mat-animation-noopable{transition:none !important;animation:none !important}'],encapsulation:2});let s=e;return s})(),yl=class{};var ZS=(()=>{let e=class e{};e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=Oo({type:e}),e.\u0275inj=zo({imports:[tl,tl]});let s=e;return s})();function Wk(s,e){}var ct=new Array(256).fill(0).map((s,e)=>("0"+e.toString(16)).slice(-2));function jk(){let s=Math.random()*4294967296>>>0,e=Math.random()*4294967296>>>0,t=Math.random()*4294967296>>>0,i=Math.random()*4294967296>>>0;return"e"+ct[s>>0&255]+ct[s>>8&255]+ct[s>>16&255]+ct[s>>24&255]+ct[e>>0&255]+ct[e>>8&255]+ct[e>>16&255]+ct[e>>24&255]+ct[t>>0&255]+ct[t>>8&255]+ct[t>>16&255]+ct[t>>24&255]+ct[i>>0&255]+ct[i>>8&255]+ct[i>>16&255]+ct[i>>24&255]}var Cl="Lock from Angular integration (@ckeditor/ckeditor5-angular)",aE=(()=>{class s{constructor(t,i){this.config={},this.data="",this.tagName="div",this.disableTwoWayDataBinding=!1,this.ready=new He,this.change=new He,this.blur=new He,this.focus=new He,this.error=new He,this.initiallyDisabled=!1,this.isEditorSettingData=!1,this.id=jk(),this.ngZone=i,this.elementRef=t,this.checkVersion()}set disabled(t){this.setDisabledState(t)}get disabled(){return this.editorInstance?this.editorInstance.isReadOnly:this.initiallyDisabled}get editorInstance(){let t=this.editorWatchdog;return this.watchdog&&(t=this.watchdog._watchdogs.get(this.id)),t?t.editor:null}getId(){return this.id}checkVersion(){let{CKEDITOR_VERSION:t}=window;if(!t)return console.warn('Cannot find the "CKEDITOR_VERSION" in the "window" scope.');let[i]=t.split(".").map(Number);i>=42||t.startsWith("0.0.0")||console.warn("The <CKEditor> component requires using CKEditor 5 in version 42+ or nightly build.")}ngOnChanges(t){Object.prototype.hasOwnProperty.call(t,"data")&&t.data&&!t.data.isFirstChange()&&this.writeValue(t.data.currentValue)}ngAfterViewInit(){this.attachToWatchdog()}ngOnDestroy(){return Qi(this,null,function*(){this.watchdog?yield this.watchdog.remove(this.id):this.editorWatchdog&&this.editorWatchdog.editor&&(yield this.editorWatchdog.destroy(),this.editorWatchdog=void 0)})}writeValue(t){t===null&&(t=""),this.editorInstance?(this.isEditorSettingData=!0,this.editorInstance.data.set(t),this.isEditorSettingData=!1):(this.data=t,this.ready.pipe(Su()).subscribe(i=>{i.data.set(this.data)}))}registerOnChange(t){this.cvaOnChange=t}registerOnTouched(t){this.cvaOnTouched=t}setDisabledState(t){this.editorInstance&&(t?this.editorInstance.enableReadOnlyMode(Cl):this.editorInstance.disableReadOnlyMode(Cl)),this.initiallyDisabled=t}attachToWatchdog(){let t=(a,l)=>this.ngZone.runOutsideAngular(()=>Qi(this,null,function*(){this.elementRef.nativeElement.appendChild(a);let c=yield this.editor.create(a,l);return this.initiallyDisabled&&c.enableReadOnlyMode(Cl),this.ngZone.run(()=>{this.ready.emit(c)}),this.setUpEditorEvents(c),c})),i=a=>Qi(this,null,function*(){yield a.destroy(),this.elementRef.nativeElement.removeChild(this.editorElement)}),o=a=>{Uk(this.error)&&this.ngZone.run(()=>this.error.emit(a))},n=document.createElement(this.tagName),r=this.getConfig();if(this.editorElement=n,this.watchdog)this.watchdog.add({id:this.id,type:"editor",creator:t,destructor:i,sourceElementOrData:n,config:r}).catch(a=>{o(a)}),this.watchdog.on("itemError",(a,{itemId:l})=>{l===this.id&&o()});else{let a=new this.editor.EditorWatchdog(this.editor,this.editorWatchdogConfig);a.setCreator(t),a.setDestructor(i),a.on("error",o),this.editorWatchdog=a,this.ngZone.runOutsideAngular(()=>{a.create(n,r).catch(l=>{o(l)})})}}getConfig(){if(this.data&&this.config.initialData)throw new Error("Editor data should be provided either using `config.initialData` or `data` properties.");let t=B({},this.config),i=this.config.initialData||this.data;return i&&(t.initialData=i),t}setUpEditorEvents(t){let i=t.model.document,o=t.editing.view.document;i.on("change:data",n=>{this.ngZone.run(()=>{if(!this.disableTwoWayDataBinding){if(this.cvaOnChange&&!this.isEditorSettingData){let r=t.data.get();this.cvaOnChange(r)}this.change.emit({event:n,editor:t})}})}),o.on("focus",n=>{this.ngZone.run(()=>{this.focus.emit({event:n,editor:t})})}),o.on("blur",n=>{this.ngZone.run(()=>{this.cvaOnTouched&&this.cvaOnTouched(),this.blur.emit({event:n,editor:t})})})}}return s.\u0275fac=function(t){return new(t||s)(ce(ti),ce(eo))},s.\u0275cmp=fi({type:s,selectors:[["ckeditor"]],inputs:{editor:"editor",config:"config",data:"data",tagName:"tagName",watchdog:"watchdog",editorWatchdogConfig:"editorWatchdogConfig",disableTwoWayDataBinding:"disableTwoWayDataBinding",disabled:"disabled"},outputs:{ready:"ready",change:"change",blur:"blur",focus:"focus",error:"error"},features:[io([{provide:Fu,useExisting:sr(()=>s),multi:!0}]),Ho],decls:1,vars:0,template:function(t,i){t&1&&Vi(0,Wk,0,0,"ng-template")},encapsulation:2}),s})();function Uk(s){return s.observed||s.observers.length>0}var lE=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=Oo({type:s}),s.\u0275inj=zo({imports:[[Ou,Bu]]}),s})();var Tl;try{Tl={window,document}}catch{Tl={window:{},document:{}}}var j=Tl;function Gk(){try{return navigator.userAgent.toLowerCase()}catch{return""}}var so=Gk(),K={isMac:jg(so),isWindows:$k(so),isGecko:Yk(so),isSafari:Xk(so),isiOS:qk(so),isAndroid:Kk(so),isBlink:Zk(so),get isMediaForcedColors(){return Jk()},get isMotionReduced(){return e0()},features:{isRegExpUnicodePropertySupported:Qk()}};function jg(s){return s.indexOf("macintosh")>-1}function $k(s){return s.indexOf("windows")>-1}function Yk(s){return!!s.match(/gecko\/\d+/)}function Xk(s){return s.indexOf(" applewebkit/")>-1&&s.indexOf("chrome")===-1}function qk(s){return!!s.match(/iphone|ipad/i)||jg(s)&&navigator.maxTouchPoints>0}function Kk(s){return s.indexOf("android")>-1}function Zk(s){return s.indexOf("chrome/")>-1&&s.indexOf("edge/")<0}function Qk(){let s=!1;try{s="\u0107".search(new RegExp("[\\p{L}]","u"))===0}catch{}return s}function Jk(){return j.window.matchMedia?j.window.matchMedia("(forced-colors: active)").matches:!1}function e0(){return j.window.matchMedia?j.window.matchMedia("(prefers-reduced-motion)").matches:!1}function Nl(s,e,t,i){t=t||function(l,c){return l===c};let o=Array.isArray(s)?s:Array.prototype.slice.call(s),n=Array.isArray(e)?e:Array.prototype.slice.call(e),r=t0(o,n,t);return i?o0(r,n.length):i0(n,r)}function t0(s,e,t){let i=Pg(s,e,t);if(i===-1)return{firstIndex:-1,lastIndexOld:-1,lastIndexNew:-1};let o=Mg(s,i),n=Mg(e,i),r=Pg(o,n,t),a=s.length-r,l=e.length-r;return{firstIndex:i,lastIndexOld:a,lastIndexNew:l}}function Pg(s,e,t){for(let i=0;i<Math.max(s.length,e.length);i++)if(s[i]===void 0||e[i]===void 0||!t(s[i],e[i]))return i;return-1}function Mg(s,e){return s.slice(e).reverse()}function i0(s,e){let t=[],{firstIndex:i,lastIndexOld:o,lastIndexNew:n}=e;return n-i>0&&t.push({index:i,type:"insert",values:s.slice(i,n)}),o-i>0&&t.push({index:i+(n-i),type:"delete",howMany:o-i}),t}function o0(s,e){let{firstIndex:t,lastIndexOld:i,lastIndexNew:o}=s;if(t===-1)return Array(e).fill("equal");let n=[];return t>0&&(n=n.concat(Array(t).fill("equal"))),o-t>0&&(n=n.concat(Array(o-t).fill("insert"))),i-t>0&&(n=n.concat(Array(i-t).fill("delete"))),o<e&&(n=n.concat(Array(e-o).fill("equal"))),n}function Jo(s,e,t){t=t||function(b,k){return b===k};let i=s.length,o=e.length;if(i>200||o>200||i+o>300)return Jo.fastDiff(s,e,t,!0);let n,r;if(o<i){let b=s;s=e,e=b,n="delete",r="insert"}else n="insert",r="delete";let a=s.length,l=e.length,c=l-a,d={},h={};function g(b){let k=(h[b-1]!==void 0?h[b-1]:-1)+1,v=h[b+1]!==void 0?h[b+1]:-1,x=k>v?-1:1;d[b+x]&&(d[b]=d[b+x].slice(0)),d[b]||(d[b]=[]),d[b].push(k>v?n:r);let u=Math.max(k,v),f=u-b;for(;f<a&&u<l&&t(s[f],e[u]);)f++,u++,d[b].push("equal");return u}let m=0,p;do{for(p=-m;p<c;p++)h[p]=g(p);for(p=c+m;p>c;p--)h[p]=g(p);h[c]=g(c),m++}while(h[c]!==l);return d[c].slice(1)}Jo.fastDiff=Nl;function Lg(){return function s(){s.called=!0}}var xt=class{source;name;path;stop;off;return;constructor(e,t){this.source=e,this.name=t,this.path=[],this.stop=Lg(),this.off=Lg()}};var dt=new Array(256).fill("").map((s,e)=>("0"+e.toString(16)).slice(-2));function We(){let s=Math.random()*4294967296>>>0,e=Math.random()*4294967296>>>0,t=Math.random()*4294967296>>>0,i=Math.random()*4294967296>>>0;return"e"+dt[s>>0&255]+dt[s>>8&255]+dt[s>>16&255]+dt[s>>24&255]+dt[e>>0&255]+dt[e>>8&255]+dt[e>>16&255]+dt[e>>24&255]+dt[t>>0&255]+dt[t>>8&255]+dt[t>>16&255]+dt[t>>24&255]+dt[i>>0&255]+dt[i>>8&255]+dt[i>>16&255]+dt[i>>24&255]}var Ft={get(s="normal"){return typeof s!="number"?this[s]||this.normal:s},highest:1e5,high:1e3,normal:0,low:-1e3,lowest:-1e5};function Ug(s,e){let t=Ft.get(e.priority);for(let i=0;i<s.length;i++)if(Ft.get(s[i].priority)<t){s.splice(i,0,e);return}s.push(e)}var n0="https://ckeditor.com/docs/ckeditor5/latest/support/error-codes.html",E=class s extends Error{context;data;constructor(e,t,i){super(s0(e,i)),this.name="CKEditorError",this.context=t,this.data=i}is(e){return e==="CKEditorError"}static rethrowUnexpectedError(e,t){if(e.is&&e.is("CKEditorError"))throw e;let i=new s(e.message,t);throw i.stack=e.stack,i}};function de(s,e){console.warn(...r0(s,e))}function Gg(s){return`
Read more: ${n0}#error-${s}`}function s0(s,e){let t=new WeakSet,o=e?` ${JSON.stringify(e,(r,a)=>{if(typeof a=="object"&&a!==null){if(t.has(a))return`[object ${a.constructor.name}]`;t.add(a)}return a})}`:"",n=Gg(s);return s+o+n}function r0(s,e){let t=Gg(s);return e?[s,e,t]:[s,t]}var a0="42.0.2",l0=new Date(2024,6,25);if(globalThis.CKEDITOR_VERSION)throw new E("ckeditor-duplicated-modules",null);globalThis.CKEDITOR_VERSION=a0;var Qo=Symbol("listeningTo"),Il=Symbol("emitterId"),yi=Symbol("delegations"),$g=ue(Object);function ue(s){if(!s)return $g;class e extends s{on(i,o,n){this.listenTo(this,i,o,n)}once(i,o,n){let r=!1,a=(l,...c)=>{r||(r=!0,l.off(),o.call(this,l,...c))};this.listenTo(this,i,a,n)}off(i,o){this.stopListening(this,i,o)}listenTo(i,o,n,r={}){let a,l;this[Qo]||(this[Qo]={});let c=this[Qo];Al(i)||Yg(i);let d=Al(i);(a=c[d])||(a=c[d]={emitter:i,callbacks:{}}),(l=a.callbacks[o])||(l=a.callbacks[o]=[]),l.push(n),u0(this,i,o,n,r)}stopListening(i,o,n){let r=this[Qo],a=i&&Al(i),l=r&&a?r[a]:void 0,c=l&&o?l.callbacks[o]:void 0;if(!(!r||i&&!l||o&&!c))if(n)Sl(this,i,o,n),c.indexOf(n)!==-1&&(c.length===1?delete l.callbacks[o]:Sl(this,i,o,n));else if(c){for(;n=c.pop();)Sl(this,i,o,n);delete l.callbacks[o]}else if(l){for(o in l.callbacks)this.stopListening(i,o);delete r[a]}else{for(a in r)this.stopListening(r[a].emitter);delete this[Qo]}}fire(i,...o){try{let n=i instanceof xt?i:new xt(this,i),r=n.name,a=qg(this,r);if(n.path.push(this),a){let c=[n,...o];a=Array.from(a);for(let d=0;d<a.length&&(a[d].callback.apply(this,c),n.off.called&&(delete n.off.called,this._removeEventListener(r,a[d].callback)),!n.stop.called);d++);}let l=this[yi];if(l){let c=l.get(r),d=l.get("*");c&&Rg(c,n,o),d&&Rg(d,n,o)}return n.return}catch(n){E.rethrowUnexpectedError(n,this)}}delegate(...i){return{to:(o,n)=>{this[yi]||(this[yi]=new Map),i.forEach(r=>{let a=this[yi].get(r);a?a.set(o,n):this[yi].set(r,new Map([[o,n]]))})}}}stopDelegating(i,o){if(this[yi])if(!i)this[yi].clear();else if(!o)this[yi].delete(i);else{let n=this[yi].get(i);n&&n.delete(o)}}_addEventListener(i,o,n){h0(this,i);let r=Pl(this,i),a=Ft.get(n.priority),l={callback:o,priority:a};for(let c of r)Ug(c,l)}_removeEventListener(i,o){let n=Pl(this,i);for(let r of n)for(let a=0;a<r.length;a++)r[a].callback==o&&(r.splice(a,1),a--)}}return e}["on","once","off","listenTo","stopListening","fire","delegate","stopDelegating","_addEventListener","_removeEventListener"].forEach(s=>{ue[s]=$g.prototype[s]});function c0(s,e){let t=s[Qo];return t&&t[e]?t[e].emitter:null}function Yg(s,e){s[Il]||(s[Il]=e||We())}function Al(s){return s[Il]}function Xg(s){return s._events||Object.defineProperty(s,"_events",{value:{}}),s._events}function d0(){return{callbacks:[],childEvents:[]}}function h0(s,e){let t=Xg(s);if(t[e])return;let i=e,o=null,n=[];for(;i!==""&&!t[i];)t[i]=d0(),n.push(t[i]),o&&t[i].childEvents.push(o),o=i,i=i.substr(0,i.lastIndexOf(":"));if(i!==""){for(let r of n)r.callbacks=t[i].callbacks.slice();t[i].childEvents.push(o)}}function Pl(s,e){let t=Xg(s)[e];if(!t)return[];let i=[t.callbacks];for(let o=0;o<t.childEvents.length;o++){let n=Pl(s,t.childEvents[o]);i=i.concat(n)}return i}function qg(s,e){let t;return!s._events||!(t=s._events[e])||!t.callbacks.length?e.indexOf(":")>-1?qg(s,e.substr(0,e.lastIndexOf(":"))):null:t.callbacks}function Rg(s,e,t){for(let[i,o]of s){o?typeof o=="function"&&(o=o(e.name)):o=e.name;let n=new xt(e.source,o);n.path=[...e.path],i.fire(n,...t)}}function u0(s,e,t,i,o){e._addEventListener?e._addEventListener(t,i,o):s._addEventListener.call(e,t,i,o)}function Sl(s,e,t,i){e._removeEventListener?e._removeEventListener(t,i):s._removeEventListener.call(e,t,i)}var ns=Symbol("observableProperties"),rs=Symbol("boundObservables"),ss=Symbol("boundProperties"),ro=Symbol("decoratedMethods"),Ng=Symbol("decoratedOriginal"),Kg=ge(ue());function ge(s){if(!s)return Kg;class e extends s{set(i,o){if(Bt(i)){Object.keys(i).forEach(r=>{this.set(r,i[r])},this);return}El(this);let n=this[ns];if(i in this&&!n.has(i))throw new E("observable-set-cannot-override",this);Object.defineProperty(this,i,{enumerable:!0,configurable:!0,get(){return n.get(i)},set(r){let a=n.get(i),l=this.fire(`set:${i}`,i,r,a);l===void 0&&(l=r),(a!==l||!n.has(i))&&(n.set(i,l),this.fire(`change:${i}`,i,l,a))}}),this[i]=o}bind(...i){if(!i.length||!Vg(i))throw new E("observable-bind-wrong-properties",this);if(new Set(i).size!==i.length)throw new E("observable-bind-duplicate-properties",this);El(this);let o=this[ss];i.forEach(r=>{if(o.has(r))throw new E("observable-bind-rebind",this)});let n=new Map;return i.forEach(r=>{let a={property:r,to:[]};o.set(r,a),n.set(r,a)}),{to:g0,toMany:m0,_observable:this,_bindProperties:i,_to:[],_bindings:n}}unbind(...i){if(!this[ns])return;let o=this[ss],n=this[rs];if(i.length){if(!Vg(i))throw new E("observable-unbind-wrong-properties",this);i.forEach(r=>{let a=o.get(r);a&&(a.to.forEach(([l,c])=>{let d=n.get(l),h=d[c];h.delete(a),h.size||delete d[c],Object.keys(d).length||(n.delete(l),this.stopListening(l,"change"))}),o.delete(r))})}else n.forEach((r,a)=>{this.stopListening(a,"change")}),n.clear(),o.clear()}decorate(i){El(this);let o=this[i];if(!o)throw new E("observablemixin-cannot-decorate-undefined",this,{object:this,methodName:i});this.on(i,(n,r)=>{n.return=o.apply(this,r)}),this[i]=function(...n){return this.fire(i,n)},this[i][Ng]=o,this[ro]||(this[ro]=[]),this[ro].push(i)}stopListening(i,o,n){if(!i&&this[ro]){for(let r of this[ro])this[r]=this[r][Ng];delete this[ro]}super.stopListening(i,o,n)}[ns];[ro];[ss];[rs]}return e}["set","bind","unbind","decorate","on","once","off","listenTo","stopListening","fire","delegate","stopDelegating","_addEventListener","_removeEventListener"].forEach(s=>{ge[s]=Kg.prototype[s]});function El(s){s[ns]||(Object.defineProperty(s,ns,{value:new Map}),Object.defineProperty(s,rs,{value:new Map}),Object.defineProperty(s,ss,{value:new Map}))}function g0(...s){let e=p0(...s),t=Array.from(this._bindings.keys()),i=t.length;if(!e.callback&&e.to.length>1)throw new E("observable-bind-to-no-callback",this);if(i>1&&e.callback)throw new E("observable-bind-to-extra-callback",this);e.to.forEach(o=>{if(o.properties.length&&o.properties.length!==i)throw new E("observable-bind-to-properties-length",this);o.properties.length||(o.properties=this._bindProperties)}),this._to=e.to,e.callback&&(this._bindings.get(t[0]).callback=e.callback),k0(this._observable,this._to),w0(this),this._bindProperties.forEach(o=>{Zg(this._observable,o)})}function m0(s,e,t){if(this._bindings.size>1)throw new E("observable-bind-to-many-not-one-binding",this);this.to(...f0(s,e),t)}function f0(s,e){let t=s.map(i=>[i,e]);return Array.prototype.concat.apply([],t)}function Vg(s){return s.every(e=>typeof e=="string")}function p0(...s){if(!s.length)throw new E("observable-bind-to-parse-error",null);let e={to:[]},t;return typeof s[s.length-1]=="function"&&(e.callback=s.pop()),s.forEach(i=>{if(typeof i=="string")t.properties.push(i);else if(typeof i=="object")t={observable:i,properties:[]},e.to.push(t);else throw new E("observable-bind-to-parse-error",null)}),e}function b0(s,e,t,i){let o=s[rs],n=o.get(t),r=n||{};r[i]||(r[i]=new Set),r[i].add(e),n||o.set(t,r)}function w0(s){let e;s._bindings.forEach((t,i)=>{s._to.forEach(o=>{e=o.properties[t.callback?0:s._bindProperties.indexOf(i)],t.to.push([o.observable,e]),b0(s._observable,t,o.observable,e)})})}function Zg(s,e){let i=s[ss].get(e),o;i.callback?o=i.callback.apply(s,i.to.map(n=>n[0][n[1]])):(o=i.to[0],o=o[0][o[1]]),Object.prototype.hasOwnProperty.call(s,e)?s[e]=o:s.set(e,o)}function k0(s,e){e.forEach(t=>{let i=s[rs],o;i.get(t.observable)||s.listenTo(t.observable,"change",(n,r)=>{o=i.get(t.observable)[r],o&&o.forEach(a=>{Zg(s,a.property)})})})}var as=class{_replacedElements;constructor(){this._replacedElements=[]}replace(e,t){this._replacedElements.push({element:e,newElement:t}),e.style.display="none",t&&e.parentNode.insertBefore(t,e.nextSibling)}restore(){this._replacedElements.forEach(({element:e,newElement:t})=>{e.style.display="",t&&t.remove()}),this._replacedElements=[]}};function cs(s){let e=0;for(let t of s)e++;return e}function Je(s,e){let t=Math.min(s.length,e.length);for(let i=0;i<t;i++)if(s[i]!=e[i])return i;return s.length==e.length?"same":s.length<e.length?"prefix":"extension"}function pt(s){return!!(s&&s[Symbol.iterator])}function et(s,e,t={},i=[]){let o=t&&t.xmlns,n=o?s.createElementNS(o,e):s.createElement(e);for(let r in t)n.setAttribute(r,t[r]);(nl(i)||!pt(i))&&(i=[i]);for(let r of i)nl(r)&&(r=s.createTextNode(r)),n.appendChild(r);return n}var ls=class{_config;constructor(e,t){this._config={},t&&this.define(Dg(t)),e&&this._setObjectToTarget(this._config,e)}set(e,t){this._setToTarget(this._config,e,t)}define(e,t){this._setToTarget(this._config,e,t,!0)}get(e){return this._getFromSource(this._config,e)}*names(){for(let e of Object.keys(this._config))yield e}_setToTarget(e,t,i,o=!1){if(St(t)){this._setObjectToTarget(e,t,o);return}let n=t.split(".");t=n.pop();for(let r of n)St(e[r])||(e[r]={}),e=e[r];if(St(i)){St(e[t])||(e[t]={}),e=e[t],this._setObjectToTarget(e,i,o);return}o&&typeof e[t]<"u"||(e[t]=i)}_getFromSource(e,t){let i=t.split(".");t=i.pop();for(let o of i){if(!St(e[o])){e=null;break}e=e[o]}return e?Dg(e[t]):void 0}_setObjectToTarget(e,t,i){Object.keys(t).forEach(o=>{this._setToTarget(e,o,t[o],i)})}};function Dg(s){return Yo(s,v0)}function v0(s){return $t(s)||typeof s=="function"?s:void 0}function ni(s){if(s){if(s.defaultView)return s instanceof s.defaultView.Document;if(s.ownerDocument&&s.ownerDocument.defaultView)return s instanceof s.ownerDocument.defaultView.Node}return!1}function Sr(s){let e=Object.prototype.toString.apply(s);return e=="[object Window]"||e=="[object global]"}var Qg=Ge(ue());function Ge(s){if(!s)return Qg;class e extends s{listenTo(i,o,n,r={}){if(ni(i)||Sr(i)){let a={capture:!!r.useCapture,passive:!!r.usePassive},l=this._getProxyEmitter(i,a)||new Ml(i,a);this.listenTo(l,o,n,r)}else super.listenTo(i,o,n,r)}stopListening(i,o,n){if(ni(i)||Sr(i)){let r=this._getAllProxyEmitters(i);for(let a of r)this.stopListening(a,o,n)}else super.stopListening(i,o,n)}_getProxyEmitter(i,o){return c0(this,Jg(i,o))}_getAllProxyEmitters(i){return[{capture:!1,passive:!1},{capture:!1,passive:!0},{capture:!0,passive:!1},{capture:!0,passive:!0}].map(o=>this._getProxyEmitter(i,o)).filter(o=>!!o)}}return e}["_getProxyEmitter","_getAllProxyEmitters","on","once","off","listenTo","stopListening","fire","delegate","stopDelegating","_addEventListener","_removeEventListener"].forEach(s=>{Ge[s]=Qg.prototype[s]});var Ml=class extends ue(){_domNode;_options;constructor(e,t){super(),Yg(this,Jg(e,t)),this._domNode=e,this._options=t}_domListeners;attach(e){if(this._domListeners&&this._domListeners[e])return;let t=this._createDomListener(e);this._domNode.addEventListener(e,t,this._options),this._domListeners||(this._domListeners={}),this._domListeners[e]=t}detach(e){let t;this._domListeners[e]&&(!(t=this._events[e])||!t.callbacks.length)&&this._domListeners[e].removeListener()}_addEventListener(e,t,i){this.attach(e),ue().prototype._addEventListener.call(this,e,t,i)}_removeEventListener(e,t){ue().prototype._removeEventListener.call(this,e,t),this.detach(e)}_createDomListener(e){let t=i=>{this.fire(e,i)};return t.removeListener=()=>{this._domNode.removeEventListener(e,t,this._options),delete this._domListeners[e]},t}};function x0(s){return s["data-ck-expando"]||(s["data-ck-expando"]=We())}function Jg(s,e){let t=x0(s);for(let i of Object.keys(e).sort())e[i]&&(t+="-"+i);return t}function em(s){let e=[],t=s;for(;t&&t.nodeType!=Node.DOCUMENT_NODE;)e.unshift(t),t=t.parentNode;return e}function en(s){return s instanceof HTMLTextAreaElement?s.value:s.innerHTML}function Vl(s){let e=s.ownerDocument.defaultView.getComputedStyle(s);return{top:parseInt(e.borderTopWidth,10),right:parseInt(e.borderRightWidth,10),bottom:parseInt(e.borderBottomWidth,10),left:parseInt(e.borderLeftWidth,10)}}function Re(s){return Object.prototype.toString.call(s)=="[object Text]"}function ds(s){return Object.prototype.toString.apply(s)=="[object Range]"}function tm(s){return!s||!s.parentNode||s.offsetParent===j.document.body?null:s.offsetParent}var im=["top","right","bottom","left","width","height"],se=class s{top;right;bottom;left;width;height;_source;constructor(e){let t=ds(e);if(Object.defineProperty(this,"_source",{value:e._source||e,writable:!0,enumerable:!1}),Ll(e)||t)if(t){let i=s.getDomRangeRects(e);Ar(this,s.getBoundingRect(i))}else Ar(this,e.getBoundingClientRect());else if(Sr(e)){let{innerWidth:i,innerHeight:o}=e;Ar(this,{top:0,right:i,bottom:o,left:0,width:i,height:o})}else Ar(this,e)}clone(){return new s(this)}moveTo(e,t){return this.top=t,this.right=e+this.width,this.bottom=t+this.height,this.left=e,this}moveBy(e,t){return this.top+=t,this.right+=e,this.left+=e,this.bottom+=t,this}getIntersection(e){let t={top:Math.max(this.top,e.top),right:Math.min(this.right,e.right),bottom:Math.min(this.bottom,e.bottom),left:Math.max(this.left,e.left),width:0,height:0};if(t.width=t.right-t.left,t.height=t.bottom-t.top,t.width<0||t.height<0)return null;{let i=new s(t);return i._source=this._source,i}}getIntersectionArea(e){let t=this.getIntersection(e);return t?t.getArea():0}getArea(){return this.width*this.height}getVisible(){let e=this._source,t=this.clone();if(Bg(e))return t;let i=e,o=e.parentNode||e.commonAncestorContainer,n;for(;o&&!Bg(o);){let r=y0(o)==="visible";i instanceof HTMLElement&&zg(i)==="absolute"&&(n=i);let a=zg(o);if(r||n&&(a==="relative"&&r||a!=="relative")){i=o,o=o.parentNode;continue}let l=new s(o),c=t.getIntersection(l);if(c)c.getArea()<t.getArea()&&(t=c);else return null;i=o,o=o.parentNode}return t}isEqual(e){for(let t of im)if(this[t]!==e[t])return!1;return!0}contains(e){let t=this.getIntersection(e);return!!(t&&t.isEqual(e))}toAbsoluteRect(){let{scrollX:e,scrollY:t}=j.window,i=this.clone().moveBy(e,t);if(Ll(i._source)){let o=tm(i._source);o&&_0(i,o)}return i}excludeScrollbarsAndBorders(){let e=this._source,t,i,o;if(Sr(e))t=e.innerWidth-e.document.documentElement.clientWidth,i=e.innerHeight-e.document.documentElement.clientHeight,o=e.getComputedStyle(e.document.documentElement).direction;else{let n=Vl(e);t=e.offsetWidth-e.clientWidth-n.left-n.right,i=e.offsetHeight-e.clientHeight-n.top-n.bottom,o=e.ownerDocument.defaultView.getComputedStyle(e).direction,this.left+=n.left,this.top+=n.top,this.right-=n.right,this.bottom-=n.bottom,this.width=this.right-this.left,this.height=this.bottom-this.top}return this.width-=t,o==="ltr"?this.right-=t:this.left+=t,this.height-=i,this.bottom-=i,this}static getDomRangeRects(e){let t=[],i=Array.from(e.getClientRects());if(i.length)for(let o of i)t.push(new s(o));else{let o=e.startContainer;Re(o)&&(o=o.parentNode);let n=new s(o.getBoundingClientRect());n.right=n.left,n.width=0,t.push(n)}return t}static getBoundingRect(e){let t={left:Number.POSITIVE_INFINITY,top:Number.POSITIVE_INFINITY,right:Number.NEGATIVE_INFINITY,bottom:Number.NEGATIVE_INFINITY,width:0,height:0},i=0;for(let o of e)i++,t.left=Math.min(t.left,o.left),t.top=Math.min(t.top,o.top),t.right=Math.max(t.right,o.right),t.bottom=Math.max(t.bottom,o.bottom);return i==0?null:(t.width=t.right-t.left,t.height=t.bottom-t.top,new s(t))}};function Ar(s,e){for(let t of im)s[t]=e[t]}function Bg(s){return Ll(s)?s===s.ownerDocument.body:!1}function Ll(s){return s!==null&&typeof s=="object"&&s.nodeType===1&&typeof s.getBoundingClientRect=="function"}function zg(s){return s instanceof HTMLElement?s.ownerDocument.defaultView.getComputedStyle(s).position:"static"}function y0(s){return s instanceof HTMLElement?s.ownerDocument.defaultView.getComputedStyle(s).overflow:"visible"}function _0(s,e){let t=new se(e),i=Vl(e),o=0,n=0;o-=t.left,n-=t.top,o+=e.scrollLeft,n+=e.scrollTop,o-=i.left,n-=i.top,s.moveBy(o,n)}var tn=(()=>{class s{_element;_callback;static _observerInstance=null;static _elementCallbacks=null;constructor(t,i){s._observerInstance||s._createObserver(),this._element=t,this._callback=i,s._addElementCallback(t,i),s._observerInstance.observe(t)}get element(){return this._element}destroy(){s._deleteElementCallback(this._element,this._callback)}static _addElementCallback(t,i){s._elementCallbacks||(s._elementCallbacks=new Map);let o=s._elementCallbacks.get(t);o||(o=new Set,s._elementCallbacks.set(t,o)),o.add(i)}static _deleteElementCallback(t,i){let o=s._getElementCallbacks(t);o&&(o.delete(i),o.size||(s._elementCallbacks.delete(t),s._observerInstance.unobserve(t))),s._elementCallbacks&&!s._elementCallbacks.size&&(s._observerInstance=null,s._elementCallbacks=null)}static _getElementCallbacks(t){return s._elementCallbacks?s._elementCallbacks.get(t):null}static _createObserver(){s._observerInstance=new j.window.ResizeObserver(t=>{for(let i of t){let o=s._getElementCallbacks(i.target);if(o)for(let n of o)n(i)}})}}return s})();function Ir(s,e){s instanceof HTMLTextAreaElement&&(s.value=e),s.innerHTML=e}function Ci(s){return e=>e+s}function on(s){let e=0;for(;s.previousSibling;)s=s.previousSibling,e++;return e}function Dl(s,e,t){s.insertBefore(t,s.childNodes[e]||null)}function nn(s){return s&&s.nodeType===Node.COMMENT_NODE}function Bl(s){try{j.document.createAttribute(s)}catch{return!1}return!0}function Ai(s){return!!(s&&s.getClientRects&&s.getClientRects().length)}function Pr({element:s,target:e,positions:t,limiter:i,fitInViewport:o,viewportOffsetConfig:n}){$o(e)&&(e=e()),$o(i)&&(i=i());let r=tm(s),a=C0(n),l=new se(s),c=Fg(e,a),d;if(!c||!a.getIntersection(c))return null;let h={targetRect:c,elementRect:l,positionedElementAncestor:r,viewportRect:a};if(!i&&!o)d=new Er(t[0],h);else{if(i){let g=Fg(i,a);g&&(h.limiterRect=g)}d=A0(t,h)}return d}function Fg(s,e){let t=new se(s).getVisible();return t?t.getIntersection(e):null}function C0(s){s=Object.assign({top:0,bottom:0,left:0,right:0},s);let e=new se(j.window);return e.top+=s.top,e.height-=s.top,e.bottom-=s.bottom,e.height-=s.bottom,e}function A0(s,e){let{elementRect:t}=e,i=t.getArea(),o=s.map(a=>new Er(a,e)).filter(a=>!!a.name),n=0,r=null;for(let a of o){let{limiterIntersectionArea:l,viewportIntersectionArea:c}=a;if(l===i)return a;let d=c**2+l**2;d>n&&(n=d,r=a)}return r}var Er=class{name;config;_positioningFunctionCoordinates;_options;_cachedRect;_cachedAbsoluteRect;constructor(e,t){let i=e(t.targetRect,t.elementRect,t.viewportRect,t.limiterRect);if(!i)return;let{left:o,top:n,name:r,config:a}=i;this.name=r,this.config=a,this._positioningFunctionCoordinates={left:o,top:n},this._options=t}get left(){return this._absoluteRect.left}get top(){return this._absoluteRect.top}get limiterIntersectionArea(){let e=this._options.limiterRect;return e?e.getIntersectionArea(this._rect):0}get viewportIntersectionArea(){return this._options.viewportRect.getIntersectionArea(this._rect)}get _rect(){return this._cachedRect?this._cachedRect:(this._cachedRect=this._options.elementRect.clone().moveTo(this._positioningFunctionCoordinates.left,this._positioningFunctionCoordinates.top),this._cachedRect)}get _absoluteRect(){return this._cachedAbsoluteRect?this._cachedAbsoluteRect:(this._cachedAbsoluteRect=this._rect.toAbsoluteRect(),this._cachedAbsoluteRect)}};function zl(s){let e=s.parentNode;e&&e.removeChild(s)}function Fl({target:s,viewportOffset:e=0,ancestorOffset:t=0,alignToTop:i,forceScroll:o}){let n=Ol(s),r=n,a=null;for(e=T0(e);r;){let l;r==n?l=Og(s):l=Og(a),E0({parent:l,getRect:()=>Hg(s,r),alignToTop:i,ancestorOffset:t,forceScroll:o});let c=Hg(s,r);if(S0({window:r,rect:c,viewportOffset:e,alignToTop:i,forceScroll:o}),r.parent!=r){if(a=r.frameElement,r=r.parent,!a)return}else r=null}}function S0({window:s,rect:e,alignToTop:t,forceScroll:i,viewportOffset:o}){let n=e.clone().moveBy(0,o.bottom),r=e.clone().moveBy(0,-o.top),a=new se(s).excludeScrollbarsAndBorders(),l=[r,n],c=t&&i,d=l.every(b=>a.contains(b)),{scrollX:h,scrollY:g}=s,m=h,p=g;c?g-=a.top-e.top+o.top:d||(nm(r,a)?g-=a.top-e.top+o.top:om(n,a)&&(t?g+=e.top-a.top-o.top:g+=e.bottom-a.bottom+o.bottom)),d||(sm(e,a)?h-=a.left-e.left+o.left:rm(e,a)&&(h+=e.right-a.right+o.right)),(h!=m||g!==p)&&s.scrollTo(h,g)}function E0({parent:s,getRect:e,alignToTop:t,forceScroll:i,ancestorOffset:o=0,limiterElement:n}){let r=Ol(s),a=t&&i,l,c,d,h=n||r.document.body;for(;s!=h;)c=e(),l=new se(s).excludeScrollbarsAndBorders(),d=l.contains(c),a?s.scrollTop-=l.top-c.top+o:d||(nm(c,l)?s.scrollTop-=l.top-c.top+o:om(c,l)&&(t?s.scrollTop+=c.top-l.top-o:s.scrollTop+=c.bottom-l.bottom+o)),d||(sm(c,l)?s.scrollLeft-=l.left-c.left+o:rm(c,l)&&(s.scrollLeft+=c.right-l.right+o)),s=s.parentNode}function om(s,e){return s.bottom>e.bottom}function nm(s,e){return s.top<e.top}function sm(s,e){return s.left<e.left}function rm(s,e){return s.right>e.right}function Ol(s){return ds(s)?s.startContainer.ownerDocument.defaultView:s.ownerDocument.defaultView}function Og(s){if(ds(s)){let e=s.commonAncestorContainer;return Re(e)&&(e=e.parentNode),e}else return s.parentNode}function Hg(s,e){let t=Ol(s),i=new se(s);if(t===e)return i;{let o=t;for(;o!=e;){let n=o.frameElement,r=new se(n).excludeScrollbarsAndBorders();i.moveBy(r.left,r.top),o=o.parent}}return i}function T0(s){return typeof s=="number"?{top:s,bottom:s,left:s,right:s}:s}var I0={ctrl:"\u2303",cmd:"\u2318",alt:"\u2325",shift:"\u21E7"},P0={ctrl:"Ctrl+",alt:"Alt+",shift:"Shift+"},Wg={37:"\u2190",38:"\u2191",39:"\u2192",40:"\u2193",9:"\u21E5",33:"Page Up",34:"Page Down"},ne=R0(),M0=Object.fromEntries(Object.entries(ne).map(([s,e])=>{let t;return e in Wg?t=Wg[e]:t=s.charAt(0).toUpperCase()+s.slice(1),[e,t]}));function _i(s){let e;if(typeof s=="string"){if(e=ne[s.toLowerCase()],!e)throw new E("keyboard-unknown-key",null,{key:s})}else e=s.keyCode+(s.altKey?ne.alt:0)+(s.ctrlKey?ne.ctrl:0)+(s.shiftKey?ne.shift:0)+(s.metaKey?ne.cmd:0);return e}function hs(s){return typeof s=="string"&&(s=N0(s)),s.map(e=>typeof e=="string"?L0(e):e).reduce((e,t)=>t+e,0)}function us(s){let e=hs(s);return Object.entries(K.isMac||K.isiOS?I0:P0).reduce((o,[n,r])=>(e&ne[n]&&(e&=~ne[n],o+=r),o),"")+(e?M0[e]:"")}function am(s){return s==ne.arrowright||s==ne.arrowleft||s==ne.arrowup||s==ne.arrowdown}function gs(s,e){let t=e==="ltr";switch(s){case ne.arrowleft:return t?"left":"right";case ne.arrowright:return t?"right":"left";case ne.arrowup:return"up";case ne.arrowdown:return"down"}}function L0(s){if(s.endsWith("!"))return _i(s.slice(0,-1));let e=_i(s);return(K.isMac||K.isiOS)&&e==ne.ctrl?ne.cmd:e}function lm(s,e){let t=gs(s,e);return t==="down"||t==="right"}function R0(){let s={pageup:33,pagedown:34,arrowleft:37,arrowup:38,arrowright:39,arrowdown:40,backspace:8,delete:46,enter:13,space:32,esc:27,tab:9,ctrl:1114112,shift:2228224,alt:4456448,cmd:8912896};for(let e=65;e<=90;e++){let t=String.fromCharCode(e);s[t.toLowerCase()]=e}for(let e=48;e<=57;e++)s[e-48]=e;for(let e=112;e<=123;e++)s["f"+(e-111)]=e;return Object.assign(s,{"'":222,",":108,"-":109,".":110,"/":111,";":186,"=":187,"[":219,"\\":220,"]":221,"`":223}),s}function N0(s){return s.split("+").map(e=>e.trim())}var V0=["ar","ara","dv","div","fa","per","fas","he","heb","ku","kur","ug","uig"];function Rl(s){return V0.includes(s)?"rtl":"ltr"}function Pe(s){return Array.isArray(s)?s:[s]}j.window.CKEDITOR_TRANSLATIONS||(j.window.CKEDITOR_TRANSLATIONS={});function D0(s,e,t=1,i){if(typeof t!="number")throw new E("translation-service-quantity-not-a-number",null,{quantity:t});let o=i||j.window.CKEDITOR_TRANSLATIONS,n=F0(o);n===1&&(s=Object.keys(o)[0]);let r=e.id||e.string;if(n===0||!z0(s,r,o))return t!==1?e.plural:e.string;let a=o[s].dictionary,l=o[s].getPluralForm||(h=>h===1?0:1),c=a[r];if(typeof c=="string")return c;let d=Number(l(t));return c[d]}function B0(s){return Array.isArray(s)?s.reduce((e,t)=>Kn(e,t)):s}function z0(s,e,t){return!!t[s]&&!!t[s].dictionary[e]}function F0(s){return Object.keys(s).length}var Tr=class{uiLanguage;uiLanguageDirection;contentLanguage;contentLanguageDirection;t;translations;constructor({uiLanguage:e="en",contentLanguage:t,translations:i}={}){this.uiLanguage=e,this.contentLanguage=t||this.uiLanguage,this.uiLanguageDirection=Rl(this.uiLanguage),this.contentLanguageDirection=Rl(this.contentLanguage),this.translations=B0(i),this.t=(o,n)=>this._t(o,n)}get language(){return console.warn("locale-deprecated-language-property: The Locale#language property has been deprecated and will be removed in the near future. Please use #uiLanguage and #contentLanguage properties instead."),this.uiLanguage}_t(e,t=[]){t=Pe(t),typeof e=="string"&&(e={string:e});let o=!!e.plural?t[0]:1,n=D0(this.uiLanguage,e,o,this.translations);return O0(n,t)}};function O0(s,e){return s.replace(/%(\d+)/g,(t,i)=>i<e.length?e[i]:t)}var we=class extends ue(){_items;_itemMap;_idProperty;_bindToCollection;_bindToExternalToInternalMap;_bindToInternalToExternalMap;_skippedIndexesFromExternal;constructor(e={},t={}){super();let i=pt(e);if(i||(t=e),this._items=[],this._itemMap=new Map,this._idProperty=t.idProperty||"id",this._bindToExternalToInternalMap=new WeakMap,this._bindToInternalToExternalMap=new WeakMap,this._skippedIndexesFromExternal=[],i)for(let o of e)this._items.push(o),this._itemMap.set(this._getItemIdBeforeAdding(o),o)}get length(){return this._items.length}get first(){return this._items[0]||null}get last(){return this._items[this.length-1]||null}add(e,t){return this.addMany([e],t)}addMany(e,t){if(t===void 0)t=this._items.length;else if(t>this._items.length||t<0)throw new E("collection-add-item-invalid-index",this);let i=0;for(let o of e){let n=this._getItemIdBeforeAdding(o),r=t+i;this._items.splice(r,0,o),this._itemMap.set(n,o),this.fire("add",o,r),i++}return this.fire("change",{added:e,removed:[],index:t}),this}get(e){let t;if(typeof e=="string")t=this._itemMap.get(e);else if(typeof e=="number")t=this._items[e];else throw new E("collection-get-invalid-arg",this);return t||null}has(e){if(typeof e=="string")return this._itemMap.has(e);{let t=this._idProperty,i=e[t];return i&&this._itemMap.has(i)}}getIndex(e){let t;return typeof e=="string"?t=this._itemMap.get(e):t=e,t?this._items.indexOf(t):-1}remove(e){let[t,i]=this._remove(e);return this.fire("change",{added:[],removed:[t],index:i}),t}map(e,t){return this._items.map(e,t)}forEach(e,t){this._items.forEach(e,t)}find(e,t){return this._items.find(e,t)}filter(e,t){return this._items.filter(e,t)}clear(){this._bindToCollection&&(this.stopListening(this._bindToCollection),this._bindToCollection=null);let e=Array.from(this._items);for(;this.length;)this._remove(0);this.fire("change",{added:[],removed:e,index:0})}bindTo(e){if(this._bindToCollection)throw new E("collection-bind-to-rebind",this);return this._bindToCollection=e,{as:t=>{this._setUpBindToBinding(i=>new t(i))},using:t=>{typeof t=="function"?this._setUpBindToBinding(t):this._setUpBindToBinding(i=>i[t])}}}_setUpBindToBinding(e){let t=this._bindToCollection,i=(o,n,r)=>{let a=t._bindToCollection==this,l=t._bindToInternalToExternalMap.get(n);if(a&&l)this._bindToExternalToInternalMap.set(n,l),this._bindToInternalToExternalMap.set(l,n);else{let c=e(n);if(!c){this._skippedIndexesFromExternal.push(r);return}let d=r;for(let h of this._skippedIndexesFromExternal)r>h&&d--;for(let h of t._skippedIndexesFromExternal)d>=h&&d++;this._bindToExternalToInternalMap.set(n,c),this._bindToInternalToExternalMap.set(c,n),this.add(c,d);for(let h=0;h<t._skippedIndexesFromExternal.length;h++)d<=t._skippedIndexesFromExternal[h]&&t._skippedIndexesFromExternal[h]++}};for(let o of t)i(null,o,t.getIndex(o));this.listenTo(t,"add",i),this.listenTo(t,"remove",(o,n,r)=>{let a=this._bindToExternalToInternalMap.get(n);a&&this.remove(a),this._skippedIndexesFromExternal=this._skippedIndexesFromExternal.reduce((l,c)=>(r<c&&l.push(c-1),r>c&&l.push(c),l),[])})}_getItemIdBeforeAdding(e){let t=this._idProperty,i;if(t in e){if(i=e[t],typeof i!="string")throw new E("collection-add-invalid-id",this);if(this.get(i))throw new E("collection-add-item-already-exists",this)}else e[t]=i=We();return i}_remove(e){let t,i,o,n=!1,r=this._idProperty;if(typeof e=="string"?(i=e,o=this._itemMap.get(i),n=!o,o&&(t=this._items.indexOf(o))):typeof e=="number"?(t=e,o=this._items[t],n=!o,o&&(i=o[r])):(o=e,i=o[r],t=this._items.indexOf(o),n=t==-1||!this._itemMap.get(i)),n)throw new E("collection-remove-404",this);this._items.splice(t,1),this._itemMap.delete(i);let a=this._bindToInternalToExternalMap.get(o);return this._bindToInternalToExternalMap.delete(o),this._bindToExternalToInternalMap.delete(a),this.fire("remove",o,t),[o,t]}[Symbol.iterator](){return this._items[Symbol.iterator]()}};function Se(s){let e=s.next();return e.done?null:e.value}var Ie=class extends Ge(ge()){_elements=new Set;_nextEventLoopTimeout=null;constructor(){super(),this.set("isFocused",!1),this.set("focusedElement",null)}add(e){if(this._elements.has(e))throw new E("focustracker-add-element-already-exist",this);this.listenTo(e,"focus",()=>this._focus(e),{useCapture:!0}),this.listenTo(e,"blur",()=>this._blur(),{useCapture:!0}),this._elements.add(e)}remove(e){e===this.focusedElement&&this._blur(),this._elements.has(e)&&(this.stopListening(e),this._elements.delete(e))}destroy(){this.stopListening()}_focus(e){clearTimeout(this._nextEventLoopTimeout),this.focusedElement=e,this.isFocused=!0}_blur(){clearTimeout(this._nextEventLoopTimeout),this._nextEventLoopTimeout=setTimeout(()=>{this.focusedElement=null,this.isFocused=!1},0)}},Le=class{_listener;constructor(){this._listener=new(Ge())}listenTo(e){this._listener.listenTo(e,"keydown",(t,i)=>{this._listener.fire("_keydown:"+_i(i),i)})}set(e,t,i={}){let o=hs(e),n=i.priority;this._listener.listenTo(this._listener,"_keydown:"+o,(r,a)=>{t(a,()=>{a.preventDefault(),a.stopPropagation(),r.stop()}),r.return=!0},{priority:n})}press(e){return!!this._listener.fire("_keydown:"+_i(e),e)}stopListening(e){this._listener.stopListening(e)}destroy(){this.stopListening()}};function H0(s){let e=new Map;for(let t in s)e.set(t,s[t]);return e}function Tt(s){return pt(s)?new Map(s):H0(s)}var W0=1e4;function cm(s,e,t,i){if(Math.max(e.length,s.length)>W0)return s.slice(0,t).concat(e).concat(s.slice(t+i,s.length));{let o=Array.from(s);return o.splice(t,i,...e),o}}function sn(s,e){let t;function i(...o){i.cancel(),t=setTimeout(()=>s(...o),e)}return i.cancel=()=>{clearTimeout(t)},i}function dm(s){function e(h){return h.length>=40&&h.length<=255?"VALID":"INVALID"}if(!s)return"INVALID";let t="";try{t=atob(s)}catch{return"INVALID"}let i=t.split("-"),o=i[0],n=i[1];if(!n)return e(s);try{atob(n)}catch{try{if(atob(o),!atob(o).length)return e(s)}catch{return e(s)}}if(o.length<40||o.length>255)return"INVALID";let r="";try{atob(o),r=atob(n)}catch{return"INVALID"}if(r.length!==8)return"INVALID";let a=Number(r.substring(0,4)),l=Number(r.substring(4,6))-1,c=Number(r.substring(6,8)),d=new Date(a,l,c);return d<l0||isNaN(Number(d))?"INVALID":"VALID"}function j0(s){return!!s&&s.length==1&&/[\u0300-\u036f\u1ab0-\u1aff\u1dc0-\u1dff\u20d0-\u20ff\ufe20-\ufe2f]/.test(s)}function U0(s){return!!s&&s.length==1&&/[\ud800-\udbff]/.test(s)}function G0(s){return!!s&&s.length==1&&/[\udc00-\udfff]/.test(s)}function ms(s,e){return U0(s.charAt(e-1))&&G0(s.charAt(e))}function fs(s,e){return j0(s.charAt(e))}var $0=Y0();function Mr(s,e){let t=String(s).matchAll($0);return Array.from(t).some(i=>i.index<e&&e<i.index+i[0].length)}function Y0(){let s=[new RegExp("\\p{Emoji}[\\u{E0020}-\\u{E007E}]+\\u{E007F}","u"),new RegExp("\\p{Emoji}\\u{FE0F}?\\u{20E3}","u"),new RegExp("\\p{Emoji}\\u{FE0F}","u"),new RegExp("(?=\\p{General_Category=Other_Symbol})\\p{Emoji}\\p{Emoji_Modifier}*","u")],e=new RegExp("\\p{Regional_Indicator}{2}","u").source,t="(?:"+s.map(o=>o.source).join("|")+")",i=`${e}|${t}(?:\u200D${t})*`;return new RegExp(i,"ug")}var Dr=new WeakMap,hm=!1;function Ti({view:s,element:e,text:t,isDirectHost:i=!0,keepOnFocus:o=!1}){let n=s.document;Dr.has(n)||(Dr.set(n,new Map),n.registerPostFixer(a=>Hl(n,a)),n.on("change:isComposing",()=>{s.change(a=>Hl(n,a))},{priority:"high"})),e.is("editableElement")&&e.on("change:placeholder",(a,l,c)=>{r(c)}),e.placeholder?r(e.placeholder):t&&r(t),t&&q0();function r(a){Dr.get(n).set(e,{text:a,isDirectHost:i,keepOnFocus:o,hostElement:i?e:null}),s.change(l=>Hl(n,l))}}function Qm(s,e){return e.hasClass("ck-placeholder")?!1:(s.addClass("ck-placeholder",e),!0)}function Jm(s,e){return e.hasClass("ck-placeholder")?(s.removeClass("ck-placeholder",e),!0):!1}function ef(s,e){if(!s.isAttached()||Array.from(s.getChildren()).some(r=>!r.is("uiElement")))return!1;let i=s.document,n=i.selection.anchor;return i.isComposing&&n&&n.parent===s?!1:e||!i.isFocused?!0:!!n&&n.parent!==s}function Hl(s,e){let t=Dr.get(s),i=[],o=!1;for(let[n,r]of t)r.isDirectHost&&(i.push(n),um(e,n,r)&&(o=!0));for(let[n,r]of t){if(r.isDirectHost)continue;let a=X0(n);a&&(i.includes(a)||(r.hostElement=a,um(e,n,r)&&(o=!0)))}return o}function um(s,e,t){let{text:i,isDirectHost:o,hostElement:n}=t,r=!1;return n.getAttribute("data-placeholder")!==i&&(s.setAttribute("data-placeholder",i,n),r=!0),(o||e.childCount==1)&&ef(n,t.keepOnFocus)?Qm(s,n)&&(r=!0):Jm(s,n)&&(r=!0),r}function X0(s){if(s.childCount){let e=s.getChild(0);if(e.is("element")&&!e.is("uiElement")&&!e.is("attributeElement"))return e}return null}function q0(){hm||de("enableplaceholder-deprecated-text-option"),hm=!0}var ko=class{is(){throw new Error("is() method is abstract")}},vo=class extends ue(ko){document;parent;constructor(e){super(),this.document=e,this.parent=null}get index(){let e;if(!this.parent)return null;if((e=this.parent.getChildIndex(this))==-1)throw new E("view-node-not-found-in-parent",this);return e}get nextSibling(){let e=this.index;return e!==null&&this.parent.getChild(e+1)||null}get previousSibling(){let e=this.index;return e!==null&&this.parent.getChild(e-1)||null}get root(){let e=this;for(;e.parent;)e=e.parent;return e}isAttached(){return this.root.is("rootElement")}getPath(){let e=[],t=this;for(;t.parent;)e.unshift(t.index),t=t.parent;return e}getAncestors(e={}){let t=[],i=e.includeSelf?this:this.parent;for(;i;)t[e.parentFirst?"push":"unshift"](i),i=i.parent;return t}getCommonAncestor(e,t={}){let i=this.getAncestors(t),o=e.getAncestors(t),n=0;for(;i[n]==o[n]&&i[n];)n++;return n===0?null:i[n-1]}isBefore(e){if(this==e||this.root!==e.root)return!1;let t=this.getPath(),i=e.getPath(),o=Je(t,i);switch(o){case"prefix":return!0;case"extension":return!1;default:return t[o]<i[o]}}isAfter(e){return this==e||this.root!==e.root?!1:!this.isBefore(e)}_remove(){this.parent._removeChildren(this.index)}_fireChange(e,t){this.fire(`change:${e}`,t),this.parent&&this.parent._fireChange(e,t)}toJSON(){let e=ol(this);return delete e.parent,e}};vo.prototype.is=function(s){return s==="node"||s==="view:node"};var Te=class ql extends vo{_textData;constructor(e,t){super(e),this._textData=t}get data(){return this._textData}get _data(){return this.data}set _data(e){this._fireChange("text",this),this._textData=e}isSimilar(e){return e instanceof ql?this===e||this.data===e.data:!1}_clone(){return new ql(this.document,this.data)}};Te.prototype.is=function(s){return s==="$text"||s==="view:$text"||s==="text"||s==="view:text"||s==="node"||s==="view:node"};var ri=class extends ko{textNode;data;offsetInText;constructor(e,t,i){if(super(),this.textNode=e,t<0||t>e.data.length)throw new E("view-textproxy-wrong-offsetintext",this);if(i<0||t+i>e.data.length)throw new E("view-textproxy-wrong-length",this);this.data=e.data.substring(t,t+i),this.offsetInText=t}get offsetSize(){return this.data.length}get isPartial(){return this.data.length!==this.textNode.data.length}get parent(){return this.textNode.parent}get root(){return this.textNode.root}get document(){return this.textNode.document}getAncestors(e={}){let t=[],i=e.includeSelf?this.textNode:this.parent;for(;i!==null;)t[e.parentFirst?"push":"unshift"](i),i=i.parent;return t}};ri.prototype.is=function(s){return s==="$textProxy"||s==="view:$textProxy"||s==="textProxy"||s==="view:textProxy"};var Ot=class{_patterns=[];constructor(...e){this.add(...e)}add(...e){for(let t of e)(typeof t=="string"||t instanceof RegExp)&&(t={name:t}),this._patterns.push(t)}match(...e){for(let t of e)for(let i of this._patterns){let o=gm(t,i);if(o)return{element:t,pattern:i,match:o}}return null}matchAll(...e){let t=[];for(let i of e)for(let o of this._patterns){let n=gm(i,o);n&&t.push({element:i,pattern:o,match:n})}return t.length>0?t:null}getElementName(){if(this._patterns.length!==1)return null;let e=this._patterns[0],t=e.name;return typeof e!="function"&&t&&!(t instanceof RegExp)?t:null}};function gm(s,e){if(typeof e=="function")return e(s);let t={};return e.name&&(t.name=K0(e.name,s.name),!t.name)||e.attributes&&(t.attributes=ev(e.attributes,s),!t.attributes)||e.classes&&(t.classes=tv(e.classes,s),!t.classes)||e.styles&&(t.styles=iv(e.styles,s),!t.styles)?null:t}function K0(s,e){return s instanceof RegExp?!!e.match(s):s===e}function Pc(s,e,t){let i=Z0(s),o=Array.from(e),n=[];if(i.forEach(([r,a])=>{o.forEach(l=>{Q0(r,l)&&J0(a,l,t)&&n.push(l)})}),!(!i.length||n.length<i.length))return n}function Z0(s){return Array.isArray(s)?s.map(e=>St(e)?((e.key===void 0||e.value===void 0)&&de("matcher-pattern-missing-key-or-value",e),[e.key,e.value]):[e,!0]):St(s)?Object.entries(s):[[s,!0]]}function Q0(s,e){return s===!0||s===e||s instanceof RegExp&&e.match(s)}function J0(s,e,t){if(s===!0)return!0;let i=t(e);return s===i||s instanceof RegExp&&!!String(i).match(s)}function ev(s,e){let t=new Set(e.getAttributeKeys());return St(s)?(s.style!==void 0&&de("matcher-pattern-deprecated-attributes-style-key",s),s.class!==void 0&&de("matcher-pattern-deprecated-attributes-class-key",s)):(t.delete("style"),t.delete("class")),Pc(s,t,i=>e.getAttribute(i))}function tv(s,e){return Pc(s,e.getClassNames(),()=>{})}function iv(s,e){return Pc(s,e.getStyleNames(!0),t=>e.getStyle(t))}var un=class{_styles;_styleProcessor;constructor(e){this._styles={},this._styleProcessor=e}get isEmpty(){return!Object.entries(this._styles).length}get size(){return this.isEmpty?0:this.getStyleNames().length}setTo(e){this.clear();let t=ov(e);for(let[i,o]of t)this._styleProcessor.toNormalizedForm(i,o,this._styles)}has(e){if(this.isEmpty)return!1;let i=this._styleProcessor.getReducedForm(e,this._styles).find(([o])=>o===e);return Array.isArray(i)}set(e,t){if(Bt(e))for(let[i,o]of Object.entries(e))this._styleProcessor.toNormalizedForm(i,o,this._styles);else this._styleProcessor.toNormalizedForm(e,t,this._styles)}remove(e){let t=Kl(e);qu(this._styles,t),delete this._styles[e],this._cleanEmptyObjectsOnPath(t)}getNormalized(e){return this._styleProcessor.getNormalized(e,this._styles)}toString(){return this.isEmpty?"":this.getStylesEntries().map(e=>e.join(":")).sort().join(";")+";"}getAsString(e){if(this.isEmpty)return;if(this._styles[e]&&!Bt(this._styles[e]))return this._styles[e];let i=this._styleProcessor.getReducedForm(e,this._styles).find(([o])=>o===e);if(Array.isArray(i))return i[1]}getStyleNames(e=!1){return this.isEmpty?[]:e?this._styleProcessor.getStyleNames(this._styles):this.getStylesEntries().map(([i])=>i)}clear(){this._styles={}}getStylesEntries(){let e=[],t=Object.keys(this._styles);for(let i of t)e.push(...this._styleProcessor.getReducedForm(i,this._styles));return e}_cleanEmptyObjectsOnPath(e){let t=e.split(".");if(!(t.length>1))return;let o=t.splice(0,t.length-1).join("."),n=qn(this._styles,o);if(!n)return;!Object.keys(n).length&&this.remove(o)}},gn=class{_normalizers;_extractors;_reducers;_consumables;constructor(){this._normalizers=new Map,this._extractors=new Map,this._reducers=new Map,this._consumables=new Map}toNormalizedForm(e,t,i){if(Bt(t)){Wl(i,Kl(e),t);return}if(this._normalizers.has(e)){let o=this._normalizers.get(e),{path:n,value:r}=o(t);Wl(i,n,r)}else Wl(i,e,t)}getNormalized(e,t){if(!e)return Kn({},t);if(t[e]!==void 0)return t[e];if(this._extractors.has(e)){let i=this._extractors.get(e);if(typeof i=="string")return qn(t,i);let o=i(e,t);if(o)return o}return qn(t,Kl(e))}getReducedForm(e,t){let i=this.getNormalized(e,t);return i===void 0?[]:this._reducers.has(e)?this._reducers.get(e)(i):[[e,i]]}getStyleNames(e){let t=Array.from(this._consumables.keys()).filter(o=>{let n=this.getNormalized(o,e);return n&&typeof n=="object"?Object.keys(n).length:n}),i=new Set([...t,...Object.keys(e)]);return Array.from(i)}getRelatedStyles(e){return this._consumables.get(e)||[]}setNormalizer(e,t){this._normalizers.set(e,t)}setExtractor(e,t){this._extractors.set(e,t)}setReducer(e,t){this._reducers.set(e,t)}setStyleRelation(e,t){this._mapStyleNames(e,t);for(let i of t)this._mapStyleNames(i,[e])}_mapStyleNames(e,t){this._consumables.has(e)||this._consumables.set(e,[]),this._consumables.get(e).push(...t)}};function ov(s){let e=null,t=0,i=0,o=null,n=new Map;if(s==="")return n;s.charAt(s.length-1)!=";"&&(s=s+";");for(let r=0;r<s.length;r++){let a=s.charAt(r);if(e===null)switch(a){case":":o||(o=s.substr(t,r-t),i=r+1);break;case'"':case"'":e=a;break;case";":{let l=s.substr(i,r-i);o&&n.set(o.trim(),l.trim()),o=null,t=r+1;break}}else a===e&&(e=null)}return n}function Kl(s){return s.replace("-",".")}function Wl(s,e,t){let i=t;Bt(t)&&(i=Kn({},qn(s,e),t)),Xu(s,e,i)}var ai=class tf extends vo{name;_unsafeAttributesToRender=[];_attrs;_children;_classes;_styles;_customProperties=new Map;constructor(e,t,i,o){if(super(e),this.name=t,this._attrs=nv(i),this._children=[],o&&this._insertChild(0,o),this._classes=new Set,this._attrs.has("class")){let n=this._attrs.get("class");mm(this._classes,n),this._attrs.delete("class")}this._styles=new un(this.document.stylesProcessor),this._attrs.has("style")&&(this._styles.setTo(this._attrs.get("style")),this._attrs.delete("style"))}get childCount(){return this._children.length}get isEmpty(){return this._children.length===0}getChild(e){return this._children[e]}getChildIndex(e){return this._children.indexOf(e)}getChildren(){return this._children[Symbol.iterator]()}*getAttributeKeys(){this._classes.size>0&&(yield"class"),this._styles.isEmpty||(yield"style"),yield*Ae(this._attrs.keys())}*getAttributes(){yield*Ae(this._attrs.entries()),this._classes.size>0&&(yield["class",this.getAttribute("class")]),this._styles.isEmpty||(yield["style",this.getAttribute("style")])}getAttribute(e){if(e=="class")return this._classes.size>0?[...this._classes].join(" "):void 0;if(e=="style"){let t=this._styles.toString();return t==""?void 0:t}return this._attrs.get(e)}hasAttribute(e){return e=="class"?this._classes.size>0:e=="style"?!this._styles.isEmpty:this._attrs.has(e)}isSimilar(e){if(!(e instanceof tf))return!1;if(this===e)return!0;if(this.name!=e.name||this._attrs.size!==e._attrs.size||this._classes.size!==e._classes.size||this._styles.size!==e._styles.size)return!1;for(let[t,i]of this._attrs)if(!e._attrs.has(t)||e._attrs.get(t)!==i)return!1;for(let t of this._classes)if(!e._classes.has(t))return!1;for(let t of this._styles.getStyleNames())if(!e._styles.has(t)||e._styles.getAsString(t)!==this._styles.getAsString(t))return!1;return!0}hasClass(...e){for(let t of e)if(!this._classes.has(t))return!1;return!0}getClassNames(){return this._classes.keys()}getStyle(e){return this._styles.getAsString(e)}getNormalizedStyle(e){return this._styles.getNormalized(e)}getStyleNames(e){return this._styles.getStyleNames(e)}hasStyle(...e){for(let t of e)if(!this._styles.has(t))return!1;return!0}findAncestor(...e){let t=new Ot(...e),i=this.parent;for(;i&&!i.is("documentFragment");){if(t.match(i))return i;i=i.parent}return null}getCustomProperty(e){return this._customProperties.get(e)}*getCustomProperties(){yield*Ae(this._customProperties.entries())}getIdentity(){let e=Array.from(this._classes).sort().join(","),t=this._styles.toString(),i=Array.from(this._attrs).map(o=>`${o[0]}="${o[1]}"`).sort().join(" ");return this.name+(e==""?"":` class="${e}"`)+(t?` style="${t}"`:"")+(i==""?"":` ${i}`)}shouldRenderUnsafeAttribute(e){return this._unsafeAttributesToRender.includes(e)}_clone(e=!1){let t=[];if(e)for(let o of this.getChildren())t.push(o._clone(e));let i=new this.constructor(this.document,this.name,this._attrs,t);return i._classes=new Set(this._classes),i._styles.set(this._styles.getNormalized()),i._customProperties=new Map(this._customProperties),i.getFillerOffset=this.getFillerOffset,i._unsafeAttributesToRender=this._unsafeAttributesToRender,i}_appendChild(e){return this._insertChild(this.childCount,e)}_insertChild(e,t){this._fireChange("children",this);let i=0,o=sv(this.document,t);for(let n of o)n.parent!==null&&n._remove(),n.parent=this,n.document=this.document,this._children.splice(e,0,n),e++,i++;return i}_removeChildren(e,t=1){this._fireChange("children",this);for(let i=e;i<e+t;i++)this._children[i].parent=null;return this._children.splice(e,t)}_setAttribute(e,t){let i=String(t);this._fireChange("attributes",this),e=="class"?mm(this._classes,i):e=="style"?this._styles.setTo(i):this._attrs.set(e,i)}_removeAttribute(e){return this._fireChange("attributes",this),e=="class"?this._classes.size>0?(this._classes.clear(),!0):!1:e=="style"?this._styles.isEmpty?!1:(this._styles.clear(),!0):this._attrs.delete(e)}_addClass(e){this._fireChange("attributes",this);for(let t of Pe(e))this._classes.add(t)}_removeClass(e){this._fireChange("attributes",this);for(let t of Pe(e))this._classes.delete(t)}_setStyle(e,t){this._fireChange("attributes",this),typeof e!="string"?this._styles.set(e):this._styles.set(e,t)}_removeStyle(e){this._fireChange("attributes",this);for(let t of Pe(e))this._styles.remove(t)}_setCustomProperty(e,t){this._customProperties.set(e,t)}_removeCustomProperty(e){return this._customProperties.delete(e)}};ai.prototype.is=function(s,e){return e?e===this.name&&(s==="element"||s==="view:element"):s==="element"||s==="view:element"||s==="node"||s==="view:node"};function nv(s){let e=Tt(s);for(let[t,i]of e)i===null?e.delete(t):typeof i!="string"&&e.set(t,String(i));return e}function mm(s,e){let t=e.split(/\s+/);s.clear(),t.forEach(i=>s.add(i))}function sv(s,e){return typeof e=="string"?[new Te(s,e)]:(pt(e)||(e=[e]),Array.from(e).map(t=>typeof t=="string"?new Te(s,t):t instanceof ri?new Te(s,t.data):t))}var Ei=class extends ai{constructor(e,t,i,o){super(e,t,i,o),this.getFillerOffset=of}};Ei.prototype.is=function(s,e){return e?e===this.name&&(s==="containerElement"||s==="view:containerElement"||s==="element"||s==="view:element"):s==="containerElement"||s==="view:containerElement"||s==="element"||s==="view:element"||s==="node"||s==="view:node"};function of(){let s=[...this.getChildren()],e=s[this.childCount-1];if(e&&e.is("element","br"))return this.childCount;for(let t of s)if(!t.is("uiElement"))return null;return this.childCount}var mn=class extends ge(Ei){constructor(e,t,i,o){super(e,t,i,o),this.set("isReadOnly",!1),this.set("isFocused",!1),this.set("placeholder",void 0),this.bind("isReadOnly").to(e),this.bind("isFocused").to(e,"isFocused",n=>n&&e.selection.editableElement==this),this.listenTo(e.selection,"change",()=>{this.isFocused=e.isFocused&&e.selection.editableElement==this})}destroy(){this.stopListening()}};mn.prototype.is=function(s,e){return e?e===this.name&&(s==="editableElement"||s==="view:editableElement"||s==="containerElement"||s==="view:containerElement"||s==="element"||s==="view:element"):s==="editableElement"||s==="view:editableElement"||s==="containerElement"||s==="view:containerElement"||s==="element"||s==="view:element"||s==="node"||s==="view:node"};var fm=Symbol("rootName"),_s=class extends mn{constructor(e,t){super(e,t),this.rootName="main"}get rootName(){return this.getCustomProperty(fm)}set rootName(e){this._setCustomProperty(fm,e)}set _name(e){this.name=e}};_s.prototype.is=function(s,e){return e?e===this.name&&(s==="rootElement"||s==="view:rootElement"||s==="editableElement"||s==="view:editableElement"||s==="containerElement"||s==="view:containerElement"||s==="element"||s==="view:element"):s==="rootElement"||s==="view:rootElement"||s==="editableElement"||s==="view:editableElement"||s==="containerElement"||s==="view:containerElement"||s==="element"||s==="view:element"||s==="node"||s==="view:node"};var lo=class{direction;boundaries;singleCharacters;shallow;ignoreElementEnd;_position;_boundaryStartParent;_boundaryEndParent;constructor(e={}){if(!e.boundaries&&!e.startPosition)throw new E("view-tree-walker-no-start-position",null);if(e.direction&&e.direction!="forward"&&e.direction!="backward")throw new E("view-tree-walker-unknown-direction",e.startPosition,{direction:e.direction});this.boundaries=e.boundaries||null,e.startPosition?this._position=O._createAt(e.startPosition):this._position=O._createAt(e.boundaries[e.direction=="backward"?"end":"start"]),this.direction=e.direction||"forward",this.singleCharacters=!!e.singleCharacters,this.shallow=!!e.shallow,this.ignoreElementEnd=!!e.ignoreElementEnd,this._boundaryStartParent=this.boundaries?this.boundaries.start.parent:null,this._boundaryEndParent=this.boundaries?this.boundaries.end.parent:null}[Symbol.iterator](){return this}get position(){return this._position}skip(e){let t,i;do i=this.position,t=this.next();while(!t.done&&e(t.value));t.done||(this._position=i)}next(){return this.direction=="forward"?this._next():this._previous()}_next(){let e=this.position.clone(),t=this.position,i=e.parent;if(i.parent===null&&e.offset===i.childCount)return{done:!0,value:void 0};if(i===this._boundaryEndParent&&e.offset==this.boundaries.end.offset)return{done:!0,value:void 0};let o;if(i instanceof Te){if(e.isAtEnd)return this._position=O._createAfter(i),this._next();o=i.data[e.offset]}else o=i.getChild(e.offset);if(o instanceof ai){if(!this.shallow)e=new O(o,0);else{if(this.boundaries&&this.boundaries.end.isBefore(e))return{done:!0,value:void 0};e.offset++}return this._position=e,this._formatReturnValue("elementStart",o,t,e,1)}if(o instanceof Te){if(this.singleCharacters)return e=new O(o,0),this._position=e,this._next();let n=o.data.length,r;return o==this._boundaryEndParent?(n=this.boundaries.end.offset,r=new ri(o,0,n),e=O._createAfter(r)):(r=new ri(o,0,o.data.length),e.offset++),this._position=e,this._formatReturnValue("text",r,t,e,n)}if(typeof o=="string"){let n;this.singleCharacters?n=1:n=(i===this._boundaryEndParent?this.boundaries.end.offset:i.data.length)-e.offset;let r=new ri(i,e.offset,n);return e.offset+=n,this._position=e,this._formatReturnValue("text",r,t,e,n)}return e=O._createAfter(i),this._position=e,this.ignoreElementEnd?this._next():this._formatReturnValue("elementEnd",i,t,e)}_previous(){let e=this.position.clone(),t=this.position,i=e.parent;if(i.parent===null&&e.offset===0)return{done:!0,value:void 0};if(i==this._boundaryStartParent&&e.offset==this.boundaries.start.offset)return{done:!0,value:void 0};let o;if(i instanceof Te){if(e.isAtStart)return this._position=O._createBefore(i),this._previous();o=i.data[e.offset-1]}else o=i.getChild(e.offset-1);if(o instanceof ai)return this.shallow?(e.offset--,this._position=e,this._formatReturnValue("elementStart",o,t,e,1)):(e=new O(o,o.childCount),this._position=e,this.ignoreElementEnd?this._previous():this._formatReturnValue("elementEnd",o,t,e));if(o instanceof Te){if(this.singleCharacters)return e=new O(o,o.data.length),this._position=e,this._previous();let n=o.data.length,r;if(o==this._boundaryStartParent){let a=this.boundaries.start.offset;r=new ri(o,a,o.data.length-a),n=r.data.length,e=O._createBefore(r)}else r=new ri(o,0,o.data.length),e.offset--;return this._position=e,this._formatReturnValue("text",r,t,e,n)}if(typeof o=="string"){let n;if(this.singleCharacters)n=1;else{let a=i===this._boundaryStartParent?this.boundaries.start.offset:0;n=e.offset-a}e.offset-=n;let r=new ri(i,e.offset,n);return this._position=e,this._formatReturnValue("text",r,t,e,n)}return e=O._createBefore(i),this._position=e,this._formatReturnValue("elementStart",i,t,e,1)}_formatReturnValue(e,t,i,o,n){return t instanceof ri&&(t.offsetInText+t.data.length==t.textNode.data.length&&(this.direction=="forward"&&!(this.boundaries&&this.boundaries.end.isEqual(this.position))?(o=O._createAfter(t.textNode),this._position=o):i=O._createAfter(t.textNode)),t.offsetInText===0&&(this.direction=="backward"&&!(this.boundaries&&this.boundaries.start.isEqual(this.position))?(o=O._createBefore(t.textNode),this._position=o):i=O._createBefore(t.textNode))),{done:!1,value:{type:e,item:t,previousPosition:i,nextPosition:o,length:n}}}},O=class Si extends ko{parent;offset;constructor(e,t){super(),this.parent=e,this.offset=t}get nodeAfter(){return this.parent.is("$text")?null:this.parent.getChild(this.offset)||null}get nodeBefore(){return this.parent.is("$text")?null:this.parent.getChild(this.offset-1)||null}get isAtStart(){return this.offset===0}get isAtEnd(){let e=this.parent.is("$text")?this.parent.data.length:this.parent.childCount;return this.offset===e}get root(){return this.parent.root}get editableElement(){let e=this.parent;for(;!(e instanceof mn);)if(e.parent)e=e.parent;else return null;return e}getShiftedBy(e){let t=Si._createAt(this),i=t.offset+e;return t.offset=i<0?0:i,t}getLastMatchingPosition(e,t={}){t.startPosition=this;let i=new lo(t);return i.skip(e),i.position}getAncestors(){return this.parent.is("documentFragment")?[this.parent]:this.parent.getAncestors({includeSelf:!0})}getCommonAncestor(e){let t=this.getAncestors(),i=e.getAncestors(),o=0;for(;t[o]==i[o]&&t[o];)o++;return o===0?null:t[o-1]}isEqual(e){return this.parent==e.parent&&this.offset==e.offset}isBefore(e){return this.compareWith(e)=="before"}isAfter(e){return this.compareWith(e)=="after"}compareWith(e){if(this.root!==e.root)return"different";if(this.isEqual(e))return"same";let t=this.parent.is("node")?this.parent.getPath():[],i=e.parent.is("node")?e.parent.getPath():[];t.push(this.offset),i.push(e.offset);let o=Je(t,i);switch(o){case"prefix":return"before";case"extension":return"after";default:return t[o]<i[o]?"before":"after"}}getWalker(e={}){return e.startPosition=this,new lo(e)}clone(){return new Si(this.parent,this.offset)}static _createAt(e,t){if(e instanceof Si)return new this(e.parent,e.offset);{let i=e;if(t=="end")t=i.is("$text")?i.data.length:i.childCount;else{if(t=="before")return this._createBefore(i);if(t=="after")return this._createAfter(i);if(t!==0&&!t)throw new E("view-createpositionat-offset-required",i)}return new Si(i,t)}}static _createAfter(e){if(e.is("$textProxy"))return new Si(e.textNode,e.offsetInText+e.data.length);if(!e.parent)throw new E("view-position-after-root",e,{root:e});return new Si(e.parent,e.index+1)}static _createBefore(e){if(e.is("$textProxy"))return new Si(e.textNode,e.offsetInText);if(!e.parent)throw new E("view-position-before-root",e,{root:e});return new Si(e.parent,e.index)}};O.prototype.is=function(s){return s==="position"||s==="view:position"};var re=class Bi extends ko{start;end;constructor(e,t=null){super(),this.start=e.clone(),this.end=t?t.clone():e.clone()}*[Symbol.iterator](){yield*Ae(new lo({boundaries:this,ignoreElementEnd:!0}))}get isCollapsed(){return this.start.isEqual(this.end)}get isFlat(){return this.start.parent===this.end.parent}get root(){return this.start.root}getEnlarged(){let e=this.start.getLastMatchingPosition(Lr,{direction:"backward"}),t=this.end.getLastMatchingPosition(Lr);return e.parent.is("$text")&&e.isAtStart&&(e=O._createBefore(e.parent)),t.parent.is("$text")&&t.isAtEnd&&(t=O._createAfter(t.parent)),new Bi(e,t)}getTrimmed(){let e=this.start.getLastMatchingPosition(Lr);if(e.isAfter(this.end)||e.isEqual(this.end))return new Bi(e,e);let t=this.end.getLastMatchingPosition(Lr,{direction:"backward"}),i=e.nodeAfter,o=t.nodeBefore;return i&&i.is("$text")&&(e=new O(i,0)),o&&o.is("$text")&&(t=new O(o,o.data.length)),new Bi(e,t)}isEqual(e){return this==e||this.start.isEqual(e.start)&&this.end.isEqual(e.end)}containsPosition(e){return e.isAfter(this.start)&&e.isBefore(this.end)}containsRange(e,t=!1){e.isCollapsed&&(t=!1);let i=this.containsPosition(e.start)||t&&this.start.isEqual(e.start),o=this.containsPosition(e.end)||t&&this.end.isEqual(e.end);return i&&o}getDifference(e){let t=[];return this.isIntersecting(e)?(this.containsPosition(e.start)&&t.push(new Bi(this.start,e.start)),this.containsPosition(e.end)&&t.push(new Bi(e.end,this.end))):t.push(this.clone()),t}getIntersection(e){if(this.isIntersecting(e)){let t=this.start,i=this.end;return this.containsPosition(e.start)&&(t=e.start),this.containsPosition(e.end)&&(i=e.end),new Bi(t,i)}return null}getWalker(e={}){return e.boundaries=this,new lo(e)}getCommonAncestor(){return this.start.getCommonAncestor(this.end)}getContainedElement(){if(this.isCollapsed)return null;let e=this.start.nodeAfter,t=this.end.nodeBefore;return this.start.parent.is("$text")&&this.start.isAtEnd&&this.start.parent.nextSibling&&(e=this.start.parent.nextSibling),this.end.parent.is("$text")&&this.end.isAtStart&&this.end.parent.previousSibling&&(t=this.end.parent.previousSibling),e&&e.is("element")&&e===t?e:null}clone(){return new Bi(this.start,this.end)}*getItems(e={}){e.boundaries=this,e.ignoreElementEnd=!0;let t=new lo(e);for(let i of t)yield i.item}*getPositions(e={}){e.boundaries=this;let t=new lo(e);yield t.position;for(let i of t)yield i.nextPosition}isIntersecting(e){return this.start.isBefore(e.end)&&this.end.isAfter(e.start)}static _createFromParentsAndOffsets(e,t,i,o){return new this(new O(e,t),new O(i,o))}static _createFromPositionAndShift(e,t){let i=e,o=e.getShiftedBy(t);return t>0?new this(i,o):new this(o,i)}static _createIn(e){return this._createFromParentsAndOffsets(e,0,e,e.childCount)}static _createOn(e){let t=e.is("$textProxy")?e.offsetSize:1;return this._createFromPositionAndShift(O._createBefore(e),t)}};re.prototype.is=function(s){return s==="range"||s==="view:range"};function Lr(s){return!!(s.item.is("attributeElement")||s.item.is("uiElement"))}var Oi=class nf extends ue(ko){_ranges;_lastRangeBackward;_isFake;_fakeSelectionLabel;constructor(...e){super(),this._ranges=[],this._lastRangeBackward=!1,this._isFake=!1,this._fakeSelectionLabel="",e.length&&this.setTo(...e)}get isFake(){return this._isFake}get fakeSelectionLabel(){return this._fakeSelectionLabel}get anchor(){if(!this._ranges.length)return null;let e=this._ranges[this._ranges.length-1];return(this._lastRangeBackward?e.end:e.start).clone()}get focus(){if(!this._ranges.length)return null;let e=this._ranges[this._ranges.length-1];return(this._lastRangeBackward?e.start:e.end).clone()}get isCollapsed(){return this.rangeCount===1&&this._ranges[0].isCollapsed}get rangeCount(){return this._ranges.length}get isBackward(){return!this.isCollapsed&&this._lastRangeBackward}get editableElement(){return this.anchor?this.anchor.editableElement:null}*getRanges(){for(let e of this._ranges)yield e.clone()}getFirstRange(){let e=null;for(let t of this._ranges)(!e||t.start.isBefore(e.start))&&(e=t);return e?e.clone():null}getLastRange(){let e=null;for(let t of this._ranges)(!e||t.end.isAfter(e.end))&&(e=t);return e?e.clone():null}getFirstPosition(){let e=this.getFirstRange();return e?e.start.clone():null}getLastPosition(){let e=this.getLastRange();return e?e.end.clone():null}isEqual(e){if(this.isFake!=e.isFake||this.isFake&&this.fakeSelectionLabel!=e.fakeSelectionLabel||this.rangeCount!=e.rangeCount)return!1;if(this.rangeCount===0)return!0;if(!this.anchor.isEqual(e.anchor)||!this.focus.isEqual(e.focus))return!1;for(let t of this._ranges){let i=!1;for(let o of e._ranges)if(t.isEqual(o)){i=!0;break}if(!i)return!1}return!0}isSimilar(e){if(this.isBackward!=e.isBackward)return!1;let t=cs(this.getRanges()),i=cs(e.getRanges());if(t!=i)return!1;if(t==0)return!0;for(let o of this.getRanges()){o=o.getTrimmed();let n=!1;for(let r of e.getRanges())if(r=r.getTrimmed(),o.start.isEqual(r.start)&&o.end.isEqual(r.end)){n=!0;break}if(!n)return!1}return!0}getSelectedElement(){return this.rangeCount!==1?null:this.getFirstRange().getContainedElement()}setTo(...e){let[t,i,o]=e;if(typeof i=="object"&&(o=i,i=void 0),t===null)this._setRanges([]),this._setFakeOptions(o);else if(t instanceof nf||t instanceof Vs)this._setRanges(t.getRanges(),t.isBackward),this._setFakeOptions({fake:t.isFake,label:t.fakeSelectionLabel});else if(t instanceof re)this._setRanges([t],o&&o.backward),this._setFakeOptions(o);else if(t instanceof O)this._setRanges([new re(t)]),this._setFakeOptions(o);else if(t instanceof vo){let n=!!o&&!!o.backward,r;if(i===void 0)throw new E("view-selection-setto-required-second-parameter",this);i=="in"?r=re._createIn(t):i=="on"?r=re._createOn(t):r=new re(O._createAt(t,i)),this._setRanges([r],n),this._setFakeOptions(o)}else if(pt(t))this._setRanges(t,o&&o.backward),this._setFakeOptions(o);else throw new E("view-selection-setto-not-selectable",this);this.fire("change")}setFocus(e,t){if(this.anchor===null)throw new E("view-selection-setfocus-no-ranges",this);let i=O._createAt(e,t);if(i.compareWith(this.focus)=="same")return;let o=this.anchor;this._ranges.pop(),i.compareWith(o)=="before"?this._addRange(new re(i,o),!0):this._addRange(new re(o,i)),this.fire("change")}_setRanges(e,t=!1){e=Array.from(e),this._ranges=[];for(let i of e)this._addRange(i);this._lastRangeBackward=!!t}_setFakeOptions(e={}){this._isFake=!!e.fake,this._fakeSelectionLabel=e.fake&&e.label||""}_addRange(e,t=!1){if(!(e instanceof re))throw new E("view-selection-add-range-not-range",this);this._pushRange(e),this._lastRangeBackward=!!t}_pushRange(e){for(let t of this._ranges)if(e.isIntersecting(t))throw new E("view-selection-range-intersects",this,{addedRange:e,intersectingRange:t});this._ranges.push(new re(e.start,e.end))}};Oi.prototype.is=function(s){return s==="selection"||s==="view:selection"};var Vs=class extends ue(ko){_selection;constructor(...e){super(),this._selection=new Oi,this._selection.delegate("change").to(this),e.length&&this._selection.setTo(...e)}get isFake(){return this._selection.isFake}get fakeSelectionLabel(){return this._selection.fakeSelectionLabel}get anchor(){return this._selection.anchor}get focus(){return this._selection.focus}get isCollapsed(){return this._selection.isCollapsed}get rangeCount(){return this._selection.rangeCount}get isBackward(){return this._selection.isBackward}get editableElement(){return this._selection.editableElement}get _ranges(){return this._selection._ranges}*getRanges(){yield*Ae(this._selection.getRanges())}getFirstRange(){return this._selection.getFirstRange()}getLastRange(){return this._selection.getLastRange()}getFirstPosition(){return this._selection.getFirstPosition()}getLastPosition(){return this._selection.getLastPosition()}getSelectedElement(){return this._selection.getSelectedElement()}isEqual(e){return this._selection.isEqual(e)}isSimilar(e){return this._selection.isSimilar(e)}_setTo(...e){this._selection.setTo(...e)}_setFocus(e,t){this._selection.setFocus(e,t)}};Vs.prototype.is=function(s){return s==="selection"||s=="documentSelection"||s=="view:selection"||s=="view:documentSelection"};var li=class extends xt{startRange;_eventPhase;_currentTarget;constructor(e,t,i){super(e,t),this.startRange=i,this._eventPhase="none",this._currentTarget=null}get eventPhase(){return this._eventPhase}get currentTarget(){return this._currentTarget}},jl=Symbol("bubbling contexts");function Zl(s){class e extends s{fire(i,...o){try{let n=i instanceof xt?i:new xt(this,i),r=Ul(this);if(!r.size)return;if(ps(n,"capturing",this),rn(r,"$capture",n,...o))return n.return;let a=n.startRange||this.selection.getFirstRange(),l=a?a.getContainedElement():null,c=l?!!sf(r,l):!1,d=l||rv(a);if(ps(n,"atTarget",d),!c){if(rn(r,"$text",n,...o))return n.return;ps(n,"bubbling",d)}for(;d;){if(d.is("rootElement")){if(rn(r,"$root",n,...o))return n.return}else if(d.is("element")&&rn(r,d.name,n,...o))return n.return;if(rn(r,d,n,...o))return n.return;d=d.parent,ps(n,"bubbling",d)}return ps(n,"bubbling",this),rn(r,"$document",n,...o),n.return}catch(n){E.rethrowUnexpectedError(n,this)}}_addEventListener(i,o,n){let r=Pe(n.context||"$document"),a=Ul(this);for(let l of r){let c=a.get(l);c||(c=new(ue()),a.set(l,c)),this.listenTo(c,i,o,n)}}_removeEventListener(i,o){let n=Ul(this);for(let r of n.values())this.stopListening(r,i,o)}}return e}{let s=Zl(Object);["fire","_addEventListener","_removeEventListener"].forEach(e=>{Zl[e]=s.prototype[e]})}function ps(s,e,t){s instanceof li&&(s._eventPhase=e,s._currentTarget=t)}function rn(s,e,t,...i){let o=typeof e=="string"?s.get(e):sf(s,e);return o?(o.fire(t,...i),t.stop.called):!1}function sf(s,e){for(let[t,i]of s)if(typeof t=="function"&&t(e))return i;return null}function Ul(s){return s[jl]||(s[jl]=new Map),s[jl]}function rv(s){if(!s)return null;let e=s.start.parent,t=s.end.parent,i=e.getPath(),o=t.getPath();return i.length>o.length?e:t}var Gr=class extends Zl(ge()){selection;roots;stylesProcessor;_postFixers=new Set;constructor(e){super(),this.selection=new Vs,this.roots=new we({idProperty:"rootName"}),this.stylesProcessor=e,this.set("isReadOnly",!1),this.set("isFocused",!1),this.set("isSelecting",!1),this.set("isComposing",!1)}getRoot(e="main"){return this.roots.get(e)}registerPostFixer(e){this._postFixers.add(e)}destroy(){this.roots.forEach(e=>e.destroy()),this.stopListening()}_callPostFixers(e){let t=!1;do for(let i of this._postFixers)if(t=i(e),t)break;while(t)}},pm=10,co=(()=>{class s extends ai{static DEFAULT_PRIORITY=pm;_priority=pm;_id=null;_clonesGroup=null;constructor(t,i,o,n){super(t,i,o,n),this.getFillerOffset=av}get priority(){return this._priority}get id(){return this._id}getElementsWithSameId(){if(this.id===null)throw new E("attribute-element-get-elements-with-same-id-no-id",this);return new Set(this._clonesGroup)}isSimilar(t){return this.id!==null||t.id!==null?this.id===t.id:super.isSimilar(t)&&this.priority==t.priority}_clone(t=!1){let i=super._clone(t);return i._priority=this._priority,i._id=this._id,i}}return s})();co.prototype.is=function(s,e){return e?e===this.name&&(s==="attributeElement"||s==="view:attributeElement"||s==="element"||s==="view:element"):s==="attributeElement"||s==="view:attributeElement"||s==="element"||s==="view:element"||s==="node"||s==="view:node"};function av(){if(Gl(this))return null;let s=this.parent;for(;s&&s.is("attributeElement");){if(Gl(s)>1)return null;s=s.parent}return!s||Gl(s)>1?null:this.childCount}function Gl(s){return Array.from(s.getChildren()).filter(e=>!e.is("uiElement")).length}var fn=class extends ai{constructor(e,t,i,o){super(e,t,i,o),this.getFillerOffset=lv}_insertChild(e,t){if(t&&(t instanceof vo||Array.from(t).length>0))throw new E("view-emptyelement-cannot-add",[this,t]);return 0}};fn.prototype.is=function(s,e){return e?e===this.name&&(s==="emptyElement"||s==="view:emptyElement"||s==="element"||s==="view:element"):s==="emptyElement"||s==="view:emptyElement"||s==="element"||s==="view:element"||s==="node"||s==="view:node"};function lv(){return null}var go=class extends ai{constructor(e,t,i,o){super(e,t,i,o),this.getFillerOffset=dv}_insertChild(e,t){if(t&&(t instanceof vo||Array.from(t).length>0))throw new E("view-uielement-cannot-add",[this,t]);return 0}render(e,t){return this.toDomElement(e)}toDomElement(e){let t=e.createElement(this.name);for(let i of this.getAttributeKeys())t.setAttribute(i,this.getAttribute(i));return t}};go.prototype.is=function(s,e){return e?e===this.name&&(s==="uiElement"||s==="view:uiElement"||s==="element"||s==="view:element"):s==="uiElement"||s==="view:uiElement"||s==="element"||s==="view:element"||s==="node"||s==="view:node"};function cv(s){s.document.on("arrowKey",(e,t)=>hv(e,t,s.domConverter),{priority:"low"})}function dv(){return null}function hv(s,e,t){if(e.keyCode==ne.arrowright){let i=e.domTarget.ownerDocument.defaultView.getSelection(),o=i.rangeCount==1&&i.getRangeAt(0).collapsed;if(o||e.shiftKey){let n=i.focusNode,r=i.focusOffset,a=t.domPositionToView(n,r);if(a===null)return;let l=!1,c=a.getLastMatchingPosition(d=>(d.item.is("uiElement")&&(l=!0),!!(d.item.is("uiElement")||d.item.is("attributeElement"))));if(l){let d=t.viewPositionToDom(c);o?i.collapse(d.parent,d.offset):i.extend(d.parent,d.offset)}}}}var pn=class extends ai{constructor(e,t,i,o){super(e,t,i,o),this.getFillerOffset=uv}_insertChild(e,t){if(t&&(t instanceof vo||Array.from(t).length>0))throw new E("view-rawelement-cannot-add",[this,t]);return 0}render(e,t){}};pn.prototype.is=function(s,e){return e?e===this.name&&(s==="rawElement"||s==="view:rawElement"||s==="element"||s==="view:element"):s==="rawElement"||s==="view:rawElement"||s===this.name||s==="view:"+this.name||s==="element"||s==="view:element"||s==="node"||s==="view:node"};function uv(){return null}var ho=class extends ue(ko){document;_children=[];_customProperties=new Map;constructor(e,t){super(),this.document=e,t&&this._insertChild(0,t)}[Symbol.iterator](){return this._children[Symbol.iterator]()}get childCount(){return this._children.length}get isEmpty(){return this.childCount===0}get root(){return this}get parent(){return null}get name(){}get getFillerOffset(){}getCustomProperty(e){return this._customProperties.get(e)}*getCustomProperties(){yield*Ae(this._customProperties.entries())}_appendChild(e){return this._insertChild(this.childCount,e)}getChild(e){return this._children[e]}getChildIndex(e){return this._children.indexOf(e)}getChildren(){return this._children[Symbol.iterator]()}_insertChild(e,t){this._fireChange("children",this);let i=0,o=gv(this.document,t);for(let n of o)n.parent!==null&&n._remove(),n.parent=this,this._children.splice(e,0,n),e++,i++;return i}_removeChildren(e,t=1){this._fireChange("children",this);for(let i=e;i<e+t;i++)this._children[i].parent=null;return this._children.splice(e,t)}_fireChange(e,t){this.fire("change:"+e,t)}_setCustomProperty(e,t){this._customProperties.set(e,t)}_removeCustomProperty(e){return this._customProperties.delete(e)}};ho.prototype.is=function(s){return s==="documentFragment"||s==="view:documentFragment"};function gv(s,e){return typeof e=="string"?[new Te(s,e)]:(pt(e)||(e=[e]),Array.from(e).map(t=>typeof t=="string"?new Te(s,t):t instanceof ri?new Te(s,t.data):t))}var Cs=class{document;_cloneGroups=new Map;_slotFactory=null;constructor(e){this.document=e}setSelection(...e){this.document.selection._setTo(...e)}setSelectionFocus(e,t){this.document.selection._setFocus(e,t)}createDocumentFragment(e){return new ho(this.document,e)}createText(e){return new Te(this.document,e)}createAttributeElement(e,t,i={}){let o=new co(this.document,e,t);return typeof i.priority=="number"&&(o._priority=i.priority),i.id&&(o._id=i.id),i.renderUnsafeAttributes&&o._unsafeAttributesToRender.push(...i.renderUnsafeAttributes),o}createContainerElement(e,t,i={},o={}){let n=null;St(i)?o=i:n=i;let r=new Ei(this.document,e,t,n);return o.renderUnsafeAttributes&&r._unsafeAttributesToRender.push(...o.renderUnsafeAttributes),r}createEditableElement(e,t,i={}){let o=new mn(this.document,e,t);return i.renderUnsafeAttributes&&o._unsafeAttributesToRender.push(...i.renderUnsafeAttributes),o}createEmptyElement(e,t,i={}){let o=new fn(this.document,e,t);return i.renderUnsafeAttributes&&o._unsafeAttributesToRender.push(...i.renderUnsafeAttributes),o}createUIElement(e,t,i){let o=new go(this.document,e,t);return i&&(o.render=i),o}createRawElement(e,t,i,o={}){let n=new pn(this.document,e,t);return i&&(n.render=i),o.renderUnsafeAttributes&&n._unsafeAttributesToRender.push(...o.renderUnsafeAttributes),n}setAttribute(e,t,i){i._setAttribute(e,t)}removeAttribute(e,t){t._removeAttribute(e)}addClass(e,t){t._addClass(e)}removeClass(e,t){t._removeClass(e)}setStyle(e,t,i){St(e)&&i===void 0?t._setStyle(e):i._setStyle(e,t)}removeStyle(e,t){t._removeStyle(e)}setCustomProperty(e,t,i){i._setCustomProperty(e,t)}removeCustomProperty(e,t){return t._removeCustomProperty(e)}breakAttributes(e){return e instanceof O?this._breakAttributes(e):this._breakAttributesRange(e)}breakContainer(e){let t=e.parent;if(!t.is("containerElement"))throw new E("view-writer-break-non-container-element",this.document);if(!t.parent)throw new E("view-writer-break-root",this.document);if(e.isAtStart)return O._createBefore(t);if(!e.isAtEnd){let i=t._clone(!1);this.insert(O._createAfter(t),i);let o=new re(e,O._createAt(t,"end")),n=new O(i,0);this.move(o,n)}return O._createAfter(t)}mergeAttributes(e){let t=e.offset,i=e.parent;if(i.is("$text"))return e;if(i.is("attributeElement")&&i.childCount===0){let r=i.parent,a=i.index;return i._remove(),this._removeFromClonedElementsGroup(i),this.mergeAttributes(new O(r,a))}let o=i.getChild(t-1),n=i.getChild(t);if(!o||!n)return e;if(o.is("$text")&&n.is("$text"))return wm(o,n);if(o.is("attributeElement")&&n.is("attributeElement")&&o.isSimilar(n)){let r=o.childCount;return o._appendChild(n.getChildren()),n._remove(),this._removeFromClonedElementsGroup(n),this.mergeAttributes(new O(o,r))}return e}mergeContainers(e){let t=e.nodeBefore,i=e.nodeAfter;if(!t||!i||!t.is("containerElement")||!i.is("containerElement"))throw new E("view-writer-merge-containers-invalid-position",this.document);let o=t.getChild(t.childCount-1),n=o instanceof Te?O._createAt(o,"end"):O._createAt(t,"end");return this.move(re._createIn(i),O._createAt(t,"end")),this.remove(re._createOn(i)),n}insert(e,t){t=pt(t)?[...t]:[t],rf(t,this.document);let i=t.reduce((r,a)=>{let l=r[r.length-1],c=!a.is("uiElement");return!l||l.breakAttributes!=c?r.push({breakAttributes:c,nodes:[a]}):l.nodes.push(a),r},[]),o=null,n=e;for(let{nodes:r,breakAttributes:a}of i){let l=this._insertNodes(n,r,a);o||(o=l.start),n=l.end}return o?new re(o,n):new re(e)}remove(e){let t=e instanceof re?e:re._createOn(e);if(bs(t,this.document),t.isCollapsed)return new ho(this.document);let{start:i,end:o}=this._breakAttributesRange(t,!0),n=i.parent,r=o.offset-i.offset,a=n._removeChildren(i.offset,r);for(let c of a)this._removeFromClonedElementsGroup(c);let l=this.mergeAttributes(i);return t.start=l,t.end=l.clone(),new ho(this.document,a)}clear(e,t){bs(e,this.document);let i=e.getWalker({direction:"backward",ignoreElementEnd:!0});for(let o of i){let n=o.item,r;if(n.is("element")&&t.isSimilar(n))r=re._createOn(n);else if(!o.nextPosition.isAfter(e.start)&&n.is("$textProxy")){let a=n.getAncestors().find(l=>l.is("element")&&t.isSimilar(l));a&&(r=re._createIn(a))}r&&(r.end.isAfter(e.end)&&(r.end=e.end),r.start.isBefore(e.start)&&(r.start=e.start),this.remove(r))}}move(e,t){let i;if(t.isAfter(e.end)){t=this._breakAttributes(t,!0);let o=t.parent,n=o.childCount;e=this._breakAttributesRange(e,!0),i=this.remove(e),t.offset+=o.childCount-n}else i=this.remove(e);return this.insert(t,i)}wrap(e,t){if(!(t instanceof co))throw new E("view-writer-wrap-invalid-attribute",this.document);if(bs(e,this.document),e.isCollapsed){let i=e.start;i.parent.is("element")&&!mv(i.parent)&&(i=i.getLastMatchingPosition(n=>n.item.is("uiElement"))),i=this._wrapPosition(i,t);let o=this.document.selection;return o.isCollapsed&&o.getFirstPosition().isEqual(e.start)&&this.setSelection(i),new re(i)}else return this._wrapRange(e,t)}unwrap(e,t){if(!(t instanceof co))throw new E("view-writer-unwrap-invalid-attribute",this.document);if(bs(e,this.document),e.isCollapsed)return e;let{start:i,end:o}=this._breakAttributesRange(e,!0),n=i.parent,r=this._unwrapChildren(n,i.offset,o.offset,t),a=this.mergeAttributes(r.start);a.isEqual(r.start)||r.end.offset--;let l=this.mergeAttributes(r.end);return new re(a,l)}rename(e,t){let i=new Ei(this.document,e,t.getAttributes());return this.insert(O._createAfter(t),i),this.move(re._createIn(t),O._createAt(i,0)),this.remove(re._createOn(t)),i}clearClonedElementsGroup(e){this._cloneGroups.delete(e)}createPositionAt(e,t){return O._createAt(e,t)}createPositionAfter(e){return O._createAfter(e)}createPositionBefore(e){return O._createBefore(e)}createRange(e,t){return new re(e,t)}createRangeOn(e){return re._createOn(e)}createRangeIn(e){return re._createIn(e)}createSelection(...e){return new Oi(...e)}createSlot(e="children"){if(!this._slotFactory)throw new E("view-writer-invalid-create-slot-context",this.document);return this._slotFactory(this,e)}_registerSlotFactory(e){this._slotFactory=e}_clearSlotFactory(){this._slotFactory=null}_insertNodes(e,t,i){let o;if(i?o=Ql(e):o=e.parent.is("$text")?e.parent.parent:e.parent,!o)throw new E("view-writer-invalid-position-container",this.document);let n;i?n=this._breakAttributes(e,!0):n=e.parent.is("$text")?$l(e):e;let r=o._insertChild(n.offset,t);for(let d of t)this._addToClonedElementsGroup(d);let a=n.getShiftedBy(r),l=this.mergeAttributes(n);l.isEqual(n)||a.offset--;let c=this.mergeAttributes(a);return new re(l,c)}_wrapChildren(e,t,i,o){let n=t,r=[];for(;n<i;){let l=e.getChild(n),c=l.is("$text"),d=l.is("attributeElement");if(d&&this._wrapAttributeElement(o,l))r.push(new O(e,n));else if(c||!d||fv(o,l)){let h=o._clone();l._remove(),h._appendChild(l),e._insertChild(n,h),this._addToClonedElementsGroup(h),r.push(new O(e,n))}else this._wrapChildren(l,0,l.childCount,o);n++}let a=0;for(let l of r){if(l.offset-=a,l.offset==t)continue;this.mergeAttributes(l).isEqual(l)||(a++,i--)}return re._createFromParentsAndOffsets(e,t,e,i)}_unwrapChildren(e,t,i,o){let n=t,r=[];for(;n<i;){let l=e.getChild(n);if(!l.is("attributeElement")){n++;continue}if(l.isSimilar(o)){let c=l.getChildren(),d=l.childCount;l._remove(),e._insertChild(n,c),this._removeFromClonedElementsGroup(l),r.push(new O(e,n),new O(e,n+d)),n+=d,i+=d-1;continue}if(this._unwrapAttributeElement(o,l)){r.push(new O(e,n),new O(e,n+1)),n++;continue}this._unwrapChildren(l,0,l.childCount,o),n++}let a=0;for(let l of r){if(l.offset-=a,l.offset==t||l.offset==i)continue;this.mergeAttributes(l).isEqual(l)||(a++,i--)}return re._createFromParentsAndOffsets(e,t,e,i)}_wrapRange(e,t){let{start:i,end:o}=this._breakAttributesRange(e,!0),n=i.parent,r=this._wrapChildren(n,i.offset,o.offset,t),a=this.mergeAttributes(r.start);a.isEqual(r.start)||r.end.offset--;let l=this.mergeAttributes(r.end);return new re(a,l)}_wrapPosition(e,t){if(t.isSimilar(e.parent))return bm(e.clone());e.parent.is("$text")&&(e=$l(e));let i=this.createAttributeElement("_wrapPosition-fake-element");i._priority=Number.POSITIVE_INFINITY,i.isSimilar=()=>!1,e.parent._insertChild(e.offset,i);let o=new re(e,e.getShiftedBy(1));this.wrap(o,t);let n=new O(i.parent,i.index);i._remove();let r=n.nodeBefore,a=n.nodeAfter;return r instanceof Te&&a instanceof Te?wm(r,a):bm(n)}_wrapAttributeElement(e,t){if(!km(e,t)||e.name!==t.name||e.priority!==t.priority)return!1;for(let i of e.getAttributeKeys())if(!(i==="class"||i==="style")&&t.hasAttribute(i)&&t.getAttribute(i)!==e.getAttribute(i))return!1;for(let i of e.getStyleNames())if(t.hasStyle(i)&&t.getStyle(i)!==e.getStyle(i))return!1;for(let i of e.getAttributeKeys())i==="class"||i==="style"||t.hasAttribute(i)||this.setAttribute(i,e.getAttribute(i),t);for(let i of e.getStyleNames())t.hasStyle(i)||this.setStyle(i,e.getStyle(i),t);for(let i of e.getClassNames())t.hasClass(i)||this.addClass(i,t);return!0}_unwrapAttributeElement(e,t){if(!km(e,t)||e.name!==t.name||e.priority!==t.priority)return!1;for(let i of e.getAttributeKeys())if(!(i==="class"||i==="style")&&(!t.hasAttribute(i)||t.getAttribute(i)!==e.getAttribute(i)))return!1;if(!t.hasClass(...e.getClassNames()))return!1;for(let i of e.getStyleNames())if(!t.hasStyle(i)||t.getStyle(i)!==e.getStyle(i))return!1;for(let i of e.getAttributeKeys())i==="class"||i==="style"||this.removeAttribute(i,t);return this.removeClass(Array.from(e.getClassNames()),t),this.removeStyle(Array.from(e.getStyleNames()),t),!0}_breakAttributesRange(e,t=!1){let i=e.start,o=e.end;if(bs(e,this.document),e.isCollapsed){let l=this._breakAttributes(e.start,t);return new re(l,l)}let n=this._breakAttributes(o,t),r=n.parent.childCount,a=this._breakAttributes(i,t);return n.offset+=n.parent.childCount-r,new re(a,n)}_breakAttributes(e,t=!1){let i=e.offset,o=e.parent;if(e.parent.is("emptyElement"))throw new E("view-writer-cannot-break-empty-element",this.document);if(e.parent.is("uiElement"))throw new E("view-writer-cannot-break-ui-element",this.document);if(e.parent.is("rawElement"))throw new E("view-writer-cannot-break-raw-element",this.document);if(!t&&o.is("$text")&&Jl(o.parent)||Jl(o))return e.clone();if(o.is("$text"))return this._breakAttributes($l(e),t);let n=o.childCount;if(i==n){let r=new O(o.parent,o.index+1);return this._breakAttributes(r,t)}else if(i===0){let r=new O(o.parent,o.index);return this._breakAttributes(r,t)}else{let r=o.index+1,a=o._clone();o.parent._insertChild(r,a),this._addToClonedElementsGroup(a);let l=o.childCount-i,c=o._removeChildren(i,l);a._appendChild(c);let d=new O(o.parent,r);return this._breakAttributes(d,t)}}_addToClonedElementsGroup(e){if(!e.root.is("rootElement"))return;if(e.is("element"))for(let o of e.getChildren())this._addToClonedElementsGroup(o);let t=e.id;if(!t)return;let i=this._cloneGroups.get(t);i||(i=new Set,this._cloneGroups.set(t,i)),i.add(e),e._clonesGroup=i}_removeFromClonedElementsGroup(e){if(e.is("element"))for(let o of e.getChildren())this._removeFromClonedElementsGroup(o);let t=e.id;if(!t)return;let i=this._cloneGroups.get(t);i&&i.delete(e)}};function mv(s){return Array.from(s.getChildren()).some(e=>!e.is("uiElement"))}function Ql(s){let e=s.parent;for(;!Jl(e);){if(!e)return;e=e.parent}return e}function fv(s,e){return s.priority<e.priority?!0:s.priority>e.priority?!1:s.getIdentity()<e.getIdentity()}function bm(s){let e=s.nodeBefore;if(e&&e.is("$text"))return new O(e,e.data.length);let t=s.nodeAfter;return t&&t.is("$text")?new O(t,0):s}function $l(s){if(s.offset==s.parent.data.length)return new O(s.parent.parent,s.parent.index+1);if(s.offset===0)return new O(s.parent.parent,s.parent.index);let e=s.parent.data.slice(s.offset);return s.parent._data=s.parent.data.slice(0,s.offset),s.parent.parent._insertChild(s.parent.index+1,new Te(s.root.document,e)),new O(s.parent.parent,s.parent.index+1)}function wm(s,e){let t=s.data.length;return s._data+=e.data,e._remove(),new O(s,t)}var pv=[Te,co,Ei,fn,pn,go];function rf(s,e){for(let t of s){if(!pv.some(i=>t instanceof i))throw new E("view-writer-insert-invalid-node-type",e);t.is("$text")||rf(t.getChildren(),e)}}function Jl(s){return s&&(s.is("containerElement")||s.is("documentFragment"))}function bs(s,e){let t=Ql(s.start),i=Ql(s.end);if(!t||!i||t!==i)throw new E("view-writer-invalid-range-container",e)}function km(s,e){return s.id===null&&e.id===null}var af=s=>s.createTextNode("\xA0"),lf=s=>{let e=s.createElement("span");return e.dataset.ckeFiller="true",e.innerText="\xA0",e},cf=s=>{let e=s.createElement("br");return e.dataset.ckeFiller="true",e},qt=7,As="\u2060".repeat(qt);function It(s){return typeof s=="string"?s.substr(0,qt)===As:Re(s)&&s.data.substr(0,qt)===As}function ln(s){return s.data.length==qt&&It(s)}function vm(s){let e=typeof s=="string"?s:s.data;return It(s)?e.slice(qt):e}function bv(s){s.document.on("arrowKey",wv,{priority:"low"})}function wv(s,e){if(e.keyCode==ne.arrowleft){let t=e.domTarget.ownerDocument.defaultView.getSelection();if(t.rangeCount==1&&t.getRangeAt(0).collapsed){let i=t.getRangeAt(0).startContainer,o=t.getRangeAt(0).startOffset;It(i)&&o<=qt&&t.collapse(i,0)}}}var Br=class extends ge(){domDocuments=new Set;domConverter;markedAttributes=new Set;markedChildren=new Set;markedTexts=new Set;selection;_inlineFiller=null;_fakeSelectionContainer=null;constructor(e,t){super(),this.domConverter=e,this.selection=t,this.set("isFocused",!1),this.set("isSelecting",!1),K.isBlink&&!K.isAndroid&&this.on("change:isSelecting",()=>{this.isSelecting||this.render()}),this.set("isComposing",!1),this.on("change:isComposing",()=>{this.isComposing||this.render()})}markToSync(e,t){if(e==="text")this.domConverter.mapViewToDom(t.parent)&&this.markedTexts.add(t);else{if(!this.domConverter.mapViewToDom(t))return;if(e==="attributes")this.markedAttributes.add(t);else if(e==="children")this.markedChildren.add(t);else throw new E("view-renderer-unknown-type",this)}}render(){if(this.isComposing&&!K.isAndroid)return;let e=null,t=K.isBlink&&!K.isAndroid?!this.isSelecting:!0;for(let i of this.markedChildren)this._updateChildrenMappings(i);t?(this._inlineFiller&&!this._isSelectionInInlineFiller()&&this._removeInlineFiller(),this._inlineFiller?e=this._getInlineFillerPosition():this._needsInlineFillerAtSelection()&&(e=this.selection.getFirstPosition(),this.markedChildren.add(e.parent))):this._inlineFiller&&this._inlineFiller.parentNode&&(e=this.domConverter.domPositionToView(this._inlineFiller),e&&e.parent.is("$text")&&(e=O._createBefore(e.parent)));for(let i of this.markedAttributes)this._updateAttrs(i);for(let i of this.markedChildren)this._updateChildren(i,{inlineFillerPosition:e});for(let i of this.markedTexts)!this.markedChildren.has(i.parent)&&this.domConverter.mapViewToDom(i.parent)&&this._updateText(i,{inlineFillerPosition:e});if(t)if(e){let i=this.domConverter.viewPositionToDom(e),o=i.parent.ownerDocument;It(i.parent)?this._inlineFiller=i.parent:this._inlineFiller=xm(o,i.parent,i.offset)}else this._inlineFiller=null;this._updateFocus(),this._updateSelection(),this.domConverter._clearTemporaryCustomProperties(),this.markedTexts.clear(),this.markedAttributes.clear(),this.markedChildren.clear()}_updateChildrenMappings(e){let t=this.domConverter.mapViewToDom(e);if(!t)return;let i=Array.from(t.childNodes),o=Array.from(this.domConverter.viewChildrenToDom(e,{withChildren:!1})),n=this._diffNodeLists(i,o),r=this._findUpdateActions(n,i,o,vv);if(r.indexOf("update")!==-1){let a={equal:0,insert:0,delete:0};for(let l of r)if(l==="update"){let c=a.equal+a.insert,d=a.equal+a.delete,h=e.getChild(c);h&&!h.is("uiElement")&&!h.is("rawElement")&&this._updateElementMappings(h,i[d]),zl(o[c]),a.equal++}else a[l]++}}_updateElementMappings(e,t){this.domConverter.unbindDomElement(t),this.domConverter.bindElements(t,e),this.markedChildren.add(e),this.markedAttributes.add(e)}_getInlineFillerPosition(){let e=this.selection.getFirstPosition();return e.parent.is("$text")?O._createBefore(e.parent):e}_isSelectionInInlineFiller(){if(this.selection.rangeCount!=1||!this.selection.isCollapsed)return!1;let e=this.selection.getFirstPosition(),t=this.domConverter.viewPositionToDom(e);return!!(t&&Re(t.parent)&&It(t.parent))}_removeInlineFiller(){let e=this._inlineFiller;if(!It(e))throw new E("view-renderer-filler-was-lost",this);ln(e)?e.remove():e.data=e.data.substr(qt),this._inlineFiller=null}_needsInlineFillerAtSelection(){if(this.selection.rangeCount!=1||!this.selection.isCollapsed)return!1;let e=this.selection.getFirstPosition(),t=e.parent,i=e.offset;if(!this.domConverter.mapViewToDom(t.root)||!t.is("element")||!kv(t))return!1;let o=e.nodeBefore,n=e.nodeAfter;return!(o instanceof Te||n instanceof Te||i===t.getFillerOffset()&&(!o||!o.is("element","br"))||K.isAndroid&&(o||n))}_updateText(e,t){let i=this.domConverter.findCorrespondingDomText(e),n=this.domConverter.viewToDom(e).data,r=t.inlineFillerPosition;r&&r.parent==e.parent&&r.offset==e.index&&(n=As+n),ym(i,n)}_updateAttrs(e){let t=this.domConverter.mapViewToDom(e);if(!t)return;let i=Array.from(t.attributes).map(n=>n.name),o=e.getAttributeKeys();for(let n of o)this.domConverter.setDomElementAttribute(t,n,e.getAttribute(n),e);for(let n of i)e.hasAttribute(n)||this.domConverter.removeDomElementAttribute(t,n)}_updateChildren(e,t){let i=this.domConverter.mapViewToDom(e);if(!i)return;if(K.isAndroid){let h=null;for(let g of Array.from(i.childNodes)){if(h&&Re(h)&&Re(g)){i.normalize();break}h=g}}let o=t.inlineFillerPosition,n=i.childNodes,r=Array.from(this.domConverter.viewChildrenToDom(e,{bind:!0}));o&&o.parent===e&&xm(i.ownerDocument,r,o.offset);let a=this._diffNodeLists(n,r),l=this._findUpdateActions(a,n,r,xv),c=0,d=new Set;for(let h of l)h==="delete"?(d.add(n[c]),zl(n[c])):(h==="equal"||h==="update")&&c++;c=0;for(let h of l)h==="insert"?(Dl(i,c,r[c]),c++):h==="update"?(ym(n[c],r[c].data),c++):h==="equal"&&(this._markDescendantTextToSync(this.domConverter.domToView(r[c])),c++);for(let h of d)h.parentNode||this.domConverter.unbindDomElement(h)}_diffNodeLists(e,t){return e=Cv(e,this._fakeSelectionContainer),Jo(e,t,yv.bind(null,this.domConverter))}_findUpdateActions(e,t,i,o){if(e.indexOf("insert")===-1||e.indexOf("delete")===-1)return e;let n=[],r=[],a=[],l={equal:0,insert:0,delete:0};for(let c of e)c==="insert"?a.push(i[l.equal+l.insert]):c==="delete"?r.push(t[l.equal+l.delete]):(n=n.concat(Jo(r,a,o).map(d=>d==="equal"?"update":d)),n.push("equal"),r=[],a=[]),l[c]++;return n.concat(Jo(r,a,o).map(c=>c==="equal"?"update":c))}_markDescendantTextToSync(e){if(e){if(e.is("$text"))this.markedTexts.add(e);else if(e.is("element"))for(let t of e.getChildren())this._markDescendantTextToSync(t)}}_updateSelection(){if(K.isBlink&&!K.isAndroid&&this.isSelecting&&!this.markedChildren.size)return;if(this.selection.rangeCount===0){this._removeDomSelection(),this._removeFakeSelection();return}let e=this.domConverter.mapViewToDom(this.selection.editableElement);!this.isFocused||!e||(this.selection.isFake?this._updateFakeSelection(e):this._fakeSelectionContainer&&this._fakeSelectionContainer.isConnected?(this._removeFakeSelection(),this._updateDomSelection(e)):this.isComposing&&K.isAndroid||this._updateDomSelection(e))}_updateFakeSelection(e){let t=e.ownerDocument;this._fakeSelectionContainer||(this._fakeSelectionContainer=Av(t));let i=this._fakeSelectionContainer;if(this.domConverter.bindFakeSelection(i,this.selection),!this._fakeSelectionNeedsUpdate(e))return;(!i.parentElement||i.parentElement!=e)&&e.appendChild(i),i.textContent=this.selection.fakeSelectionLabel||"\xA0";let o=t.getSelection(),n=t.createRange();o.removeAllRanges(),n.selectNodeContents(i),o.addRange(n)}_updateDomSelection(e){let t=e.ownerDocument.defaultView.getSelection();if(!this._domSelectionNeedsUpdate(t))return;let i=this.domConverter.viewPositionToDom(this.selection.anchor),o=this.domConverter.viewPositionToDom(this.selection.focus);t.setBaseAndExtent(i.parent,i.offset,o.parent,o.offset),K.isGecko&&_v(o,t)}_domSelectionNeedsUpdate(e){if(!this.domConverter.isDomSelectionCorrect(e))return!0;let t=e&&this.domConverter.domSelectionToView(e);return!(t&&this.selection.isEqual(t)||!this.selection.isCollapsed&&this.selection.isSimilar(t))}_fakeSelectionNeedsUpdate(e){let t=this._fakeSelectionContainer,i=e.ownerDocument.getSelection();return!t||t.parentElement!==e||i.anchorNode!==t&&!t.contains(i.anchorNode)?!0:t.textContent!==this.selection.fakeSelectionLabel}_removeDomSelection(){for(let e of this.domDocuments){let t=e.getSelection();if(t.rangeCount){let i=e.activeElement,o=this.domConverter.mapDomToView(i);i&&o&&t.removeAllRanges()}}}_removeFakeSelection(){let e=this._fakeSelectionContainer;e&&e.remove()}_updateFocus(){if(this.isFocused){let e=this.selection.editableElement;e&&this.domConverter.focus(e)}}};function kv(s){if(s.getAttribute("contenteditable")=="false")return!1;let e=s.findAncestor(t=>t.hasAttribute("contenteditable"));return!e||e.getAttribute("contenteditable")=="true"}function xm(s,e,t){let i=e instanceof Array?e:e.childNodes,o=i[t];if(Re(o))return o.data=As+o.data,o;{let n=s.createTextNode(As);return Array.isArray(e)?i.splice(t,0,n):Dl(e,t,n),n}}function vv(s,e){return ni(s)&&ni(e)&&!Re(s)&&!Re(e)&&!nn(s)&&!nn(e)&&s.tagName.toLowerCase()===e.tagName.toLowerCase()}function xv(s,e){return ni(s)&&ni(e)&&Re(s)&&Re(e)}function yv(s,e,t){return e===t?!0:Re(e)&&Re(t)?e.data===t.data:!!(s.isBlockFiller(e)&&s.isBlockFiller(t))}function _v(s,e){let t=s.parent,i=s.offset;if(Re(t)&&ln(t)&&(i=on(t)+1,t=t.parentNode),t.nodeType!=Node.ELEMENT_NODE||i!=t.childNodes.length-1)return;let o=t.childNodes[i];o&&o.tagName=="BR"&&e.addRange(e.getRangeAt(0))}function Cv(s,e){let t=Array.from(s);return t.length==0||!e||t[t.length-1]==e&&t.pop(),t}function Av(s){let e=s.createElement("div");return e.className="ck-fake-selection-container",Object.assign(e.style,{position:"fixed",top:0,left:"-9999px",width:"42px"}),e.textContent="\xA0",e}function ym(s,e){let t=s.data;if(t==e)return;let i=Nl(t,e);for(let o of i)o.type==="insert"?s.insertData(o.index,o.values.join("")):s.deleteData(o.index,o.howMany)}var Sv=cf(j.document),Ev=af(j.document),Tv=lf(j.document),Rr="data-ck-unsafe-attribute-",_m="data-ck-unsafe-element",mo=class{document;renderingMode;blockFillerMode;preElements;blockElements;inlineObjectElements;unsafeElements;_domDocument;_domToViewMapping=new WeakMap;_viewToDomMapping=new WeakMap;_fakeSelectionMapping=new WeakMap;_rawContentElementMatcher=new Ot;_inlineObjectElementMatcher=new Ot;_elementsWithTemporaryCustomProperties=new Set;constructor(e,{blockFillerMode:t,renderingMode:i="editing"}={}){this.document=e,this.renderingMode=i,this.blockFillerMode=t||(i==="editing"?"br":"nbsp"),this.preElements=["pre"],this.blockElements=["address","article","aside","blockquote","caption","center","dd","details","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","legend","li","main","menu","nav","ol","p","pre","section","summary","table","tbody","td","tfoot","th","thead","tr","ul"],this.inlineObjectElements=["object","iframe","input","button","textarea","select","option","video","embed","audio","img","canvas"],this.unsafeElements=["script","style"],this._domDocument=this.renderingMode==="editing"?j.document:j.document.implementation.createHTMLDocument("")}bindFakeSelection(e,t){this._fakeSelectionMapping.set(e,new Oi(t))}fakeSelectionToView(e){return this._fakeSelectionMapping.get(e)}bindElements(e,t){this._domToViewMapping.set(e,t),this._viewToDomMapping.set(t,e)}unbindDomElement(e){let t=this._domToViewMapping.get(e);if(t){this._domToViewMapping.delete(e),this._viewToDomMapping.delete(t);for(let i of Array.from(e.children))this.unbindDomElement(i)}}bindDocumentFragments(e,t){this._domToViewMapping.set(e,t),this._viewToDomMapping.set(t,e)}shouldRenderAttribute(e,t,i){return this.renderingMode==="data"?!0:(e=e.toLowerCase(),e.startsWith("on")||e==="srcdoc"&&t.match(/\bon\S+\s*=|javascript:|<\s*\/*script/i)?!1:i==="img"&&(e==="src"||e==="srcset")||i==="source"&&e==="srcset"?!0:!t.match(/^\s*(javascript:|data:(image\/svg|text\/x?html))/i))}setContentOf(e,t){if(this.renderingMode==="data"){e.innerHTML=t;return}let i=new DOMParser().parseFromString(t,"text/html"),o=i.createDocumentFragment(),n=i.body.childNodes;for(;n.length>0;)o.appendChild(n[0]);let r=i.createTreeWalker(o,NodeFilter.SHOW_ELEMENT),a=[],l;for(;l=r.nextNode();)a.push(l);for(let c of a){for(let h of c.getAttributeNames())this.setDomElementAttribute(c,h,c.getAttribute(h));let d=c.tagName.toLowerCase();this._shouldRenameElement(d)&&(Am(d),c.replaceWith(this._createReplacementDomElement(d,c)))}for(;e.firstChild;)e.firstChild.remove();e.append(o)}viewToDom(e,t={}){if(e.is("$text")){let i=this._processDataFromViewText(e);return this._domDocument.createTextNode(i)}else{let i=e;if(this.mapViewToDom(i))if(i.getCustomProperty("editingPipeline:doNotReuseOnce"))this._elementsWithTemporaryCustomProperties.add(i);else return this.mapViewToDom(i);let o;if(i.is("documentFragment"))o=this._domDocument.createDocumentFragment(),t.bind&&this.bindDocumentFragments(o,i);else{if(i.is("uiElement"))return i.name==="$comment"?o=this._domDocument.createComment(i.getCustomProperty("$rawContent")):o=i.render(this._domDocument,this),t.bind&&this.bindElements(o,i),o;this._shouldRenameElement(i.name)?(Am(i.name),o=this._createReplacementDomElement(i.name)):i.hasAttribute("xmlns")?o=this._domDocument.createElementNS(i.getAttribute("xmlns"),i.name):o=this._domDocument.createElement(i.name),i.is("rawElement")&&i.render(o,this),t.bind&&this.bindElements(o,i);for(let n of i.getAttributeKeys())this.setDomElementAttribute(o,n,i.getAttribute(n),i)}if(t.withChildren!==!1)for(let n of this.viewChildrenToDom(i,t))o instanceof HTMLTemplateElement?o.content.appendChild(n):o.appendChild(n);return o}}setDomElementAttribute(e,t,i,o){let n=this.shouldRenderAttribute(t,i,e.tagName.toLowerCase())||o&&o.shouldRenderUnsafeAttribute(t);if(n||de("domconverter-unsafe-attribute-detected",{domElement:e,key:t,value:i}),!Bl(t)){de("domconverter-invalid-attribute-detected",{domElement:e,key:t,value:i});return}e.hasAttribute(t)&&!n?e.removeAttribute(t):e.hasAttribute(Rr+t)&&n&&e.removeAttribute(Rr+t),e.setAttribute(n?t:Rr+t,i)}removeDomElementAttribute(e,t){t!=_m&&(e.removeAttribute(t),e.removeAttribute(Rr+t))}*viewChildrenToDom(e,t={}){let i=e.getFillerOffset&&e.getFillerOffset(),o=0;for(let n of e.getChildren()){i===o&&(yield this._getBlockFiller());let r=n.is("element")&&!!n.getCustomProperty("dataPipeline:transparentRendering")&&!Se(n.getAttributes());r&&this.renderingMode=="data"?yield*Ae(this.viewChildrenToDom(n,t)):(r&&de("domconverter-transparent-rendering-unsupported-in-editing-pipeline",{viewElement:n}),yield this.viewToDom(n,t)),o++}i===o&&(yield this._getBlockFiller())}viewRangeToDom(e){let t=this.viewPositionToDom(e.start),i=this.viewPositionToDom(e.end),o=this._domDocument.createRange();return o.setStart(t.parent,t.offset),o.setEnd(i.parent,i.offset),o}viewPositionToDom(e){let t=e.parent;if(t.is("$text")){let i=this.findCorrespondingDomText(t);if(!i)return null;let o=e.offset;return It(i)&&(o+=qt),{parent:i,offset:o}}else{let i,o,n;if(e.offset===0){if(i=this.mapViewToDom(t),!i)return null;n=i.childNodes[0]}else{let a=e.nodeBefore;if(o=a.is("$text")?this.findCorrespondingDomText(a):this.mapViewToDom(a),!o)return null;i=o.parentNode,n=o.nextSibling}if(Re(n)&&It(n))return{parent:n,offset:qt};let r=o?on(o)+1:0;return{parent:i,offset:r}}}domToView(e,t={}){let i=[],o=this._domToView(e,t,i),n=o.next().value;return!n||(o.next(),this._processDomInlineNodes(null,i,t),n.is("$text")&&n.data.length==0)?null:n}*domChildrenToView(e,t={},i=[]){let o=[];e instanceof HTMLTemplateElement?o=[...e.content.childNodes]:o=[...e.childNodes];for(let n=0;n<o.length;n++){let r=o[n],a=this._domToView(r,t,i),l=a.next().value;l!==null&&(this._isBlockViewElement(l)&&this._processDomInlineNodes(e,i,t),yield l,a.next())}this._processDomInlineNodes(e,i,t)}domSelectionToView(e){if(Mv(e))return new Oi([]);if(e.rangeCount===1){let o=e.getRangeAt(0).startContainer;Re(o)&&(o=o.parentNode);let n=this.fakeSelectionToView(o);if(n)return n}let t=this.isDomSelectionBackward(e),i=[];for(let o=0;o<e.rangeCount;o++){let n=e.getRangeAt(o),r=this.domRangeToView(n);r&&i.push(r)}return new Oi(i,{backward:t})}domRangeToView(e){let t=this.domPositionToView(e.startContainer,e.startOffset),i=this.domPositionToView(e.endContainer,e.endOffset);return t&&i?new re(t,i):null}domPositionToView(e,t=0){if(this.isBlockFiller(e))return this.domPositionToView(e.parentNode,on(e));let i=this.mapDomToView(e);if(i&&(i.is("uiElement")||i.is("rawElement")))return O._createBefore(i);if(Re(e)){if(ln(e))return this.domPositionToView(e.parentNode,on(e));let o=this.findCorrespondingViewText(e),n=t;return o?(It(e)&&(n-=qt,n=n<0?0:n),new O(o,n)):null}else{if(t===0){let o=this.mapDomToView(e);if(o)return new O(o,0)}else{let o=e.childNodes[t-1];if(Re(o)&&ln(o)||o&&this.isBlockFiller(o))return this.domPositionToView(o.parentNode,on(o));let n=Re(o)?this.findCorrespondingViewText(o):this.mapDomToView(o);if(n&&n.parent)return new O(n.parent,n.index+1)}return null}}mapDomToView(e){return this.getHostViewElement(e)||this._domToViewMapping.get(e)}findCorrespondingViewText(e){if(ln(e))return null;let t=this.getHostViewElement(e);if(t)return t;let i=e.previousSibling;if(i){if(!this.isElement(i))return null;let o=this.mapDomToView(i);if(o){let n=o.nextSibling;return n instanceof Te?n:null}}else{let o=this.mapDomToView(e.parentNode);if(o){let n=o.getChild(0);return n instanceof Te?n:null}}return null}mapViewToDom(e){return this._viewToDomMapping.get(e)}findCorrespondingDomText(e){let t=e.previousSibling;return t&&this.mapViewToDom(t)?this.mapViewToDom(t).nextSibling:!t&&e.parent&&this.mapViewToDom(e.parent)?this.mapViewToDom(e.parent).childNodes[0]:null}focus(e){let t=this.mapViewToDom(e);if(t&&t.ownerDocument.activeElement!==t){let{scrollX:i,scrollY:o}=j.window,n=[];Cm(t,r=>{let{scrollLeft:a,scrollTop:l}=r;n.push([a,l])}),t.focus(),Cm(t,r=>{let[a,l]=n.shift();r.scrollLeft=a,r.scrollTop=l}),j.window.scrollTo(i,o)}}_clearDomSelection(){let e=this.mapViewToDom(this.document.selection.editableElement);if(!e)return;let t=e.ownerDocument.defaultView.getSelection(),i=this.domSelectionToView(t);i&&i.rangeCount>0&&t.removeAllRanges()}isElement(e){return e&&e.nodeType==Node.ELEMENT_NODE}isDocumentFragment(e){return e&&e.nodeType==Node.DOCUMENT_FRAGMENT_NODE}isBlockFiller(e){return this.blockFillerMode=="br"?e.isEqualNode(Sv):e.tagName==="BR"&&df(e,this.blockElements)&&e.parentNode.childNodes.length===1?!0:e.isEqualNode(Tv)||Pv(e,this.blockElements)}isDomSelectionBackward(e){if(e.isCollapsed)return!1;let t=this._domDocument.createRange();try{t.setStart(e.anchorNode,e.anchorOffset),t.setEnd(e.focusNode,e.focusOffset)}catch{return!1}let i=t.collapsed;return t.detach(),i}getHostViewElement(e){let t=em(e);for(t.pop();t.length;){let i=t.pop(),o=this._domToViewMapping.get(i);if(o&&(o.is("uiElement")||o.is("rawElement")))return o}return null}isDomSelectionCorrect(e){return this._isDomSelectionPositionCorrect(e.anchorNode,e.anchorOffset)&&this._isDomSelectionPositionCorrect(e.focusNode,e.focusOffset)}registerRawContentMatcher(e){this._rawContentElementMatcher.add(e)}registerInlineObjectMatcher(e){this._inlineObjectElementMatcher.add(e)}_clearTemporaryCustomProperties(){for(let e of this._elementsWithTemporaryCustomProperties)e._removeCustomProperty("editingPipeline:doNotReuseOnce");this._elementsWithTemporaryCustomProperties.clear()}_getBlockFiller(){switch(this.blockFillerMode){case"nbsp":return af(this._domDocument);case"markedNbsp":return lf(this._domDocument);case"br":return cf(this._domDocument)}}_isDomSelectionPositionCorrect(e,t){if(Re(e)&&It(e)&&t<qt||this.isElement(e)&&It(e.childNodes[t]))return!1;let i=this.mapDomToView(e);return!(i&&(i.is("uiElement")||i.is("rawElement")))}*_domToView(e,t,i){if(this.isBlockFiller(e))return null;let o=this.getHostViewElement(e);if(o)return o;if(nn(e)&&t.skipComments)return null;if(Re(e)){if(ln(e))return null;{let n=e.data;if(n==="")return null;let r=new Te(this.document,n);return i.push(r),r}}else{let n=this.mapDomToView(e);if(n)return this._isInlineObjectElement(n)&&i.push(n),n;if(this.isDocumentFragment(e))n=new ho(this.document),t.bind&&this.bindDocumentFragments(e,n);else{n=this._createViewElement(e,t),t.bind&&this.bindElements(e,n);let a=e.attributes;if(a)for(let l=a.length,c=0;c<l;c++)n._setAttribute(a[c].name,a[c].value);if(this._isViewElementWithRawContent(n,t))return n._setCustomProperty("$rawContent",e.innerHTML),this._isBlockViewElement(n)||i.push(n),n;if(nn(e))return n._setCustomProperty("$rawContent",e.data),n}yield n;let r=[];if(t.withChildren!==!1)for(let a of this.domChildrenToView(e,t,r))n._appendChild(a);if(this._isInlineObjectElement(n))i.push(n);else for(let a of r)i.push(a)}}_processDomInlineNodes(e,t,i){if(!t.length||e&&!this.isDocumentFragment(e)&&!this._isBlockDomElement(e))return;let o=!1;for(let n=0;n<t.length;n++){let r=t[n];if(!r.is("$text")){o=!1;continue}let a,l=!1;if(this._isPreFormatted(r))a=vm(r.data);else{a=r.data.replace(/[ \n\t\r]{1,}/g," "),l=/[^\S\u00A0]/.test(a.charAt(a.length-1));let c=n>0?t[n-1]:null,d=n+1<t.length?t[n+1]:null,h=!c||c.is("element")&&c.name=="br"||o,g=d?!1:!It(r.data);i.withChildren!==!1&&(h&&(a=a.replace(/^ /,"")),g&&(a=a.replace(/ $/,""))),a=vm(a),a=a.replace(/ \u00A0/g,"  ");let m=d&&d.is("element")&&d.name!="br",p=d&&d.is("$text")&&d.data.charAt(0)==" ";(/[ \u00A0]\u00A0$/.test(a)||!d||m||p)&&(a=a.replace(/\u00A0$/," ")),(h||c&&c.is("element")&&c.name!="br")&&(a=a.replace(/^\u00A0/," "))}a.length==0&&r.parent?(r._remove(),t.splice(n,1),n--):(r._data=a,o=l)}t.length=0}_processDataFromViewText(e){let t=e.data;if(this._isPreFormatted(e))return t;if(t.charAt(0)==" "){let i=this._getTouchingInlineViewNode(e,!1);(i&&i.is("$textProxy")&&this._nodeEndsWithSpace(i)||!i)&&(t="\xA0"+t.substr(1))}if(t.charAt(t.length-1)==" "){let i=this._getTouchingInlineViewNode(e,!0),o=i&&i.is("$textProxy")&&i.data.charAt(0)==" ";(t.charAt(t.length-2)==" "||!i||o)&&(t=t.substr(0,t.length-1)+"\xA0")}return t.replace(/ {2}/g," \xA0")}_nodeEndsWithSpace(e){if(this._isPreFormatted(e))return!1;let t=this._processDataFromViewText(e);return t.charAt(t.length-1)==" "}_isPreFormatted(e){if(Iv(e,this.preElements))return!0;for(let t of e.getAncestors({parentFirst:!0}))if(!(!t.is("element")||!t.hasStyle("white-space")||t.getStyle("white-space")==="inherit"))return["pre","pre-wrap","break-spaces"].includes(t.getStyle("white-space"));return!1}_getTouchingInlineViewNode(e,t){let i=new lo({startPosition:t?O._createAfter(e):O._createBefore(e),direction:t?"forward":"backward"});for(let o of i){if(o.item.is("element","br"))return null;if(this._isInlineObjectElement(o.item))return o.item;if(o.item.is("containerElement"))return null;if(o.item.is("$textProxy"))return o.item}return null}_isBlockDomElement(e){return this.isElement(e)&&this.blockElements.includes(e.tagName.toLowerCase())}_isBlockViewElement(e){return e.is("element")&&this.blockElements.includes(e.name)}_isInlineObjectElement(e){return e.is("element")?e.name=="br"||this.inlineObjectElements.includes(e.name)||!!this._inlineObjectElementMatcher.match(e):!1}_createViewElement(e,t){if(nn(e))return new go(this.document,"$comment");let i=t.keepOriginalCase?e.tagName:e.tagName.toLowerCase();return new ai(this.document,i)}_isViewElementWithRawContent(e,t){return t.withChildren!==!1&&e.is("element")&&!!this._rawContentElementMatcher.match(e)}_shouldRenameElement(e){let t=e.toLowerCase();return this.renderingMode==="editing"&&this.unsafeElements.includes(t)}_createReplacementDomElement(e,t){let i=this._domDocument.createElement("span");if(i.setAttribute(_m,e),t){for(;t.firstChild;)i.appendChild(t.firstChild);for(let o of t.getAttributeNames())i.setAttribute(o,t.getAttribute(o))}return i}};function Iv(s,e){return s.getAncestors().some(t=>t.is("element")&&e.includes(t.name))}function Cm(s,e){let t=s;for(;t;)e(t),t=t.parentElement}function Pv(s,e){return s.isEqualNode(Ev)&&df(s,e)&&s.parentNode.childNodes.length===1}function df(s,e){let t=s.parentNode;return!!t&&!!t.tagName&&e.includes(t.tagName.toLowerCase())}function Am(s){s==="script"&&de("domconverter-unsafe-script-element-detected"),s==="style"&&de("domconverter-unsafe-style-element-detected")}function Mv(s){if(!K.isGecko||!s.rangeCount)return!1;let e=s.getRangeAt(0).startContainer;try{Object.prototype.toString.call(e)}catch{return!0}return!1}var yt=class extends Ge(){view;document;_isEnabled=!1;constructor(e){super(),this.view=e,this.document=e.document}get isEnabled(){return this._isEnabled}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}destroy(){this.disable(),this.stopListening()}checkShouldIgnoreEventFromTarget(e){return e&&e.nodeType===3&&(e=e.parentNode),!e||e.nodeType!==1?!1:e.matches("[data-cke-ignore-events], [data-cke-ignore-events] *")}},ci=class{view;document;domEvent;domTarget;constructor(e,t,i){this.view=e,this.document=e.document,this.domEvent=t,this.domTarget=t.target,br(this,i)}get target(){return this.view.domConverter.mapDomToView(this.domTarget)}preventDefault(){this.domEvent.preventDefault()}stopPropagation(){this.domEvent.stopPropagation()}},Kt=class extends yt{useCapture=!1;observe(e){(typeof this.domEventType=="string"?[this.domEventType]:this.domEventType).forEach(i=>{this.listenTo(e,i,(o,n)=>{this.isEnabled&&!this.checkShouldIgnoreEventFromTarget(n.target)&&this.onDomEvent(n)},{useCapture:this.useCapture})})}stopObserving(e){this.stopListening(e)}fire(e,t,i){this.isEnabled&&this.document.fire(e,new ci(this.view,t,i))}},ec=class extends Kt{domEventType=["keydown","keyup"];onDomEvent(e){let t={keyCode:e.keyCode,altKey:e.altKey,ctrlKey:e.ctrlKey,shiftKey:e.shiftKey,metaKey:e.metaKey,get keystroke(){return _i(this)}};this.fire(e.type,e,t)}},tc=class extends yt{_fireSelectionChangeDoneDebounced;constructor(e){super(e),this._fireSelectionChangeDoneDebounced=oi(t=>{this.document.fire("selectionChangeDone",t)},200)}observe(){let e=this.document;e.on("arrowKey",(t,i)=>{e.selection.isFake&&this.isEnabled&&i.preventDefault()},{context:"$capture"}),e.on("arrowKey",(t,i)=>{e.selection.isFake&&this.isEnabled&&this._handleSelectionMove(i.keyCode)},{priority:"lowest"})}stopObserving(){}destroy(){super.destroy(),this._fireSelectionChangeDoneDebounced.cancel()}_handleSelectionMove(e){let t=this.document.selection,i=new Oi(t.getRanges(),{backward:t.isBackward,fake:!1});(e==ne.arrowleft||e==ne.arrowup)&&i.setTo(i.getFirstPosition()),(e==ne.arrowright||e==ne.arrowdown)&&i.setTo(i.getLastPosition());let o={oldSelection:t,newSelection:i,domSelection:null};this.document.fire("selectionChange",o),this._fireSelectionChangeDoneDebounced(o)}},zr=class extends yt{domConverter;renderer;_config;_domElements;_mutationObserver;constructor(e){super(e),this._config={childList:!0,characterData:!0,subtree:!0},this.domConverter=e.domConverter,this.renderer=e._renderer,this._domElements=new Set,this._mutationObserver=new window.MutationObserver(this._onMutations.bind(this))}flush(){this._onMutations(this._mutationObserver.takeRecords())}observe(e){this._domElements.add(e),this.isEnabled&&this._mutationObserver.observe(e,this._config)}stopObserving(e){if(this._domElements.delete(e),this.isEnabled){this._mutationObserver.disconnect();for(let t of this._domElements)this._mutationObserver.observe(t,this._config)}}enable(){super.enable();for(let e of this._domElements)this._mutationObserver.observe(e,this._config)}disable(){super.disable(),this._mutationObserver.disconnect()}destroy(){super.destroy(),this._mutationObserver.disconnect()}_onMutations(e){if(e.length===0)return;let t=this.domConverter,i=new Set,o=new Set;for(let r of e){let a=t.mapDomToView(r.target);a&&(a.is("uiElement")||a.is("rawElement")||r.type==="childList"&&!this._isBogusBrMutation(r)&&o.add(a))}for(let r of e){let a=t.mapDomToView(r.target);if(!(a&&(a.is("uiElement")||a.is("rawElement")))&&r.type==="characterData"){let l=t.findCorrespondingViewText(r.target);l&&!o.has(l.parent)?i.add(l):!l&&It(r.target)&&o.add(t.mapDomToView(r.target.parentNode))}}let n=!1;for(let r of i)n=!0,this.renderer.markToSync("text",r);for(let r of o){let a=t.mapViewToDom(r),l=Array.from(r.getChildren()),c=Array.from(t.domChildrenToView(a,{withChildren:!1}));$u(l,c,Lv)||(n=!0,this.renderer.markToSync("children",r))}n&&this.view.forceRender()}_isBogusBrMutation(e){let t=null;return e.nextSibling===null&&e.removedNodes.length===0&&e.addedNodes.length==1&&(t=this.domConverter.domToView(e.addedNodes[0],{withChildren:!1})),t&&t.is("element","br")}};function Lv(s,e){if(!Array.isArray(s))return s===e?!0:s.is("$text")&&e.is("$text")?s.data===e.data:!1}var fo=class extends Kt{_renderTimeoutId;_isFocusChanging=!1;domEventType=["focus","blur"];constructor(e){super(e),this.useCapture=!0;let t=this.document;t.on("focus",()=>{this._isFocusChanging=!0,this._renderTimeoutId=setTimeout(()=>{this.flush(),e.change(()=>{})},50)}),t.on("blur",(i,o)=>{let n=t.selection.editableElement;(n===null||n===o.target)&&(t.isFocused=!1,this._isFocusChanging=!1,e.change(()=>{}))})}flush(){this._isFocusChanging&&(this._isFocusChanging=!1,this.document.isFocused=!0)}onDomEvent(e){this.fire(e.type,e)}destroy(){this._renderTimeoutId&&clearTimeout(this._renderTimeoutId),super.destroy()}},ic=class extends yt{mutationObserver;focusObserver;selection;domConverter;_documents;_fireSelectionChangeDoneDebounced;_clearInfiniteLoopInterval;_documentIsSelectingInactivityTimeoutDebounced;_loopbackCounter;constructor(e){super(e),this.mutationObserver=e.getObserver(zr),this.focusObserver=e.getObserver(fo),this.selection=this.document.selection,this.domConverter=e.domConverter,this._documents=new WeakSet,this._fireSelectionChangeDoneDebounced=oi(t=>{this.document.fire("selectionChangeDone",t)},200),this._clearInfiniteLoopInterval=setInterval(()=>this._clearInfiniteLoop(),1e3),this._documentIsSelectingInactivityTimeoutDebounced=oi(()=>this.document.isSelecting=!1,5e3),this._loopbackCounter=0}observe(e){let t=e.ownerDocument,i=()=>{this.document.isSelecting=!0,this._documentIsSelectingInactivityTimeoutDebounced()},o=()=>{this.document.isSelecting&&(this._handleSelectionChange(null,t),this.document.isSelecting=!1,this._documentIsSelectingInactivityTimeoutDebounced.cancel())};this.listenTo(e,"selectstart",i,{priority:"highest"}),this.listenTo(e,"keydown",o,{priority:"highest",useCapture:!0}),this.listenTo(e,"keyup",o,{priority:"highest",useCapture:!0}),!this._documents.has(t)&&(this.listenTo(t,"mouseup",o,{priority:"highest",useCapture:!0}),this.listenTo(t,"selectionchange",(n,r)=>{this.document.isComposing&&!K.isAndroid||(this._handleSelectionChange(r,t),this._documentIsSelectingInactivityTimeoutDebounced())}),this._documents.add(t))}stopObserving(e){this.stopListening(e)}destroy(){super.destroy(),clearInterval(this._clearInfiniteLoopInterval),this._fireSelectionChangeDoneDebounced.cancel(),this._documentIsSelectingInactivityTimeoutDebounced.cancel()}_reportInfiniteLoop(){}_handleSelectionChange(e,t){if(!this.isEnabled)return;let i=t.defaultView.getSelection();if(this.checkShouldIgnoreEventFromTarget(i.anchorNode))return;this.mutationObserver.flush();let o=this.domConverter.domSelectionToView(i);if(o.rangeCount==0){this.view.hasDomSelection=!1;return}if(this.view.hasDomSelection=!0,this.focusObserver.flush(),!(this.selection.isEqual(o)&&this.domConverter.isDomSelectionCorrect(i))){if(++this._loopbackCounter>60){this._reportInfiniteLoop();return}if(this.selection.isSimilar(o))this.view.forceRender();else{let n={oldSelection:this.selection,newSelection:o,domSelection:i};this.document.fire("selectionChange",n),this._fireSelectionChangeDoneDebounced(n)}}}_clearInfiniteLoop(){this._loopbackCounter=0}},oc=class extends Kt{domEventType=["compositionstart","compositionupdate","compositionend"];constructor(e){super(e);let t=this.document;t.on("compositionstart",()=>{t.isComposing=!0},{priority:"low"}),t.on("compositionend",()=>{t.isComposing=!1},{priority:"low"})}onDomEvent(e){this.fire(e.type,e,{data:e.data})}};var Ss=class{_files;_native;constructor(e,t={}){this._files=t.cacheFiles?Sm(e):null,this._native=e}get files(){return this._files||(this._files=Sm(this._native)),this._files}get types(){return this._native.types}getData(e){return this._native.getData(e)}setData(e,t){this._native.setData(e,t)}set effectAllowed(e){this._native.effectAllowed=e}get effectAllowed(){return this._native.effectAllowed}set dropEffect(e){this._native.dropEffect=e}get dropEffect(){return this._native.dropEffect}setDragImage(e,t,i){this._native.setDragImage(e,t,i)}get isCanceled(){return this._native.dropEffect=="none"||!!this._native.mozUserCancelled}};function Sm(s){let e=Array.from(s.files||[]),t=Array.from(s.items||[]);return e.length?e:t.filter(i=>i.kind==="file").map(i=>i.getAsFile())}var nc=class extends Kt{domEventType="beforeinput";onDomEvent(e){let t=e.getTargetRanges(),i=this.view,o=i.document,n=null,r=null,a=[];if(e.dataTransfer&&(n=new Ss(e.dataTransfer)),e.data!==null?r=e.data:n&&(r=n.getData("text/plain")),o.selection.isFake)a=Array.from(o.selection.getRanges());else if(t.length)a=t.map(l=>{let c=i.domConverter.domPositionToView(l.startContainer,l.startOffset),d=i.domConverter.domPositionToView(l.endContainer,l.endOffset);if(c)return i.createRange(c,d);if(d)return i.createRange(d)}).filter(l=>!!l);else if(K.isAndroid){let l=e.target.ownerDocument.defaultView.getSelection();a=Array.from(i.domConverter.domSelectionToView(l).getRanges())}if(K.isAndroid&&e.inputType=="insertCompositionText"&&r&&r.endsWith(`
`)){this.fire(e.type,e,{inputType:"insertParagraph",targetRanges:[i.createRange(a[0].end)]});return}if(e.inputType=="insertText"&&r&&r.includes(`
`)){let l=r.split(/\n{1,2}/g),c=a;for(let d=0;d<l.length;d++){let h=l[d];h!=""&&(this.fire(e.type,e,{data:h,dataTransfer:n,targetRanges:c,inputType:e.inputType,isComposing:e.isComposing}),c=[o.selection.getFirstRange()]),d+1<l.length&&(this.fire(e.type,e,{inputType:"insertParagraph",targetRanges:c}),c=[o.selection.getFirstRange()])}return}this.fire(e.type,e,{data:r,dataTransfer:n,targetRanges:a,inputType:e.inputType,isComposing:e.isComposing})}},sc=class extends yt{constructor(e){super(e),this.document.on("keydown",(t,i)=>{if(this.isEnabled&&am(i.keyCode)){let o=new li(this.document,"arrowKey",this.document.selection.getFirstRange());this.document.fire(o,i),o.stop.called&&t.stop()}})}observe(){}stopObserving(){}},rc=class extends yt{constructor(e){super(e);let t=this.document;t.on("keydown",(i,o)=>{if(!this.isEnabled||o.keyCode!=ne.tab||o.ctrlKey)return;let n=new li(t,"tab",t.selection.getFirstRange());t.fire(n,o),n.stop.called&&i.stop()})}observe(){}stopObserving(){}},bn=class extends ge(){document;domConverter;domRoots=new Map;_renderer;_initialDomRootAttributes=new WeakMap;_observers=new Map;_writer;_ongoingChange=!1;_postFixersInProgress=!1;_renderingDisabled=!1;_hasChangedSinceTheLastRendering=!1;constructor(e){super(),this.document=new Gr(e),this.domConverter=new mo(this.document),this.set("isRenderingInProgress",!1),this.set("hasDomSelection",!1),this._renderer=new Br(this.domConverter,this.document.selection),this._renderer.bind("isFocused","isSelecting","isComposing").to(this.document,"isFocused","isSelecting","isComposing"),this._writer=new Cs(this.document),this.addObserver(zr),this.addObserver(fo),this.addObserver(ic),this.addObserver(ec),this.addObserver(tc),this.addObserver(oc),this.addObserver(sc),this.addObserver(nc),this.addObserver(rc),bv(this),cv(this),this.on("render",()=>{this._render(),this.document.fire("layoutChanged"),this._hasChangedSinceTheLastRendering=!1}),this.listenTo(this.document.selection,"change",()=>{this._hasChangedSinceTheLastRendering=!0}),this.listenTo(this.document,"change:isFocused",()=>{this._hasChangedSinceTheLastRendering=!0}),K.isiOS&&this.listenTo(this.document,"blur",(t,i)=>{this.domConverter.mapDomToView(i.domEvent.relatedTarget)||this.domConverter._clearDomSelection()})}attachDomRoot(e,t="main"){let i=this.document.getRoot(t);i._name=e.tagName.toLowerCase();let o={};for(let{name:r,value:a}of Array.from(e.attributes))o[r]=a,r==="class"?this._writer.addClass(a.split(" "),i):this._writer.setAttribute(r,a,i);this._initialDomRootAttributes.set(e,o);let n=()=>{this._writer.setAttribute("contenteditable",(!i.isReadOnly).toString(),i),i.isReadOnly?this._writer.addClass("ck-read-only",i):this._writer.removeClass("ck-read-only",i)};n(),this.domRoots.set(t,e),this.domConverter.bindElements(e,i),this._renderer.markToSync("children",i),this._renderer.markToSync("attributes",i),this._renderer.domDocuments.add(e.ownerDocument),i.on("change:children",(r,a)=>this._renderer.markToSync("children",a)),i.on("change:attributes",(r,a)=>this._renderer.markToSync("attributes",a)),i.on("change:text",(r,a)=>this._renderer.markToSync("text",a)),i.on("change:isReadOnly",()=>this.change(n)),i.on("change",()=>{this._hasChangedSinceTheLastRendering=!0});for(let r of this._observers.values())r.observe(e,t)}detachDomRoot(e){let t=this.domRoots.get(e);Array.from(t.attributes).forEach(({name:o})=>t.removeAttribute(o));let i=this._initialDomRootAttributes.get(t);for(let o in i)t.setAttribute(o,i[o]);this.domRoots.delete(e),this.domConverter.unbindDomElement(t);for(let o of this._observers.values())o.stopObserving(t)}getDomRoot(e="main"){return this.domRoots.get(e)}addObserver(e){let t=this._observers.get(e);if(t)return t;t=new e(this),this._observers.set(e,t);for(let[i,o]of this.domRoots)t.observe(o,i);return t.enable(),t}getObserver(e){return this._observers.get(e)}disableObservers(){for(let e of this._observers.values())e.disable()}enableObservers(){for(let e of this._observers.values())e.enable()}scrollToTheSelection({alignToTop:e,forceScroll:t,viewportOffset:i=20,ancestorOffset:o=20}={}){let n=this.document.selection.getFirstRange();if(!n)return;let r=Et({alignToTop:e,forceScroll:t,viewportOffset:i,ancestorOffset:o});typeof i=="number"&&(i={top:i,bottom:i,left:i,right:i});let a={target:this.domConverter.viewRangeToDom(n),viewportOffset:i,ancestorOffset:o,alignToTop:e,forceScroll:t};this.fire("scrollToTheSelection",a,r),Fl(a)}focus(){if(!this.document.isFocused){let e=this.document.selection.editableElement;e&&(this.domConverter.focus(e),this.forceRender())}}change(e){if(this.isRenderingInProgress||this._postFixersInProgress)throw new E("cannot-change-view-tree",this);try{if(this._ongoingChange)return e(this._writer);this._ongoingChange=!0;let t=e(this._writer);return this._ongoingChange=!1,!this._renderingDisabled&&this._hasChangedSinceTheLastRendering&&(this._postFixersInProgress=!0,this.document._callPostFixers(this._writer),this._postFixersInProgress=!1,this.fire("render")),t}catch(t){E.rethrowUnexpectedError(t,this)}}forceRender(){this._hasChangedSinceTheLastRendering=!0,this.getObserver(fo).flush(),this.change(()=>{})}destroy(){for(let e of this._observers.values())e.destroy();this.document.destroy(),this.stopListening()}createPositionAt(e,t){return O._createAt(e,t)}createPositionAfter(e){return O._createAfter(e)}createPositionBefore(e){return O._createBefore(e)}createRange(e,t){return new re(e,t)}createRangeOn(e){return re._createOn(e)}createRangeIn(e){return re._createIn(e)}createSelection(...e){return new Oi(...e)}_disableRendering(e){this._renderingDisabled=e,e==!1&&this.change(()=>{})}_render(){this.isRenderingInProgress=!0,this.disableObservers(),this._renderer.render(),this.enableObservers(),this.isRenderingInProgress=!1}};var di=class{is(){throw new Error("is() method is abstract")}},xo=class extends di{parent=null;_attrs;constructor(e){super(),this._attrs=Tt(e)}get document(){return null}get index(){let e;if(!this.parent)return null;if((e=this.parent.getChildIndex(this))===null)throw new E("model-node-not-found-in-parent",this);return e}get startOffset(){let e;if(!this.parent)return null;if((e=this.parent.getChildStartOffset(this))===null)throw new E("model-node-not-found-in-parent",this);return e}get offsetSize(){return 1}get endOffset(){return this.parent?this.startOffset+this.offsetSize:null}get nextSibling(){let e=this.index;return e!==null&&this.parent.getChild(e+1)||null}get previousSibling(){let e=this.index;return e!==null&&this.parent.getChild(e-1)||null}get root(){let e=this;for(;e.parent;)e=e.parent;return e}isAttached(){return this.parent===null?!1:this.root.isAttached()}getPath(){let e=[],t=this;for(;t.parent;)e.unshift(t.startOffset),t=t.parent;return e}getAncestors(e={}){let t=[],i=e.includeSelf?this:this.parent;for(;i;)t[e.parentFirst?"push":"unshift"](i),i=i.parent;return t}getCommonAncestor(e,t={}){let i=this.getAncestors(t),o=e.getAncestors(t),n=0;for(;i[n]==o[n]&&i[n];)n++;return n===0?null:i[n-1]}isBefore(e){if(this==e||this.root!==e.root)return!1;let t=this.getPath(),i=e.getPath(),o=Je(t,i);switch(o){case"prefix":return!0;case"extension":return!1;default:return t[o]<i[o]}}isAfter(e){return this==e||this.root!==e.root?!1:!this.isBefore(e)}hasAttribute(e){return this._attrs.has(e)}getAttribute(e){return this._attrs.get(e)}getAttributes(){return this._attrs.entries()}getAttributeKeys(){return this._attrs.keys()}toJSON(){let e={};return this._attrs.size&&(e.attributes=Array.from(this._attrs).reduce((t,i)=>(t[i[0]]=i[1],t),{})),e}_clone(e){return new this.constructor(this._attrs)}_remove(){this.parent._removeChildren(this.index)}_setAttribute(e,t){this._attrs.set(e,t)}_setAttributesTo(e){this._attrs=Tt(e)}_removeAttribute(e){return this._attrs.delete(e)}_clearAttributes(){this._attrs.clear()}};xo.prototype.is=function(s){return s==="node"||s==="model:node"};var uo=class{_nodes=[];constructor(e){e&&this._insertNodes(0,e)}[Symbol.iterator](){return this._nodes[Symbol.iterator]()}get length(){return this._nodes.length}get maxOffset(){return this._nodes.reduce((e,t)=>e+t.offsetSize,0)}getNode(e){return this._nodes[e]||null}getNodeIndex(e){let t=this._nodes.indexOf(e);return t==-1?null:t}getNodeStartOffset(e){let t=this.getNodeIndex(e);return t===null?null:this._nodes.slice(0,t).reduce((i,o)=>i+o.offsetSize,0)}indexToOffset(e){if(e==this._nodes.length)return this.maxOffset;let t=this._nodes[e];if(!t)throw new E("model-nodelist-index-out-of-bounds",this);return this.getNodeStartOffset(t)}offsetToIndex(e){let t=0;for(let i of this._nodes){if(e>=t&&e<t+i.offsetSize)return this.getNodeIndex(i);t+=i.offsetSize}if(t!=e)throw new E("model-nodelist-offset-out-of-bounds",this,{offset:e,nodeList:this});return this.length}_insertNodes(e,t){for(let i of t)if(!(i instanceof xo))throw new E("model-nodelist-insertnodes-not-node",this);this._nodes=cm(this._nodes,Array.from(t),e,0)}_removeNodes(e,t=1){return this._nodes.splice(e,t)}toJSON(){return this._nodes.map(e=>e.toJSON())}},xe=class s extends xo{_data;constructor(e,t){super(t),this._data=e||""}get offsetSize(){return this.data.length}get data(){return this._data}toJSON(){let e=super.toJSON();return e.data=this.data,e}_clone(){return new s(this.data,this.getAttributes())}static fromJSON(e){return new s(e.data,e.attributes)}};xe.prototype.is=function(s){return s==="$text"||s==="model:$text"||s==="text"||s==="model:text"||s==="node"||s==="model:node"};var Pt=class extends di{textNode;data;offsetInText;constructor(e,t,i){if(super(),this.textNode=e,t<0||t>e.offsetSize)throw new E("model-textproxy-wrong-offsetintext",this);if(i<0||t+i>e.offsetSize)throw new E("model-textproxy-wrong-length",this);this.data=e.data.substring(t,t+i),this.offsetInText=t}get startOffset(){return this.textNode.startOffset!==null?this.textNode.startOffset+this.offsetInText:null}get offsetSize(){return this.data.length}get endOffset(){return this.startOffset!==null?this.startOffset+this.offsetSize:null}get isPartial(){return this.offsetSize!==this.textNode.offsetSize}get parent(){return this.textNode.parent}get root(){return this.textNode.root}getPath(){let e=this.textNode.getPath();return e.length>0&&(e[e.length-1]+=this.offsetInText),e}getAncestors(e={}){let t=[],i=e.includeSelf?this:this.parent;for(;i;)t[e.parentFirst?"push":"unshift"](i),i=i.parent;return t}hasAttribute(e){return this.textNode.hasAttribute(e)}getAttribute(e){return this.textNode.getAttribute(e)}getAttributes(){return this.textNode.getAttributes()}getAttributeKeys(){return this.textNode.getAttributeKeys()}};Pt.prototype.is=function(s){return s==="$textProxy"||s==="model:$textProxy"||s==="textProxy"||s==="model:textProxy"};var ke=class s extends xo{name;_children=new uo;constructor(e,t,i){super(t),this.name=e,i&&this._insertChild(0,i)}get childCount(){return this._children.length}get maxOffset(){return this._children.maxOffset}get isEmpty(){return this.childCount===0}getChild(e){return this._children.getNode(e)}getChildren(){return this._children[Symbol.iterator]()}getChildIndex(e){return this._children.getNodeIndex(e)}getChildStartOffset(e){return this._children.getNodeStartOffset(e)}offsetToIndex(e){return this._children.offsetToIndex(e)}getNodeByPath(e){let t=this;for(let i of e)t=t.getChild(t.offsetToIndex(i));return t}findAncestor(e,t={}){let i=t.includeSelf?this:this.parent;for(;i;){if(i.name===e)return i;i=i.parent}return null}toJSON(){let e=super.toJSON();if(e.name=this.name,this._children.length>0){e.children=[];for(let t of this._children)e.children.push(t.toJSON())}return e}_clone(e=!1){let t=e?Array.from(this._children).map(i=>i._clone(!0)):void 0;return new s(this.name,this.getAttributes(),t)}_appendChild(e){this._insertChild(this.childCount,e)}_insertChild(e,t){let i=Rv(t);for(let o of i)o.parent!==null&&o._remove(),o.parent=this;this._children._insertNodes(e,i)}_removeChildren(e,t=1){let i=this._children._removeNodes(e,t);for(let o of i)o.parent=null;return i}static fromJSON(e){let t;if(e.children){t=[];for(let i of e.children)i.name?t.push(s.fromJSON(i)):t.push(xe.fromJSON(i))}return new s(e.name,e.attributes,t)}};ke.prototype.is=function(s,e){return e?e===this.name&&(s==="element"||s==="model:element"):s==="element"||s==="model:element"||s==="node"||s==="model:node"};function Rv(s){return typeof s=="string"?[new xe(s)]:(pt(s)||(s=[s]),Array.from(s).map(e=>typeof e=="string"?new xe(e):e instanceof Pt?new xe(e.data,e.getAttributes()):e))}var Mt=class{direction;boundaries;singleCharacters;shallow;ignoreElementEnd;_position;_boundaryStartParent;_boundaryEndParent;_visitedParent;constructor(e){if(!e||!e.boundaries&&!e.startPosition)throw new E("model-tree-walker-no-start-position",null);let t=e.direction||"forward";if(t!="forward"&&t!="backward")throw new E("model-tree-walker-unknown-direction",e,{direction:t});this.direction=t,this.boundaries=e.boundaries||null,e.startPosition?this._position=e.startPosition.clone():this._position=D._createAt(this.boundaries[this.direction=="backward"?"end":"start"]),this.position.stickiness="toNone",this.singleCharacters=!!e.singleCharacters,this.shallow=!!e.shallow,this.ignoreElementEnd=!!e.ignoreElementEnd,this._boundaryStartParent=this.boundaries?this.boundaries.start.parent:null,this._boundaryEndParent=this.boundaries?this.boundaries.end.parent:null,this._visitedParent=this.position.parent}[Symbol.iterator](){return this}get position(){return this._position}skip(e){let t,i,o,n;do o=this.position,n=this._visitedParent,{done:t,value:i}=this.next();while(!t&&e(i));t||(this._position=o,this._visitedParent=n)}next(){return this.direction=="forward"?this._next():this._previous()}_next(){let e=this.position,t=this.position.clone(),i=this._visitedParent;if(i.parent===null&&t.offset===i.maxOffset)return{done:!0,value:void 0};if(i===this._boundaryEndParent&&t.offset==this.boundaries.end.offset)return{done:!0,value:void 0};let o=xs(t,i),n=o||hf(t,i,o);if(n instanceof ke){if(!this.shallow)t.path.push(0),this._visitedParent=n;else{if(this.boundaries&&this.boundaries.end.isBefore(t))return{done:!0,value:void 0};t.offset++}return this._position=t,ao("elementStart",n,e,t,1)}if(n instanceof xe){let r;if(this.singleCharacters)r=1;else{let c=n.endOffset;this._boundaryEndParent==i&&this.boundaries.end.offset<c&&(c=this.boundaries.end.offset),r=c-t.offset}let a=t.offset-n.startOffset,l=new Pt(n,a,r);return t.offset+=r,this._position=t,ao("text",l,e,t,r)}return t.path.pop(),t.offset++,this._position=t,this._visitedParent=i.parent,this.ignoreElementEnd?this._next():ao("elementEnd",i,e,t)}_previous(){let e=this.position,t=this.position.clone(),i=this._visitedParent;if(i.parent===null&&t.offset===0)return{done:!0,value:void 0};if(i==this._boundaryStartParent&&t.offset==this.boundaries.start.offset)return{done:!0,value:void 0};let o=t.parent,n=xs(t,o),r=n||uf(t,o,n);if(r instanceof ke)return t.offset--,this.shallow?(this._position=t,ao("elementStart",r,e,t,1)):(t.path.push(r.maxOffset),this._position=t,this._visitedParent=r,this.ignoreElementEnd?this._previous():ao("elementEnd",r,e,t));if(r instanceof xe){let a;if(this.singleCharacters)a=1;else{let d=r.startOffset;this._boundaryStartParent==i&&this.boundaries.start.offset>d&&(d=this.boundaries.start.offset),a=t.offset-d}let l=t.offset-r.startOffset,c=new Pt(r,l-a,a);return t.offset-=a,this._position=t,ao("text",c,e,t,a)}return t.path.pop(),this._position=t,this._visitedParent=i.parent,ao("elementStart",i,e,t,1)}};function ao(s,e,t,i,o){return{done:!1,value:{type:s,item:e,previousPosition:t,nextPosition:i,length:o}}}var D=class s extends di{root;path;stickiness;constructor(e,t,i="toNone"){if(super(),!e.is("element")&&!e.is("documentFragment"))throw new E("model-position-root-invalid",e);if(!(t instanceof Array)||t.length===0)throw new E("model-position-path-incorrect-format",e,{path:t});e.is("rootElement")?t=t.slice():(t=[...e.getPath(),...t],e=e.root),this.root=e,this.path=t,this.stickiness=i}get offset(){return this.path[this.path.length-1]}set offset(e){this.path[this.path.length-1]=e}get parent(){let e=this.root;for(let t=0;t<this.path.length-1;t++)if(e=e.getChild(e.offsetToIndex(this.path[t])),!e)throw new E("model-position-path-incorrect",this,{position:this});if(e.is("$text"))throw new E("model-position-path-incorrect",this,{position:this});return e}get index(){return this.parent.offsetToIndex(this.offset)}get textNode(){return xs(this,this.parent)}get nodeAfter(){let e=this.parent;return hf(this,e,xs(this,e))}get nodeBefore(){let e=this.parent;return uf(this,e,xs(this,e))}get isAtStart(){return this.offset===0}get isAtEnd(){return this.offset==this.parent.maxOffset}compareWith(e){if(this.root!=e.root)return"different";let t=Je(this.path,e.path);switch(t){case"same":return"same";case"prefix":return"before";case"extension":return"after";default:return this.path[t]<e.path[t]?"before":"after"}}getLastMatchingPosition(e,t={}){t.startPosition=this;let i=new Mt(t);return i.skip(e),i.position}getParentPath(){return this.path.slice(0,-1)}getAncestors(){let e=this.parent;return e.is("documentFragment")?[e]:e.getAncestors({includeSelf:!0})}findAncestor(e){let t=this.parent;return t.is("element")?t.findAncestor(e,{includeSelf:!0}):null}getCommonPath(e){if(this.root!=e.root)return[];let t=Je(this.path,e.path),i=typeof t=="string"?Math.min(this.path.length,e.path.length):t;return this.path.slice(0,i)}getCommonAncestor(e){let t=this.getAncestors(),i=e.getAncestors(),o=0;for(;t[o]==i[o]&&t[o];)o++;return o===0?null:t[o-1]}getShiftedBy(e){let t=this.clone(),i=t.offset+e;return t.offset=i<0?0:i,t}isAfter(e){return this.compareWith(e)=="after"}isBefore(e){return this.compareWith(e)=="before"}isEqual(e){return this.compareWith(e)=="same"}isTouching(e){if(this.root!==e.root)return!1;let t=Math.min(this.path.length,e.path.length);for(let i=0;i<t;i++){let o=this.path[i]-e.path[i];if(o<-1||o>1)return!1;if(o===1)return Em(e,this,i);if(o===-1)return Em(this,e,i)}return this.path.length===e.path.length?!0:this.path.length>e.path.length?ac(this.path,t):ac(e.path,t)}hasSameParentAs(e){if(this.root!==e.root)return!1;let t=this.getParentPath(),i=e.getParentPath();return Je(t,i)=="same"}getTransformedByOperation(e){let t;switch(e.type){case"insert":t=this._getTransformedByInsertOperation(e);break;case"move":case"remove":case"reinsert":t=this._getTransformedByMoveOperation(e);break;case"split":t=this._getTransformedBySplitOperation(e);break;case"merge":t=this._getTransformedByMergeOperation(e);break;default:t=s._createAt(this);break}return t}_getTransformedByInsertOperation(e){return this._getTransformedByInsertion(e.position,e.howMany)}_getTransformedByMoveOperation(e){return this._getTransformedByMove(e.sourcePosition,e.targetPosition,e.howMany)}_getTransformedBySplitOperation(e){let t=e.movedRange;return t.containsPosition(this)||t.start.isEqual(this)&&this.stickiness=="toNext"?this._getCombined(e.splitPosition,e.moveTargetPosition):e.graveyardPosition?this._getTransformedByMove(e.graveyardPosition,e.insertionPosition,1):this._getTransformedByInsertion(e.insertionPosition,1)}_getTransformedByMergeOperation(e){let t=e.movedRange,i=t.containsPosition(this)||t.start.isEqual(this),o;return i?(o=this._getCombined(e.sourcePosition,e.targetPosition),e.sourcePosition.isBefore(e.targetPosition)&&(o=o._getTransformedByDeletion(e.deletionPosition,1))):this.isEqual(e.deletionPosition)?o=s._createAt(e.deletionPosition):o=this._getTransformedByMove(e.deletionPosition,e.graveyardPosition,1),o}_getTransformedByDeletion(e,t){let i=s._createAt(this);if(this.root!=e.root)return i;if(Je(e.getParentPath(),this.getParentPath())=="same"){if(e.offset<this.offset){if(e.offset+t>this.offset)return null;i.offset-=t}}else if(Je(e.getParentPath(),this.getParentPath())=="prefix"){let o=e.path.length-1;if(e.offset<=this.path[o]){if(e.offset+t>this.path[o])return null;i.path[o]-=t}}return i}_getTransformedByInsertion(e,t){let i=s._createAt(this);if(this.root!=e.root)return i;if(Je(e.getParentPath(),this.getParentPath())=="same")(e.offset<this.offset||e.offset==this.offset&&this.stickiness!="toPrevious")&&(i.offset+=t);else if(Je(e.getParentPath(),this.getParentPath())=="prefix"){let o=e.path.length-1;e.offset<=this.path[o]&&(i.path[o]+=t)}return i}_getTransformedByMove(e,t,i){if(t=t._getTransformedByDeletion(e,i),e.isEqual(t))return s._createAt(this);let o=this._getTransformedByDeletion(e,i);return o===null||e.isEqual(this)&&this.stickiness=="toNext"||e.getShiftedBy(i).isEqual(this)&&this.stickiness=="toPrevious"?this._getCombined(e,t):o._getTransformedByInsertion(t,i)}_getCombined(e,t){let i=e.path.length-1,o=s._createAt(t);return o.stickiness=this.stickiness,o.offset=o.offset+this.path[i]-e.offset,o.path=[...o.path,...this.path.slice(i+1)],o}toJSON(){return{root:this.root.toJSON(),path:Array.from(this.path),stickiness:this.stickiness}}clone(){return new this.constructor(this.root,this.path,this.stickiness)}static _createAt(e,t,i="toNone"){if(e instanceof s)return new s(e.root,e.path,e.stickiness);{let o=e;if(t=="end")t=o.maxOffset;else{if(t=="before")return this._createBefore(o,i);if(t=="after")return this._createAfter(o,i);if(t!==0&&!t)throw new E("model-createpositionat-offset-required",[this,e])}if(!o.is("element")&&!o.is("documentFragment"))throw new E("model-position-parent-incorrect",[this,e]);let n=o.getPath();return n.push(t),new this(o.root,n,i)}}static _createAfter(e,t){if(!e.parent)throw new E("model-position-after-root",[this,e],{root:e});return this._createAt(e.parent,e.endOffset,t)}static _createBefore(e,t){if(!e.parent)throw new E("model-position-before-root",e,{root:e});return this._createAt(e.parent,e.startOffset,t)}static fromJSON(e,t){if(e.root==="$graveyard"){let i=new s(t.graveyard,e.path);return i.stickiness=e.stickiness,i}if(!t.getRoot(e.root))throw new E("model-position-fromjson-no-root",t,{rootName:e.root});return new s(t.getRoot(e.root),e.path,e.stickiness)}};D.prototype.is=function(s){return s==="position"||s==="model:position"};function xs(s,e){let t=e.getChild(e.offsetToIndex(s.offset));return t&&t.is("$text")&&t.startOffset<s.offset?t:null}function hf(s,e,t){return t!==null?null:e.getChild(e.offsetToIndex(s.offset))}function uf(s,e,t){return t!==null?null:e.getChild(e.offsetToIndex(s.offset)-1)}function Em(s,e,t){return!(t+1===s.path.length||!ac(e.path,t+1)||!Nv(s,t+1))}function ac(s,e){for(;e<s.length;){if(s[e]!==0)return!1;e++}return!0}function Nv(s,e){let t=s.parent,i=s.path.length-1,o=0;for(;i>=e;){if(s.path[i]+o!==t.maxOffset)return!1;o=1,i--,t=t.parent}return!0}var M=class s extends di{start;end;constructor(e,t){super(),this.start=D._createAt(e),this.end=t?D._createAt(t):D._createAt(e),this.start.stickiness=this.isCollapsed?"toNone":"toNext",this.end.stickiness=this.isCollapsed?"toNone":"toPrevious"}*[Symbol.iterator](){yield*Ae(new Mt({boundaries:this,ignoreElementEnd:!0}))}get isCollapsed(){return this.start.isEqual(this.end)}get isFlat(){let e=this.start.getParentPath(),t=this.end.getParentPath();return Je(e,t)=="same"}get root(){return this.start.root}containsPosition(e){return e.isAfter(this.start)&&e.isBefore(this.end)}containsRange(e,t=!1){e.isCollapsed&&(t=!1);let i=this.containsPosition(e.start)||t&&this.start.isEqual(e.start),o=this.containsPosition(e.end)||t&&this.end.isEqual(e.end);return i&&o}containsItem(e){let t=D._createBefore(e);return this.containsPosition(t)||this.start.isEqual(t)}isEqual(e){return this.start.isEqual(e.start)&&this.end.isEqual(e.end)}isIntersecting(e){return this.start.isBefore(e.end)&&this.end.isAfter(e.start)}getDifference(e){let t=[];return this.isIntersecting(e)?(this.containsPosition(e.start)&&t.push(new s(this.start,e.start)),this.containsPosition(e.end)&&t.push(new s(e.end,this.end))):t.push(new s(this.start,this.end)),t}getIntersection(e){if(this.isIntersecting(e)){let t=this.start,i=this.end;return this.containsPosition(e.start)&&(t=e.start),this.containsPosition(e.end)&&(i=e.end),new s(t,i)}return null}getJoined(e,t=!1){let i=this.isIntersecting(e);if(i||(this.start.isBefore(e.start)?i=t?this.end.isTouching(e.start):this.end.isEqual(e.start):i=t?e.end.isTouching(this.start):e.end.isEqual(this.start)),!i)return null;let o=this.start,n=this.end;return e.start.isBefore(o)&&(o=e.start),e.end.isAfter(n)&&(n=e.end),new s(o,n)}getMinimalFlatRanges(){let e=[],t=this.start.getCommonPath(this.end).length,i=D._createAt(this.start),o=i.parent;for(;i.path.length>t+1;){let n=o.maxOffset-i.offset;n!==0&&e.push(new s(i,i.getShiftedBy(n))),i.path=i.path.slice(0,-1),i.offset++,o=o.parent}for(;i.path.length<=this.end.path.length;){let n=this.end.path[i.path.length-1],r=n-i.offset;r!==0&&e.push(new s(i,i.getShiftedBy(r))),i.offset=n,i.path.push(0)}return e}getWalker(e={}){return e.boundaries=this,new Mt(e)}*getItems(e={}){e.boundaries=this,e.ignoreElementEnd=!0;let t=new Mt(e);for(let i of t)yield i.item}*getPositions(e={}){e.boundaries=this;let t=new Mt(e);yield t.position;for(let i of t)yield i.nextPosition}getTransformedByOperation(e){switch(e.type){case"insert":return this._getTransformedByInsertOperation(e);case"move":case"remove":case"reinsert":return this._getTransformedByMoveOperation(e);case"split":return[this._getTransformedBySplitOperation(e)];case"merge":return[this._getTransformedByMergeOperation(e)]}return[new s(this.start,this.end)]}getTransformedByOperations(e){let t=[new s(this.start,this.end)];for(let i of e)for(let o=0;o<t.length;o++){let n=t[o].getTransformedByOperation(i);t.splice(o,1,...n),o+=n.length-1}for(let i=0;i<t.length;i++){let o=t[i];for(let n=i+1;n<t.length;n++){let r=t[n];(o.containsRange(r)||r.containsRange(o)||o.isEqual(r))&&t.splice(n,1)}}return t}getCommonAncestor(){return this.start.getCommonAncestor(this.end)}getContainedElement(){if(this.isCollapsed)return null;let e=this.start.nodeAfter,t=this.end.nodeBefore;return e&&e.is("element")&&e===t?e:null}toJSON(){return{start:this.start.toJSON(),end:this.end.toJSON()}}clone(){return new this.constructor(this.start,this.end)}_getTransformedByInsertOperation(e,t=!1){return this._getTransformedByInsertion(e.position,e.howMany,t)}_getTransformedByMoveOperation(e,t=!1){let i=e.sourcePosition,o=e.howMany,n=e.targetPosition;return this._getTransformedByMove(i,n,o,t)}_getTransformedBySplitOperation(e){let t=this.start._getTransformedBySplitOperation(e),i=this.end._getTransformedBySplitOperation(e);return this.end.isEqual(e.insertionPosition)&&(i=this.end.getShiftedBy(1)),t.root!=i.root&&(i=this.end.getShiftedBy(-1)),new s(t,i)}_getTransformedByMergeOperation(e){if(this.start.isEqual(e.targetPosition)&&this.end.isEqual(e.deletionPosition))return new s(this.start);let t=this.start._getTransformedByMergeOperation(e),i=this.end._getTransformedByMergeOperation(e);return t.root!=i.root&&(i=this.end.getShiftedBy(-1)),t.isAfter(i)?(e.sourcePosition.isBefore(e.targetPosition)?(t=D._createAt(i),t.offset=0):(e.deletionPosition.isEqual(t)||(i=e.deletionPosition),t=e.targetPosition),new s(t,i)):new s(t,i)}_getTransformedByInsertion(e,t,i=!1){if(i&&this.containsPosition(e))return[new s(this.start,e),new s(e.getShiftedBy(t),this.end._getTransformedByInsertion(e,t))];{let o=new s(this.start,this.end);return o.start=o.start._getTransformedByInsertion(e,t),o.end=o.end._getTransformedByInsertion(e,t),[o]}}_getTransformedByMove(e,t,i,o=!1){if(this.isCollapsed){let h=this.start._getTransformedByMove(e,t,i);return[new s(h)]}let n=s._createFromPositionAndShift(e,i),r=t._getTransformedByDeletion(e,i);if(this.containsPosition(t)&&!o&&(n.containsPosition(this.start)||n.containsPosition(this.end))){let h=this.start._getTransformedByMove(e,t,i),g=this.end._getTransformedByMove(e,t,i);return[new s(h,g)]}let a,l=this.getDifference(n),c=null,d=this.getIntersection(n);if(l.length==1?c=new s(l[0].start._getTransformedByDeletion(e,i),l[0].end._getTransformedByDeletion(e,i)):l.length==2&&(c=new s(this.start,this.end._getTransformedByDeletion(e,i))),c?a=c._getTransformedByInsertion(r,i,d!==null||o):a=[],d){let h=new s(d.start._getCombined(n.start,r),d.end._getCombined(n.start,r));a.length==2?a.splice(1,0,h):a.push(h)}return a}_getTransformedByDeletion(e,t){let i=this.start._getTransformedByDeletion(e,t),o=this.end._getTransformedByDeletion(e,t);return i==null&&o==null?null:(i==null&&(i=e),o==null&&(o=e),new s(i,o))}static _createFromPositionAndShift(e,t){let i=e,o=e.getShiftedBy(t);return t>0?new this(i,o):new this(o,i)}static _createIn(e){return new this(D._createAt(e,0),D._createAt(e,e.maxOffset))}static _createOn(e){return this._createFromPositionAndShift(D._createBefore(e),e.offsetSize)}static _createFromRanges(e){if(e.length===0)throw new E("range-create-from-ranges-empty-array",null);if(e.length==1)return e[0].clone();let t=e[0];e.sort((n,r)=>n.start.isAfter(r.start)?1:-1);let i=e.indexOf(t),o=new this(t.start,t.end);if(i>0)for(let n=i-1;e[n].end.isEqual(o.start);n++)o.start=D._createAt(e[n].start);for(let n=i+1;n<e.length&&e[n].start.isEqual(o.end);n++)o.end=D._createAt(e[n].end);return o}static fromJSON(e,t){return new this(D.fromJSON(e.start,t),D.fromJSON(e.end,t))}};M.prototype.is=function(s){return s==="range"||s==="model:range"};var wn=class extends ue(){_modelToViewMapping=new WeakMap;_viewToModelMapping=new WeakMap;_viewToModelLengthCallbacks=new Map;_markerNameToElements=new Map;_elementToMarkerNames=new Map;_deferredBindingRemovals=new Map;_unboundMarkerNames=new Set;constructor(){super(),this.on("modelToViewPosition",(e,t)=>{if(t.viewPosition)return;let i=this._modelToViewMapping.get(t.modelPosition.parent);if(!i)throw new E("mapping-model-position-view-parent-not-found",this,{modelPosition:t.modelPosition});t.viewPosition=this.findPositionIn(i,t.modelPosition.offset)},{priority:"low"}),this.on("viewToModelPosition",(e,t)=>{if(t.modelPosition)return;let i=this.findMappedViewAncestor(t.viewPosition),o=this._viewToModelMapping.get(i),n=this._toModelOffset(t.viewPosition.parent,t.viewPosition.offset,i);t.modelPosition=D._createAt(o,n)},{priority:"low"})}bindElements(e,t){this._modelToViewMapping.set(e,t),this._viewToModelMapping.set(t,e)}unbindViewElement(e,t={}){let i=this.toModelElement(e);if(this._elementToMarkerNames.has(e))for(let o of this._elementToMarkerNames.get(e))this._unboundMarkerNames.add(o);t.defer?this._deferredBindingRemovals.set(e,e.root):(this._viewToModelMapping.delete(e),this._modelToViewMapping.get(i)==e&&this._modelToViewMapping.delete(i))}unbindModelElement(e){let t=this.toViewElement(e);this._modelToViewMapping.delete(e),this._viewToModelMapping.get(t)==e&&this._viewToModelMapping.delete(t)}bindElementToMarker(e,t){let i=this._markerNameToElements.get(t)||new Set;i.add(e);let o=this._elementToMarkerNames.get(e)||new Set;o.add(t),this._markerNameToElements.set(t,i),this._elementToMarkerNames.set(e,o)}unbindElementFromMarkerName(e,t){let i=this._markerNameToElements.get(t);i&&(i.delete(e),i.size==0&&this._markerNameToElements.delete(t));let o=this._elementToMarkerNames.get(e);o&&(o.delete(t),o.size==0&&this._elementToMarkerNames.delete(e))}flushUnboundMarkerNames(){let e=Array.from(this._unboundMarkerNames);return this._unboundMarkerNames.clear(),e}flushDeferredBindings(){for(let[e,t]of this._deferredBindingRemovals)e.root==t&&this.unbindViewElement(e);this._deferredBindingRemovals=new Map}clearBindings(){this._modelToViewMapping=new WeakMap,this._viewToModelMapping=new WeakMap,this._markerNameToElements=new Map,this._elementToMarkerNames=new Map,this._unboundMarkerNames=new Set,this._deferredBindingRemovals=new Map}toModelElement(e){return this._viewToModelMapping.get(e)}toViewElement(e){return this._modelToViewMapping.get(e)}toModelRange(e){return new M(this.toModelPosition(e.start),this.toModelPosition(e.end))}toViewRange(e){return new re(this.toViewPosition(e.start),this.toViewPosition(e.end))}toModelPosition(e){let t={viewPosition:e,mapper:this};return this.fire("viewToModelPosition",t),t.modelPosition}toViewPosition(e,t={}){let i={modelPosition:e,mapper:this,isPhantom:t.isPhantom};return this.fire("modelToViewPosition",i),i.viewPosition}markerNameToElements(e){let t=this._markerNameToElements.get(e);if(!t)return null;let i=new Set;for(let o of t)if(o.is("attributeElement"))for(let n of o.getElementsWithSameId())i.add(n);else i.add(o);return i}registerViewToModelLength(e,t){this._viewToModelLengthCallbacks.set(e,t)}findMappedViewAncestor(e){let t=e.parent;for(;!this._viewToModelMapping.has(t);)t=t.parent;return t}_toModelOffset(e,t,i){if(i!=e){let n=this._toModelOffset(e.parent,e.index,i),r=this._toModelOffset(e,t,e);return n+r}if(e.is("$text"))return t;let o=0;for(let n=0;n<t;n++)o+=this.getModelLength(e.getChild(n));return o}getModelLength(e){if(this._viewToModelLengthCallbacks.get(e.name))return this._viewToModelLengthCallbacks.get(e.name)(e);if(this._viewToModelMapping.has(e))return 1;if(e.is("$text"))return e.data.length;if(e.is("uiElement"))return 0;{let t=0;for(let i of e.getChildren())t+=this.getModelLength(i);return t}}findPositionIn(e,t){let i,o=0,n=0,r=0;if(e.is("$text"))return new O(e,t);for(;n<t;)i=e.getChild(r),o=this.getModelLength(i),n+=o,r++;return n==t?this._moveViewPositionToTextNode(new O(e,r)):this.findPositionIn(i,t-(n-o))}_moveViewPositionToTextNode(e){let t=e.nodeBefore,i=e.nodeAfter;return t instanceof Te?new O(t,t.data.length):i instanceof Te?new O(i,0):e}},lc=class{_consumable=new Map;_textProxyRegistry=new Map;add(e,t){t=Nr(t),e instanceof Pt&&(e=this._getSymbolForTextProxy(e)),this._consumable.has(e)||this._consumable.set(e,new Map),this._consumable.get(e).set(t,!0)}consume(e,t){return t=Nr(t),e instanceof Pt&&(e=this._getSymbolForTextProxy(e)),this.test(e,t)?(this._consumable.get(e).set(t,!1),!0):!1}test(e,t){t=Nr(t),e instanceof Pt&&(e=this._getSymbolForTextProxy(e));let i=this._consumable.get(e);if(i===void 0)return null;let o=i.get(t);return o===void 0?null:o}revert(e,t){t=Nr(t),e instanceof Pt&&(e=this._getSymbolForTextProxy(e));let i=this.test(e,t);return i===!1?(this._consumable.get(e).set(t,!0),!0):i===!0?!1:null}verifyAllConsumed(e){let t=[];for(let[i,o]of this._consumable)for(let[n,r]of o){let a=n.split(":")[0];r&&e==a&&t.push({event:n,item:i.name||i.description})}if(t.length)throw new E("conversion-model-consumable-not-consumed",null,{items:t})}_getSymbolForTextProxy(e){let t=null,i=this._textProxyRegistry.get(e.startOffset);if(i){let o=i.get(e.endOffset);o&&(t=o.get(e.parent))}return t||(t=this._addSymbolForTextProxy(e)),t}_addSymbolForTextProxy(e){let t=e.startOffset,i=e.endOffset,o=e.parent,n=Symbol("$textProxy:"+e.data),r,a;return r=this._textProxyRegistry.get(t),r||(r=new Map,this._textProxyRegistry.set(t,r)),a=r.get(i),a||(a=new Map,r.set(i,a)),a.set(o,n),n}};function Nr(s){let e=s.split(":");return e[0]=="insert"?e[0]:e[0]=="addMarker"||e[0]=="removeMarker"?s:e.length>1?e[0]+":"+e[1]:e[0]}var Es=class extends ue(){_conversionApi;_firedEventsMap;constructor(e){super(),this._conversionApi=B({dispatcher:this},e),this._firedEventsMap=new WeakMap}convertChanges(e,t,i){let o=this._createConversionApi(i,e.getRefreshedItems());for(let r of e.getMarkersToRemove())this._convertMarkerRemove(r.name,r.range,o);let n=this._reduceChanges(e.getChanges());for(let r of n)r.type==="insert"?this._convertInsert(M._createFromPositionAndShift(r.position,r.length),o):r.type==="reinsert"?this._convertReinsert(M._createFromPositionAndShift(r.position,r.length),o):r.type==="remove"?this._convertRemove(r.position,r.length,r.name,o):this._convertAttribute(r.range,r.attributeKey,r.attributeOldValue,r.attributeNewValue,o);o.mapper.flushDeferredBindings();for(let r of o.mapper.flushUnboundMarkerNames()){let a=t.get(r).getRange();this._convertMarkerRemove(r,a,o),this._convertMarkerAdd(r,a,o)}for(let r of e.getMarkersToAdd())this._convertMarkerAdd(r.name,r.range,o);o.consumable.verifyAllConsumed("insert")}convert(e,t,i,o={}){let n=this._createConversionApi(i,void 0,o);this._convertInsert(e,n);for(let[r,a]of t)this._convertMarkerAdd(r,a,n);n.consumable.verifyAllConsumed("insert")}convertSelection(e,t,i){let o=this._createConversionApi(i);this.fire("cleanSelection",{selection:e},o);let n=e.getFirstPosition().root;if(!o.mapper.toViewElement(n))return;let r=Array.from(t.getMarkersAtPosition(e.getFirstPosition()));if(this._addConsumablesForSelection(o.consumable,e,r),this.fire("selection",{selection:e},o),!!e.isCollapsed){for(let a of r)if(o.consumable.test(e,"addMarker:"+a.name)){let l=a.getRange();if(!Vv(e.getFirstPosition(),a,o.mapper))continue;let c={item:e,markerName:a.name,markerRange:l};this.fire(`addMarker:${a.name}`,c,o)}for(let a of e.getAttributeKeys())if(o.consumable.test(e,"attribute:"+a)){let l={item:e,range:e.getFirstRange(),attributeKey:a,attributeOldValue:null,attributeNewValue:e.getAttribute(a)};this.fire(`attribute:${a}:$text`,l,o)}}}_convertInsert(e,t,i={}){i.doNotAddConsumables||this._addConsumablesForInsert(t.consumable,e);for(let o of Array.from(e.getWalker({shallow:!0})).map(Tm))this._testAndFire("insert",o,t)}_convertRemove(e,t,i,o){this.fire(`remove:${i}`,{position:e,length:t},o)}_convertAttribute(e,t,i,o,n){this._addConsumablesForRange(n.consumable,e,`attribute:${t}`);for(let r of e){let a={item:r.item,range:M._createFromPositionAndShift(r.previousPosition,r.length),attributeKey:t,attributeOldValue:i,attributeNewValue:o};this._testAndFire(`attribute:${t}`,a,n)}}_convertReinsert(e,t){let i=Array.from(e.getWalker({shallow:!0}));this._addConsumablesForInsert(t.consumable,i);for(let o of i.map(Tm))this._testAndFire("insert",Ce(B({},o),{reconversion:!0}),t)}_convertMarkerAdd(e,t,i){if(t.root.rootName=="$graveyard")return;let o=`addMarker:${e}`;if(i.consumable.add(t,o),this.fire(o,{markerName:e,markerRange:t},i),!!i.consumable.consume(t,o)){this._addConsumablesForRange(i.consumable,t,o);for(let n of t.getItems()){if(!i.consumable.test(n,o))continue;let r={item:n,range:M._createOn(n),markerName:e,markerRange:t};this.fire(o,r,i)}}}_convertMarkerRemove(e,t,i){t.root.rootName!="$graveyard"&&this.fire(`removeMarker:${e}`,{markerName:e,markerRange:t},i)}_reduceChanges(e){let t={changes:e};return this.fire("reduceChanges",t),t.changes}_addConsumablesForInsert(e,t){for(let i of t){let o=i.item;if(e.test(o,"insert")===null){e.add(o,"insert");for(let n of o.getAttributeKeys())e.add(o,"attribute:"+n)}}return e}_addConsumablesForRange(e,t,i){for(let o of t.getItems())e.add(o,i);return e}_addConsumablesForSelection(e,t,i){e.add(t,"selection");for(let o of i)e.add(t,"addMarker:"+o.name);for(let o of t.getAttributeKeys())e.add(t,"attribute:"+o);return e}_testAndFire(e,t,i){let o=Dv(e,t),n=t.item.is("$textProxy")?i.consumable._getSymbolForTextProxy(t.item):t.item,r=this._firedEventsMap.get(i),a=r.get(n);if(!a)r.set(n,new Set([o]));else if(!a.has(o))a.add(o);else return;this.fire(o,t,i)}_testAndFireAddAttributes(e,t){let i={item:e,range:M._createOn(e)};for(let o of i.item.getAttributeKeys())i.attributeKey=o,i.attributeOldValue=null,i.attributeNewValue=i.item.getAttribute(o),this._testAndFire(`attribute:${o}`,i,t)}_createConversionApi(e,t=new Set,i={}){let o=Ce(B({},this._conversionApi),{consumable:new lc,writer:e,options:i,convertItem:n=>this._convertInsert(M._createOn(n),o),convertChildren:n=>this._convertInsert(M._createIn(n),o,{doNotAddConsumables:!0}),convertAttributes:n=>this._testAndFireAddAttributes(n,o),canReuseView:n=>!t.has(o.mapper.toModelElement(n))});return this._firedEventsMap.set(o,new Map),o}};function Vv(s,e,t){let i=e.getRange(),o=Array.from(s.getAncestors());return o.shift(),o.reverse(),!o.some(r=>{if(i.containsItem(r))return!!t.toViewElement(r).getCustomProperty("addHighlight")})}function Dv(s,e){let t=e.item.is("element")?e.item.name:"$text";return`${s}:${t}`}function Tm(s){let e=s.item,t=M._createFromPositionAndShift(s.previousPosition,s.length);return{item:e,range:t}}var Ye=class s extends ue(di){_lastRangeBackward=!1;_attrs=new Map;_ranges=[];constructor(...e){super(),e.length&&this.setTo(...e)}get anchor(){if(this._ranges.length>0){let e=this._ranges[this._ranges.length-1];return this._lastRangeBackward?e.end:e.start}return null}get focus(){if(this._ranges.length>0){let e=this._ranges[this._ranges.length-1];return this._lastRangeBackward?e.start:e.end}return null}get isCollapsed(){return this._ranges.length===1?this._ranges[0].isCollapsed:!1}get rangeCount(){return this._ranges.length}get isBackward(){return!this.isCollapsed&&this._lastRangeBackward}isEqual(e){if(this.rangeCount!=e.rangeCount)return!1;if(this.rangeCount===0)return!0;if(!this.anchor.isEqual(e.anchor)||!this.focus.isEqual(e.focus))return!1;for(let t of this._ranges){let i=!1;for(let o of e._ranges)if(t.isEqual(o)){i=!0;break}if(!i)return!1}return!0}*getRanges(){for(let e of this._ranges)yield new M(e.start,e.end)}getFirstRange(){let e=null;for(let t of this._ranges)(!e||t.start.isBefore(e.start))&&(e=t);return e?new M(e.start,e.end):null}getLastRange(){let e=null;for(let t of this._ranges)(!e||t.end.isAfter(e.end))&&(e=t);return e?new M(e.start,e.end):null}getFirstPosition(){let e=this.getFirstRange();return e?e.start.clone():null}getLastPosition(){let e=this.getLastRange();return e?e.end.clone():null}setTo(...e){let[t,i,o]=e;if(typeof i=="object"&&(o=i,i=void 0),t===null)this._setRanges([]);else if(t instanceof s)this._setRanges(t.getRanges(),t.isBackward);else if(t&&typeof t.getRanges=="function")this._setRanges(t.getRanges(),t.isBackward);else if(t instanceof M)this._setRanges([t],!!o&&!!o.backward);else if(t instanceof D)this._setRanges([new M(t)]);else if(t instanceof xo){let n=!!o&&!!o.backward,r;if(i=="in")r=M._createIn(t);else if(i=="on")r=M._createOn(t);else if(i!==void 0)r=new M(D._createAt(t,i));else throw new E("model-selection-setto-required-second-parameter",[this,t]);this._setRanges([r],n)}else if(pt(t))this._setRanges(t,o&&!!o.backward);else throw new E("model-selection-setto-not-selectable",[this,t])}_setRanges(e,t=!1){let i=Array.from(e),o=i.some(n=>{if(!(n instanceof M))throw new E("model-selection-set-ranges-not-range",[this,e]);return this._ranges.every(r=>!r.isEqual(n))});i.length===this._ranges.length&&!o||(this._replaceAllRanges(i),this._lastRangeBackward=!!t,this.fire("change:range",{directChange:!0}))}setFocus(e,t){if(this.anchor===null)throw new E("model-selection-setfocus-no-ranges",[this,e]);let i=D._createAt(e,t);if(i.compareWith(this.focus)=="same")return;let o=this.anchor;this._ranges.length&&this._popRange(),i.compareWith(o)=="before"?(this._pushRange(new M(i,o)),this._lastRangeBackward=!0):(this._pushRange(new M(o,i)),this._lastRangeBackward=!1),this.fire("change:range",{directChange:!0})}getAttribute(e){return this._attrs.get(e)}getAttributes(){return this._attrs.entries()}getAttributeKeys(){return this._attrs.keys()}hasAttribute(e){return this._attrs.has(e)}removeAttribute(e){this.hasAttribute(e)&&(this._attrs.delete(e),this.fire("change:attribute",{attributeKeys:[e],directChange:!0}))}setAttribute(e,t){this.getAttribute(e)!==t&&(this._attrs.set(e,t),this.fire("change:attribute",{attributeKeys:[e],directChange:!0}))}getSelectedElement(){return this.rangeCount!==1?null:this.getFirstRange().getContainedElement()}*getSelectedBlocks(){let e=new WeakSet;for(let t of this.getRanges()){let i=Im(t.start,e);zv(i,t)&&(yield i);for(let n of t.getWalker()){let r=n.item;n.type=="elementEnd"&&Bv(r,e,t)&&(yield r)}let o=Im(t.end,e);Fv(o,t)&&(yield o)}}containsEntireContent(e=this.anchor.root){let t=D._createAt(e,0),i=D._createAt(e,"end");return t.isTouching(this.getFirstPosition())&&i.isTouching(this.getLastPosition())}_pushRange(e){this._checkRange(e),this._ranges.push(new M(e.start,e.end))}_checkRange(e){for(let t=0;t<this._ranges.length;t++)if(e.isIntersecting(this._ranges[t]))throw new E("model-selection-range-intersects",[this,e],{addedRange:e,intersectingRange:this._ranges[t]})}_replaceAllRanges(e){this._removeAllRanges();for(let t of e)this._pushRange(t)}_removeAllRanges(){for(;this._ranges.length>0;)this._popRange()}_popRange(){this._ranges.pop()}};Ye.prototype.is=function(s){return s==="selection"||s==="model:selection"};function gf(s,e){return e.has(s)?!1:(e.add(s),s.root.document.model.schema.isBlock(s)&&!!s.parent)}function Bv(s,e,t){return gf(s,e)&&Mc(s,t)}function Im(s,e){let i=s.parent.root.document.model.schema,o=s.parent.getAncestors({parentFirst:!0,includeSelf:!0}),n=!1,r=o.find(a=>n?!1:(n=i.isLimit(a),!n&&gf(a,e)));return o.forEach(a=>e.add(a)),r}function Mc(s,e){let t=Ov(s);return t?!e.containsRange(M._createOn(t),!0):!0}function zv(s,e){return s?e.isCollapsed||s.isEmpty?!0:e.start.isTouching(D._createAt(s,s.maxOffset))?!1:Mc(s,e):!1}function Fv(s,e){return s?e.isCollapsed||s.isEmpty?!0:e.end.isTouching(D._createAt(s,0))?!1:Mc(s,e):!1}function Ov(s){let e=s.root.document.model.schema,t=s.parent;for(;t;){if(e.isBlock(t))return t;t=t.parent}}var bt=class s extends ue(M){constructor(e,t){super(e,t),Hv.call(this)}detach(){this.stopListening()}toRange(){return new M(this.start,this.end)}static fromRange(e){return new s(e.start,e.end)}};bt.prototype.is=function(s){return s==="liveRange"||s==="model:liveRange"||s=="range"||s==="model:range"};function Hv(){this.listenTo(this.root.document.model,"applyOperation",(s,e)=>{let t=e[0];t.isDocumentOperation&&Wv.call(this,t)},{priority:"low"})}function Wv(s){let e=this.getTransformedByOperation(s),t=M._createFromRanges(e),i=!t.isEqual(this),o=jv(this,s),n=null;if(i){t.root.rootName=="$graveyard"&&(s.type=="remove"?n=s.sourcePosition:n=s.deletionPosition);let r=this.toRange();this.start=t.start,this.end=t.end,this.fire("change:range",r,{deletionPosition:n})}else o&&this.fire("change:content",this.toRange(),{deletionPosition:n})}function jv(s,e){switch(e.type){case"insert":return s.containsPosition(e.position);case"move":case"remove":case"reinsert":case"merge":return s.containsPosition(e.sourcePosition)||s.start.isEqual(e.sourcePosition)||s.containsPosition(e.targetPosition);case"split":return s.containsPosition(e.splitPosition)||s.containsPosition(e.insertionPosition)}return!1}var Ts="selection:",wt=class extends ue(di){_selection;constructor(e){super(),this._selection=new cc(e),this._selection.delegate("change:range").to(this),this._selection.delegate("change:attribute").to(this),this._selection.delegate("change:marker").to(this)}get isCollapsed(){return this._selection.isCollapsed}get anchor(){return this._selection.anchor}get focus(){return this._selection.focus}get rangeCount(){return this._selection.rangeCount}get hasOwnRange(){return this._selection.hasOwnRange}get isBackward(){return this._selection.isBackward}get isGravityOverridden(){return this._selection.isGravityOverridden}get markers(){return this._selection.markers}get _ranges(){return this._selection._ranges}getRanges(){return this._selection.getRanges()}getFirstPosition(){return this._selection.getFirstPosition()}getLastPosition(){return this._selection.getLastPosition()}getFirstRange(){return this._selection.getFirstRange()}getLastRange(){return this._selection.getLastRange()}getSelectedBlocks(){return this._selection.getSelectedBlocks()}getSelectedElement(){return this._selection.getSelectedElement()}containsEntireContent(e){return this._selection.containsEntireContent(e)}destroy(){this._selection.destroy()}getAttributeKeys(){return this._selection.getAttributeKeys()}getAttributes(){return this._selection.getAttributes()}getAttribute(e){return this._selection.getAttribute(e)}hasAttribute(e){return this._selection.hasAttribute(e)}refresh(){this._selection.updateMarkers(),this._selection._updateAttributes(!1)}observeMarkers(e){this._selection.observeMarkers(e)}_setFocus(e,t){this._selection.setFocus(e,t)}_setTo(...e){this._selection.setTo(...e)}_setAttribute(e,t){this._selection.setAttribute(e,t)}_removeAttribute(e){this._selection.removeAttribute(e)}_getStoredAttributes(){return this._selection.getStoredAttributes()}_overrideGravity(){return this._selection.overrideGravity()}_restoreGravity(e){this._selection.restoreGravity(e)}static _getStoreAttributeKey(e){return Ts+e}static _isStoreAttributeKey(e){return e.startsWith(Ts)}};wt.prototype.is=function(s){return s==="selection"||s=="model:selection"||s=="documentSelection"||s=="model:documentSelection"};var cc=class extends Ye{markers=new we({idProperty:"name"});_model;_document;_attributePriority=new Map;_selectionRestorePosition=null;_hasChangedRange=!1;_overriddenGravityRegister=new Set;_observedMarkers=new Set;constructor(e){super(),this._model=e.model,this._document=e,this.listenTo(this._model,"applyOperation",(t,i)=>{let o=i[0];!o.isDocumentOperation||o.type=="marker"||o.type=="rename"||o.type=="noop"||(this._ranges.length==0&&this._selectionRestorePosition&&this._fixGraveyardSelection(this._selectionRestorePosition),this._selectionRestorePosition=null,this._hasChangedRange&&(this._hasChangedRange=!1,this.fire("change:range",{directChange:!1})))},{priority:"lowest"}),this.on("change:range",()=>{this._validateSelectionRanges(this.getRanges())}),this.listenTo(this._model.markers,"update",(t,i,o,n)=>{this._updateMarker(i,n)}),this.listenTo(this._document,"change",(t,i)=>{Uv(this._model,i)})}get isCollapsed(){return this._ranges.length===0?this._document._getDefaultRange().isCollapsed:super.isCollapsed}get anchor(){return super.anchor||this._document._getDefaultRange().start}get focus(){return super.focus||this._document._getDefaultRange().end}get rangeCount(){return this._ranges.length?this._ranges.length:1}get hasOwnRange(){return this._ranges.length>0}get isGravityOverridden(){return!!this._overriddenGravityRegister.size}destroy(){for(let e=0;e<this._ranges.length;e++)this._ranges[e].detach();this.stopListening()}*getRanges(){this._ranges.length?yield*Ae(super.getRanges()):yield this._document._getDefaultRange()}getFirstRange(){return super.getFirstRange()||this._document._getDefaultRange()}getLastRange(){return super.getLastRange()||this._document._getDefaultRange()}setTo(...e){super.setTo(...e),this._updateAttributes(!0),this.updateMarkers()}setFocus(e,t){super.setFocus(e,t),this._updateAttributes(!0),this.updateMarkers()}setAttribute(e,t){if(this._setAttribute(e,t)){let i=[e];this.fire("change:attribute",{attributeKeys:i,directChange:!0})}}removeAttribute(e){if(this._removeAttribute(e)){let t=[e];this.fire("change:attribute",{attributeKeys:t,directChange:!0})}}overrideGravity(){let e=We();return this._overriddenGravityRegister.add(e),this._overriddenGravityRegister.size===1&&this._updateAttributes(!0),e}restoreGravity(e){if(!this._overriddenGravityRegister.has(e))throw new E("document-selection-gravity-wrong-restore",this,{uid:e});this._overriddenGravityRegister.delete(e),this.isGravityOverridden||this._updateAttributes(!0)}observeMarkers(e){this._observedMarkers.add(e),this.updateMarkers()}_replaceAllRanges(e){this._validateSelectionRanges(e),super._replaceAllRanges(e)}_popRange(){this._ranges.pop().detach()}_pushRange(e){let t=this._prepareRange(e);t&&this._ranges.push(t)}_validateSelectionRanges(e){for(let t of e)if(!this._document._validateSelectionRange(t))throw new E("document-selection-wrong-position",this,{range:t})}_prepareRange(e){if(this._checkRange(e),e.root==this._document.graveyard)return;let t=bt.fromRange(e);return t.on("change:range",(i,o,n)=>{if(this._hasChangedRange=!0,t.root==this._document.graveyard){this._selectionRestorePosition=n.deletionPosition;let r=this._ranges.indexOf(t);this._ranges.splice(r,1),t.detach()}}),t}updateMarkers(){if(!this._observedMarkers.size)return;let e=[],t=!1;for(let o of this._model.markers){let n=o.name.split(":",1)[0];if(!this._observedMarkers.has(n))continue;let r=o.getRange();for(let a of this.getRanges())r.containsRange(a,!a.isCollapsed)&&e.push(o)}let i=Array.from(this.markers);for(let o of e)this.markers.has(o)||(this.markers.add(o),t=!0);for(let o of Array.from(this.markers))e.includes(o)||(this.markers.remove(o),t=!0);t&&this.fire("change:marker",{oldMarkers:i,directChange:!1})}_updateMarker(e,t){let i=e.name.split(":",1)[0];if(!this._observedMarkers.has(i))return;let o=!1,n=Array.from(this.markers),r=this.markers.has(e);if(!t)r&&(this.markers.remove(e),o=!0);else{let a=!1;for(let l of this.getRanges())if(t.containsRange(l,!l.isCollapsed)){a=!0;break}a&&!r?(this.markers.add(e),o=!0):!a&&r&&(this.markers.remove(e),o=!0)}o&&this.fire("change:marker",{oldMarkers:n,directChange:!1})}_updateAttributes(e){let t=Tt(this._getSurroundingAttributes()),i=Tt(this.getAttributes());if(e)this._attributePriority=new Map,this._attrs=new Map;else for(let[n,r]of this._attributePriority)r=="low"&&(this._attrs.delete(n),this._attributePriority.delete(n));this._setAttributesTo(t);let o=[];for(let[n,r]of this.getAttributes())(!i.has(n)||i.get(n)!==r)&&o.push(n);for(let[n]of i)this.hasAttribute(n)||o.push(n);o.length>0&&this.fire("change:attribute",{attributeKeys:o,directChange:!1})}_setAttribute(e,t,i=!0){let o=i?"normal":"low";return o=="low"&&this._attributePriority.get(e)=="normal"||super.getAttribute(e)===t?!1:(this._attrs.set(e,t),this._attributePriority.set(e,o),!0)}_removeAttribute(e,t=!0){let i=t?"normal":"low";return i=="low"&&this._attributePriority.get(e)=="normal"||(this._attributePriority.set(e,i),!super.hasAttribute(e))?!1:(this._attrs.delete(e),!0)}_setAttributesTo(e){let t=new Set;for(let[i,o]of this.getAttributes())e.get(i)!==o&&this._removeAttribute(i,!1);for(let[i,o]of e)this._setAttribute(i,o,!1)&&t.add(i);return t}*getStoredAttributes(){let e=this.getFirstPosition().parent;if(this.isCollapsed&&e.isEmpty)for(let t of e.getAttributeKeys())t.startsWith(Ts)&&(yield[t.substr(Ts.length),e.getAttribute(t)])}_getSurroundingAttributes(){let e=this.getFirstPosition(),t=this._model.schema;if(e.root.rootName=="$graveyard")return null;let i=null;if(this.isCollapsed){let o=e.textNode?e.textNode:e.nodeBefore,n=e.textNode?e.textNode:e.nodeAfter;if(this.isGravityOverridden||(i=ws(o,t)),i||(i=ws(n,t)),!this.isGravityOverridden&&!i){let r=o;for(;r&&!i;)r=r.previousSibling,i=ws(r,t)}if(!i){let r=n;for(;r&&!i;)r=r.nextSibling,i=ws(r,t)}i||(i=this.getStoredAttributes())}else{let o=this.getFirstRange();for(let n of o){if(n.item.is("element")&&t.isObject(n.item)){i=ws(n.item,t);break}if(n.type=="text"){i=n.item.getAttributes();break}}}return i}_fixGraveyardSelection(e){let t=this._model.schema.getNearestSelectionRange(e);t&&this._pushRange(t)}};function ws(s,e){if(!s)return null;if(s instanceof Pt||s instanceof xe)return s.getAttributes();if(!e.isInline(s))return null;if(!e.isObject(s))return[];let t=[];for(let[i,o]of s.getAttributes())e.checkAttribute("$text",i)&&e.getAttributeProperties(i).copyFromObject!==!1&&t.push([i,o]);return t}function Uv(s,e){let t=s.document.differ;for(let i of t.getChanges()){if(i.type!="insert")continue;let o=i.position.parent;i.length===o.maxOffset&&s.enqueueChange(e,r=>{let a=Array.from(o.getAttributeKeys()).filter(l=>l.startsWith(Ts));for(let l of a)r.removeAttribute(l,o)})}}var Fr=class{_dispatchers;constructor(e){this._dispatchers=e}add(e){for(let t of this._dispatchers)e(t);return this}},dc=class extends Fr{elementToElement(e){return this.add(ox(e))}elementToStructure(e){return this.add(nx(e))}attributeToElement(e){return this.add(sx(e))}attributeToAttribute(e){return this.add(rx(e))}markerToElement(e){return this.add(ax(e))}markerToHighlight(e){return this.add(cx(e))}markerToData(e){return this.add(lx(e))}};function Lc(){return(s,e,t)=>{if(!t.consumable.consume(e.item,s.name))return;let i=t.writer,o=t.mapper.toViewPosition(e.range.start),n=i.createText(e.item.data);i.insert(o,n)}}function Rc(){return(s,e,t)=>{t.convertAttributes(e.item),!e.reconversion&&e.item.is("element")&&!e.item.isEmpty&&t.convertChildren(e.item)}}function Gv(){return(s,e,t)=>{let i=t.mapper.toViewPosition(e.position),o=e.position.getShiftedBy(e.length),n=t.mapper.toViewPosition(o,{isPhantom:!0}),r=t.writer.createRange(i,n),a=t.writer.remove(r.getTrimmed());for(let l of t.writer.createRangeIn(a).getItems())t.mapper.unbindViewElement(l,{defer:!0})}}function mf(s,e){let t=s.createAttributeElement("span",e.attributes);return e.classes&&t._addClass(e.classes),typeof e.priority=="number"&&(t._priority=e.priority),t._id=e.id,t}function ff(){return(s,e,t)=>{let i=e.selection;if(i.isCollapsed||!t.consumable.consume(i,"selection"))return;let o=[];for(let n of i.getRanges())o.push(t.mapper.toViewRange(n));t.writer.setSelection(o,{backward:i.isBackward})}}function pf(){return(s,e,t)=>{let i=e.selection;if(!i.isCollapsed||!t.consumable.consume(i,"selection"))return;let o=t.writer,n=i.getFirstPosition(),r=t.mapper.toViewPosition(n),a=o.breakAttributes(r);o.setSelection(a)}}function $v(){return(s,e,t)=>{let i=t.writer,o=i.document.selection;for(let n of o.getRanges())n.isCollapsed&&n.end.parent.isAttached()&&t.writer.mergeAttributes(n.start);i.setSelection(null)}}function bf(s){return(e,t,i)=>{if(!i.consumable.test(t.item,e.name))return;let o=s(t.attributeOldValue,i,t),n=s(t.attributeNewValue,i,t);if(!o&&!n)return;i.consumable.consume(t.item,e.name);let r=i.writer,a=r.document.selection;if(t.item instanceof Ye||t.item instanceof wt)r.wrap(a.getFirstRange(),n);else{let l=i.mapper.toViewRange(t.range);t.attributeOldValue!==null&&o&&(l=r.unwrap(l,o)),t.attributeNewValue!==null&&n&&r.wrap(l,n)}}}function wf(s,e=px){return(t,i,o)=>{if(!e(i.item,o.consumable,{preflight:!0}))return;let n=s(i.item,o,i);if(!n)return;e(i.item,o.consumable);let r=o.mapper.toViewPosition(i.range.start);o.mapper.bindElements(i.item,n),o.writer.insert(r,n),o.convertAttributes(i.item),Cf(n,i.item.getChildren(),o,{reconversion:i.reconversion})}}function Yv(s,e){return(t,i,o)=>{if(!e(i.item,o.consumable,{preflight:!0}))return;let n=new Map;o.writer._registerSlotFactory(ux(i.item,n,o));let r=s(i.item,o,i);if(o.writer._clearSlotFactory(),!r)return;gx(i.item,n,o),e(i.item,o.consumable);let a=o.mapper.toViewPosition(i.range.start);o.mapper.bindElements(i.item,r),o.writer.insert(a,r),o.convertAttributes(i.item),mx(r,n,o,{reconversion:i.reconversion})}}function kf(s){return(e,t,i)=>{t.isOpening=!0;let o=s(t,i);t.isOpening=!1;let n=s(t,i);if(!o||!n)return;let r=t.markerRange;if(r.isCollapsed&&!i.consumable.consume(r,e.name))return;for(let c of r)if(!i.consumable.consume(c.item,e.name))return;let a=i.mapper,l=i.writer;l.insert(a.toViewPosition(r.start),o),i.mapper.bindElementToMarker(o,t.markerName),r.isCollapsed||(l.insert(a.toViewPosition(r.end),n),i.mapper.bindElementToMarker(n,t.markerName)),e.stop()}}function Xv(){return(s,e,t)=>{let i=t.mapper.markerNameToElements(e.markerName);if(i){for(let o of i)t.mapper.unbindElementFromMarkerName(o,e.markerName),t.writer.clear(t.writer.createRangeOn(o),o);t.writer.clearClonedElementsGroup(e.markerName),s.stop()}}}function qv(s){return(e,t,i)=>{let o=s(t.markerName,i);if(!o)return;let n=t.markerRange;i.consumable.consume(n,e.name)&&(Pm(n,!1,i,t,o),Pm(n,!0,i,t,o),e.stop())}}function Pm(s,e,t,i,o){let n=e?s.start:s.end,r=n.nodeAfter&&n.nodeAfter.is("element")?n.nodeAfter:null,a=n.nodeBefore&&n.nodeBefore.is("element")?n.nodeBefore:null;if(r||a){let c,d;e&&r||!e&&!a?(c=r,d=!0):(c=a,d=!1);let h=t.mapper.toViewElement(c);if(h){Kv(h,e,d,t,i,o);return}}let l=t.mapper.toViewPosition(n);Zv(l,e,t,i,o)}function Kv(s,e,t,i,o,n){let r=`data-${n.group}-${e?"start":"end"}-${t?"before":"after"}`,a=s.hasAttribute(r)?s.getAttribute(r).split(","):[];a.unshift(n.name),i.writer.setAttribute(r,a.join(","),s),i.mapper.bindElementToMarker(s,o.markerName)}function Zv(s,e,t,i,o){let n=`${o.group}-${e?"start":"end"}`,r=o.name?{name:o.name}:null,a=t.writer.createUIElement(n,r);t.writer.insert(s,a),t.mapper.bindElementToMarker(a,i.markerName)}function Qv(s){return(e,t,i)=>{let o=s(t.markerName,i);if(!o)return;let n=i.mapper.markerNameToElements(t.markerName);if(!n)return;for(let a of n)i.mapper.unbindElementFromMarkerName(a,t.markerName),a.is("containerElement")?(r(`data-${o.group}-start-before`,a),r(`data-${o.group}-start-after`,a),r(`data-${o.group}-end-before`,a),r(`data-${o.group}-end-after`,a)):i.writer.clear(i.writer.createRangeOn(a),a);i.writer.clearClonedElementsGroup(t.markerName),e.stop();function r(a,l){if(l.hasAttribute(a)){let c=new Set(l.getAttribute(a).split(","));c.delete(o.name),c.size==0?i.writer.removeAttribute(a,l):i.writer.setAttribute(a,Array.from(c).join(","),l)}}}}function Jv(s){return(e,t,i)=>{if(!i.consumable.test(t.item,e.name))return;let o=s(t.attributeOldValue,i,t),n=s(t.attributeNewValue,i,t);if(!o&&!n)return;i.consumable.consume(t.item,e.name);let r=i.mapper.toViewElement(t.item),a=i.writer;if(!r)throw new E("conversion-attribute-to-attribute-on-text",i.dispatcher,t);if(t.attributeOldValue!==null&&o)if(o.key=="class"){let l=typeof o.value=="string"?o.value.split(/\s+/):o.value;for(let c of l)a.removeClass(c,r)}else if(o.key=="style")if(typeof o.value=="string"){let l=new un(a.document.stylesProcessor);l.setTo(o.value);for(let[c]of l.getStylesEntries())a.removeStyle(c,r)}else{let l=Object.keys(o.value);for(let c of l)a.removeStyle(c,r)}else a.removeAttribute(o.key,r);if(t.attributeNewValue!==null&&n)if(n.key=="class"){let l=typeof n.value=="string"?n.value.split(/\s+/):n.value;for(let c of l)a.addClass(c,r)}else if(n.key=="style")if(typeof n.value=="string"){let l=new un(a.document.stylesProcessor);l.setTo(n.value);for(let[c,d]of l.getStylesEntries())a.setStyle(c,d,r)}else{let l=Object.keys(n.value);for(let c of l)a.setStyle(c,n.value[c],r)}else a.setAttribute(n.key,n.value,r)}}function ex(s){return(e,t,i)=>{if(!t.item||!(t.item instanceof Ye||t.item instanceof wt)&&!t.item.is("$textProxy"))return;let o=Nc(s,t,i);if(!o||!i.consumable.consume(t.item,e.name))return;let n=i.writer,r=mf(n,o),a=n.document.selection;if(t.item instanceof Ye||t.item instanceof wt)n.wrap(a.getFirstRange(),r);else{let l=i.mapper.toViewRange(t.range),c=n.wrap(l,r);for(let d of c.getItems())if(d.is("attributeElement")&&d.isSimilar(r)){i.mapper.bindElementToMarker(d,t.markerName);break}}}}function tx(s){return(e,t,i)=>{if(!t.item||!(t.item instanceof ke))return;let o=Nc(s,t,i);if(!o||!i.consumable.test(t.item,e.name))return;let n=i.mapper.toViewElement(t.item);if(n&&n.getCustomProperty("addHighlight")){i.consumable.consume(t.item,e.name);for(let a of M._createIn(t.item))i.consumable.consume(a.item,e.name);n.getCustomProperty("addHighlight")(n,o,i.writer),i.mapper.bindElementToMarker(n,t.markerName)}}}function ix(s){return(e,t,i)=>{if(t.markerRange.isCollapsed)return;let o=Nc(s,t,i);if(!o)return;let n=mf(i.writer,o),r=i.mapper.markerNameToElements(t.markerName);if(r){for(let a of r)i.mapper.unbindElementFromMarkerName(a,t.markerName),a.is("attributeElement")?i.writer.unwrap(i.writer.createRangeOn(a),n):a.getCustomProperty("removeHighlight")(a,o.id,i.writer);i.writer.clearClonedElementsGroup(t.markerName),e.stop()}}}function ox(s){let e=vf(s.model),t=Is(s.view,"container");return e.attributes.length&&(e.children=!0),i=>{i.on(`insert:${e.name}`,wf(t,_f(e)),{priority:s.converterPriority||"normal"}),(e.children||e.attributes.length)&&i.on("reduceChanges",yf(e),{priority:"low"})}}function nx(s){let e=vf(s.model),t=Is(s.view,"container");return e.children=!0,i=>{if(i._conversionApi.schema.checkChild(e.name,"$text"))throw new E("conversion-element-to-structure-disallowed-text",i,{elementName:e.name});i.on(`insert:${e.name}`,Yv(t,_f(e)),{priority:s.converterPriority||"normal"}),i.on("reduceChanges",yf(e),{priority:"low"})}}function sx(s){s=Et(s);let e=s.model;typeof e=="string"&&(e={key:e});let t=`attribute:${e.key}`;if(e.name&&(t+=":"+e.name),e.values)for(let o of e.values)s.view[o]=Is(s.view[o],"attribute");else s.view=Is(s.view,"attribute");let i=xf(s);return o=>{o.on(t,bf(i),{priority:s.converterPriority||"normal"})}}function rx(s){s=Et(s);let e=s.model;typeof e=="string"&&(e={key:e});let t=`attribute:${e.key}`;if(e.name&&(t+=":"+e.name),e.values)for(let o of e.values)s.view[o]=Mm(s.view[o]);else s.view=Mm(s.view);let i=xf(s);return o=>{o.on(t,Jv(i),{priority:s.converterPriority||"normal"})}}function ax(s){let e=Is(s.view,"ui");return t=>{t.on(`addMarker:${s.model}`,kf(e),{priority:s.converterPriority||"normal"}),t.on(`removeMarker:${s.model}`,Xv(),{priority:s.converterPriority||"normal"})}}function lx(s){s=Et(s);let e=s.model,t=s.view;return t||(t=i=>({group:e,name:i.substr(s.model.length+1)})),i=>{i.on(`addMarker:${e}`,qv(t),{priority:s.converterPriority||"normal"}),i.on(`removeMarker:${e}`,Qv(t),{priority:s.converterPriority||"normal"})}}function cx(s){return e=>{e.on(`addMarker:${s.model}`,ex(s.view),{priority:s.converterPriority||"normal"}),e.on(`addMarker:${s.model}`,tx(s.view),{priority:s.converterPriority||"normal"}),e.on(`removeMarker:${s.model}`,ix(s.view),{priority:s.converterPriority||"normal"})}}function vf(s){return typeof s=="string"&&(s={name:s}),{name:s.name,attributes:s.attributes?Pe(s.attributes):[],children:!!s.children}}function Is(s,e){return typeof s=="function"?s:(t,i)=>dx(s,i,e)}function dx(s,e,t){typeof s=="string"&&(s={name:s});let i,o=e.writer,n=Object.assign({},s.attributes);if(t=="container")i=o.createContainerElement(s.name,n);else if(t=="attribute"){let r={priority:s.priority||co.DEFAULT_PRIORITY};i=o.createAttributeElement(s.name,n,r)}else i=o.createUIElement(s.name,n);if(s.styles){let r=Object.keys(s.styles);for(let a of r)o.setStyle(a,s.styles[a],i)}if(s.classes){let r=s.classes;if(typeof r=="string")o.addClass(r,i);else for(let a of r)o.addClass(a,i)}return i}function xf(s){return s.model.values?(e,t,i)=>{let o=s.view[e];return o?o(e,t,i):null}:s.view}function Mm(s){return typeof s=="string"?e=>({key:s,value:e}):typeof s=="object"?s.value?()=>s:e=>({key:s.key,value:e}):s}function Nc(s,e,t){let i=typeof s=="function"?s(e,t):s;return i?(i.priority||(i.priority=10),i.id||(i.id=e.markerName),i):null}function hx(s){return(e,t)=>{if(!e.is("element",s.name))return!1;if(t.type=="attribute"){if(s.attributes.includes(t.attributeKey))return!0}else{if(s.children)return!0}return!1}}function yf(s){let e=hx(s);return(t,i)=>{let o=[];i.reconvertedElements||(i.reconvertedElements=new Set);for(let n of i.changes){let r=n.type=="attribute"?n.range.start.nodeAfter:n.position.parent;if(!r||!e(r,n)){o.push(n);continue}if(!i.reconvertedElements.has(r)){i.reconvertedElements.add(r);let a=D._createBefore(r),l=o.length;for(let c=o.length-1;c>=0;c--){let d=o[c],g=(d.type=="attribute"?d.range.start:d.position).compareWith(a);if(g=="before"||d.type=="remove"&&g=="same")break;l=c}o.splice(l,0,{type:"remove",name:r.name,position:a,length:1},{type:"reinsert",name:r.name,position:a,length:1})}}i.changes=o}}function _f(s){return(e,t,i={})=>{let o=["insert"];for(let n of s.attributes)e.hasAttribute(n)&&o.push(`attribute:${n}`);return o.every(n=>t.test(e,n))?(i.preflight||o.forEach(n=>t.consume(e,n)),!0):!1}}function ux(s,e,t){return(i,o)=>{let n=i.createContainerElement("$slot"),r=null;if(o==="children")r=Array.from(s.getChildren());else if(typeof o=="function")r=Array.from(s.getChildren()).filter(a=>o(a));else throw new E("conversion-slot-mode-unknown",t.dispatcher,{modeOrFilter:o});return e.set(n,r),n}}function gx(s,e,t){let i=Array.from(e.values()).flat(),o=new Set(i);if(o.size!=i.length)throw new E("conversion-slot-filter-overlap",t.dispatcher,{element:s});if(o.size!=s.childCount)throw new E("conversion-slot-filter-incomplete",t.dispatcher,{element:s})}function mx(s,e,t,i){t.mapper.on("modelToViewPosition",r,{priority:"highest"});let o=null,n=null;for([o,n]of e)Cf(s,n,t,i),t.writer.move(t.writer.createRangeIn(o),t.writer.createPositionBefore(o)),t.writer.remove(o);t.mapper.off("modelToViewPosition",r);function r(a,l){let c=l.modelPosition.nodeAfter,d=n.indexOf(c);d<0||(l.viewPosition=l.mapper.findPositionIn(o,d))}}function Cf(s,e,t,i){for(let o of e)fx(s.root,o,t,i)||t.convertItem(o)}function fx(s,e,t,i){let{writer:o,mapper:n}=t;if(!i.reconversion)return!1;let r=n.toViewElement(e);return!r||r.root==s||!t.canReuseView(r)?!1:(o.move(o.createRangeOn(r),n.toViewPosition(D._createBefore(e))),!0)}function px(s,e,{preflight:t}={}){return t?e.test(s,"insert"):e.consume(s,"insert")}function Af(s){let{schema:e,document:t}=s.model;for(let i of t.getRoots())if(i.isEmpty&&!e.checkChild(i,"$text")&&e.checkChild(i,"paragraph"))return s.insertElement("paragraph",i),!0;return!1}function Sf(s,e,t){let i=t.createContext(s);return!(!t.checkChild(i,"paragraph")||!t.checkChild(i.push("paragraph"),e))}function Ef(s,e){let t=e.createElement("paragraph");return e.insert(t,s),e.createPositionAt(t,0)}var hc=class extends Fr{elementToElement(e){return this.add(Tf(e))}elementToAttribute(e){return this.add(kx(e))}attributeToAttribute(e){return this.add(vx(e))}elementToMarker(e){return this.add(xx(e))}dataToMarker(e){return this.add(yx(e))}};function Lm(){return(s,e,t)=>{if(!e.modelRange&&t.consumable.consume(e.viewItem,{name:!0})){let{modelRange:i,modelCursor:o}=t.convertChildren(e.viewItem,e.modelCursor);e.modelRange=i,e.modelCursor=o}}}function bx(){return(s,e,{schema:t,consumable:i,writer:o})=>{let n=e.modelCursor;if(!i.test(e.viewItem))return;if(!t.checkChild(n,"$text")){if(!Sf(n,"$text",t)||e.viewItem.data.trim().length==0)return;let a=n.nodeBefore;n=Ef(n,o),a&&a.is("element","$marker")&&(o.move(o.createRangeOn(a),n),n=o.createPositionAfter(a))}i.consume(e.viewItem);let r=o.createText(e.viewItem.data);o.insert(r,n),e.modelRange=o.createRange(n,n.getShiftedBy(r.offsetSize)),e.modelCursor=e.modelRange.end}}function wx(s,e){return(t,i)=>{let o=i.newSelection,n=[];for(let a of o.getRanges())n.push(e.toModelRange(a));let r=s.createSelection(n,{backward:o.isBackward});r.isEqual(s.document.selection)||s.change(a=>{a.setSelection(r)})}}function Tf(s){s=Et(s);let e=uc(s),t=Vc(s.view),i=t?`element:${t}`:"element";return o=>{o.on(i,e,{priority:s.converterPriority||"normal"})}}function kx(s){s=Et(s),If(s);let e=Pf(s,!1),t=Vc(s.view),i=t?`element:${t}`:"element";return o=>{o.on(i,e,{priority:s.converterPriority||"low"})}}function vx(s){s=Et(s);let e=null;(typeof s.view=="string"||s.view.key)&&(e=Ax(s)),If(s,e);let t=Pf(s,!0);return i=>{i.on("element",t,{priority:s.converterPriority||"low"})}}function xx(s){let e=Tx(s.model);return Tf(Ce(B({},s),{model:e}))}function yx(s){s=Et(s),s.model||(s.model=o=>o?s.view+":"+o:s.view);let e={view:s.view,model:s.model},t=uc(Rm(e,"start")),i=uc(Rm(e,"end"));return o=>{o.on(`element:${s.view}-start`,t,{priority:s.converterPriority||"normal"}),o.on(`element:${s.view}-end`,i,{priority:s.converterPriority||"normal"});let n=Ft.low,r=Ft.highest,a=Ft.get(s.converterPriority)/r;o.on("element",_x(e),{priority:n+a})}}function _x(s){return(e,t,i)=>{let o=`data-${s.view}`;if(!i.consumable.test(t.viewItem,{attributes:o+"-end-after"})&&!i.consumable.test(t.viewItem,{attributes:o+"-start-after"})&&!i.consumable.test(t.viewItem,{attributes:o+"-end-before"})&&!i.consumable.test(t.viewItem,{attributes:o+"-start-before"}))return;t.modelRange||Object.assign(t,i.convertChildren(t.viewItem,t.modelCursor)),i.consumable.consume(t.viewItem,{attributes:o+"-end-after"})&&n(t.modelRange.end,t.viewItem.getAttribute(o+"-end-after").split(",")),i.consumable.consume(t.viewItem,{attributes:o+"-start-after"})&&n(t.modelRange.end,t.viewItem.getAttribute(o+"-start-after").split(",")),i.consumable.consume(t.viewItem,{attributes:o+"-end-before"})&&n(t.modelRange.start,t.viewItem.getAttribute(o+"-end-before").split(",")),i.consumable.consume(t.viewItem,{attributes:o+"-start-before"})&&n(t.modelRange.start,t.viewItem.getAttribute(o+"-start-before").split(","));function n(r,a){for(let l of a){let c=s.model(l,i),d=i.writer.createElement("$marker",{"data-name":c});i.writer.insert(d,r),t.modelCursor.isEqual(r)?t.modelCursor=t.modelCursor.getShiftedBy(1):t.modelCursor=t.modelCursor._getTransformedByInsertion(r,1),t.modelRange=t.modelRange._getTransformedByInsertion(r,1)[0]}}}}function Vc(s){return typeof s=="string"?s:typeof s=="object"&&typeof s.name=="string"?s.name:null}function uc(s){let e=new Ot(s.view);return(t,i,o)=>{let n=e.match(i.viewItem);if(!n)return;let r=n.match;if(r.name=!0,!o.consumable.test(i.viewItem,r))return;let a=Cx(s.model,i.viewItem,o);a&&o.safeInsert(a,i.modelCursor)&&(o.consumable.consume(i.viewItem,r),o.convertChildren(i.viewItem,a),o.updateConversionResult(a,i))}}function Cx(s,e,t){return s instanceof Function?s(e,t):t.writer.createElement(s)}function Ax(s){typeof s.view=="string"&&(s.view={key:s.view});let e=s.view.key,t=typeof s.view.value>"u"?/[\s\S]*/:s.view.value,i;return e=="class"||e=="style"?i={[e=="class"?"classes":"styles"]:t}:i={attributes:{[e]:t}},s.view.name&&(i.name=s.view.name),s.view=i,e}function If(s,e=null){let t=e===null?!0:n=>n.getAttribute(e),i=typeof s.model!="object"?s.model:s.model.key,o=typeof s.model!="object"||typeof s.model.value>"u"?t:s.model.value;s.model={key:i,value:o}}function Pf(s,e){let t=new Ot(s.view);return(i,o,n)=>{if(!o.modelRange&&e)return;let r=t.match(o.viewItem);if(!r||(Sx(s.view,o.viewItem)?r.match.name=!0:delete r.match.name,!n.consumable.test(o.viewItem,r.match)))return;let a=s.model.key,l=typeof s.model.value=="function"?s.model.value(o.viewItem,n):s.model.value;if(l===null)return;o.modelRange||Object.assign(o,n.convertChildren(o.viewItem,o.modelCursor)),Ex(o.modelRange,{key:a,value:l},e,n)&&(n.consumable.test(o.viewItem,{name:!0})&&(r.match.name=!0),n.consumable.consume(o.viewItem,r.match))}}function Sx(s,e){let t=typeof s=="function"?s(e):s;return typeof t=="object"&&!Vc(t)?!1:!t.classes&&!t.attributes&&!t.styles}function Ex(s,e,t,i){let o=!1;for(let n of Array.from(s.getItems({shallow:t})))i.schema.checkAttribute(n,e.key)&&(o=!0,!n.hasAttribute(e.key)&&i.writer.setAttribute(e.key,e.value,n));return o}function Tx(s){return(e,t)=>{let i=typeof s=="string"?s:s(e,t);return t.writer.createElement("$marker",{"data-name":i})}}function Rm(s,e){let t=(i,o)=>{let n=i.getAttribute("name"),r=s.model(n,o);return o.writer.createElement("$marker",{"data-name":r})};return{view:`${s.view}-${e}`,model:t}}function Ix(s){s.document.registerPostFixer(e=>Px(e,s))}function Px(s,e){let t=e.document.selection,i=e.schema,o=[],n=!1;for(let r of t.getRanges()){let a=Mf(r,i);a&&!a.isEqual(r)?(o.push(a),n=!0):o.push(r)}return n&&s.setSelection(Nx(o),{backward:t.isBackward}),!1}function Mf(s,e){return s.isCollapsed?Mx(s,e):Lx(s,e)}function Mx(s,e){let t=s.start,i=e.getNearestSelectionRange(t);if(!i){let n=t.getAncestors().reverse().find(r=>e.isObject(r));return n?M._createOn(n):null}if(!i.isCollapsed)return i;let o=i.start;return t.isEqual(o)?null:new M(o)}function Lx(s,e){let{start:t,end:i}=s,o=e.checkChild(t,"$text"),n=e.checkChild(i,"$text"),r=e.getLimitElement(t),a=e.getLimitElement(i);if(r===a){if(o&&n)return null;if(Rx(t,i,e)){let h=t.nodeAfter&&e.isSelectable(t.nodeAfter)?null:e.getNearestSelectionRange(t,"forward"),m=i.nodeBefore&&e.isSelectable(i.nodeBefore)?null:e.getNearestSelectionRange(i,"backward"),p=h?h.start:t,b=m?m.end:i;return new M(p,b)}}let l=r&&!r.is("rootElement"),c=a&&!a.is("rootElement");if(l||c){let d=t.nodeAfter&&i.nodeBefore&&t.nodeAfter.parent===i.nodeBefore.parent,h=l&&(!d||!Vm(t.nodeAfter,e)),g=c&&(!d||!Vm(i.nodeBefore,e)),m=t,p=i;return h&&(m=D._createBefore(Nm(r,e))),g&&(p=D._createAfter(Nm(a,e))),new M(m,p)}return null}function Nm(s,e){let t=s,i=t;for(;e.isLimit(i)&&i.parent;)t=i,i=i.parent;return t}function Rx(s,e,t){let i=s.nodeAfter&&!t.isLimit(s.nodeAfter)||t.checkChild(s,"$text"),o=e.nodeBefore&&!t.isLimit(e.nodeBefore)||t.checkChild(e,"$text");return i||o}function Nx(s){let e=[...s],t=new Set,i=1;for(;i<e.length;){let n=e[i],r=e.slice(0,i);for(let[a,l]of r.entries())if(!t.has(a)){if(n.isEqual(l))t.add(a);else if(n.isIntersecting(l)){t.add(a),t.add(i);let c=n.getJoined(l);e.push(c)}}i++}return e.filter((n,r)=>!t.has(r))}function Vm(s,e){return s&&e.isSelectable(s)}var Or=class extends ge(){model;view;mapper;downcastDispatcher;constructor(e,t){super(),this.model=e,this.view=new bn(t),this.mapper=new wn,this.downcastDispatcher=new Es({mapper:this.mapper,schema:e.schema});let i=this.model.document,o=i.selection,n=this.model.markers;this.listenTo(this.model,"_beforeChanges",()=>{this.view._disableRendering(!0)},{priority:"highest"}),this.listenTo(this.model,"_afterChanges",()=>{this.view._disableRendering(!1)},{priority:"lowest"}),this.listenTo(i,"change",()=>{this.view.change(r=>{this.downcastDispatcher.convertChanges(i.differ,n,r),this.downcastDispatcher.convertSelection(o,n,r)})},{priority:"low"}),this.listenTo(this.view.document,"selectionChange",wx(this.model,this.mapper)),this.listenTo(this.view.document,"beforeinput",Vx(this.mapper,this.model.schema,this.view),{priority:"high"}),this.downcastDispatcher.on("insert:$text",Lc(),{priority:"lowest"}),this.downcastDispatcher.on("insert",Rc(),{priority:"lowest"}),this.downcastDispatcher.on("remove",Gv(),{priority:"low"}),this.downcastDispatcher.on("cleanSelection",$v()),this.downcastDispatcher.on("selection",ff(),{priority:"low"}),this.downcastDispatcher.on("selection",pf(),{priority:"low"}),this.view.document.roots.bindTo(this.model.document.roots).using(r=>{if(r.rootName=="$graveyard")return null;let a=new _s(this.view.document,r.name);return a.rootName=r.rootName,this.mapper.bindElements(r,a),a})}destroy(){this.view.destroy(),this.stopListening()}reconvertMarker(e){let t=typeof e=="string"?e:e.name,i=this.model.markers.get(t);if(!i)throw new E("editingcontroller-reconvertmarker-marker-not-exist",this,{markerName:t});this.model.change(()=>{this.model.markers._refresh(i)})}reconvertItem(e){this.model.change(()=>{this.model.document.differ._refreshItem(e)})}};function Vx(s,e,t){return(i,o)=>{if(!(t.document.isComposing&&!K.isAndroid))for(let n=0;n<o.targetRanges.length;n++){let r=o.targetRanges[n],a=s.toModelRange(r),l=Mf(a,e);!l||l.isEqual(a)||(o.targetRanges[n]=s.toViewRange(l))}}}var gc=class s{_consumables=new Map;add(e,t){let i;if(e.is("$text")||e.is("documentFragment")){this._consumables.set(e,!0);return}this._consumables.has(e)?i=this._consumables.get(e):(i=new mc(e),this._consumables.set(e,i)),i.add(t)}test(e,t){let i=this._consumables.get(e);return i===void 0?null:e.is("$text")||e.is("documentFragment")?i:i.test(t)}consume(e,t){return this.test(e,t)?(e.is("$text")||e.is("documentFragment")?this._consumables.set(e,!1):this._consumables.get(e).consume(t),!0):!1}revert(e,t){let i=this._consumables.get(e);i!==void 0&&(e.is("$text")||e.is("documentFragment")?this._consumables.set(e,!0):i.revert(t))}static consumablesFromElement(e){let t={element:e,name:!0,attributes:[],classes:[],styles:[]},i=e.getAttributeKeys();for(let r of i)r=="style"||r=="class"||t.attributes.push(r);let o=e.getClassNames();for(let r of o)t.classes.push(r);let n=e.getStyleNames();for(let r of n)t.styles.push(r);return t}static createFrom(e,t){if(t||(t=new s),e.is("$text"))return t.add(e),t;e.is("element")&&t.add(e,s.consumablesFromElement(e)),e.is("documentFragment")&&t.add(e);for(let i of e.getChildren())t=s.createFrom(i,t);return t}},Vr=["attributes","classes","styles"],mc=class{element;_canConsumeName;_consumables;constructor(e){this.element=e,this._canConsumeName=null,this._consumables={attributes:new Map,styles:new Map,classes:new Map}}add(e){e.name&&(this._canConsumeName=!0);for(let t of Vr)t in e&&this._add(t,e[t])}test(e){if(e.name&&!this._canConsumeName)return this._canConsumeName;for(let t of Vr)if(t in e){let i=this._test(t,e[t]);if(i!==!0)return i}return!0}consume(e){e.name&&(this._canConsumeName=!1);for(let t of Vr)t in e&&this._consume(t,e[t])}revert(e){e.name&&(this._canConsumeName=!0);for(let t of Vr)t in e&&this._revert(t,e[t])}_add(e,t){let i=Pe(t),o=this._consumables[e];for(let n of i){if(e==="attributes"&&(n==="class"||n==="style"))throw new E("viewconsumable-invalid-attribute",this);if(o.set(n,!0),e==="styles")for(let r of this.element.document.stylesProcessor.getRelatedStyles(n))o.set(r,!0)}}_test(e,t){let i=Pe(t),o=this._consumables[e];for(let n of i)if(e==="attributes"&&(n==="class"||n==="style")){let r=n=="class"?"classes":"styles",a=this._test(r,[...this._consumables[r].keys()]);if(a!==!0)return a}else{let r=o.get(n);if(r===void 0)return null;if(!r)return!1}return!0}_consume(e,t){let i=Pe(t),o=this._consumables[e];for(let n of i)if(e==="attributes"&&(n==="class"||n==="style")){let r=n=="class"?"classes":"styles";this._consume(r,[...this._consumables[r].keys()])}else if(o.set(n,!1),e=="styles")for(let r of this.element.document.stylesProcessor.getRelatedStyles(n))o.set(r,!1)}_revert(e,t){let i=Pe(t),o=this._consumables[e];for(let n of i)if(e==="attributes"&&(n==="class"||n==="style")){let r=n=="class"?"classes":"styles";this._revert(r,[...this._consumables[r].keys()])}else o.get(n)===!1&&o.set(n,!0)}},fc=class extends ge(){_sourceDefinitions={};_attributeProperties={};_compiledDefinitions;constructor(){super(),this.decorate("checkChild"),this.decorate("checkAttribute"),this.on("checkAttribute",(e,t)=>{t[0]=new dn(t[0])},{priority:"highest"}),this.on("checkChild",(e,t)=>{t[0]=new dn(t[0]),t[1]=this.getDefinition(t[1])},{priority:"highest"})}register(e,t){if(this._sourceDefinitions[e])throw new E("schema-cannot-register-item-twice",this,{itemName:e});this._sourceDefinitions[e]=[Object.assign({},t)],this._clearCache()}extend(e,t){if(!this._sourceDefinitions[e])throw new E("schema-cannot-extend-missing-item",this,{itemName:e});this._sourceDefinitions[e].push(Object.assign({},t)),this._clearCache()}getDefinitions(){return this._compiledDefinitions||this._compile(),this._compiledDefinitions}getDefinition(e){let t;return typeof e=="string"?t=e:"is"in e&&(e.is("$text")||e.is("$textProxy"))?t="$text":t=e.name,this.getDefinitions()[t]}isRegistered(e){return!!this.getDefinition(e)}isBlock(e){let t=this.getDefinition(e);return!!(t&&t.isBlock)}isLimit(e){let t=this.getDefinition(e);return t?!!(t.isLimit||t.isObject):!1}isObject(e){let t=this.getDefinition(e);return t?!!(t.isObject||t.isLimit&&t.isSelectable&&t.isContent):!1}isInline(e){let t=this.getDefinition(e);return!!(t&&t.isInline)}isSelectable(e){let t=this.getDefinition(e);return t?!!(t.isSelectable||t.isObject):!1}isContent(e){let t=this.getDefinition(e);return t?!!(t.isContent||t.isObject):!1}checkChild(e,t){return t?this._checkContextMatch(t,e):!1}checkAttribute(e,t){let i=this.getDefinition(e.last);return i?i.allowAttributes.includes(t):!1}checkMerge(e,t){if(e instanceof D){let i=e.nodeBefore,o=e.nodeAfter;if(!(i instanceof ke))throw new E("schema-check-merge-no-element-before",this);if(!(o instanceof ke))throw new E("schema-check-merge-no-element-after",this);return this.checkMerge(i,o)}for(let i of t.getChildren())if(!this.checkChild(e,i))return!1;return!0}addChildCheck(e){this.on("checkChild",(t,[i,o])=>{if(!o)return;let n=e(i,o);typeof n=="boolean"&&(t.stop(),t.return=n)},{priority:"high"})}addAttributeCheck(e){this.on("checkAttribute",(t,[i,o])=>{let n=e(i,o);typeof n=="boolean"&&(t.stop(),t.return=n)},{priority:"high"})}setAttributeProperties(e,t){this._attributeProperties[e]=Object.assign(this.getAttributeProperties(e),t)}getAttributeProperties(e){return this._attributeProperties[e]||{}}getLimitElement(e){let t;for(e instanceof D?t=e.parent:t=(e instanceof M?[e]:Array.from(e.getRanges())).reduce((o,n)=>{let r=n.getCommonAncestor();return o?o.getCommonAncestor(r,{includeSelf:!0}):r},null);!this.isLimit(t)&&t.parent;)t=t.parent;return t}checkAttributeInSelection(e,t){if(e.isCollapsed){let o=[...e.getFirstPosition().getAncestors(),new xe("",e.getAttributes())];return this.checkAttribute(o,t)}else{let i=e.getRanges();for(let o of i)for(let n of o)if(this.checkAttribute(n.item,t))return!0}return!1}*getValidRanges(e,t){e=Zx(e);for(let i of e)yield*Ae(this._getValidRangesForRange(i,t))}getNearestSelectionRange(e,t="both"){if(e.root.rootName=="$graveyard")return null;if(this.checkChild(e,"$text"))return new M(e);let i,o,n=e.getAncestors().reverse().find(r=>this.isLimit(r))||e.root;(t=="both"||t=="backward")&&(i=new Mt({boundaries:M._createIn(n),startPosition:e,direction:"backward"})),(t=="both"||t=="forward")&&(o=new Mt({boundaries:M._createIn(n),startPosition:e}));for(let r of Kx(i,o)){let a=r.walker==i?"elementEnd":"elementStart",l=r.value;if(l.type==a&&this.isObject(l.item))return M._createOn(l.item);if(this.checkChild(l.nextPosition,"$text"))return new M(l.nextPosition)}return null}findAllowedParent(e,t){let i=e.parent;for(;i;){if(this.checkChild(i,t))return i;if(this.isLimit(i))return null;i=i.parent}return null}setAllowedAttributes(e,t,i){let o=i.model;for(let[n,r]of Object.entries(t))o.schema.checkAttribute(e,n)&&i.setAttribute(n,r,e)}removeDisallowedAttributes(e,t){for(let i of e)if(i.is("$text"))Dm(this,i,t);else{let n=M._createIn(i).getPositions();for(let r of n){let a=r.nodeBefore||r.parent;Dm(this,a,t)}}}getAttributesWithProperty(e,t,i){let o={};for(let[n,r]of e.getAttributes()){let a=this.getAttributeProperties(n);a[t]!==void 0&&(i===void 0||i===a[t])&&(o[n]=r)}return o}createContext(e){return new dn(e)}_clearCache(){this._compiledDefinitions=null}_compile(){let e={},t=this._sourceDefinitions,i=Object.keys(t);for(let n of i)e[n]=Dx(t[n],n);let o=Object.values(e);for(let n of o)Bx(e,n),zx(e,n),Fx(e,n),Ox(e,n);for(let n of o)Hx(e,n);for(let n of o)Wx(e,n);for(let n of o)jx(e,n);for(let n of o)Gx(e,n);for(let n of o)$x(e,n);this._compiledDefinitions=Ux(e)}_checkContextMatch(e,t,i=t.length-1){let o=t.getItem(i);if(e.allowIn.includes(o.name)){if(i==0)return!0;{let n=this.getDefinition(o);return this._checkContextMatch(n,t,i-1)}}else return!1}*_getValidRangesForRange(e,t){let i=e.start,o=e.start;for(let n of e.getItems({shallow:!0}))n.is("element")&&(yield*Ae(this._getValidRangesForRange(M._createIn(n),t))),this.checkAttribute(n,t)||(i.isEqual(o)||(yield new M(i,o)),i=D._createAfter(n)),o=D._createAfter(n);i.isEqual(o)||(yield new M(i,o))}findOptimalInsertionRange(e,t){let i=e.getSelectedElement();if(i&&this.isObject(i)&&!this.isInline(i))return t=="before"||t=="after"?new M(D._createAt(i,t)):M._createOn(i);let o=Se(e.getSelectedBlocks());if(!o)return new M(e.focus);if(o.isEmpty)return new M(D._createAt(o,0));let n=D._createAfter(o);return e.focus.isTouching(n)?new M(n):new M(D._createBefore(o))}},dn=class s{_items;constructor(e){if(e instanceof s)return e;let t;typeof e=="string"?t=[e]:Array.isArray(e)?t=e:t=e.getAncestors({includeSelf:!0}),this._items=t.map(qx)}get length(){return this._items.length}get last(){return this._items[this._items.length-1]}[Symbol.iterator](){return this._items[Symbol.iterator]()}push(e){let t=new s([e]);return t._items=[...this._items,...t._items],t}getItem(e){return this._items[e]}*getNames(){yield*Ae(this._items.map(e=>e.name))}endsWith(e){return Array.from(this.getNames()).join(" ").endsWith(e)}startsWith(e){return Array.from(this.getNames()).join(" ").startsWith(e)}};function Dx(s,e){let t={name:e,allowIn:new Set,allowChildren:new Set,disallowIn:new Set,disallowChildren:new Set,allowContentOf:new Set,allowWhere:new Set,allowAttributes:new Set,disallowAttributes:new Set,allowAttributesOf:new Set,inheritTypesFrom:new Set};return Yx(s,t),si(s,t,"allowIn"),si(s,t,"allowChildren"),si(s,t,"disallowIn"),si(s,t,"disallowChildren"),si(s,t,"allowContentOf"),si(s,t,"allowWhere"),si(s,t,"allowAttributes"),si(s,t,"disallowAttributes"),si(s,t,"allowAttributesOf"),si(s,t,"inheritTypesFrom"),Xx(s,t),t}function Bx(s,e){for(let t of e.allowIn){let i=s[t];i?i.allowChildren.add(e.name):e.allowIn.delete(t)}}function zx(s,e){for(let t of e.allowChildren){let i=s[t];i?i.allowIn.add(e.name):e.allowChildren.delete(t)}}function Fx(s,e){for(let t of e.disallowIn){let i=s[t];i?i.disallowChildren.add(e.name):e.disallowIn.delete(t)}}function Ox(s,e){for(let t of e.disallowChildren){let i=s[t];i?i.disallowIn.add(e.name):e.disallowChildren.delete(t)}}function Hx(s,e){for(let t of e.disallowChildren)e.allowChildren.delete(t);for(let t of e.disallowIn)e.allowIn.delete(t);for(let t of e.disallowAttributes)e.allowAttributes.delete(t)}function Wx(s,e){for(let t of e.allowContentOf){let i=s[t];i&&(i.disallowChildren.forEach(o=>{e.allowChildren.has(o)||(e.disallowChildren.add(o),s[o].disallowIn.add(e.name))}),i.allowChildren.forEach(o=>{e.disallowChildren.has(o)||(e.allowChildren.add(o),s[o].allowIn.add(e.name))}))}}function jx(s,e){for(let t of e.allowWhere){let i=s[t];i&&(i.disallowIn.forEach(o=>{e.allowIn.has(o)||(e.disallowIn.add(o),s[o].disallowChildren.add(e.name))}),i.allowIn.forEach(o=>{e.disallowIn.has(o)||(e.allowIn.add(o),s[o].allowChildren.add(e.name))}))}}function Ux(s){let e={};for(let t of Object.values(s))e[t.name]={name:t.name,isBlock:!!t.isBlock,isContent:!!t.isContent,isInline:!!t.isInline,isLimit:!!t.isLimit,isObject:!!t.isObject,isSelectable:!!t.isSelectable,allowIn:Array.from(t.allowIn).filter(i=>!!s[i]),allowChildren:Array.from(t.allowChildren).filter(i=>!!s[i]),allowAttributes:Array.from(t.allowAttributes)};return e}function Gx(s,e){for(let t of e.allowAttributesOf){let i=s[t];if(!i)return;i.allowAttributes.forEach(o=>{e.disallowAttributes.has(o)||e.allowAttributes.add(o)})}}function $x(s,e){for(let t of e.inheritTypesFrom){let i=s[t];if(i){let o=Object.keys(i).filter(n=>n.startsWith("is"));for(let n of o)n in e||(e[n]=i[n])}}}function Yx(s,e){for(let t of s){let i=Object.keys(t).filter(o=>o.startsWith("is"));for(let o of i)e[o]=!!t[o]}}function si(s,e,t){for(let i of s){let o=i[t];typeof o=="string"&&(o=[o]),Array.isArray(o)&&o.forEach(n=>e[t].add(n))}}function Xx(s,e){for(let t of s){let i=t.inheritAllFrom;i&&(e.allowContentOf.add(i),e.allowWhere.add(i),e.allowAttributesOf.add(i),e.inheritTypesFrom.add(i))}}function qx(s){return typeof s=="string"||s.is("documentFragment")?{name:typeof s=="string"?s:"$documentFragment",*getAttributeKeys(){},getAttribute(){}}:{name:s.is("element")?s.name:"$text",*getAttributeKeys(){yield*Ae(s.getAttributeKeys())},getAttribute(e){return s.getAttribute(e)}}}function*Kx(s,e){let t=!1;for(;!t;){if(t=!0,s){let i=s.next();i.done||(t=!1,yield{walker:s,value:i.value})}if(e){let i=e.next();i.done||(t=!1,yield{walker:e,value:i.value})}}}function*Zx(s){for(let e of s)yield*Ae(e.getMinimalFlatRanges())}function Dm(s,e,t){for(let i of e.getAttributeKeys())s.checkAttribute(e,i)||t.removeAttribute(i,e)}var Hr=class extends ue(){conversionApi;_splitParts=new Map;_cursorParents=new Map;_modelCursor=null;_emptyElementsToKeep=new Set;constructor(e){super(),this.conversionApi=Ce(B({},e),{consumable:null,writer:null,store:null,convertItem:(t,i)=>this._convertItem(t,i),convertChildren:(t,i)=>this._convertChildren(t,i),safeInsert:(t,i)=>this._safeInsert(t,i),updateConversionResult:(t,i)=>this._updateConversionResult(t,i),splitToAllowedParent:(t,i)=>this._splitToAllowedParent(t,i),getSplitParts:t=>this._getSplitParts(t),keepEmptyElement:t=>this._keepEmptyElement(t)})}convert(e,t,i=["$root"]){this.fire("viewCleanup",e),this._modelCursor=Jx(i,t),this.conversionApi.writer=t,this.conversionApi.consumable=gc.createFrom(e),this.conversionApi.store={};let{modelRange:o}=this._convertItem(e,this._modelCursor),n=t.createDocumentFragment();if(o){this._removeEmptyElements();for(let r of Array.from(this._modelCursor.parent.getChildren()))t.append(r,n);n.markers=Qx(n,t)}return this._modelCursor=null,this._splitParts.clear(),this._cursorParents.clear(),this._emptyElementsToKeep.clear(),this.conversionApi.writer=null,this.conversionApi.store=null,n}_convertItem(e,t){let i={viewItem:e,modelCursor:t,modelRange:null};if(e.is("element")?this.fire(`element:${e.name}`,i,this.conversionApi):e.is("$text")?this.fire("text",i,this.conversionApi):this.fire("documentFragment",i,this.conversionApi),i.modelRange&&!(i.modelRange instanceof M))throw new E("view-conversion-dispatcher-incorrect-result",this);return{modelRange:i.modelRange,modelCursor:i.modelCursor}}_convertChildren(e,t){let i=t.is("position")?t:D._createAt(t,0),o=new M(i);for(let n of Array.from(e.getChildren())){let r=this._convertItem(n,i);r.modelRange instanceof M&&(o.end=r.modelRange.end,i=r.modelCursor)}return{modelRange:o,modelCursor:i}}_safeInsert(e,t){let i=this._splitToAllowedParent(e,t);return i?(this.conversionApi.writer.insert(e,i.position),!0):!1}_updateConversionResult(e,t){let i=this._getSplitParts(e),o=this.conversionApi.writer;t.modelRange||(t.modelRange=o.createRange(o.createPositionBefore(e),o.createPositionAfter(i[i.length-1])));let n=this._cursorParents.get(e);n?t.modelCursor=o.createPositionAt(n,0):t.modelCursor=t.modelRange.end}_splitToAllowedParent(e,t){let{schema:i,writer:o}=this.conversionApi,n=i.findAllowedParent(t,e);if(n){if(n===t.parent)return{position:t};this._modelCursor.parent.getAncestors().includes(n)&&(n=null)}if(!n)return Sf(t,e,i)?{position:Ef(t,o)}:null;let r=this.conversionApi.writer.split(t,n),a=[];for(let c of r.range.getWalker())if(c.type=="elementEnd")a.push(c.item);else{let d=a.pop(),h=c.item;this._registerSplitPair(d,h)}let l=r.range.end.parent;return this._cursorParents.set(e,l),{position:r.position,cursorParent:l}}_registerSplitPair(e,t){this._splitParts.has(e)||this._splitParts.set(e,[e]);let i=this._splitParts.get(e);this._splitParts.set(t,i),i.push(t)}_getSplitParts(e){let t;return this._splitParts.has(e)?t=this._splitParts.get(e):t=[e],t}_keepEmptyElement(e){this._emptyElementsToKeep.add(e)}_removeEmptyElements(){let e=!1;for(let t of this._splitParts.keys())t.isEmpty&&!this._emptyElementsToKeep.has(t)&&(this.conversionApi.writer.remove(t),this._splitParts.delete(t),e=!0);e&&this._removeEmptyElements()}};function Qx(s,e){let t=new Set,i=new Map,o=M._createIn(s).getItems();for(let n of o)n.is("element","$marker")&&t.add(n);for(let n of t){let r=n.getAttribute("data-name"),a=e.createPositionBefore(n);i.has(r)?i.get(r).end=a.clone():i.set(r,new M(a.clone())),e.remove(n)}return i}function Jx(s,e){let t;for(let i of new dn(s)){let o={};for(let r of i.getAttributeKeys())o[r]=i.getAttribute(r);let n=e.createElement(i.name,o);t&&e.insert(n,t),t=D._createAt(n,0)}return t}var Wr=class{getHtml(e){let i=j.document.implementation.createHTMLDocument("").createElement("div");return i.appendChild(e),i.innerHTML}},Ps=class{domParser;domConverter;htmlWriter;skipComments=!0;constructor(e){this.domParser=new DOMParser,this.domConverter=new mo(e,{renderingMode:"data"}),this.htmlWriter=new Wr}toData(e){let t=this.domConverter.viewToDom(e);return this.htmlWriter.getHtml(t)}toView(e){let t=this._toDom(e);return this.domConverter.domToView(t,{skipComments:this.skipComments})}registerRawContentMatcher(e){this.domConverter.registerRawContentMatcher(e)}useFillerType(e){this.domConverter.blockFillerMode=e=="marked"?"markedNbsp":"nbsp"}_toDom(e){e.match(/<(?:html|body|head|meta)(?:\s[^>]*)?>/i)||(e=`<body>${e}</body>`);let t=this.domParser.parseFromString(e,"text/html"),i=t.createDocumentFragment(),o=t.body.childNodes;for(;o.length>0;)i.appendChild(o[0]);return i}},jr=class extends ue(){model;mapper;downcastDispatcher;upcastDispatcher;viewDocument;stylesProcessor;htmlProcessor;processor;_viewWriter;constructor(e,t){super(),this.model=e,this.mapper=new wn,this.downcastDispatcher=new Es({mapper:this.mapper,schema:e.schema}),this.downcastDispatcher.on("insert:$text",Lc(),{priority:"lowest"}),this.downcastDispatcher.on("insert",Rc(),{priority:"lowest"}),this.upcastDispatcher=new Hr({schema:e.schema}),this.viewDocument=new Gr(t),this.stylesProcessor=t,this.htmlProcessor=new Ps(this.viewDocument),this.processor=this.htmlProcessor,this._viewWriter=new Cs(this.viewDocument),this.upcastDispatcher.on("text",bx(),{priority:"lowest"}),this.upcastDispatcher.on("element",Lm(),{priority:"lowest"}),this.upcastDispatcher.on("documentFragment",Lm(),{priority:"lowest"}),ge().prototype.decorate.call(this,"init"),ge().prototype.decorate.call(this,"set"),ge().prototype.decorate.call(this,"get"),ge().prototype.decorate.call(this,"toView"),ge().prototype.decorate.call(this,"toModel"),this.on("init",()=>{this.fire("ready")},{priority:"lowest"}),this.on("ready",()=>{this.model.enqueueChange({isUndoable:!1},Af)},{priority:"lowest"})}get(e={}){let{rootName:t="main",trim:i="empty"}=e;if(!this._checkIfRootsExists([t]))throw new E("datacontroller-get-non-existent-root",this);let o=this.model.document.getRoot(t);return o.isAttached()||de("datacontroller-get-detached-root",this),i==="empty"&&!this.model.hasContent(o,{ignoreWhitespaces:!0})?"":this.stringify(o,e)}stringify(e,t={}){let i=this.toView(e,t);return this.processor.toData(i)}toView(e,t={}){let i=this.viewDocument,o=this._viewWriter;this.mapper.clearBindings();let n=M._createIn(e),r=new ho(i);this.mapper.bindElements(e,r);let a=e.is("documentFragment")?e.markers:ey(e);return this.downcastDispatcher.convert(n,a,o,t),r}init(e){if(this.model.document.version)throw new E("datacontroller-init-document-not-empty",this);let t={};if(typeof e=="string"?t.main=e:t=e,!this._checkIfRootsExists(Object.keys(t)))throw new E("datacontroller-init-non-existent-root",this);return this.model.enqueueChange({isUndoable:!1},i=>{for(let o of Object.keys(t)){let n=this.model.document.getRoot(o);i.insert(this.parse(t[o],n),n,0)}}),Promise.resolve()}set(e,t={}){let i={};if(typeof e=="string"?i.main=e:i=e,!this._checkIfRootsExists(Object.keys(i)))throw new E("datacontroller-set-non-existent-root",this);this.model.enqueueChange(t.batchType||{},o=>{o.setSelection(null),o.removeSelectionAttribute(this.model.document.selection.getAttributeKeys());for(let n of Object.keys(i)){let r=this.model.document.getRoot(n);o.remove(o.createRangeIn(r)),o.insert(this.parse(i[n],r),r,0)}})}parse(e,t="$root"){let i=this.processor.toView(e);return this.toModel(i,t)}toModel(e,t="$root"){return this.model.change(i=>this.upcastDispatcher.convert(e,i,t))}addStyleProcessorRules(e){e(this.stylesProcessor)}registerRawContentMatcher(e){this.processor&&this.processor!==this.htmlProcessor&&this.processor.registerRawContentMatcher(e),this.htmlProcessor.registerRawContentMatcher(e)}destroy(){this.stopListening()}_checkIfRootsExists(e){for(let t of e)if(!this.model.document.getRoot(t))return!1;return!0}};function ey(s){let e=[],t=s.root.document;if(!t)return new Map;let i=M._createIn(s);for(let o of t.model.markers){let n=o.getRange(),r=n.isCollapsed,a=n.start.isEqual(i.start)||n.end.isEqual(i.end);if(r&&a)e.push([o.name,n]);else{let l=i.getIntersection(n);l&&e.push([o.name,l])}}return e.sort(([o,n],[r,a])=>{if(n.end.compareWith(a.start)!=="after")return 1;if(n.start.compareWith(a.end)!=="before")return-1;switch(n.start.compareWith(a.start)){case"before":return 1;case"after":return-1;default:switch(n.end.compareWith(a.end)){case"before":return 1;case"after":return-1;default:return r.localeCompare(o)}}}),new Map(e)}var Ur=class{_helpers=new Map;_downcast;_upcast;constructor(e,t){this._downcast=Pe(e),this._createConversionHelpers({name:"downcast",dispatchers:this._downcast,isDowncast:!0}),this._upcast=Pe(t),this._createConversionHelpers({name:"upcast",dispatchers:this._upcast,isDowncast:!1})}addAlias(e,t){let i=this._downcast.includes(t);if(!this._upcast.includes(t)&&!i)throw new E("conversion-add-alias-dispatcher-not-registered",this);this._createConversionHelpers({name:e,dispatchers:[t],isDowncast:i})}for(e){if(!this._helpers.has(e))throw new E("conversion-for-unknown-group",this);return this._helpers.get(e)}elementToElement(e){this.for("downcast").elementToElement(e);for(let{model:t,view:i}of Yl(e))this.for("upcast").elementToElement({model:t,view:i,converterPriority:e.converterPriority})}attributeToElement(e){this.for("downcast").attributeToElement(e);for(let{model:t,view:i}of Yl(e))this.for("upcast").elementToAttribute({view:i,model:t,converterPriority:e.converterPriority})}attributeToAttribute(e){this.for("downcast").attributeToAttribute(e);for(let{model:t,view:i}of Yl(e))this.for("upcast").attributeToAttribute({view:i,model:t})}_createConversionHelpers({name:e,dispatchers:t,isDowncast:i}){if(this._helpers.has(e))throw new E("conversion-group-exists",this);let o=i?new dc(t):new hc(t);this._helpers.set(e,o)}};function*Yl(s){if(s.model.values)for(let e of s.model.values){let t={key:s.model.key,value:e},i=s.view[e],o=s.upcastAlso?s.upcastAlso[e]:void 0;yield*Ae(Bm(t,i,o))}else yield*Ae(Bm(s.model,s.view,s.upcastAlso))}function*Bm(s,e,t){if(yield{model:s,view:e},t)for(let i of Pe(t))yield{model:s,view:i}}var pc=class{namespaces;domParser;domConverter;htmlWriter;skipComments=!0;constructor(e,t={}){this.namespaces=t.namespaces||[],this.domParser=new DOMParser,this.domConverter=new mo(e,{renderingMode:"data"}),this.htmlWriter=new Wr}toData(e){let t=this.domConverter.viewToDom(e);return this.htmlWriter.getHtml(t)}toView(e){let t=this._toDom(e);return this.domConverter.domToView(t,{keepOriginalCase:!0,skipComments:this.skipComments})}registerRawContentMatcher(e){this.domConverter.registerRawContentMatcher(e)}useFillerType(e){this.domConverter.blockFillerMode=e=="marked"?"markedNbsp":"nbsp"}_toDom(e){e=`<xml ${this.namespaces.map(a=>`xmlns:${a}="nsp"`).join(" ")}>${e}</xml>`;let i=this.domParser.parseFromString(e,"text/xml"),o=i.querySelector("parsererror");if(o)throw new Error("Parse error - "+o.textContent);let n=i.createDocumentFragment(),r=i.documentElement.childNodes;for(;r.length>0;)n.appendChild(r[0]);return n}};var kt=class{baseVersion;isDocumentOperation;batch;constructor(e){this.baseVersion=e,this.isDocumentOperation=this.baseVersion!==null,this.batch=null}_validate(){}toJSON(){let e=Object.assign({},this);return e.__className=this.constructor.className,delete e.batch,delete e.isDocumentOperation,e}static get className(){return"Operation"}static fromJSON(e,t){return new this(e.baseVersion)}};function Dc(s,e){let t=Rf(e),i=t.reduce((r,a)=>r+a.offsetSize,0),o=s.parent;Rs(s);let n=s.index;return o._insertChild(n,t),Ls(o,n+t.length),Ls(o,n),new M(s,s.getShiftedBy(i))}function Lf(s){if(!s.isFlat)throw new E("operation-utils-remove-range-not-flat",this);let e=s.start.parent;Rs(s.start),Rs(s.end);let t=e._removeChildren(s.start.index,s.end.index-s.start.index);return Ls(e,s.start.index),t}function Ms(s,e){if(!s.isFlat)throw new E("operation-utils-move-range-not-flat",this);let t=Lf(s);return e=e._getTransformedByDeletion(s.start,s.end.offset-s.start.offset),Dc(e,t)}function ty(s,e,t){Rs(s.start),Rs(s.end);for(let i of s.getItems({shallow:!0})){let o=i.is("$textProxy")?i.textNode:i;t!==null?o._setAttribute(e,t):o._removeAttribute(e),Ls(o.parent,o.index)}Ls(s.end.parent,s.end.index)}function Rf(s){let e=[];function t(i){if(typeof i=="string")e.push(new xe(i));else if(i instanceof Pt)e.push(new xe(i.data,i.getAttributes()));else if(i instanceof xo)e.push(i);else if(pt(i))for(let o of i)t(o)}t(s);for(let i=1;i<e.length;i++){let o=e[i],n=e[i-1];o instanceof xe&&n instanceof xe&&Nf(o,n)&&(e.splice(i-1,2,new xe(n.data+o.data,n.getAttributes())),i--)}return e}function Ls(s,e){let t=s.getChild(e-1),i=s.getChild(e);if(t&&i&&t.is("$text")&&i.is("$text")&&Nf(t,i)){let o=new xe(t.data+i.data,t.getAttributes());s._removeChildren(e-1,2),s._insertChild(e-1,o)}}function Rs(s){let e=s.textNode,t=s.parent;if(e){let i=s.offset-e.startOffset,o=e.index;t._removeChildren(o,1);let n=new xe(e.data.substr(0,i),e.getAttributes()),r=new xe(e.data.substr(i),e.getAttributes());t._insertChild(o,[n,r])}}function Nf(s,e){let t=s.getAttributes(),i=e.getAttributes();for(let o of t){if(o[1]!==e.getAttribute(o[0]))return!1;i.next()}return i.next().done}var me=class s extends kt{sourcePosition;howMany;targetPosition;constructor(e,t,i,o){super(o),this.sourcePosition=e.clone(),this.sourcePosition.stickiness="toNext",this.howMany=t,this.targetPosition=i.clone(),this.targetPosition.stickiness="toNone"}get type(){return this.targetPosition.root.rootName=="$graveyard"?"remove":this.sourcePosition.root.rootName=="$graveyard"?"reinsert":"move"}get affectedSelectable(){return[M._createFromPositionAndShift(this.sourcePosition,this.howMany),M._createFromPositionAndShift(this.targetPosition,0)]}clone(){return new s(this.sourcePosition,this.howMany,this.targetPosition,this.baseVersion)}getMovedRangeStart(){return this.targetPosition._getTransformedByDeletion(this.sourcePosition,this.howMany)}getReversed(){let e=this.sourcePosition._getTransformedByInsertion(this.targetPosition,this.howMany);return new s(this.getMovedRangeStart(),this.howMany,e,this.baseVersion+1)}_validate(){let e=this.sourcePosition.parent,t=this.targetPosition.parent,i=this.sourcePosition.offset,o=this.targetPosition.offset;if(i+this.howMany>e.maxOffset)throw new E("move-operation-nodes-do-not-exist",this);if(e===t&&i<o&&o<i+this.howMany)throw new E("move-operation-range-into-itself",this);if(this.sourcePosition.root==this.targetPosition.root&&Je(this.sourcePosition.getParentPath(),this.targetPosition.getParentPath())=="prefix"){let n=this.sourcePosition.path.length-1;if(this.targetPosition.path[n]>=i&&this.targetPosition.path[n]<i+this.howMany)throw new E("move-operation-node-into-itself",this)}}_execute(){Ms(M._createFromPositionAndShift(this.sourcePosition,this.howMany),this.targetPosition)}toJSON(){let e=super.toJSON();return e.sourcePosition=this.sourcePosition.toJSON(),e.targetPosition=this.targetPosition.toJSON(),e}static get className(){return"MoveOperation"}static fromJSON(e,t){let i=D.fromJSON(e.sourcePosition,t),o=D.fromJSON(e.targetPosition,t);return new this(i,e.howMany,o,e.baseVersion)}},tt=class s extends kt{position;nodes;shouldReceiveAttributes;constructor(e,t,i){super(i),this.position=e.clone(),this.position.stickiness="toNone",this.nodes=new uo(Rf(t)),this.shouldReceiveAttributes=!1}get type(){return"insert"}get howMany(){return this.nodes.maxOffset}get affectedSelectable(){return this.position.clone()}clone(){let e=new uo([...this.nodes].map(i=>i._clone(!0))),t=new s(this.position,e,this.baseVersion);return t.shouldReceiveAttributes=this.shouldReceiveAttributes,t}getReversed(){let e=this.position.root.document.graveyard,t=new D(e,[0]);return new me(this.position,this.nodes.maxOffset,t,this.baseVersion+1)}_validate(){let e=this.position.parent;if(!e||e.maxOffset<this.position.offset)throw new E("insert-operation-position-invalid",this)}_execute(){let e=this.nodes;this.nodes=new uo([...e].map(t=>t._clone(!0))),Dc(this.position,e)}toJSON(){let e=super.toJSON();return e.position=this.position.toJSON(),e.nodes=this.nodes.toJSON(),e}static get className(){return"InsertOperation"}static fromJSON(e,t){let i=[];for(let n of e.nodes)n.name?i.push(ke.fromJSON(n)):i.push(xe.fromJSON(n));let o=new s(D.fromJSON(e.position,t),i,e.baseVersion);return o.shouldReceiveAttributes=e.shouldReceiveAttributes,o}},ve=class s extends kt{splitPosition;howMany;insertionPosition;graveyardPosition;constructor(e,t,i,o,n){super(n),this.splitPosition=e.clone(),this.splitPosition.stickiness="toNext",this.howMany=t,this.insertionPosition=i,this.graveyardPosition=o?o.clone():null,this.graveyardPosition&&(this.graveyardPosition.stickiness="toNext")}get type(){return"split"}get moveTargetPosition(){let e=this.insertionPosition.path.slice();return e.push(0),new D(this.insertionPosition.root,e)}get movedRange(){let e=this.splitPosition.getShiftedBy(Number.POSITIVE_INFINITY);return new M(this.splitPosition,e)}get affectedSelectable(){let e=[M._createFromPositionAndShift(this.splitPosition,0),M._createFromPositionAndShift(this.insertionPosition,0)];return this.graveyardPosition&&e.push(M._createFromPositionAndShift(this.graveyardPosition,0)),e}clone(){return new s(this.splitPosition,this.howMany,this.insertionPosition,this.graveyardPosition,this.baseVersion)}getReversed(){let e=this.splitPosition.root.document.graveyard,t=new D(e,[0]);return new Ne(this.moveTargetPosition,this.howMany,this.splitPosition,t,this.baseVersion+1)}_validate(){let e=this.splitPosition.parent,t=this.splitPosition.offset;if(!e||e.maxOffset<t)throw new E("split-operation-position-invalid",this);if(e.parent){if(this.howMany!=e.maxOffset-this.splitPosition.offset)throw new E("split-operation-how-many-invalid",this);if(this.graveyardPosition&&!this.graveyardPosition.nodeAfter)throw new E("split-operation-graveyard-position-invalid",this)}else throw new E("split-operation-split-in-root",this)}_execute(){let e=this.splitPosition.parent;if(this.graveyardPosition)Ms(M._createFromPositionAndShift(this.graveyardPosition,1),this.insertionPosition);else{let i=e._clone();Dc(this.insertionPosition,i)}let t=new M(D._createAt(e,this.splitPosition.offset),D._createAt(e,e.maxOffset));Ms(t,this.moveTargetPosition)}toJSON(){let e=super.toJSON();return e.splitPosition=this.splitPosition.toJSON(),e.insertionPosition=this.insertionPosition.toJSON(),this.graveyardPosition&&(e.graveyardPosition=this.graveyardPosition.toJSON()),e}static get className(){return"SplitOperation"}static getInsertionPosition(e){let t=e.path.slice(0,-1);return t[t.length-1]++,new D(e.root,t,"toPrevious")}static fromJSON(e,t){let i=D.fromJSON(e.splitPosition,t),o=D.fromJSON(e.insertionPosition,t),n=e.graveyardPosition?D.fromJSON(e.graveyardPosition,t):null;return new this(i,e.howMany,o,n,e.baseVersion)}},Ne=class s extends kt{sourcePosition;howMany;targetPosition;graveyardPosition;constructor(e,t,i,o,n){super(n),this.sourcePosition=e.clone(),this.sourcePosition.stickiness="toPrevious",this.howMany=t,this.targetPosition=i.clone(),this.targetPosition.stickiness="toNext",this.graveyardPosition=o.clone()}get type(){return"merge"}get deletionPosition(){return new D(this.sourcePosition.root,this.sourcePosition.path.slice(0,-1))}get movedRange(){let e=this.sourcePosition.getShiftedBy(Number.POSITIVE_INFINITY);return new M(this.sourcePosition,e)}get affectedSelectable(){let e=this.sourcePosition.parent;return[M._createOn(e),M._createFromPositionAndShift(this.targetPosition,0),M._createFromPositionAndShift(this.graveyardPosition,0)]}clone(){return new s(this.sourcePosition,this.howMany,this.targetPosition,this.graveyardPosition,this.baseVersion)}getReversed(){let e=this.targetPosition._getTransformedByMergeOperation(this),t=this.sourcePosition.path.slice(0,-1),i=new D(this.sourcePosition.root,t)._getTransformedByMergeOperation(this);return new ve(e,this.howMany,i,this.graveyardPosition,this.baseVersion+1)}_validate(){let e=this.sourcePosition.parent,t=this.targetPosition.parent;if(e.parent)if(t.parent){if(this.howMany!=e.maxOffset)throw new E("merge-operation-how-many-invalid",this)}else throw new E("merge-operation-target-position-invalid",this);else throw new E("merge-operation-source-position-invalid",this)}_execute(){let e=this.sourcePosition.parent,t=M._createIn(e);Ms(t,this.targetPosition),Ms(M._createOn(e),this.graveyardPosition)}toJSON(){let e=super.toJSON();return e.sourcePosition=e.sourcePosition.toJSON(),e.targetPosition=e.targetPosition.toJSON(),e.graveyardPosition=e.graveyardPosition.toJSON(),e}static get className(){return"MergeOperation"}static fromJSON(e,t){let i=D.fromJSON(e.sourcePosition,t),o=D.fromJSON(e.targetPosition,t),n=D.fromJSON(e.graveyardPosition,t);return new this(i,e.howMany,o,n,e.baseVersion)}},Ht=class s extends kt{name;oldRange;newRange;affectsData;_markers;constructor(e,t,i,o,n,r){super(r),this.name=e,this.oldRange=t?t.clone():null,this.newRange=i?i.clone():null,this.affectsData=n,this._markers=o}get type(){return"marker"}get affectedSelectable(){let e=[];return this.oldRange&&e.push(this.oldRange.clone()),this.newRange&&(this.oldRange?e.push(...this.newRange.getDifference(this.oldRange)):e.push(this.newRange.clone())),e}clone(){return new s(this.name,this.oldRange,this.newRange,this._markers,this.affectsData,this.baseVersion)}getReversed(){return new s(this.name,this.newRange,this.oldRange,this._markers,this.affectsData,this.baseVersion+1)}_execute(){this.newRange?this._markers._set(this.name,this.newRange,!0,this.affectsData):this._markers._remove(this.name)}toJSON(){let e=super.toJSON();return this.oldRange&&(e.oldRange=this.oldRange.toJSON()),this.newRange&&(e.newRange=this.newRange.toJSON()),delete e._markers,e}static get className(){return"MarkerOperation"}static fromJSON(e,t){return new s(e.name,e.oldRange?M.fromJSON(e.oldRange,t):null,e.newRange?M.fromJSON(e.newRange,t):null,t.model.markers,e.affectsData,e.baseVersion)}},je=class s extends kt{range;key;oldValue;newValue;constructor(e,t,i,o,n){super(n),this.range=e.clone(),this.key=t,this.oldValue=i===void 0?null:i,this.newValue=o===void 0?null:o}get type(){return this.oldValue===null?"addAttribute":this.newValue===null?"removeAttribute":"changeAttribute"}get affectedSelectable(){return this.range.clone()}clone(){return new s(this.range,this.key,this.oldValue,this.newValue,this.baseVersion)}getReversed(){return new s(this.range,this.key,this.newValue,this.oldValue,this.baseVersion+1)}toJSON(){let e=super.toJSON();return e.range=this.range.toJSON(),e}_validate(){if(!this.range.isFlat)throw new E("attribute-operation-range-not-flat",this);for(let e of this.range.getItems({shallow:!0})){if(this.oldValue!==null&&!sl(e.getAttribute(this.key),this.oldValue))throw new E("attribute-operation-wrong-old-value",this,{item:e,key:this.key,value:this.oldValue});if(this.oldValue===null&&this.newValue!==null&&e.hasAttribute(this.key))throw new E("attribute-operation-attribute-exists",this,{node:e,key:this.key})}}_execute(){sl(this.oldValue,this.newValue)||ty(this.range,this.key,this.newValue)}static get className(){return"AttributeOperation"}static fromJSON(e,t){return new s(M.fromJSON(e.range,t),e.key,e.oldValue,e.newValue,e.baseVersion)}},Be=class s extends kt{get type(){return"noop"}get affectedSelectable(){return null}clone(){return new s(this.baseVersion)}getReversed(){return new s(this.baseVersion+1)}_execute(){}static get className(){return"NoOperation"}},Wt=class s extends kt{position;oldName;newName;constructor(e,t,i,o){super(o),this.position=e,this.position.stickiness="toNext",this.oldName=t,this.newName=i}get type(){return"rename"}get affectedSelectable(){return this.position.nodeAfter}clone(){return new s(this.position.clone(),this.oldName,this.newName,this.baseVersion)}getReversed(){return new s(this.position.clone(),this.newName,this.oldName,this.baseVersion+1)}_validate(){let e=this.position.nodeAfter;if(e instanceof ke){if(e.name!==this.oldName)throw new E("rename-operation-wrong-name",this)}else throw new E("rename-operation-wrong-position",this)}_execute(){let e=this.position.nodeAfter;e.name=this.newName}toJSON(){let e=super.toJSON();return e.position=this.position.toJSON(),e}static get className(){return"RenameOperation"}static fromJSON(e,t){return new s(D.fromJSON(e.position,t),e.oldName,e.newName,e.baseVersion)}},po=class s extends kt{root;key;oldValue;newValue;constructor(e,t,i,o,n){super(n),this.root=e,this.key=t,this.oldValue=i===void 0?null:i,this.newValue=o===void 0?null:o}get type(){return this.oldValue===null?"addRootAttribute":this.newValue===null?"removeRootAttribute":"changeRootAttribute"}get affectedSelectable(){return this.root}clone(){return new s(this.root,this.key,this.oldValue,this.newValue,this.baseVersion)}getReversed(){return new s(this.root,this.key,this.newValue,this.oldValue,this.baseVersion+1)}_validate(){if(this.root!=this.root.root||this.root.is("documentFragment"))throw new E("rootattribute-operation-not-a-root",this,{root:this.root,key:this.key});if(this.oldValue!==null&&this.root.getAttribute(this.key)!==this.oldValue)throw new E("rootattribute-operation-wrong-old-value",this,{root:this.root,key:this.key});if(this.oldValue===null&&this.newValue!==null&&this.root.hasAttribute(this.key))throw new E("rootattribute-operation-attribute-exists",this,{root:this.root,key:this.key})}_execute(){this.newValue!==null?this.root._setAttribute(this.key,this.newValue):this.root._removeAttribute(this.key)}toJSON(){let e=super.toJSON();return e.root=this.root.toJSON(),e}static get className(){return"RootAttributeOperation"}static fromJSON(e,t){if(!t.getRoot(e.root))throw new E("rootattribute-operation-fromjson-no-root",this,{rootName:e.root});return new s(t.getRoot(e.root),e.key,e.oldValue,e.newValue,e.baseVersion)}},Hi=class s extends kt{rootName;elementName;isAdd;_document;constructor(e,t,i,o,n){if(super(n),this.rootName=e,this.elementName=t,this.isAdd=i,this._document=o,!this._document.getRoot(this.rootName)){let r=this._document.createRoot(this.elementName,this.rootName);r._isAttached=!1}}get type(){return this.isAdd?"addRoot":"detachRoot"}get affectedSelectable(){return this._document.getRoot(this.rootName)}clone(){return new s(this.rootName,this.elementName,this.isAdd,this._document,this.baseVersion)}getReversed(){return new s(this.rootName,this.elementName,!this.isAdd,this._document,this.baseVersion+1)}_execute(){this._document.getRoot(this.rootName)._isAttached=this.isAdd}toJSON(){let e=super.toJSON();return delete e._document,e}static get className(){return"RootOperation"}static fromJSON(e,t){return new s(e.rootName,e.elementName,e.isAdd,t,e.baseVersion)}},jt={};jt[je.className]=je;jt[tt.className]=tt;jt[Ht.className]=Ht;jt[me.className]=me;jt[Be.className]=Be;jt[kt.className]=kt;jt[Wt.className]=Wt;jt[po.className]=po;jt[Hi.className]=Hi;jt[ve.className]=ve;jt[Ne.className]=Ne;var bc=class{static fromJSON(e,t){return jt[e.__className].fromJSON(e,t)}},wc=new Map;function he(s,e,t){let i=wc.get(s);i||(i=new Map,wc.set(s,i)),i.set(e,t)}function iy(s,e){let t=wc.get(s);return t&&t.has(e)?t.get(e):oy}function oy(s){return[s]}function zm(s,e,t={}){let i=iy(s.constructor,e.constructor);try{return s=s.clone(),i(s,e,t)}catch(o){throw o}}function Vf(s,e,t){s=s.slice(),e=e.slice();let i=new kc(t.document,t.useRelations,t.forceWeakRemove);i.setOriginalOperations(s),i.setOriginalOperations(e);let o=i.originalOperations;if(s.length==0||e.length==0)return{operationsA:s,operationsB:e,originalOperations:o};let n=new WeakMap;for(let l of s)n.set(l,0);let r={nextBaseVersionA:s[s.length-1].baseVersion+1,nextBaseVersionB:e[e.length-1].baseVersion+1,originalOperationsACount:s.length,originalOperationsBCount:e.length},a=0;for(;a<s.length;){let l=s[a],c=n.get(l);if(c==e.length){a++;continue}let d=e[c],h=zm(l,d,i.getContext(l,d,!0)),g=zm(d,l,i.getContext(d,l,!1));i.updateRelation(l,d),i.setOriginalOperations(h,l),i.setOriginalOperations(g,d);for(let m of h)n.set(m,c+g.length);s.splice(a,1,...h),e.splice(c,1,...g)}if(t.padWithNoOps){let l=s.length-r.originalOperationsACount,c=e.length-r.originalOperationsBCount;Om(s,c-l),Om(e,l-c)}return Fm(s,r.nextBaseVersionB),Fm(e,r.nextBaseVersionA),{operationsA:s,operationsB:e,originalOperations:o}}var kc=class{originalOperations;_history;_useRelations;_forceWeakRemove;_relations;constructor(e,t,i=!1){this.originalOperations=new Map,this._history=e.history,this._useRelations=t,this._forceWeakRemove=!!i,this._relations=new Map}setOriginalOperations(e,t=null){let i=t?this.originalOperations.get(t):null;for(let o of e)this.originalOperations.set(o,i||o)}updateRelation(e,t){if(e instanceof me)t instanceof Ne?e.targetPosition.isEqual(t.sourcePosition)||t.movedRange.containsPosition(e.targetPosition)?this._setRelation(e,t,"insertAtSource"):e.targetPosition.isEqual(t.deletionPosition)?this._setRelation(e,t,"insertBetween"):e.targetPosition.isAfter(t.sourcePosition)&&this._setRelation(e,t,"moveTargetAfter"):t instanceof me&&(e.targetPosition.isEqual(t.sourcePosition)||e.targetPosition.isBefore(t.sourcePosition)?this._setRelation(e,t,"insertBefore"):this._setRelation(e,t,"insertAfter"));else if(e instanceof ve){if(t instanceof Ne)e.splitPosition.isBefore(t.sourcePosition)&&this._setRelation(e,t,"splitBefore");else if(t instanceof me)if(e.splitPosition.isEqual(t.sourcePosition)||e.splitPosition.isBefore(t.sourcePosition))this._setRelation(e,t,"splitBefore");else{let i=M._createFromPositionAndShift(t.sourcePosition,t.howMany);if(e.splitPosition.hasSameParentAs(t.sourcePosition)&&i.containsPosition(e.splitPosition)){let o=i.end.offset-e.splitPosition.offset,n=e.splitPosition.offset-i.start.offset;this._setRelation(e,t,{howMany:o,offset:n})}}}else if(e instanceof Ne)t instanceof Ne?(e.targetPosition.isEqual(t.sourcePosition)||this._setRelation(e,t,"mergeTargetNotMoved"),e.sourcePosition.isEqual(t.targetPosition)&&this._setRelation(e,t,"mergeSourceNotMoved"),e.sourcePosition.isEqual(t.sourcePosition)&&this._setRelation(e,t,"mergeSameElement")):t instanceof ve?e.sourcePosition.isEqual(t.splitPosition)&&this._setRelation(e,t,"splitAtSource"):t instanceof me&&t.howMany>0&&(e.sourcePosition.isEqual(t.sourcePosition.getShiftedBy(t.howMany))&&this._setRelation(e,t,"mergeSourceAffected"),e.targetPosition.isEqual(t.sourcePosition)&&this._setRelation(e,t,"mergeTargetWasBefore"));else if(e instanceof Ht){let i=e.newRange;if(!i)return;if(t instanceof me){let o=M._createFromPositionAndShift(t.sourcePosition,t.howMany),n=o.containsPosition(i.start)||o.start.isEqual(i.start),r=o.containsPosition(i.end)||o.end.isEqual(i.end);(n||r)&&!o.containsRange(i)&&this._setRelation(e,t,{side:n?"left":"right",path:n?i.start.path.slice():i.end.path.slice()})}else if(t instanceof Ne){let o=i.start.isEqual(t.targetPosition),n=i.start.isEqual(t.deletionPosition),r=i.end.isEqual(t.deletionPosition),a=i.end.isEqual(t.sourcePosition);(o||n||r||a)&&this._setRelation(e,t,{wasInLeftElement:o,wasStartBeforeMergedElement:n,wasEndBeforeMergedElement:r,wasInRightElement:a})}}}getContext(e,t,i){return{aIsStrong:i,aWasUndone:this._wasUndone(e),bWasUndone:this._wasUndone(t),abRelation:this._useRelations?this._getRelation(e,t):null,baRelation:this._useRelations?this._getRelation(t,e):null,forceWeakRemove:this._forceWeakRemove}}_wasUndone(e){let t=this.originalOperations.get(e);return t.wasUndone||this._history.isUndoneOperation(t)}_getRelation(e,t){let i=this.originalOperations.get(t),o=this._history.getUndoneOperation(i);if(!o)return null;let n=this.originalOperations.get(e),r=this._relations.get(n);return r&&r.get(o)||null}_setRelation(e,t,i){let o=this.originalOperations.get(e),n=this.originalOperations.get(t),r=this._relations.get(o);r||(r=new Map,this._relations.set(o,r)),r.set(n,i)}};function Fm(s,e){for(let t of s)t.baseVersion=e++}function Om(s,e){for(let t=0;t<e;t++)s.push(new Be(0))}he(je,je,(s,e,t)=>{if(s.key===e.key&&s.range.start.hasSameParentAs(e.range.start)){let i=s.range.getDifference(e.range).map(n=>new je(n,s.key,s.oldValue,s.newValue,0)),o=s.range.getIntersection(e.range);return o&&t.aIsStrong&&i.push(new je(o,e.key,e.newValue,s.newValue,0)),i.length==0?[new Be(0)]:i}else return[s]});he(je,tt,(s,e)=>{if(s.range.start.hasSameParentAs(e.position)&&s.range.containsPosition(e.position)){let i=s.range._getTransformedByInsertion(e.position,e.howMany,!e.shouldReceiveAttributes).map(o=>new je(o,s.key,s.oldValue,s.newValue,s.baseVersion));if(e.shouldReceiveAttributes){let o=Df(e,s.key,s.oldValue);o&&i.unshift(o)}return i}return s.range=s.range._getTransformedByInsertion(e.position,e.howMany,!1)[0],[s]});function Df(s,e,t){let o=s.nodes.getNode(0).getAttribute(e);if(o==t)return null;let n=new M(s.position,s.position.getShiftedBy(s.howMany));return new je(n,e,o,t,0)}he(je,Ne,(s,e)=>{let t=[];s.range.start.hasSameParentAs(e.deletionPosition)&&(s.range.containsPosition(e.deletionPosition)||s.range.start.isEqual(e.deletionPosition))&&t.push(M._createFromPositionAndShift(e.graveyardPosition,1));let i=s.range._getTransformedByMergeOperation(e);return i.isCollapsed||t.push(i),t.map(o=>new je(o,s.key,s.oldValue,s.newValue,s.baseVersion))});he(je,me,(s,e)=>ny(s.range,e).map(i=>new je(i,s.key,s.oldValue,s.newValue,s.baseVersion)));function ny(s,e){let t=M._createFromPositionAndShift(e.sourcePosition,e.howMany),i=null,o=[];t.containsRange(s,!0)?i=s:s.start.hasSameParentAs(t.start)?(o=s.getDifference(t),i=s.getIntersection(t)):o=[s];let n=[];for(let r of o){r=r._getTransformedByDeletion(e.sourcePosition,e.howMany);let a=e.getMovedRangeStart(),l=r.start.hasSameParentAs(a),c=r._getTransformedByInsertion(a,e.howMany,l);n.push(...c)}return i&&n.push(i._getTransformedByMove(e.sourcePosition,e.targetPosition,e.howMany,!1)[0]),n}he(je,ve,(s,e)=>{if(s.range.end.isEqual(e.insertionPosition))return e.graveyardPosition||s.range.end.offset++,[s];if(s.range.start.hasSameParentAs(e.splitPosition)&&s.range.containsPosition(e.splitPosition)){let t=s.clone();return t.range=new M(e.moveTargetPosition.clone(),s.range.end._getCombined(e.splitPosition,e.moveTargetPosition)),s.range.end=e.splitPosition.clone(),s.range.end.stickiness="toPrevious",[s,t]}return s.range=s.range._getTransformedBySplitOperation(e),[s]});he(tt,je,(s,e)=>{let t=[s];if(s.shouldReceiveAttributes&&s.position.hasSameParentAs(e.range.start)&&e.range.containsPosition(s.position)){let i=Df(s,e.key,e.newValue);i&&t.push(i)}return t});he(tt,tt,(s,e,t)=>s.position.isEqual(e.position)&&t.aIsStrong?[s]:(s.position=s.position._getTransformedByInsertOperation(e),[s]));he(tt,me,(s,e)=>(s.position=s.position._getTransformedByMoveOperation(e),[s]));he(tt,ve,(s,e)=>(s.position=s.position._getTransformedBySplitOperation(e),[s]));he(tt,Ne,(s,e)=>(s.position=s.position._getTransformedByMergeOperation(e),[s]));he(Ht,tt,(s,e)=>(s.oldRange&&(s.oldRange=s.oldRange._getTransformedByInsertOperation(e)[0]),s.newRange&&(s.newRange=s.newRange._getTransformedByInsertOperation(e)[0]),[s]));he(Ht,Ht,(s,e,t)=>{if(s.name==e.name)if(t.aIsStrong)s.oldRange=e.newRange?e.newRange.clone():null;else return[new Be(0)];return[s]});he(Ht,Ne,(s,e)=>(s.oldRange&&(s.oldRange=s.oldRange._getTransformedByMergeOperation(e)),s.newRange&&(s.newRange=s.newRange._getTransformedByMergeOperation(e)),[s]));he(Ht,me,(s,e,t)=>{if(s.oldRange&&(s.oldRange=M._createFromRanges(s.oldRange._getTransformedByMoveOperation(e))),s.newRange){if(t.abRelation){let i=M._createFromRanges(s.newRange._getTransformedByMoveOperation(e));if(t.abRelation.side=="left"&&e.targetPosition.isEqual(s.newRange.start))return s.newRange.end=i.end,s.newRange.start.path=t.abRelation.path,[s];if(t.abRelation.side=="right"&&e.targetPosition.isEqual(s.newRange.end))return s.newRange.start=i.start,s.newRange.end.path=t.abRelation.path,[s]}s.newRange=M._createFromRanges(s.newRange._getTransformedByMoveOperation(e))}return[s]});he(Ht,ve,(s,e,t)=>{if(s.oldRange&&(s.oldRange=s.oldRange._getTransformedBySplitOperation(e)),s.newRange){if(t.abRelation){let i=s.newRange._getTransformedBySplitOperation(e);return s.newRange.start.isEqual(e.splitPosition)&&t.abRelation.wasStartBeforeMergedElement?s.newRange.start=D._createAt(e.insertionPosition):s.newRange.start.isEqual(e.splitPosition)&&!t.abRelation.wasInLeftElement&&(s.newRange.start=D._createAt(e.moveTargetPosition)),s.newRange.end.isEqual(e.splitPosition)&&t.abRelation.wasInRightElement?s.newRange.end=D._createAt(e.moveTargetPosition):s.newRange.end.isEqual(e.splitPosition)&&t.abRelation.wasEndBeforeMergedElement?s.newRange.end=D._createAt(e.insertionPosition):s.newRange.end=i.end,[s]}s.newRange=s.newRange._getTransformedBySplitOperation(e)}return[s]});he(Ne,tt,(s,e)=>(s.sourcePosition.hasSameParentAs(e.position)&&(s.howMany+=e.howMany),s.sourcePosition=s.sourcePosition._getTransformedByInsertOperation(e),s.targetPosition=s.targetPosition._getTransformedByInsertOperation(e),[s]));he(Ne,Ne,(s,e,t)=>{if(s.sourcePosition.isEqual(e.sourcePosition)&&s.targetPosition.isEqual(e.targetPosition))if(t.bWasUndone){let i=e.graveyardPosition.path.slice();return i.push(0),s.sourcePosition=new D(e.graveyardPosition.root,i),s.howMany=0,[s]}else return[new Be(0)];if(s.sourcePosition.isEqual(e.sourcePosition)&&!s.targetPosition.isEqual(e.targetPosition)&&!t.bWasUndone&&t.abRelation!="splitAtSource"){let i=s.targetPosition.root.rootName=="$graveyard",o=e.targetPosition.root.rootName=="$graveyard";if(o&&!i||!(i&&!o)&&t.aIsStrong){let l=e.targetPosition._getTransformedByMergeOperation(e),c=s.targetPosition._getTransformedByMergeOperation(e);return[new me(l,s.howMany,c,0)]}else return[new Be(0)]}return s.sourcePosition.hasSameParentAs(e.targetPosition)&&(s.howMany+=e.howMany),s.sourcePosition=s.sourcePosition._getTransformedByMergeOperation(e),s.targetPosition=s.targetPosition._getTransformedByMergeOperation(e),(!s.graveyardPosition.isEqual(e.graveyardPosition)||!t.aIsStrong)&&(s.graveyardPosition=s.graveyardPosition._getTransformedByMergeOperation(e)),[s]});he(Ne,me,(s,e,t)=>{let i=M._createFromPositionAndShift(e.sourcePosition,e.howMany);return e.type=="remove"&&!t.bWasUndone&&!t.forceWeakRemove&&s.deletionPosition.hasSameParentAs(e.sourcePosition)&&i.containsPosition(s.sourcePosition)?[new Be(0)]:(e.sourcePosition.getShiftedBy(e.howMany).isEqual(s.sourcePosition)?s.sourcePosition.stickiness="toNone":e.targetPosition.isEqual(s.sourcePosition)&&t.abRelation=="mergeSourceAffected"?s.sourcePosition.stickiness="toNext":e.sourcePosition.isEqual(s.targetPosition)?(s.targetPosition.stickiness="toNone",s.howMany-=e.howMany):e.targetPosition.isEqual(s.targetPosition)&&t.abRelation=="mergeTargetWasBefore"?(s.targetPosition.stickiness="toPrevious",s.howMany+=e.howMany):(s.sourcePosition.hasSameParentAs(e.targetPosition)&&(s.howMany+=e.howMany),s.sourcePosition.hasSameParentAs(e.sourcePosition)&&(s.howMany-=e.howMany)),s.sourcePosition=s.sourcePosition._getTransformedByMoveOperation(e),s.targetPosition=s.targetPosition._getTransformedByMoveOperation(e),s.sourcePosition.stickiness="toPrevious",s.targetPosition.stickiness="toNext",s.graveyardPosition.isEqual(e.targetPosition)||(s.graveyardPosition=s.graveyardPosition._getTransformedByMoveOperation(e)),[s])});he(Ne,ve,(s,e,t)=>{if(e.graveyardPosition&&(s.graveyardPosition=s.graveyardPosition._getTransformedByDeletion(e.graveyardPosition,1),s.deletionPosition.isEqual(e.graveyardPosition)&&(s.howMany=e.howMany)),s.targetPosition.isEqual(e.splitPosition)){let i=e.howMany!=0,o=e.graveyardPosition&&s.deletionPosition.isEqual(e.graveyardPosition);if(i||o||t.abRelation=="mergeTargetNotMoved")return s.sourcePosition=s.sourcePosition._getTransformedBySplitOperation(e),[s]}if(s.sourcePosition.isEqual(e.splitPosition)){if(t.abRelation=="mergeSourceNotMoved")return s.howMany=0,s.targetPosition=s.targetPosition._getTransformedBySplitOperation(e),[s];if(t.abRelation=="mergeSameElement"||s.sourcePosition.offset>0)return s.sourcePosition=e.moveTargetPosition.clone(),s.targetPosition=s.targetPosition._getTransformedBySplitOperation(e),[s]}return s.sourcePosition.hasSameParentAs(e.splitPosition)&&(s.howMany=e.splitPosition.offset),s.sourcePosition=s.sourcePosition._getTransformedBySplitOperation(e),s.targetPosition=s.targetPosition._getTransformedBySplitOperation(e),[s]});he(me,tt,(s,e)=>{let i=M._createFromPositionAndShift(s.sourcePosition,s.howMany)._getTransformedByInsertOperation(e,!1)[0];return s.sourcePosition=i.start,s.howMany=i.end.offset-i.start.offset,s.targetPosition.isEqual(e.position)||(s.targetPosition=s.targetPosition._getTransformedByInsertOperation(e)),[s]});he(me,me,(s,e,t)=>{let i=M._createFromPositionAndShift(s.sourcePosition,s.howMany),o=M._createFromPositionAndShift(e.sourcePosition,e.howMany),n=t.aIsStrong,r=!t.aIsStrong;t.abRelation=="insertBefore"||t.baRelation=="insertAfter"?r=!0:(t.abRelation=="insertAfter"||t.baRelation=="insertBefore")&&(r=!1);let a;if(s.targetPosition.isEqual(e.targetPosition)&&r?a=s.targetPosition._getTransformedByDeletion(e.sourcePosition,e.howMany):a=s.targetPosition._getTransformedByMove(e.sourcePosition,e.targetPosition,e.howMany),Hm(s,e)&&Hm(e,s))return[e.getReversed()];if(i.containsPosition(e.targetPosition)&&i.containsRange(o,!0))return i.start=i.start._getTransformedByMove(e.sourcePosition,e.targetPosition,e.howMany),i.end=i.end._getTransformedByMove(e.sourcePosition,e.targetPosition,e.howMany),cn([i],a);if(o.containsPosition(s.targetPosition)&&o.containsRange(i,!0))return i.start=i.start._getCombined(e.sourcePosition,e.getMovedRangeStart()),i.end=i.end._getCombined(e.sourcePosition,e.getMovedRangeStart()),cn([i],a);let d=Je(s.sourcePosition.getParentPath(),e.sourcePosition.getParentPath());if(d=="prefix"||d=="extension")return i.start=i.start._getTransformedByMove(e.sourcePosition,e.targetPosition,e.howMany),i.end=i.end._getTransformedByMove(e.sourcePosition,e.targetPosition,e.howMany),cn([i],a);s.type=="remove"&&e.type!="remove"&&!t.aWasUndone&&!t.forceWeakRemove?n=!0:s.type!="remove"&&e.type=="remove"&&!t.bWasUndone&&!t.forceWeakRemove&&(n=!1);let h=[],g=i.getDifference(o);for(let p of g){p.start=p.start._getTransformedByDeletion(e.sourcePosition,e.howMany),p.end=p.end._getTransformedByDeletion(e.sourcePosition,e.howMany);let b=Je(p.start.getParentPath(),e.getMovedRangeStart().getParentPath())=="same",k=p._getTransformedByInsertion(e.getMovedRangeStart(),e.howMany,b);h.push(...k)}let m=i.getIntersection(o);return m!==null&&n&&(m.start=m.start._getCombined(e.sourcePosition,e.getMovedRangeStart()),m.end=m.end._getCombined(e.sourcePosition,e.getMovedRangeStart()),h.length===0?h.push(m):h.length==1?o.start.isBefore(i.start)||o.start.isEqual(i.start)?h.unshift(m):h.push(m):h.splice(1,0,m)),h.length===0?[new Be(s.baseVersion)]:cn(h,a)});he(me,ve,(s,e,t)=>{let i=s.targetPosition.clone();(!s.targetPosition.isEqual(e.insertionPosition)||!e.graveyardPosition||t.abRelation=="moveTargetAfter")&&(i=s.targetPosition._getTransformedBySplitOperation(e));let o=M._createFromPositionAndShift(s.sourcePosition,s.howMany);if(o.end.isEqual(e.insertionPosition))return e.graveyardPosition||s.howMany++,s.targetPosition=i,[s];if(o.start.hasSameParentAs(e.splitPosition)&&o.containsPosition(e.splitPosition)){let a=new M(e.splitPosition,o.end);a=a._getTransformedBySplitOperation(e);let l=[new M(o.start,e.splitPosition),a];return cn(l,i)}s.targetPosition.isEqual(e.splitPosition)&&t.abRelation=="insertAtSource"&&(i=e.moveTargetPosition),s.targetPosition.isEqual(e.insertionPosition)&&t.abRelation=="insertBetween"&&(i=s.targetPosition);let r=[o._getTransformedBySplitOperation(e)];if(e.graveyardPosition){let a=o.start.isEqual(e.graveyardPosition)||o.containsPosition(e.graveyardPosition);s.howMany>1&&a&&!t.aWasUndone&&r.push(M._createFromPositionAndShift(e.insertionPosition,1))}return cn(r,i)});he(me,Ne,(s,e,t)=>{let i=M._createFromPositionAndShift(s.sourcePosition,s.howMany);if(e.deletionPosition.hasSameParentAs(s.sourcePosition)&&i.containsPosition(e.sourcePosition)){if(s.type=="remove"&&!t.forceWeakRemove){if(!t.aWasUndone){let r=[],a=e.graveyardPosition.clone(),l=e.targetPosition._getTransformedByMergeOperation(e);s.howMany>1&&(r.push(new me(s.sourcePosition,s.howMany-1,s.targetPosition,0)),a=a._getTransformedByMove(s.sourcePosition,s.targetPosition,s.howMany-1),l=l._getTransformedByMove(s.sourcePosition,s.targetPosition,s.howMany-1));let c=e.deletionPosition._getCombined(s.sourcePosition,s.targetPosition),d=new me(a,1,c,0),h=d.getMovedRangeStart().path.slice();h.push(0);let g=new D(d.targetPosition.root,h);l=l._getTransformedByMove(a,c,1);let m=new me(l,e.howMany,g,0);return r.push(d),r.push(m),r}}else if(s.howMany==1)return t.bWasUndone?(s.sourcePosition=e.graveyardPosition.clone(),s.targetPosition=s.targetPosition._getTransformedByMergeOperation(e),[s]):[new Be(0)]}let n=M._createFromPositionAndShift(s.sourcePosition,s.howMany)._getTransformedByMergeOperation(e);return s.sourcePosition=n.start,s.howMany=n.end.offset-n.start.offset,s.targetPosition=s.targetPosition._getTransformedByMergeOperation(e),[s]});he(Wt,tt,(s,e)=>(s.position=s.position._getTransformedByInsertOperation(e),[s]));he(Wt,Ne,(s,e)=>s.position.isEqual(e.deletionPosition)?(s.position=e.graveyardPosition.clone(),s.position.stickiness="toNext",[s]):(s.position=s.position._getTransformedByMergeOperation(e),[s]));he(Wt,me,(s,e)=>(s.position=s.position._getTransformedByMoveOperation(e),[s]));he(Wt,Wt,(s,e,t)=>{if(s.position.isEqual(e.position))if(t.aIsStrong)s.oldName=e.newName;else return[new Be(0)];return[s]});he(Wt,ve,(s,e)=>{let t=s.position.path,i=e.splitPosition.getParentPath();if(Je(t,i)=="same"&&!e.graveyardPosition){let o=new Wt(s.position.getShiftedBy(1),s.oldName,s.newName,0);return[s,o]}return s.position=s.position._getTransformedBySplitOperation(e),[s]});he(po,po,(s,e,t)=>{if(s.root===e.root&&s.key===e.key){if(!t.aIsStrong||s.newValue===e.newValue)return[new Be(0)];s.oldValue=e.newValue}return[s]});he(Hi,Hi,(s,e)=>s.rootName===e.rootName&&s.isAdd===e.isAdd?[new Be(0)]:[s]);he(ve,tt,(s,e)=>(s.splitPosition.hasSameParentAs(e.position)&&s.splitPosition.offset<e.position.offset&&(s.howMany+=e.howMany),s.splitPosition=s.splitPosition._getTransformedByInsertOperation(e),s.insertionPosition=s.insertionPosition._getTransformedByInsertOperation(e),[s]));he(ve,Ne,(s,e,t)=>{if(!s.graveyardPosition&&!t.bWasUndone&&s.splitPosition.hasSameParentAs(e.sourcePosition)){let i=e.graveyardPosition.path.slice();i.push(0);let o=new D(e.graveyardPosition.root,i),n=ve.getInsertionPosition(new D(e.graveyardPosition.root,i)),r=new ve(o,0,n,null,0);return s.splitPosition=s.splitPosition._getTransformedByMergeOperation(e),s.insertionPosition=ve.getInsertionPosition(s.splitPosition),s.graveyardPosition=r.insertionPosition.clone(),s.graveyardPosition.stickiness="toNext",[r,s]}return s.splitPosition.hasSameParentAs(e.deletionPosition)&&!s.splitPosition.isAfter(e.deletionPosition)&&s.howMany--,s.splitPosition.hasSameParentAs(e.targetPosition)&&(s.howMany+=e.howMany),s.splitPosition=s.splitPosition._getTransformedByMergeOperation(e),s.insertionPosition=ve.getInsertionPosition(s.splitPosition),s.graveyardPosition&&(s.graveyardPosition=s.graveyardPosition._getTransformedByMergeOperation(e)),[s]});he(ve,me,(s,e,t)=>{let i=M._createFromPositionAndShift(e.sourcePosition,e.howMany);if(s.graveyardPosition){let n=i.start.isEqual(s.graveyardPosition)||i.containsPosition(s.graveyardPosition);if(!t.bWasUndone&&n){let r=s.splitPosition._getTransformedByMoveOperation(e),a=s.graveyardPosition._getTransformedByMoveOperation(e),l=a.path.slice();l.push(0);let c=new D(a.root,l);return[new me(r,s.howMany,c,0)]}s.graveyardPosition=s.graveyardPosition._getTransformedByMoveOperation(e)}let o=s.splitPosition.isEqual(e.targetPosition);if(o&&(t.baRelation=="insertAtSource"||t.abRelation=="splitBefore"))return s.howMany+=e.howMany,s.splitPosition=s.splitPosition._getTransformedByDeletion(e.sourcePosition,e.howMany),s.insertionPosition=ve.getInsertionPosition(s.splitPosition),[s];if(o&&t.abRelation&&t.abRelation.howMany){let{howMany:n,offset:r}=t.abRelation;return s.howMany+=n,s.splitPosition=s.splitPosition.getShiftedBy(r),[s]}if(s.splitPosition.hasSameParentAs(e.sourcePosition)&&i.containsPosition(s.splitPosition)){let n=e.howMany-(s.splitPosition.offset-e.sourcePosition.offset);return s.howMany-=n,s.splitPosition.hasSameParentAs(e.targetPosition)&&s.splitPosition.offset<e.targetPosition.offset&&(s.howMany+=e.howMany),s.splitPosition=e.sourcePosition.clone(),s.insertionPosition=ve.getInsertionPosition(s.splitPosition),[s]}return e.sourcePosition.isEqual(e.targetPosition)||(s.splitPosition.hasSameParentAs(e.sourcePosition)&&s.splitPosition.offset<=e.sourcePosition.offset&&(s.howMany-=e.howMany),s.splitPosition.hasSameParentAs(e.targetPosition)&&s.splitPosition.offset<e.targetPosition.offset&&(s.howMany+=e.howMany)),s.splitPosition.stickiness="toNone",s.splitPosition=s.splitPosition._getTransformedByMoveOperation(e),s.splitPosition.stickiness="toNext",s.graveyardPosition?s.insertionPosition=s.insertionPosition._getTransformedByMoveOperation(e):s.insertionPosition=ve.getInsertionPosition(s.splitPosition),[s]});he(ve,ve,(s,e,t)=>{if(s.splitPosition.isEqual(e.splitPosition)){if(!s.graveyardPosition&&!e.graveyardPosition)return[new Be(0)];if(s.graveyardPosition&&e.graveyardPosition&&s.graveyardPosition.isEqual(e.graveyardPosition))return[new Be(0)];if(t.abRelation=="splitBefore")return s.howMany=0,s.graveyardPosition=s.graveyardPosition._getTransformedBySplitOperation(e),[s]}if(s.graveyardPosition&&e.graveyardPosition&&s.graveyardPosition.isEqual(e.graveyardPosition)){let i=s.splitPosition.root.rootName=="$graveyard",o=e.splitPosition.root.rootName=="$graveyard";if(o&&!i||!(i&&!o)&&t.aIsStrong){let l=[];return e.howMany&&l.push(new me(e.moveTargetPosition,e.howMany,e.splitPosition,0)),s.howMany&&l.push(new me(s.splitPosition,s.howMany,s.moveTargetPosition,0)),l}else return[new Be(0)]}if(s.graveyardPosition&&(s.graveyardPosition=s.graveyardPosition._getTransformedBySplitOperation(e)),s.splitPosition.isEqual(e.insertionPosition)&&t.abRelation=="splitBefore")return s.howMany++,[s];if(e.splitPosition.isEqual(s.insertionPosition)&&t.baRelation=="splitBefore"){let i=e.insertionPosition.path.slice();i.push(0);let o=new D(e.insertionPosition.root,i),n=new me(s.insertionPosition,1,o,0);return[s,n]}return s.splitPosition.hasSameParentAs(e.splitPosition)&&s.splitPosition.offset<e.splitPosition.offset&&(s.howMany-=e.howMany),s.splitPosition=s.splitPosition._getTransformedBySplitOperation(e),s.insertionPosition=ve.getInsertionPosition(s.splitPosition),[s]});function Hm(s,e){return s.targetPosition._getTransformedByDeletion(e.sourcePosition,e.howMany)===null}function cn(s,e){let t=[];for(let i=0;i<s.length;i++){let o=s[i],n=new me(o.start,o.end.offset-o.start.offset,e,0);t.push(n);for(let r=i+1;r<s.length;r++)s[r]=s[r]._getTransformedByMove(n.sourcePosition,n.targetPosition,n.howMany)[0];e=e._getTransformedByMove(n.sourcePosition,n.targetPosition,n.howMany)}return t}var $e=class extends ue(D){constructor(e,t,i="toNone"){if(super(e,t,i),!this.root.is("rootElement"))throw new E("model-liveposition-root-not-rootelement",e);sy.call(this)}detach(){this.stopListening()}toPosition(){return new D(this.root,this.path.slice(),this.stickiness)}static fromPosition(e,t){return new this(e.root,e.path.slice(),t||e.stickiness)}};$e.prototype.is=function(s){return s==="livePosition"||s==="model:livePosition"||s=="position"||s==="model:position"};function sy(){this.listenTo(this.root.document.model,"applyOperation",(s,e)=>{let t=e[0];t.isDocumentOperation&&ry.call(this,t)},{priority:"low"})}function ry(s){let e=this.getTransformedByOperation(s);if(!this.isEqual(e)){let t=this.toPosition();this.path=e.path,this.root=e.root,this.fire("change",t)}}var zi=class{operations;isUndoable;isLocal;isUndo;isTyping;constructor(e={}){typeof e=="string"&&(e=e==="transparent"?{isUndoable:!1}:{},de("batch-constructor-deprecated-string-type"));let{isUndoable:t=!0,isLocal:i=!0,isUndo:o=!1,isTyping:n=!1}=e;this.operations=[],this.isUndoable=t,this.isLocal=i,this.isUndo=o,this.isTyping=n}get type(){return de("batch-type-deprecated"),"default"}get baseVersion(){for(let e of this.operations)if(e.baseVersion!==null)return e.baseVersion;return null}addOperation(e){return e.batch=this,this.operations.push(e),e}},vc=class s{static _statesPriority=[void 0,"refresh","rename","move"];_markerCollection;_changesInElement=new Map;_elementsSnapshots=new Map;_elementChildrenSnapshots=new Map;_elementState=new Map;_changedMarkers=new Map;_changedRoots=new Map;_changeCount=0;_cachedChanges=null;_cachedChangesWithGraveyard=null;_refreshedItems=new Set;constructor(e){this._markerCollection=e}get isEmpty(){return this._changesInElement.size==0&&this._changedMarkers.size==0&&this._changedRoots.size==0}bufferOperation(e){let t=e;switch(t.type){case"insert":{if(this._isInInsertedElement(t.position.parent))return;this._markInsert(t.position.parent,t.position.offset,t.nodes.maxOffset);break}case"addAttribute":case"removeAttribute":case"changeAttribute":{for(let i of t.range.getItems({shallow:!0}))this._isInInsertedElement(i.parent)||this._markAttribute(i);break}case"remove":case"move":case"reinsert":{if(t.sourcePosition.isEqual(t.targetPosition)||t.sourcePosition.getShiftedBy(t.howMany).isEqual(t.targetPosition))return;let i=this._isInInsertedElement(t.sourcePosition.parent),o=this._isInInsertedElement(t.targetPosition.parent);i||this._markRemove(t.sourcePosition.parent,t.sourcePosition.offset,t.howMany),o||this._markInsert(t.targetPosition.parent,t.getMovedRangeStart().offset,t.howMany);let n=M._createFromPositionAndShift(t.sourcePosition,t.howMany);for(let r of n.getItems({shallow:!0}))this._setElementState(r,"move");break}case"rename":{if(this._isInInsertedElement(t.position.parent))return;this._markRemove(t.position.parent,t.position.offset,1),this._markInsert(t.position.parent,t.position.offset,1);let i=M._createFromPositionAndShift(t.position,1);for(let o of this._markerCollection.getMarkersIntersectingRange(i)){let n=o.getData();this.bufferMarkerChange(o.name,n,n)}this._setElementState(t.position.nodeAfter,"rename");break}case"split":{let i=t.splitPosition.parent;if(!this._isInInsertedElement(i)){this._markRemove(i,t.splitPosition.offset,t.howMany);let o=M._createFromPositionAndShift(t.splitPosition,t.howMany);for(let n of o.getItems({shallow:!0}))this._setElementState(n,"move")}this._isInInsertedElement(t.insertionPosition.parent)||this._markInsert(t.insertionPosition.parent,t.insertionPosition.offset,1),t.graveyardPosition&&(this._markRemove(t.graveyardPosition.parent,t.graveyardPosition.offset,1),this._setElementState(t.graveyardPosition.nodeAfter,"move"));break}case"merge":{let i=t.sourcePosition.parent;this._isInInsertedElement(i.parent)||this._markRemove(i.parent,i.startOffset,1);let o=t.graveyardPosition.parent;this._markInsert(o,t.graveyardPosition.offset,1),this._setElementState(i,"move");let n=t.targetPosition.parent;if(!this._isInInsertedElement(n)){this._markInsert(n,t.targetPosition.offset,i.maxOffset);let r=M._createFromPositionAndShift(t.sourcePosition,t.howMany);for(let a of r.getItems({shallow:!0}))this._setElementState(a,"move")}break}case"detachRoot":case"addRoot":{let i=t.affectedSelectable;if(!i._isLoaded||i.isAttached()==t.isAdd)return;this._bufferRootStateChange(t.rootName,t.isAdd);break}case"addRootAttribute":case"removeRootAttribute":case"changeRootAttribute":{if(!t.root._isLoaded)return;let i=t.root.rootName;this._bufferRootAttributeChange(i,t.key,t.oldValue,t.newValue);break}}this._cachedChanges=null}bufferMarkerChange(e,t,i){t.range&&t.range.root.is("rootElement")&&!t.range.root._isLoaded&&(t.range=null),i.range&&i.range.root.is("rootElement")&&!i.range.root._isLoaded&&(i.range=null);let o=this._changedMarkers.get(e);o?o.newMarkerData=i:(o={newMarkerData:i,oldMarkerData:t},this._changedMarkers.set(e,o)),o.oldMarkerData.range==null&&i.range==null&&this._changedMarkers.delete(e)}getMarkersToRemove(){let e=[];for(let[t,i]of this._changedMarkers)i.oldMarkerData.range!=null&&e.push({name:t,range:i.oldMarkerData.range});return e}getMarkersToAdd(){let e=[];for(let[t,i]of this._changedMarkers)i.newMarkerData.range!=null&&e.push({name:t,range:i.newMarkerData.range});return e}getChangedMarkers(){return Array.from(this._changedMarkers).map(([e,t])=>({name:e,data:{oldRange:t.oldMarkerData.range,newRange:t.newMarkerData.range}}))}hasDataChanges(){if(this.getChanges().length||this._changedRoots.size>0)return!0;for(let{newMarkerData:e,oldMarkerData:t}of this._changedMarkers.values()){if(e.affectsData!==t.affectsData)return!0;if(e.affectsData){let i=e.range&&!t.range,o=!e.range&&t.range,n=e.range&&t.range&&!e.range.isEqual(t.range);if(i||o||n)return!0}}return!1}getChanges(e={}){if(this._cachedChanges)return e.includeChangesInGraveyard?this._cachedChangesWithGraveyard.slice():this._cachedChanges.slice();let t=[];for(let i of this._changesInElement.keys()){let o=this._changesInElement.get(i).sort((d,h)=>d.offset===h.offset?d.type!=h.type?d.type=="remove"?-1:1:0:d.offset<h.offset?-1:1),n=this._elementChildrenSnapshots.get(i),r=jm(i.getChildren()),a=ay(n.length,o),l=0,c=0;for(let d of a)if(d==="i"){let h=this._getDiffActionForNode(r[l].node,"insert"),g=this._elementsSnapshots.get(r[l].node),m=this._getInsertDiff(i,l,h,r[l],g);t.push(m),l++}else if(d==="r"){let h=this._getDiffActionForNode(n[c].node,"remove"),g=this._getRemoveDiff(i,l,h,n[c]);t.push(g),c++}else if(d==="a"){let h=n[c].attributes,g=r[l].attributes,m;if(r[l].name=="$text")m=new M(D._createAt(i,l),D._createAt(i,l+1));else{let b=i.offsetToIndex(l);m=new M(D._createAt(i,l),D._createAt(i.getChild(b),0))}let p=this._getAttributesDiff(m,h,g);t.push(...p),l++,c++}else l++,c++}t.sort((i,o)=>i.position.root!=o.position.root?i.position.root.rootName<o.position.root.rootName?-1:1:i.position.isEqual(o.position)?i.changeCount-o.changeCount:i.position.isBefore(o.position)?-1:1);for(let i=1,o=0;i<t.length;i++){let n=t[o],r=t[i],a=n.type=="remove"&&r.type=="remove"&&n.name=="$text"&&r.name=="$text"&&n.position.isEqual(r.position),l=n.type=="insert"&&r.type=="insert"&&n.name=="$text"&&r.name=="$text"&&n.position.parent==r.position.parent&&n.position.offset+n.length==r.position.offset,c=n.type=="attribute"&&r.type=="attribute"&&n.position.parent==r.position.parent&&n.range.isFlat&&r.range.isFlat&&n.position.offset+n.length==r.position.offset&&n.attributeKey==r.attributeKey&&n.attributeOldValue==r.attributeOldValue&&n.attributeNewValue==r.attributeNewValue;a||l||c?(n.length++,c&&(n.range.end=n.range.end.getShiftedBy(1)),t[i]=null):o=i}t=t.filter(i=>i);for(let i of t)delete i.changeCount,i.type=="attribute"&&(delete i.position,delete i.length);return this._changeCount=0,this._cachedChangesWithGraveyard=t,this._cachedChanges=t.filter(ly),e.includeChangesInGraveyard?this._cachedChangesWithGraveyard.slice():this._cachedChanges.slice()}getChangedRoots(){return Array.from(this._changedRoots.values()).map(e=>{let t=B({},e);return t.state!==void 0&&delete t.attributes,t})}getRefreshedItems(){return new Set(this._refreshedItems)}reset(){this._changesInElement.clear(),this._elementChildrenSnapshots.clear(),this._elementsSnapshots.clear(),this._elementState.clear(),this._changedMarkers.clear(),this._changedRoots.clear(),this._refreshedItems.clear(),this._cachedChanges=null}_refreshItem(e){if(this._isInInsertedElement(e.parent))return;this._markRemove(e.parent,e.startOffset,e.offsetSize),this._markInsert(e.parent,e.startOffset,e.offsetSize),this._refreshedItems.add(e),this._setElementState(e,"refresh");let t=M._createOn(e);for(let i of this._markerCollection.getMarkersIntersectingRange(t)){let o=i.getData();this.bufferMarkerChange(i.name,o,o)}this._cachedChanges=null}_bufferRootLoad(e){if(e.isAttached()){this._bufferRootStateChange(e.rootName,!0),this._markInsert(e,0,e.maxOffset);for(let t of e.getAttributeKeys())this._bufferRootAttributeChange(e.rootName,t,null,e.getAttribute(t));for(let t of this._markerCollection)if(t.getRange().root==e){let i=t.getData();this.bufferMarkerChange(t.name,Ce(B({},i),{range:null}),i)}}}_bufferRootStateChange(e,t){if(!this._changedRoots.has(e)){this._changedRoots.set(e,{name:e,state:t?"attached":"detached"});return}let i=this._changedRoots.get(e);i.state!==void 0?(delete i.state,i.attributes===void 0&&this._changedRoots.delete(e)):i.state=t?"attached":"detached"}_bufferRootAttributeChange(e,t,i,o){let n=this._changedRoots.get(e)||{name:e},r=n.attributes||{};if(r[t]){let a=r[t];o===a.oldValue?delete r[t]:a.newValue=o}else r[t]={oldValue:i,newValue:o};Object.entries(r).length===0?(delete n.attributes,n.state===void 0&&this._changedRoots.delete(e)):(n.attributes=r,this._changedRoots.set(e,n))}_markInsert(e,t,i){if(e.root.is("rootElement")&&!e.root._isLoaded)return;let o={type:"insert",offset:t,howMany:i,count:this._changeCount++};this._markChange(e,o)}_markRemove(e,t,i){if(e.root.is("rootElement")&&!e.root._isLoaded)return;let o={type:"remove",offset:t,howMany:i,count:this._changeCount++};this._markChange(e,o),this._removeAllNestedChanges(e,t,i)}_markAttribute(e){if(e.root.is("rootElement")&&!e.root._isLoaded)return;let t={type:"attribute",offset:e.startOffset,howMany:e.offsetSize,count:this._changeCount++};this._markChange(e.parent,t)}_markChange(e,t){this._makeSnapshots(e);let i=this._getChangesForElement(e);this._handleChange(t,i),i.push(t);for(let o=0;o<i.length;o++)i[o].howMany<1&&(i.splice(o,1),o--)}_setElementState(e,t){if(!e.is("element"))return;let i=s._statesPriority.indexOf(this._elementState.get(e));s._statesPriority.indexOf(t)>i&&this._elementState.set(e,t)}_getDiffActionForNode(e,t){if(!e.is("element")||!this._elementsSnapshots.has(e))return t;let i=this._elementState.get(e);return!i||i=="move"?t:i}_getChangesForElement(e){let t;return this._changesInElement.has(e)?t=this._changesInElement.get(e):(t=[],this._changesInElement.set(e,t)),t}_makeSnapshots(e){if(this._elementChildrenSnapshots.has(e))return;let t=jm(e.getChildren());this._elementChildrenSnapshots.set(e,t);for(let i of t)this._elementsSnapshots.set(i.node,i)}_handleChange(e,t){e.nodesToHandle=e.howMany;for(let i of t){let o=e.offset+e.howMany,n=i.offset+i.howMany;if(e.type=="insert"&&(i.type=="insert"&&(e.offset<=i.offset?i.offset+=e.howMany:e.offset<n&&(i.howMany+=e.nodesToHandle,e.nodesToHandle=0)),i.type=="remove"&&e.offset<i.offset&&(i.offset+=e.howMany),i.type=="attribute")){if(e.offset<=i.offset)i.offset+=e.howMany;else if(e.offset<n){let r=i.howMany;i.howMany=e.offset-i.offset,t.unshift({type:"attribute",offset:o,howMany:r-i.howMany,count:this._changeCount++})}}if(e.type=="remove"){if(i.type=="insert"){if(o<=i.offset)i.offset-=e.howMany;else if(o<=n)if(e.offset<i.offset){let r=o-i.offset;i.offset=e.offset,i.howMany-=r,e.nodesToHandle-=r}else i.howMany-=e.nodesToHandle,e.nodesToHandle=0;else if(e.offset<=i.offset)e.nodesToHandle-=i.howMany,i.howMany=0;else if(e.offset<n){let r=n-e.offset;i.howMany-=r,e.nodesToHandle-=r}}if(i.type=="remove"&&(o<=i.offset?i.offset-=e.howMany:e.offset<i.offset&&(e.nodesToHandle+=i.howMany,i.howMany=0)),i.type=="attribute"){if(o<=i.offset)i.offset-=e.howMany;else if(e.offset<i.offset){let r=o-i.offset;i.offset=e.offset,i.howMany-=r}else if(e.offset<n)if(o<=n){let r=i.howMany;i.howMany=e.offset-i.offset;let a=r-i.howMany-e.nodesToHandle;t.unshift({type:"attribute",offset:e.offset,howMany:a,count:this._changeCount++})}else i.howMany-=n-e.offset}}if(e.type=="attribute"){if(i.type=="insert")if(e.offset<i.offset&&o>i.offset){if(o>n){let r={type:"attribute",offset:n,howMany:o-n,count:this._changeCount++};this._handleChange(r,t),t.push(r)}e.nodesToHandle=i.offset-e.offset,e.howMany=e.nodesToHandle}else e.offset>=i.offset&&e.offset<n&&(o>n?(e.nodesToHandle=o-n,e.offset=n):e.nodesToHandle=0);if(i.type=="remove"&&e.offset<i.offset&&o>i.offset){let r={type:"attribute",offset:i.offset,howMany:o-i.offset,count:this._changeCount++};this._handleChange(r,t),t.push(r),e.nodesToHandle=i.offset-e.offset,e.howMany=e.nodesToHandle}i.type=="attribute"&&(e.offset>=i.offset&&o<=n?(e.nodesToHandle=0,e.howMany=0,e.offset=0):e.offset<=i.offset&&o>=n&&(i.howMany=0))}}e.howMany=e.nodesToHandle,delete e.nodesToHandle}_getInsertDiff(e,t,i,o,n){let r={type:"insert",position:D._createAt(e,t),name:o.name,attributes:new Map(o.attributes),length:1,changeCount:this._changeCount++,action:i};return i!="insert"&&n&&(r.before={name:n.name,attributes:new Map(n.attributes)}),r}_getRemoveDiff(e,t,i,o){return{type:"remove",action:i,position:D._createAt(e,t),name:o.name,attributes:new Map(o.attributes),length:1,changeCount:this._changeCount++}}_getAttributesDiff(e,t,i){let o=[];i=new Map(i);for(let[n,r]of t){let a=i.has(n)?i.get(n):null;a!==r&&o.push({type:"attribute",position:e.start,range:e.clone(),length:1,attributeKey:n,attributeOldValue:r,attributeNewValue:a,changeCount:this._changeCount++}),i.delete(n)}for(let[n,r]of i)o.push({type:"attribute",position:e.start,range:e.clone(),length:1,attributeKey:n,attributeOldValue:null,attributeNewValue:r,changeCount:this._changeCount++});return o}_isInInsertedElement(e){let t=e.parent;if(!t)return!1;let i=this._changesInElement.get(t),o=e.startOffset;if(i){for(let n of i)if(n.type=="insert"&&o>=n.offset&&o<n.offset+n.howMany)return!0}return this._isInInsertedElement(t)}_removeAllNestedChanges(e,t,i){let o=new M(D._createAt(e,t),D._createAt(e,t+i));for(let n of o.getItems({shallow:!0}))n.is("element")&&(this._changesInElement.delete(n),this._removeAllNestedChanges(n,0,n.maxOffset))}};function Wm(s){return{node:s,name:s.is("$text")?"$text":s.name,attributes:new Map(s.getAttributes())}}function jm(s){let e=[];for(let t of s)if(t.is("$text"))for(let i=0;i<t.data.length;++i)e.push(Wm(t));else e.push(Wm(t));return e}function ay(s,e){let t=[],i=0,o=0;for(let n of e){if(n.offset>i){for(let r=0;r<n.offset-i;r++)t.push("e");o+=n.offset-i}if(n.type=="insert"){for(let r=0;r<n.howMany;r++)t.push("i");i=n.offset+n.howMany}else if(n.type=="remove"){for(let r=0;r<n.howMany;r++)t.push("r");i=n.offset,o+=n.howMany}else t.push(..."a".repeat(n.howMany).split("")),i=n.offset+n.howMany,o+=n.howMany}if(o<s)for(let n=0;n<s-o-i;n++)t.push("e");return t}function ly(s){let e="position"in s&&s.position.root.rootName=="$graveyard",t="range"in s&&s.range.root.rootName=="$graveyard";return!e&&!t}var xc=class{_operations=[];_undoPairs=new Map;_undoneOperations=new Set;_baseVersionToOperationIndex=new Map;_version=0;_gaps=new Map;get version(){return this._version}set version(e){this._operations.length&&e>this._version+1&&this._gaps.set(this._version,e),this._version=e}get lastOperation(){return this._operations[this._operations.length-1]}addOperation(e){if(e.baseVersion!==this.version)throw new E("model-document-history-addoperation-incorrect-version",this,{operation:e,historyVersion:this.version});this._operations.push(e),this._version++,this._baseVersionToOperationIndex.set(e.baseVersion,this._operations.length-1)}getOperations(e,t=this.version){if(!this._operations.length)return[];let i=this._operations[0];e===void 0&&(e=i.baseVersion);let o=t-1;for(let[a,l]of this._gaps)e>a&&e<l&&(e=l),o>a&&o<l&&(o=a-1);if(o<i.baseVersion||e>this.lastOperation.baseVersion)return[];let n=this._baseVersionToOperationIndex.get(e);n===void 0&&(n=0);let r=this._baseVersionToOperationIndex.get(o);return r===void 0&&(r=this._operations.length-1),this._operations.slice(n,r+1)}getOperation(e){let t=this._baseVersionToOperationIndex.get(e);if(t!==void 0)return this._operations[t]}setOperationAsUndone(e,t){this._undoPairs.set(t,e),this._undoneOperations.add(e)}isUndoingOperation(e){return this._undoPairs.has(e)}isUndoneOperation(e){return this._undoneOperations.has(e)}getUndoneOperation(e){return this._undoPairs.get(e)}reset(){this._version=0,this._undoPairs=new Map,this._operations=[],this._undoneOperations=new Set,this._gaps=new Map,this._baseVersionToOperationIndex=new Map}},bo=class extends ke{rootName;_document;_isAttached=!0;_isLoaded=!0;constructor(e,t,i="main"){super(t),this._document=e,this.rootName=i}get document(){return this._document}isAttached(){return this._isAttached}toJSON(){return this.rootName}};bo.prototype.is=function(s,e){return e?e===this.name&&(s==="rootElement"||s==="model:rootElement"||s==="element"||s==="model:element"):s==="rootElement"||s==="model:rootElement"||s==="element"||s==="model:element"||s==="node"||s==="model:node"};var Um="$graveyard",yc=class extends ue(){model;history;selection;roots;differ;isReadOnly;_postFixers;_hasSelectionChangedFromTheLastChangeBlock;constructor(e){super(),this.model=e,this.history=new xc,this.selection=new wt(this),this.roots=new we({idProperty:"rootName"}),this.differ=new vc(e.markers),this.isReadOnly=!1,this._postFixers=new Set,this._hasSelectionChangedFromTheLastChangeBlock=!1,this.createRoot("$root",Um),this.listenTo(e,"applyOperation",(t,i)=>{let o=i[0];o.isDocumentOperation&&this.differ.bufferOperation(o)},{priority:"high"}),this.listenTo(e,"applyOperation",(t,i)=>{let o=i[0];o.isDocumentOperation&&this.history.addOperation(o)},{priority:"low"}),this.listenTo(this.selection,"change",()=>{this._hasSelectionChangedFromTheLastChangeBlock=!0}),this.listenTo(e.markers,"update",(t,i,o,n,r)=>{let a=Ce(B({},i.getData()),{range:n});this.differ.bufferMarkerChange(i.name,r,a),o===null&&i.on("change",(l,c)=>{let d=i.getData();this.differ.bufferMarkerChange(i.name,Ce(B({},d),{range:c}),d)})}),this.registerPostFixer(t=>{let i=!1;for(let o of this.roots)!o.isAttached()&&!o.isEmpty&&(t.remove(t.createRangeIn(o)),i=!0);for(let o of this.model.markers)o.getRange().root.isAttached()||(t.removeMarker(o),i=!0);return i})}get version(){return this.history.version}set version(e){this.history.version=e}get graveyard(){return this.getRoot(Um)}createRoot(e="$root",t="main"){if(this.roots.get(t))throw new E("model-document-createroot-name-exists",this,{name:t});let i=new bo(this,e,t);return this.roots.add(i),i}destroy(){this.selection.destroy(),this.stopListening()}getRoot(e="main"){return this.roots.get(e)}getRootNames(e=!1){return this.getRoots(e).map(t=>t.rootName)}getRoots(e=!1){return this.roots.filter(t=>t!=this.graveyard&&(e||t.isAttached())&&t._isLoaded)}registerPostFixer(e){this._postFixers.add(e)}toJSON(){let e=ol(this);return e.selection="[engine.model.DocumentSelection]",e.model="[engine.model.Model]",e}_handleChangeBlock(e){this._hasDocumentChangedFromTheLastChangeBlock()&&(this._callPostFixers(e),this.selection.refresh(),this.differ.hasDataChanges()?this.fire("change:data",e.batch):this.fire("change",e.batch),this.selection.refresh(),this.differ.reset()),this._hasSelectionChangedFromTheLastChangeBlock=!1}_hasDocumentChangedFromTheLastChangeBlock(){return!this.differ.isEmpty||this._hasSelectionChangedFromTheLastChangeBlock}_getDefaultRoot(){let e=this.getRoots();return e.length?e[0]:this.graveyard}_getDefaultRange(){let e=this._getDefaultRoot(),t=this.model,i=t.schema,o=t.createPositionFromPath(e,[0]);return i.getNearestSelectionRange(o)||t.createRange(o)}_validateSelectionRange(e){return Gm(e.start)&&Gm(e.end)}_callPostFixers(e){let t=!1;do for(let i of this._postFixers)if(this.selection.refresh(),t=i(e),t)break;while(t)}};function Gm(s){let e=s.textNode;if(e){let t=e.data,i=s.offset-e.startOffset;return!ms(t,i)&&!fs(t,i)}return!0}var _c=class extends ue(){_markers=new Map;[Symbol.iterator](){return this._markers.values()}has(e){let t=e instanceof Fi?e.name:e;return this._markers.has(t)}get(e){return this._markers.get(e)||null}_set(e,t,i=!1,o=!1){let n=e instanceof Fi?e.name:e;if(n.includes(","))throw new E("markercollection-incorrect-marker-name",this);let r=this._markers.get(n);if(r){let c=r.getData(),d=r.getRange(),h=!1;return d.isEqual(t)||(r._attachLiveRange(bt.fromRange(t)),h=!0),i!=r.managedUsingOperations&&(r._managedUsingOperations=i,h=!0),typeof o=="boolean"&&o!=r.affectsData&&(r._affectsData=o,h=!0),h&&this.fire(`update:${n}`,r,d,t,c),r}let a=bt.fromRange(t),l=new Fi(n,a,i,o);return this._markers.set(n,l),this.fire(`update:${n}`,l,null,t,Ce(B({},l.getData()),{range:null})),l}_remove(e){let t=e instanceof Fi?e.name:e,i=this._markers.get(t);return i?(this._markers.delete(t),this.fire(`update:${t}`,i,i.getRange(),null,i.getData()),this._destroyMarker(i),!0):!1}_refresh(e){let t=e instanceof Fi?e.name:e,i=this._markers.get(t);if(!i)throw new E("markercollection-refresh-marker-not-exists",this);let o=i.getRange();this.fire(`update:${t}`,i,o,o,i.getData())}*getMarkersAtPosition(e){for(let t of this)t.getRange().containsPosition(e)&&(yield t)}*getMarkersIntersectingRange(e){for(let t of this)t.getRange().getIntersection(e)!==null&&(yield t)}destroy(){for(let e of this._markers.values())this._destroyMarker(e);this._markers=null,this.stopListening()}*getMarkersGroup(e){for(let t of this._markers.values())t.name.startsWith(e+":")&&(yield t)}_destroyMarker(e){e.stopListening(),e._detachLiveRange()}},Fi=class extends ue(di){name;_managedUsingOperations;_affectsData;_liveRange;constructor(e,t,i,o){super(),this.name=e,this._liveRange=this._attachLiveRange(t),this._managedUsingOperations=i,this._affectsData=o}get managedUsingOperations(){if(!this._liveRange)throw new E("marker-destroyed",this);return this._managedUsingOperations}get affectsData(){if(!this._liveRange)throw new E("marker-destroyed",this);return this._affectsData}getData(){return{range:this.getRange(),affectsData:this.affectsData,managedUsingOperations:this.managedUsingOperations}}getStart(){if(!this._liveRange)throw new E("marker-destroyed",this);return this._liveRange.start.clone()}getEnd(){if(!this._liveRange)throw new E("marker-destroyed",this);return this._liveRange.end.clone()}getRange(){if(!this._liveRange)throw new E("marker-destroyed",this);return this._liveRange.toRange()}_attachLiveRange(e){return this._liveRange&&this._detachLiveRange(),e.delegate("change:range").to(this),e.delegate("change:content").to(this),this._liveRange=e,e}_detachLiveRange(){this._liveRange.stopDelegating("change:range",this),this._liveRange.stopDelegating("change:content",this),this._liveRange.detach(),this._liveRange=null}};Fi.prototype.is=function(s){return s==="marker"||s==="model:marker"};var Cc=class extends kt{sourcePosition;howMany;constructor(e,t){super(null),this.sourcePosition=e.clone(),this.howMany=t}get type(){return"detach"}get affectedSelectable(){return null}toJSON(){let e=super.toJSON();return e.sourcePosition=this.sourcePosition.toJSON(),e}_validate(){if(this.sourcePosition.root.document)throw new E("detach-operation-on-document-node",this)}_execute(){Lf(M._createFromPositionAndShift(this.sourcePosition,this.howMany))}static get className(){return"DetachOperation"}},Xt=class s extends di{markers=new Map;_children=new uo;constructor(e){super(),e&&this._insertChild(0,e)}[Symbol.iterator](){return this.getChildren()}get childCount(){return this._children.length}get maxOffset(){return this._children.maxOffset}get isEmpty(){return this.childCount===0}get nextSibling(){return null}get previousSibling(){return null}get root(){return this}get parent(){return null}get document(){return null}isAttached(){return!1}getAncestors(){return[]}getChild(e){return this._children.getNode(e)}getChildren(){return this._children[Symbol.iterator]()}getChildIndex(e){return this._children.getNodeIndex(e)}getChildStartOffset(e){return this._children.getNodeStartOffset(e)}getPath(){return[]}getNodeByPath(e){let t=this;for(let i of e)t=t.getChild(t.offsetToIndex(i));return t}offsetToIndex(e){return this._children.offsetToIndex(e)}toJSON(){let e=[];for(let t of this._children)e.push(t.toJSON());return e}static fromJSON(e){let t=[];for(let i of e)i.name?t.push(ke.fromJSON(i)):t.push(xe.fromJSON(i));return new s(t)}_appendChild(e){this._insertChild(this.childCount,e)}_insertChild(e,t){let i=cy(t);for(let o of i)o.parent!==null&&o._remove(),o.parent=this;this._children._insertNodes(e,i)}_removeChildren(e,t=1){let i=this._children._removeNodes(e,t);for(let o of i)o.parent=null;return i}};Xt.prototype.is=function(s){return s==="documentFragment"||s==="model:documentFragment"};function cy(s){return typeof s=="string"?[new xe(s)]:(pt(s)||(s=[s]),Array.from(s).map(e=>typeof e=="string"?new xe(e):e instanceof Pt?new xe(e.data,e.getAttributes()):e))}var Ac=class{model;batch;constructor(e,t){this.model=e,this.batch=t}createText(e,t){return new xe(e,t)}createElement(e,t){return new ke(e,t)}createDocumentFragment(){return new Xt}cloneElement(e,t=!0){return e._clone(t)}insert(e,t,i=0){if(this._assertWriterUsedCorrectly(),e instanceof xe&&e.data=="")return;let o=D._createAt(t,i);if(e.parent)if(Xm(e.root,o.root)){this.move(M._createOn(e),o);return}else{if(e.root.document)throw new E("model-writer-insert-forbidden-move",this);this.remove(e)}let n=o.root.document?o.root.document.version:null,r=new tt(o,e,n);if(e instanceof xe&&(r.shouldReceiveAttributes=!0),this.batch.addOperation(r),this.model.applyOperation(r),e instanceof Xt)for(let[a,l]of e.markers){let c=D._createAt(l.root,0),h={range:new M(l.start._getCombined(c,o),l.end._getCombined(c,o)),usingOperation:!0,affectsData:!0};this.model.markers.has(a)?this.updateMarker(a,h):this.addMarker(a,h)}}insertText(e,t,i,o){t instanceof Xt||t instanceof ke||t instanceof D?this.insert(this.createText(e),t,i):this.insert(this.createText(e,t),i,o)}insertElement(e,t,i,o){t instanceof Xt||t instanceof ke||t instanceof D?this.insert(this.createElement(e),t,i):this.insert(this.createElement(e,t),i,o)}append(e,t){this.insert(e,t,"end")}appendText(e,t,i){t instanceof Xt||t instanceof ke?this.insert(this.createText(e),t,"end"):this.insert(this.createText(e,t),i,"end")}appendElement(e,t,i){t instanceof Xt||t instanceof ke?this.insert(this.createElement(e),t,"end"):this.insert(this.createElement(e,t),i,"end")}setAttribute(e,t,i){if(this._assertWriterUsedCorrectly(),i instanceof M){let o=i.getMinimalFlatRanges();for(let n of o)$m(this,e,t,n)}else Ym(this,e,t,i)}setAttributes(e,t){for(let[i,o]of Tt(e))this.setAttribute(i,o,t)}removeAttribute(e,t){if(this._assertWriterUsedCorrectly(),t instanceof M){let i=t.getMinimalFlatRanges();for(let o of i)$m(this,e,null,o)}else Ym(this,e,null,t)}clearAttributes(e){this._assertWriterUsedCorrectly();let t=i=>{for(let o of i.getAttributeKeys())this.removeAttribute(o,i)};if(!(e instanceof M))t(e);else for(let i of e.getItems())t(i)}move(e,t,i){if(this._assertWriterUsedCorrectly(),!(e instanceof M))throw new E("writer-move-invalid-range",this);if(!e.isFlat)throw new E("writer-move-range-not-flat",this);let o=D._createAt(t,i);if(o.isEqual(e.start))return;if(this._addOperationForAffectedMarkers("move",e),!Xm(e.root,o.root))throw new E("writer-move-different-document",this);let n=e.root.document?e.root.document.version:null,r=new me(e.start,e.end.offset-e.start.offset,o,n);this.batch.addOperation(r),this.model.applyOperation(r)}remove(e){this._assertWriterUsedCorrectly();let i=(e instanceof M?e:M._createOn(e)).getMinimalFlatRanges().reverse();for(let o of i)this._addOperationForAffectedMarkers("move",o),dy(o.start,o.end.offset-o.start.offset,this.batch,this.model)}merge(e){this._assertWriterUsedCorrectly();let t=e.nodeBefore,i=e.nodeAfter;if(this._addOperationForAffectedMarkers("merge",e),!(t instanceof ke))throw new E("writer-merge-no-element-before",this);if(!(i instanceof ke))throw new E("writer-merge-no-element-after",this);e.root.document?this._merge(e):this._mergeDetached(e)}createPositionFromPath(e,t,i){return this.model.createPositionFromPath(e,t,i)}createPositionAt(e,t){return this.model.createPositionAt(e,t)}createPositionAfter(e){return this.model.createPositionAfter(e)}createPositionBefore(e){return this.model.createPositionBefore(e)}createRange(e,t){return this.model.createRange(e,t)}createRangeIn(e){return this.model.createRangeIn(e)}createRangeOn(e){return this.model.createRangeOn(e)}createSelection(...e){return this.model.createSelection(...e)}_mergeDetached(e){let t=e.nodeBefore,i=e.nodeAfter;this.move(M._createIn(i),D._createAt(t,"end")),this.remove(i)}_merge(e){let t=D._createAt(e.nodeBefore,"end"),i=D._createAt(e.nodeAfter,0),o=e.root.document.graveyard,n=new D(o,[0]),r=e.root.document.version,a=new Ne(i,e.nodeAfter.maxOffset,t,n,r);this.batch.addOperation(a),this.model.applyOperation(a)}rename(e,t){if(this._assertWriterUsedCorrectly(),!(e instanceof ke))throw new E("writer-rename-not-element-instance",this);let i=e.root.document?e.root.document.version:null,o=new Wt(D._createBefore(e),e.name,t,i);this.batch.addOperation(o),this.model.applyOperation(o)}split(e,t){this._assertWriterUsedCorrectly();let i=e.parent;if(!i.parent)throw new E("writer-split-element-no-parent",this);if(t||(t=i.parent),!e.parent.getAncestors({includeSelf:!0}).includes(t))throw new E("writer-split-invalid-limit-element",this);let o,n;do{let r=i.root.document?i.root.document.version:null,a=i.maxOffset-e.offset,l=ve.getInsertionPosition(e),c=new ve(e,a,l,null,r);this.batch.addOperation(c),this.model.applyOperation(c),!o&&!n&&(o=i,n=e.parent.nextSibling),e=this.createPositionAfter(e.parent),i=e.parent}while(i!==t);return{position:e,range:new M(D._createAt(o,"end"),D._createAt(n,0))}}wrap(e,t){if(this._assertWriterUsedCorrectly(),!e.isFlat)throw new E("writer-wrap-range-not-flat",this);let i=t instanceof ke?t:new ke(t);if(i.childCount>0)throw new E("writer-wrap-element-not-empty",this);if(i.parent!==null)throw new E("writer-wrap-element-attached",this);this.insert(i,e.start);let o=new M(e.start.getShiftedBy(1),e.end.getShiftedBy(1));this.move(o,D._createAt(i,0))}unwrap(e){if(this._assertWriterUsedCorrectly(),e.parent===null)throw new E("writer-unwrap-element-no-parent",this);this.move(M._createIn(e),this.createPositionAfter(e)),this.remove(e)}addMarker(e,t){if(this._assertWriterUsedCorrectly(),!t||typeof t.usingOperation!="boolean")throw new E("writer-addmarker-no-usingoperation",this);let i=t.usingOperation,o=t.range,n=t.affectsData===void 0?!1:t.affectsData;if(this.model.markers.has(e))throw new E("writer-addmarker-marker-exists",this);if(!o)throw new E("writer-addmarker-no-range",this);return i?(ks(this,e,null,o,n),this.model.markers.get(e)):this.model.markers._set(e,o,i,n)}updateMarker(e,t){this._assertWriterUsedCorrectly();let i=typeof e=="string"?e:e.name,o=this.model.markers.get(i);if(!o)throw new E("writer-updatemarker-marker-not-exists",this);if(!t){de("writer-updatemarker-reconvert-using-editingcontroller",{markerName:i}),this.model.markers._refresh(o);return}let n=typeof t.usingOperation=="boolean",r=typeof t.affectsData=="boolean",a=r?t.affectsData:o.affectsData;if(!n&&!t.range&&!r)throw new E("writer-updatemarker-wrong-options",this);let l=o.getRange(),c=t.range?t.range:l;if(n&&t.usingOperation!==o.managedUsingOperations){t.usingOperation?ks(this,i,null,c,a):(ks(this,i,l,null,a),this.model.markers._set(i,c,void 0,a));return}o.managedUsingOperations?ks(this,i,l,c,a):this.model.markers._set(i,c,void 0,a)}removeMarker(e){this._assertWriterUsedCorrectly();let t=typeof e=="string"?e:e.name;if(!this.model.markers.has(t))throw new E("writer-removemarker-no-marker",this);let i=this.model.markers.get(t);if(!i.managedUsingOperations){this.model.markers._remove(t);return}let o=i.getRange();ks(this,t,o,null,i.affectsData)}addRoot(e,t="$root"){this._assertWriterUsedCorrectly();let i=this.model.document.getRoot(e);if(i&&i.isAttached())throw new E("writer-addroot-root-exists",this);let o=this.model.document,n=new Hi(e,t,!0,o,o.version);return this.batch.addOperation(n),this.model.applyOperation(n),this.model.document.getRoot(e)}detachRoot(e){this._assertWriterUsedCorrectly();let t=typeof e=="string"?this.model.document.getRoot(e):e;if(!t||!t.isAttached())throw new E("writer-detachroot-no-root",this);for(let n of this.model.markers)n.getRange().root===t&&this.removeMarker(n);for(let n of t.getAttributeKeys())this.removeAttribute(n,t);this.remove(this.createRangeIn(t));let i=this.model.document,o=new Hi(t.rootName,t.name,!1,i,i.version);this.batch.addOperation(o),this.model.applyOperation(o)}setSelection(...e){this._assertWriterUsedCorrectly(),this.model.document.selection._setTo(...e)}setSelectionFocus(e,t){this._assertWriterUsedCorrectly(),this.model.document.selection._setFocus(e,t)}setSelectionAttribute(e,t){if(this._assertWriterUsedCorrectly(),typeof e=="string")this._setSelectionAttribute(e,t);else for(let[i,o]of Tt(e))this._setSelectionAttribute(i,o)}removeSelectionAttribute(e){if(this._assertWriterUsedCorrectly(),typeof e=="string")this._removeSelectionAttribute(e);else for(let t of e)this._removeSelectionAttribute(t)}overrideSelectionGravity(){return this.model.document.selection._overrideGravity()}restoreSelectionGravity(e){this.model.document.selection._restoreGravity(e)}_setSelectionAttribute(e,t){let i=this.model.document.selection;if(i.isCollapsed&&i.anchor.parent.isEmpty){let o=wt._getStoreAttributeKey(e);this.setAttribute(o,t,i.anchor.parent)}i._setAttribute(e,t)}_removeSelectionAttribute(e){let t=this.model.document.selection;if(t.isCollapsed&&t.anchor.parent.isEmpty){let i=wt._getStoreAttributeKey(e);this.removeAttribute(i,t.anchor.parent)}t._removeAttribute(e)}_assertWriterUsedCorrectly(){if(this.model._currentWriter!==this)throw new E("writer-incorrect-use",this)}_addOperationForAffectedMarkers(e,t){for(let i of this.model.markers){if(!i.managedUsingOperations)continue;let o=i.getRange(),n=!1;if(e==="move"){let r=t;n=r.containsPosition(o.start)||r.start.isEqual(o.start)||r.containsPosition(o.end)||r.end.isEqual(o.end)}else{let r=t,a=r.nodeBefore,l=r.nodeAfter,c=o.start.parent==a&&o.start.isAtEnd,d=o.end.parent==l&&o.end.offset==0,h=o.end.nodeAfter==l,g=o.start.nodeAfter==l;n=c||d||h||g}n&&this.updateMarker(i.name,{range:o})}}};function $m(s,e,t,i){let o=s.model,n=o.document,r=i.start,a,l,c;for(let h of i.getWalker({shallow:!0}))c=h.item.getAttribute(e),a&&l!=c&&(l!=t&&d(),r=a),a=h.nextPosition,l=c;a instanceof D&&a!=r&&l!=t&&d();function d(){let h=new M(r,a),g=h.root.document?n.version:null,m=new je(h,e,l,t,g);s.batch.addOperation(m),o.applyOperation(m)}}function Ym(s,e,t,i){let o=s.model,n=o.document,r=i.getAttribute(e),a,l;if(r!=t){if(i.root===i){let d=i.document?n.version:null;l=new po(i,e,r,t,d)}else{a=new M(D._createBefore(i),s.createPositionAfter(i));let d=a.root.document?n.version:null;l=new je(a,e,r,t,d)}s.batch.addOperation(l),o.applyOperation(l)}}function ks(s,e,t,i,o){let n=s.model,r=n.document,a=new Ht(e,t,i,n.markers,!!o,r.version);s.batch.addOperation(a),n.applyOperation(a)}function dy(s,e,t,i){let o;if(s.root.document){let n=i.document,r=new D(n.graveyard,[0]);o=new me(s,e,r,n.version)}else o=new Cc(s,e);t.addOperation(o),i.applyOperation(o)}function Xm(s,e){return s===e||s instanceof bo&&e instanceof bo}function hy(s,e,t={}){if(e.isCollapsed)return;let i=e.getFirstRange();if(i.root.rootName=="$graveyard")return;let o=s.schema;s.change(n=>{if(!t.doNotResetEntireContent&&vy(o,e)){ky(n,e);return}let r={};if(!t.doNotAutoparagraph){let c=e.getSelectedElement();c&&Object.assign(r,o.getAttributesWithProperty(c,"copyOnReplace",!0))}let[a,l]=uy(i);a.isTouching(l)||n.remove(n.createRange(a,l)),t.leaveUnmerged||(my(n,a,l),o.removeDisallowedAttributes(a.parent.getChildren(),n)),Of(n,e,a),!t.doNotAutoparagraph&&by(o,a)&&Ff(n,a,e,r),a.detach(),l.detach()})}function uy(s){let e=s.root.document.model,t=s.start,i=s.end;if(e.hasContent(s,{ignoreMarkers:!0})){let o=gy(i);if(o&&i.isTouching(e.createPositionAt(o,0))){let n=e.createSelection(s);e.modifySelection(n,{direction:"backward"});let r=n.getLastPosition(),a=e.createRange(r,i);e.hasContent(a,{ignoreMarkers:!0})||(i=r)}}return[$e.fromPosition(t,"toPrevious"),$e.fromPosition(i,"toNext")]}function gy(s){let e=s.parent,t=e.root.document.model.schema,i=e.getAncestors({parentFirst:!0,includeSelf:!0});for(let o of i){if(t.isLimit(o))return null;if(t.isBlock(o))return o}}function my(s,e,t){let i=s.model;if(!Bc(s.model.schema,e,t))return;let[o,n]=py(e,t);!o||!n||(!i.hasContent(o,{ignoreMarkers:!0})&&i.hasContent(n,{ignoreMarkers:!0})?zf(s,e,t,o.parent):Bf(s,e,t,o.parent))}function Bf(s,e,t,i){let o=e.parent,n=t.parent;if(!(o==i||n==i)){for(e=s.createPositionAfter(o),t=s.createPositionBefore(n),t.isEqual(e)||s.insert(n,e),s.merge(e);t.parent.isEmpty;){let r=t.parent;t=s.createPositionBefore(r),s.remove(r)}Bc(s.model.schema,e,t)&&Bf(s,e,t,i)}}function zf(s,e,t,i){let o=e.parent,n=t.parent;if(!(o==i||n==i)){for(e=s.createPositionAfter(o),t=s.createPositionBefore(n),t.isEqual(e)||s.insert(o,t);e.parent.isEmpty;){let r=e.parent;e=s.createPositionBefore(r),s.remove(r)}t=s.createPositionBefore(n),fy(s,t),Bc(s.model.schema,e,t)&&zf(s,e,t,i)}}function fy(s,e){let t=e.nodeBefore,i=e.nodeAfter;t.name!=i.name&&s.rename(t,i.name),s.clearAttributes(t),s.setAttributes(Object.fromEntries(i.getAttributes()),t),s.merge(e)}function Bc(s,e,t){let i=e.parent,o=t.parent;return i==o||s.isLimit(i)||s.isLimit(o)?!1:wy(e,t,s)}function py(s,e){let t=s.getAncestors(),i=e.getAncestors(),o=0;for(;t[o]&&t[o]==i[o];)o++;return[t[o],i[o]]}function by(s,e){let t=s.checkChild(e,"$text"),i=s.checkChild(e,"paragraph");return!t&&i}function wy(s,e,t){let i=new M(s,e);for(let o of i.getWalker())if(t.isLimit(o.item))return!1;return!0}function Ff(s,e,t,i={}){let o=s.createElement("paragraph");s.model.schema.setAllowedAttributes(o,i,s),s.insert(o,e),Of(s,t,s.createPositionAt(o,0))}function ky(s,e){let t=s.model.schema.getLimitElement(e);s.remove(s.createRangeIn(t)),Ff(s,s.createPositionAt(t,0),e)}function vy(s,e){let t=s.getLimitElement(e);if(!e.containsEntireContent(t))return!1;let i=e.getFirstRange();return i.start.parent==i.end.parent?!1:s.checkChild(t,"paragraph")}function Of(s,e,t){e instanceof wt?s.setSelection(t):e.setTo(t)}function xy(s,e){return s.change(t=>{let i=t.createDocumentFragment(),o=e.getFirstRange();if(!o||o.isCollapsed)return i;let n=o.start.root,r=o.start.getCommonPath(o.end),a=n.getNodeByPath(r),l;o.start.parent==o.end.parent?l=o:l=t.createRange(t.createPositionAt(a,o.start.path[r.length]),t.createPositionAt(a,o.end.path[r.length]+1));let c=l.end.offset-l.start.offset;for(let d of l.getItems({shallow:!0}))d.is("$textProxy")?t.appendText(d.data,d.getAttributes(),i):t.append(t.cloneElement(d,!0),i);if(l!=o){let d=o._getTransformedByMove(l.start,t.createPositionAt(i,0),c)[0],h=t.createRange(t.createPositionAt(i,0),d.start),g=t.createRange(d.end,t.createPositionAt(i,"end"));qm(g,t),qm(h,t)}return i})}function qm(s,e){let t=[];Array.from(s.getItems({direction:"backward"})).map(i=>e.createRangeOn(i)).filter(i=>(i.start.isAfter(s.start)||i.start.isEqual(s.start))&&(i.end.isBefore(s.end)||i.end.isEqual(s.end))).forEach(i=>{t.push(i.start.parent),e.remove(i)}),t.forEach(i=>{let o=i;for(;o.parent&&o.isEmpty;){let n=e.createRangeOn(o);o=o.parent,e.remove(n)}})}function yy(s,e,t){return s.change(i=>{let o=t||s.document.selection;o.isCollapsed||s.deleteContent(o,{doNotAutoparagraph:!0});let n=new Sc(s,i,o.anchor),r=[],a;if(e.is("documentFragment")){if(e.markers.size){let d=[];for(let[h,g]of e.markers){let{start:m,end:p}=g,b=m.isEqual(p);d.push({position:m,name:h,isCollapsed:b},{position:p,name:h,isCollapsed:b})}d.sort(({position:h},{position:g})=>h.isBefore(g)?1:-1);for(let{position:h,name:g,isCollapsed:m}of d){let p=null,b=null,k=h.parent===e&&h.isAtStart,v=h.parent===e&&h.isAtEnd;!k&&!v?(p=i.createElement("$marker"),i.insert(p,h)):m&&(b=k?"start":"end"),r.push({name:g,element:p,collapsed:b})}}a=e.getChildren()}else a=[e];n.handleNodes(a);let l=n.getSelectionRange();if(e.is("documentFragment")&&r.length){let d=l?bt.fromRange(l):null,h={};for(let g=r.length-1;g>=0;g--){let{name:m,element:p,collapsed:b}=r[g],k=!h[m];if(k&&(h[m]=[]),p){let v=i.createPositionAt(p,"before");h[m].push(v),i.remove(p)}else{let v=n.getAffectedRange();if(!v){b&&h[m].push(n.position);continue}b?h[m].push(v[b]):h[m].push(k?v.start:v.end)}}for(let[g,[m,p]]of Object.entries(h))m&&p&&m.root===p.root&&m.root.document&&!i.model.markers.has(g)&&i.addMarker(g,{usingOperation:!0,affectsData:!0,range:new M(m,p)});d&&(l=d.toRange(),d.detach())}l&&(o instanceof wt?i.setSelection(l):o.setTo(l));let c=n.getAffectedRange()||s.createRange(o.anchor);return n.destroy(),c})}var Sc=class{model;writer;position;canMergeWith;schema;_documentFragment;_documentFragmentPosition;_firstNode=null;_lastNode=null;_lastAutoParagraph=null;_filterAttributesOf=[];_affectedStart=null;_affectedEnd=null;_nodeToSelect=null;constructor(e,t,i){this.model=e,this.writer=t,this.position=i,this.canMergeWith=new Set([this.position.parent]),this.schema=e.schema,this._documentFragment=t.createDocumentFragment(),this._documentFragmentPosition=t.createPositionAt(this._documentFragment,0)}handleNodes(e){for(let t of Array.from(e))this._handleNode(t);this._insertPartialFragment(),this._lastAutoParagraph&&this._updateLastNodeFromAutoParagraph(this._lastAutoParagraph),this._mergeOnRight(),this.schema.removeDisallowedAttributes(this._filterAttributesOf,this.writer),this._filterAttributesOf=[]}_updateLastNodeFromAutoParagraph(e){let t=this.writer.createPositionAfter(this._lastNode),i=this.writer.createPositionAfter(e);if(i.isAfter(t)){this._lastNode=e;if(this.position.parent!=e||!this.position.isAtEnd)throw new E("insertcontent-invalid-insertion-position",this);this.position=i,this._setAffectedBoundaries(this.position)}}getSelectionRange(){return this._nodeToSelect?M._createOn(this._nodeToSelect):this.model.schema.getNearestSelectionRange(this.position)}getAffectedRange(){return this._affectedStart?new M(this._affectedStart,this._affectedEnd):null}destroy(){this._affectedStart&&this._affectedStart.detach(),this._affectedEnd&&this._affectedEnd.detach()}_handleNode(e){if(this.schema.isObject(e)){this._handleObject(e);return}let t=this._checkAndAutoParagraphToAllowedPosition(e);if(!t&&(t=this._checkAndSplitToAllowedPosition(e),!t)){this._handleDisallowedNode(e);return}this._appendToFragment(e),this._firstNode||(this._firstNode=e),this._lastNode=e}_insertPartialFragment(){if(this._documentFragment.isEmpty)return;let e=$e.fromPosition(this.position,"toNext");this._setAffectedBoundaries(this.position),this._documentFragment.getChild(0)==this._firstNode&&(this.writer.insert(this._firstNode,this.position),this._mergeOnLeft(),this.position=e.toPosition()),this._documentFragment.isEmpty||this.writer.insert(this._documentFragment,this.position),this._documentFragmentPosition=this.writer.createPositionAt(this._documentFragment,0),this.position=e.toPosition(),e.detach()}_handleObject(e){this._checkAndSplitToAllowedPosition(e)?this._appendToFragment(e):this._tryAutoparagraphing(e)}_handleDisallowedNode(e){e.is("element")?this.handleNodes(e.getChildren()):this._tryAutoparagraphing(e)}_appendToFragment(e){if(!this.schema.checkChild(this.position,e))throw new E("insertcontent-wrong-position",this,{node:e,position:this.position});this.writer.insert(e,this._documentFragmentPosition),this._documentFragmentPosition=this._documentFragmentPosition.getShiftedBy(e.offsetSize),this.schema.isObject(e)&&!this.schema.checkChild(this.position,"$text")?this._nodeToSelect=e:this._nodeToSelect=null,this._filterAttributesOf.push(e)}_setAffectedBoundaries(e){this._affectedStart||(this._affectedStart=$e.fromPosition(e,"toPrevious")),(!this._affectedEnd||this._affectedEnd.isBefore(e))&&(this._affectedEnd&&this._affectedEnd.detach(),this._affectedEnd=$e.fromPosition(e,"toNext"))}_mergeOnLeft(){let e=this._firstNode;if(!(e instanceof ke)||!this._canMergeLeft(e))return;let t=$e._createBefore(e);t.stickiness="toNext";let i=$e.fromPosition(this.position,"toNext");this._affectedStart.isEqual(t)&&(this._affectedStart.detach(),this._affectedStart=$e._createAt(t.nodeBefore,"end","toPrevious")),this._firstNode===this._lastNode&&(this._firstNode=t.nodeBefore,this._lastNode=t.nodeBefore),this.writer.merge(t),t.isEqual(this._affectedEnd)&&this._firstNode===this._lastNode&&(this._affectedEnd.detach(),this._affectedEnd=$e._createAt(t.nodeBefore,"end","toNext")),this.position=i.toPosition(),i.detach(),this._filterAttributesOf.push(this.position.parent),t.detach()}_mergeOnRight(){let e=this._lastNode;if(!(e instanceof ke)||!this._canMergeRight(e))return;let t=$e._createAfter(e);t.stickiness="toNext";if(!this.position.isEqual(t))throw new E("insertcontent-invalid-insertion-position",this);this.position=D._createAt(t.nodeBefore,"end");let i=$e.fromPosition(this.position,"toPrevious");this._affectedEnd.isEqual(t)&&(this._affectedEnd.detach(),this._affectedEnd=$e._createAt(t.nodeBefore,"end","toNext")),this._firstNode===this._lastNode&&(this._firstNode=t.nodeBefore,this._lastNode=t.nodeBefore),this.writer.merge(t),t.getShiftedBy(-1).isEqual(this._affectedStart)&&this._firstNode===this._lastNode&&(this._affectedStart.detach(),this._affectedStart=$e._createAt(t.nodeBefore,0,"toPrevious")),this.position=i.toPosition(),i.detach(),this._filterAttributesOf.push(this.position.parent),t.detach()}_canMergeLeft(e){let t=e.previousSibling;return t instanceof ke&&this.canMergeWith.has(t)&&this.model.schema.checkMerge(t,e)}_canMergeRight(e){let t=e.nextSibling;return t instanceof ke&&this.canMergeWith.has(t)&&this.model.schema.checkMerge(e,t)}_tryAutoparagraphing(e){let t=this.writer.createElement("paragraph");this._getAllowedIn(this.position.parent,t)&&this.schema.checkChild(t,e)&&(t._appendChild(e),this._handleNode(t))}_checkAndAutoParagraphToAllowedPosition(e){if(this.schema.checkChild(this.position.parent,e))return!0;if(!this.schema.checkChild(this.position.parent,"paragraph")||!this.schema.checkChild("paragraph",e))return!1;this._insertPartialFragment();let t=this.writer.createElement("paragraph");return this.writer.insert(t,this.position),this._setAffectedBoundaries(this.position),this._lastAutoParagraph=t,this.position=this.writer.createPositionAt(t,0),!0}_checkAndSplitToAllowedPosition(e){let t=this._getAllowedIn(this.position.parent,e);if(!t)return!1;for(t!=this.position.parent&&this._insertPartialFragment();t!=this.position.parent;)if(this.position.isAtStart){let i=this.position.parent;this.position=this.writer.createPositionBefore(i),i.isEmpty&&i.parent===t&&this.writer.remove(i)}else if(this.position.isAtEnd)this.position=this.writer.createPositionAfter(this.position.parent);else{let i=this.writer.createPositionAfter(this.position.parent);this._setAffectedBoundaries(this.position),this.writer.split(this.position),this.position=i,this.canMergeWith.add(this.position.nodeAfter)}return!0}_getAllowedIn(e,t){return this.schema.checkChild(e,t)?e:this.schema.isLimit(e)?null:this._getAllowedIn(e.parent,t)}};function _y(s,e,t,i={}){if(!s.schema.isObject(e))throw new E("insertobject-element-not-an-object",s,{object:e});let o=t||s.document.selection,n=o;i.findOptimalPosition&&s.schema.isBlock(e)&&(n=s.createSelection(s.schema.findOptimalInsertionRange(o,i.findOptimalPosition)));let r=Se(o.getSelectedBlocks()),a={};return r&&Object.assign(a,s.schema.getAttributesWithProperty(r,"copyOnReplace",!0)),s.change(l=>{n.isCollapsed||s.deleteContent(n,{doNotAutoparagraph:!0});let c=e,d=n.anchor.parent;!s.schema.checkChild(d,e)&&s.schema.checkChild(d,"paragraph")&&s.schema.checkChild("paragraph",e)&&(c=l.createElement("paragraph"),l.insert(e,c)),s.schema.setAllowedAttributes(c,a,l);let h=s.insertContent(c,n);return h.isCollapsed||i.setSelection&&Cy(l,e,i.setSelection,a),h})}function Cy(s,e,t,i){let o=s.model;if(t=="on"){s.setSelection(e,"on");return}if(t!="after")throw new E("insertobject-invalid-place-parameter-value",o);let n=e.nextSibling;if(o.schema.isInline(e)){s.setSelection(e,"after");return}!(n&&o.schema.checkChild(n,"$text"))&&o.schema.checkChild(e.parent,"paragraph")&&(n=s.createElement("paragraph"),o.schema.setAllowedAttributes(n,i,s),o.insertContent(n,s.createPositionAfter(e))),n&&s.setSelection(n,0)}var Ay=' ,.?!:;"-()';function Sy(s,e,t={}){let i=s.schema,o=t.direction!="backward",n=t.unit?t.unit:"character",r=!!t.treatEmojiAsSingleUnit,a=e.focus,l=new Mt({boundaries:Py(a,o),singleCharacters:!0,direction:o?"forward":"backward"}),c={walker:l,schema:i,isForward:o,unit:n,treatEmojiAsSingleUnit:r},d;for(;d=l.next();){if(d.done)return;let h=Ey(c,d.value);if(h){e instanceof wt?s.change(g=>{g.setSelectionFocus(h)}):e.setFocus(h);return}}}function Ey(s,e){let{isForward:t,walker:i,unit:o,schema:n,treatEmojiAsSingleUnit:r}=s,{type:a,item:l,nextPosition:c}=e;if(a=="text")return s.unit==="word"?Iy(i,t):Ty(i,o,r);if(a==(t?"elementStart":"elementEnd")){if(n.isSelectable(l))return D._createAt(l,t?"after":"before");if(n.checkChild(c,"$text"))return c}else{if(n.isLimit(l)){i.skip(()=>!0);return}if(n.checkChild(c,"$text"))return c}}function Ty(s,e,t){let i=s.position.textNode;if(i){let o=i.data,n=s.position.offset-i.startOffset;for(;ms(o,n)||e=="character"&&fs(o,n)||t&&Mr(o,n);)s.next(),n=s.position.offset-i.startOffset}return s.position}function Iy(s,e){let t=s.position.textNode;for(t||(t=e?s.position.nodeAfter:s.position.nodeBefore);t&&t.is("$text");){let i=s.position.offset-t.startOffset;if(Ly(t,i,e))t=e?s.position.nodeAfter:s.position.nodeBefore;else{if(My(t.data,i,e))break;s.next()}}return s.position}function Py(s,e){let t=s.root,i=D._createAt(t,e?"end":0);return e?new M(s,i):new M(i,s)}function My(s,e,t){let i=e+(t?0:-1);return Ay.includes(s.charAt(i))}function Ly(s,e,t){return e===(t?s.offsetSize:0)}var Wi=class extends ge(){markers;document;schema;_pendingChanges;_currentWriter;constructor(){super(),this.markers=new _c,this.document=new yc(this),this.schema=new fc,this._pendingChanges=[],this._currentWriter=null,["deleteContent","modifySelection","getSelectedContent","applyOperation"].forEach(e=>this.decorate(e)),this.on("applyOperation",(e,t)=>{t[0]._validate()},{priority:"highest"}),this.schema.register("$root",{isLimit:!0}),this.schema.register("$container",{allowIn:["$root","$container"]}),this.schema.register("$block",{allowIn:["$root","$container"],isBlock:!0}),this.schema.register("$blockObject",{allowWhere:"$block",isBlock:!0,isObject:!0}),this.schema.register("$inlineObject",{allowWhere:"$text",allowAttributesOf:"$text",isInline:!0,isObject:!0}),this.schema.register("$text",{allowIn:"$block",isInline:!0,isContent:!0}),this.schema.register("$clipboardHolder",{allowContentOf:"$root",allowChildren:"$text",isLimit:!0}),this.schema.register("$documentFragment",{allowContentOf:"$root",allowChildren:"$text",isLimit:!0}),this.schema.register("$marker"),this.schema.addChildCheck((e,t)=>{if(t.name==="$marker")return!0}),Ix(this),this.document.registerPostFixer(Af),this.on("insertContent",(e,[t,i])=>{e.return=yy(this,t,i)}),this.on("insertObject",(e,[t,i,o])=>{e.return=_y(this,t,i,o)}),this.on("canEditAt",e=>{let t=!this.document.isReadOnly;e.return=t,t||e.stop()})}change(e){try{return this._pendingChanges.length===0?(this._pendingChanges.push({batch:new zi,callback:e}),this._runPendingChanges()[0]):e(this._currentWriter)}catch(t){E.rethrowUnexpectedError(t,this)}}enqueueChange(e,t){try{e?typeof e=="function"?(t=e,e=new zi):e instanceof zi||(e=new zi(e)):e=new zi,this._pendingChanges.push({batch:e,callback:t}),this._pendingChanges.length==1&&this._runPendingChanges()}catch(i){E.rethrowUnexpectedError(i,this)}}applyOperation(e){e._execute()}insertContent(e,t,i,...o){let n=Xl(t,i);return this.fire("insertContent",[e,n,i,...o])}insertObject(e,t,i,o,...n){let r=Xl(t,i);return this.fire("insertObject",[e,r,o,o,...n])}deleteContent(e,t){hy(this,e,t)}modifySelection(e,t){Sy(this,e,t)}getSelectedContent(e){return xy(this,e)}hasContent(e,t={}){let i=e instanceof M?e:M._createIn(e);if(i.isCollapsed)return!1;let{ignoreWhitespaces:o=!1,ignoreMarkers:n=!1}=t;if(!n){for(let r of this.markers.getMarkersIntersectingRange(i))if(r.affectsData)return!0}for(let r of i.getItems())if(this.schema.isContent(r))if(r.is("$textProxy"))if(o){if(r.data.search(/\S/)!==-1)return!0}else return!0;else return!0;return!1}canEditAt(e){let t=Xl(e);return this.fire("canEditAt",[t])}createPositionFromPath(e,t,i){return new D(e,t,i)}createPositionAt(e,t){return D._createAt(e,t)}createPositionAfter(e){return D._createAfter(e)}createPositionBefore(e){return D._createBefore(e)}createRange(e,t){return new M(e,t)}createRangeIn(e){return M._createIn(e)}createRangeOn(e){return M._createOn(e)}createSelection(...e){return new Ye(...e)}createBatch(e){return new zi(e)}createOperationFromJSON(e){return bc.fromJSON(e,this.document)}destroy(){this.document.destroy(),this.stopListening()}_runPendingChanges(){let e=[];this.fire("_beforeChanges");try{for(;this._pendingChanges.length;){let t=this._pendingChanges[0].batch;this._currentWriter=new Ac(this,t);let i=this._pendingChanges[0].callback(this._currentWriter);e.push(i),this.document._handleChangeBlock(this._currentWriter),this._pendingChanges.shift(),this._currentWriter=null}}finally{this._pendingChanges.length=0,this._currentWriter=null,this.fire("_afterChanges")}return e}};function Xl(s,e){if(s)return s instanceof Ye||s instanceof wt?s:s instanceof xo?e||e===0?new Ye(s,e):s.is("rootElement")?new Ye(s,"in"):new Ye(s,"on"):new Ye(s)}var wo=class extends Kt{domEventType=["mousedown","mouseup","mouseover","mouseout"];onDomEvent(e){this.fire(e.type,e)}};var Ry=/^#([0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/i,Ny=/^rgb\([ ]?([0-9]{1,3}[ %]?,[ ]?){2,3}[0-9]{1,3}[ %]?\)$/i,Vy=/^rgba\([ ]?([0-9]{1,3}[ %]?,[ ]?){3}(1|[0-9]+%|[0]?\.?[0-9]+)\)$/i,Dy=/^hsl\([ ]?([0-9]{1,3}[ %]?[,]?[ ]*){3}(1|[0-9]+%|[0]?\.?[0-9]+)?\)$/i,By=/^hsla\([ ]?([0-9]{1,3}[ %]?,[ ]?){2,3}(1|[0-9]+%|[0]?\.?[0-9]+)\)$/i,zy=/\w+\((?:[^()]|\([^()]*\))*\)|\S+/gi,Fy=new Set(["black","silver","gray","white","maroon","red","purple","fuchsia","green","lime","olive","yellow","navy","blue","teal","aqua","orange","aliceblue","antiquewhite","aquamarine","azure","beige","bisque","blanchedalmond","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkgrey","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","gainsboro","ghostwhite","gold","goldenrod","greenyellow","grey","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightgrey","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","limegreen","linen","magenta","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","oldlace","olivedrab","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","tan","thistle","tomato","turquoise","violet","wheat","whitesmoke","yellowgreen","activeborder","activecaption","appworkspace","background","buttonface","buttonhighlight","buttonshadow","buttontext","captiontext","graytext","highlight","highlighttext","inactiveborder","inactivecaption","inactivecaptiontext","infobackground","infotext","menu","menutext","scrollbar","threeddarkshadow","threedface","threedhighlight","threedlightshadow","threedshadow","window","windowframe","windowtext","rebeccapurple","currentcolor","transparent"]);function Hf(s){return s.startsWith("#")?Ry.test(s):s.startsWith("rgb")?Ny.test(s)||Vy.test(s):s.startsWith("hsl")?Dy.test(s)||By.test(s):Fy.has(s.toLowerCase())}var Oy=/^([+-]?[0-9]*([.][0-9]+)?(px|cm|mm|in|pc|pt|ch|em|ex|rem|vh|vw|vmin|vmax)|0)$/;function zc(s){return Oy.test(s)}var Hy=/^[+-]?[0-9]*([.][0-9]+)?%$/;function Fc(s){return Hy.test(s)}var Wy=["repeat-x","repeat-y","repeat","space","round","no-repeat"];function jy(s){return Wy.includes(s)}var Uy=["center","top","bottom","left","right"];function Gy(s){return Uy.includes(s)}var $y=["fixed","scroll","local"];function Yy(s){return $y.includes(s)}var Xy=/^url\(/;function qy(s){return Xy.test(s)}function Ky(s){let e=s.matchAll(zy);return Array.from(e).map(t=>t[0])}function Oc(s){s.setNormalizer("background",Zy()),s.setNormalizer("background-color",Qy()),s.setReducer("background",Jy()),s.setStyleRelation("background",["background-color"])}function Zy(){return s=>{let e={},t=Ky(s);for(let i of t)jy(i)?(e.repeat=e.repeat||[],e.repeat.push(i)):Gy(i)?(e.position=e.position||[],e.position.push(i)):Yy(i)?e.attachment=i:Hf(i)?e.color=i:qy(i)&&(e.image=i);return{path:"background",value:e}}}function Qy(){return s=>({path:"background.color",value:s})}function Jy(){return s=>{let e=[];return e.push(["background-color",s.color]),e}}var hn="[",ys="]",an="{",vs="}",Ns={container:Ei,attribute:co,empty:fn,ui:go,raw:pn},e_={setContentOf:(s,e)=>{s.innerHTML=e}};function Ec(s,e={}){if(!(s instanceof bn))throw new TypeError("View needs to be an instance of module:engine/view/view~View.");let t=s.document,i=!!e.withoutSelection,o=e.rootName||"main",n=t.getRoot(o),r={showType:e.showType,showPriority:e.showPriority,renderUIElements:e.renderUIElements,renderRawElements:e.renderRawElements,ignoreRoot:!0,domConverter:e.domConverter};return i?Ec._stringify(n,null,r):Ec._stringify(n,t.selection,r)}Ec._stringify=jf;function Wf(s,e,t={}){if(!(s instanceof bn))throw new TypeError("View needs to be an instance of module:engine/view/view~View.");let i=s.document,o=t.rootName||"main",n=i.getRoot(o);s.change(r=>{let a=Wf._parse(e,{rootElement:n});a.view&&a.selection&&r.setSelection(a.selection)})}Wf._parse=Uf;function jf(s,e=null,t={}){let i;return e instanceof O||e instanceof re?i=new Vs(e):i=e,new Ic(s,i,t).stringify()}function Uf(s,e={}){let t=new Gr(new gn);e.order=e.order||[];let i=new Tc({sameSelectionCharacters:e.sameSelectionCharacters}),n=new pc(t,{namespaces:Object.keys(Ns)}).toView(s);if(n=Gf(n),e.rootElement){let a=e.rootElement,l=n._removeChildren(0,n.childCount);a._removeChildren(0,a.childCount),a._appendChild(l),n=a}let r=i.parse(n,e.order);if(n.is("documentFragment")&&n.childCount===1&&(n=n.getChild(0)),r.length){let a=new Vs(r,{backward:!!e.lastRangeBackward});return{view:n,selection:a}}return n.parent&&n._remove(),n}var Tc=class{sameSelectionCharacters;_positions;constructor(e){this.sameSelectionCharacters=!!e.sameSelectionCharacters}parse(e,t){this._positions=[],this._getPositions(e);let i=this._createRanges();if(t.length){if(t.length!=i.length)throw new Error(`Parse error - there are ${i.length} ranges found, but ranges order array contains ${t.length} elements.`);i=this._sortRanges(i,t)}return i}_getPositions(e){if(e.is("documentFragment")||e.is("element")){let t=[...e.getChildren()];for(let i of t)this._getPositions(i)}if(e.is("$text")){let t=new RegExp(`[${an}${vs}\\${ys}\\${hn}]`,"g"),i=e.data,o,n=0,r=[];for(;o=t.exec(i);){let c=o.index,d=o[0];r.push({bracket:d,textOffset:c-n}),n++}i=i.replace(t,""),e._data=i;let a=e.index,l=e.parent;i||e._remove();for(let c of r)if(i)if(this.sameSelectionCharacters||!this.sameSelectionCharacters&&(c.bracket==an||c.bracket==vs))this._positions.push({bracket:c.bracket,position:new O(e,c.textOffset)});else{if(!this.sameSelectionCharacters&&c.textOffset!==0&&c.textOffset!==i.length)throw new Error(`Parse error - range delimiter '${c.bracket}' is placed inside text node.`);let d=c.textOffset===0?a:a+1;this._positions.push({bracket:c.bracket,position:new O(l,d)})}else{if(!this.sameSelectionCharacters&&c.bracket==an||c.bracket==vs)throw new Error(`Parse error - text range delimiter '${c.bracket}' is placed inside empty text node. `);this._positions.push({bracket:c.bracket,position:new O(l,a)})}}}_sortRanges(e,t){let i=[],o=0;for(let n of t){if(e[n-1]===void 0)throw new Error("Parse error - provided ranges order is invalid.");i[n-1]=e[o],o++}return i}_createRanges(){let e=[],t=null;for(let i of this._positions){if(!t&&(i.bracket==ys||i.bracket==vs))throw new Error(`Parse error - end of range was found '${i.bracket}' but range was not started before.`);if(t&&(i.bracket==hn||i.bracket==an))throw new Error(`Parse error - start of range was found '${i.bracket}' but one range is already started.`);i.bracket==hn||i.bracket==an?t=new re(i.position,i.position):(t.end=i.position,e.push(t),t=null)}if(t!==null)throw new Error("Parse error - range was started but no end delimiter was found.");return e}},Ic=class{root;selection;ranges;showType;showPriority;showAttributeElementId;ignoreRoot;sameSelectionCharacters;renderUIElements;renderRawElements;domConverter;constructor(e,t,i){this.root=e,this.selection=t,this.ranges=[],t&&(this.ranges=[...t.getRanges()]),this.showType=!!i.showType,this.showPriority=!!i.showPriority,this.showAttributeElementId=!!i.showAttributeElementId,this.ignoreRoot=!!i.ignoreRoot,this.sameSelectionCharacters=!!i.sameSelectionCharacters,this.renderUIElements=!!i.renderUIElements,this.renderRawElements=!!i.renderRawElements,this.domConverter=i.domConverter||e_}stringify(){let e="";return this._walkView(this.root,t=>{e+=t}),e}_walkView(e,t){let i=this.ignoreRoot&&this.root===e;if(e.is("element")||e.is("documentFragment")){if(e.is("element")&&!i&&t(this._stringifyElementOpen(e)),this.renderUIElements&&e.is("uiElement"))t(e.render(document,this.domConverter).innerHTML);else if(this.renderRawElements&&e.is("rawElement")){let o=document.createElement("div");e.render(o,this.domConverter),t(o.innerHTML)}else{let o=0;t(this._stringifyElementRanges(e,o));for(let n of e.getChildren())this._walkView(n,t),o++,t(this._stringifyElementRanges(e,o))}e.is("element")&&!i&&t(this._stringifyElementClose(e))}e.is("$text")&&t(this._stringifyTextRanges(e))}_stringifyElementRanges(e,t){let i="",o="",n="";for(let r of this.ranges)r.start.parent==e&&r.start.offset===t&&(r.isCollapsed?n+=hn+ys:i+=hn),r.end.parent===e&&r.end.offset===t&&!r.isCollapsed&&(o+=ys);return o+n+i}_stringifyTextRanges(e){let t=e.data.length,i=e.data.split(""),o,n;this.sameSelectionCharacters?(o=hn,n=ys):(o=an,n=vs),i[t]="";let r=i.map(a=>({letter:a,start:"",end:"",collapsed:""}));for(let a of this.ranges){let l=a.start,c=a.end;l.parent==e&&l.offset>=0&&l.offset<=t&&(a.isCollapsed?r[c.offset].collapsed+=o+n:r[l.offset].start+=o),c.parent==e&&c.offset>=0&&c.offset<=t&&!a.isCollapsed&&(r[c.offset].end+=n)}return r.map(a=>a.end+a.collapsed+a.start+a.letter).join("")}_stringifyElementOpen(e){let t=this._stringifyElementPriority(e),i=this._stringifyElementId(e),n=[this._stringifyElementType(e),e.name].filter(l=>l!=="").join(":"),r=this._stringifyElementAttributes(e);return`<${[n,t,i,r].filter(l=>l!=="").join(" ")}>`}_stringifyElementClose(e){return`</${[this._stringifyElementType(e),e.name].filter(o=>o!=="").join(":")}>`}_stringifyElementType(e){if(this.showType){for(let t in Ns)if(e instanceof Ns[t])return t}return""}_stringifyElementPriority(e){return this.showPriority&&e.is("attributeElement")?`view-priority="${e.priority}"`:""}_stringifyElementId(e){return this.showAttributeElementId&&e.is("attributeElement")&&e.id?`view-id="${e.id}"`:""}_stringifyElementAttributes(e){let t=[],i=[...e.getAttributeKeys()].sort();for(let o of i){let n;o==="class"?n=[...e.getClassNames()].sort().join(" "):o==="style"?n=[...e.getStyleNames()].sort().map(r=>`${r}:${e.getStyle(r).replace(/"/g,"&quot;")}`).join(";"):n=e.getAttribute(o),t.push(`${o}="${n}"`)}return t.join(" ")}};function Gf(s){if(s.is("element")||s.is("documentFragment")){let e=s.is("documentFragment")?new ho(s.document):t_(s.document,s);for(let t of[...s.getChildren()]){if(e.is("emptyElement"))throw new Error("Parse error - cannot parse inside EmptyElement.");if(e.is("uiElement"))throw new Error("Parse error - cannot parse inside UIElement.");if(e.is("rawElement"))throw new Error("Parse error - cannot parse inside RawElement.");e._appendChild(Gf(t))}return e}return s}function t_(s,e){let t=i_(e),i=Ns[t.type],o=i?new i(s,t.name):new ai(s,t.name);o.is("attributeElement")&&(t.priority!==null&&(o._priority=t.priority),t.id!==null&&(o._id=t.id));for(let n of e.getAttributeKeys())o._setAttribute(n,e.getAttribute(n));return o}function i_(s){let e=s.name.split(":"),t=n_(s.getAttribute("view-priority")),i=s.hasAttribute("view-id")?s.getAttribute("view-id"):null;if(s._removeAttribute("view-priority"),s._removeAttribute("view-id"),e.length==1)return{name:e[0],type:t!==null?"attribute":null,priority:t,id:i};let o=o_(e[0]);if(o)return{name:e[1],type:o,priority:t,id:i};throw new Error(`Parse error - cannot parse element's name: ${s.name}.`)}function o_(s){return s in Ns?s:null}function n_(s){let e=parseInt(s,10);return isNaN(e)?null:e}function $f(s,e={}){if(!(s instanceof Wi))throw new TypeError("Model needs to be an instance of module:engine/model/model~Model.");let t=e.rootName||"main",i=s.document.getRoot(t);return $f._stringify(i,e.withoutSelection?null:s.document.selection,e.convertMarkers?s.markers:null)}$f._stringify=s_;function Yf(s,e,t={}){if(!(s instanceof Wi))throw new TypeError("Model needs to be an instance of module:engine/model/model~Model.");let i,o=null,n=s.document.getRoot(t.rootName||"main"),r=Yf._parse(e,s.schema,{lastRangeBackward:t.lastRangeBackward,selectionAttributes:t.selectionAttributes,context:[n.name]});"model"in r?(i=r.model,o=r.selection):i=r,t.batchType!==void 0?s.enqueueChange(t.batchType,a):s.change(a);function a(l){if(l.remove(l.createRangeIn(n)),l.insert(i,n),l.setSelection(null),l.removeSelectionAttribute(s.document.selection.getAttributeKeys()),o){let c=[];for(let d of o.getRanges()){let h=new D(n,d.start.path),g=new D(n,d.end.path);c.push(new M(h,g))}l.setSelection(c,{backward:o.isBackward}),t.selectionAttributes&&l.setSelectionAttribute(o.getAttributes())}}}Yf._parse=r_;function s_(s,e=null,t=null){let i=new Wi,o=new wn,n=null,r;if(s instanceof bo||s instanceof Xt)r=i.createRangeIn(s);else if(s.parent)r=new M(i.createPositionBefore(s),i.createPositionAfter(s));else{let b=new Xt(s);r=i.createRangeIn(b)}e instanceof Ye||e instanceof wt?n=e:e instanceof M?n=new Ye(e):e instanceof D&&(n=new Ye(e));let a=new gn,l=new bn(a),c=l.document,d=new _s(c,"div");d.rootName="main",c.roots.add(d);let h=new Es({mapper:o,schema:i.schema});o.bindElements(s.root,d),h.on("insert:$text",Lc()),h.on("insert",Rc(),{priority:"lowest"}),h.on("attribute",(b,k,v)=>{(k.item instanceof Ye||k.item instanceof wt||k.item.is("$textProxy"))&&bf((u,{writer:f})=>f.createAttributeElement("model-text-with-attributes",{[k.attributeKey]:Zm(u)}))(b,k,v)}),h.on("insert",wf(b=>{let k=Hc(b.getAttributes(),Zm);return new Ei(c,b.name,k)})),h.on("selection",ff()),h.on("selection",pf()),h.on("addMarker",kf((b,{writer:k})=>{let v=b.markerName+":"+(b.isOpening?"start":"end");return k.createUIElement(v)}));let g=new Map;if(t)for(let b of Array.from(t).sort((k,v)=>k.name<v.name?1:-1))g.set(b.name,b.getRange());let m=l._writer;h.convert(r,g,m),n&&h.convertSelection(n,t||i.markers,m);let p=jf(d,c.selection,{sameSelectionCharacters:!0});return p=p.substr(5,p.length-11),l.destroy(),p.replace(new RegExp("model-text-with-attributes","g"),"$text")}function r_(s,e,t={}){let i=new wn;s=s.replace(new RegExp("\\$text","g"),"model-text-with-attributes");let o=Uf(s,{sameSelectionCharacters:!0,lastRangeBackward:!!t.lastRangeBackward}),n,r=null,a=null;"view"in o&&"selection"in o?(n=o.view,r=o.selection):n=o;let l=new Wi,c=new Hr({schema:e});c.on("documentFragment",a_(i)),c.on("element:model-text-with-attributes",Km()),c.on("element",l_(i)),c.on("text",Km());let d=l.change(h=>c.convert(n.root,h,t.context||"$root"));if(i.bindElements(d,n.root),d.childCount==1&&(d=d.getChild(0)),r){let h=[];for(let g of r.getRanges())h.push(i.toModelRange(g));a=new Ye(h,{backward:r.isBackward});for(let[g,m]of Tt(t.selectionAttributes||[]))a.setAttribute(g,m)}return a?{model:d,selection:a}:d}function a_(s){return(e,t,i)=>{let o=i.convertChildren(t.viewItem,t.modelCursor);s.bindElements(t.modelCursor.parent,t.viewItem),t=Object.assign(t,o),e.stop()}}function l_(s){return(e,t,i)=>{let o=t.viewItem.name;if(!i.schema.checkChild(t.modelCursor,o))throw new Error(`Element '${o}' was not allowed in given position.`);let n=Hc(t.viewItem.getAttributes(),Xf),r=i.writer.createElement(t.viewItem.name,n);i.writer.insert(r,t.modelCursor),s.bindElements(r,t.viewItem),i.convertChildren(t.viewItem,r),t.modelRange=M._createOn(r),t.modelCursor=t.modelRange.end,e.stop()}}function Km(){return(s,e,t)=>{if(!t.schema.checkChild(e.modelCursor,"$text"))throw new Error("Text was not allowed in given position.");let i;if(e.viewItem.is("element")){let o=Hc(e.viewItem.getAttributes(),Xf),n=e.viewItem.getChild(0);i=t.writer.createText(n.data,o)}else i=t.writer.createText(e.viewItem.data);t.writer.insert(i,e.modelCursor),e.modelRange=M._createFromPositionAndShift(e.modelCursor,i.offsetSize),e.modelCursor=e.modelRange.end,s.stop()}}function Xf(s){try{return JSON.parse(s)}catch{return s}}function Zm(s){return St(s)?JSON.stringify(s):s}function*Hc(s,e){for(let[t,i]of s)yield[t,e(i)]}var $r=class{crashes=[];state="initializing";_crashNumberLimit;_now=Date.now;_minimumNonErrorTimePeriod;_boundErrorHandler;_listeners;constructor(e){if(this.crashes=[],this._crashNumberLimit=typeof e.crashNumberLimit=="number"?e.crashNumberLimit:3,this._minimumNonErrorTimePeriod=typeof e.minimumNonErrorTimePeriod=="number"?e.minimumNonErrorTimePeriod:5e3,this._boundErrorHandler=t=>{let i="error"in t?t.error:t.reason;i instanceof Error&&this._handleError(i,t)},this._listeners={},!this._restart)throw new Error("The Watchdog class was split into the abstract `Watchdog` class and the `EditorWatchdog` class. Please, use `EditorWatchdog` if you have used the `Watchdog` class previously.")}destroy(){this._stopErrorHandling(),this._listeners={}}on(e,t){this._listeners[e]||(this._listeners[e]=[]),this._listeners[e].push(t)}off(e,t){this._listeners[e]=this._listeners[e].filter(i=>i!==t)}_fire(e,...t){let i=this._listeners[e]||[];for(let o of i)o.apply(this,[null,...t])}_startErrorHandling(){window.addEventListener("error",this._boundErrorHandler),window.addEventListener("unhandledrejection",this._boundErrorHandler)}_stopErrorHandling(){window.removeEventListener("error",this._boundErrorHandler),window.removeEventListener("unhandledrejection",this._boundErrorHandler)}_handleError(e,t){if(this._shouldReactToError(e)){this.crashes.push({message:e.message,stack:e.stack,filename:t instanceof ErrorEvent?t.filename:void 0,lineno:t instanceof ErrorEvent?t.lineno:void 0,colno:t instanceof ErrorEvent?t.colno:void 0,date:this._now()});let i=this._shouldRestart();this.state="crashed",this._fire("stateChange"),this._fire("error",{error:e,causesRestart:i}),i?this._restart():(this.state="crashedPermanently",this._fire("stateChange"))}}_shouldReactToError(e){return e.is&&e.is("CKEditorError")&&e.context!==void 0&&e.context!==null&&this.state==="ready"&&this._isErrorComingFromThisItem(e)}_shouldRestart(){if(this.crashes.length<=this._crashNumberLimit)return!0;let e=this.crashes[this.crashes.length-1].date,t=this.crashes[this.crashes.length-1-this._crashNumberLimit].date;return(e-t)/this._crashNumberLimit>this._minimumNonErrorTimePeriod}};function Wc(s,e=new Set){let t=[s],i=new Set,o=0;for(;t.length>o;){let n=t[o++];if(!(i.has(n)||!c_(n)||e.has(n)))if(i.add(n),Symbol.iterator in n)try{for(let r of n)t.push(r)}catch{}else for(let r in n)r!=="defaultValue"&&t.push(n[r])}return i}function c_(s){let e=Object.prototype.toString.call(s),t=typeof s;return!(t==="number"||t==="boolean"||t==="string"||t==="symbol"||t==="function"||e==="[object Date]"||e==="[object RegExp]"||e==="[object Module]"||s===void 0||s===null||s._watchdogExcluded||s instanceof EventTarget||s instanceof Event)}function Kf(s,e,t=new Set){if(s===e&&d_(s))return!0;let i=Wc(s,t),o=Wc(e,t);for(let n of i)if(o.has(n))return!0;return!1}function d_(s){return typeof s=="object"&&s!==null}var Bs=class extends $r{_editor=null;_lifecyclePromise=null;_throttledSave;_data;_lastDocumentVersion;_elementOrData;_initUsingData=!0;_editables={};_config;_excludedProps;constructor(e,t={}){super(t),this._throttledSave=oo(this._save.bind(this),typeof t.saveInterval=="number"?t.saveInterval:5e3),e&&(this._creator=(i,o)=>e.create(i,o)),this._destructor=i=>i.destroy()}get editor(){return this._editor}get _item(){return this._editor}setCreator(e){this._creator=e}setDestructor(e){this._destructor=e}_restart(){return Promise.resolve().then(()=>(this.state="initializing",this._fire("stateChange"),this._destroy())).catch(e=>{console.error("An error happened during the editor destroying.",e)}).then(()=>{let e={},t=[],i=this._config.rootsAttributes||{},o={};for(let[r,a]of Object.entries(this._data.roots))a.isLoaded?(e[r]="",o[r]=i[r]||{}):t.push(r);let n=Ce(B({},this._config),{extraPlugins:this._config.extraPlugins||[],lazyRoots:t,rootsAttributes:o,_watchdogInitialData:this._data});return delete n.initialData,n.extraPlugins.push(jc),this._initUsingData?this.create(e,n,n.context):$t(this._elementOrData)?this.create(this._elementOrData,n,n.context):this.create(this._editables,n,n.context)}).then(()=>{this._fire("restart")})}create(e=this._elementOrData,t=this._config,i){return this._lifecyclePromise=Promise.resolve(this._lifecyclePromise).then(()=>(super._startErrorHandling(),this._elementOrData=e,this._initUsingData=typeof e=="string"||Object.keys(e).length>0&&typeof Object.values(e)[0]=="string",this._config=this._cloneEditorConfiguration(t)||{},this._config.context=i,this._creator(e,this._config))).then(o=>{this._editor=o,o.model.document.on("change:data",this._throttledSave),this._lastDocumentVersion=o.model.document.version,this._data=this._getData(),this._initUsingData||(this._editables=this._getEditables()),this.state="ready",this._fire("stateChange")}).finally(()=>{this._lifecyclePromise=null}),this._lifecyclePromise}destroy(){return this._lifecyclePromise=Promise.resolve(this._lifecyclePromise).then(()=>(this.state="destroyed",this._fire("stateChange"),super.destroy(),this._destroy())).finally(()=>{this._lifecyclePromise=null}),this._lifecyclePromise}_destroy(){return Promise.resolve().then(()=>{this._stopErrorHandling(),this._throttledSave.cancel();let e=this._editor;return this._editor=null,e.model.document.off("change:data",this._throttledSave),this._destructor(e)})}_save(){let e=this._editor.model.document.version;try{this._data=this._getData(),this._initUsingData||(this._editables=this._getEditables()),this._lastDocumentVersion=e}catch(t){console.error(t,"An error happened during restoring editor data. Editor will be restored from the previously saved data.")}}_setExcludedProperties(e){this._excludedProps=e}_getData(){let e=this._editor,t=e.model.document.roots.filter(a=>a.isAttached()&&a.rootName!="$graveyard"),{plugins:i}=e,o=i.has("CommentsRepository")&&i.get("CommentsRepository"),n=i.has("TrackChanges")&&i.get("TrackChanges"),r={roots:{},markers:{},commentThreads:JSON.stringify([]),suggestions:JSON.stringify([])};t.forEach(a=>{r.roots[a.rootName]={content:JSON.stringify(Array.from(a.getChildren())),attributes:JSON.stringify(Array.from(a.getAttributes())),isLoaded:a._isLoaded}});for(let a of e.model.markers)a._affectsData&&(r.markers[a.name]={rangeJSON:a.getRange().toJSON(),usingOperation:a._managedUsingOperations,affectsData:a._affectsData});return o&&(r.commentThreads=JSON.stringify(o.getCommentThreads({toJSON:!0,skipNotAttached:!0}))),n&&(r.suggestions=JSON.stringify(n.getSuggestions({toJSON:!0,skipNotAttached:!0}))),r}_getEditables(){let e={};for(let t of this.editor.model.document.getRootNames()){let i=this.editor.ui.getEditableElement(t);i&&(e[t]=i)}return e}_isErrorComingFromThisItem(e){return Kf(this._editor,e.context,this._excludedProps)}_cloneEditorConfiguration(e){return Yo(e,(t,i)=>{if($t(t)||i==="context")return t})}},jc=class{editor;_data;constructor(e){this.editor=e,this._data=e.config.get("_watchdogInitialData")}init(){this.editor.data.on("init",e=>{e.stop(),this.editor.model.enqueueChange({isUndoable:!1},t=>{this._restoreCollaborationData(),this._restoreEditorData(t)}),this.editor.data.fire("ready")},{priority:999})}_createNode(e,t){if("name"in t){let i=e.createElement(t.name,t.attributes);if(t.children)for(let o of t.children)i._appendChild(this._createNode(e,o));return i}else return e.createText(t.data,t.attributes)}_restoreEditorData(e){let t=this.editor;Object.entries(this._data.roots).forEach(([i,{content:o,attributes:n}])=>{let r=JSON.parse(o),a=JSON.parse(n),l=t.model.document.getRoot(i);for(let[c,d]of a)e.setAttribute(c,d,l);for(let c of r){let d=this._createNode(e,c);e.insert(d,l,"end")}}),Object.entries(this._data.markers).forEach(([i,o])=>{let{document:n}=t.model,m=o,{rangeJSON:{start:r,end:a}}=m,l=No(m,["rangeJSON"]),c=n.getRoot(r.root),d=e.createPositionFromPath(c,r.path,r.stickiness),h=e.createPositionFromPath(c,a.path,a.stickiness),g=e.createRange(d,h);e.addMarker(i,B({range:g},l))})}_restoreCollaborationData(){let e=JSON.parse(this._data.commentThreads),t=JSON.parse(this._data.suggestions);e.forEach(i=>{let o=this.editor.config.get("collaboration.channelId"),n=this.editor.plugins.get("CommentsRepository");n.hasCommentThread(i.threadId)&&n.getCommentThread(i.threadId).remove(),n.addCommentThread(B({channelId:o},i))}),t.forEach(i=>{let o=this.editor.plugins.get("TrackChangesEditing");if(o.hasSuggestion(i.id)){let n=o.getSuggestion(i.id);n.attributes=i.attributes}else o.addSuggestionData(i)})}};var Ds=Symbol("MainQueueId"),Yr=class extends $r{_watchdogs=new Map;_watchdogConfig;_context=null;_contextProps=new Set;_actionQueues=new Uc;_contextConfig;_item;constructor(e,t={}){super(t),this._watchdogConfig=t,this._creator=i=>e.create(i),this._destructor=i=>i.destroy(),this._actionQueues.onEmpty(()=>{this.state==="initializing"&&(this.state="ready",this._fire("stateChange"))})}setCreator(e){this._creator=e}setDestructor(e){this._destructor=e}get context(){return this._context}create(e={}){return this._actionQueues.enqueue(Ds,()=>(this._contextConfig=e,this._create()))}getItem(e){return this._getWatchdog(e)._item}getItemState(e){return this._getWatchdog(e).state}add(e){let t=qf(e);return Promise.all(t.map(i=>this._actionQueues.enqueue(i.id,()=>{if(this.state==="destroyed")throw new Error("Cannot add items to destroyed watchdog.");if(!this._context)throw new Error("Context was not created yet. You should call the `ContextWatchdog#create()` method first.");let o;if(this._watchdogs.has(i.id))throw new Error(`Item with the given id is already added: '${i.id}'.`);if(i.type==="editor")return o=new Bs(null,this._watchdogConfig),o.setCreator(i.creator),o._setExcludedProperties(this._contextProps),i.destructor&&o.setDestructor(i.destructor),this._watchdogs.set(i.id,o),o.on("error",(n,{error:r,causesRestart:a})=>{this._fire("itemError",{itemId:i.id,error:r}),a&&this._actionQueues.enqueue(i.id,()=>new Promise(l=>{let c=()=>{o.off("restart",c),this._fire("itemRestart",{itemId:i.id}),l()};o.on("restart",c)}))}),o.create(i.sourceElementOrData,i.config,this._context);throw new Error(`Not supported item type: '${i.type}'.`)})))}remove(e){let t=qf(e);return Promise.all(t.map(i=>this._actionQueues.enqueue(i,()=>{let o=this._getWatchdog(i);return this._watchdogs.delete(i),o.destroy()})))}destroy(){return this._actionQueues.enqueue(Ds,()=>(this.state="destroyed",this._fire("stateChange"),super.destroy(),this._destroy()))}_restart(){return this._actionQueues.enqueue(Ds,()=>(this.state="initializing",this._fire("stateChange"),this._destroy().catch(e=>{console.error("An error happened during destroying the context or items.",e)}).then(()=>this._create()).then(()=>this._fire("restart"))))}_create(){return Promise.resolve().then(()=>(this._startErrorHandling(),this._creator(this._contextConfig))).then(e=>(this._context=e,this._contextProps=Wc(this._context),Promise.all(Array.from(this._watchdogs.values()).map(t=>(t._setExcludedProperties(this._contextProps),t.create(void 0,void 0,this._context))))))}_destroy(){return Promise.resolve().then(()=>{this._stopErrorHandling();let e=this._context;return this._context=null,this._contextProps=new Set,Promise.all(Array.from(this._watchdogs.values()).map(t=>t.destroy())).then(()=>this._destructor(e))})}_getWatchdog(e){let t=this._watchdogs.get(e);if(!t)throw new Error(`Item with the given id was not registered: ${e}.`);return t}_isErrorComingFromThisItem(e){for(let t of this._watchdogs.values())if(t._isErrorComingFromThisItem(e))return!1;return Kf(this._context,e.context)}},Uc=class{_onEmptyCallbacks=[];_queues=new Map;_activeActions=0;onEmpty(e){this._onEmptyCallbacks.push(e)}enqueue(e,t){let i=e===Ds;this._activeActions++,this._queues.get(e)||this._queues.set(e,Promise.resolve());let n=(i?Promise.all(this._queues.values()):Promise.all([this._queues.get(Ds),this._queues.get(e)])).then(t),r=n.catch(()=>{});return this._queues.set(e,r),n.finally(()=>{this._activeActions--,this._queues.get(e)===r&&this._activeActions===0&&this._onEmptyCallbacks.forEach(a=>a())})}};function qf(s){return Array.isArray(s)?s:[s]}var V=class extends ge(){editor;_disableStack=new Set;constructor(e){super(),this.editor=e,this.set("isEnabled",!0)}forceDisabled(e){this._disableStack.add(e),this._disableStack.size==1&&(this.on("set:isEnabled",Zf,{priority:"highest"}),this.isEnabled=!1)}clearForceDisabled(e){this._disableStack.delete(e),this._disableStack.size==0&&(this.off("set:isEnabled",Zf),this.isEnabled=!0)}destroy(){this.stopListening()}static get isContextPlugin(){return!1}};function Zf(s){s.return=!1,s.stop()}var ie=class extends ge(){editor;_isEnabledBasedOnSelection;_affectsData;_disableStack;constructor(e){super(),this.editor=e,this.set("value",void 0),this.set("isEnabled",!1),this._affectsData=!0,this._isEnabledBasedOnSelection=!0,this._disableStack=new Set,this.decorate("execute"),this.listenTo(this.editor.model.document,"change",()=>{this.refresh()}),this.listenTo(e,"change:isReadOnly",()=>{this.refresh()}),this.on("set:isEnabled",t=>{if(!this.affectsData)return;let i=e.model.document.selection,n=!(i.getFirstPosition().root.rootName=="$graveyard")&&e.model.canEditAt(i);(e.isReadOnly||this._isEnabledBasedOnSelection&&!n)&&(t.return=!1,t.stop())},{priority:"highest"}),this.on("execute",t=>{this.isEnabled||t.stop()},{priority:"high"})}get affectsData(){return this._affectsData}set affectsData(e){this._affectsData=e}refresh(){this.isEnabled=!0}forceDisabled(e){this._disableStack.add(e),this._disableStack.size==1&&(this.on("set:isEnabled",Qf,{priority:"highest"}),this.isEnabled=!1)}clearForceDisabled(e){this._disableStack.delete(e),this._disableStack.size==0&&(this.off("set:isEnabled",Qf),this.refresh())}execute(...e){}destroy(){this.stopListening()}};function Qf(s){s.return=!1,s.stop()}var Xr=class extends ue(){_context;_plugins=new Map;_availablePlugins;_contextPlugins;constructor(e,t=[],i=[]){super(),this._context=e,this._availablePlugins=new Map;for(let o of t)o.pluginName&&this._availablePlugins.set(o.pluginName,o);this._contextPlugins=new Map;for(let[o,n]of i)this._contextPlugins.set(o,n),this._contextPlugins.set(n,o),o.pluginName&&this._availablePlugins.set(o.pluginName,o)}*[Symbol.iterator](){for(let e of this._plugins)typeof e[0]=="function"&&(yield e)}get(e){let t=this._plugins.get(e);if(!t){let i=e;throw typeof e=="function"&&(i=e.pluginName||e.name),new E("plugincollection-plugin-not-loaded",this._context,{plugin:i})}return t}has(e){return this._plugins.has(e)}init(e,t=[],i=[]){let o=this,n=this._context;m(e),b(e);let r=e.filter(y=>!h(y,t)),a=[...p(r)];w(a,i);let l=u(a);return f(l,"init").then(()=>f(l,"afterInit")).then(()=>l);function c(y){return typeof y=="function"}function d(y){return c(y)&&!!y.isContextPlugin}function h(y,_){return _.some(C=>C===y||g(y)===C||g(C)===y)}function g(y){return c(y)?y.pluginName||y.name:y}function m(y,_=new Set){y.forEach(C=>{c(C)&&(_.has(C)||(_.add(C),C.pluginName&&!o._availablePlugins.has(C.pluginName)&&o._availablePlugins.set(C.pluginName,C),C.requires&&m(C.requires,_)))})}function p(y,_=new Set){return y.map(C=>c(C)?C:o._availablePlugins.get(C)).reduce((C,A)=>_.has(A)?C:(_.add(A),A.requires&&(b(A.requires,A),p(A.requires,_).forEach(S=>C.add(S))),C.add(A)),new Set)}function b(y,_=null){y.map(C=>c(C)?C:o._availablePlugins.get(C)||C).forEach(C=>{k(C,_),v(C,_),x(C,_)})}function k(y,_){if(!c(y))throw _?new E("plugincollection-soft-required",n,{missingPlugin:y,requiredBy:g(_)}):new E("plugincollection-plugin-not-found",n,{plugin:y})}function v(y,_){if(d(_)&&!d(y))throw new E("plugincollection-context-required",n,{plugin:g(y),requiredBy:g(_)})}function x(y,_){if(_&&h(y,t))throw new E("plugincollection-required",n,{plugin:g(y),requiredBy:g(_)})}function u(y){return y.map(_=>{let C=o._contextPlugins.get(_);return C=C||new _(n),o._add(_,C),C})}function f(y,_){return y.reduce((C,A)=>!A[_]||o._contextPlugins.has(A)?C:C.then(A[_].bind(A)),Promise.resolve())}function w(y,_){for(let C of _){if(typeof C!="function")throw new E("plugincollection-replace-plugin-invalid-type",null,{pluginItem:C});let A=C.pluginName;if(!A)throw new E("plugincollection-replace-plugin-missing-name",null,{pluginItem:C});if(C.requires&&C.requires.length)throw new E("plugincollection-plugin-for-replacing-cannot-have-dependencies",null,{pluginName:A});let S=o._availablePlugins.get(A);if(!S)throw new E("plugincollection-plugin-for-replacing-not-exist",null,{pluginName:A});let P=y.indexOf(S);if(P===-1){if(o._contextPlugins.has(S))return;throw new E("plugincollection-plugin-for-replacing-not-loaded",null,{pluginName:A})}if(S.requires&&S.requires.length)throw new E("plugincollection-replaced-plugin-cannot-have-dependencies",null,{pluginName:A});y.splice(P,1,C),o._availablePlugins.set(A,C)}}}destroy(){let e=[];for(let[,t]of this)typeof t.destroy=="function"&&!this._contextPlugins.has(t)&&e.push(t.destroy());return Promise.all(e)}_add(e,t){this._plugins.set(e,t);let i=e.pluginName;if(i){if(this._plugins.has(i))throw new E("plugincollection-plugin-name-conflict",null,{pluginName:i,plugin1:this._plugins.get(i).constructor,plugin2:e});this._plugins.set(i,t)}}},Jf=(()=>{class s{config;plugins;locale;t;editors;static defaultConfig;static builtinPlugins;_contextOwner=null;constructor(t){let a=t||{},{translations:i}=a,o=No(a,["translations"]);this.config=new ls(o,this.constructor.defaultConfig);let n=this.constructor.builtinPlugins;this.config.define("plugins",n),this.plugins=new Xr(this,n);let r=this.config.get("language")||{};this.locale=new Tr({uiLanguage:typeof r=="string"?r:r.ui,contentLanguage:this.config.get("language.content"),translations:i}),this.t=this.locale.t,this.editors=new we}initPlugins(){let t=this.config.get("plugins")||[],i=this.config.get("substitutePlugins")||[];for(let o of t.concat(i)){if(typeof o!="function")throw new E("context-initplugins-constructor-only",null,{Plugin:o});if(o.isContextPlugin!==!0)throw new E("context-initplugins-invalid-plugin",null,{Plugin:o})}return this.plugins.init(t,[],i)}destroy(){return Promise.all(Array.from(this.editors,t=>t.destroy())).then(()=>this.plugins.destroy())}_addEditor(t,i){if(this._contextOwner)throw new E("context-addeditor-private-context");this.editors.add(t),i&&(this._contextOwner=t)}_removeEditor(t){return this.editors.has(t)&&this.editors.remove(t),this._contextOwner===t?this.destroy():Promise.resolve()}_getEditorConfig(){let t={};for(let i of this.config.names())["plugins","removePlugins","extraPlugins"].includes(i)||(t[i]=this.config.get(i));return t}static create(t){return new Promise(i=>{let o=new this(t);i(o.initPlugins().then(()=>o))})}}return s})();var $c=class{_commands;constructor(){this._commands=new Map}add(e,t){this._commands.set(e,t)}get(e){return this._commands.get(e)}execute(e,...t){let i=this.get(e);if(!i)throw new E("commandcollection-command-not-found",this,{commandName:e});return i.execute(...t)}*names(){yield*Ae(this._commands.keys())}*commands(){yield*Ae(this._commands.values())}[Symbol.iterator](){return this._commands[Symbol.iterator]()}destroy(){for(let e of this.commands())e.destroy()}},Yc=class extends Le{editor;constructor(e){super(),this.editor=e}set(e,t,i={}){if(typeof t=="string"){let o=t;t=(n,r)=>{this.editor.execute(o),r()}}super.set(e,t,i)}},Gc="contentEditing",ep="common",Xc=class{keystrokeInfos=new Map;_editor;constructor(e){this._editor=e;let t=e.config.get("menuBar.isVisible"),i=e.locale.t;this.addKeystrokeInfoCategory({id:Gc,label:i("Content editing keystrokes"),description:i("These keyboard shortcuts allow for quick access to content editing features.")});let o=[{label:i("Close contextual balloons, dropdowns, and dialogs"),keystroke:"Esc"},{label:i("Open the accessibility help dialog"),keystroke:"Alt+0"},{label:i("Move focus between form fields (inputs, buttons, etc.)"),keystroke:[["Tab"],["Shift+Tab"]]},{label:i("Move focus to the toolbar, navigate between toolbars"),keystroke:"Alt+F10",mayRequireFn:!0},{label:i("Navigate through the toolbar or menu bar"),keystroke:[["arrowup"],["arrowright"],["arrowdown"],["arrowleft"]]},{label:i("Execute the currently focused button. Executing buttons that interact with the editor content moves the focus back to the content."),keystroke:[["Enter"],["Space"]]}];t&&o.push({label:i("Move focus to the menu bar, navigate between menu bars"),keystroke:"Alt+F9",mayRequireFn:!0}),this.addKeystrokeInfoCategory({id:"navigation",label:i("User interface and content navigation keystrokes"),description:i("Use the following keystrokes for more efficient navigation in the CKEditor 5 user interface."),groups:[{id:"common",keystrokes:o}]})}addKeystrokeInfoCategory({id:e,label:t,description:i,groups:o}){this.keystrokeInfos.set(e,{id:e,label:t,description:i,groups:new Map}),this.addKeystrokeInfoGroup({categoryId:e,id:ep}),o&&o.forEach(n=>{this.addKeystrokeInfoGroup(B({categoryId:e},n))})}addKeystrokeInfoGroup({categoryId:e=Gc,id:t,label:i,keystrokes:o}){let n=this.keystrokeInfos.get(e);if(!n)throw new E("accessibility-unknown-keystroke-info-category",this._editor,{groupId:t,categoryId:e});n.groups.set(t,{id:t,label:i,keystrokes:o||[]})}addKeystrokeInfos({categoryId:e=Gc,groupId:t=ep,keystrokes:i}){if(!this.keystrokeInfos.has(e))throw new E("accessibility-unknown-keystroke-info-category",this._editor,{categoryId:e,keystrokes:i});let o=this.keystrokeInfos.get(e);if(!o.groups.has(t))throw new E("accessibility-unknown-keystroke-info-group",this._editor,{groupId:t,categoryId:e,keystrokes:i});o.groups.get(t).keystrokes.push(...i)}},kn=(()=>{class s extends ge(){accessibility;commands;config;conversion;data;editing;locale;model;plugins;keystrokes;t;static defaultConfig;static builtinPlugins;_context;_readOnlyLocks;constructor(t={}){super();let i=this.constructor,h=i.defaultConfig||{},{translations:o}=h,n=No(h,["translations"]),g=t,{translations:r=o}=g,a=No(g,["translations"]),l=t.language||n.language;this._context=t.context||new Jf({language:l,translations:r}),this._context._addEditor(this,!t.context);let c=Array.from(i.builtinPlugins||[]);this.config=new ls(a,n),this.config.define("plugins",c),this.config.define(this._context._getEditorConfig()),this.plugins=new Xr(this,c,this._context.plugins),this.locale=this._context.locale,this.t=this.locale.t,this._readOnlyLocks=new Set,this.commands=new $c,this.set("state","initializing"),this.once("ready",()=>this.state="ready",{priority:"high"}),this.once("destroy",()=>this.state="destroyed",{priority:"high"}),this.model=new Wi,this.on("change:isReadOnly",()=>{this.model.document.isReadOnly=this.isReadOnly});let d=new gn;this.data=new jr(this.model,d),this.editing=new Or(this.model,d),this.editing.view.document.bind("isReadOnly").to(this),this.conversion=new Ur([this.editing.downcastDispatcher,this.data.downcastDispatcher],this.data.upcastDispatcher),this.conversion.addAlias("dataDowncast",this.data.downcastDispatcher),this.conversion.addAlias("editingDowncast",this.editing.downcastDispatcher),this.keystrokes=new Yc(this),this.keystrokes.listenTo(this.editing.view.document),this.accessibility=new Xc(this)}get isReadOnly(){return this._readOnlyLocks.size>0}set isReadOnly(t){throw new E("editor-isreadonly-has-no-setter")}enableReadOnlyMode(t){if(typeof t!="string"&&typeof t!="symbol")throw new E("editor-read-only-lock-id-invalid",null,{lockId:t});this._readOnlyLocks.has(t)||(this._readOnlyLocks.add(t),this._readOnlyLocks.size===1&&this.fire("change:isReadOnly","isReadOnly",!0,!1))}disableReadOnlyMode(t){if(typeof t!="string"&&typeof t!="symbol")throw new E("editor-read-only-lock-id-invalid",null,{lockId:t});this._readOnlyLocks.has(t)&&(this._readOnlyLocks.delete(t),this._readOnlyLocks.size===0&&this.fire("change:isReadOnly","isReadOnly",!1,!0))}setData(t){this.data.set(t)}getData(t){return this.data.get(t)}initPlugins(){let t=this.config,i=t.get("plugins"),o=t.get("removePlugins")||[],n=t.get("extraPlugins")||[],r=t.get("substitutePlugins")||[];return this.plugins.init(i.concat(n),o,r)}destroy(){let t=Promise.resolve();return this.state=="initializing"&&(t=new Promise(i=>this.once("ready",i))),t.then(()=>{this.fire("destroy"),this.stopListening(),this.commands.destroy()}).then(()=>this.plugins.destroy()).then(()=>{this.model.destroy(),this.data.destroy(),this.editing.destroy(),this.keystrokes.destroy()}).then(()=>this._context._removeEditor(this))}execute(t,...i){try{return this.commands.execute(t,...i)}catch(o){E.rethrowUnexpectedError(o,this)}}focus(){this.editing.view.focus()}static create(...t){throw new Error("This is an abstract method.")}static Context=Jf;static EditorWatchdog=Bs;static ContextWatchdog=Yr}return s})();function qr(s){if(!$o(s.updateSourceElement))throw new E("attachtoform-missing-elementapi-interface",s);let e=s.sourceElement;if(h_(e)&&e.form){let t,i=e.form,o=()=>s.updateSourceElement();$o(i.submit)&&(t=i.submit,i.submit=()=>{o(),t.apply(i)}),i.addEventListener("submit",o),s.on("destroy",()=>{i.removeEventListener("submit",o),t&&(i.submit=t)})}}function h_(s){return!!s&&s.tagName.toLowerCase()==="textarea"}function yo(s){class e extends s{sourceElement;updateSourceElement(i){if(!this.sourceElement)throw new E("editor-missing-sourceelement",this);let o=this.config.get("updateSourceElementOnDestroy"),n=this.sourceElement instanceof HTMLTextAreaElement;if(!o&&!n){Ir(this.sourceElement,"");return}let r=typeof i=="string"?i:this.data.get();Ir(this.sourceElement,r)}}return e}yo.updateSourceElement=yo(Object).prototype.updateSourceElement;var u_='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m11.591 10.177 4.243 4.242a1 1 0 0 1-1.415 1.415l-4.242-4.243-4.243 4.243a1 1 0 0 1-1.414-1.415l4.243-4.242L4.52 5.934A1 1 0 0 1 5.934 4.52l4.243 4.243 4.242-4.243a1 1 0 1 1 1.415 1.414l-4.243 4.243z"/></svg>',g_='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 16h9a1 1 0 0 1 0 2H2a1 1 0 0 1 0-2z"/><path d="M17 1a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V3a2 2 0 0 1 2-2h14zm0 1.5H3a.5.5 0 0 0-.492.41L2.5 3v9a.5.5 0 0 0 .41.492L3 12.5h14a.5.5 0 0 0 .492-.41L17.5 12V3a.5.5 0 0 0-.41-.492L17 2.5z" fill-opacity=".6"/></svg>',m_='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M6.972 16.615a.997.997 0 0 1-.744-.292l-4.596-4.596a1 1 0 1 1 1.414-1.414l3.926 3.926 9.937-9.937a1 1 0 0 1 1.414 1.415L7.717 16.323a.997.997 0 0 1-.745.292z"/></svg>',f_='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m11.333 2 .19 2.263a5.899 5.899 0 0 1 1.458.604L14.714 3.4 16.6 5.286l-1.467 1.733c.263.452.468.942.605 1.46L18 8.666v2.666l-2.263.19a5.899 5.899 0 0 1-.604 1.458l1.467 1.733-1.886 1.886-1.733-1.467a5.899 5.899 0 0 1-1.46.605L11.334 18H8.667l-.19-2.263a5.899 5.899 0 0 1-1.458-.604L5.286 16.6 3.4 14.714l1.467-1.733a5.899 5.899 0 0 1-.604-1.458L2 11.333V8.667l2.262-.189a5.899 5.899 0 0 1 .605-1.459L3.4 5.286 5.286 3.4l1.733 1.467a5.899 5.899 0 0 1 1.46-.605L8.666 2h2.666zM10 6.267a3.733 3.733 0 1 0 0 7.466 3.733 3.733 0 0 0 0-7.466z"/></svg>',p_='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M10.209 18.717A8.5 8.5 0 1 1 18.686 9.6h-.008l.002.12a3 3 0 0 1-2.866 2.997h-.268l-.046-.002v.002h-4.791a2 2 0 1 0 0 4 1 1 0 1 1-.128 1.992 8.665 8.665 0 0 1-.372.008Zm-3.918-7.01a1.25 1.25 0 1 0-2.415-.648 1.25 1.25 0 0 0 2.415.647ZM5.723 8.18a1.25 1.25 0 1 0 .647-2.414 1.25 1.25 0 0 0-.647 2.414ZM9.76 6.155a1.25 1.25 0 1 0 .647-2.415 1.25 1.25 0 0 0-.647 2.415Zm4.028 1.759a1.25 1.25 0 1 0 .647-2.415 1.25 1.25 0 0 0-.647 2.415Z"/></svg>',b_='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m8.636 9.531-2.758 3.94a.5.5 0 0 0 .122.696l3.224 2.284h1.314l2.636-3.736L8.636 9.53zm.288 8.451L5.14 15.396a2 2 0 0 1-.491-2.786l6.673-9.53a2 2 0 0 1 2.785-.49l3.742 2.62a2 2 0 0 1 .491 2.785l-7.269 10.053-2.147-.066z"/><path d="M4 18h5.523v-1H4zm-2 0h1v-1H2z"/></svg>',w_='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M11 1a9 9 0 1 1-8.027 13.075l1.128-1.129A7.502 7.502 0 0 0 18.5 10a7.5 7.5 0 1 0-14.962.759l-.745-.746-.76.76A9 9 0 0 1 11 1z"/><path d="M.475 8.17a.75.75 0 0 1 .978.047l.075.082 1.284 1.643 1.681-1.284a.75.75 0 0 1 .978.057l.073.083a.75.75 0 0 1-.057.978l-.083.073-2.27 1.737a.75.75 0 0 1-.973-.052l-.074-.082-1.741-2.23a.75.75 0 0 1 .13-1.052z"/><path d="M11.5 5v4.999l3.196 3.196-1.06 1.06L10.1 10.72l-.1-.113V5z"/></svg>',k_='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M5.085 6.22 2.943 4.078a.75.75 0 1 1 1.06-1.06l2.592 2.59A11.094 11.094 0 0 1 10 5.068c4.738 0 8.578 3.101 8.578 5.083 0 1.197-1.401 2.803-3.555 3.887l1.714 1.713a.75.75 0 0 1-.09 1.138.488.488 0 0 1-.15.084.75.75 0 0 1-.821-.16L6.17 7.304c-.258.11-.51.233-.757.365l6.239 6.24-.006.005.78.78c-.388.094-.78.166-1.174.215l-1.11-1.11h.011L4.55 8.197a7.2 7.2 0 0 0-.665.514l-.112.098 4.897 4.897-.005.006 1.276 1.276a10.164 10.164 0 0 1-1.477-.117l-.479-.479-.009.009-4.863-4.863-.022.031a2.563 2.563 0 0 0-.124.2c-.043.077-.08.158-.108.241a.534.534 0 0 0-.028.133.29.29 0 0 0 .008.072.927.927 0 0 0 .082.226c.067.133.145.26.234.379l3.242 3.365.025.01.59.623c-3.265-.918-5.59-3.155-5.59-4.668 0-1.194 1.448-2.838 3.663-3.93zm7.07.531a4.632 4.632 0 0 1 1.108 5.992l.345.344.046-.018a9.313 9.313 0 0 0 2-1.112c.256-.187.5-.392.727-.613.137-.134.27-.277.392-.431.072-.091.141-.185.203-.286.057-.093.107-.19.148-.292a.72.72 0 0 0 .036-.12.29.29 0 0 0 .008-.072.492.492 0 0 0-.028-.133.999.999 0 0 0-.036-.096 2.165 2.165 0 0 0-.071-.145 2.917 2.917 0 0 0-.125-.2 3.592 3.592 0 0 0-.263-.335 5.444 5.444 0 0 0-.53-.523 7.955 7.955 0 0 0-1.054-.768 9.766 9.766 0 0 0-1.879-.891c-.337-.118-.68-.219-1.027-.301zm-2.85.21-.069.002a.508.508 0 0 0-.254.097.496.496 0 0 0-.104.679.498.498 0 0 0 .326.199l.045.005c.091.003.181.003.272.012a2.45 2.45 0 0 1 2.017 1.513c.024.061.043.125.069.185a.494.494 0 0 0 .45.287h.008a.496.496 0 0 0 .35-.158.482.482 0 0 0 .13-.335.638.638 0 0 0-.048-.219 3.379 3.379 0 0 0-.36-.723 3.438 3.438 0 0 0-2.791-1.543l-.028-.001h-.013z"/></svg>',v_='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M3.035 1C2.446 1 2 1.54 2 2.098V10.5h1.5v-8h13v8H18V2.098C18 1.539 17.48 1 16.9 1H3.035Zm10.453 2.61a1.885 1.885 0 0 0-1.442.736 1.89 1.89 0 0 0 1.011 2.976 1.903 1.903 0 0 0 2.253-1.114 1.887 1.887 0 0 0-1.822-2.598ZM7.463 8.163a.611.611 0 0 0-.432.154L5.071 10.5h5.119L7.88 8.348a.628.628 0 0 0-.417-.185Zm6.236 1.059a.62.62 0 0 0-.42.164L12.07 10.5h2.969l-.92-1.113a.618.618 0 0 0-.42-.165ZM.91 11.5a.91.91 0 0 0-.91.912v6.877c0 .505.405.91.91.91h18.178a.91.91 0 0 0 .912-.91v-6.877a.908.908 0 0 0-.912-.912H.91ZM3.668 13h1.947l2.135 5.7H5.898l-.28-.946H3.601l-.278.945H1.516L3.668 13Zm4.947 0h1.801v4.3h2.7v1.4h-4.5V13h-.001Zm4.5 0h5.4v1.4h-1.798v4.3h-1.701v-4.3h-1.9V13h-.001Zm-8.517 1.457-.614 2.059h1.262l-.648-2.059Z"/></svg>',x_='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M12.68 13.74h-.001l4.209 4.208a1 1 0 1 0 1.414-1.414l-4.267-4.268a6 6 0 1 0-1.355 1.474ZM13 9a4 4 0 1 1-8 0 4 4 0 0 1 8 0Z"/></svg>',y_='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M11.463 5.187a.888.888 0 1 1 1.254 1.255L9.16 10l3.557 3.557a.888.888 0 1 1-1.254 1.255L7.26 10.61a.888.888 0 0 1 .16-1.382l4.043-4.042z"/></svg>',__='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M8.537 14.813a.888.888 0 1 1-1.254-1.255L10.84 10 7.283 6.442a.888.888 0 1 1 1.254-1.255L12.74 9.39a.888.888 0 0 1-.16 1.382l-4.043 4.042z"/></svg>',C_='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M6.66 9.118a.693.693 0 0 1 .956.032l3.65 3.411 2.422-2.238a.695.695 0 0 1 .945 0L17.5 13.6V2.5h-15v11.1l4.16-4.482ZM17.8 1c.652 0 1.2.47 1.2 1.1v14.362c0 .64-.532 1.038-1.184 1.038H2.184C1.532 17.5 1 17.103 1 16.462V2.1C1 1.47 1.537 1 2.2 1h15.6Zm-5.655 6a2.128 2.128 0 0 1 .157-2.364A2.133 2.133 0 1 1 12.145 7Z"/></svg>',A_='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M1.201 1C.538 1 0 1.47 0 2.1v14.363c0 .64.534 1.037 1.186 1.037h9.494a2.97 2.97 0 0 1-.414-.287 2.998 2.998 0 0 1-1.055-2.03 3.003 3.003 0 0 1 .693-2.185l.383-.455-.02.018-3.65-3.41a.695.695 0 0 0-.957-.034L1.5 13.6V2.5h15v5.535a2.97 2.97 0 0 1 1.412.932l.088.105V2.1c0-.63-.547-1.1-1.2-1.1H1.202Zm11.713 2.803a2.146 2.146 0 0 0-2.049 1.992 2.14 2.14 0 0 0 1.28 2.096 2.13 2.13 0 0 0 2.644-3.11 2.134 2.134 0 0 0-1.875-.978Z"/><path d="M15.522 19.1a.79.79 0 0 0 .79-.79v-5.373l2.059 2.455a.79.79 0 1 0 1.211-1.015l-3.352-3.995a.79.79 0 0 0-.995-.179.784.784 0 0 0-.299.221l-3.35 3.99a.79.79 0 1 0 1.21 1.017l1.936-2.306v5.185c0 .436.353.79.79.79Z"/><path d="M15.522 19.1a.79.79 0 0 0 .79-.79v-5.373l2.059 2.455a.79.79 0 1 0 1.211-1.015l-3.352-3.995a.79.79 0 0 0-.995-.179.784.784 0 0 0-.299.221l-3.35 3.99a.79.79 0 1 0 1.21 1.017l1.936-2.306v5.185c0 .436.353.79.79.79Z"/></svg>',S_='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M1.201 1c-.662 0-1.2.47-1.2 1.1v14.248c0 .64.533 1.152 1.185 1.152h6.623v-7.236L6.617 9.15a.694.694 0 0 0-.957-.033L1.602 13.55V2.553l14.798.003V9.7H18V2.1c0-.63-.547-1.1-1.2-1.1H1.202Zm11.723 2.805a2.094 2.094 0 0 0-1.621.832 2.127 2.127 0 0 0 1.136 3.357 2.13 2.13 0 0 0 2.611-1.506 2.133 2.133 0 0 0-.76-2.244 2.13 2.13 0 0 0-1.366-.44Z"/><path clip-rule="evenodd" d="M19.898 12.369v6.187a.844.844 0 0 1-.844.844h-8.719a.844.844 0 0 1-.843-.844v-7.312a.844.844 0 0 1 .843-.844h2.531a.843.843 0 0 1 .597.248l.838.852h4.75c.223 0 .441.114.6.272a.844.844 0 0 1 .247.597Zm-1.52.654-4.377.02-1.1-1.143H11v6h7.4l-.023-4.877Z"/></svg>',E_='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M1.201 1C.538 1 0 1.47 0 2.1v14.363c0 .64.534 1.037 1.186 1.037h7.029a5.401 5.401 0 0 1 .615-4.338l.762-1.232-2.975-2.78a.696.696 0 0 0-.957-.033L1.5 13.6V2.5h15v6.023c.449.131.887.32 1.307.573l.058.033c.046.028.09.057.135.086V2.1c0-.63-.547-1.1-1.2-1.1H1.202Zm11.713 2.803a2.15 2.15 0 0 0-1.611.834 2.118 2.118 0 0 0-.438 1.158 2.14 2.14 0 0 0 1.277 2.096 2.132 2.132 0 0 0 2.645-3.11 2.13 2.13 0 0 0-1.873-.978Z"/><path d="M16.63 10.294a3.003 3.003 0 0 0-4.142.887l-.117.177a.647.647 0 0 0-.096.492.664.664 0 0 0 .278.418.7.7 0 0 0 .944-.234 1.741 1.741 0 0 1 2.478-.463 1.869 1.869 0 0 1 .476 2.55.637.637 0 0 0-.071.5.646.646 0 0 0 .309.396.627.627 0 0 0 .869-.19l.027-.041a3.226 3.226 0 0 0-.956-4.492Zm-6.061 3.78-.044.066a3.228 3.228 0 0 0 .82 4.403 3.005 3.005 0 0 0 4.275-.798l.13-.197a.626.626 0 0 0 .092-.475.638.638 0 0 0-.268-.402.713.713 0 0 0-.99.26l-.018.029a1.741 1.741 0 0 1-2.477.461 1.87 1.87 0 0 1-.475-2.55l.029-.047a.647.647 0 0 0 .086-.485.66.66 0 0 0-.275-.408l-.04-.027a.609.609 0 0 0-.845.17Z"/><path d="M15.312 13.925c.24-.36.154-.838-.19-1.067-.346-.23-.82-.124-1.059.236l-1.268 1.907c-.239.36-.153.838.192 1.067.345.23.818.123 1.057-.236l1.268-1.907Z"/></svg>',T_='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m9.239 13.938-2.88-1.663a.75.75 0 0 1 .75-1.3L9 12.067V4.75a.75.75 0 1 1 1.5 0v7.318l1.89-1.093a.75.75 0 0 1 .75 1.3l-2.879 1.663a.752.752 0 0 1-.511.187.752.752 0 0 1-.511-.187zM4.25 17a.75.75 0 1 1 0-1.5h10.5a.75.75 0 0 1 0 1.5H4.25z"/></svg>',I_='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M9.75 11.875a.752.752 0 0 1 .508.184l2.883 1.666a.75.75 0 0 1-.659 1.344l-.091-.044-1.892-1.093.001 4.318a.75.75 0 1 1-1.5 0v-4.317l-1.89 1.092a.75.75 0 0 1-.75-1.3l2.879-1.663a.752.752 0 0 1 .51-.187zM15.25 9a.75.75 0 1 1 0 1.5H4.75a.75.75 0 1 1 0-1.5h10.5zM9.75.375a.75.75 0 0 1 .75.75v4.318l1.89-1.093.092-.045a.75.75 0 0 1 .659 1.344l-2.883 1.667a.752.752 0 0 1-.508.184.752.752 0 0 1-.511-.187L6.359 5.65a.75.75 0 0 1 .75-1.299L9 5.442V1.125a.75.75 0 0 1 .75-.75z"/></svg>',P_='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m10.261 7.062 2.88 1.663a.75.75 0 0 1-.75 1.3L10.5 8.933v7.317a.75.75 0 1 1-1.5 0V8.932l-1.89 1.093a.75.75 0 0 1-.75-1.3l2.879-1.663a.752.752 0 0 1 .511-.187.752.752 0 0 1 .511.187zM15.25 4a.75.75 0 1 1 0 1.5H4.75a.75.75 0 0 1 0-1.5h10.5z"/></svg>',M_='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 3.75c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0 8c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0 4c0 .414.336.75.75.75h9.929a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0-8c0 .414.336.75.75.75h9.929a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75z"/></svg>',L_='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 3.75c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0 8c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm2.286 4c0 .414.336.75.75.75h9.928a.75.75 0 1 0 0-1.5H5.036a.75.75 0 0 0-.75.75zm0-8c0 .414.336.75.75.75h9.928a.75.75 0 1 0 0-1.5H5.036a.75.75 0 0 0-.75.75z"/></svg>',R_='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M18 3.75a.75.75 0 0 1-.75.75H2.75a.75.75 0 1 1 0-1.5h14.5a.75.75 0 0 1 .75.75zm0 8a.75.75 0 0 1-.75.75H2.75a.75.75 0 1 1 0-1.5h14.5a.75.75 0 0 1 .75.75zm0 4a.75.75 0 0 1-.75.75H7.321a.75.75 0 1 1 0-1.5h9.929a.75.75 0 0 1 .75.75zm0-8a.75.75 0 0 1-.75.75H7.321a.75.75 0 1 1 0-1.5h9.929a.75.75 0 0 1 .75.75z"/></svg>',N_='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 3.75c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0 8c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0 4c0 .414.336.75.75.75h9.929a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0-8c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75z"/></svg>',V_='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path opacity=".5" d="M2 3h16v1.5H2zm0 12h16v1.5H2z"/><path d="M12.003 7v5.5a1 1 0 0 1-1 1H2.996a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h8.007a1 1 0 0 1 1 1zm-1.506.5H3.5V12h6.997V7.5z"/></svg>',D_='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path opacity=".5" d="M2 3h16v1.5H2zm0 12h16v1.5H2z"/><path d="M15.003 7v5.5a1 1 0 0 1-1 1H5.996a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h8.007a1 1 0 0 1 1 1zm-1.506.5H6.5V12h6.997V7.5z"/></svg>',B_='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path opacity=".5" d="M2 3h16v1.5H2zm0 12h16v1.5H2z"/><path d="M18.003 7v5.5a1 1 0 0 1-1 1H8.996a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h8.007a1 1 0 0 1 1 1zm-1.506.5H9.5V12h6.997V7.5z"/></svg>',z_='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path opacity=".5" d="M2 3h16v1.5H2zm0 12h16v1.5H2z"/><path d="M18 7v5.5a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1zm-1.505.5H3.504V12h12.991V7.5z"/></svg>',F_='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path opacity=".5" d="M2 3h16v1.5H2zm11.5 9H18v1.5h-4.5zM2 15h16v1.5H2z"/><path d="M12.003 7v5.5a1 1 0 0 1-1 1H2.996a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h8.007a1 1 0 0 1 1 1zm-1.506.5H3.5V12h6.997V7.5z"/></svg>',O_='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path opacity=".5" d="M2 3h16v1.5H2zm11.5 9H18v1.5h-4.5zm0-3H18v1.5h-4.5zm0-3H18v1.5h-4.5zM2 15h16v1.5H2z"/><path d="M12.003 7v5.5a1 1 0 0 1-1 1H2.996a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h8.007a1 1 0 0 1 1 1zm-1.506.5H3.5V12h6.997V7.5z"/></svg>',H_='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path opacity=".5" d="M2 3h16v1.5H2zm0 12h16v1.5H2zm0-9h5v1.5H2zm0 3h5v1.5H2zm0 3h5v1.5H2z"/><path d="M18.003 7v5.5a1 1 0 0 1-1 1H8.996a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h8.007a1 1 0 0 1 1 1zm-1.506.5H9.5V12h6.997V7.5z"/></svg>',W_='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M2.5 17v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zM1 15.5v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm0-2v1h-1v-1h1zm-19 0v1H0v-1h1zM14.5 2v1h-1V2h1zm2 0v1h-1V2h1zm2 0v1h-1V2h1zm-8 0v1h-1V2h1zm-2 0v1h-1V2h1zm-2 0v1h-1V2h1zm-2 0v1h-1V2h1zm8 0v1h-1V2h1zm-10 0v1h-1V2h1z"/><path d="M18.095 2H1.905C.853 2 0 2.895 0 4v12c0 1.105.853 2 1.905 2h16.19C19.147 18 20 17.105 20 16V4c0-1.105-.853-2-1.905-2zm0 1.5c.263 0 .476.224.476.5v12c0 .276-.213.5-.476.5H1.905a.489.489 0 0 1-.476-.5V4c0-.276.213-.5.476-.5h16.19z"/></svg>',j_='<svg xmlns="http://www.w3.org/2000/svg" xmlns:v="https://vecta.io/nano" viewBox="0 0 20 20"><path d="M.95 1.43a.95.95 0 0 0-.95.95v3.1a.95.95 0 0 0 .95.95h.75v6.3H.95a.95.95 0 0 0-.95.95v3.1a.95.95 0 0 0 .95.95h3.1a.95.95 0 0 0 .95-.95v-.65h1.932l1.539-1.5H5v-.95a.95.95 0 0 0-.95-.95H3.2v-6.3h.85A.95.95 0 0 0 5 5.48v-.55h10v.55a.95.95 0 0 0 .95.95h3.1a.95.95 0 0 0 .95-.95v-3.1a.95.95 0 0 0-.95-.95h-3.1a.95.95 0 0 0-.95.95v1.05H5V2.38a.95.95 0 0 0-.95-.95H.95zm.55 3.5v-2h2v2h-2zm0 9.3v2h2v-2h-2zm15-11.3v2h2v-2h-2z"/><path d="M8.139 20.004v-2.388l7.045-7.048 2.391 2.391-7.046 7.046h-2.39zm11.421-9.101a.64.64 0 0 1-.138.206l-1.165 1.168-2.391-2.391 1.167-1.163a.63.63 0 0 1 .206-.138.635.635 0 0 1 .243-.049.63.63 0 0 1 .449.187l1.491 1.488c.059.059.108.129.138.206s.049.16.049.243a.6.6 0 0 1-.049.243z"/></svg>',U_='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2.5 16.5v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1ZM1 15v1H0v-1h1Zm19 0v1h-1v-1h1ZM1 13v1H0v-1h1Zm19 0v1h-1v-1h1ZM1 11v1H0v-1h1Zm19 0v1h-1v-1h1ZM1 9v1H0V9h1Zm19 0v1h-1V9h1ZM1 7v1H0V7h1Zm19 0v1h-1V7h1ZM1 5v1H0V5h1Zm19 0v1h-1V5h1Zm0-2v1h-1V3h1ZM1 3v1H0V3h1Zm13.5-1.5v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm-8 0v1h-1v-1h1Zm-2 0v1h-1v-1h1Zm-2 0v1h-1v-1h1Zm-2 0v1h-1v-1h1Zm8 0v1h-1v-1h1Zm-10 0v1h-1v-1h1Z"/><path d="M13 5.5H2a2 2 0 0 0-2 2v8a2 2 0 0 0 2 2h11a2 2 0 0 0 2-2v-8a2 2 0 0 0-2-2ZM13 7a.5.5 0 0 1 .5.5v8a.5.5 0 0 1-.5.5H2a.5.5 0 0 1-.5-.5v-8A.5.5 0 0 1 2 7h11Z"/></svg>',G_='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2.5 16.5v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1ZM1 15v1H0v-1h1Zm19 0v1h-1v-1h1ZM1 13v1H0v-1h1Zm19 0v1h-1v-1h1ZM1 11v1H0v-1h1Zm19 0v1h-1v-1h1ZM1 9v1H0V9h1Zm19 0v1h-1V9h1ZM1 7v1H0V7h1Zm19 0v1h-1V7h1ZM1 5v1H0V5h1Zm19 0v1h-1V5h1Zm0-2v1h-1V3h1ZM1 3v1H0V3h1Zm13.5-1.5v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm-8 0v1h-1v-1h1Zm-2 0v1h-1v-1h1Zm-2 0v1h-1v-1h1Zm-2 0v1h-1v-1h1Zm8 0v1h-1v-1h1Zm-10 0v1h-1v-1h1Z"/><path d="M7 9.5H2a2 2 0 0 0-2 2v4a2 2 0 0 0 2 2h5a2 2 0 0 0 2-2v-4a2 2 0 0 0-2-2ZM7 11a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5H2a.5.5 0 0 1-.5-.5v-4A.5.5 0 0 1 2 11h5Z"/></svg>',$_='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2.5 16.5v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1ZM1 15v1H0v-1h1Zm19 0v1h-1v-1h1ZM1 13v1H0v-1h1Zm19 0v1h-1v-1h1ZM1 11v1H0v-1h1Zm19 0v1h-1v-1h1ZM1 9v1H0V9h1Zm19 0v1h-1V9h1ZM1 7v1H0V7h1Zm19 0v1h-1V7h1ZM1 5v1H0V5h1Zm19 0v1h-1V5h1Zm0-2v1h-1V3h1ZM1 3v1H0V3h1Zm13.5-1.5v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm-8 0v1h-1v-1h1Zm-2 0v1h-1v-1h1Zm-2 0v1h-1v-1h1Zm-2 0v1h-1v-1h1Zm8 0v1h-1v-1h1Zm-10 0v1h-1v-1h1Z"/><path d="M10 7.5H2a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2v-6a2 2 0 0 0-2-2ZM10 9a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-.5.5H2a.5.5 0 0 1-.5-.5v-6A.5.5 0 0 1 2 9h8Z"/></svg>',Y_='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m7.3 17.37-.061.088a1.518 1.518 0 0 1-.934.535l-4.178.663-.806-4.153a1.495 1.495 0 0 1 .187-1.058l.056-.086L8.77 2.639c.958-1.351 2.803-1.076 4.296-.03 1.497 1.047 2.387 2.693 1.433 4.055L7.3 17.37zM9.14 4.728l-5.545 8.346 3.277 2.294 5.544-8.346L9.14 4.728zM6.07 16.512l-3.276-2.295.53 2.73 2.746-.435zM9.994 3.506 13.271 5.8c.316-.452-.16-1.333-1.065-1.966-.905-.634-1.895-.78-2.212-.328zM8 18.5 9.375 17H19v1.5H8z"/></svg>',X_='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M6.999 2H15a1 1 0 0 1 0 2h-1.004v13a1 1 0 1 1-2 0V4H8.999v13a1 1 0 1 1-2 0v-7A4 4 0 0 1 3 6a4 4 0 0 1 3.999-4z"/></svg>',q_='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M3 10.423a6.5 6.5 0 0 1 6.056-6.408l.038.67C6.448 5.423 5.354 7.663 5.22 10H9c.552 0 .5.432.5.986v4.511c0 .554-.448.503-1 .503h-5c-.552 0-.5-.449-.5-1.003v-4.574zm8 0a6.5 6.5 0 0 1 6.056-6.408l.038.67c-2.646.739-3.74 2.979-3.873 5.315H17c.552 0 .5.432.5.986v4.511c0 .554-.448.503-1 .503h-5c-.552 0-.5-.449-.5-1.003v-4.574z"/></svg>',K_='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><circle cx="9.5" cy="4.5" r="1.5"/><circle cx="9.5" cy="10.5" r="1.5"/><circle cx="9.5" cy="16.5" r="1.5"/></svg>',Z_='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M5 3.25a1.5 1.5 0 1 0 3 0 1.5 1.5 0 1 0-3 0"/><path d="M12 3.25a1.5 1.5 0 1 0 3 0 1.5 1.5 0 1 0-3 0"/><path d="M5 10a1.5 1.5 0 1 0 3 0 1.5 1.5 0 1 0-3 0"/><path d="M12 10a1.5 1.5 0 1 0 3 0 1.5 1.5 0 1 0-3 0"/><path d="M5 16.75a1.5 1.5 0 1 0 3 0 1.5 1.5 0 1 0-3 0"/><path d="M12 16.75a1.5 1.5 0 1 0 3 0 1.5 1.5 0 1 0-3 0"/></svg>',Q_='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M10.187 17H5.773c-.637 0-1.092-.138-1.364-.415-.273-.277-.409-.718-.409-1.323V4.738c0-.617.14-1.062.419-1.332.279-.27.73-.406 1.354-.406h4.68c.69 0 1.288.041 1.793.124.506.083.96.242 1.36.478.341.197.644.447.906.75a3.262 3.262 0 0 1 .808 2.162c0 1.401-.722 2.426-2.167 3.075C15.05 10.175 16 11.315 16 13.01a3.756 3.756 0 0 1-2.296 3.504 6.1 6.1 0 0 1-1.517.377c-.571.073-1.238.11-2 .11zm-.217-6.217H7v4.087h3.069c1.977 0 2.965-.69 2.965-2.072 0-.707-.256-1.22-.768-1.537-.512-.319-1.277-.478-2.296-.478zM7 5.13v3.619h2.606c.729 0 1.292-.067 1.69-.2a1.6 1.6 0 0 0 .91-.765c.165-.267.247-.566.247-.897 0-.707-.26-1.176-.778-1.409-.519-.232-1.31-.348-2.375-.348H7z"/></svg>',J_='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M10.5 5.5H7v5h3.5a2.5 2.5 0 1 0 0-5zM5 3h6.5v.025a5 5 0 0 1 0 9.95V13H7v4a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1z"/></svg>',e1='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M10 2a1 1 0 0 0-1 1v6H3a1 1 0 1 0 0 2h6v6a1 1 0 1 0 2 0v-6h6a1 1 0 1 0 0-2h-6V3a1 1 0 0 0-1-1Z"/></svg>',t1='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M9.816 11.5 7.038 4.785 4.261 11.5h5.555Zm.62 1.5H3.641l-1.666 4.028H.312l5.789-14h1.875l5.789 14h-1.663L10.436 13Z"/><path d="m12.09 17-.534-1.292.848-1.971.545 1.319L12.113 17h-.023Zm1.142-5.187.545 1.319L15.5 9.13l1.858 4.316h-3.45l.398.965h3.467L18.887 17H20l-3.873-9h-1.254l-1.641 3.813Z"/></svg>',i1='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M19 4.5 14 0H3v12.673l.868-1.041c.185-.222.4-.402.632-.54V1.5h8v5h5v7.626a2.24 2.24 0 0 1 1.5.822V4.5ZM14 5V2l3.3 3H14Zm-3.692 12.5c.062.105.133.206.213.303L11.52 19H8v-.876a2.243 2.243 0 0 0 1.82-.624h.488Zm7.518-.657a.75.75 0 0 0-1.152-.96L15.5 17.29V12H14v5.29l-1.174-1.408a.75.75 0 0 0-1.152.96l2.346 2.816a.95.95 0 0 0 1.46 0l2.346-2.815Zm-15.056-.38a.75.75 0 0 1-.096-1.056l2.346-2.815a.95.95 0 0 1 1.46 0l2.346 2.815a.75.75 0 1 1-1.152.96L6.5 14.96V20H5v-5.04l-1.174 1.408a.75.75 0 0 1-1.056.096Z"/></svg>',o1='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m14.958 9.367-2.189 1.837a.75.75 0 0 0 .965 1.149l3.788-3.18a.747.747 0 0 0 .21-.284.75.75 0 0 0-.17-.945L13.77 4.762a.75.75 0 1 0-.964 1.15l2.331 1.955H6.22A.75.75 0 0 0 6 7.9a4 4 0 1 0 1.477 7.718l-.344-1.489A2.5 2.5 0 1 1 6.039 9.4l-.008-.032h8.927z"/></svg>',n1='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m5.042 9.367 2.189 1.837a.75.75 0 0 1-.965 1.149l-3.788-3.18a.747.747 0 0 1-.21-.284.75.75 0 0 1 .17-.945L6.23 4.762a.75.75 0 1 1 .964 1.15L4.863 7.866h8.917A.75.75 0 0 1 14 7.9a4 4 0 1 1-1.477 7.718l.344-1.489a2.5 2.5 0 1 0 1.094-4.73l.008-.032H5.042z"/></svg>',s1='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M7 5.75c0 .414.336.75.75.75h9.5a.75.75 0 1 0 0-1.5h-9.5a.75.75 0 0 0-.75.75zm-6 0C1 4.784 1.777 4 2.75 4c.966 0 1.75.777 1.75 1.75 0 .966-.777 1.75-1.75 1.75C1.784 7.5 1 6.723 1 5.75zm6 9c0 .414.336.75.75.75h9.5a.75.75 0 1 0 0-1.5h-9.5a.75.75 0 0 0-.75.75zm-6 0c0-.966.777-1.75 1.75-1.75.966 0 1.75.777 1.75 1.75 0 .966-.777 1.75-1.75 1.75-.966 0-1.75-.777-1.75-1.75z"/></svg>',r1='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M7 5.75c0 .414.336.75.75.75h9.5a.75.75 0 1 0 0-1.5h-9.5a.75.75 0 0 0-.75.75zM3.5 3v5H2V3.7H1v-1h2.5V3zM.343 17.857l2.59-3.257H2.92a.6.6 0 1 0-1.04 0H.302a2 2 0 1 1 3.995 0h-.001c-.048.405-.16.734-.333.988-.175.254-.59.692-1.244 1.312H4.3v1h-4l.043-.043zM7 14.75a.75.75 0 0 1 .75-.75h9.5a.75.75 0 1 1 0 1.5h-9.5a.75.75 0 0 1-.75-.75z"/></svg>',a1='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m2.315 14.705 2.224-2.24a.689.689 0 0 1 .963 0 .664.664 0 0 1 0 .949L2.865 16.07a.682.682 0 0 1-.112.089.647.647 0 0 1-.852-.051L.688 14.886a.635.635 0 0 1 0-.903.647.647 0 0 1 .91 0l.717.722zm5.185.045a.75.75 0 0 1 .75-.75h9.5a.75.75 0 1 1 0 1.5h-9.5a.75.75 0 0 1-.75-.75zM2.329 5.745l2.21-2.226a.689.689 0 0 1 .963 0 .664.664 0 0 1 0 .95L2.865 7.125a.685.685 0 0 1-.496.196.644.644 0 0 1-.468-.187L.688 5.912a.635.635 0 0 1 0-.903.647.647 0 0 1 .91 0l.73.736zM7.5 5.75A.75.75 0 0 1 8.25 5h9.5a.75.75 0 1 1 0 1.5h-9.5a.75.75 0 0 1-.75-.75z"/></svg>',l1='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M12.87 12.61a.75.75 0 0 1-.089.976l-.085.07-3.154 2.254 3.412 2.414a.75.75 0 0 1 .237.95l-.057.095a.75.75 0 0 1-.95.237l-.096-.058-4.272-3.022-.003-1.223 4.01-2.867a.75.75 0 0 1 1.047.174zm2.795-.231.095.057 4.011 2.867-.003 1.223-4.272 3.022-.095.058a.75.75 0 0 1-.88-.151l-.07-.086-.058-.095a.75.75 0 0 1 .15-.88l.087-.07 3.412-2.414-3.154-2.253-.085-.071a.75.75 0 0 1 .862-1.207zM16 0a2 2 0 0 1 2 2v9.354l-.663-.492-.837-.001V2a.5.5 0 0 0-.5-.5H2a.5.5 0 0 0-.5.5v15a.5.5 0 0 0 .5.5h3.118L7.156 19H2a2 2 0 0 1-2-2V2a2 2 0 0 1 2-2h14zM5.009 15l.003 1H3v-1h2.009zm2.188-2-1.471 1H5v-1h2.197zM10 11v.095L8.668 12H7v-1h3zm4-2v1H7V9h7zm0-2v1H7V7h7zm-4-2v1H5V5h5zM6 3v1H3V3h3z"/></svg>',c1='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M11.627 16.5zm5.873-.196zm0-7.001V8h-13v8.5h4.341c.191.54.457 1.044.785 1.5H2a1.5 1.5 0 0 1-1.5-1.5v-13A1.5 1.5 0 0 1 2 2h4.5a1.5 1.5 0 0 1 1.06.44L9.122 4H16a1.5 1.5 0 0 1 1.5 1.5v1A1.5 1.5 0 0 1 19 8v2.531a6.027 6.027 0 0 0-1.5-1.228zM16 6.5v-1H8.5l-2-2H2v13h1V8a1.5 1.5 0 0 1 1.5-1.5H16z"/><path d="M14.5 19.5a5 5 0 1 1 0-10 5 5 0 0 1 0 10zM15 14v-2h-1v2h-2v1h2v2h1v-2h2v-1h-2z"/></svg>',d1='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M19 9v10h-2v-8h-2V9h4zM4 8.5h5V4a1 1 0 0 1 1-1h.5a1 1 0 0 1 1 1v11.5a1 1 0 0 1-1 1H10a1 1 0 0 1-1-1V11H4v4.5a1 1 0 0 1-1 1h-.5a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1H3a1 1 0 0 1 1 1v4.5z"/></svg>',h1='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M3 8.5h5V4a1 1 0 0 1 1-1h.5a1 1 0 0 1 1 1v11.5a1 1 0 0 1-1 1H9a1 1 0 0 1-1-1V11H3v4.5a1 1 0 0 1-1 1h-.5a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1H2a1 1 0 0 1 1 1v4.5zm16.076 8.343V18.5h-6.252c.067-.626.27-1.22.61-1.78.338-.561 1.006-1.305 2.005-2.232.804-.749 1.297-1.257 1.479-1.523.245-.368.368-.732.368-1.092 0-.398-.107-.703-.32-.917-.214-.214-.51-.32-.886-.32-.372 0-.669.111-.889.336-.22.224-.347.596-.38 1.117l-1.778-.178c.106-.982.438-1.686.997-2.114.558-.427 1.257-.64 2.095-.64.918 0 1.64.247 2.164.742.525.495.787 1.11.787 1.847 0 .419-.075.818-.225 1.197-.15.378-.388.775-.714 1.19-.216.275-.605.67-1.168 1.187-.563.516-.92.859-1.07 1.028a3.11 3.11 0 0 0-.365.495h3.542z"/></svg>',u1='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M3 8.5h5V4a1 1 0 0 1 1-1h.5a1 1 0 0 1 1 1v11.5a1 1 0 0 1-1 1H9a1 1 0 0 1-1-1V11H3v4.5a1 1 0 0 1-1 1h-.5a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1H2a1 1 0 0 1 1 1v4.5zm9.989 7.53 1.726-.209c.055.44.203.777.445 1.01.24.232.533.349.876.349.368 0 .678-.14.93-.42.251-.279.377-.655.377-1.13 0-.448-.12-.803-.362-1.066a1.153 1.153 0 0 0-.882-.393c-.228 0-.501.044-.819.133l.197-1.453c.482.012.85-.092 1.105-.315.253-.222.38-.517.38-.885 0-.313-.093-.563-.279-.75-.186-.185-.434-.278-.743-.278a1.07 1.07 0 0 0-.78.317c-.216.212-.347.52-.394.927l-1.644-.28c.114-.562.287-1.012.517-1.348.231-.337.553-.601.965-.794a3.24 3.24 0 0 1 1.387-.289c.876 0 1.579.28 2.108.838.436.457.653.973.653 1.549 0 .817-.446 1.468-1.339 1.955.533.114.96.37 1.28.768.319.398.478.878.478 1.441 0 .817-.298 1.513-.895 2.088-.596.576-1.339.864-2.228.864-.842 0-1.54-.243-2.094-.727-.555-.485-.876-1.118-.965-1.901z"/></svg>',g1='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M3.5 8.5h5V4a1 1 0 0 1 1-1h.5a1 1 0 0 1 1 1v11.5a1 1 0 0 1-1 1h-.5a1 1 0 0 1-1-1V11h-5v4.5a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h.5a1 1 0 0 1 1 1v4.5zm13.55 10v-1.873h-3.81v-1.561l4.037-5.91h1.498v5.904h1.156v1.567h-1.156V18.5H17.05zm0-3.44v-3.18l-2.14 3.18h2.14z"/></svg>',m1='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M3.5 8.5h5V4a1 1 0 0 1 1-1h.5a1 1 0 0 1 1 1v11.5a1 1 0 0 1-1 1h-.5a1 1 0 0 1-1-1V11h-5v4.5a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h.5a1 1 0 0 1 1 1v4.5zm9.578 7.607 1.777-.184c.05.402.201.72.45.955a1.223 1.223 0 0 0 1.81-.101c.258-.303.387-.759.387-1.368 0-.572-.128-1-.384-1.286-.256-.285-.59-.428-1-.428-.512 0-.971.226-1.377.679l-1.448-.21.915-4.843h4.716v1.67H15.56l-.28 1.58a2.697 2.697 0 0 1 1.219-.298 2.68 2.68 0 0 1 2.012.863c.55.576.825 1.323.825 2.241a3.36 3.36 0 0 1-.666 2.05c-.605.821-1.445 1.232-2.52 1.232-.86 0-1.56-.23-2.101-.692-.542-.461-.866-1.081-.971-1.86z"/></svg>',f1='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M3.5 8.5h5V4a1 1 0 0 1 1-1h.5a1 1 0 0 1 1 1v11.5a1 1 0 0 1-1 1h-.5a1 1 0 0 1-1-1V11h-5v4.5a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h.5a1 1 0 0 1 1 1v4.5zm15.595 2.973-1.726.19c-.043-.355-.153-.617-.33-.787-.178-.169-.409-.253-.692-.253-.377 0-.695.169-.956.507-.26.339-.424 1.043-.492 2.114.445-.525.997-.787 1.657-.787.745 0 1.383.284 1.914.85.531.568.797 1.3.797 2.197 0 .952-.28 1.716-.838 2.291-.559.576-1.276.864-2.152.864-.94 0-1.712-.365-2.317-1.095-.605-.73-.908-1.927-.908-3.59 0-1.705.316-2.935.946-3.688.63-.753 1.45-1.13 2.457-1.13.706 0 1.291.198 1.755.594.463.395.758.97.885 1.723zm-4.043 3.891c0 .58.133 1.028.4 1.343.266.315.57.473.914.473.33 0 .605-.13.825-.388.22-.258.33-.68.33-1.27 0-.604-.118-1.047-.355-1.329a1.115 1.115 0 0 0-.89-.422c-.342 0-.632.134-.869.403s-.355.666-.355 1.19z"/></svg>',p1='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 9h16v2H2z"/></svg>',b1='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M17 0a2 2 0 0 1 2 2v7a1 1 0 0 1 1 1v5a1 1 0 0 1-.883.993l-.118.006L19 17a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2l-.001-1.001-.116-.006A1 1 0 0 1 0 15v-5a1 1 0 0 1 .999-1L1 2a2 2 0 0 1 2-2h14zm.499 15.999h-15L2.5 17a.5.5 0 0 0 .5.5h14a.5.5 0 0 0 .5-.5l-.001-1.001zm-3.478-6.013-.014.014H14v.007l-1.525 1.525-1.46-1.46-.015.013V10h-1v5h1v-3.53l1.428 1.43.048.043.131-.129L14 11.421V15h1v-5h-.965l-.014-.014zM2 10H1v5h1v-2h2v2h1v-5H4v2H2v-2zm7 0H6v1h1v4h1v-4h1v-1zm8 0h-1v5h3v-1h-2v-4zm0-8.5H3a.5.5 0 0 0-.5.5l-.001 6.999h15L17.5 2a.5.5 0 0 0-.5-.5zM10 7v1H4V7h6zm3-2v1H4V5h9zm-3-2v1H4V3h6z"/></svg>',w1='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 3.75c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm5 6c0 .414.336.75.75.75h9.5a.75.75 0 1 0 0-1.5h-9.5a.75.75 0 0 0-.75.75zM2.75 16.5h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 1 0 0 1.5zM1.632 6.95 5.02 9.358a.4.4 0 0 1-.013.661l-3.39 2.207A.4.4 0 0 1 1 11.892V7.275a.4.4 0 0 1 .632-.326z"/></svg>',k1='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 3.75c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm5 6c0 .414.336.75.75.75h9.5a.75.75 0 1 0 0-1.5h-9.5a.75.75 0 0 0-.75.75zM2.75 16.5h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 1 0 0 1.5zm1.618-9.55L.98 9.358a.4.4 0 0 0 .013.661l3.39 2.207A.4.4 0 0 0 5 11.892V7.275a.4.4 0 0 0-.632-.326z"/></svg>',v1='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M3 5.5v3h4v-3H3Zm0 4v3h4v-3H3Zm0 4v3h4v-3H3Zm5 3h4v-3H8v3Zm5 0h4v-3h-4v3Zm4-4v-3h-4v3h4Zm0-4v-3h-4v3h4Zm1.5 8A1.5 1.5 0 0 1 17 18H3a1.5 1.5 0 0 1-1.5-1.5V3c.222-.863 1.068-1.5 2-1.5h13c.932 0 1.778.637 2 1.5v13.5Zm-6.5-4v-3H8v3h4Zm0-4v-3H8v3h4Z"/></svg>',oe={bold:Q_,cancel:u_,caption:g_,check:m_,cog:f_,colorPalette:p_,eraser:b_,history:w_,image:C_,imageUpload:A_,imageAssetManager:S_,imageUrl:E_,lowVision:k_,textAlternative:v_,loupe:x_,previousArrow:y_,nextArrow:__,importExport:i1,paragraph:J_,plus:e1,text:t1,alignBottom:T_,alignMiddle:I_,alignTop:P_,alignLeft:M_,alignCenter:L_,alignRight:R_,alignJustify:N_,objectLeft:O_,objectCenter:D_,objectRight:H_,objectFullWidth:z_,objectInline:F_,objectBlockLeft:V_,objectBlockRight:B_,objectSizeCustom:j_,objectSizeFull:W_,objectSizeLarge:U_,objectSizeSmall:G_,objectSizeMedium:$_,pencil:Y_,pilcrow:X_,quote:q_,threeVerticalDots:K_,dragIndicator:Z_,redo:o1,undo:n1,bulletedList:s1,numberedList:r1,todoList:a1,codeBlock:l1,browseFiles:c1,heading1:d1,heading2:h1,heading3:u1,heading4:g1,heading5:m1,heading6:f1,horizontalLine:p1,html:b1,indent:w1,outdent:k1,table:v1};var qc=Xa(ip(),1),Kc=x1,op={red:0,orange:60,yellow:120,green:180,blue:240,purple:300};function x1(s){var e,t=[],i=1,o;if(typeof s=="string")if(qc.default[s])t=qc.default[s].slice(),o="rgb";else if(s==="transparent")i=0,o="rgb",t=[0,0,0];else if(/^#[A-Fa-f0-9]+$/.test(s)){var n=s.slice(1),r=n.length,a=r<=4;i=1,a?(t=[parseInt(n[0]+n[0],16),parseInt(n[1]+n[1],16),parseInt(n[2]+n[2],16)],r===4&&(i=parseInt(n[3]+n[3],16)/255)):(t=[parseInt(n[0]+n[1],16),parseInt(n[2]+n[3],16),parseInt(n[4]+n[5],16)],r===8&&(i=parseInt(n[6]+n[7],16)/255)),t[0]||(t[0]=0),t[1]||(t[1]=0),t[2]||(t[2]=0),o="rgb"}else if(e=/^((?:rgb|hs[lvb]|hwb|cmyk?|xy[zy]|gray|lab|lchu?v?|[ly]uv|lms)a?)\s*\(([^\)]*)\)/.exec(s)){var l=e[1],c=l==="rgb",n=l.replace(/a$/,"");o=n;var r=n==="cmyk"?4:n==="gray"?1:3;t=e[2].trim().split(/\s*[,\/]\s*|\s+/).map(function(g,m){if(/%$/.test(g))return m===r?parseFloat(g)/100:n==="rgb"?parseFloat(g)*255/100:parseFloat(g);if(n[m]==="h"){if(/deg$/.test(g))return parseFloat(g);if(op[g]!==void 0)return op[g]}return parseFloat(g)}),l===n&&t.push(1),i=c||t[r]===void 0?1:t[r],t=t.slice(0,r)}else s.length>10&&/[0-9](?:\s|\/)/.test(s)&&(t=s.match(/([0-9]+)/g).map(function(d){return parseFloat(d)}),o=s.match(/([a-z])/ig).join("").toLowerCase());else isNaN(s)?Array.isArray(s)||s.length?(t=[s[0],s[1],s[2]],o="rgb",i=s.length===4?s[3]:1):s instanceof Object&&(s.r!=null||s.red!=null||s.R!=null?(o="rgb",t=[s.r||s.red||s.R||0,s.g||s.green||s.G||0,s.b||s.blue||s.B||0]):(o="hsl",t=[s.h||s.hue||s.H||0,s.s||s.saturation||s.S||0,s.l||s.lightness||s.L||s.b||s.brightness]),i=s.a||s.alpha||s.opacity||1,s.opacity!=null&&(i/=100)):(o="rgb",t=[s>>>16,(s&65280)>>>8,s&255]);return{space:o,values:t,alpha:i}}var Op=Xa(hp(),1);var ji=(s,e=0,t=1)=>s>t?t:s<e?e:s,ze=(s,e=0,t=Math.pow(10,e))=>Math.round(t*s)/t;var jE={grad:360/400,turn:360,rad:360/(Math.PI*2)},up=s=>N1(Qr(s)),Qr=s=>(s[0]==="#"&&(s=s.substring(1)),s.length<6?{r:parseInt(s[0]+s[0],16),g:parseInt(s[1]+s[1],16),b:parseInt(s[2]+s[2],16),a:s.length===4?ze(parseInt(s[3]+s[3],16)/255,2):1}:{r:parseInt(s.substring(0,2),16),g:parseInt(s.substring(2,4),16),b:parseInt(s.substring(4,6),16),a:s.length===8?ze(parseInt(s.substring(6,8),16)/255,2):1});var gp=s=>R1(L1(s)),M1=({h:s,s:e,v:t,a:i})=>{let o=(200-e)*t/100;return{h:ze(s),s:ze(o>0&&o<200?e*t/100/(o<=100?o:200-o)*100:0),l:ze(o/2),a:ze(i,2)}};var Fs=s=>{let{h:e,s:t,l:i}=M1(s);return`hsl(${e}, ${t}%, ${i}%)`};var L1=({h:s,s:e,v:t,a:i})=>{s=s/360*6,e=e/100,t=t/100;let o=Math.floor(s),n=t*(1-e),r=t*(1-(s-o)*e),a=t*(1-(1-s+o)*e),l=o%6;return{r:ze([t,r,n,n,a,t][l]*255),g:ze([a,t,t,r,n,n][l]*255),b:ze([n,n,a,t,t,r][l]*255),a:ze(i,2)}};var Zr=s=>{let e=s.toString(16);return e.length<2?"0"+e:e},R1=({r:s,g:e,b:t,a:i})=>{let o=i<1?Zr(ze(i*255)):"";return"#"+Zr(s)+Zr(e)+Zr(t)+o},N1=({r:s,g:e,b:t,a:i})=>{let o=Math.max(s,e,t),n=o-Math.min(s,e,t),r=n?o===s?(e-t)/n:o===e?2+(t-s)/n:4+(s-e)/n:0;return{h:ze(60*(r<0?r+6:r)),s:ze(o?n/o*100:0),v:ze(o/255*100),a:i}};var Jc=(s,e)=>{if(s===e)return!0;for(let t in s)if(s[t]!==e[t])return!1;return!0};var mp=(s,e)=>s.toLowerCase()===e.toLowerCase()?!0:Jc(Qr(s),Qr(e));var fp={},Jr=s=>{let e=fp[s];return e||(e=document.createElement("template"),e.innerHTML=s,fp[s]=e),e},Os=(s,e,t)=>{s.dispatchEvent(new CustomEvent(e,{bubbles:!0,detail:t}))};var xn=!1,ed=s=>"touches"in s,V1=s=>xn&&!ed(s)?!1:(xn||(xn=ed(s)),!0),pp=(s,e)=>{let t=ed(e)?e.touches[0]:e,i=s.el.getBoundingClientRect();Os(s.el,"move",s.getMove({x:ji((t.pageX-(i.left+window.pageXOffset))/i.width),y:ji((t.pageY-(i.top+window.pageYOffset))/i.height)}))},D1=(s,e)=>{let t=e.keyCode;t>40||s.xy&&t<37||t<33||(e.preventDefault(),Os(s.el,"move",s.getMove({x:t===39?.01:t===37?-.01:t===34?.05:t===33?-.05:t===35?1:t===36?-1:0,y:t===40?.01:t===38?-.01:0},!0)))},yn=class{constructor(e,t,i,o){let n=Jr(`<div role="slider" tabindex="0" part="${t}" ${i}><div part="${t}-pointer"></div></div>`);e.appendChild(n.content.cloneNode(!0));let r=e.querySelector(`[part=${t}]`);r.addEventListener("mousedown",this),r.addEventListener("touchstart",this),r.addEventListener("keydown",this),this.el=r,this.xy=o,this.nodes=[r.firstChild,r]}set dragging(e){let t=e?document.addEventListener:document.removeEventListener;t(xn?"touchmove":"mousemove",this),t(xn?"touchend":"mouseup",this)}handleEvent(e){switch(e.type){case"mousedown":case"touchstart":if(e.preventDefault(),!V1(e)||!xn&&e.button!=0)return;this.el.focus(),pp(this,e),this.dragging=!0;break;case"mousemove":case"touchmove":e.preventDefault(),pp(this,e);break;case"mouseup":case"touchend":this.dragging=!1;break;case"keydown":D1(this,e);break}}style(e){e.forEach((t,i)=>{for(let o in t)this.nodes[i].style.setProperty(o,t[o])})}};var ea=class extends yn{constructor(e){super(e,"hue",'aria-label="Hue" aria-valuemin="0" aria-valuemax="360"',!1)}update({h:e}){this.h=e,this.style([{left:`${e/360*100}%`,color:Fs({h:e,s:100,v:100,a:1})}]),this.el.setAttribute("aria-valuenow",`${ze(e)}`)}getMove(e,t){return{h:t?ji(this.h+e.x*360,0,360):360*e.x}}};var ta=class extends yn{constructor(e){super(e,"saturation",'aria-label="Color"',!0)}update(e){this.hsva=e,this.style([{top:`${100-e.v}%`,left:`${e.s}%`,color:Fs(e)},{"background-color":Fs({h:e.h,s:100,v:100,a:1})}]),this.el.setAttribute("aria-valuetext",`Saturation ${ze(e.s)}%, Brightness ${ze(e.v)}%`)}getMove(e,t){return{s:t?ji(this.hsva.s+e.x*100,0,100):e.x*100,v:t?ji(this.hsva.v-e.y*100,0,100):Math.round(100-e.y*100)}}};var bp=':host{display:flex;flex-direction:column;position:relative;width:200px;height:200px;user-select:none;-webkit-user-select:none;cursor:default}:host([hidden]){display:none!important}[role=slider]{position:relative;touch-action:none;user-select:none;-webkit-user-select:none;outline:0}[role=slider]:last-child{border-radius:0 0 8px 8px}[part$=pointer]{position:absolute;z-index:1;box-sizing:border-box;width:28px;height:28px;display:flex;place-content:center center;transform:translate(-50%,-50%);background-color:#fff;border:2px solid #fff;border-radius:50%;box-shadow:0 2px 4px rgba(0,0,0,.2)}[part$=pointer]::after{content:"";width:100%;height:100%;border-radius:inherit;background-color:currentColor}[role=slider]:focus [part$=pointer]{transform:translate(-50%,-50%) scale(1.1)}';var wp="[part=hue]{flex:0 0 24px;background:linear-gradient(to right,red 0,#ff0 17%,#0f0 33%,#0ff 50%,#00f 67%,#f0f 83%,red 100%)}[part=hue-pointer]{top:50%;z-index:2}";var kp="[part=saturation]{flex-grow:1;border-color:transparent;border-bottom:12px solid #000;border-radius:8px 8px 0 0;background-image:linear-gradient(to top,#000,transparent),linear-gradient(to right,#fff,rgba(255,255,255,0));box-shadow:inset 0 0 0 1px rgba(0,0,0,.05)}[part=saturation-pointer]{z-index:3}";var ia=Symbol("same"),td=Symbol("color"),vp=Symbol("hsva"),id=Symbol("update"),xp=Symbol("parts"),yp=Symbol("css"),_p=Symbol("sliders"),oa=class extends HTMLElement{static get observedAttributes(){return["color"]}get[yp](){return[bp,wp,kp]}get[_p](){return[ta,ea]}get color(){return this[td]}set color(e){if(!this[ia](e)){let t=this.colorModel.toHsva(e);this[id](t),this[td]=e}}constructor(){super();let e=Jr(`<style>${this[yp].join("")}</style>`),t=this.attachShadow({mode:"open"});t.appendChild(e.content.cloneNode(!0)),t.addEventListener("move",this),this[xp]=this[_p].map(i=>new i(t))}connectedCallback(){if(this.hasOwnProperty("color")){let e=this.color;delete this.color,this.color=e}else this.color||(this.color=this.colorModel.defaultColor)}attributeChangedCallback(e,t,i){let o=this.colorModel.fromAttr(i);this[ia](o)||(this.color=o)}handleEvent(e){let t=this[vp],i=B(B({},t),e.detail);this[id](i);let o;!Jc(i,t)&&!this[ia](o=this.colorModel.fromHsva(i))&&(this[td]=o,Os(this,"color-changed",{value:o}))}[ia](e){return this.color&&this.colorModel.equal(e,this.color)}[id](e){this[vp]=e,this[xp].forEach(t=>t.update(e))}};var B1={defaultColor:"#000",toHsva:up,fromHsva:({h:s,s:e,v:t})=>gp({h:s,s:e,v:t,a:1}),equal:mp,fromAttr:s=>s},na=class extends oa{get colorModel(){return B1}};var ht=class extends we{_parentElement;constructor(e=[]){super(e,{idProperty:"viewUid"}),this.on("add",(t,i,o)=>{this._renderViewIntoCollectionParent(i,o)}),this.on("remove",(t,i)=>{i.element&&this._parentElement&&i.element.remove()}),this._parentElement=null}destroy(){this.map(e=>e.destroy())}setParent(e){this._parentElement=e;for(let t of this)this._renderViewIntoCollectionParent(t)}delegate(...e){if(!e.length||!F1(e))throw new E("ui-viewcollection-delegate-wrong-events",this);return{to:t=>{for(let i of this)for(let o of e)i.delegate(o).to(t);this.on("add",(i,o)=>{for(let n of e)o.delegate(n).to(t)}),this.on("remove",(i,o)=>{for(let n of e)o.stopDelegating(n,t)})}}}_renderViewIntoCollectionParent(e,t){e.isRendered||e.render(),e.element&&this._parentElement&&this._parentElement.insertBefore(e.element,this._parentElement.children[t])}remove(e){return super.remove(e)}};function F1(s){return s.every(e=>typeof e=="string")}var O1="http://www.w3.org/1999/xhtml",it=class extends ue(){ns;tag;text;attributes;children;eventListeners;_isRendered;_revertData;constructor(e){super(),Object.assign(this,Ap(Cp(e))),this._isRendered=!1,this._revertData=null}render(){let e=this._renderNode({intoFragment:!0});return this._isRendered=!0,e}apply(e){return this._revertData=Tp(),this._renderNode({node:e,intoFragment:!1,isApplying:!0,revertData:this._revertData}),e}revert(e){if(!this._revertData)throw new E("ui-template-revert-not-applied",[this,e]);this._revertTemplateFromNode(e,this._revertData)}*getViews(){function*e(t){if(t.children)for(let i of t.children)ca(i)?yield i:jd(i)&&(yield*Ae(e(i)))}yield*Ae(e(this))}static bind(e,t){return{to(i,o){return new cd({eventNameOrFunction:i,attribute:i,observable:e,emitter:t,callback:o})},if(i,o,n){return new la({observable:e,emitter:t,attribute:i,valueIfTrue:o,callback:n})}}}static extend(e,t){if(e._isRendered)throw new E("template-extend-render",[this,e]);Up(e,Ap(Cp(t)))}_renderNode(e){let t;if(e.node?t=this.tag&&this.text:t=this.tag?this.text:!this.text,t)throw new E("ui-template-wrong-syntax",this);return this.text?this._renderText(e):this._renderElement(e)}_renderElement(e){let t=e.node;return t||(t=e.node=document.createElementNS(this.ns||O1,this.tag)),this._renderAttributes(e),this._renderElementChildren(e),this._setUpListeners(e),t}_renderText(e){let t=e.node;return t?e.revertData.text=t.textContent:t=e.node=document.createTextNode(""),aa(this.text)?this._bindToObservable({schema:this.text,updater:W1(t),data:e}):t.textContent=this.text.join(""),t}_renderAttributes(e){if(!this.attributes)return;let t=e.node,i=e.revertData;for(let o in this.attributes){let n=t.getAttribute(o),r=this.attributes[o];i&&(i.attributes[o]=n);let a=Ep(r)?r[0].ns:null;if(aa(r)){let l=Ep(r)?r[0].value:r;i&&Ip(o)&&l.unshift(n),this._bindToObservable({schema:l,updater:j1(t,o,a),data:e})}else if(o=="style"&&typeof r[0]!="string")this._renderStyleAttribute(r[0],e);else{i&&n&&Ip(o)&&r.unshift(n);let l=r.map(c=>c&&(c.value||c)).reduce((c,d)=>c.concat(d),[]).reduce(jp,"");An(l)||t.setAttributeNS(a,o,l)}}}_renderStyleAttribute(e,t){let i=t.node;for(let o in e){let n=e[o];aa(n)?this._bindToObservable({schema:[n],updater:U1(i,o),data:t}):i.style[o]=n}}_renderElementChildren(e){let t=e.node,i=e.intoFragment?document.createDocumentFragment():t,o=e.isApplying,n=0;for(let r of this.children)if(Ud(r)){if(!o){r.setParent(t);for(let a of r)i.appendChild(a.element)}}else if(ca(r))o||(r.isRendered||r.render(),i.appendChild(r.element));else if(ni(r))i.appendChild(r);else if(o){let a=e.revertData,l=Tp();a.children.push(l),r._renderNode({intoFragment:!1,node:i.childNodes[n++],isApplying:!0,revertData:l})}else i.appendChild(r.render());e.intoFragment&&t.appendChild(i)}_setUpListeners(e){if(this.eventListeners)for(let t in this.eventListeners){let i=this.eventListeners[t].map(o=>{let[n,r]=t.split("@");return o.activateDomEventListener(n,r,e)});e.revertData&&e.revertData.bindings.push(i)}}_bindToObservable({schema:e,updater:t,data:i}){let o=i.revertData;Hp(e,t,i);let n=e.filter(r=>!An(r)).filter(r=>r.observable).map(r=>r.activateAttributeListener(e,t,i));o&&o.bindings.push(n)}_revertTemplateFromNode(e,t){for(let o of t.bindings)for(let n of o)n();if(t.text){e.textContent=t.text;return}let i=e;for(let o in t.attributes){let n=t.attributes[o];n===null?i.removeAttribute(o):i.setAttribute(o,n)}for(let o=0;o<t.children.length;++o)this._revertTemplateFromNode(i.childNodes[o],t.children[o])}},Co=class{attribute;observable;emitter;callback;constructor(e){this.attribute=e.attribute,this.observable=e.observable,this.emitter=e.emitter,this.callback=e.callback}getValue(e){let t=this.observable[this.attribute];return this.callback?this.callback(t,e):t}activateAttributeListener(e,t,i){let o=()=>Hp(e,t,i);return this.emitter.listenTo(this.observable,`change:${this.attribute}`,o),()=>{this.emitter.stopListening(this.observable,`change:${this.attribute}`,o)}}},cd=class extends Co{eventNameOrFunction;constructor(e){super(e),this.eventNameOrFunction=e.eventNameOrFunction}activateDomEventListener(e,t,i){let o=(n,r)=>{(!t||r.target.matches(t))&&(typeof this.eventNameOrFunction=="function"?this.eventNameOrFunction(r):this.observable.fire(this.eventNameOrFunction,r))};return this.emitter.listenTo(i.node,e,o),()=>{this.emitter.stopListening(i.node,e,o)}}},la=class extends Co{valueIfTrue;constructor(e){super(e),this.valueIfTrue=e.valueIfTrue}getValue(e){let t=super.getValue(e);return An(t)?!1:this.valueIfTrue||!0}};function aa(s){return s?(s.value&&(s=s.value),Array.isArray(s)?s.some(aa):s instanceof Co):!1}function H1(s,e){return s.map(t=>t instanceof Co?t.getValue(e):t)}function Hp(s,e,{node:t}){let i=H1(s,t),o;s.length==1&&s[0]instanceof la?o=i[0]:o=i.reduce(jp,""),An(o)?e.remove():e.set(o)}function W1(s){return{set(e){s.textContent=e},remove(){s.textContent=""}}}function j1(s,e,t){return{set(i){s.setAttributeNS(t,e,i)},remove(){s.removeAttributeNS(t,e)}}}function U1(s,e){return{set(t){s.style[e]=t},remove(){s.style[e]=null}}}function Cp(s){return Yo(s,t=>{if(t&&(t instanceof Co||jd(t)||ca(t)||Ud(t)))return t})}function Ap(s){if(typeof s=="string"?s=Y1(s):s.text&&X1(s),s.on&&(s.eventListeners=$1(s.on),delete s.on),!s.text){s.attributes&&G1(s.attributes);let e=[];if(s.children)if(Ud(s.children))e.push(s.children);else for(let t of s.children)jd(t)||ca(t)||ni(t)?e.push(t):e.push(new it(t));s.children=e}return s}function G1(s){for(let e in s)s[e].value&&(s[e].value=Pe(s[e].value)),Wp(s,e)}function $1(s){for(let e in s)Wp(s,e);return s}function Y1(s){return{text:[s]}}function X1(s){s.text=Pe(s.text)}function Wp(s,e){s[e]=Pe(s[e])}function jp(s,e){return An(e)?s:An(s)?e:`${s} ${e}`}function Sp(s,e){for(let t in e)s[t]?s[t].push(...e[t]):s[t]=e[t]}function Up(s,e){if(e.attributes&&(s.attributes||(s.attributes={}),Sp(s.attributes,e.attributes)),e.eventListeners&&(s.eventListeners||(s.eventListeners={}),Sp(s.eventListeners,e.eventListeners)),e.text&&s.text.push(...e.text),e.children&&e.children.length){if(s.children.length!=e.children.length)throw new E("ui-template-extend-children-mismatch",s);let t=0;for(let i of e.children)Up(s.children[t++],i)}}function An(s){return!s&&s!==0}function ca(s){return s instanceof G}function jd(s){return s instanceof it}function Ud(s){return s instanceof ht}function Ep(s){return Bt(s[0])&&s[0].ns}function Tp(){return{children:[],bindings:[],attributes:{}}}function Ip(s){return s=="class"||s=="style"}var G=class extends Ge(ge()){element;isRendered;locale;t;template;_viewCollections;_unboundChildren;_bindTemplate;constructor(e){super(),this.element=null,this.isRendered=!1,this.locale=e,this.t=e&&e.t,this._viewCollections=new we,this._unboundChildren=this.createCollection(),this._viewCollections.on("add",(t,i)=>{i.locale=e,i.t=e&&e.t}),this.decorate("render")}get bindTemplate(){return this._bindTemplate?this._bindTemplate:this._bindTemplate=it.bind(this,this)}createCollection(e){let t=new ht(e);return this._viewCollections.add(t),t}registerChild(e){pt(e)||(e=[e]);for(let t of e)this._unboundChildren.add(t)}deregisterChild(e){pt(e)||(e=[e]);for(let t of e)this._unboundChildren.remove(t)}setTemplate(e){this.template=new it(e)}extendTemplate(e){it.extend(this.template,e)}render(){if(this.isRendered)throw new E("ui-view-render-already-rendered",this);this.template&&(this.element=this.template.render(),this.registerChild(this.template.getViews())),this.isRendered=!0}destroy(){this.stopListening(),this._viewCollections.map(e=>e.destroy()),this.template&&this.template._revertData&&this.template.revert(this.element)}};function To({emitter:s,activator:e,callback:t,contextElements:i}){s.listenTo(document,"mousedown",(o,n)=>{if(!e())return;let r=typeof n.composedPath=="function"?n.composedPath():[],a=typeof i=="function"?i():i;for(let l of a)if(l.contains(n.target)||r.includes(l))return;t()})}function js({keystrokeHandler:s,focusTracker:e,gridItems:t,numberOfColumns:i,uiLanguageDirection:o}){let n=typeof i=="number"?()=>i:i;s.set("arrowright",r((c,d)=>o==="rtl"?l(c,d.length):a(c,d.length))),s.set("arrowleft",r((c,d)=>o==="rtl"?a(c,d.length):l(c,d.length))),s.set("arrowup",r((c,d)=>{let h=c-n();return h<0&&(h=c+n()*Math.floor(d.length/n()),h>d.length-1&&(h-=n())),h})),s.set("arrowdown",r((c,d)=>{let h=c+n();return h>d.length-1&&(h=c%n()),h}));function r(c){return d=>{let h=t.find(p=>p.element===e.focusedElement),g=t.getIndex(h),m=c(g,t);t.get(m).focus(),d.stopPropagation(),d.preventDefault()}}function a(c,d){return c===d-1?0:c+1}function l(c,d){return c===0?d-1:c-1}}var Io=(()=>{class s extends G{static presentationalAttributeNames=["alignment-baseline","baseline-shift","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-rendering","cursor","direction","display","dominant-baseline","fill","fill-opacity","fill-rule","filter","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","image-rendering","letter-spacing","lighting-color","marker-end","marker-mid","marker-start","mask","opacity","overflow","paint-order","pointer-events","shape-rendering","stop-color","stop-opacity","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","text-anchor","text-decoration","text-overflow","text-rendering","transform","unicode-bidi","vector-effect","visibility","white-space","word-spacing","writing-mode"];constructor(){super();let t=this.bindTemplate;this.set("content",""),this.set("viewBox","0 0 20 20"),this.set("fillColor",""),this.set("isColorInherited",!0),this.set("isVisible",!0),this.setTemplate({tag:"svg",ns:"http://www.w3.org/2000/svg",attributes:{class:["ck","ck-icon",t.if("isVisible","ck-hidden",i=>!i),"ck-reset_all-excluded",t.if("isColorInherited","ck-icon_inherit-color")],viewBox:t.to("viewBox")}})}render(){super.render(),this._updateXMLContent(),this._colorFillPaths(),this.on("change:content",()=>{this._updateXMLContent(),this._colorFillPaths()}),this.on("change:fillColor",()=>{this._colorFillPaths()})}_updateXMLContent(){if(this.content){let i=new DOMParser().parseFromString(this.content.trim(),"image/svg+xml").querySelector("svg"),o=i.getAttribute("viewBox");o&&(this.viewBox=o);for(let{name:n,value:r}of Array.from(i.attributes))s.presentationalAttributeNames.includes(n)&&this.element.setAttribute(n,r);for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);for(;i.childNodes.length>0;)this.element.appendChild(i.childNodes[0])}}_colorFillPaths(){this.fillColor&&this.element.querySelectorAll(".ck-icon__fill").forEach(t=>{t.style.fill=this.fillColor})}}return s})(),dd=class extends G{constructor(){super(),this.set({style:void 0,text:void 0,id:void 0});let e=this.bindTemplate;this.setTemplate({tag:"span",attributes:{class:["ck","ck-button__label"],style:e.to("style"),id:e.to("id")},children:[{text:e.to("text")}]})}},Z=class extends G{children;labelView;iconView;keystrokeView;_focusDelayed=null;constructor(e,t=new dd){super(e);let i=this.bindTemplate,o=We();this.set("ariaLabel",void 0),this.set("ariaLabelledBy",`ck-editor__aria-label_${o}`),this.set("class",void 0),this.set("labelStyle",void 0),this.set("icon",void 0),this.set("isEnabled",!0),this.set("isOn",!1),this.set("isVisible",!0),this.set("isToggleable",!1),this.set("keystroke",void 0),this.set("label",void 0),this.set("role",void 0),this.set("tabindex",-1),this.set("tooltip",!1),this.set("tooltipPosition","s"),this.set("type","button"),this.set("withText",!1),this.set("withKeystroke",!1),this.children=this.createCollection(),this.labelView=this._setupLabelView(t),this.iconView=new Io,this.iconView.extendTemplate({attributes:{class:"ck-button__icon"}}),this.keystrokeView=this._createKeystrokeView(),this.bind("_tooltipString").to(this,"tooltip",this,"label",this,"keystroke",this._getTooltipString.bind(this));let n={tag:"button",attributes:{class:["ck","ck-button",i.to("class"),i.if("isEnabled","ck-disabled",r=>!r),i.if("isVisible","ck-hidden",r=>!r),i.to("isOn",r=>r?"ck-on":"ck-off"),i.if("withText","ck-button_with-text"),i.if("withKeystroke","ck-button_with-keystroke")],role:i.to("role"),type:i.to("type",r=>r||"button"),tabindex:i.to("tabindex"),"aria-checked":i.to("ariaChecked"),"aria-label":i.to("ariaLabel"),"aria-labelledby":i.to("ariaLabelledBy"),"aria-disabled":i.if("isEnabled",!0,r=>!r),"aria-pressed":i.to("isOn",r=>this.isToggleable?String(!!r):!1),"data-cke-tooltip-text":i.to("_tooltipString"),"data-cke-tooltip-position":i.to("tooltipPosition")},children:this.children,on:{click:i.to(r=>{this.isEnabled?this.fire("execute"):r.preventDefault()})}};K.isSafari&&(this._focusDelayed||(this._focusDelayed=sn(()=>this.focus(),0)),n.on.mousedown=i.to(()=>{this._focusDelayed()}),n.on.mouseup=i.to(()=>{this._focusDelayed.cancel()})),this.setTemplate(n)}render(){super.render(),this.icon&&(this.iconView.bind("content").to(this,"icon"),this.children.add(this.iconView)),this.children.add(this.labelView),this.withKeystroke&&this.keystroke&&this.children.add(this.keystrokeView)}focus(){this.element.focus()}destroy(){this._focusDelayed&&this._focusDelayed.cancel(),super.destroy()}_setupLabelView(e){return e.bind("text","style","id").to(this,"label","labelStyle","ariaLabelledBy"),e}_createKeystrokeView(){let e=new G;return e.setTemplate({tag:"span",attributes:{class:["ck","ck-button__keystroke"]},children:[{text:this.bindTemplate.to("keystroke",t=>us(t))}]}),e}_getTooltipString(e,t,i){return e?typeof e=="string"?e:(i&&(i=us(i)),e instanceof Function?e(t,i):`${t}${i?` (${i})`:""}`):""}},Sn=class extends G{children;iconView;constructor(e,t={}){super(e);let i=this.bindTemplate;this.set("label",t.label||""),this.set("class",t.class||null),this.children=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-form__header",i.to("class")]},children:this.children}),t.icon&&(this.iconView=new Io,this.iconView.content=t.icon,this.children.add(this.iconView));let o=new G(e);o.setTemplate({tag:"h2",attributes:{class:["ck","ck-form__header__label"],role:"presentation"},children:[{text:i.to("label")}]}),this.children.add(o)}},vt=class extends ue(){focusables;focusTracker;keystrokeHandler;actions;constructor(e){if(super(),this.focusables=e.focusables,this.focusTracker=e.focusTracker,this.keystrokeHandler=e.keystrokeHandler,this.actions=e.actions,e.actions&&e.keystrokeHandler)for(let t in e.actions){let i=e.actions[t];typeof i=="string"&&(i=[i]);for(let o of i)e.keystrokeHandler.set(o,(n,r)=>{this[t](),r()})}this.on("forwardCycle",()=>this.focusFirst(),{priority:"low"}),this.on("backwardCycle",()=>this.focusLast(),{priority:"low"})}get first(){return this.focusables.find(od)||null}get last(){return this.focusables.filter(od).slice(-1)[0]||null}get next(){return this._getDomFocusableItem(1)}get previous(){return this._getDomFocusableItem(-1)}get current(){let e=null;return this.focusTracker.focusedElement===null?null:(this.focusables.find((t,i)=>{let o=t.element===this.focusTracker.focusedElement;return o&&(e=i),o}),e)}focusFirst(){this._focus(this.first,1)}focusLast(){this._focus(this.last,-1)}focusNext(){let e=this.next;if(e&&this.focusables.getIndex(e)===this.current){this.fire("forwardCycle");return}e===this.first?this.fire("forwardCycle"):this._focus(e,1)}focusPrevious(){let e=this.previous;if(e&&this.focusables.getIndex(e)===this.current){this.fire("backwardCycle");return}e===this.last?this.fire("backwardCycle"):this._focus(e,-1)}_focus(e,t){e&&this.focusTracker.focusedElement!==e.element&&e.focus(t)}_getDomFocusableItem(e){let t=this.focusables.length;if(!t)return null;let i=this.current;if(i===null)return this[e===1?"first":"last"];let o=this.focusables.get(i),n=(i+t+e)%t;do{let r=this.focusables.get(n);if(od(r)){o=r;break}n=(n+t+e)%t}while(n!==i);return o}};function od(s){return Us(s)&&Ai(s.element)}function Us(s){return"focus"in s&&typeof s.focus=="function"}function q1(s){return Us(s)&&"focusCycler"in s&&s.focusCycler instanceof vt}function K1(s){class e extends s{_onDragBound=this._onDrag.bind(this);_onDragEndBound=this._onDragEnd.bind(this);_lastDraggingCoordinates={x:0,y:0};constructor(...i){super(...i),this.on("render",()=>{this._attachListeners()}),this.set("isDragging",!1)}_attachListeners(){this.listenTo(this.element,"mousedown",this._onDragStart.bind(this)),this.listenTo(this.element,"touchstart",this._onDragStart.bind(this))}_attachDragListeners(){this.listenTo(j.document,"mouseup",this._onDragEndBound),this.listenTo(j.document,"touchend",this._onDragEndBound),this.listenTo(j.document,"mousemove",this._onDragBound),this.listenTo(j.document,"touchmove",this._onDragBound)}_detachDragListeners(){this.stopListening(j.document,"mouseup",this._onDragEndBound),this.stopListening(j.document,"touchend",this._onDragEndBound),this.stopListening(j.document,"mousemove",this._onDragBound),this.stopListening(j.document,"touchmove",this._onDragBound)}_onDragStart(i,o){if(!this._isHandleElementPressed(o))return;this._attachDragListeners();let n=0,r=0;o instanceof MouseEvent?(n=o.clientX,r=o.clientY):(n=o.touches[0].clientX,r=o.touches[0].clientY),this._lastDraggingCoordinates={x:n,y:r},this.isDragging=!0}_onDrag(i,o){if(!this.isDragging){this._detachDragListeners();return}let n=0,r=0;o instanceof MouseEvent?(n=o.clientX,r=o.clientY):(n=o.touches[0].clientX,r=o.touches[0].clientY),o.preventDefault(),this.fire("drag",{deltaX:Math.round(n-this._lastDraggingCoordinates.x),deltaY:Math.round(r-this._lastDraggingCoordinates.y)}),this._lastDraggingCoordinates={x:n,y:r}}_onDragEnd(){this._detachDragListeners(),this.isDragging=!1}_isHandleElementPressed(i){return this.dragHandleElement?this.dragHandleElement===i.target||i.target instanceof HTMLElement&&this.dragHandleElement.contains(i.target):!1}}return e}var hd=class extends G{children;keystrokes;focusCycler;_focusTracker;_focusables;constructor(e){super(e),this.children=this.createCollection(),this.keystrokes=new Le,this._focusTracker=new Ie,this._focusables=new ht,this.focusCycler=new vt({focusables:this._focusables,focusTracker:this._focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-dialog__actions"]},children:this.children})}render(){super.render(),this.keystrokes.listenTo(this.element)}setButtons(e){for(let t of e){let i=new Z(this.locale),o;i.on("execute",()=>t.onExecute()),t.onCreate&&t.onCreate(i);for(o in t)o!="onExecute"&&o!="onCreate"&&i.set(o,t[o]);this.children.add(i)}this._updateFocusCyclableItems()}focus(e){e===-1?this.focusCycler.focusLast():this.focusCycler.focusFirst()}_updateFocusCyclableItems(){Array.from(this.children).forEach(e=>{this._focusables.add(e),this._focusTracker.add(e.element)})}},ud=class extends G{children;constructor(e){super(e),this.children=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-dialog__content"]},children:this.children})}reset(){for(;this.children.length;)this.children.remove(0)}},Ut={SCREEN_CENTER:"screen-center",EDITOR_CENTER:"editor-center",EDITOR_TOP_SIDE:"editor-top-side",EDITOR_TOP_CENTER:"editor-top-center",EDITOR_BOTTOM_CENTER:"editor-bottom-center",EDITOR_ABOVE_CENTER:"editor-above-center",EDITOR_BELOW_CENTER:"editor-below-center"},Pp=Ci("px"),ka=(()=>{class s extends K1(G){parts;headerView;closeButtonView;actionsView;static defaultOffset=15;contentView;keystrokes;focusTracker;wasMoved=!1;_getCurrentDomRoot;_getViewportOffset;_focusables;_focusCycler;constructor(t,{getCurrentDomRoot:i,getViewportOffset:o}){super(t);let n=this.bindTemplate,r=t.t;this.set("className",""),this.set("ariaLabel",r("Editor dialog")),this.set("isModal",!1),this.set("position",Ut.SCREEN_CENTER),this.set("_isVisible",!1),this.set("_isTransparent",!1),this.set("_top",0),this.set("_left",0),this._getCurrentDomRoot=i,this._getViewportOffset=o,this.decorate("moveTo"),this.parts=this.createCollection(),this.keystrokes=new Le,this.focusTracker=new Ie,this._focusables=new ht,this._focusCycler=new vt({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-dialog-overlay",n.if("isModal","ck-dialog-overlay__transparent",a=>!a),n.if("_isVisible","ck-hidden",a=>!a)],tabindex:"-1"},children:[{tag:"div",attributes:{tabindex:"-1",class:["ck","ck-dialog",n.to("className")],role:"dialog","aria-label":n.to("ariaLabel"),style:{top:n.to("_top",a=>Pp(a)),left:n.to("_left",a=>Pp(a)),visibility:n.if("_isTransparent","hidden")}},children:this.parts}]})}render(){super.render(),this.keystrokes.set("Esc",(t,i)=>{this.fire("close",{source:"escKeyPress"}),i()}),this.on("drag",(t,{deltaX:i,deltaY:o})=>{this.wasMoved=!0,this.moveBy(i,o)}),this.listenTo(j.window,"resize",()=>{this._isVisible&&!this.wasMoved&&this.updatePosition()}),this.listenTo(j.document,"scroll",()=>{this._isVisible&&!this.wasMoved&&this.updatePosition()}),this.on("change:_isVisible",(t,i,o)=>{o&&(this._isTransparent=!0,setTimeout(()=>{this.updatePosition(),this._isTransparent=!1,this.focus()},10))}),this.keystrokes.listenTo(this.element)}get dragHandleElement(){return this.headerView?this.headerView.element:null}setupParts({icon:t,title:i,hasCloseButton:o=!0,content:n,actionButtons:r}){i&&(this.headerView=new Sn(this.locale,{icon:t}),o&&(this.closeButtonView=this._createCloseButton(),this.headerView.children.add(this.closeButtonView)),this.headerView.label=i,this.ariaLabel=i,this.parts.add(this.headerView,0)),n&&(n instanceof G&&(n=[n]),this.contentView=new ud(this.locale),this.contentView.children.addMany(n),this.parts.add(this.contentView)),r&&(this.actionsView=new hd(this.locale),this.actionsView.setButtons(r),this.parts.add(this.actionsView)),this._updateFocusCyclableItems()}focus(){this._focusCycler.focusFirst()}moveTo(t,i){let o=this._getViewportRect(),n=this._getDialogRect();t+n.width>o.right&&(t=o.right-n.width),t<o.left&&(t=o.left),i<o.top&&(i=o.top),this._moveTo(t,i)}_moveTo(t,i){this._left=t,this._top=i}moveBy(t,i){this.moveTo(this._left+t,this._top+i)}_moveOffScreen(){this._moveTo(-9999,-9999)}updatePosition(){if(!this.element||!this.element.parentNode)return;let t=this._getViewportRect(),i=this.position,o;this._getCurrentDomRoot()?o=this._getVisibleDomRootRect(t):i=Ut.SCREEN_CENTER;let n=s.defaultOffset,r=this._getDialogRect();switch(i){case Ut.EDITOR_TOP_SIDE:{if(o){let a=this.locale.contentLanguageDirection==="ltr"?o.right-r.width-n:o.left+n;this.moveTo(a,o.top+n)}else this._moveOffScreen();break}case Ut.EDITOR_CENTER:{o?this.moveTo(Math.round(o.left+o.width/2-r.width/2),Math.round(o.top+o.height/2-r.height/2)):this._moveOffScreen();break}case Ut.SCREEN_CENTER:{this.moveTo(Math.round((t.width-r.width)/2),Math.round((t.height-r.height)/2));break}case Ut.EDITOR_TOP_CENTER:{o?this.moveTo(Math.round(o.left+o.width/2-r.width/2),o.top+n):this._moveOffScreen();break}case Ut.EDITOR_BOTTOM_CENTER:{o?this.moveTo(Math.round(o.left+o.width/2-r.width/2),o.bottom-r.height-n):this._moveOffScreen();break}case Ut.EDITOR_ABOVE_CENTER:{o?this.moveTo(Math.round(o.left+o.width/2-r.width/2),o.top-r.height-n):this._moveOffScreen();break}case Ut.EDITOR_BELOW_CENTER:{o?this.moveTo(Math.round(o.left+o.width/2-r.width/2),o.bottom+n):this._moveOffScreen();break}}}_getVisibleDomRootRect(t){let i=new se(this._getCurrentDomRoot()).getVisible();if(i){if(i=t.getIntersection(i),!i)return null}else return null;return i}_getDialogRect(){return new se(this.element.firstElementChild)}_getViewportRect(){return Z1(this._getViewportOffset())}_updateFocusCyclableItems(){let t=[];if(this.contentView)for(let i of this.contentView.children)Us(i)&&t.push(i);this.actionsView&&t.push(this.actionsView),this.closeButtonView&&t.push(this.closeButtonView),t.forEach(i=>{this._focusables.add(i),this.focusTracker.add(i.element),q1(i)&&(this.listenTo(i.focusCycler,"forwardCycle",o=>{this._focusCycler.focusNext(),this._focusCycler.next!==this._focusCycler.focusables.get(this._focusCycler.current)&&o.stop()}),this.listenTo(i.focusCycler,"backwardCycle",o=>{this._focusCycler.focusPrevious(),this._focusCycler.previous!==this._focusCycler.focusables.get(this._focusCycler.current)&&o.stop()}))})}_createCloseButton(){let t=new Z(this.locale),i=this.locale.t;return t.set({label:i("Close"),tooltip:!0,icon:oe.cancel}),t.on("execute",()=>this.fire("close",{source:"closeButton"})),t}}return s})();function Z1(s){s=Object.assign({top:0,bottom:0,left:0,right:0},s);let e=new se(j.window);return e.top+=s.top,e.height-=s.top,e.bottom-=s.bottom,e.height-=s.bottom,e.left+=s.left,e.right-=s.right,e.width-=s.left+s.right,e}var va=(()=>{class s extends V{view;static _visibleDialogPlugin;_onHide;static get pluginName(){return"Dialog"}constructor(t){super(t);let i=t.t;this._initShowHideListeners(),this._initFocusToggler(),this._initMultiRootIntegration(),this.set("id",null),t.accessibility.addKeystrokeInfos({categoryId:"navigation",keystrokes:[{label:i("Move focus in and out of an active dialog window"),keystroke:"Ctrl+F6",mayRequireFn:!0}]})}_initShowHideListeners(){this.on("show",(t,i)=>{this._show(i)}),this.on("show",(t,i)=>{i.onShow&&i.onShow(this)},{priority:"low"}),this.on("hide",()=>{s._visibleDialogPlugin&&s._visibleDialogPlugin._hide()}),this.on("hide",()=>{this._onHide&&(this._onHide(this),this._onHide=void 0)},{priority:"low"})}_initFocusToggler(){let t=this.editor;t.keystrokes.set("Ctrl+F6",(i,o)=>{!this.isOpen||this.view.isModal||(this.view.focusTracker.isFocused?t.editing.view.focus():this.view.focus(),o())})}_initMultiRootIntegration(){let t=this.editor.model;t.document.on("change:data",()=>{if(!this.view)return;let i=t.document.differ.getChangedRoots();for(let o of i)o.state&&this.view.updatePosition()})}show(t){this.hide(),this.fire(`show:${t.id}`,t)}_show({id:t,icon:i,title:o,hasCloseButton:n=!0,content:r,actionButtons:a,className:l,isModal:c,position:d,onHide:h}){let g=this.editor;this.view=new ka(g.locale,{getCurrentDomRoot:()=>g.editing.view.getDomRoot(g.model.document.selection.anchor.root.rootName),getViewportOffset:()=>g.ui.viewportOffset});let m=this.view;m.on("close",()=>{this.hide()}),g.ui.view.body.add(m),g.ui.focusTracker.add(m.element),g.keystrokes.listenTo(m.element),d||(d=c?Ut.SCREEN_CENTER:Ut.EDITOR_CENTER),m.set({position:d,_isVisible:!0,className:l,isModal:c}),m.setupParts({icon:i,title:o,hasCloseButton:n,content:r,actionButtons:a}),this.id=t,h&&(this._onHide=h),this.isOpen=!0,s._visibleDialogPlugin=this}hide(){s._visibleDialogPlugin&&s._visibleDialogPlugin.fire(`hide:${s._visibleDialogPlugin.id}`)}_hide(){if(!this.view)return;let t=this.editor,i=this.view;i.contentView&&i.contentView.reset(),t.ui.view.body.remove(i),t.ui.focusTracker.remove(i.element),t.keystrokes.stopListening(i.element),i.destroy(),t.editing.view.focus(),this.id=null,this.isOpen=!1,s._visibleDialogPlugin=null}}return s})(),ae=class extends Z{constructor(e){super(e),this.set({withText:!0,withKeystroke:!0,tooltip:!1,role:"menuitem"}),this.extendTemplate({attributes:{class:["ck-menu-bar__menu__item__button"]}})}},Ii=class extends G{id;constructor(e){super(e),this.set("text",void 0),this.set("for",void 0),this.id=`ck-editor__label_${We()}`;let t=this.bindTemplate;this.setTemplate({tag:"label",attributes:{class:["ck","ck-label"],id:this.id,for:t.to("for")},children:[{text:t.to("text")}]})}},gd=class extends G{constructor(e,t){super(e);let i=e.t,o=new Ii;o.text=i("Help Contents. To close this dialog press ESC."),this.setTemplate({tag:"div",attributes:{class:["ck","ck-accessibility-help-dialog__content"],"aria-labelledby":o.id,role:"document",tabindex:-1},children:[et(document,"p",{},i("Below, you can find a list of keyboard shortcuts that can be used in the editor.")),...this._createCategories(Array.from(t.values())),o]})}focus(){this.element.focus()}_createCategories(e){return e.map(t=>{let i=[et(document,"h3",{},t.label),...Array.from(t.groups.values()).map(o=>this._createGroup(o)).flat()];return t.description&&i.splice(1,0,et(document,"p",{},t.description)),et(document,"section",{},i)})}_createGroup(e){let t=e.keystrokes.sort((o,n)=>o.label.localeCompare(n.label)).map(o=>this._createGroupRow(o)).flat(),i=[et(document,"dl",{},t)];return e.label&&i.unshift(et(document,"h4",{},e.label)),i}_createGroupRow(e){let t=this.locale.t,i=et(document,"dt"),o=et(document,"dd"),n=J1(e.keystroke),r=[];for(let a of n)r.push(a.map(Q1).join(""));return i.innerHTML=e.label,o.innerHTML=r.join(", ")+(e.mayRequireFn&&K.isMac?` ${t("(may require <kbd>Fn</kbd>)")}`:""),[i,o]}};function Q1(s){return us(s).split("+").map(e=>`<kbd>${e}</kbd>`).join("+")}function J1(s){return typeof s=="string"?[[s]]:typeof s[0]=="string"?[s]:s}var Mp='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M10 6.628a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3Z"/><path d="M8.5 9.125a.3.3 0 0 0-.253-.296L5.11 8.327a.75.75 0 1 1 .388-1.449l4.04.716c.267.072.624.08.893.009l4.066-.724a.75.75 0 1 1 .388 1.45l-3.132.5a.3.3 0 0 0-.253.296v1.357a.3.3 0 0 0 .018.102l1.615 4.438a.75.75 0 0 1-1.41.513l-1.35-3.71a.3.3 0 0 0-.281-.197h-.209a.3.3 0 0 0-.282.198l-1.35 3.711a.75.75 0 0 1-1.41-.513l1.64-4.509a.3.3 0 0 0 .019-.103V9.125Z"/><path clip-rule="evenodd" d="M10 18.5a8.5 8.5 0 1 1 0-17 8.5 8.5 0 0 1 0 17Zm0 1.5c5.523 0 10-4.477 10-10S15.523 0 10 0 0 4.477 0 10s4.477 10 10 10Z"/></svg>',da=class extends V{contentView=null;static get requires(){return[va]}static get pluginName(){return"AccessibilityHelp"}init(){let e=this.editor,t=e.locale.t;e.ui.componentFactory.add("accessibilityHelp",()=>{let i=this._createButton(Z);return i.set({tooltip:!0,withText:!1,label:t("Accessibility help")}),i}),e.ui.componentFactory.add("menuBar:accessibilityHelp",()=>{let i=this._createButton(ae);return i.label=t("Accessibility"),i}),e.keystrokes.set("Alt+0",(i,o)=>{this._showDialog(),o()}),this._setupRootLabels()}_createButton(e){let i=this.editor.locale,o=new e(i);return o.set({keystroke:"Alt+0",icon:Mp}),o.on("execute",()=>this._showDialog()),o}_setupRootLabels(){let e=this.editor,t=e.editing.view,i=e.t;e.ui.on("ready",()=>{t.change(n=>{for(let r of t.document.roots)o(n,r)}),e.on("addRoot",(n,r)=>{let a=e.editing.view.document.getRoot(r.rootName);t.change(l=>o(l,a))},{priority:"low"})});function o(n,r){let l=`${r.getAttribute("aria-label")}. ${i("Press %0 for help.",[us("Alt+0")])}`;n.setAttribute("aria-label",l,r)}}_showDialog(){let e=this.editor,t=e.plugins.get("Dialog"),i=e.locale.t;this.contentView||(this.contentView=new gd(e.locale,e.accessibility.keystrokeInfos)),t.show({id:"accessibilityHelp",className:"ck-accessibility-help-dialog",title:i("Accessibility help"),icon:Mp,hasCloseButton:!0,content:this.contentView})}},md=class extends ht{locale;_bodyCollectionContainer;constructor(e,t=[]){super(t),this.locale=e}get bodyCollectionContainer(){return this._bodyCollectionContainer}attachToDom(){this._bodyCollectionContainer=new it({tag:"div",attributes:{class:["ck","ck-reset_all","ck-body","ck-rounded-corners"],dir:this.locale.uiLanguageDirection},children:this}).render();let e=document.querySelector(".ck-body-wrapper");e||(e=et(document,"div",{class:"ck-body-wrapper"}),document.body.appendChild(e)),e.appendChild(this._bodyCollectionContainer)}detachFromDom(){super.destroy(),this._bodyCollectionContainer&&this._bodyCollectionContainer.remove();let e=document.querySelector(".ck-body-wrapper");e&&e.childElementCount==0&&e.remove()}},Ui=class extends Z{toggleSwitchView;constructor(e){super(e),this.isToggleable=!0,this.toggleSwitchView=this._createToggleView(),this.extendTemplate({attributes:{class:"ck-switchbutton"}})}render(){super.render(),this.children.add(this.toggleSwitchView)}_createToggleView(){let e=new G;return e.setTemplate({tag:"span",attributes:{class:["ck","ck-button__toggle"]},children:[{tag:"span",attributes:{class:["ck","ck-button__toggle__inner"]}}]}),e}},ha=class extends Z{buttonView;_fileInputView;constructor(e){super(e),this.buttonView=this,this._fileInputView=new fd(e),this._fileInputView.bind("acceptedType").to(this),this._fileInputView.bind("allowMultipleFiles").to(this),this._fileInputView.delegate("done").to(this),this.on("execute",()=>{this._fileInputView.open()}),this.extendTemplate({attributes:{class:"ck-file-dialog-button"}})}render(){super.render(),this.children.add(this._fileInputView)}},fd=class extends G{constructor(e){super(e),this.set("acceptedType",void 0),this.set("allowMultipleFiles",!1);let t=this.bindTemplate;this.setTemplate({tag:"input",attributes:{class:["ck-hidden"],type:"file",tabindex:"-1",accept:t.to("acceptedType"),multiple:t.to("allowMultipleFiles")},on:{change:t.to(()=>{this.element&&this.element.files&&this.element.files.length&&this.fire("done",this.element.files),this.element.value=""})}})}open(){this.element.click()}},Gd='<svg viewBox="0 0 10 10" xmlns="http://www.w3.org/2000/svg"><path d="M.941 4.523a.75.75 0 1 1 1.06-1.06l3.006 3.005 3.005-3.005a.75.75 0 1 1 1.06 1.06l-3.549 3.55a.75.75 0 0 1-1.168-.136L.941 4.523z"/></svg>';function $d(s,e){let t=s.t,i={Black:t("Black"),"Dim grey":t("Dim grey"),Grey:t("Grey"),"Light grey":t("Light grey"),White:t("White"),Red:t("Red"),Orange:t("Orange"),Yellow:t("Yellow"),"Light green":t("Light green"),Green:t("Green"),Aquamarine:t("Aquamarine"),Turquoise:t("Turquoise"),"Light blue":t("Light blue"),Blue:t("Blue"),Purple:t("Purple")};return e.map(o=>{let n=i[o.label];return n&&n!=o.label&&(o.label=n),o})}function Yd(s){return s.map(e2).filter(e=>!!e)}function e2(s){return typeof s=="string"?{model:s,label:s,hasBorder:!1,view:{name:"span",styles:{color:s}}}:{model:s.color,label:s.label||s.color,hasBorder:s.hasBorder===void 0?!1:s.hasBorder,view:{name:"span",styles:{color:`${s.color}`}}}}var t2='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path class="ck-icon__fill" d="M16.935 5.328a2 2 0 0 1 0 2.829l-7.778 7.778a2 2 0 0 1-2.829 0L3.5 13.107a1.999 1.999 0 1 1 2.828-2.829l.707.707a1 1 0 0 0 1.414 0l5.658-5.657a2 2 0 0 1 2.828 0z"/><path d="M14.814 6.035 8.448 12.4a1 1 0 0 1-1.414 0l-1.413-1.415A1 1 0 1 0 4.207 12.4l2.829 2.829a1 1 0 0 0 1.414 0l7.778-7.778a1 1 0 1 0-1.414-1.415z"/></svg>',ua=class extends Z{constructor(e){super(e);let t=this.bindTemplate;this.set("color",void 0),this.set("hasBorder",!1),this.icon=t2,this.extendTemplate({attributes:{style:{backgroundColor:t.to("color",i=>K.isMediaForcedColors?null:i)},class:["ck","ck-color-grid__tile",t.if("hasBorder","ck-color-selector__color-tile_bordered")]}})}render(){super.render(),this.iconView.fillColor="hsl(0, 0%, 100%)"}},ga=class extends G{columns;items;focusTracker;keystrokes;constructor(e,t){super(e);let i=t&&t.colorDefinitions?t.colorDefinitions:[];this.columns=t&&t.columns?t.columns:5;let o={gridTemplateColumns:`repeat( ${this.columns}, 1fr)`};this.set("selectedColor",void 0),this.items=this.createCollection(),this.focusTracker=new Ie,this.keystrokes=new Le,this.items.on("add",(n,r)=>{r.isOn=r.color===this.selectedColor}),i.forEach(n=>{let r=new ua;r.set({color:n.color,label:n.label,tooltip:!0,hasBorder:n.options.hasBorder}),r.on("execute",()=>{this.fire("execute",{value:n.color,hasBorder:n.options.hasBorder,label:n.label})}),this.items.add(r)}),this.setTemplate({tag:"div",children:this.items,attributes:{class:["ck","ck-color-grid"],style:o}}),this.on("change:selectedColor",(n,r,a)=>{for(let l of this.items)l.isOn=l.color===a})}focus(){this.items.length&&this.items.first.focus()}focusLast(){this.items.length&&this.items.last.focus()}render(){super.render();for(let e of this.items)this.focusTracker.add(e.element);this.items.on("add",(e,t)=>{this.focusTracker.add(t.element)}),this.items.on("remove",(e,t)=>{this.focusTracker.remove(t.element)}),this.keystrokes.listenTo(this.element),js({keystrokeHandler:this.keystrokes,focusTracker:this.focusTracker,gridItems:this.items,numberOfColumns:this.columns,uiLanguageDirection:this.locale&&this.locale.uiLanguageDirection})}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}};function Gp(s,e){if(!s)return"";let t=$p(s);if(!t)return"";if(t.space===e)return s;if(!s2(t))return"";let o=Op[t.space][e];if(!o)return"";let n=o(t.space==="hex"?t.hexValue:t.values);return n2(n,e)}function i2(s){if(!s)return"";let e=$p(s);return e?e.space==="hex"?e.hexValue:Gp(s,"hex"):"#000"}function o2(s,e){customElements.get(s)===void 0&&customElements.define(s,e)}function n2(s,e){switch(e){case"hex":return`#${s}`;case"rgb":return`rgb( ${s[0]}, ${s[1]}, ${s[2]} )`;case"hsl":return`hsl( ${s[0]}, ${s[1]}%, ${s[2]}% )`;case"hwb":return`hwb( ${s[0]}, ${s[1]}, ${s[2]} )`;case"lab":return`lab( ${s[0]}% ${s[1]} ${s[2]} )`;case"lch":return`lch( ${s[0]}% ${s[1]} ${s[2]} )`;default:return""}}function $p(s){if(s.startsWith("#")){let t=Kc(s);return{space:"hex",values:t.values,hexValue:s,alpha:t.alpha}}let e=Kc(s);return e.space?e:null}function s2(s){return Object.keys(Op).includes(s.space)}var Pi=class extends G{fieldView;labelView;statusView;fieldWrapperChildren;constructor(e,t){super(e);let i=`ck-labeled-field-view-${We()}`,o=`ck-labeled-field-view-status-${We()}`;this.fieldView=t(this,i,o),this.set("label",void 0),this.set("isEnabled",!0),this.set("isEmpty",!0),this.set("isFocused",!1),this.set("errorText",null),this.set("infoText",null),this.set("class",void 0),this.set("placeholder",void 0),this.labelView=this._createLabelView(i),this.statusView=this._createStatusView(o),this.fieldWrapperChildren=this.createCollection([this.fieldView,this.labelView]),this.bind("_statusText").to(this,"errorText",this,"infoText",(r,a)=>r||a);let n=this.bindTemplate;this.setTemplate({tag:"div",attributes:{class:["ck","ck-labeled-field-view",n.to("class"),n.if("isEnabled","ck-disabled",r=>!r),n.if("isEmpty","ck-labeled-field-view_empty"),n.if("isFocused","ck-labeled-field-view_focused"),n.if("placeholder","ck-labeled-field-view_placeholder"),n.if("errorText","ck-error")]},children:[{tag:"div",attributes:{class:["ck","ck-labeled-field-view__input-wrapper"]},children:this.fieldWrapperChildren},this.statusView]})}_createLabelView(e){let t=new Ii(this.locale);return t.for=e,t.bind("text").to(this,"label"),t}_createStatusView(e){let t=new G(this.locale),i=this.bindTemplate;return t.setTemplate({tag:"div",attributes:{class:["ck","ck-labeled-field-view__status",i.if("errorText","ck-labeled-field-view__status_error"),i.if("_statusText","ck-hidden",o=>!o)],id:e,role:i.if("errorText","alert")},children:[{text:i.to("_statusText")}]}),t}focus(e){this.fieldView.focus(e)}},pd=class extends G{focusTracker;constructor(e){super(e),this.set("value",void 0),this.set("id",void 0),this.set("placeholder",void 0),this.set("tabIndex",void 0),this.set("isReadOnly",!1),this.set("hasError",!1),this.set("ariaDescribedById",void 0),this.set("ariaLabel",void 0),this.focusTracker=new Ie,this.bind("isFocused").to(this.focusTracker),this.set("isEmpty",!0);let t=this.bindTemplate;this.setTemplate({tag:"input",attributes:{class:["ck","ck-input",t.if("isFocused","ck-input_focused"),t.if("isEmpty","ck-input-text_empty"),t.if("hasError","ck-error")],id:t.to("id"),placeholder:t.to("placeholder"),tabindex:t.to("tabIndex"),readonly:t.to("isReadOnly"),"aria-invalid":t.if("hasError",!0),"aria-describedby":t.to("ariaDescribedById"),"aria-label":t.to("ariaLabel")},on:{input:t.to((...i)=>{this.fire("input",...i),this._updateIsEmpty()}),change:t.to(this._updateIsEmpty.bind(this))}})}render(){super.render(),this.focusTracker.add(this.element),this._setDomElementValue(this.value),this._updateIsEmpty(),this.on("change:value",(e,t,i)=>{this._setDomElementValue(i),this._updateIsEmpty()})}destroy(){super.destroy(),this.focusTracker.destroy()}select(){this.element.select()}focus(){this.element.focus()}reset(){this.value=this.element.value="",this._updateIsEmpty()}_updateIsEmpty(){this.isEmpty=r2(this.element)}_setDomElementValue(e){this.element.value=!e&&e!==0?"":e}};function r2(s){return!s.value}var bd=class extends pd{constructor(e){super(e),this.set("inputMode","text");let t=this.bindTemplate;this.extendTemplate({attributes:{inputmode:t.to("inputMode")}})}},ma=class extends bd{constructor(e){super(e),this.extendTemplate({attributes:{type:"text",class:["ck-input-text"]}})}};var wd=class extends G{children;constructor(e){super(e);let t=this.bindTemplate;this.set("isVisible",!1),this.set("position","se"),this.children=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-reset","ck-dropdown__panel",t.to("position",i=>`ck-dropdown__panel_${i}`),t.if("isVisible","ck-dropdown__panel-visible")],tabindex:"-1"},children:this.children,on:{selectstart:t.to(i=>{i.target.tagName.toLocaleLowerCase()!=="input"&&i.preventDefault()})}})}focus(){if(this.children.length){let e=this.children.first;typeof e.focus=="function"?e.focus():de("ui-dropdown-panel-focus-child-missing-focus",{childView:this.children.first,dropdownPanel:this})}}focusLast(){if(this.children.length){let e=this.children.last;typeof e.focusLast=="function"?e.focusLast():e.focus()}}},Yp=(()=>{class s extends G{buttonView;panelView;focusTracker;keystrokes;listView;toolbarView;constructor(t,i,o){super(t);let n=this.bindTemplate;this.buttonView=i,this.panelView=o,this.set("isOpen",!1),this.set("isEnabled",!0),this.set("class",void 0),this.set("id",void 0),this.set("panelPosition","auto"),this.panelView.bind("isVisible").to(this,"isOpen"),this.keystrokes=new Le,this.focusTracker=new Ie,this.setTemplate({tag:"div",attributes:{class:["ck","ck-dropdown",n.to("class"),n.if("isEnabled","ck-disabled",r=>!r)],id:n.to("id"),"aria-describedby":n.to("ariaDescribedById")},children:[i,o]}),i.extendTemplate({attributes:{class:["ck-dropdown__button"],"data-cke-tooltip-disabled":n.to("isOpen")}})}render(){super.render(),this.focusTracker.add(this.buttonView.element),this.focusTracker.add(this.panelView.element),this.listenTo(this.buttonView,"open",()=>{this.isOpen=!this.isOpen}),this.on("change:isOpen",(i,o,n)=>{if(n)if(this.panelPosition==="auto"){let r=s._getOptimalPosition({element:this.panelView.element,target:this.buttonView.element,fitInViewport:!0,positions:this._panelPositions});this.panelView.position=r?r.name:this._panelPositions[0].name}else this.panelView.position=this.panelPosition}),this.keystrokes.listenTo(this.element);let t=(i,o)=>{this.isOpen&&(this.isOpen=!1,o())};this.keystrokes.set("arrowdown",(i,o)=>{this.buttonView.isEnabled&&!this.isOpen&&(this.isOpen=!0,o())}),this.keystrokes.set("arrowright",(i,o)=>{this.isOpen&&o()}),this.keystrokes.set("arrowleft",t),this.keystrokes.set("esc",t)}focus(){this.buttonView.focus()}get _panelPositions(){let{south:t,north:i,southEast:o,southWest:n,northEast:r,northWest:a,southMiddleEast:l,southMiddleWest:c,northMiddleEast:d,northMiddleWest:h}=s.defaultPanelPositions;return this.locale.uiLanguageDirection!=="rtl"?[o,n,l,c,t,r,a,d,h,i]:[n,o,c,l,t,a,r,h,d,i]}static defaultPanelPositions={south:(t,i)=>({top:t.bottom,left:t.left-(i.width-t.width)/2,name:"s"}),southEast:t=>({top:t.bottom,left:t.left,name:"se"}),southWest:(t,i)=>({top:t.bottom,left:t.left-i.width+t.width,name:"sw"}),southMiddleEast:(t,i)=>({top:t.bottom,left:t.left-(i.width-t.width)/4,name:"sme"}),southMiddleWest:(t,i)=>({top:t.bottom,left:t.left-(i.width-t.width)*3/4,name:"smw"}),north:(t,i)=>({top:t.top-i.height,left:t.left-(i.width-t.width)/2,name:"n"}),northEast:(t,i)=>({top:t.top-i.height,left:t.left,name:"ne"}),northWest:(t,i)=>({top:t.top-i.height,left:t.left-i.width+t.width,name:"nw"}),northMiddleEast:(t,i)=>({top:t.top-i.height,left:t.left-(i.width-t.width)/4,name:"nme"}),northMiddleWest:(t,i)=>({top:t.top-i.height,left:t.left-(i.width-t.width)*3/4,name:"nmw"})};static _getOptimalPosition=Pr}return s})(),fa=class extends Z{arrowView;constructor(e){super(e),this.arrowView=this._createArrowView(),this.extendTemplate({attributes:{"aria-haspopup":!0,"aria-expanded":this.bindTemplate.to("isOn",t=>String(t))}}),this.delegate("execute").to(this,"open")}render(){super.render(),this.children.add(this.arrowView)}_createArrowView(){let e=new Io;return e.content=Gd,e.extendTemplate({attributes:{class:"ck-dropdown__arrow"}}),e}},Ws=class extends G{constructor(e){super(e),this.setTemplate({tag:"span",attributes:{class:["ck","ck-toolbar__separator"]}})}},kd=class extends G{constructor(e){super(e),this.setTemplate({tag:"span",attributes:{class:["ck","ck-toolbar__line-break"]}})}};function a2(s){return s.bindTemplate.to(e=>{e.target===s.element&&e.preventDefault()})}function xa(s){if(Array.isArray(s))return{items:s,removeItems:[]};let e={items:[],removeItems:[]};return s?B(B({},e),s):e}var l2={alignLeft:oe.alignLeft,bold:oe.bold,importExport:oe.importExport,paragraph:oe.paragraph,plus:oe.plus,text:oe.text,threeVerticalDots:oe.threeVerticalDots,pilcrow:oe.pilcrow,dragIndicator:oe.dragIndicator},hi=class extends G{options;items;focusTracker;keystrokes;itemsView;children;focusables;_focusCycler;_behavior;constructor(e,t){super(e);let i=this.bindTemplate,o=this.t;this.options=t||{},this.set("ariaLabel",o("Editor toolbar")),this.set("maxWidth","auto"),this.items=this.createCollection(),this.focusTracker=new Ie,this.keystrokes=new Le,this.set("class",void 0),this.set("isCompact",!1),this.itemsView=new vd(e),this.children=this.createCollection(),this.children.add(this.itemsView),this.focusables=this.createCollection();let n=e.uiLanguageDirection==="rtl";this._focusCycler=new vt({focusables:this.focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:[n?"arrowright":"arrowleft","arrowup"],focusNext:[n?"arrowleft":"arrowright","arrowdown"]}});let r=["ck","ck-toolbar",i.to("class"),i.if("isCompact","ck-toolbar_compact")];this.options.shouldGroupWhenFull&&this.options.isFloating&&r.push("ck-toolbar_floating"),this.setTemplate({tag:"div",attributes:{class:r,role:"toolbar","aria-label":i.to("ariaLabel"),style:{maxWidth:i.to("maxWidth")},tabindex:-1},children:this.children,on:{mousedown:a2(this)}}),this._behavior=this.options.shouldGroupWhenFull?new yd(this):new xd(this)}render(){super.render(),this.focusTracker.add(this.element);for(let e of this.items)this.focusTracker.add(e.element);this.items.on("add",(e,t)=>{this.focusTracker.add(t.element)}),this.items.on("remove",(e,t)=>{this.focusTracker.remove(t.element)}),this.keystrokes.listenTo(this.element),this._behavior.render(this)}destroy(){return this._behavior.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy(),super.destroy()}focus(){this._focusCycler.focusFirst()}focusLast(){this._focusCycler.focusLast()}fillFromConfig(e,t,i){this.items.addMany(this._buildItemsFromConfig(e,t,i))}_buildItemsFromConfig(e,t,i){let o=xa(e),n=i||o.removeItems;return this._cleanItemsConfiguration(o.items,t,n).map(a=>Bt(a)?this._createNestedToolbarDropdown(a,t,n):a==="|"?new Ws:a==="-"?new kd:t.create(a)).filter(a=>!!a)}_cleanItemsConfiguration(e,t,i){let o=e.filter((n,r,a)=>n==="|"?!0:i.indexOf(n)!==-1?!1:n==="-"?this.options.shouldGroupWhenFull?(de("toolbarview-line-break-ignored-when-grouping-items",a),!1):!0:!Bt(n)&&!t.has(n)?(de("toolbarview-item-unavailable",{item:n}),!1):!0);return this._cleanSeparatorsAndLineBreaks(o)}_cleanSeparatorsAndLineBreaks(e){let t=r=>r!=="-"&&r!=="|",i=e.length,o=e.findIndex(t);if(o===-1)return[];let n=i-e.slice().reverse().findIndex(t);return e.slice(o,n).filter((r,a,l)=>t(r)?!0:!(a>0&&l[a-1]===r))}_createNestedToolbarDropdown(e,t,i){let{label:o,icon:n,items:r,tooltip:a=!0,withText:l=!1}=e;if(r=this._cleanItemsConfiguration(r,t,i),!r.length)return null;let c=this.locale,d=Fe(c);return o||de("toolbarview-nested-toolbar-dropdown-missing-label",e),d.class="ck-toolbar__nested-toolbar-dropdown",d.buttonView.set({label:o,tooltip:a,withText:!!l}),n!==!1?d.buttonView.icon=l2[n]||n||oe.threeVerticalDots:d.buttonView.withText=!0,In(d,()=>d.toolbarView._buildItemsFromConfig(r,t,i)),d}},vd=class extends G{children;constructor(e){super(e),this.children=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-toolbar__items"]},children:this.children})}},xd=class{constructor(e){let t=e.bindTemplate;e.set("isVertical",!1),e.itemsView.children.bindTo(e.items).using(i=>i),e.focusables.bindTo(e.items).using(i=>Us(i)?i:null),e.extendTemplate({attributes:{class:[t.if("isVertical","ck-toolbar_vertical")]}})}render(){}destroy(){}},yd=class{view;viewChildren;viewFocusables;viewItemsView;viewFocusTracker;viewLocale;ungroupedItems;groupedItems;groupedItemsDropdown;resizeObserver=null;cachedPadding=null;shouldUpdateGroupingOnNextResize=!1;viewElement;constructor(e){this.view=e,this.viewChildren=e.children,this.viewFocusables=e.focusables,this.viewItemsView=e.itemsView,this.viewFocusTracker=e.focusTracker,this.viewLocale=e.locale,this.ungroupedItems=e.createCollection(),this.groupedItems=e.createCollection(),this.groupedItemsDropdown=this._createGroupedItemsDropdown(),e.itemsView.children.bindTo(this.ungroupedItems).using(t=>t),this.ungroupedItems.on("change",this._updateFocusCyclableItems.bind(this)),e.children.on("change",this._updateFocusCyclableItems.bind(this)),e.items.on("change",(t,i)=>{let o=i.index,n=Array.from(i.added);for(let r of i.removed)o>=this.ungroupedItems.length?this.groupedItems.remove(r):this.ungroupedItems.remove(r);for(let r=o;r<o+n.length;r++){let a=n[r-o];r>this.ungroupedItems.length?this.groupedItems.add(a,r-this.ungroupedItems.length):this.ungroupedItems.add(a,r)}this._updateGrouping()}),e.extendTemplate({attributes:{class:["ck-toolbar_grouping"]}})}render(e){this.viewElement=e.element,this._enableGroupingOnResize(),this._enableGroupingOnMaxWidthChange(e)}destroy(){this.groupedItemsDropdown.destroy(),this.resizeObserver.destroy()}_updateGrouping(){if(!this.viewElement.ownerDocument.body.contains(this.viewElement))return;if(!Ai(this.viewElement)){this.shouldUpdateGroupingOnNextResize=!0;return}let e=this.groupedItems.length,t;for(;this._areItemsOverflowing;)this._groupLastItem(),t=!0;if(!t&&this.groupedItems.length){for(;this.groupedItems.length&&!this._areItemsOverflowing;)this._ungroupFirstItem();this._areItemsOverflowing&&this._groupLastItem()}this.groupedItems.length!==e&&this.view.fire("groupedItemsUpdate")}get _areItemsOverflowing(){if(!this.ungroupedItems.length)return!1;let e=this.viewElement,t=this.viewLocale.uiLanguageDirection,i=new se(e.lastChild),o=new se(e);if(!this.cachedPadding){let n=j.window.getComputedStyle(e),r=t==="ltr"?"paddingRight":"paddingLeft";this.cachedPadding=Number.parseInt(n[r])}return t==="ltr"?i.right>o.right-this.cachedPadding:i.left<o.left+this.cachedPadding}_enableGroupingOnResize(){let e;this.resizeObserver=new tn(this.viewElement,t=>{(!e||e!==t.contentRect.width||this.shouldUpdateGroupingOnNextResize)&&(this.shouldUpdateGroupingOnNextResize=!1,this._updateGrouping(),e=t.contentRect.width)}),this._updateGrouping()}_enableGroupingOnMaxWidthChange(e){e.on("change:maxWidth",()=>{this._updateGrouping()})}_groupLastItem(){this.groupedItems.length||(this.viewChildren.add(new Ws),this.viewChildren.add(this.groupedItemsDropdown),this.viewFocusTracker.add(this.groupedItemsDropdown.element)),this.groupedItems.add(this.ungroupedItems.remove(this.ungroupedItems.last),0)}_ungroupFirstItem(){this.ungroupedItems.add(this.groupedItems.remove(this.groupedItems.first)),this.groupedItems.length||(this.viewChildren.remove(this.groupedItemsDropdown),this.viewChildren.remove(this.viewChildren.last),this.viewFocusTracker.remove(this.groupedItemsDropdown.element))}_createGroupedItemsDropdown(){let e=this.viewLocale,t=e.t,i=Fe(e);return i.class="ck-toolbar__grouped-dropdown",i.panelPosition=e.uiLanguageDirection==="ltr"?"sw":"se",In(i,this.groupedItems),i.buttonView.set({label:t("Show more items"),tooltip:!0,tooltipPosition:e.uiLanguageDirection==="rtl"?"se":"sw",icon:oe.threeVerticalDots}),i}_updateFocusCyclableItems(){this.viewFocusables.clear(),this.ungroupedItems.map(e=>{Us(e)&&this.viewFocusables.add(e)}),this.groupedItems.length&&this.viewFocusables.add(this.groupedItemsDropdown)}},ui=class extends G{children;constructor(e){super(e);let t=this.bindTemplate;this.set("isVisible",!0),this.children=this.createCollection(),this.setTemplate({tag:"li",attributes:{class:["ck","ck-list__item",t.if("isVisible","ck-hidden",i=>!i)],role:"presentation"},children:this.children})}focus(){this.children.first&&this.children.first.focus()}},Ao=class extends G{constructor(e){super(e),this.setTemplate({tag:"li",attributes:{class:["ck","ck-list__separator"]}})}},Cn=class extends G{labelView;items;children;constructor(e,t=new Ii){super(e);let i=this.bindTemplate,o=new So(e);this.set({label:"",isVisible:!0}),this.labelView=t,this.labelView.bind("text").to(this,"label"),this.children=this.createCollection(),this.children.addMany([this.labelView,o]),o.set({role:"group",ariaLabelledBy:t.id}),o.focusTracker.destroy(),o.keystrokes.destroy(),this.items=o.items,this.setTemplate({tag:"li",attributes:{role:"presentation",class:["ck","ck-list__group",i.if("isVisible","ck-hidden",n=>!n)]},children:this.children})}focus(){if(this.items){let e=this.items.find(t=>!(t instanceof Ao));e&&e.focus()}}},So=class extends G{focusables;items;focusTracker;keystrokes;_focusCycler;_listItemGroupToChangeListeners=new WeakMap;constructor(e){super(e);let t=this.bindTemplate;this.focusables=new ht,this.items=this.createCollection(),this.focusTracker=new Ie,this.keystrokes=new Le,this._focusCycler=new vt({focusables:this.focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"arrowup",focusNext:"arrowdown"}}),this.set("ariaLabel",void 0),this.set("ariaLabelledBy",void 0),this.set("role",void 0),this.setTemplate({tag:"ul",attributes:{class:["ck","ck-reset","ck-list"],role:t.to("role"),"aria-label":t.to("ariaLabel"),"aria-labelledby":t.to("ariaLabelledBy")},children:this.items})}render(){super.render();for(let e of this.items)e instanceof Cn?this._registerFocusableItemsGroup(e):e instanceof ui&&this._registerFocusableListItem(e);this.items.on("change",(e,t)=>{for(let i of t.removed)i instanceof Cn?this._deregisterFocusableItemsGroup(i):i instanceof ui&&this._deregisterFocusableListItem(i);for(let i of Array.from(t.added).reverse())i instanceof Cn?this._registerFocusableItemsGroup(i,t.index):this._registerFocusableListItem(i,t.index)}),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this._focusCycler.focusFirst()}focusFirst(){this._focusCycler.focusFirst()}focusLast(){this._focusCycler.focusLast()}_registerFocusableListItem(e,t){this.focusTracker.add(e.element),this.focusables.add(e,t)}_deregisterFocusableListItem(e){this.focusTracker.remove(e.element),this.focusables.remove(e)}_getOnGroupItemsChangeCallback(e){return(t,i)=>{for(let o of i.removed)this._deregisterFocusableListItem(o);for(let o of Array.from(i.added).reverse())this._registerFocusableListItem(o,this.items.getIndex(e)+i.index)}}_registerFocusableItemsGroup(e,t){Array.from(e.items).forEach((o,n)=>{let r=typeof t<"u"?t+n:void 0;this._registerFocusableListItem(o,r)});let i=this._getOnGroupItemsChangeCallback(e);this._listItemGroupToChangeListeners.set(e,i),e.items.on("change",i)}_deregisterFocusableItemsGroup(e){for(let t of e.items)this._deregisterFocusableListItem(t);e.items.off("change",this._listItemGroupToChangeListeners.get(e)),this._listItemGroupToChangeListeners.delete(e)}},Gi=class extends G{children;actionView;arrowView;keystrokes;focusTracker;constructor(e,t){super(e);let i=this.bindTemplate;this.set("class",void 0),this.set("labelStyle",void 0),this.set("icon",void 0),this.set("isEnabled",!0),this.set("isOn",!1),this.set("isToggleable",!1),this.set("isVisible",!0),this.set("keystroke",void 0),this.set("withKeystroke",!1),this.set("label",void 0),this.set("tabindex",-1),this.set("tooltip",!1),this.set("tooltipPosition","s"),this.set("type","button"),this.set("withText",!1),this.children=this.createCollection(),this.actionView=this._createActionView(t),this.arrowView=this._createArrowView(),this.keystrokes=new Le,this.focusTracker=new Ie,this.setTemplate({tag:"div",attributes:{class:["ck","ck-splitbutton",i.to("class"),i.if("isVisible","ck-hidden",o=>!o),this.arrowView.bindTemplate.if("isOn","ck-splitbutton_open")]},children:this.children})}render(){super.render(),this.children.add(this.actionView),this.children.add(this.arrowView),this.focusTracker.add(this.actionView.element),this.focusTracker.add(this.arrowView.element),this.keystrokes.listenTo(this.element),this.keystrokes.set("arrowright",(e,t)=>{this.focusTracker.focusedElement===this.actionView.element&&(this.arrowView.focus(),t())}),this.keystrokes.set("arrowleft",(e,t)=>{this.focusTracker.focusedElement===this.arrowView.element&&(this.actionView.focus(),t())})}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this.actionView.focus()}_createActionView(e){let t=e||new Z;return e||t.bind("icon","isEnabled","isOn","isToggleable","keystroke","label","tabindex","tooltip","tooltipPosition","type","withText").to(this),t.extendTemplate({attributes:{class:"ck-splitbutton__action"}}),t.delegate("execute").to(this),t}_createArrowView(){let e=new Z,t=e.bindTemplate;return e.icon=Gd,e.extendTemplate({attributes:{class:["ck-splitbutton__arrow"],"data-cke-tooltip-disabled":t.to("isOn"),"aria-haspopup":!0,"aria-expanded":t.to("isOn",i=>String(i))}}),e.bind("isEnabled").to(this),e.bind("label").to(this),e.bind("tooltip").to(this),e.delegate("execute").to(this,"open"),e}};function Fe(s,e=fa){let t=typeof e=="function"?new e(s):e,i=new wd(s),o=new Yp(s,t,i);return t.bind("isEnabled").to(o),t instanceof Gi?t.arrowView.bind("isOn").to(o,"isOpen"):t.bind("isOn").to(o,"isOpen"),c2(o),o}function In(s,e,t={}){s.extendTemplate({attributes:{class:["ck-toolbar-dropdown"]}}),s.isOpen?Lp(s,e,t):s.once("change:isOpen",()=>Lp(s,e,t),{priority:"highest"}),t.enableActiveItemFocusOnDropdownOpen&&Gs(s,()=>s.toolbarView.items.find(i=>i.isOn))}function Lp(s,e,t){let i=s.locale,o=i.t,n=s.toolbarView=new hi(i),r=typeof e=="function"?e():e;n.ariaLabel=t.ariaLabel||o("Dropdown toolbar"),t.maxWidth&&(n.maxWidth=t.maxWidth),t.class&&(n.class=t.class),t.isCompact&&(n.isCompact=t.isCompact),t.isVertical&&(n.isVertical=!0),r instanceof ht?n.items.bindTo(r).using(a=>a):n.items.addMany(r),s.panelView.children.add(n),n.items.delegate("execute").to(s)}function Zt(s,e,t={}){s.isOpen?Rp(s,e,t):s.once("change:isOpen",()=>Rp(s,e,t),{priority:"highest"}),Gs(s,()=>s.listView.items.find(i=>i instanceof ui?i.children.first.isOn:!1))}function Rp(s,e,t){let i=s.locale,o=s.listView=new So(i),n=typeof e=="function"?e():e;o.ariaLabel=t.ariaLabel,o.role=t.role,Xp(s,o.items,n,i),s.panelView.children.add(o),o.items.delegate("execute").to(s)}function Gs(s,e){s.on("change:isOpen",()=>{if(!s.isOpen)return;let t=e();t&&(typeof t.focus=="function"?t.focus():de("ui-dropdown-focus-child-on-open-child-missing-focus",{view:t}))},{priority:Ft.low-10})}function c2(s){d2(s),h2(s),u2(s),g2(s),m2(s),f2(s)}function d2(s){s.on("render",()=>{To({emitter:s,activator:()=>s.isOpen,callback:()=>{s.isOpen=!1},contextElements:()=>[s.element,...s.focusTracker._elements]})})}function h2(s){s.on("execute",e=>{e.source instanceof Ui||(s.isOpen=!1)})}function u2(s){s.focusTracker.on("change:isFocused",(e,t,i)=>{s.isOpen&&!i&&(s.isOpen=!1)})}function g2(s){s.keystrokes.set("arrowdown",(e,t)=>{s.isOpen&&(s.panelView.focus(),t())}),s.keystrokes.set("arrowup",(e,t)=>{s.isOpen&&(s.panelView.focusLast(),t())})}function m2(s){s.on("change:isOpen",(e,t,i)=>{if(i)return;let o=s.panelView.element;o&&o.contains(j.document.activeElement)&&s.buttonView.focus()})}function f2(s){s.on("change:isOpen",(e,t,i)=>{i&&s.panelView.focus()},{priority:"low"})}function Xp(s,e,t,i){e.bindTo(t).using(o=>{if(o.type==="separator")return new Ao(i);if(o.type==="group"){let n=new Cn(i);return n.set({label:o.label}),Xp(s,n.items,o.items,i),n.items.delegate("execute").to(s),n}else if(o.type==="button"||o.type==="switchbutton"){let n=new ui(i),r;return o.type==="button"?(r=new Z(i),r.bind("ariaChecked").to(r,"isOn")):r=new Ui(i),r.bind(...Object.keys(o.model)).to(o.model),r.delegate("execute").to(n),n.children.add(r),n}return null})}var Pn=(s,e,t)=>{let i=new ma(s.locale);return i.set({id:e,ariaDescribedById:t}),i.bind("isReadOnly").to(s,"isEnabled",o=>!o),i.bind("hasError").to(s,"errorText",o=>!!o),i.on("input",()=>{s.errorText=null}),s.bind("isEmpty","isFocused","placeholder").to(i),i};var p2=150,_d=class extends G{hexInputRow;_debounceColorPickerEvent;_config;constructor(e,t={}){super(e),this.set({color:"",_hexColor:""}),this.hexInputRow=this._createInputRow();let i=this.createCollection();t.hideInput||i.add(this.hexInputRow),this.setTemplate({tag:"div",attributes:{class:["ck","ck-color-picker"],tabindex:-1},children:i}),this._config=t,this._debounceColorPickerEvent=oi(o=>{this.set("color",o),this.fire("colorSelected",{color:this.color})},p2,{leading:!0}),this.on("set:color",(o,n,r)=>{o.return=Gp(r,this._config.format||"hsl")}),this.on("change:color",()=>{this._hexColor=nd(this.color)}),this.on("change:_hexColor",()=>{document.activeElement!==this.picker&&this.picker.setAttribute("color",this._hexColor),nd(this.color)!=nd(this._hexColor)&&(this.color=this._hexColor)})}render(){if(super.render(),o2("hex-color-picker",na),this.picker=j.document.createElement("hex-color-picker"),this.picker.setAttribute("class","hex-color-picker"),this.picker.setAttribute("tabindex","-1"),this._createSlidersView(),this.element){this.hexInputRow.element?this.element.insertBefore(this.picker,this.hexInputRow.element):this.element.appendChild(this.picker);let e=document.createElement("style");e.textContent='[role="slider"]:focus [part$="pointer"] {border: 1px solid #fff;outline: 1px solid var(--ck-color-focus-border);box-shadow: 0 0 0 2px #fff;}',this.picker.shadowRoot.appendChild(e)}this.picker.addEventListener("color-changed",e=>{let t=e.detail.value;this._debounceColorPickerEvent(t)})}focus(){!this._config.hideInput&&(K.isGecko||K.isiOS||K.isSafari)&&this.hexInputRow.children.get(1).focus(),this.slidersView.first.focus()}_createSlidersView(){let i=[...this.picker.shadowRoot.children].filter(o=>o.getAttribute("role")==="slider").map(o=>new Cd(o));this.slidersView=this.createCollection(),i.forEach(o=>{this.slidersView.add(o)})}_createInputRow(){let e=this._createColorInput();return new Sd(this.locale,e)}_createColorInput(){let e=new Pi(this.locale,Pn),{t}=this.locale;return e.set({label:t("HEX"),class:"color-picker-hex-input"}),e.fieldView.bind("value").to(this,"_hexColor",i=>e.isFocused?e.fieldView.value:i.startsWith("#")?i.substring(1):i),e.fieldView.on("input",()=>{let i=e.fieldView.element.value;if(i){let o=qp(i);o&&this._debounceColorPickerEvent(o)}}),e}isValid(){let{t:e}=this.locale;return this.resetValidationStatus(),this.hexInputRow.getParsedColor()?!0:(this.hexInputRow.inputView.errorText=e('Please enter a valid color (e.g. "ff0000").'),!1)}resetValidationStatus(){this.hexInputRow.inputView.errorText=null}};function nd(s){let e=i2(s);return e||(e="#000"),e.length===4&&(e="#"+[e[1],e[1],e[2],e[2],e[3],e[3]].join("")),e.toLowerCase()}var Cd=class extends G{constructor(e){super(),this.element=e}focus(){this.element.focus()}},Ad=class extends G{constructor(e){super(e),this.setTemplate({tag:"div",attributes:{class:["ck","ck-color-picker__hash-view"]},children:"#"})}},Sd=class extends G{children;inputView;constructor(e,t){super(e),this.inputView=t,this.children=this.createCollection([new Ad,this.inputView]),this.setTemplate({tag:"div",attributes:{class:["ck","ck-color-picker__row"]},children:this.children})}getParsedColor(){return qp(this.inputView.fieldView.element.value)}};function qp(s){if(!s)return null;let e=s.trim().replace(/^#/,"");return![3,4,6,8].includes(e.length)||!/^(([0-9a-fA-F]{2}){3,4}|([0-9a-fA-F]){3,4})$/.test(e)?null:`#${e}`}var Ed=class extends ge(we){constructor(e){super(e),this.set("isEmpty",!0),this.on("change",()=>{this.set("isEmpty",this.length===0)})}add(e,t){return this.find(i=>i.color===e.color)?this:super.add(e,t)}hasColor(e){return!!this.find(t=>t.color===e)}},Td=class extends G{items;colorDefinitions;focusTracker;columns;documentColors;documentColorsCount;staticColorsGrid;documentColorsGrid;colorPickerButtonView;removeColorButtonView;_focusables;_documentColorsLabel;_removeButtonLabel;_colorPickerLabel;constructor(e,{colors:t,columns:i,removeButtonLabel:o,documentColorsLabel:n,documentColorsCount:r,colorPickerLabel:a,focusTracker:l,focusables:c}){super(e);let d=this.bindTemplate;this.set("isVisible",!0),this.focusTracker=l,this.items=this.createCollection(),this.colorDefinitions=t,this.columns=i,this.documentColors=new Ed,this.documentColorsCount=r,this._focusables=c,this._removeButtonLabel=o,this._colorPickerLabel=a,this._documentColorsLabel=n,this.setTemplate({tag:"div",attributes:{class:["ck-color-grids-fragment",d.if("isVisible","ck-hidden",h=>!h)]},children:this.items}),this.removeColorButtonView=this._createRemoveColorButton(),this.items.add(this.removeColorButtonView)}updateDocumentColors(e,t){let i=e.document,o=this.documentColorsCount;this.documentColors.clear();for(let n of i.getRoots()){let r=e.createRangeIn(n);for(let a of r.getItems())if(a.is("$textProxy")&&a.hasAttribute(t)&&(this._addColorToDocumentColors(a.getAttribute(t)),this.documentColors.length>=o))return}}updateSelectedColors(){let e=this.documentColorsGrid,t=this.staticColorsGrid,i=this.selectedColor;t.selectedColor=i,e&&(e.selectedColor=i)}render(){if(super.render(),this.staticColorsGrid=this._createStaticColorsGrid(),this.items.add(this.staticColorsGrid),this.documentColorsCount){let e=it.bind(this.documentColors,this.documentColors),t=new Ii(this.locale);t.text=this._documentColorsLabel,t.extendTemplate({attributes:{class:["ck","ck-color-grid__label",e.if("isEmpty","ck-hidden")]}}),this.items.add(t),this.documentColorsGrid=this._createDocumentColorsGrid(),this.items.add(this.documentColorsGrid)}this._createColorPickerButton(),this._addColorSelectorElementsToFocusTracker()}focus(){this.removeColorButtonView.focus()}destroy(){super.destroy()}addColorPickerButton(){this.colorPickerButtonView&&(this.items.add(this.colorPickerButtonView),this.focusTracker.add(this.colorPickerButtonView.element),this._focusables.add(this.colorPickerButtonView))}_addColorSelectorElementsToFocusTracker(){this.focusTracker.add(this.removeColorButtonView.element),this._focusables.add(this.removeColorButtonView),this.staticColorsGrid&&(this.focusTracker.add(this.staticColorsGrid.element),this._focusables.add(this.staticColorsGrid)),this.documentColorsGrid&&(this.focusTracker.add(this.documentColorsGrid.element),this._focusables.add(this.documentColorsGrid))}_createColorPickerButton(){this.colorPickerButtonView=new Z,this.colorPickerButtonView.set({label:this._colorPickerLabel,withText:!0,icon:oe.colorPalette,class:"ck-color-selector__color-picker"}),this.colorPickerButtonView.on("execute",()=>{this.fire("colorPicker:show")})}_createRemoveColorButton(){let e=new Z;return e.set({withText:!0,icon:oe.eraser,label:this._removeButtonLabel}),e.class="ck-color-selector__remove-color",e.on("execute",()=>{this.fire("execute",{value:null,source:"removeColorButton"})}),e.render(),e}_createStaticColorsGrid(){let e=new ga(this.locale,{colorDefinitions:this.colorDefinitions,columns:this.columns});return e.on("execute",(t,i)=>{this.fire("execute",{value:i.value,source:"staticColorsGrid"})}),e}_createDocumentColorsGrid(){let e=it.bind(this.documentColors,this.documentColors),t=new ga(this.locale,{columns:this.columns});return t.extendTemplate({attributes:{class:e.if("isEmpty","ck-hidden")}}),t.items.bindTo(this.documentColors).using(i=>{let o=new ua;return o.set({color:i.color,hasBorder:i.options&&i.options.hasBorder}),i.label&&o.set({label:i.label,tooltip:!0}),o.on("execute",()=>{this.fire("execute",{value:i.color,source:"documentColorsGrid"})}),o}),this.documentColors.on("change:isEmpty",(i,o,n)=>{n&&(t.selectedColor=null)}),t}_addColorToDocumentColors(e){let t=this.colorDefinitions.find(i=>i.color===e);t?this.documentColors.add(Object.assign({},t)):this.documentColors.add({color:e,label:e,options:{hasBorder:!1}})}},Id=class extends G{items;colorPickerView;saveButtonView;cancelButtonView;actionBarView;focusTracker;keystrokes;_focusables;_colorPickerViewConfig;constructor(e,{focusTracker:t,focusables:i,keystrokes:o,colorPickerViewConfig:n}){super(e),this.items=this.createCollection(),this.focusTracker=t,this.keystrokes=o,this.set("isVisible",!1),this.set("selectedColor",void 0),this._focusables=i,this._colorPickerViewConfig=n;let r=this.bindTemplate,{saveButtonView:a,cancelButtonView:l}=this._createActionButtons();this.saveButtonView=a,this.cancelButtonView=l,this.actionBarView=this._createActionBarView({saveButtonView:a,cancelButtonView:l}),this.setTemplate({tag:"div",attributes:{class:["ck-color-picker-fragment",r.if("isVisible","ck-hidden",c=>!c)]},children:this.items})}render(){super.render();let e=new _d(this.locale,B({},this._colorPickerViewConfig));this.colorPickerView=e,this.colorPickerView.render(),this.selectedColor&&(e.color=this.selectedColor),this.listenTo(this,"change:selectedColor",(t,i,o)=>{e.color=o}),this.items.add(this.colorPickerView),this.items.add(this.actionBarView),this._addColorPickersElementsToFocusTracker(),this._stopPropagationOnArrowsKeys(),this._executeOnEnterPress(),this._executeUponColorChange()}destroy(){super.destroy()}focus(){this.colorPickerView.focus()}resetValidationStatus(){this.colorPickerView.resetValidationStatus()}_executeOnEnterPress(){this.keystrokes.set("enter",e=>{this.isVisible&&this.focusTracker.focusedElement!==this.cancelButtonView.element&&this.colorPickerView.isValid()&&(this.fire("execute",{value:this.selectedColor}),e.stopPropagation(),e.preventDefault())})}_stopPropagationOnArrowsKeys(){let e=t=>t.stopPropagation();this.keystrokes.set("arrowright",e),this.keystrokes.set("arrowleft",e),this.keystrokes.set("arrowup",e),this.keystrokes.set("arrowdown",e)}_addColorPickersElementsToFocusTracker(){for(let t of this.colorPickerView.slidersView)this.focusTracker.add(t.element),this._focusables.add(t);let e=this.colorPickerView.hexInputRow.children.get(1);e.element&&(this.focusTracker.add(e.element),this._focusables.add(e)),this.focusTracker.add(this.saveButtonView.element),this._focusables.add(this.saveButtonView),this.focusTracker.add(this.cancelButtonView.element),this._focusables.add(this.cancelButtonView)}_createActionBarView({saveButtonView:e,cancelButtonView:t}){let i=new G,o=this.createCollection();return o.add(e),o.add(t),i.setTemplate({tag:"div",attributes:{class:["ck","ck-color-selector_action-bar"]},children:o}),i}_createActionButtons(){let e=this.locale,t=e.t,i=new Z(e),o=new Z(e);return i.set({icon:oe.check,class:"ck-button-save",type:"button",withText:!1,label:t("Accept")}),o.set({icon:oe.cancel,class:"ck-button-cancel",type:"button",withText:!1,label:t("Cancel")}),i.on("execute",()=>{this.colorPickerView.isValid()&&this.fire("execute",{source:"colorPickerSaveButton",value:this.selectedColor})}),o.on("execute",()=>{this.fire("colorPicker:cancel")}),{saveButtonView:i,cancelButtonView:o}}_executeUponColorChange(){this.colorPickerView.on("colorSelected",(e,t)=>{this.fire("execute",{value:t.color,source:"colorPicker"}),this.set("selectedColor",t.color)})}},En=class extends G{focusTracker;keystrokes;items;colorGridsFragmentView;colorPickerFragmentView;_focusCycler;_focusables;_colorPickerViewConfig;constructor(e,{colors:t,columns:i,removeButtonLabel:o,documentColorsLabel:n,documentColorsCount:r,colorPickerLabel:a,colorPickerViewConfig:l}){super(e),this.items=this.createCollection(),this.focusTracker=new Ie,this.keystrokes=new Le,this._focusables=new ht,this._colorPickerViewConfig=l,this._focusCycler=new vt({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.colorGridsFragmentView=new Td(e,{colors:t,columns:i,removeButtonLabel:o,documentColorsLabel:n,documentColorsCount:r,colorPickerLabel:a,focusTracker:this.focusTracker,focusables:this._focusables}),this.colorPickerFragmentView=new Id(e,{focusables:this._focusables,focusTracker:this.focusTracker,keystrokes:this.keystrokes,colorPickerViewConfig:l}),this.set("_isColorGridsFragmentVisible",!0),this.set("_isColorPickerFragmentVisible",!1),this.set("selectedColor",void 0),this.colorGridsFragmentView.bind("isVisible").to(this,"_isColorGridsFragmentVisible"),this.colorPickerFragmentView.bind("isVisible").to(this,"_isColorPickerFragmentVisible"),this.on("change:selectedColor",(c,d,h)=>{this.colorGridsFragmentView.set("selectedColor",h),this.colorPickerFragmentView.set("selectedColor",h)}),this.colorGridsFragmentView.on("change:selectedColor",(c,d,h)=>{this.set("selectedColor",h)}),this.colorPickerFragmentView.on("change:selectedColor",(c,d,h)=>{this.set("selectedColor",h)}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-color-selector"]},children:this.items})}render(){super.render(),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}appendUI(){this._appendColorGridsFragment(),this._colorPickerViewConfig&&this._appendColorPickerFragment()}showColorPickerFragment(){!this.colorPickerFragmentView.colorPickerView||this._isColorPickerFragmentVisible||(this._isColorPickerFragmentVisible=!0,this.colorPickerFragmentView.focus(),this.colorPickerFragmentView.resetValidationStatus(),this._isColorGridsFragmentVisible=!1)}showColorGridsFragment(){this._isColorGridsFragmentVisible||(this._isColorGridsFragmentVisible=!0,this.colorGridsFragmentView.focus(),this._isColorPickerFragmentVisible=!1)}focus(){this._focusCycler.focusFirst()}focusLast(){this._focusCycler.focusLast()}updateDocumentColors(e,t){this.colorGridsFragmentView.updateDocumentColors(e,t)}updateSelectedColors(){this.colorGridsFragmentView.updateSelectedColors()}_appendColorGridsFragment(){this.items.length||(this.items.add(this.colorGridsFragmentView),this.colorGridsFragmentView.delegate("execute").to(this),this.colorGridsFragmentView.delegate("colorPicker:show").to(this))}_appendColorPickerFragment(){this.items.length!==2&&(this.items.add(this.colorPickerFragmentView),this.colorGridsFragmentView.colorPickerButtonView&&this.colorGridsFragmentView.colorPickerButtonView.on("execute",()=>{this.showColorPickerFragment()}),this.colorGridsFragmentView.addColorPickerButton(),this.colorPickerFragmentView.delegate("execute").to(this),this.colorPickerFragmentView.delegate("colorPicker:cancel").to(this))}},Pd=class{editor;_components=new Map;constructor(e){this.editor=e}*names(){for(let e of this._components.values())yield e.originalName}add(e,t){this._components.set(sd(e),{callback:t,originalName:e})}create(e){if(!this.has(e))throw new E("componentfactory-item-missing",this,{name:e});return this._components.get(sd(e)).callback(this.editor.locale)}has(e){return this._components.has(sd(e))}};function sd(s){return String(s).toLowerCase()}var Np=Ci("px"),b2={top:-99999,left:-99999,name:"arrowless",config:{withArrow:!1}},$i=(()=>{class s extends G{content;_pinWhenIsVisibleCallback;constructor(t){super(t);let i=this.bindTemplate;this.set("top",0),this.set("left",0),this.set("position","arrow_nw"),this.set("isVisible",!1),this.set("withArrow",!0),this.set("class",void 0),this._pinWhenIsVisibleCallback=null,this.content=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-balloon-panel",i.to("position",o=>`ck-balloon-panel_${o}`),i.if("isVisible","ck-balloon-panel_visible"),i.if("withArrow","ck-balloon-panel_with-arrow"),i.to("class")],style:{top:i.to("top",Np),left:i.to("left",Np)}},children:this.content})}show(){this.isVisible=!0}hide(){this.isVisible=!1}attachTo(t){this.show();let i=s.defaultPositions,o=Object.assign({},{element:this.element,positions:[i.southArrowNorth,i.southArrowNorthMiddleWest,i.southArrowNorthMiddleEast,i.southArrowNorthWest,i.southArrowNorthEast,i.northArrowSouth,i.northArrowSouthMiddleWest,i.northArrowSouthMiddleEast,i.northArrowSouthWest,i.northArrowSouthEast,i.viewportStickyNorth],limiter:j.document.body,fitInViewport:!0},t),n=s._getOptimalPosition(o)||b2,r=parseInt(n.left),a=parseInt(n.top),l=n.name,c=n.config||{},{withArrow:d=!0}=c;this.top=a,this.left=r,this.position=l,this.withArrow=d}pin(t){this.unpin(),this._pinWhenIsVisibleCallback=()=>{this.isVisible?this._startPinning(t):this._stopPinning()},this._startPinning(t),this.listenTo(this,"change:isVisible",this._pinWhenIsVisibleCallback)}unpin(){this._pinWhenIsVisibleCallback&&(this._stopPinning(),this.stopListening(this,"change:isVisible",this._pinWhenIsVisibleCallback),this._pinWhenIsVisibleCallback=null,this.hide())}_startPinning(t){this.attachTo(t);let i=Md(t.target),o=t.limiter?Md(t.limiter):j.document.body;this.listenTo(j.document,"scroll",(n,r)=>{let a=r.target,l=i&&a.contains(i),c=o&&a.contains(o);(l||c||!i||!o)&&this.attachTo(t)},{useCapture:!0}),this.listenTo(j.window,"resize",()=>{this.attachTo(t)})}_stopPinning(){this.stopListening(j.document,"scroll"),this.stopListening(j.window,"resize")}static generatePositions(t={}){let{sideOffset:i=s.arrowSideOffset,heightOffset:o=s.arrowHeightOffset,stickyVerticalOffset:n=s.stickyVerticalOffset,config:r}=t;return{northWestArrowSouthWest:(c,d)=>B({top:a(c,d),left:c.left-i,name:"arrow_sw"},r&&{config:r}),northWestArrowSouthMiddleWest:(c,d)=>B({top:a(c,d),left:c.left-d.width*.25-i,name:"arrow_smw"},r&&{config:r}),northWestArrowSouth:(c,d)=>B({top:a(c,d),left:c.left-d.width/2,name:"arrow_s"},r&&{config:r}),northWestArrowSouthMiddleEast:(c,d)=>B({top:a(c,d),left:c.left-d.width*.75+i,name:"arrow_sme"},r&&{config:r}),northWestArrowSouthEast:(c,d)=>B({top:a(c,d),left:c.left-d.width+i,name:"arrow_se"},r&&{config:r}),northArrowSouthWest:(c,d)=>B({top:a(c,d),left:c.left+c.width/2-i,name:"arrow_sw"},r&&{config:r}),northArrowSouthMiddleWest:(c,d)=>B({top:a(c,d),left:c.left+c.width/2-d.width*.25-i,name:"arrow_smw"},r&&{config:r}),northArrowSouth:(c,d)=>B({top:a(c,d),left:c.left+c.width/2-d.width/2,name:"arrow_s"},r&&{config:r}),northArrowSouthMiddleEast:(c,d)=>B({top:a(c,d),left:c.left+c.width/2-d.width*.75+i,name:"arrow_sme"},r&&{config:r}),northArrowSouthEast:(c,d)=>B({top:a(c,d),left:c.left+c.width/2-d.width+i,name:"arrow_se"},r&&{config:r}),northEastArrowSouthWest:(c,d)=>B({top:a(c,d),left:c.right-i,name:"arrow_sw"},r&&{config:r}),northEastArrowSouthMiddleWest:(c,d)=>B({top:a(c,d),left:c.right-d.width*.25-i,name:"arrow_smw"},r&&{config:r}),northEastArrowSouth:(c,d)=>B({top:a(c,d),left:c.right-d.width/2,name:"arrow_s"},r&&{config:r}),northEastArrowSouthMiddleEast:(c,d)=>B({top:a(c,d),left:c.right-d.width*.75+i,name:"arrow_sme"},r&&{config:r}),northEastArrowSouthEast:(c,d)=>B({top:a(c,d),left:c.right-d.width+i,name:"arrow_se"},r&&{config:r}),southWestArrowNorthWest:c=>B({top:l(c),left:c.left-i,name:"arrow_nw"},r&&{config:r}),southWestArrowNorthMiddleWest:(c,d)=>B({top:l(c),left:c.left-d.width*.25-i,name:"arrow_nmw"},r&&{config:r}),southWestArrowNorth:(c,d)=>B({top:l(c),left:c.left-d.width/2,name:"arrow_n"},r&&{config:r}),southWestArrowNorthMiddleEast:(c,d)=>B({top:l(c),left:c.left-d.width*.75+i,name:"arrow_nme"},r&&{config:r}),southWestArrowNorthEast:(c,d)=>B({top:l(c),left:c.left-d.width+i,name:"arrow_ne"},r&&{config:r}),southArrowNorthWest:c=>B({top:l(c),left:c.left+c.width/2-i,name:"arrow_nw"},r&&{config:r}),southArrowNorthMiddleWest:(c,d)=>B({top:l(c),left:c.left+c.width/2-d.width*.25-i,name:"arrow_nmw"},r&&{config:r}),southArrowNorth:(c,d)=>B({top:l(c),left:c.left+c.width/2-d.width/2,name:"arrow_n"},r&&{config:r}),southArrowNorthMiddleEast:(c,d)=>B({top:l(c),left:c.left+c.width/2-d.width*.75+i,name:"arrow_nme"},r&&{config:r}),southArrowNorthEast:(c,d)=>B({top:l(c),left:c.left+c.width/2-d.width+i,name:"arrow_ne"},r&&{config:r}),southEastArrowNorthWest:c=>B({top:l(c),left:c.right-i,name:"arrow_nw"},r&&{config:r}),southEastArrowNorthMiddleWest:(c,d)=>B({top:l(c),left:c.right-d.width*.25-i,name:"arrow_nmw"},r&&{config:r}),southEastArrowNorth:(c,d)=>B({top:l(c),left:c.right-d.width/2,name:"arrow_n"},r&&{config:r}),southEastArrowNorthMiddleEast:(c,d)=>B({top:l(c),left:c.right-d.width*.75+i,name:"arrow_nme"},r&&{config:r}),southEastArrowNorthEast:(c,d)=>B({top:l(c),left:c.right-d.width+i,name:"arrow_ne"},r&&{config:r}),westArrowEast:(c,d)=>B({top:c.top+c.height/2-d.height/2,left:c.left-d.width-o,name:"arrow_e"},r&&{config:r}),eastArrowWest:(c,d)=>B({top:c.top+c.height/2-d.height/2,left:c.right+o,name:"arrow_w"},r&&{config:r}),viewportStickyNorth:(c,d,h,g)=>{let m=g||h;return!c.getIntersection(m)||m.height-c.height>n?null:{top:m.top+n,left:c.left+c.width/2-d.width/2,name:"arrowless",config:B({withArrow:!1},r)}}};function a(c,d){return c.top-d.height-o}function l(c){return c.bottom+o}}static arrowSideOffset=25;static arrowHeightOffset=10;static stickyVerticalOffset=20;static _getOptimalPosition=Pr;static defaultPositions=s.generatePositions()}return s})();function Md(s){return $t(s)?s:ds(s)?s.commonAncestorContainer:typeof s=="function"?Md(s()):null}var Vp="ck-tooltip",Ld=class s extends Ge(){tooltipTextView;balloonPanelView;static defaultBalloonPositions=$i.generatePositions({heightOffset:5,sideOffset:13});_currentElementWithTooltip=null;_currentTooltipPosition=null;_resizeObserver=null;_mutationObserver=null;_pinTooltipDebounced;_unpinTooltipDebounced;_watchdogExcluded;static _editors=new Set;static _instance=null;constructor(e){if(super(),s._editors.add(e),s._instance)return s._instance;s._instance=this,this.tooltipTextView=new G(e.locale),this.tooltipTextView.set("text",""),this.tooltipTextView.setTemplate({tag:"span",attributes:{class:["ck","ck-tooltip__text"]},children:[{text:this.tooltipTextView.bindTemplate.to("text")}]}),this.balloonPanelView=new $i(e.locale),this.balloonPanelView.class=Vp,this.balloonPanelView.content.add(this.tooltipTextView),this._mutationObserver=w2(()=>{this._updateTooltipPosition()}),this._pinTooltipDebounced=oi(this._pinTooltip,600),this._unpinTooltipDebounced=oi(this._unpinTooltip,400),this.listenTo(j.document,"keydown",this._onKeyDown.bind(this),{useCapture:!0}),this.listenTo(j.document,"mouseenter",this._onEnterOrFocus.bind(this),{useCapture:!0}),this.listenTo(j.document,"mouseleave",this._onLeaveOrBlur.bind(this),{useCapture:!0}),this.listenTo(j.document,"focus",this._onEnterOrFocus.bind(this),{useCapture:!0}),this.listenTo(j.document,"blur",this._onLeaveOrBlur.bind(this),{useCapture:!0}),this.listenTo(j.document,"scroll",this._onScroll.bind(this),{useCapture:!0}),this._watchdogExcluded=!0}destroy(e){let t=e.ui.view&&e.ui.view.body;s._editors.delete(e),this.stopListening(e.ui),t&&t.has(this.balloonPanelView)&&t.remove(this.balloonPanelView),s._editors.size||(this._unpinTooltip(),this.balloonPanelView.destroy(),this.stopListening(),s._instance=null)}static getPositioningFunctions(e){let t=s.defaultBalloonPositions;return{s:[t.southArrowNorth,t.southArrowNorthEast,t.southArrowNorthWest],n:[t.northArrowSouth],e:[t.eastArrowWest],w:[t.westArrowEast],sw:[t.southArrowNorthEast],se:[t.southArrowNorthWest]}[e]}_onKeyDown(e,t){t.key==="Escape"&&this._currentElementWithTooltip&&(this._unpinTooltip(),t.stopPropagation())}_onEnterOrFocus(e,{target:t}){let i=rd(t);if(!i){e.name==="focus"&&this._unpinTooltip();return}i!==this._currentElementWithTooltip&&(this._unpinTooltip(),e.name==="focus"&&!i.matches(":hover")?this._pinTooltip(i,ad(i)):this._pinTooltipDebounced(i,ad(i)))}_onLeaveOrBlur(e,{target:t,relatedTarget:i}){if(e.name==="mouseleave"){if(!$t(t))return;let o=this.balloonPanelView.element,n=o&&(o===i||o.contains(i)),r=!n&&t===o;if(n){this._unpinTooltipDebounced.cancel();return}if(!r&&this._currentElementWithTooltip&&t!==this._currentElementWithTooltip)return;let a=rd(t),l=rd(i);(r||a&&a!==l)&&this._unpinTooltipDebounced()}else{if(this._currentElementWithTooltip&&t!==this._currentElementWithTooltip)return;this._unpinTooltipDebounced()}}_onScroll(e,{target:t}){this._currentElementWithTooltip&&(t.contains(this.balloonPanelView.element)&&t.contains(this._currentElementWithTooltip)||this._unpinTooltip())}_pinTooltip(e,{text:t,position:i,cssClass:o}){this._unpinTooltip();let n=Se(s._editors.values()).ui.view.body;n.has(this.balloonPanelView)||n.add(this.balloonPanelView),this.tooltipTextView.text=t,this.balloonPanelView.class=[Vp,o].filter(r=>r).join(" "),this.balloonPanelView.pin({target:e,positions:s.getPositioningFunctions(i)}),this._resizeObserver=new tn(e,()=>{Ai(e)||this._unpinTooltip()}),this._mutationObserver.attach(e);for(let r of s._editors)this.listenTo(r.ui,"update",this._updateTooltipPosition.bind(this),{priority:"low"});this._currentElementWithTooltip=e,this._currentTooltipPosition=i}_unpinTooltip(){this._unpinTooltipDebounced.cancel(),this._pinTooltipDebounced.cancel(),this.balloonPanelView.unpin();for(let e of s._editors)this.stopListening(e.ui,"update");this._currentElementWithTooltip=null,this._currentTooltipPosition=null,this.tooltipTextView.text="",this._resizeObserver&&this._resizeObserver.destroy(),this._mutationObserver.detach()}_updateTooltipPosition(){if(!this._currentElementWithTooltip)return;let e=ad(this._currentElementWithTooltip);if(!Ai(this._currentElementWithTooltip)||!e.text){this._unpinTooltip();return}this.balloonPanelView.pin({target:this._currentElementWithTooltip,positions:s.getPositioningFunctions(e.position)})}};function rd(s){return $t(s)?s.closest("[data-cke-tooltip-text]:not([data-cke-tooltip-disabled])"):null}function ad(s){return{text:s.dataset.ckeTooltipText,position:s.dataset.ckeTooltipPosition||"s",cssClass:s.dataset.ckeTooltipClass||""}}function w2(s){let e=new MutationObserver(()=>{s()});return{attach(t){e.observe(t,{attributes:!0,attributeFilter:["data-cke-tooltip-text","data-cke-tooltip-position"]})},detach(){e.disconnect()}}}var k2=`<svg xmlns="http://www.w3.org/2000/svg" width="53" height="10" viewBox="0 0 53 10"><path fill="#1C2331" d="M31.724 1.492a15.139 15.139 0 0 0 .045 1.16 2.434 2.434 0 0 0-.687-.34 3.68 3.68 0 0 0-1.103-.166 2.332 2.332 0 0 0-1.14.255 1.549 1.549 0 0 0-.686.87c-.15.41-.225.98-.225 1.712 0 .939.148 1.659.444 2.161.297.503.792.754 1.487.754.452.015.9-.094 1.294-.316.296-.174.557-.4.771-.669l.14.852h1.282V.007h-1.623v1.485ZM31 6.496a1.77 1.77 0 0 1-.494.061.964.964 0 0 1-.521-.127.758.758 0 0 1-.296-.466 3.984 3.984 0 0 1-.093-.992 4.208 4.208 0 0 1 .098-1.052.753.753 0 0 1 .307-.477 1.08 1.08 0 0 1 .55-.122c.233-.004.466.026.69.089l.483.144v2.553c-.11.076-.213.143-.307.2a1.73 1.73 0 0 1-.417.189ZM35.68 0l-.702.004c-.322.002-.482.168-.48.497l.004.581c.002.33.164.493.486.49l.702-.004c.322-.002.481-.167.48-.496L36.165.49c-.002-.33-.164-.493-.486-.491ZM36.145 2.313l-1.612.01.034 5.482 1.613-.01-.035-5.482ZM39.623.79 37.989.8 38 2.306l-.946.056.006 1.009.949-.006.024 2.983c.003.476.143.844.419 1.106.275.26.658.39 1.148.387.132 0 .293-.01.483-.03.19-.02.38-.046.57-.08.163-.028.324-.068.482-.119l-.183-1.095-.702.004a.664.664 0 0 1-.456-.123.553.553 0 0 1-.14-.422l-.016-2.621 1.513-.01-.006-1.064-1.514.01-.01-1.503ZM46.226 2.388c-.41-.184-.956-.274-1.636-.27-.673.004-1.215.101-1.627.29-.402.179-.72.505-.888.91-.18.419-.268.979-.264 1.68.004.688.1 1.24.285 1.655.172.404.495.724.9.894.414.18.957.268 1.63.264.68-.004 1.224-.099 1.632-.284.4-.176.714-.501.878-.905.176-.418.263-.971.258-1.658-.004-.702-.097-1.261-.28-1.677a1.696 1.696 0 0 0-.888-.9Zm-.613 3.607a.77.77 0 0 1-.337.501 1.649 1.649 0 0 1-1.317.009.776.776 0 0 1-.343-.497 4.066 4.066 0 0 1-.105-1.02 4.136 4.136 0 0 1 .092-1.03.786.786 0 0 1 .337-.507 1.59 1.59 0 0 1 1.316-.008.79.79 0 0 1 .344.502c.078.337.113.683.105 1.03.012.343-.019.685-.092 1.02ZM52.114 2.07a2.67 2.67 0 0 0-1.128.278c-.39.191-.752.437-1.072.73l-.157-.846-1.273.008.036 5.572 1.623-.01-.024-3.78c.35-.124.646-.22.887-.286.26-.075.53-.114.8-.118l.45-.003.144-1.546-.286.001ZM22.083 7.426l-1.576-2.532a2.137 2.137 0 0 0-.172-.253 1.95 1.95 0 0 0-.304-.29.138.138 0 0 1 .042-.04 1.7 1.7 0 0 0 .328-.374l1.75-2.71c.01-.015.025-.028.024-.048-.01-.01-.021-.007-.031-.007L20.49 1.17a.078.078 0 0 0-.075.045l-.868 1.384c-.23.366-.46.732-.688 1.099a.108.108 0 0 1-.112.06c-.098-.005-.196-.001-.294-.002-.018 0-.038.006-.055-.007.002-.02.002-.039.005-.058a4.6 4.6 0 0 0 .046-.701V1.203c0-.02-.009-.032-.03-.03h-.033L16.93 1.17c-.084 0-.073-.01-.073.076v6.491c-.001.018.006.028.025.027h1.494c.083 0 .072.007.072-.071v-2.19c0-.055-.003-.11-.004-.166a3.366 3.366 0 0 0-.05-.417h.06c.104 0 .209.002.313-.002a.082.082 0 0 1 .084.05c.535.913 1.07 1.824 1.607 2.736a.104.104 0 0 0 .103.062c.554-.003 1.107-.002 1.66-.002l.069-.003-.019-.032-.188-.304ZM27.112 6.555c-.005-.08-.004-.08-.082-.08h-2.414c-.053 0-.106-.003-.159-.011a.279.279 0 0 1-.246-.209.558.558 0 0 1-.022-.15c0-.382 0-.762-.002-1.143 0-.032.007-.049.042-.044h2.504c.029.003.037-.012.034-.038V3.814c0-.089.013-.078-.076-.078h-2.44c-.07 0-.062.003-.062-.06v-.837c0-.047.004-.093.013-.14a.283.283 0 0 1 .241-.246.717.717 0 0 1 .146-.011h2.484c.024.002.035-.009.036-.033l.003-.038.03-.496c.01-.183.024-.365.034-.548.005-.085.003-.087-.082-.094-.218-.018-.437-.038-.655-.05a17.845 17.845 0 0 0-.657-.026 72.994 72.994 0 0 0-1.756-.016 1.7 1.7 0 0 0-.471.064 1.286 1.286 0 0 0-.817.655c-.099.196-.149.413-.145.633v3.875c0 .072.003.144.011.216a1.27 1.27 0 0 0 .711 1.029c.228.113.48.167.734.158.757-.005 1.515.002 2.272-.042.274-.016.548-.034.82-.053.03-.002.043-.008.04-.041-.008-.104-.012-.208-.019-.312a69.964 69.964 0 0 1-.05-.768ZM16.14 7.415l-.127-1.075c-.004-.03-.014-.04-.044-.037a13.125 13.125 0 0 1-.998.073c-.336.01-.672.02-1.008.016-.116-.001-.233-.014-.347-.039a.746.746 0 0 1-.45-.262c-.075-.1-.132-.211-.167-.33a3.324 3.324 0 0 1-.126-.773 9.113 9.113 0 0 1-.015-.749c0-.285.022-.57.065-.852.023-.158.066-.312.127-.46a.728.728 0 0 1 .518-.443 1.64 1.64 0 0 1 .397-.048c.628-.001 1.255.003 1.882.05.022.001.033-.006.036-.026l.003-.031.06-.55c.019-.177.036-.355.057-.532.004-.034-.005-.046-.04-.056a5.595 5.595 0 0 0-1.213-.21 10.783 10.783 0 0 0-.708-.02c-.24-.003-.48.01-.719.041a3.477 3.477 0 0 0-.625.14 1.912 1.912 0 0 0-.807.497c-.185.2-.33.433-.424.688a4.311 4.311 0 0 0-.24 1.096c-.031.286-.045.572-.042.86-.006.43.024.86.091 1.286.04.25.104.497.193.734.098.279.26.53.473.734.214.205.473.358.756.446.344.11.702.17 1.063.177a8.505 8.505 0 0 0 1.578-.083 6.11 6.11 0 0 0 .766-.18c.03-.008.047-.023.037-.057a.157.157 0 0 1-.003-.025Z"/><path fill="#AFE229" d="M6.016 6.69a1.592 1.592 0 0 0-.614.21c-.23.132-.422.32-.56.546-.044.072-.287.539-.287.539l-.836 1.528.009.006c.038.025.08.046.123.063.127.046.26.07.395.073.505.023 1.011-.007 1.517-.003.29.009.58.002.869-.022a.886.886 0 0 0 .395-.116.962.962 0 0 0 .312-.286c.056-.083.114-.163.164-.249.24-.408.48-.816.718-1.226.075-.128.148-.257.222-.386l.112-.192a1.07 1.07 0 0 0 .153-.518l-1.304.023s-1.258-.005-1.388.01Z"/><path fill="#771BFF" d="m2.848 9.044.76-1.39.184-.352c-.124-.067-.245-.14-.367-.21-.346-.204-.706-.384-1.045-.6a.984.984 0 0 1-.244-.207c-.108-.134-.136-.294-.144-.46-.021-.409-.002-.818-.009-1.227-.003-.195 0-.39.003-.585.004-.322.153-.553.427-.713l.833-.488c.22-.13.44-.257.662-.385.05-.029.105-.052.158-.077.272-.128.519-.047.76.085l.044.028c.123.06.242.125.358.196.318.178.635.357.952.537.095.056.187.117.275.184.194.144.254.35.266.578.016.284.007.569.006.853-.001.28.004.558 0 .838.592-.003 1.259 0 1.259 0l.723-.013c-.003-.292-.007-.584-.007-.876 0-.524.015-1.048-.016-1.571-.024-.42-.135-.8-.492-1.067a5.02 5.02 0 0 0-.506-.339A400.52 400.52 0 0 0 5.94.787C5.722.664 5.513.524 5.282.423 5.255.406 5.228.388 5.2.373 4.758.126 4.305-.026 3.807.21c-.097.046-.197.087-.29.14A699.896 699.896 0 0 0 .783 1.948c-.501.294-.773.717-.778 1.31-.004.36-.009.718-.001 1.077.016.754-.017 1.508.024 2.261.016.304.07.6.269.848.127.15.279.28.448.382.622.4 1.283.734 1.92 1.11l.183.109Z"/></svg>
`,v2=53,x2=10,y2=50,_2=350,C2="Powered by",Rd=class extends Ge(){editor;_balloonView;_showBalloonThrottled;_lastFocusedEditableElement;constructor(e){super(),this.editor=e,this._balloonView=null,this._lastFocusedEditableElement=null,this._showBalloonThrottled=oo(this._showBalloon.bind(this),50,{leading:!0}),e.on("ready",this._handleEditorReady.bind(this))}destroy(){let e=this._balloonView;e&&(e.unpin(),this._balloonView=null),this._showBalloonThrottled.cancel(),this.stopListening()}_handleEditorReady(){let e=this.editor,t=!!e.config.get("ui.poweredBy.forceVisible");!t&&dm(e.config.get("licenseKey"))==="VALID"||e.ui.view&&(e.ui.focusTracker.on("change:isFocused",(i,o,n)=>{this._updateLastFocusedEditableElement(),n?this._showBalloon():this._hideBalloon()}),e.ui.focusTracker.on("change:focusedElement",(i,o,n)=>{this._updateLastFocusedEditableElement(),n&&this._showBalloon()}),e.ui.on("update",()=>{this._showBalloonThrottled()}))}_createBalloonView(){let e=this.editor,t=this._balloonView=new $i,i=Zp(e),o=new Nd(e.locale,i.label);t.content.add(o),t.set({class:"ck-powered-by-balloon"}),e.ui.view.body.add(t),e.ui.focusTracker.add(t.element),this._balloonView=t}_showBalloon(){if(!this._lastFocusedEditableElement)return;let e=A2(this.editor,this._lastFocusedEditableElement);e&&(this._balloonView||this._createBalloonView(),this._balloonView.pin(e))}_hideBalloon(){this._balloonView&&this._balloonView.unpin()}_updateLastFocusedEditableElement(){let e=this.editor,t=e.ui.focusTracker.isFocused,i=e.ui.focusTracker.focusedElement;if(!t||!i){this._lastFocusedEditableElement=null;return}let o=Array.from(e.ui.getEditableElementsNames()).map(n=>e.ui.getEditableElement(n));o.includes(i)?this._lastFocusedEditableElement=i:this._lastFocusedEditableElement=o[0]}},Nd=class extends G{constructor(e,t){super(e);let i=new Io,o=this.bindTemplate;i.set({content:k2,isColorInherited:!1}),i.extendTemplate({attributes:{style:{width:v2+"px",height:x2+"px"}}}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-powered-by"],"aria-hidden":!0},children:[{tag:"a",attributes:{href:"https://ckeditor.com/?utm_source=ckeditor&utm_medium=referral&utm_campaign=701Dn000000hVgmIAE_powered_by_ckeditor_logo",target:"_blank",tabindex:"-1"},children:[...t?[{tag:"span",attributes:{class:["ck","ck-powered-by__label"]},children:[t]}]:[],i],on:{dragstart:o.to(n=>n.preventDefault())}}]})}};function A2(s,e){let t=Zp(s),i=t.side==="right"?S2(e,t):E2(e,t);return{target:e,positions:[i]}}function S2(s,e){return Kp(s,e,(t,i)=>t.left+t.width-i.width-e.horizontalOffset)}function E2(s,e){return Kp(s,e,t=>t.left+e.horizontalOffset)}function Kp(s,e,t){return(i,o)=>{let n=new se(s);if(n.width<_2||n.height<y2)return null;let r;e.position==="inside"?r=n.bottom-o.height:r=n.bottom-o.height/2,r-=e.verticalOffset;let a=t(n,o),c=i.clone().moveTo(a,r).getIntersection(o.clone().moveTo(a,r)).getVisible();return!c||c.getArea()<o.getArea()?null:{top:r,left:a,name:`position_${e.position}-side_${e.side}`,config:{withArrow:!1}}}}function Zp(s){let e=s.config.get("ui.poweredBy"),t=e&&e.position||"border";return B({position:t,label:C2,verticalOffset:t==="inside"?5:0,horizontalOffset:5,side:s.locale.contentLanguageDirection==="ltr"?"right":"left"},e)}var Dp={POLITE:"polite",ASSERTIVE:"assertive"},Vd=class{editor;view;constructor(e){this.editor=e,e.once("ready",()=>{for(let t of Object.values(Dp))this.announce("",t)})}announce(e,t=Dp.POLITE){let i=this.editor;if(!i.ui.view)return;this.view||(this.view=new Dd(i.locale),i.ui.view.body.add(this.view));let{politeness:o,isUnsafeHTML:n}=typeof t=="string"?{politeness:t}:t,r=this.view.regionViews.find(a=>a.politeness===o);r||(r=new Bd(i,o),this.view.regionViews.add(r)),r.announce({announcement:e,isUnsafeHTML:n})}},Dd=class extends G{regionViews;constructor(e){super(e),this.regionViews=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-aria-live-announcer"]},children:this.regionViews})}},Bd=class extends G{politeness;_domConverter;_pruneAnnouncementsInterval;constructor(e,t){super(e.locale),this.setTemplate({tag:"div",attributes:{role:"region","aria-live":t,"aria-relevant":"additions"},children:[{tag:"ul",attributes:{class:["ck","ck-aria-live-region-list"]}}]}),e.on("destroy",()=>{this._pruneAnnouncementsInterval!==null&&(clearInterval(this._pruneAnnouncementsInterval),this._pruneAnnouncementsInterval=null)}),this.politeness=t,this._domConverter=e.data.htmlProcessor.domConverter,this._pruneAnnouncementsInterval=setInterval(()=>{this.element&&this._listElement.firstChild&&this._listElement.firstChild.remove()},5e3)}announce({announcement:e,isUnsafeHTML:t}){if(!e.trim().length)return;let i=document.createElement("li");t?this._domConverter.setContentOf(i,e):i.innerText=e,this._listElement.appendChild(i)}get _listElement(){return this.element.querySelector("ul")}},Yi=class extends ge(){editor;componentFactory;focusTracker;tooltipManager;poweredBy;ariaLiveAnnouncer;isReady=!1;_editableElementsMap=new Map;_focusableToolbarDefinitions=[];constructor(e){super();let t=e.editing.view;this.editor=e,this.componentFactory=new Pd(e),this.focusTracker=new Ie,this.tooltipManager=new Ld(e),this.poweredBy=new Rd(e),this.ariaLiveAnnouncer=new Vd(e),this.set("viewportOffset",this._readViewportOffsetFromConfig()),this.once("ready",()=>{this.isReady=!0}),this.listenTo(t.document,"layoutChanged",this.update.bind(this)),this.listenTo(t,"scrollToTheSelection",this._handleScrollToTheSelection.bind(this)),this._initFocusTracking()}get element(){return null}update(){this.fire("update")}destroy(){this.stopListening(),this.focusTracker.destroy(),this.tooltipManager.destroy(this.editor),this.poweredBy.destroy();for(let e of this._editableElementsMap.values())e.ckeditorInstance=null,this.editor.keystrokes.stopListening(e);this._editableElementsMap=new Map,this._focusableToolbarDefinitions=[]}setEditableElement(e,t){this._editableElementsMap.set(e,t),t.ckeditorInstance||(t.ckeditorInstance=this.editor),this.focusTracker.add(t);let i=()=>{this.editor.editing.view.getDomRoot(e)||this.editor.keystrokes.listenTo(t)};this.isReady?i():this.once("ready",i)}removeEditableElement(e){let t=this._editableElementsMap.get(e);t&&(this._editableElementsMap.delete(e),this.editor.keystrokes.stopListening(t),this.focusTracker.remove(t),t.ckeditorInstance=null)}getEditableElement(e="main"){return this._editableElementsMap.get(e)}getEditableElementsNames(){return this._editableElementsMap.keys()}addToolbar(e,t={}){e.isRendered?(this.focusTracker.add(e.element),this.editor.keystrokes.listenTo(e.element)):e.once("render",()=>{this.focusTracker.add(e.element),this.editor.keystrokes.listenTo(e.element)}),this._focusableToolbarDefinitions.push({toolbarView:e,options:t})}get _editableElements(){return console.warn("editor-ui-deprecated-editable-elements: The EditorUI#_editableElements property has been deprecated and will be removed in the near future.",{editorUI:this}),this._editableElementsMap}_readViewportOffsetFromConfig(){let e=this.editor,t=e.config.get("ui.viewportOffset");if(t)return t;let i=e.config.get("toolbar.viewportTopOffset");return i?(console.warn("editor-ui-deprecated-viewport-offset-config: The `toolbar.vieportTopOffset` configuration option is deprecated. It will be removed from future CKEditor versions. Use `ui.viewportOffset.top` instead."),{top:i}):{top:0}}_initFocusTracking(){let e=this.editor,t=e.editing.view,i,o;e.keystrokes.set("Alt+F10",(n,r)=>{let a=this.focusTracker.focusedElement;Array.from(this._editableElementsMap.values()).includes(a)&&!Array.from(t.domRoots.values()).includes(a)&&(i=a);let l=this._getCurrentFocusedToolbarDefinition();(!l||!o)&&(o=this._getFocusableCandidateToolbarDefinitions());for(let c=0;c<o.length;c++){let d=o.shift();if(o.push(d),d!==l&&this._focusFocusableCandidateToolbar(d)){l&&l.options.afterBlur&&l.options.afterBlur();break}}r()}),e.keystrokes.set("Esc",(n,r)=>{let a=this._getCurrentFocusedToolbarDefinition();a&&(i?(i.focus(),i=null):e.editing.view.focus(),a.options.afterBlur&&a.options.afterBlur(),r())})}_getFocusableCandidateToolbarDefinitions(){let e=[];for(let t of this._focusableToolbarDefinitions){let{toolbarView:i,options:o}=t;(Ai(i.element)||o.beforeFocus)&&e.push(t)}return e.sort((t,i)=>Bp(t)-Bp(i)),e}_getCurrentFocusedToolbarDefinition(){for(let e of this._focusableToolbarDefinitions)if(e.toolbarView.element&&e.toolbarView.element.contains(this.focusTracker.focusedElement))return e;return null}_focusFocusableCandidateToolbar(e){let{toolbarView:t,options:{beforeFocus:i}}=e;return i&&i(),Ai(t.element)?(t.focus(),!0):!1}_handleScrollToTheSelection(e,t){let i=B({top:0,bottom:0,left:0,right:0},this.viewportOffset);t.viewportOffset.top+=i.top,t.viewportOffset.bottom+=i.bottom,t.viewportOffset.left+=i.left,t.viewportOffset.right+=i.right}};function Bp(s){let{toolbarView:e,options:t}=s,i=10;return Ai(e.element)&&i--,t.isContextual&&i--,i}var Eo=class extends G{body;constructor(e){super(e),this.body=new md(e)}render(){super.render(),this.body.attachToDom()}destroy(){return this.body.detachFromDom(),super.destroy()}},pa=class extends Eo{top;main;_voiceLabelView;constructor(e){super(e),this.top=this.createCollection(),this.main=this.createCollection(),this._voiceLabelView=this._createVoiceLabel(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-reset","ck-editor","ck-rounded-corners"],role:"application",dir:e.uiLanguageDirection,lang:e.uiLanguage,"aria-labelledby":this._voiceLabelView.id},children:[this._voiceLabelView,{tag:"div",attributes:{class:["ck","ck-editor__top","ck-reset_all"],role:"presentation"},children:this.top},{tag:"div",attributes:{class:["ck","ck-editor__main"],role:"presentation"},children:this.main}]})}_createVoiceLabel(){let e=this.t,t=new Ii;return t.text=e("Rich Text Editor"),t.extendTemplate({attributes:{class:"ck-voice-label"}}),t}},zd=class extends G{name=null;_editingView;_editableElement;_hasExternalElement;constructor(e,t,i){super(e),this.setTemplate({tag:"div",attributes:{class:["ck","ck-content","ck-editor__editable","ck-rounded-corners"],lang:e.contentLanguage,dir:e.contentLanguageDirection}}),this.set("isFocused",!1),this._editableElement=i,this._hasExternalElement=!!this._editableElement,this._editingView=t}render(){super.render(),this._hasExternalElement?this.template.apply(this.element=this._editableElement):this._editableElement=this.element,this.on("change:isFocused",()=>this._updateIsFocusedClasses()),this._updateIsFocusedClasses()}destroy(){this._hasExternalElement&&this.template.revert(this._editableElement),super.destroy()}get hasExternalElement(){return this._hasExternalElement}_updateIsFocusedClasses(){let e=this._editingView;e.isRenderingInProgress?i(this):t(this);function t(o){e.change(n=>{let r=e.document.getRoot(o.name);n.addClass(o.isFocused?"ck-focused":"ck-blurred",r),n.removeClass(o.isFocused?"ck-blurred":"ck-focused",r)})}function i(o){e.once("change:isRenderingInProgress",(n,r,a)=>{a?i(o):t(o)})}}},Xi=class extends zd{_generateLabel;constructor(e,t,i,o={}){super(e,t,i);let n=e.t;this.extendTemplate({attributes:{role:"textbox",class:"ck-editor__editable_inline"}}),this._generateLabel=o.label||(()=>n("Editor editing area: %0",this.name))}render(){super.render();let e=this._editingView;e.change(t=>{let i=e.document.getRoot(this.name);t.setAttribute("aria-label",this._generateLabel(this),i)})}};var Lt=class extends ge(){constructor(e,t){super(),t&&br(this,t),e&&this.set(e)}},sa=Ci("px"),Mi=class extends V{positionLimiter;visibleStack;_viewToStack=new Map;_idToStack=new Map;_view=null;_rotatorView=null;_fakePanelsView=null;static get pluginName(){return"ContextualBalloon"}constructor(e){super(e),this.positionLimiter=()=>{let t=this.editor.editing.view,o=t.document.selection.editableElement;return o?t.domConverter.mapViewToDom(o.root):null},this.set("visibleView",null),this.set("_numberOfStacks",0),this.set("_singleViewMode",!1)}destroy(){super.destroy(),this._view&&this._view.destroy(),this._rotatorView&&this._rotatorView.destroy(),this._fakePanelsView&&this._fakePanelsView.destroy()}get view(){return this._view||this._createPanelView(),this._view}hasView(e){return Array.from(this._viewToStack.keys()).includes(e)}add(e){if(this._view||this._createPanelView(),this.hasView(e.view))throw new E("contextualballoon-add-view-exist",[this,e]);let t=e.stackId||"main";if(!this._idToStack.has(t)){this._idToStack.set(t,new Map([[e.view,e]])),this._viewToStack.set(e.view,this._idToStack.get(t)),this._numberOfStacks=this._idToStack.size,(!this._visibleStack||e.singleViewMode)&&this.showStack(t);return}let i=this._idToStack.get(t);e.singleViewMode&&this.showStack(t),i.set(e.view,e),this._viewToStack.set(e.view,i),i===this._visibleStack&&this._showView(e)}remove(e){if(!this.hasView(e))throw new E("contextualballoon-remove-view-not-exist",[this,e]);let t=this._viewToStack.get(e);this._singleViewMode&&this.visibleView===e&&(this._singleViewMode=!1),this.visibleView===e&&(t.size===1?this._idToStack.size>1?this._showNextStack():(this.view.hide(),this.visibleView=null,this._rotatorView.hideView()):this._showView(Array.from(t.values())[t.size-2])),t.size===1?(this._idToStack.delete(this._getStackId(t)),this._numberOfStacks=this._idToStack.size):t.delete(e),this._viewToStack.delete(e)}updatePosition(e){e&&(this._visibleStack.get(this.visibleView).position=e),this.view.pin(this._getBalloonPosition()),this._fakePanelsView.updatePosition()}showStack(e){this.visibleStack=e;let t=this._idToStack.get(e);if(!t)throw new E("contextualballoon-showstack-stack-not-exist",this);this._visibleStack!==t&&this._showView(Array.from(t.values()).pop())}_createPanelView(){this._view=new $i(this.editor.locale),this.editor.ui.view.body.add(this._view),this.editor.ui.focusTracker.add(this._view.element),this._rotatorView=this._createRotatorView(),this._fakePanelsView=this._createFakePanelsView()}get _visibleStack(){return this._viewToStack.get(this.visibleView)}_getStackId(e){return Array.from(this._idToStack.entries()).find(i=>i[1]===e)[0]}_showNextStack(){let e=Array.from(this._idToStack.values()),t=e.indexOf(this._visibleStack)+1;e[t]||(t=0),this.showStack(this._getStackId(e[t]))}_showPrevStack(){let e=Array.from(this._idToStack.values()),t=e.indexOf(this._visibleStack)-1;e[t]||(t=e.length-1),this.showStack(this._getStackId(e[t]))}_createRotatorView(){let e=new Fd(this.editor.locale),t=this.editor.locale.t;return this.view.content.add(e),e.bind("isNavigationVisible").to(this,"_numberOfStacks",this,"_singleViewMode",(i,o)=>!o&&i>1),e.on("change:isNavigationVisible",()=>this.updatePosition(),{priority:"low"}),e.bind("counter").to(this,"visibleView",this,"_numberOfStacks",(i,o)=>{if(o<2)return"";let n=Array.from(this._idToStack.values()).indexOf(this._visibleStack)+1;return t("%0 of %1",[n,o])}),e.buttonNextView.on("execute",()=>{e.focusTracker.isFocused&&this.editor.editing.view.focus(),this._showNextStack()}),e.buttonPrevView.on("execute",()=>{e.focusTracker.isFocused&&this.editor.editing.view.focus(),this._showPrevStack()}),e}_createFakePanelsView(){let e=new Od(this.editor.locale,this.view);return e.bind("numberOfPanels").to(this,"_numberOfStacks",this,"_singleViewMode",(t,i)=>!i&&t>=2?Math.min(t-1,2):0),e.listenTo(this.view,"change:top",()=>e.updatePosition()),e.listenTo(this.view,"change:left",()=>e.updatePosition()),this.editor.ui.view.body.add(e),e}_showView({view:e,balloonClassName:t="",withArrow:i=!0,singleViewMode:o=!1}){this.view.class=t,this.view.withArrow=i,this._rotatorView.showView(e),this.visibleView=e,this.view.pin(this._getBalloonPosition()),this._fakePanelsView.updatePosition(),o&&(this._singleViewMode=!0)}_getBalloonPosition(){let e=Array.from(this._visibleStack.values()).pop().position;return e&&(e.limiter||(e=Object.assign({},e,{limiter:this.positionLimiter})),e=Object.assign({},e,{viewportOffsetConfig:this.editor.ui.viewportOffset})),e}},Fd=class extends G{focusTracker;buttonPrevView;buttonNextView;content;constructor(e){super(e);let t=e.t,i=this.bindTemplate;this.set("isNavigationVisible",!0),this.focusTracker=new Ie,this.buttonPrevView=this._createButtonView(t("Previous"),oe.previousArrow),this.buttonNextView=this._createButtonView(t("Next"),oe.nextArrow),this.content=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-balloon-rotator"],"z-index":"-1"},children:[{tag:"div",attributes:{class:["ck-balloon-rotator__navigation",i.to("isNavigationVisible",o=>o?"":"ck-hidden")]},children:[this.buttonPrevView,{tag:"span",attributes:{class:["ck-balloon-rotator__counter"]},children:[{text:i.to("counter")}]},this.buttonNextView]},{tag:"div",attributes:{class:"ck-balloon-rotator__content"},children:this.content}]})}render(){super.render(),this.focusTracker.add(this.element)}destroy(){super.destroy(),this.focusTracker.destroy()}showView(e){this.hideView(),this.content.add(e)}hideView(){this.content.clear()}_createButtonView(e,t){let i=new Z(this.locale);return i.set({label:e,icon:t,tooltip:!0}),i}},Od=class extends G{content;_balloonPanelView;constructor(e,t){super(e);let i=this.bindTemplate;this.set("top",0),this.set("left",0),this.set("height",0),this.set("width",0),this.set("numberOfPanels",0),this.content=this.createCollection(),this._balloonPanelView=t,this.setTemplate({tag:"div",attributes:{class:["ck-fake-panel",i.to("numberOfPanels",o=>o?"":"ck-hidden")],style:{top:i.to("top",sa),left:i.to("left",sa),width:i.to("width",sa),height:i.to("height",sa)}},children:this.content}),this.on("change:numberOfPanels",(o,n,r,a)=>{r>a?this._addPanels(r-a):this._removePanels(a-r),this.updatePosition()})}_addPanels(e){for(;e--;){let t=new G;t.setTemplate({tag:"div"}),this.content.add(t),this.registerChild(t)}}_removePanels(e){for(;e--;){let t=this.content.last;this.content.remove(t),this.deregisterChild(t),t.destroy()}}updatePosition(){if(this.numberOfPanels){let{top:e,left:t}=this._balloonPanelView,{width:i,height:o}=new se(this._balloonPanelView.element);Object.assign(this,{top:e,left:t,width:i,height:o})}}},_n=Ci("px"),ba=class extends G{content;contentPanelElement;_contentPanelPlaceholder;constructor(e){super(e);let t=this.bindTemplate;this.set("isActive",!1),this.set("isSticky",!1),this.set("limiterElement",null),this.set("limiterBottomOffset",50),this.set("viewportTopOffset",0),this.set("_marginLeft",null),this.set("_isStickyToTheBottomOfLimiter",!1),this.set("_stickyTopOffset",null),this.set("_stickyBottomOffset",null),this.content=this.createCollection(),this._contentPanelPlaceholder=new it({tag:"div",attributes:{class:["ck","ck-sticky-panel__placeholder"],style:{display:t.to("isSticky",i=>i?"block":"none"),height:t.to("isSticky",i=>i?_n(this._contentPanelRect.height):null)}}}).render(),this.contentPanelElement=new it({tag:"div",attributes:{class:["ck","ck-sticky-panel__content",t.if("isSticky","ck-sticky-panel__content_sticky"),t.if("_isStickyToTheBottomOfLimiter","ck-sticky-panel__content_sticky_bottom-limit")],style:{width:t.to("isSticky",i=>i?_n(this._contentPanelPlaceholder.getBoundingClientRect().width):null),top:t.to("_stickyTopOffset",i=>i&&_n(i)),bottom:t.to("_stickyBottomOffset",i=>i&&_n(i)),marginLeft:t.to("_marginLeft")}},children:this.content}).render(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-sticky-panel"]},children:[this._contentPanelPlaceholder,this.contentPanelElement]})}render(){super.render(),this.checkIfShouldBeSticky(),this.listenTo(j.document,"scroll",()=>{this.checkIfShouldBeSticky()},{useCapture:!0}),this.listenTo(this,"change:isActive",()=>{this.checkIfShouldBeSticky()})}checkIfShouldBeSticky(){if(!this.limiterElement||!this.isActive){this._unstick();return}let e=new se(this.limiterElement),t=e.getVisible();if(t){let i=new se(j.window);i.top+=this.viewportTopOffset,i.height-=this.viewportTopOffset,t=t.getIntersection(i)}if(t&&e.top<t.top){let i=t.top;if(i+this._contentPanelRect.height+this.limiterBottomOffset>t.bottom){let o=Math.max(e.bottom-t.bottom,0)+this.limiterBottomOffset;e.bottom-o>e.top+this._contentPanelRect.height?this._stickToBottomOfLimiter(o):this._unstick()}else this._contentPanelRect.height+this.limiterBottomOffset<e.height?this._stickToTopOfAncestors(i):this._unstick()}else this._unstick()}_stickToTopOfAncestors(e){this.isSticky=!0,this._isStickyToTheBottomOfLimiter=!1,this._stickyTopOffset=e,this._stickyBottomOffset=null,this._marginLeft=_n(-j.window.scrollX)}_stickToBottomOfLimiter(e){this.isSticky=!0,this._isStickyToTheBottomOfLimiter=!0,this._stickyTopOffset=null,this._stickyBottomOffset=e,this._marginLeft=_n(-j.window.scrollX)}_unstick(){this.isSticky=!1,this._isStickyToTheBottomOfLimiter=!1,this._stickyTopOffset=null,this._stickyBottomOffset=null,this._marginLeft=null}get _contentPanelRect(){return new se(this.contentPanelElement)}};var Hd=class extends Z{arrowView;constructor(e){super(e);let t=this.bindTemplate;this.set({withText:!0,role:"menuitem"}),this.arrowView=this._createArrowView(),this.extendTemplate({attributes:{class:["ck-menu-bar__menu__button"],"aria-haspopup":!0,"aria-expanded":this.bindTemplate.to("isOn",i=>String(i)),"data-cke-tooltip-disabled":t.to("isOn")},on:{mouseenter:t.to("mouseenter")}})}render(){super.render(),this.children.add(this.arrowView)}_createArrowView(){let e=new Io;return e.content=Gd,e.extendTemplate({attributes:{class:"ck-menu-bar__menu__button__arrow"}}),e}},ut=class extends ui{constructor(e,t){super(e);let i=this.bindTemplate;this.extendTemplate({attributes:{class:["ck-menu-bar__menu__item"]},on:{mouseenter:i.to("mouseenter")}}),this.delegate("mouseenter").to(t)}},ra=5,Hs={toggleMenusAndFocusItemsOnHover(s){s.on("menu:mouseenter",e=>{if(s.isOpen){for(let t of s.menus){let i=e.path[0],o=i instanceof ut&&i.children.first===t;t.isOpen=(e.path.includes(t)||o)&&t.isEnabled}e.source.focus()}})},focusCycleMenusOnArrows(s){let e=s.locale.uiLanguageDirection==="rtl";s.on("menu:arrowright",i=>{t(i.source,e?-1:1)}),s.on("menu:arrowleft",i=>{t(i.source,e?1:-1)});function t(i,o){let n=s.children.getIndex(i),r=i.isOpen,a=s.children.length,l=s.children.get((n+a+o)%a);i.isOpen=!1,r&&(l.isOpen=!0),l.buttonView.focus()}},closeMenusWhenTheBarCloses(s){s.on("change:isOpen",()=>{s.isOpen||s.menus.forEach(e=>{e.isOpen=!1})})},closeMenuWhenAnotherOnTheSameLevelOpens(s){s.on("menu:change:isOpen",(e,t,i)=>{i&&s.menus.filter(o=>e.source.parentMenuView===o.parentMenuView&&e.source!==o&&o.isOpen).forEach(o=>{o.isOpen=!1})})},closeOnClickOutside(s){To({emitter:s,activator:()=>s.isOpen,callback:()=>s.close(),contextElements:()=>s.children.map(e=>e.element)})}},_o={openAndFocusPanelOnArrowDownKey(s){s.keystrokes.set("arrowdown",(e,t)=>{s.focusTracker.focusedElement===s.buttonView.element&&(s.isOpen||(s.isOpen=!0),s.panelView.focus(),t())})},openOnArrowRightKey(s){let e=s.locale.uiLanguageDirection==="rtl"?"arrowleft":"arrowright";s.keystrokes.set(e,(t,i)=>{s.focusTracker.focusedElement!==s.buttonView.element||!s.isEnabled||(s.isOpen||(s.isOpen=!0),s.panelView.focus(),i())})},openOnButtonClick(s){s.buttonView.on("execute",()=>{s.isOpen=!0,s.panelView.focus()})},toggleOnButtonClick(s){s.buttonView.on("execute",()=>{s.isOpen=!s.isOpen,s.isOpen&&s.panelView.focus()})},closeOnArrowLeftKey(s){let e=s.locale.uiLanguageDirection==="rtl"?"arrowright":"arrowleft";s.keystrokes.set(e,(t,i)=>{s.isOpen&&(s.isOpen=!1,s.focus(),i())})},closeOnEscKey(s){s.keystrokes.set("esc",(e,t)=>{s.isOpen&&(s.isOpen=!1,s.focus(),t())})},closeOnParentClose(s){s.parentMenuView.on("change:isOpen",(e,t,i)=>{!i&&e.source===s.parentMenuView&&(s.isOpen=!1)})}},T2={southEast:s=>({top:s.bottom,left:s.left,name:"se"}),southWest:(s,e)=>({top:s.bottom,left:s.left-e.width+s.width,name:"sw"}),northEast:(s,e)=>({top:s.top-e.height,left:s.left,name:"ne"}),northWest:(s,e)=>({top:s.top-e.height,left:s.left-e.width+s.width,name:"nw"}),eastSouth:s=>({top:s.top,left:s.right-ra,name:"es"}),eastNorth:(s,e)=>({top:s.top-e.height,left:s.right-ra,name:"en"}),westSouth:(s,e)=>({top:s.top,left:s.left-e.width+ra,name:"ws"}),westNorth:(s,e)=>({top:s.top-e.height,left:s.left-e.width+ra,name:"wn"})},I2=[{menuId:"file",label:"File",groups:[{groupId:"export",items:["menuBar:exportPdf","menuBar:exportWord"]},{groupId:"import",items:["menuBar:importWord"]},{groupId:"revisionHistory",items:["menuBar:revisionHistory"]}]},{menuId:"edit",label:"Edit",groups:[{groupId:"undo",items:["menuBar:undo","menuBar:redo"]},{groupId:"selectAll",items:["menuBar:selectAll"]},{groupId:"findAndReplace",items:["menuBar:findAndReplace"]}]},{menuId:"view",label:"View",groups:[{groupId:"sourceEditing",items:["menuBar:sourceEditing"]},{groupId:"showBlocks",items:["menuBar:showBlocks"]},{groupId:"restrictedEditingException",items:["menuBar:restrictedEditingException"]}]},{menuId:"insert",label:"Insert",groups:[{groupId:"insertMainWidgets",items:["menuBar:insertImage","menuBar:ckbox","menuBar:ckfinder","menuBar:insertTable"]},{groupId:"insertInline",items:["menuBar:link","menuBar:comment"]},{groupId:"insertMinorWidgets",items:["menuBar:mediaEmbed","menuBar:insertTemplate","menuBar:blockQuote","menuBar:codeBlock","menuBar:htmlEmbed"]},{groupId:"insertStructureWidgets",items:["menuBar:horizontalLine","menuBar:pageBreak","menuBar:tableOfContents"]},{groupId:"restrictedEditing",items:["menuBar:restrictedEditing"]}]},{menuId:"format",label:"Format",groups:[{groupId:"textAndFont",items:[{menuId:"text",label:"Text",groups:[{groupId:"basicStyles",items:["menuBar:bold","menuBar:italic","menuBar:underline","menuBar:strikethrough","menuBar:superscript","menuBar:subscript","menuBar:code"]},{groupId:"textPartLanguage",items:["menuBar:textPartLanguage"]}]},{menuId:"font",label:"Font",groups:[{groupId:"fontProperties",items:["menuBar:fontSize","menuBar:fontFamily"]},{groupId:"fontColors",items:["menuBar:fontColor","menuBar:fontBackgroundColor"]},{groupId:"highlight",items:["menuBar:highlight"]}]},"menuBar:heading"]},{groupId:"list",items:["menuBar:bulletedList","menuBar:numberedList","menuBar:multiLevelList","menuBar:todoList"]},{groupId:"indent",items:["menuBar:alignment","menuBar:indent","menuBar:outdent"]},{groupId:"caseChange",items:["menuBar:caseChange"]},{groupId:"removeFormat",items:["menuBar:removeFormat"]}]},{menuId:"tools",label:"Tools",groups:[{groupId:"aiTools",items:["menuBar:aiAssistant","menuBar:aiCommands"]},{groupId:"tools",items:["menuBar:trackChanges","menuBar:commentsArchive"]}]},{menuId:"help",label:"Help",groups:[{groupId:"help",items:["menuBar:accessibilityHelp"]}]}];function P2(s){let e;return!("items"in s)||!s.items?e=B({items:Et(I2),addItems:[],removeItems:[],isVisible:!0,isUsingDefaultConfig:!0},s):e=B({items:s.items,removeItems:[],addItems:[],isVisible:!0,isUsingDefaultConfig:!1},s),e}function M2({normalizedConfig:s,locale:e,componentFactory:t}){let i=Et(s);return L2(s,i),R2(s,i),N2(s,i,t),Qp(s,i),V2(i,e),i}function L2(s,e){let t=e.removeItems,i=[];e.items=e.items.filter(({menuId:o})=>t.includes(o)?(i.push(o),!1):!0),Mn(e.items,o=>{o.groups=o.groups.filter(({groupId:n})=>t.includes(n)?(i.push(n),!1):!0);for(let n of o.groups)n.items=n.items.filter(r=>{let a=Jp(r);return t.includes(a)?(i.push(a),!1):!0})});for(let o of t)i.includes(o)||de("menu-bar-item-could-not-be-removed",{menuBarConfig:s,itemName:o})}function R2(s,e){let t=e.addItems,i=[];for(let o of t){let n=z2(o.position),r=F2(o.position);if(D2(o))if(!r)n==="start"?(e.items.unshift(o.menu),i.push(o)):n==="end"&&(e.items.push(o.menu),i.push(o));else{let a=e.items.findIndex(l=>l.menuId===r);a!=-1?n==="before"?(e.items.splice(a,0,o.menu),i.push(o)):n==="after"&&(e.items.splice(a+1,0,o.menu),i.push(o)):zp(e,o.menu,r,n)&&i.push(o)}else B2(o)?Mn(e.items,a=>{if(a.menuId===r)n==="start"?(a.groups.unshift(o.group),i.push(o)):n==="end"&&(a.groups.push(o.group),i.push(o));else{let l=a.groups.findIndex(c=>c.groupId===r);l!==-1&&(n==="before"?(a.groups.splice(l,0,o.group),i.push(o)):n==="after"&&(a.groups.splice(l+1,0,o.group),i.push(o)))}}):zp(e,o.item,r,n)&&i.push(o)}for(let o of t)i.includes(o)||de("menu-bar-item-could-not-be-added",{menuBarConfig:s,addedItemConfig:o})}function zp(s,e,t,i){let o=!1;return Mn(s.items,n=>{for(let{groupId:r,items:a}of n.groups){if(o)return;if(r===t)i==="start"?(a.unshift(e),o=!0):i==="end"&&(a.push(e),o=!0);else{let l=a.findIndex(c=>Jp(c)===t);l!==-1&&(i==="before"?(a.splice(l,0,e),o=!0):i==="after"&&(a.splice(l+1,0,e),o=!0))}}}),o}function N2(s,e,t){Mn(e.items,i=>{for(let o of i.groups)o.items=o.items.filter(n=>{let r=typeof n=="string"&&!t.has(n);return r&&!e.isUsingDefaultConfig&&de("menu-bar-item-unavailable",{menuBarConfig:s,parentMenuConfig:Et(i),componentName:n}),!r})})}function Qp(s,e){let t=e.isUsingDefaultConfig,i=!1;if(e.items=e.items.filter(o=>o.groups.length?!0:(ld(s,o,t),!1)),!e.items.length){ld(s,s,t);return}Mn(e.items,o=>{o.groups=o.groups.filter(n=>n.items.length?!0:(i=!0,!1));for(let n of o.groups)n.items=n.items.filter(r=>eb(r)&&!r.groups.length?(ld(s,r,t),i=!0,!1):!0)}),i&&Qp(s,e)}function ld(s,e,t){t||de("menu-bar-menu-empty",{menuBarConfig:s,emptyMenuConfig:e})}function V2(s,e){let t=e.t,i={File:t({string:"File",id:"MENU_BAR_MENU_FILE"}),Edit:t({string:"Edit",id:"MENU_BAR_MENU_EDIT"}),View:t({string:"View",id:"MENU_BAR_MENU_VIEW"}),Insert:t({string:"Insert",id:"MENU_BAR_MENU_INSERT"}),Format:t({string:"Format",id:"MENU_BAR_MENU_FORMAT"}),Tools:t({string:"Tools",id:"MENU_BAR_MENU_TOOLS"}),Help:t({string:"Help",id:"MENU_BAR_MENU_HELP"}),Text:t({string:"Text",id:"MENU_BAR_MENU_TEXT"}),Font:t({string:"Font",id:"MENU_BAR_MENU_FONT"})};Mn(s.items,o=>{o.label in i&&(o.label=i[o.label])})}function Mn(s,e){if(Array.isArray(s))for(let i of s)t(i);function t(i){e(i);for(let o of i.groups)for(let n of o.items)eb(n)&&t(n)}}function D2(s){return typeof s=="object"&&"menu"in s}function B2(s){return typeof s=="object"&&"group"in s}function z2(s){return s.startsWith("start")?"start":s.startsWith("end")?"end":s.startsWith("after")?"after":"before"}function F2(s){let e=s.match(/^[^:]+:(.+)/);return e?e[1]:null}function Jp(s){return typeof s=="string"?s:s.menuId}function eb(s){return typeof s=="object"&&"menuId"in s}function ya(s,e){let t=e.element;s.ui.focusTracker.add(t),s.keystrokes.listenTo(t);let i=P2(s.config.get("menuBar")||{});e.fillFromConfig(i,s.ui.componentFactory),s.keystrokes.set("Esc",(o,n)=>{t.contains(s.ui.focusTracker.focusedElement)&&(s.editing.view.focus(),n())}),s.keystrokes.set("Alt+F9",(o,n)=>{t.contains(s.ui.focusTracker.focusedElement)||(e.focus(),n())})}var Wd=class extends G{children;constructor(e){super(e);let t=this.bindTemplate;this.set("isVisible",!1),this.set("position","se"),this.children=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-reset","ck-menu-bar__menu__panel",t.to("position",i=>`ck-menu-bar__menu__panel_position_${i}`),t.if("isVisible","ck-hidden",i=>!i)],tabindex:"-1"},children:this.children,on:{selectstart:t.to(i=>{i.target.tagName.toLocaleLowerCase()!=="input"&&i.preventDefault()})}})}focus(e=1){this.children.length&&(e===1?this.children.first.focus():this.children.last.focus())}},Xe=(()=>{class s extends G{buttonView;panelView;focusTracker;keystrokes;constructor(t){super(t);let i=this.bindTemplate;this.buttonView=new Hd(t),this.buttonView.delegate("mouseenter").to(this),this.buttonView.bind("isOn","isEnabled").to(this,"isOpen","isEnabled"),this.panelView=new Wd(t),this.panelView.bind("isVisible").to(this,"isOpen"),this.keystrokes=new Le,this.focusTracker=new Ie,this.set("isOpen",!1),this.set("isEnabled",!0),this.set("panelPosition","w"),this.set("class",void 0),this.set("parentMenuView",null),this.setTemplate({tag:"div",attributes:{class:["ck","ck-menu-bar__menu",i.to("class"),i.if("isEnabled","ck-disabled",o=>!o),i.if("parentMenuView","ck-menu-bar__menu_top-level",o=>!o)]},children:[this.buttonView,this.panelView]})}render(){super.render(),this.focusTracker.add(this.buttonView.element),this.focusTracker.add(this.panelView.element),this.keystrokes.listenTo(this.element),_o.closeOnEscKey(this),this._repositionPanelOnOpen()}_attachBehaviors(){this.parentMenuView?(_o.openOnButtonClick(this),_o.openOnArrowRightKey(this),_o.closeOnArrowLeftKey(this),_o.closeOnParentClose(this)):(this._propagateArrowKeystrokeEvents(),_o.openAndFocusPanelOnArrowDownKey(this),_o.toggleOnButtonClick(this))}_propagateArrowKeystrokeEvents(){this.keystrokes.set("arrowright",(t,i)=>{this.fire("arrowright"),i()}),this.keystrokes.set("arrowleft",(t,i)=>{this.fire("arrowleft"),i()})}_repositionPanelOnOpen(){this.on("change:isOpen",(t,i,o)=>{if(!o)return;let n=s._getOptimalPosition({element:this.panelView.element,target:this.buttonView.element,fitInViewport:!0,positions:this._panelPositions});this.panelView.position=n?n.name:this._panelPositions[0].name})}focus(){this.buttonView.focus()}get _panelPositions(){let{southEast:t,southWest:i,northEast:o,northWest:n,westSouth:r,eastSouth:a,westNorth:l,eastNorth:c}=T2;return this.locale.uiLanguageDirection==="ltr"?this.parentMenuView?[a,c,r,l]:[t,i,o,n]:this.parentMenuView?[r,l,a,c]:[i,t,n,o]}static _getOptimalPosition=Pr}return s})(),gt=class extends So{constructor(e){super(e),this.role="menu"}},wa=class extends ha{constructor(e){super(e),this.set({withText:!0,withKeystroke:!0,tooltip:!1,role:"menuitem"}),this.extendTemplate({attributes:{class:["ck-menu-bar__menu__item__button"]}})}},Fp=["mouseenter","arrowleft","arrowright","change:isOpen"],Tn=class extends G{children;menus=[];constructor(e){super(e);let t=e.t;this.set("isOpen",!1),this._setupIsOpenUpdater(),this.children=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-menu-bar"],"aria-label":t("Editor menu bar"),role:"menubar"},children:this.children})}fillFromConfig(e,t){let i=this.locale,n=M2({normalizedConfig:e,locale:i,componentFactory:t}).items.map(r=>this._createMenu({componentFactory:t,menuDefinition:r}));this.children.addMany(n)}render(){super.render(),Hs.toggleMenusAndFocusItemsOnHover(this),Hs.closeMenusWhenTheBarCloses(this),Hs.closeMenuWhenAnotherOnTheSameLevelOpens(this),Hs.focusCycleMenusOnArrows(this),Hs.closeOnClickOutside(this)}focus(){this.children.first&&this.children.first.focus()}close(){for(let e of this.children)e.isOpen=!1}registerMenu(e,t=null){t?(e.delegate(...Fp).to(t),e.parentMenuView=t):e.delegate(...Fp).to(this,i=>"menu:"+i),e._attachBehaviors(),this.menus.push(e)}_createMenu({componentFactory:e,menuDefinition:t,parentMenuView:i}){let o=this.locale,n=new Xe(o);return this.registerMenu(n,i),n.buttonView.set({label:t.label}),n.once("change:isOpen",()=>{let r=new gt(o);r.ariaLabel=t.label,n.panelView.children.add(r),r.items.addMany(this._createMenuItems({menuDefinition:t,parentMenuView:n,componentFactory:e}))}),n}_createMenuItems({menuDefinition:e,parentMenuView:t,componentFactory:i}){let o=this.locale,n=[];for(let r of e.groups){for(let a of r.items){let l=new ut(o,t);if(Bt(a))l.children.add(this._createMenu({componentFactory:i,menuDefinition:a,parentMenuView:t}));else{let c=this._createMenuItemContentFromFactory({componentName:a,componentFactory:i,parentMenuView:t});if(!c)continue;l.children.add(c)}n.push(l)}r!==e.groups[e.groups.length-1]&&n.push(new Ao(o))}return n}_createMenuItemContentFromFactory({componentName:e,parentMenuView:t,componentFactory:i}){let o=i.create(e);return o instanceof Xe||o instanceof ae||o instanceof wa?(this._registerMenuTree(o,t),o.on("execute",()=>{this.close()}),o):(de("menu-bar-component-unsupported",{componentName:e,componentView:o}),null)}_registerMenuTree(e,t){if(!(e instanceof Xe)){e.delegate("mouseenter").to(t);return}this.registerMenu(e,t);let i=e.panelView.children.filter(n=>n instanceof gt)[0];if(!i){e.delegate("mouseenter").to(t);return}let o=i.items.filter(n=>n instanceof ui);for(let n of o)this._registerMenuTree(n.children.get(0),e)}_setupIsOpenUpdater(){let e;this.on("menu:change:isOpen",(t,i,o)=>{clearTimeout(e),o?this.isOpen=!0:e=setTimeout(()=>{this.isOpen=Array.from(this.children).some(n=>n.isOpen)},0)})}};var Zd=["left","right","center","justify"];function ib(s){return Zd.includes(s)}function ob(s,e){return e.contentLanguageDirection=="rtl"?s==="right":s==="left"}function nb(s){let e=s.map(i=>{let o;return typeof i=="string"?o={name:i}:o=i,o}).filter(i=>{let o=Zd.includes(i.name);return o||de("alignment-config-name-not-recognized",{option:i}),o}),t=e.filter(i=>!!i.className).length;if(t&&t<e.length)throw new E("alignment-config-classnames-are-missing",{configuredOptions:s});return e.forEach((i,o,n)=>{let r=n.slice(o+1);if(r.some(l=>l.name==i.name))throw new E("alignment-config-name-already-defined",{option:i,configuredOptions:s});if(i.className&&r.some(c=>c.className==i.className))throw new E("alignment-config-classname-already-defined",{option:i,configuredOptions:s})}),e}var Qd="alignment",Xd=class extends ie{refresh(){let t=this.editor.locale,i=Se(this.editor.model.document.selection.getSelectedBlocks());this.isEnabled=!!i&&this._canBeAligned(i),this.isEnabled&&i.hasAttribute("alignment")?this.value=i.getAttribute("alignment"):this.value=t.contentLanguageDirection==="rtl"?"right":"left"}execute(e={}){let t=this.editor,i=t.locale,o=t.model,n=o.document,r=e.value;o.change(a=>{let l=Array.from(n.selection.getSelectedBlocks()).filter(h=>this._canBeAligned(h)),c=l[0].getAttribute("alignment");ob(r,i)||c===r||!r?O2(l,a):H2(l,a,r)})}_canBeAligned(e){return this.editor.model.schema.checkAttribute(e,Qd)}};function O2(s,e){for(let t of s)e.removeAttribute(Qd,t)}function H2(s,e,t){for(let i of s)e.setAttribute(Qd,t,i)}var qd=class extends V{static get pluginName(){return"AlignmentEditing"}constructor(e){super(e),e.config.define("alignment",{options:Zd.map(t=>({name:t}))})}init(){let e=this.editor,t=e.locale,i=e.model.schema,n=nb(e.config.get("alignment.options")).filter(c=>ib(c.name)&&!ob(c.name,t)),r=n.some(c=>!!c.className);i.extend("$block",{allowAttributes:"alignment"}),e.model.schema.setAttributeProperties("alignment",{isFormatting:!0}),r?e.conversion.attributeToAttribute(G2(n)):e.conversion.for("downcast").attributeToAttribute(W2(n));let a=j2(n);for(let c of a)e.conversion.for("upcast").attributeToAttribute(c);let l=U2(n);for(let c of l)e.conversion.for("upcast").attributeToAttribute(c);e.commands.add("alignment",new Xd(e))}};function W2(s){let e={};for(let{name:i}of s)e[i]={key:"style",value:{"text-align":i}};return{model:{key:"alignment",values:s.map(i=>i.name)},view:e}}function j2(s){let e=[];for(let{name:t}of s)e.push({view:{key:"style",value:{"text-align":t}},model:{key:"alignment",value:t}});return e}function U2(s){let e=[];for(let{name:t}of s)e.push({view:{key:"align",value:t},model:{key:"alignment",value:t}});return e}function G2(s){let e={};for(let i of s)e[i.name]={key:"class",value:i.className};return{model:{key:"alignment",values:s.map(i=>i.name)},view:e}}var $s=new Map([["left",oe.alignLeft],["right",oe.alignRight],["center",oe.alignCenter],["justify",oe.alignJustify]]),Kd=class extends V{get localizedOptionTitles(){let e=this.editor.t;return{left:e("Align left"),right:e("Align right"),center:e("Align center"),justify:e("Justify")}}static get pluginName(){return"AlignmentUI"}init(){let e=this.editor,t=nb(e.config.get("alignment.options"));t.map(i=>i.name).filter(ib).forEach(i=>this._addButton(i)),this._addToolbarDropdown(t),this._addMenuBarMenu(t)}_addButton(e){this.editor.ui.componentFactory.add(`alignment:${e}`,i=>this._createButton(i,e))}_createButton(e,t,i={}){let o=this.editor,n=o.commands.get("alignment"),r=new Z(e);return r.set(B({label:this.localizedOptionTitles[t],icon:$s.get(t),tooltip:!0,isToggleable:!0},i)),r.bind("isEnabled").to(n),r.bind("isOn").to(n,"value",a=>a===t),this.listenTo(r,"execute",()=>{o.execute("alignment",{value:t}),o.editing.view.focus()}),r}_addToolbarDropdown(e){let t=this.editor;t.ui.componentFactory.add("alignment",o=>{let n=Fe(o),r=o.uiLanguageDirection==="rtl"?"w":"e",a=o.t;In(n,()=>e.map(d=>this._createButton(o,d.name,{tooltipPosition:r})),{enableActiveItemFocusOnDropdownOpen:!0,isVertical:!0,ariaLabel:a("Text alignment toolbar")}),n.buttonView.set({label:a("Text alignment"),tooltip:!0}),n.extendTemplate({attributes:{class:"ck-alignment-dropdown"}});let l=o.contentLanguageDirection==="rtl"?$s.get("right"):$s.get("left"),c=t.commands.get("alignment");return n.buttonView.bind("icon").to(c,"value",d=>$s.get(d)||l),n.bind("isEnabled").to(c,"isEnabled"),this.listenTo(n,"execute",()=>{t.editing.view.focus()}),n})}_addMenuBarMenu(e){let t=this.editor;t.ui.componentFactory.add("menuBar:alignment",i=>{let o=t.commands.get("alignment"),n=i.t,r=new Xe(i),a=new gt(i);r.bind("isEnabled").to(o),a.set({ariaLabel:n("Text alignment"),role:"menu"}),r.buttonView.set({label:n("Text alignment")});for(let l of e){let c=new ut(i,r),d=new ae(i);d.extendTemplate({attributes:{"aria-checked":d.bindTemplate.to("isOn")}}),d.delegate("execute").to(r),d.set({label:this.localizedOptionTitles[l.name],icon:$s.get(l.name)}),d.on("execute",()=>{t.execute("alignment",{value:l.name}),t.editing.view.focus()}),d.bind("isOn").to(o,"value",h=>h===l.name),d.bind("isEnabled").to(o,"isEnabled"),c.children.add(d),a.items.add(c)}return r.panelView.children.add(a),r})}},tb=class extends V{static get requires(){return[qd,Kd]}static get pluginName(){return"Alignment"}};var _a=class{model;limit;_isLocked;_size;_batch=null;_changeCallback;_selectionChangeCallback;constructor(e,t=20){this.model=e,this._size=0,this.limit=t,this._isLocked=!1,this._changeCallback=(i,o)=>{o.isLocal&&o.isUndoable&&o!==this._batch&&this._reset(!0)},this._selectionChangeCallback=()=>{this._reset()},this.model.document.on("change",this._changeCallback),this.model.document.selection.on("change:range",this._selectionChangeCallback),this.model.document.selection.on("change:attribute",this._selectionChangeCallback)}get batch(){return this._batch||(this._batch=this.model.createBatch({isTyping:!0})),this._batch}get size(){return this._size}input(e){this._size+=e,this._size>=this.limit&&this._reset(!0)}get isLocked(){return this._isLocked}lock(){this._isLocked=!0}unlock(){this._isLocked=!1}destroy(){this.model.document.off("change",this._changeCallback),this.model.document.selection.off("change:range",this._selectionChangeCallback),this.model.document.selection.off("change:attribute",this._selectionChangeCallback)}_reset(e=!1){(!this.isLocked||e)&&(this._batch=null,this._size=0)}},Jd=class extends ie{_buffer;constructor(e,t){super(e),this._buffer=new _a(e.model,t),this._isEnabledBasedOnSelection=!1}get buffer(){return this._buffer}destroy(){super.destroy(),this._buffer.destroy()}execute(e={}){let t=this.editor.model,i=t.document,o=e.text||"",n=o.length,r=i.selection;if(e.selection?r=e.selection:e.range&&(r=t.createSelection(e.range)),!t.canEditAt(r))return;let a=e.resultRange;t.enqueueChange(this._buffer.batch,l=>{this._buffer.lock();let c=Array.from(i.selection.getAttributes());t.deleteContent(r),o&&t.insertContent(l.createText(o,c),r),a?l.setSelection(a):r.is("documentSelection")||l.setSelection(r),this._buffer.unlock(),this._buffer.input(n)})}},sb=["insertText","insertReplacementText"],eh=class extends yt{focusObserver;constructor(e){super(e),this.focusObserver=e.getObserver(fo),K.isAndroid&&sb.push("insertCompositionText");let t=e.document;t.on("beforeinput",(i,o)=>{if(!this.isEnabled)return;let{data:n,targetRanges:r,inputType:a,domEvent:l}=o;if(!sb.includes(a))return;this.focusObserver.flush();let c=new xt(t,"insertText");t.fire(c,new ci(e,l,{text:n,selection:e.createSelection(r)})),c.stop.called&&i.stop()}),t.on("compositionend",(i,{data:o,domEvent:n})=>{!this.isEnabled||K.isAndroid||o&&t.fire("insertText",new ci(e,n,{text:o,selection:t.selection}))},{priority:"lowest"})}observe(){}stopObserving(){}},Ca=class extends V{static get pluginName(){return"Input"}init(){let e=this.editor,t=e.model,i=e.editing.view,o=t.document.selection;i.addObserver(eh);let n=new Jd(e,e.config.get("typing.undoStep")||20);e.commands.add("insertText",n),e.commands.add("input",n),this.listenTo(i.document,"insertText",(r,a)=>{i.document.isComposing||a.preventDefault();let{text:l,selection:c,resultRange:d}=a,h=Array.from(c.getRanges()).map(p=>e.editing.mapper.toModelRange(p)),g=l;if(K.isAndroid){let p=Array.from(h[0].getItems()).reduce((b,k)=>b+(k.is("$textProxy")?k.data:""),"");p&&(p.length<=g.length?g.startsWith(p)&&(g=g.substring(p.length),h[0].start=h[0].start.getShiftedBy(p.length)):p.startsWith(g)&&(h[0].start=h[0].start.getShiftedBy(g.length),g=""))}let m={text:g,selection:t.createSelection(h)};d&&(m.resultRange=e.editing.mapper.toModelRange(d)),e.execute("insertText",m),i.scrollToTheSelection()}),K.isAndroid?this.listenTo(i.document,"keydown",(r,a)=>{o.isCollapsed||a.keyCode!=229||!i.document.isComposing||rb(t,n)}):this.listenTo(i.document,"compositionstart",()=>{o.isCollapsed||rb(t,n)})}};function rb(s,e){if(!e.isEnabled)return;let t=e.buffer;t.lock(),s.enqueueChange(t.batch,()=>{s.deleteContent(s.document.selection)}),t.unlock()}var Aa=class extends ie{direction;_buffer;constructor(e,t){super(e),this.direction=t,this._buffer=new _a(e.model,e.config.get("typing.undoStep")),this._isEnabledBasedOnSelection=!1}get buffer(){return this._buffer}execute(e={}){let t=this.editor.model,i=t.document;t.enqueueChange(this._buffer.batch,o=>{this._buffer.lock();let n=o.createSelection(e.selection||i.selection);if(!t.canEditAt(n))return;let r=e.sequence||1,a=n.isCollapsed;if(n.isCollapsed&&t.modifySelection(n,{direction:this.direction,unit:e.unit,treatEmojiAsSingleUnit:!0}),this._shouldEntireContentBeReplacedWithParagraph(r)){this._replaceEntireContentWithParagraph(o);return}if(this._shouldReplaceFirstBlockWithParagraph(n,r)){this.editor.execute("paragraph",{selection:n});return}if(n.isCollapsed)return;let l=0;n.getFirstRange().getMinimalFlatRanges().forEach(c=>{l+=cs(c.getWalker({singleCharacters:!0,ignoreElementEnd:!0,shallow:!0}))}),t.deleteContent(n,{doNotResetEntireContent:a,direction:this.direction}),this._buffer.input(l),o.setSelection(n),this._buffer.unlock()})}_shouldEntireContentBeReplacedWithParagraph(e){if(e>1)return!1;let t=this.editor.model,o=t.document.selection,n=t.schema.getLimitElement(o);if(!(o.isCollapsed&&o.containsEntireContent(n))||!t.schema.checkChild(n,"paragraph"))return!1;let a=n.getChild(0);return!(a&&a.is("element","paragraph"))}_replaceEntireContentWithParagraph(e){let t=this.editor.model,o=t.document.selection,n=t.schema.getLimitElement(o),r=e.createElement("paragraph");e.remove(e.createRangeIn(n)),e.insert(r,n),e.setSelection(r,0)}_shouldReplaceFirstBlockWithParagraph(e,t){let i=this.editor.model;if(t>1||this.direction!="backward"||!e.isCollapsed)return!1;let o=e.getFirstPosition(),n=i.schema.getLimitElement(o),r=n.getChild(0);return!(o.parent!=r||!e.containsEntireContent(r)||!i.schema.checkChild(n,"paragraph")||r.name=="paragraph")}},$2="character",ab="word",Y2="codePoint",qi="selection",Rn="backward",Ys="forward",lb={deleteContent:{unit:qi,direction:Rn},deleteContentBackward:{unit:Y2,direction:Rn},deleteWordBackward:{unit:ab,direction:Rn},deleteHardLineBackward:{unit:qi,direction:Rn},deleteSoftLineBackward:{unit:qi,direction:Rn},deleteContentForward:{unit:$2,direction:Ys},deleteWordForward:{unit:ab,direction:Ys},deleteHardLineForward:{unit:qi,direction:Ys},deleteSoftLineForward:{unit:qi,direction:Ys}},th=class extends yt{constructor(e){super(e);let t=e.document,i=0;t.on("keydown",()=>{i++}),t.on("keyup",()=>{i=0}),t.on("beforeinput",(o,n)=>{if(!this.isEnabled)return;let{targetRanges:r,domEvent:a,inputType:l}=n,c=lb[l];if(!c)return;let d={direction:c.direction,unit:c.unit,sequence:i};d.unit==qi&&(d.selectionToRemove=e.createSelection(r[0])),l==="deleteContentBackward"&&(K.isAndroid&&(d.sequence=1),q2(r)&&(d.unit=qi,d.selectionToRemove=e.createSelection(r)));let h=new li(t,"delete",r[0]);t.fire(h,new ci(e,a,d)),h.stop.called&&o.stop()}),K.isBlink&&X2(this)}observe(){}stopObserving(){}};function X2(s){let e=s.view,t=e.document,i=null,o=!1;t.on("keydown",(a,{keyCode:l})=>{i=l,o=!1}),t.on("keyup",(a,{keyCode:l,domEvent:c})=>{let d=t.selection,h=s.isEnabled&&l==i&&n(l)&&!d.isCollapsed&&!o;if(i=null,h){let g=d.getFirstRange(),m=new li(t,"delete",g),p={unit:qi,direction:r(l),selectionToRemove:d};t.fire(m,new ci(e,c,p))}}),t.on("beforeinput",(a,{inputType:l})=>{let c=lb[l];n(i)&&c&&c.direction==r(i)&&(o=!0)},{priority:"high"}),t.on("beforeinput",(a,{inputType:l,data:c})=>{i==ne.delete&&l=="insertText"&&c=="\x7F"&&a.stop()},{priority:"high"});function n(a){return a==ne.backspace||a==ne.delete}function r(a){return a==ne.backspace?Rn:Ys}}function q2(s){if(s.length!=1||s[0].isCollapsed)return!1;let e=s[0].getWalker({direction:"backward",singleCharacters:!0,ignoreElementEnd:!0}),t=0;for(let{nextPosition:i,item:o}of e){if(i.parent.is("$text")){let n=i.parent.data,r=i.offset;if(ms(n,r)||fs(n,r)||Mr(n,r))continue;t++}else(o.is("containerElement")||o.is("emptyElement"))&&t++;if(t>1)return!0}return!1}var Gt=class extends V{_undoOnBackspace;static get pluginName(){return"Delete"}init(){let e=this.editor,t=e.editing.view,i=t.document,o=e.model.document;t.addObserver(th),this._undoOnBackspace=!1;let n=new Aa(e,"forward");e.commands.add("deleteForward",n),e.commands.add("forwardDelete",n),e.commands.add("delete",new Aa(e,"backward")),this.listenTo(i,"delete",(r,a)=>{i.isComposing||a.preventDefault();let{direction:l,sequence:c,selectionToRemove:d,unit:h}=a,g=l==="forward"?"deleteForward":"delete",m={sequence:c};if(h=="selection"){let p=Array.from(d.getRanges()).map(b=>e.editing.mapper.toModelRange(b));m.selection=e.model.createSelection(p)}else m.unit=h;e.execute(g,m),t.scrollToTheSelection()},{priority:"low"}),this.editor.plugins.has("UndoEditing")&&(this.listenTo(i,"delete",(r,a)=>{this._undoOnBackspace&&a.direction=="backward"&&a.sequence==1&&a.unit=="codePoint"&&(this._undoOnBackspace=!1,e.execute("undo"),a.preventDefault(),r.stop())},{context:"$capture"}),this.listenTo(o,"change",()=>{this._undoOnBackspace=!1}))}requestUndoOnBackspace(){this.editor.plugins.has("UndoEditing")&&(this._undoOnBackspace=!0)}},Xs=class extends V{static get requires(){return[Ca,Gt]}static get pluginName(){return"Typing"}};function cb(s,e){let t=s.start;return{text:Array.from(s.getWalker({ignoreElementEnd:!1})).reduce((o,{item:n})=>n.is("$text")||n.is("$textProxy")?o+n.data:(t=e.createPositionAfter(n),""),""),range:e.createRange(t,s.end)}}var qs=class extends ge(){model;testCallback;_hasMatch;constructor(e,t){super(),this.model=e,this.testCallback=t,this._hasMatch=!1,this.set("isEnabled",!0),this.on("change:isEnabled",()=>{this.isEnabled?this._startListening():(this.stopListening(e.document.selection),this.stopListening(e.document))}),this._startListening()}get hasMatch(){return this._hasMatch}_startListening(){let t=this.model.document;this.listenTo(t.selection,"change:range",(i,{directChange:o})=>{if(o){if(!t.selection.isCollapsed){this.hasMatch&&(this.fire("unmatched"),this._hasMatch=!1);return}this._evaluateTextBeforeSelection("selection")}}),this.listenTo(t,"change:data",(i,o)=>{o.isUndo||!o.isLocal||this._evaluateTextBeforeSelection("data",{batch:o})})}_evaluateTextBeforeSelection(e,t={}){let i=this.model,n=i.document.selection,r=i.createRange(i.createPositionAt(n.focus.parent,0),n.focus),{text:a,range:l}=cb(r,i),c=this.testCallback(a);if(!c&&this.hasMatch&&this.fire("unmatched"),this._hasMatch=!!c,c){let d=Object.assign(t,{text:a,range:l});typeof c=="object"&&Object.assign(d,c),this.fire(`matched:${e}`,d)}}};var zT={copyright:{from:"(c)",to:"\xA9"},registeredTrademark:{from:"(r)",to:"\xAE"},trademark:{from:"(tm)",to:"\u2122"},oneHalf:{from:/(^|[^/a-z0-9])(1\/2)([^/a-z0-9])$/i,to:[null,"\xBD",null]},oneThird:{from:/(^|[^/a-z0-9])(1\/3)([^/a-z0-9])$/i,to:[null,"\u2153",null]},twoThirds:{from:/(^|[^/a-z0-9])(2\/3)([^/a-z0-9])$/i,to:[null,"\u2154",null]},oneForth:{from:/(^|[^/a-z0-9])(1\/4)([^/a-z0-9])$/i,to:[null,"\xBC",null]},threeQuarters:{from:/(^|[^/a-z0-9])(3\/4)([^/a-z0-9])$/i,to:[null,"\xBE",null]},lessThanOrEqual:{from:"<=",to:"\u2264"},greaterThanOrEqual:{from:">=",to:"\u2265"},notEqual:{from:"!=",to:"\u2260"},arrowLeft:{from:"<-",to:"\u2190"},arrowRight:{from:"->",to:"\u2192"},horizontalEllipsis:{from:"...",to:"\u2026"},enDash:{from:/(^| )(--)( )$/,to:[null,"\u2013",null]},emDash:{from:/(^| )(---)( )$/,to:[null,"\u2014",null]},quotesPrimary:{from:Ln('"'),to:[null,"\u201C",null,"\u201D"]},quotesSecondary:{from:Ln("'"),to:[null,"\u2018",null,"\u2019"]},quotesPrimaryEnGb:{from:Ln("'"),to:[null,"\u2018",null,"\u2019"]},quotesSecondaryEnGb:{from:Ln('"'),to:[null,"\u201C",null,"\u201D"]},quotesPrimaryPl:{from:Ln('"'),to:[null,"\u201E",null,"\u201D"]},quotesSecondaryPl:{from:Ln("'"),to:[null,"\u201A",null,"\u2019"]}};function Ln(s){return new RegExp(`(^|\\s)(${s})([^${s}]*)(${s})$`)}var Zs=class extends ie{attributeKey;constructor(e,t){super(e),this.attributeKey=t}refresh(){let e=this.editor.model,t=e.document;this.value=this._getValueFromFirstAllowedNode(),this.isEnabled=e.schema.checkAttributeInSelection(t.selection,this.attributeKey)}execute(e={}){let t=this.editor.model,o=t.document.selection,n=e.forceValue===void 0?!this.value:e.forceValue;t.change(r=>{if(o.isCollapsed)n?r.setSelectionAttribute(this.attributeKey,!0):r.removeSelectionAttribute(this.attributeKey);else{let a=t.schema.getValidRanges(o.getRanges(),this.attributeKey);for(let l of a)n?r.setAttribute(this.attributeKey,n,l):r.removeAttribute(this.attributeKey,l)}})}_getValueFromFirstAllowedNode(){let e=this.editor.model,t=e.schema,i=e.document.selection;if(i.isCollapsed)return i.hasAttribute(this.attributeKey);for(let o of i.getRanges())for(let n of o.getItems())if(t.checkAttribute(n,this.attributeKey))return n.hasAttribute(this.attributeKey);return!1}},Nn="bold",ih=class extends V{static get pluginName(){return"BoldEditing"}init(){let e=this.editor,t=this.editor.t;e.model.schema.extend("$text",{allowAttributes:Nn}),e.model.schema.setAttributeProperties(Nn,{isFormatting:!0,copyOnEnter:!0}),e.conversion.attributeToElement({model:Nn,view:"strong",upcastAlso:["b",i=>{let o=i.getStyle("font-weight");return o&&(o=="bold"||Number(o)>=600)?{name:!0,styles:["font-weight"]}:null}]}),e.commands.add(Nn,new Zs(e,Nn)),e.keystrokes.set("CTRL+B",Nn),e.accessibility.addKeystrokeInfos({keystrokes:[{label:t("Bold text"),keystroke:"CTRL+B"}]})}};function lh({editor:s,commandName:e,plugin:t,icon:i,label:o,keystroke:n}){return r=>{let a=s.commands.get(e),l=new r(s.locale);return l.set({label:o,icon:i,keystroke:n,isToggleable:!0}),l.bind("isEnabled").to(a,"isEnabled"),t.listenTo(l,"execute",()=>{s.execute(e),s.editing.view.focus()}),l}}var Sa="bold",oh=class extends V{static get pluginName(){return"BoldUI"}init(){let e=this.editor,t=e.locale.t,i=e.commands.get(Sa),o=lh({editor:e,commandName:Sa,plugin:this,icon:oe.bold,label:t("Bold"),keystroke:"CTRL+B"});e.ui.componentFactory.add(Sa,()=>{let n=o(Z);return n.set({tooltip:!0}),n.bind("isOn").to(i,"value"),n}),e.ui.componentFactory.add("menuBar:"+Sa,()=>o(ae))}},db=class extends V{static get requires(){return[ih,oh]}static get pluginName(){return"Bold"}};var Vn="italic",nh=class extends V{static get pluginName(){return"ItalicEditing"}init(){let e=this.editor,t=this.editor.t;e.model.schema.extend("$text",{allowAttributes:Vn}),e.model.schema.setAttributeProperties(Vn,{isFormatting:!0,copyOnEnter:!0}),e.conversion.attributeToElement({model:Vn,view:"i",upcastAlso:["em",{styles:{"font-style":"italic"}}]}),e.commands.add(Vn,new Zs(e,Vn)),e.keystrokes.set("CTRL+I",Vn),e.accessibility.addKeystrokeInfos({keystrokes:[{label:t("Italic text"),keystroke:"CTRL+I"}]})}},Q2='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m9.586 14.633.021.004c-.036.335.095.655.393.962.082.083.173.15.274.201h1.474a.6.6 0 1 1 0 1.2H5.304a.6.6 0 0 1 0-1.2h1.15c.474-.07.809-.182 1.005-.334.157-.122.291-.32.404-.597l2.416-9.55a1.053 1.053 0 0 0-.281-.823 1.12 1.12 0 0 0-.442-.296H8.15a.6.6 0 0 1 0-1.2h6.443a.6.6 0 1 1 0 1.2h-1.195c-.376.056-.65.155-.823.296-.215.175-.423.439-.623.79l-2.366 9.347z"/></svg>',Ea="italic",sh=class extends V{static get pluginName(){return"ItalicUI"}init(){let e=this.editor,t=e.commands.get(Ea),i=e.locale.t,o=lh({editor:e,commandName:Ea,plugin:this,icon:Q2,keystroke:"CTRL+I",label:i("Italic")});e.ui.componentFactory.add(Ea,()=>{let n=o(Z);return n.set({tooltip:!0}),n.bind("isOn").to(t,"value"),n}),e.ui.componentFactory.add("menuBar:"+Ea,()=>o(ae))}},hb=class extends V{static get requires(){return[nh,sh]}static get pluginName(){return"Italic"}};var Ks="underline",rh=class extends V{static get pluginName(){return"UnderlineEditing"}init(){let e=this.editor,t=this.editor.t;e.model.schema.extend("$text",{allowAttributes:Ks}),e.model.schema.setAttributeProperties(Ks,{isFormatting:!0,copyOnEnter:!0}),e.conversion.attributeToElement({model:Ks,view:"u",upcastAlso:{styles:{"text-decoration":"underline"}}}),e.commands.add(Ks,new Zs(e,Ks)),e.keystrokes.set("CTRL+U","underline"),e.accessibility.addKeystrokeInfos({keystrokes:[{label:t("Underline text"),keystroke:"CTRL+U"}]})}},J2='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M3 18v-1.5h14V18zm2.2-8V3.6c0-.4.4-.6.8-.6.3 0 .7.2.7.6v6.2c0 2 1.3 2.8 3.2 2.8 1.9 0 3.4-.9 3.4-2.9V3.6c0-.3.4-.5.8-.5.3 0 .7.2.7.5V10c0 2.7-2.2 4-4.9 4-2.6 0-4.7-1.2-4.7-4z"/></svg>',Ta="underline",ah=class extends V{static get pluginName(){return"UnderlineUI"}init(){let e=this.editor,t=e.commands.get(Ta),i=e.locale.t,o=lh({editor:e,commandName:Ta,plugin:this,icon:J2,label:i("Underline"),keystroke:"CTRL+U"});e.ui.componentFactory.add(Ta,()=>{let n=o(Z);return n.set({tooltip:!0}),n.bind("isOn").to(t,"value"),n}),e.ui.componentFactory.add("menuBar:"+Ta,()=>o(ae))}},ub=class extends V{static get requires(){return[rh,ah]}static get pluginName(){return"Underline"}};var ch=class extends Yi{view;_toolbarConfig;_elementReplacer;constructor(e,t){super(e),this.view=t,this._toolbarConfig=xa(e.config.get("toolbar")),this._elementReplacer=new as,this.listenTo(e.editing.view,"scrollToTheSelection",this._handleScrollToTheSelectionWithStickyPanel.bind(this))}get element(){return this.view.element}init(e){let t=this.editor,i=this.view,o=t.editing.view,n=i.editable,r=o.document.getRoot();n.name=r.rootName,i.render();let a=n.element;this.setEditableElement(n.name,a),i.editable.bind("isFocused").to(this.focusTracker),o.attachDomRoot(a),e&&this._elementReplacer.replace(e,this.element),this._initPlaceholder(),this._initToolbar(),i.menuBarView&&ya(t,i.menuBarView),this._initDialogPluginIntegration(),this.fire("ready")}destroy(){super.destroy();let e=this.view,t=this.editor.editing.view;this._elementReplacer.restore(),t.detachDomRoot(e.editable.name),e.destroy()}_initToolbar(){let e=this.view;e.stickyPanel.bind("isActive").to(this.focusTracker,"isFocused"),e.stickyPanel.limiterElement=e.element,e.stickyPanel.bind("viewportTopOffset").to(this,"viewportOffset",({top:t})=>t||0),e.toolbar.fillFromConfig(this._toolbarConfig,this.componentFactory),this.addToolbar(e.toolbar)}_initPlaceholder(){let e=this.editor,t=e.editing.view,i=t.document.getRoot(),o=e.sourceElement,n,r=e.config.get("placeholder");r&&(n=typeof r=="string"?r:r[this.view.editable.name]),!n&&o&&o.tagName.toLowerCase()==="textarea"&&(n=o.getAttribute("placeholder")),n&&(i.placeholder=n),Ti({view:t,element:i,isDirectHost:!1,keepOnFocus:!0})}_handleScrollToTheSelectionWithStickyPanel(e,t,i){let o=this.view.stickyPanel;if(o.isSticky){let n=new se(o.element).height;t.viewportOffset.top+=n}else{let n=()=>{this.editor.editing.view.scrollToTheSelection(i)};this.listenTo(o,"change:isSticky",n),setTimeout(()=>{this.stopListening(o,"change:isSticky",n)},20)}}_initDialogPluginIntegration(){if(!this.editor.plugins.has("Dialog"))return;let e=this.view.stickyPanel,t=this.editor.plugins.get("Dialog");t.on("show",()=>{let i=t.view;i.on("moveTo",(o,n)=>{if(!e.isSticky||i.wasMoved)return;let r=new se(e.contentPanelElement);n[1]<r.bottom+ka.defaultOffset&&(n[1]=r.bottom+ka.defaultOffset)},{priority:"high"})},{priority:"low"})}},dh=class extends pa{stickyPanel;toolbar;menuBarView;editable;constructor(e,t,i={}){super(e),this.stickyPanel=new ba(e),this.toolbar=new hi(e,{shouldGroupWhenFull:i.shouldToolbarGroupWhenFull}),i.useMenuBar&&(this.menuBarView=new Tn(e)),this.editable=new Xi(e,t)}render(){super.render(),this.menuBarView?this.stickyPanel.content.addMany([this.menuBarView,this.toolbar]):this.stickyPanel.content.add(this.toolbar),this.top.add(this.stickyPanel),this.main.add(this.editable)}},gb=class extends yo(kn){ui;constructor(e,t={}){if(!Ia(e)&&t.initialData!==void 0)throw new E("editor-create-initial-data",null);super(t),this.config.define("menuBar.isVisible",!1),this.config.get("initialData")===void 0&&this.config.set("initialData",eC(e)),Ia(e)&&(this.sourceElement=e),this.model.document.createRoot();let i=!this.config.get("toolbar.shouldNotGroupWhenFull"),o=this.config.get("menuBar"),n=new dh(this.locale,this.editing.view,{shouldToolbarGroupWhenFull:i,useMenuBar:o.isVisible});this.ui=new ch(this,n),qr(this)}destroy(){return this.sourceElement&&this.updateSourceElement(),this.ui.destroy(),super.destroy()}static create(e,t={}){return new Promise(i=>{let o=new this(e,t);i(o.initPlugins().then(()=>o.ui.init(Ia(e)?e:null)).then(()=>o.data.init(o.config.get("initialData"))).then(()=>o.fire("ready")).then(()=>o))})}};function eC(s){return Ia(s)?en(s):s}function Ia(s){return $t(s)}var hh=class extends ie{constructor(e){super(e),this.affectsData=!1}execute(){let e=this.editor.model,t=e.document.selection,i=e.schema.getLimitElement(t);if(t.containsEntireContent(i)||!mb(e.schema,i))do if(i=i.parent,!i)return;while(!mb(e.schema,i));e.change(o=>{o.setSelection(i,"in")})}};function mb(s,e){return s.isLimit(e)&&(s.checkChild(e,"$text")||s.checkChild(e,"paragraph"))}var tC=hs("Ctrl+A"),uh=class extends V{static get pluginName(){return"SelectAllEditing"}init(){let e=this.editor,t=e.t,o=e.editing.view.document;e.commands.add("selectAll",new hh(e)),this.listenTo(o,"keydown",(n,r)=>{_i(r)===tC&&(e.execute("selectAll"),r.preventDefault())}),e.accessibility.addKeystrokeInfos({keystrokes:[{label:t("Select all"),keystroke:"CTRL+A"}]})}},iC='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M.75 15.5a.75.75 0 0 1 .75.75V18l.008.09A.5.5 0 0 0 2 18.5h1.75a.75.75 0 1 1 0 1.5H1.5l-.144-.007a1.5 1.5 0 0 1-1.35-1.349L0 18.5v-2.25a.75.75 0 0 1 .75-.75zm18.5 0a.75.75 0 0 1 .75.75v2.25l-.007.144a1.5 1.5 0 0 1-1.349 1.35L18.5 20h-2.25a.75.75 0 1 1 0-1.5H18a.5.5 0 0 0 .492-.41L18.5 18v-1.75a.75.75 0 0 1 .75-.75zm-10.45 3c.11 0 .2.09.2.2v1.1a.2.2 0 0 1-.2.2H7.2a.2.2 0 0 1-.2-.2v-1.1c0-.11.09-.2.2-.2h1.6zm4 0c.11 0 .2.09.2.2v1.1a.2.2 0 0 1-.2.2h-1.6a.2.2 0 0 1-.2-.2v-1.1c0-.11.09-.2.2-.2h1.6zm.45-5.5a.75.75 0 1 1 0 1.5h-8.5a.75.75 0 1 1 0-1.5h8.5zM1.3 11c.11 0 .2.09.2.2v1.6a.2.2 0 0 1-.2.2H.2a.2.2 0 0 1-.2-.2v-1.6c0-.11.09-.2.2-.2h1.1zm18.5 0c.11 0 .2.09.2.2v1.6a.2.2 0 0 1-.2.2h-1.1a.2.2 0 0 1-.2-.2v-1.6c0-.11.09-.2.2-.2h1.1zm-4.55-2a.75.75 0 1 1 0 1.5H4.75a.75.75 0 1 1 0-1.5h10.5zM1.3 7c.11 0 .2.09.2.2v1.6a.2.2 0 0 1-.2.2H.2a.2.2 0 0 1-.2-.2V7.2c0-.11.09-.2.2-.2h1.1zm18.5 0c.11 0 .2.09.2.2v1.6a.2.2 0 0 1-.2.2h-1.1a.2.2 0 0 1-.2-.2V7.2c0-.11.09-.2.2-.2h1.1zm-4.55-2a.75.75 0 1 1 0 1.5h-2.5a.75.75 0 1 1 0-1.5h2.5zm-5 0a.75.75 0 1 1 0 1.5h-5.5a.75.75 0 0 1 0-1.5h5.5zm-6.5-5a.75.75 0 0 1 0 1.5H2a.5.5 0 0 0-.492.41L1.5 2v1.75a.75.75 0 0 1-1.5 0V1.5l.007-.144A1.5 1.5 0 0 1 1.356.006L1.5 0h2.25zM18.5 0l.144.007a1.5 1.5 0 0 1 1.35 1.349L20 1.5v2.25a.75.75 0 1 1-1.5 0V2l-.008-.09A.5.5 0 0 0 18 1.5h-1.75a.75.75 0 1 1 0-1.5h2.25zM8.8 0c.11 0 .2.09.2.2v1.1a.2.2 0 0 1-.2.2H7.2a.2.2 0 0 1-.2-.2V.2c0-.11.09-.2.2-.2h1.6zm4 0c.11 0 .2.09.2.2v1.1a.2.2 0 0 1-.2.2h-1.6a.2.2 0 0 1-.2-.2V.2c0-.11.09-.2.2-.2h1.6z"/></svg>',gh=class extends V{static get pluginName(){return"SelectAllUI"}init(){let e=this.editor;e.ui.componentFactory.add("selectAll",()=>{let t=this._createButton(Z);return t.set({tooltip:!0}),t}),e.ui.componentFactory.add("menuBar:selectAll",()=>this._createButton(ae))}_createButton(e){let t=this.editor,i=t.locale,o=t.commands.get("selectAll"),n=new e(t.locale),r=i.t;return n.set({label:r("Select all"),icon:iC,keystroke:"Ctrl+A"}),n.bind("isEnabled").to(o,"isEnabled"),this.listenTo(n,"execute",()=>{t.execute("selectAll"),t.editing.view.focus()}),n}},Pa=class extends V{static get requires(){return[uh,gh]}static get pluginName(){return"SelectAll"}};var Ma=class extends ie{_stack=[];_createdBatches=new WeakSet;constructor(e){super(e),this.refresh(),this._isEnabledBasedOnSelection=!1,this.listenTo(e.data,"set",(t,i)=>{i[1]=B({},i[1]);let o=i[1];o.batchType||(o.batchType={isUndoable:!1})},{priority:"high"}),this.listenTo(e.data,"set",(t,i)=>{i[1].batchType.isUndoable||this.clearStack()})}refresh(){this.isEnabled=this._stack.length>0}get createdBatches(){return this._createdBatches}addBatch(e){let t=this.editor.model.document.selection,i={ranges:t.hasOwnRange?Array.from(t.getRanges()):[],isBackward:t.isBackward};this._stack.push({batch:e,selection:i}),this.refresh()}clearStack(){this._stack=[],this.refresh()}_restoreSelection(e,t,i){let o=this.editor.model,n=o.document,r=[],a=e.map(c=>c.getTransformedByOperations(i)),l=a.flat();for(let c of a){let d=c.filter(h=>h.root!=n.graveyard).filter(h=>!nC(h,l));d.length&&(oC(d),r.push(d[0]))}r.length&&o.change(c=>{c.setSelection(r,{backward:t})})}_undo(e,t){let i=this.editor.model,o=i.document;this._createdBatches.add(t);let n=e.operations.slice().filter(r=>r.isDocumentOperation);n.reverse();for(let r of n){let a=r.baseVersion+1,l=Array.from(o.history.getOperations(a)),d=Vf([r.getReversed()],l,{useRelations:!0,document:this.editor.model.document,padWithNoOps:!1,forceWeakRemove:!0}).operationsA;for(let h of d){let g=h.affectedSelectable;g&&!i.canEditAt(g)&&(h=new Be(h.baseVersion)),t.addOperation(h),i.applyOperation(h),o.history.setOperationAsUndone(r,h)}}}};function oC(s){s.sort((e,t)=>e.start.isBefore(t.start)?-1:1);for(let e=1;e<s.length;e++){let i=s[e-1].getJoined(s[e],!0);i&&(e--,s.splice(e,2,i))}}function nC(s,e){return e.some(t=>t!==s&&t.containsRange(s,!0))}var mh=class extends Ma{execute(e=null){let t=e?this._stack.findIndex(n=>n.batch==e):this._stack.length-1,i=this._stack.splice(t,1)[0],o=this.editor.model.createBatch({isUndo:!0});this.editor.model.enqueueChange(o,()=>{this._undo(i.batch,o);let n=this.editor.model.document.history.getOperations(i.batch.baseVersion);this._restoreSelection(i.selection.ranges,i.selection.isBackward,n)}),this.fire("revert",i.batch,o),this.refresh()}},fh=class extends Ma{execute(){let e=this._stack.pop(),t=this.editor.model.createBatch({isUndo:!0});this.editor.model.enqueueChange(t,()=>{let o=e.batch.operations[e.batch.operations.length-1].baseVersion+1,n=this.editor.model.document.history.getOperations(o);this._restoreSelection(e.selection.ranges,e.selection.isBackward,n),this._undo(e.batch,t)}),this.refresh()}},ph=class extends V{_undoCommand;_redoCommand;_batchRegistry=new WeakSet;static get pluginName(){return"UndoEditing"}init(){let e=this.editor,t=e.t;this._undoCommand=new mh(e),this._redoCommand=new fh(e),e.commands.add("undo",this._undoCommand),e.commands.add("redo",this._redoCommand),this.listenTo(e.model,"applyOperation",(i,o)=>{let n=o[0];if(!n.isDocumentOperation)return;let r=n.batch,a=this._redoCommand.createdBatches.has(r),l=this._undoCommand.createdBatches.has(r);this._batchRegistry.has(r)||(this._batchRegistry.add(r),r.isUndoable&&(a?this._undoCommand.addBatch(r):l||(this._undoCommand.addBatch(r),this._redoCommand.clearStack())))},{priority:"highest"}),this.listenTo(this._undoCommand,"revert",(i,o,n)=>{this._redoCommand.addBatch(n)}),e.keystrokes.set("CTRL+Z","undo"),e.keystrokes.set("CTRL+Y","redo"),e.keystrokes.set("CTRL+SHIFT+Z","redo"),e.accessibility.addKeystrokeInfos({keystrokes:[{label:t("Undo"),keystroke:"CTRL+Z"},{label:t("Redo"),keystroke:[["CTRL+Y"],["CTRL+SHIFT+Z"]]}]})}},bh=class extends V{static get pluginName(){return"UndoUI"}init(){let e=this.editor,t=e.locale,i=e.t,o=t.uiLanguageDirection=="ltr"?oe.undo:oe.redo,n=t.uiLanguageDirection=="ltr"?oe.redo:oe.undo;this._addButtonsToFactory("undo",i("Undo"),"CTRL+Z",o),this._addButtonsToFactory("redo",i("Redo"),"CTRL+Y",n)}_addButtonsToFactory(e,t,i,o){let n=this.editor;n.ui.componentFactory.add(e,()=>{let r=this._createButton(Z,e,t,i,o);return r.set({tooltip:!0}),r}),n.ui.componentFactory.add("menuBar:"+e,()=>this._createButton(ae,e,t,i,o))}_createButton(e,t,i,o,n){let r=this.editor,a=r.locale,l=r.commands.get(t),c=new e(a);return c.set({label:i,icon:n,keystroke:o}),c.bind("isEnabled").to(l,"isEnabled"),this.listenTo(c,"execute",()=>{r.execute(t),r.editing.view.focus()}),c}},Dn=class extends V{static get requires(){return[ph,bh]}static get pluginName(){return"Undo"}};function*bb(s,e){for(let t of e)t&&s.getAttributeProperties(t[0]).copyOnEnter&&(yield t)}var wh=class extends ie{execute(){this.editor.model.change(e=>{this.enterBlock(e),this.fire("afterExecute",{writer:e})})}enterBlock(e){let t=this.editor.model,i=t.document.selection,o=t.schema,n=i.isCollapsed,r=i.getFirstRange(),a=r.start.parent,l=r.end.parent;if(o.isLimit(a)||o.isLimit(l))return!n&&a==l&&t.deleteContent(i),!1;if(n){let c=bb(e.model.schema,i.getAttributes());return fb(e,r.start),e.setSelectionAttribute(c),!0}else{let c=!(r.start.isAtStart&&r.end.isAtEnd),d=a==l;if(t.deleteContent(i,{leaveUnmerged:c}),c){if(d)return fb(e,i.focus),!0;e.setSelection(l,0)}}return!1}};function fb(s,e){s.split(e),s.setSelection(e.parent.nextSibling,0)}var sC={insertParagraph:{isSoft:!1},insertLineBreak:{isSoft:!0}},La=class extends yt{constructor(e){super(e);let t=this.document,i=!1;t.on("keydown",(o,n)=>{i=n.shiftKey}),t.on("beforeinput",(o,n)=>{if(!this.isEnabled)return;let r=n.inputType;K.isSafari&&i&&r=="insertParagraph"&&(r="insertLineBreak");let a=n.domEvent,l=sC[r];if(!l)return;let c=new li(t,"enter",n.targetRanges[0]);t.fire(c,new ci(e,a,{isSoft:l.isSoft})),c.stop.called&&o.stop()})}observe(){}stopObserving(){}},Li=class extends V{static get pluginName(){return"Enter"}init(){let e=this.editor,t=e.editing.view,i=t.document,o=this.editor.t;t.addObserver(La),e.commands.add("enter",new wh(e)),this.listenTo(i,"enter",(n,r)=>{i.isComposing||r.preventDefault(),!r.isSoft&&(e.execute("enter"),t.scrollToTheSelection())},{priority:"low"}),e.accessibility.addKeystrokeInfos({keystrokes:[{label:o("Insert a hard break (a new paragraph)"),keystroke:"Enter"}]})}},kh=class extends ie{execute(){let e=this.editor.model,t=e.document;e.change(i=>{aC(e,i,t.selection),this.fire("afterExecute",{writer:i})})}refresh(){let e=this.editor.model,t=e.document;this.isEnabled=rC(e.schema,t.selection)}};function rC(s,e){if(e.rangeCount>1)return!1;let t=e.anchor;if(!t||!s.checkChild(t,"softBreak"))return!1;let i=e.getFirstRange(),o=i.start.parent,n=i.end.parent;return!((vh(o,s)||vh(n,s))&&o!==n)}function aC(s,e,t){let i=t.isCollapsed,o=t.getFirstRange(),n=o.start.parent,r=o.end.parent,a=n==r;if(i){let l=bb(s.schema,t.getAttributes());pb(s,e,o.end),e.removeSelectionAttribute(t.getAttributeKeys()),e.setSelectionAttribute(l)}else{let l=!(o.start.isAtStart&&o.end.isAtEnd);s.deleteContent(t,{leaveUnmerged:l}),a?pb(s,e,t.focus):l&&e.setSelection(r,0)}}function pb(s,e,t){let i=e.createElement("softBreak");s.insertContent(i,t),e.setSelection(i,"after")}function vh(s,e){return s.is("rootElement")?!1:e.isLimit(s)||vh(s.parent,e)}var Qs=class extends V{static get pluginName(){return"ShiftEnter"}init(){let e=this.editor,t=e.model.schema,i=e.conversion,o=e.editing.view,n=o.document,r=this.editor.t;t.register("softBreak",{allowWhere:"$text",isInline:!0}),i.for("upcast").elementToElement({model:"softBreak",view:"br"}),i.for("downcast").elementToElement({model:"softBreak",view:(a,{writer:l})=>l.createEmptyElement("br")}),o.addObserver(La),e.commands.add("shiftEnter",new kh(e)),this.listenTo(n,"enter",(a,l)=>{n.isComposing||l.preventDefault(),l.isSoft&&(e.execute("shiftEnter"),o.scrollToTheSelection())},{priority:"low"}),e.accessibility.addKeystrokeInfos({keystrokes:[{label:r("Insert a soft break (a <code>&lt;br&gt;</code> element)"),keystroke:"Shift+Enter"}]})}};var wb="ck-widget_selected";function Ve(s){return s.is("element")?!!s.getCustomProperty("widget"):!1}function lC(s){return s.getCustomProperty("widgetLabel").reduce((t,i)=>typeof i=="function"?t?t+". "+i():i():t?t+". "+i:i,"")}var Ri="widget-type-around";function Po(s,e,t){return!!s&&Ve(s)&&!t.isInline(e)}function cC(s){return s.closest(".ck-widget__type-around__button")}function dC(s){return s.classList.contains("ck-widget__type-around__button_before")?"before":"after"}function hC(s,e){let t=s.closest(".ck-widget");return e.mapDomToView(t)}function Mo(s){return s.getAttribute(Ri)}var uC='<svg viewBox="0 0 10 8" xmlns="http://www.w3.org/2000/svg"><path d="M9.055.263v3.972h-6.77M1 4.216l2-2.038m-2 2 2 2.038"/></svg>',yb=["before","after"],gC=new DOMParser().parseFromString(uC,"image/svg+xml").firstChild,kb="ck-widget__type-around_disabled",xh=class extends V{_currentFakeCaretModelElement=null;static get pluginName(){return"WidgetTypeAround"}static get requires(){return[Li,Gt]}init(){let e=this.editor,t=e.editing.view;this.on("change:isEnabled",(i,o,n)=>{t.change(r=>{for(let a of t.document.roots)n?r.removeClass(kb,a):r.addClass(kb,a)}),n||e.model.change(r=>{r.removeSelectionAttribute(Ri)})}),this._enableTypeAroundUIInjection(),this._enableInsertingParagraphsOnButtonClick(),this._enableInsertingParagraphsOnEnterKeypress(),this._enableInsertingParagraphsOnTypingKeystroke(),this._enableTypeAroundFakeCaretActivationUsingKeyboardArrows(),this._enableDeleteIntegration(),this._enableInsertContentIntegration(),this._enableInsertObjectIntegration(),this._enableDeleteContentIntegration()}destroy(){super.destroy(),this._currentFakeCaretModelElement=null}_insertParagraph(e,t){let i=this.editor,o=i.editing.view,n=i.model.schema.getAttributesWithProperty(e,"copyOnReplace",!0);i.execute("insertParagraph",{position:i.model.createPositionAt(e,t),attributes:n}),o.focus(),o.scrollToTheSelection()}_listenToIfEnabled(e,t,i,o){this.listenTo(e,t,(...n)=>{this.isEnabled&&i(...n)},o)}_insertParagraphAccordingToFakeCaretPosition(){let i=this.editor.model.document.selection,o=Mo(i);if(!o)return!1;let n=i.getSelectedElement();return this._insertParagraph(n,o),!0}_enableTypeAroundUIInjection(){let e=this.editor,t=e.model.schema,i=e.locale.t,o={before:i("Insert paragraph before block"),after:i("Insert paragraph after block")};e.editing.downcastDispatcher.on("insert",(n,r,a)=>{let l=a.mapper.toViewElement(r.item);l&&Po(l,r.item,t)&&(mC(a.writer,o,l),l.getCustomProperty("widgetLabel").push(()=>this.isEnabled?i("Press Enter to type after or press Shift + Enter to type before the widget"):""))},{priority:"low"})}_enableTypeAroundFakeCaretActivationUsingKeyboardArrows(){let e=this.editor,t=e.model,i=t.document.selection,o=t.schema,n=e.editing.view;this._listenToIfEnabled(n.document,"arrowKey",(a,l)=>{this._handleArrowKeyPress(a,l)},{context:[Ve,"$text"],priority:"high"}),this._listenToIfEnabled(i,"change:range",(a,l)=>{l.directChange&&e.model.change(c=>{c.removeSelectionAttribute(Ri)})}),this._listenToIfEnabled(t.document,"change:data",()=>{let a=i.getSelectedElement();if(a){let l=e.editing.mapper.toViewElement(a);if(Po(l,a,o))return}e.model.change(l=>{l.removeSelectionAttribute(Ri)})}),this._listenToIfEnabled(e.editing.downcastDispatcher,"selection",(a,l,c)=>{let d=c.writer;if(this._currentFakeCaretModelElement){let p=c.mapper.toViewElement(this._currentFakeCaretModelElement);p&&(d.removeClass(yb.map(r),p),this._currentFakeCaretModelElement=null)}let h=l.selection.getSelectedElement();if(!h)return;let g=c.mapper.toViewElement(h);if(!Po(g,h,o))return;let m=Mo(l.selection);m&&(d.addClass(r(m),g),this._currentFakeCaretModelElement=h)}),this._listenToIfEnabled(e.ui.focusTracker,"change:isFocused",(a,l,c)=>{c||e.model.change(d=>{d.removeSelectionAttribute(Ri)})});function r(a){return`ck-widget_type-around_show-fake-caret_${a}`}}_handleArrowKeyPress(e,t){let i=this.editor,o=i.model,n=o.document.selection,r=o.schema,a=i.editing.view,l=t.keyCode,c=lm(l,i.locale.contentLanguageDirection),d=a.document.selection.getSelectedElement(),h=i.editing.mapper.toModelElement(d),g;Po(d,h,r)?g=this._handleArrowKeyPressOnSelectedWidget(c):n.isCollapsed?g=this._handleArrowKeyPressWhenSelectionNextToAWidget(c):t.shiftKey||(g=this._handleArrowKeyPressWhenNonCollapsedSelection(c)),g&&(t.preventDefault(),e.stop())}_handleArrowKeyPressOnSelectedWidget(e){let i=this.editor.model,o=i.document.selection,n=Mo(o);return i.change(r=>{if(n){if(!(n===(e?"after":"before")))return r.removeSelectionAttribute(Ri),!0}else return r.setSelectionAttribute(Ri,e?"after":"before"),!0;return!1})}_handleArrowKeyPressWhenSelectionNextToAWidget(e){let t=this.editor,i=t.model,o=i.schema,n=t.plugins.get("Widget"),r=n._getObjectElementNextToSelection(e),a=t.editing.mapper.toViewElement(r);return Po(a,r,o)?(i.change(l=>{n._setSelectionOverElement(r),l.setSelectionAttribute(Ri,e?"before":"after")}),!0):!1}_handleArrowKeyPressWhenNonCollapsedSelection(e){let t=this.editor,i=t.model,o=i.schema,n=t.editing.mapper,r=i.document.selection,a=e?r.getLastPosition().nodeBefore:r.getFirstPosition().nodeAfter,l=n.toViewElement(a);return Po(l,a,o)?(i.change(c=>{c.setSelection(a,"on"),c.setSelectionAttribute(Ri,e?"after":"before")}),!0):!1}_enableInsertingParagraphsOnButtonClick(){let e=this.editor,t=e.editing.view;this._listenToIfEnabled(t.document,"mousedown",(i,o)=>{let n=cC(o.domTarget);if(!n)return;let r=dC(n),a=hC(n,t.domConverter),l=e.editing.mapper.toModelElement(a);this._insertParagraph(l,r),o.preventDefault(),i.stop()})}_enableInsertingParagraphsOnEnterKeypress(){let e=this.editor,t=e.model.document.selection,i=e.editing.view;this._listenToIfEnabled(i.document,"enter",(o,n)=>{if(o.eventPhase!="atTarget")return;let r=t.getSelectedElement(),a=e.editing.mapper.toViewElement(r),l=e.model.schema,c;this._insertParagraphAccordingToFakeCaretPosition()?c=!0:Po(a,r,l)&&(this._insertParagraph(r,n.isSoft?"before":"after"),c=!0),c&&(n.preventDefault(),o.stop())},{context:Ve})}_enableInsertingParagraphsOnTypingKeystroke(){let t=this.editor.editing.view.document;this._listenToIfEnabled(t,"insertText",(i,o)=>{this._insertParagraphAccordingToFakeCaretPosition()&&(o.selection=t.selection)},{priority:"high"}),K.isAndroid?this._listenToIfEnabled(t,"keydown",(i,o)=>{o.keyCode==229&&this._insertParagraphAccordingToFakeCaretPosition()}):this._listenToIfEnabled(t,"compositionstart",()=>{this._insertParagraphAccordingToFakeCaretPosition()},{priority:"high"})}_enableDeleteIntegration(){let e=this.editor,t=e.editing.view,i=e.model,o=i.schema;this._listenToIfEnabled(t.document,"delete",(n,r)=>{if(n.eventPhase!="atTarget")return;let a=Mo(i.document.selection);if(!a)return;let l=r.direction,c=i.document.selection.getSelectedElement(),d=a==="before",h=l=="forward";if(d===h)e.execute("delete",{selection:i.createSelection(c,"on")});else{let m=o.getNearestSelectionRange(i.createPositionAt(c,a),l);if(m)if(!m.isCollapsed)i.change(p=>{p.setSelection(m),e.execute(h?"deleteForward":"delete")});else{let p=i.createSelection(m.start);if(i.modifySelection(p,{direction:l}),!p.focus.isEqual(m.start))i.change(b=>{b.setSelection(m),e.execute(h?"deleteForward":"delete")});else{let b=bC(o,m.start.parent);i.deleteContent(i.createSelection(b,"on"),{doNotAutoparagraph:!0})}}}r.preventDefault(),n.stop()},{context:Ve})}_enableInsertContentIntegration(){let e=this.editor,t=this.editor.model,i=t.document.selection;this._listenToIfEnabled(e.model,"insertContent",(o,[n,r])=>{if(r&&!r.is("documentSelection"))return;let a=Mo(i);if(a)return o.stop(),t.change(l=>{let c=i.getSelectedElement(),d=t.createPositionAt(c,a),h=l.createSelection(d),g=t.insertContent(n,h);return l.setSelection(h),g})},{priority:"high"})}_enableInsertObjectIntegration(){let e=this.editor,i=this.editor.model.document.selection;this._listenToIfEnabled(e.model,"insertObject",(o,n)=>{let[,r,a={}]=n;if(r&&!r.is("documentSelection"))return;let l=Mo(i);l&&(a.findOptimalPosition=l,n[3]=a)},{priority:"high"})}_enableDeleteContentIntegration(){let e=this.editor,i=this.editor.model.document.selection;this._listenToIfEnabled(e.model,"deleteContent",(o,[n])=>{if(n&&!n.is("documentSelection"))return;Mo(i)&&o.stop()},{priority:"high"})}};function mC(s,e,t){let i=s.createUIElement("div",{class:"ck ck-reset_all ck-widget__type-around"},function(o){let n=this.toDomElement(o);return fC(n,e),pC(n),n});s.insert(s.createPositionAt(t,"end"),i)}function fC(s,e){for(let t of yb){let i=new it({tag:"div",attributes:{class:["ck","ck-widget__type-around__button",`ck-widget__type-around__button_${t}`],title:e[t],"aria-hidden":"true"},children:[s.ownerDocument.importNode(gC,!0)]});s.appendChild(i.render())}}function pC(s){let e=new it({tag:"div",attributes:{class:["ck","ck-widget__type-around__fake-caret"]}});s.appendChild(e.render())}function bC(s,e){let t=e;for(let i of e.getAncestors({parentFirst:!0})){if(i.childCount>1||s.isLimit(i))break;t=i}return t}function wC(s){let e=s.model;return(t,i)=>{let o=i.keyCode==ne.arrowup,n=i.keyCode==ne.arrowdown,r=i.shiftKey,a=e.document.selection;if(!o&&!n)return;let l=n;if(r&&xC(a,l))return;let c=kC(s,a,l);if(c){if(c.isCollapsed){if(a.isCollapsed)return;if(r)return}(c.isCollapsed||vC(s,c,l))&&(e.change(d=>{let h=l?c.end:c.start;if(r){let g=e.createSelection(a.anchor);g.setFocus(h),d.setSelection(g)}else d.setSelection(h)}),t.stop(),i.preventDefault(),i.stopPropagation())}}}function kC(s,e,t){let i=s.model;if(t){let o=e.isCollapsed?e.focus:e.getLastPosition(),n=vb(i,o,"forward");if(!n)return null;let r=i.createRange(o,n),a=xb(i.schema,r,"backward");return a?i.createRange(o,a):null}else{let o=e.isCollapsed?e.focus:e.getFirstPosition(),n=vb(i,o,"backward");if(!n)return null;let r=i.createRange(n,o),a=xb(i.schema,r,"forward");return a?i.createRange(a,o):null}}function vb(s,e,t){let i=s.schema,o=s.createRangeIn(e.root),n=t=="forward"?"elementStart":"elementEnd";for(let{previousPosition:r,item:a,type:l}of o.getWalker({startPosition:e,direction:t})){if(i.isLimit(a)&&!i.isInline(a))return r;if(l==n&&i.isBlock(a))return null}return null}function xb(s,e,t){let i=t=="backward"?e.end:e.start;if(s.checkChild(i,"$text"))return i;for(let{nextPosition:o}of e.getWalker({direction:t}))if(s.checkChild(o,"$text"))return o;return null}function vC(s,e,t){let i=s.model,o=s.view.domConverter;if(t){let c=i.createSelection(e.start);i.modifySelection(c),!c.focus.isAtEnd&&!e.start.isEqual(c.focus)&&(e=i.createRange(c.focus,e.end))}let n=s.mapper.toViewRange(e),r=o.viewRangeToDom(n),a=se.getDomRangeRects(r),l;for(let c of a){if(l===void 0){l=Math.round(c.bottom);continue}if(Math.round(c.top)>=l)return!1;l=Math.max(l,Math.round(c.bottom))}return!0}function xC(s,e){return!s.isCollapsed&&s.isBackward==e}var Qt=class extends V{_previouslySelected=new Set;static get pluginName(){return"Widget"}static get requires(){return[xh,Gt]}init(){let e=this.editor,t=e.editing.view,i=t.document,o=e.t;this.editor.editing.downcastDispatcher.on("selection",(n,r,a)=>{let l=a.writer,c=r.selection;if(c.isCollapsed)return;let d=c.getSelectedElement();if(!d)return;let h=e.editing.mapper.toViewElement(d);Ve(h)&&a.consumable.consume(c,"selection")&&l.setSelection(l.createRangeOn(h),{fake:!0,label:lC(h)})}),this.editor.editing.downcastDispatcher.on("selection",(n,r,a)=>{this._clearPreviouslySelectedWidgets(a.writer);let l=a.writer,c=l.document.selection,d=null;for(let h of c.getRanges())for(let g of h){let m=g.item;Ve(m)&&!_C(m,d)&&(l.addClass(wb,m),this._previouslySelected.add(m),d=m)}},{priority:"low"}),t.addObserver(wo),this.listenTo(i,"mousedown",(...n)=>this._onMousedown(...n)),this.listenTo(i,"arrowKey",(...n)=>{this._handleSelectionChangeOnArrowKeyPress(...n)},{context:[Ve,"$text"]}),this.listenTo(i,"arrowKey",(...n)=>{this._preventDefaultOnArrowKeyPress(...n)},{context:"$root"}),this.listenTo(i,"arrowKey",wC(this.editor.editing),{context:"$text"}),this.listenTo(i,"delete",(n,r)=>{this._handleDelete(r.direction=="forward")&&(r.preventDefault(),n.stop())},{context:"$root"}),this.listenTo(i,"tab",(n,r)=>{n.eventPhase=="atTarget"&&(r.shiftKey||this._selectFirstNestedEditable()&&(r.preventDefault(),n.stop()))},{context:Ve,priority:"low"}),this.listenTo(i,"tab",(n,r)=>{r.shiftKey&&this._selectAncestorWidget()&&(r.preventDefault(),n.stop())},{priority:"low"}),this.listenTo(i,"keydown",(n,r)=>{r.keystroke==ne.esc&&this._selectAncestorWidget()&&(r.preventDefault(),n.stop())},{priority:"low"}),e.accessibility.addKeystrokeInfoGroup({id:"widget",label:o("Keystrokes that can be used when a widget is selected (for example: image, table, etc.)"),keystrokes:[{label:o("Move focus from an editable area back to the parent widget"),keystroke:"Esc"},{label:o("Insert a new paragraph directly after a widget"),keystroke:"Enter"},{label:o("Insert a new paragraph directly before a widget"),keystroke:"Shift+Enter"},{label:o("Move the caret to allow typing directly before a widget"),keystroke:[["arrowup"],["arrowleft"]]},{label:o("Move the caret to allow typing directly after a widget"),keystroke:[["arrowdown"],["arrowright"]]}]})}_onMousedown(e,t){let i=this.editor,o=i.editing.view,n=o.document,r=t.target;if(t.domEvent.detail>=3){this._selectBlockContent(r)&&t.preventDefault();return}if(yC(r)||!Ve(r)&&(r=r.findAncestor(Ve),!r))return;K.isAndroid&&t.preventDefault(),n.isFocused||o.focus();let a=i.editing.mapper.toModelElement(r);this._setSelectionOverElement(a)}_selectBlockContent(e){let t=this.editor,i=t.model,o=t.editing.mapper,n=i.schema,r=o.findMappedViewAncestor(this.editor.editing.view.createPositionAt(e,0)),a=CC(o.toModelElement(r),i.schema);return a?(i.change(l=>{let c=n.isLimit(a)?null:AC(l.createPositionAfter(a),n),d=l.createPositionAt(a,0),h=c?l.createPositionAt(c,0):l.createPositionAt(a,"end");l.setSelection(l.createRange(d,h))}),!0):!1}_handleSelectionChangeOnArrowKeyPress(e,t){let i=t.keyCode,o=this.editor.model,n=o.schema,r=o.document.selection,a=r.getSelectedElement(),l=gs(i,this.editor.locale.contentLanguageDirection),c=l=="down"||l=="right",d=l=="up"||l=="down";if(a&&n.isObject(a)){let g=c?r.getLastPosition():r.getFirstPosition(),m=n.getNearestSelectionRange(g,c?"forward":"backward");m&&(o.change(p=>{p.setSelection(m)}),t.preventDefault(),e.stop());return}if(!r.isCollapsed&&!t.shiftKey){let g=r.getFirstPosition(),m=r.getLastPosition(),p=g.nodeAfter,b=m.nodeBefore;(p&&n.isObject(p)||b&&n.isObject(b))&&(o.change(k=>{k.setSelection(c?m:g)}),t.preventDefault(),e.stop());return}if(!r.isCollapsed)return;let h=this._getObjectElementNextToSelection(c);if(h&&n.isObject(h)){if(n.isInline(h)&&d)return;this._setSelectionOverElement(h),t.preventDefault(),e.stop()}}_preventDefaultOnArrowKeyPress(e,t){let i=this.editor.model,o=i.schema,n=i.document.selection.getSelectedElement();n&&o.isObject(n)&&(t.preventDefault(),e.stop())}_handleDelete(e){let i=this.editor.model.document.selection;if(!this.editor.model.canEditAt(i)||!i.isCollapsed)return;let o=this._getObjectElementNextToSelection(e);if(o)return this.editor.model.change(n=>{let r=i.anchor.parent;for(;r.isEmpty;){let a=r;r=a.parent,n.remove(a)}this._setSelectionOverElement(o)}),!0}_setSelectionOverElement(e){this.editor.model.change(t=>{t.setSelection(t.createRangeOn(e))})}_getObjectElementNextToSelection(e){let t=this.editor.model,i=t.schema,o=t.document.selection,n=t.createSelection(o);if(t.modifySelection(n,{direction:e?"forward":"backward"}),n.isEqual(o))return null;let r=e?n.focus.nodeBefore:n.focus.nodeAfter;return r&&i.isObject(r)?r:null}_clearPreviouslySelectedWidgets(e){for(let t of this._previouslySelected)e.removeClass(wb,t);this._previouslySelected.clear()}_selectFirstNestedEditable(){let e=this.editor,i=this.editor.editing.view.document;for(let o of i.selection.getFirstRange().getItems())if(o.is("editableElement")){let n=e.editing.mapper.toModelElement(o);if(!n)continue;let r=e.model.createPositionAt(n,0),a=e.model.schema.getNearestSelectionRange(r,"forward");return e.model.change(l=>{l.setSelection(a)}),!0}return!1}_selectAncestorWidget(){let e=this.editor,t=e.editing.mapper,o=e.editing.view.document.selection.getFirstPosition().parent,r=(o.is("$text")?o.parent:o).findAncestor(Ve);if(!r)return!1;let a=t.toModelElement(r);return a?(e.model.change(l=>{l.setSelection(a,"on")}),!0):!1}};function yC(s){let e=s;for(;e;){if(e.is("editableElement")&&!e.is("rootElement"))return!0;if(Ve(e))return!1;e=e.parent}return!1}function _C(s,e){return e?Array.from(s.getAncestors()).includes(e):!1}function CC(s,e){for(let t of s.getAncestors({includeSelf:!0,parentFirst:!0})){if(e.checkChild(t,"$text"))return t;if(e.isLimit(t)&&!e.isObject(t))break}return null}function AC(s,e){let t=new Mt({startPosition:s});for(let{item:i}of t){if(e.isLimit(i)||!i.is("element"))return null;if(e.checkChild(i,"$text"))return i}return null}var Lo=class extends Kt{domEventType=["paste","copy","cut","drop","dragover","dragstart","dragend","dragenter","dragleave"];constructor(e){super(e);let t=this.document;this.listenTo(t,"paste",i("clipboardInput"),{priority:"low"}),this.listenTo(t,"drop",i("clipboardInput"),{priority:"low"}),this.listenTo(t,"dragover",i("dragging"),{priority:"low"});function i(o){return(n,r)=>{r.preventDefault();let a=r.dropRange?[r.dropRange]:null,l=new xt(t,o);t.fire(l,{dataTransfer:r.dataTransfer,method:n.name,targetRanges:a,target:r.target,domEvent:r.domEvent}),l.stop.called&&r.stopPropagation()}}}onDomEvent(e){let t="clipboardData"in e?e.clipboardData:e.dataTransfer,i=e.type=="drop"||e.type=="paste",o={dataTransfer:new Ss(t,{cacheFiles:i})};(e.type=="drop"||e.type=="dragover")&&(o.dropRange=SC(this.view,e)),this.fire(e.type,e,o)}};function SC(s,e){let t=e.target.ownerDocument,i=e.clientX,o=e.clientY,n;return t.caretRangeFromPoint&&t.caretRangeFromPoint(i,o)?n=t.caretRangeFromPoint(i,o):e.rangeParent&&(n=t.createRange(),n.setStart(e.rangeParent,e.rangeOffset),n.collapse(!0)),n?s.domConverter.domRangeToView(n):null}function EC(s){return s=s.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\r?\n\r?\n/g,"</p><p>").replace(/\r?\n/g,"<br>").replace(/\t/g,"&nbsp;&nbsp;&nbsp;&nbsp;").replace(/^\s/,"&nbsp;").replace(/\s$/,"&nbsp;").replace(/\s\s/g," &nbsp;"),(s.includes("</p><p>")||s.includes("<br>"))&&(s=`<p>${s}</p>`),s}function TC(s){return s.replace(/<span(?: class="Apple-converted-space"|)>(\s+)<\/span>/g,(e,t)=>t.length==1?" ":t).replace(/<!--[\s\S]*?-->/g,"")}var _b=["figcaption","li"],Cb=["ol","ul"];function Ib(s){if(s.is("$text")||s.is("$textProxy"))return s.data;if(s.is("element","img")&&s.hasAttribute("alt"))return s.getAttribute("alt");if(s.is("element","br"))return`
`;let e="",t=null;for(let i of s.getChildren())e+=IC(i,t)+Ib(i),t=i;return e}function IC(s,e){return e?s.is("element","li")&&!s.isEmpty&&s.getChild(0).is("containerElement")||Cb.includes(s.name)&&Cb.includes(e.name)?`

`:!s.is("containerElement")&&!e.is("containerElement")?"":_b.includes(s.name)||_b.includes(e.name)?`
`:`

`:""}var Js=class extends V{_markersToCopy=new Map;static get pluginName(){return"ClipboardMarkersUtils"}_registerMarkerToCopy(e,t){this._markersToCopy.set(e,t)}_copySelectedFragmentWithMarkers(e,t,i=o=>o.model.getSelectedContent(o.model.document.selection)){return this.editor.model.change(o=>{let n=o.model.document.selection;o.setSelection(t);let r=this._insertFakeMarkersIntoSelection(o,o.model.document.selection,e),a=i(o),l=this._removeFakeMarkersInsideElement(o,a);for(let[c,d]of Object.entries(r)){l[c]||=o.createRangeIn(a);for(let h of d)o.remove(h)}a.markers.clear();for(let[c,d]of Object.entries(l))a.markers.set(c,d);return o.setSelection(n),a})}_pasteMarkersIntoTransformedElement(e,t){let i=this._getPasteMarkersFromRangeMap(e);return this.editor.model.change(o=>{let n=this._insertFakeMarkersElements(o,i),r=t(o),a=this._removeFakeMarkersInsideElement(o,r);for(let l of Object.values(n).flat())o.remove(l);for(let[l,c]of Object.entries(a))o.model.markers.has(l)||o.addMarker(l,{usingOperation:!0,affectsData:!0,range:c});return r})}_pasteFragmentWithMarkers(e){let t=this._getPasteMarkersFromRangeMap(e.markers);e.markers.clear();for(let i of t)e.markers.set(i.name,i.range);return this.editor.model.insertContent(e)}_forceMarkersCopy(e,t,i={allowedActions:"all",copyPartiallySelected:!0,duplicateOnPaste:!0}){let o=this._markersToCopy.get(e);this._markersToCopy.set(e,i),t(),o?this._markersToCopy.set(e,o):this._markersToCopy.delete(e)}_isMarkerCopyable(e,t){let i=this._getMarkerClipboardConfig(e);if(!i)return!1;if(!t)return!0;let{allowedActions:o}=i;return o==="all"||o.includes(t)}_hasMarkerConfiguration(e){return!!this._getMarkerClipboardConfig(e)}_getMarkerClipboardConfig(e){let[t]=e.split(":");return this._markersToCopy.get(t)||null}_insertFakeMarkersIntoSelection(e,t,i){let o=this._getCopyableMarkersFromSelection(e,t,i);return this._insertFakeMarkersElements(e,o)}_getCopyableMarkersFromSelection(e,t,i){let o=Array.from(t.getRanges()),n=new Set(o.flatMap(a=>Array.from(e.model.markers.getMarkersIntersectingRange(a)))),r=a=>{if(!this._isMarkerCopyable(a.name,i))return!1;let{copyPartiallySelected:c}=this._getMarkerClipboardConfig(a.name);if(!c){let d=a.getRange();return o.some(h=>h.containsRange(d,!0))}return!0};return Array.from(n).filter(r).map(a=>({name:i==="dragstart"?this._getUniqueMarkerName(a.name):a.name,range:a.getRange()}))}_getPasteMarkersFromRangeMap(e,t=null){let{model:i}=this.editor;return(e instanceof Map?Array.from(e.entries()):Object.entries(e)).flatMap(([n,r])=>{if(!this._hasMarkerConfiguration(n))return[{name:n,range:r}];if(this._isMarkerCopyable(n,t)){let a=this._getMarkerClipboardConfig(n),l=i.markers.has(n)&&i.markers.get(n).getRange().root.rootName==="$graveyard";return(a.duplicateOnPaste||l)&&(n=this._getUniqueMarkerName(n)),[{name:n,range:r}]}return[]})}_insertFakeMarkersElements(e,t){let i={},o=t.flatMap(n=>{let{start:r,end:a}=n.range;return[{position:r,marker:n,type:"start"},{position:a,marker:n,type:"end"}]}).sort(({position:n},{position:r})=>n.isBefore(r)?1:-1);for(let{position:n,marker:r,type:a}of o){let l=e.createElement("$marker",{"data-name":r.name,"data-type":a});i[r.name]||(i[r.name]=[]),i[r.name].push(l),e.insert(l,n)}return i}_removeFakeMarkersInsideElement(e,t){let o=this._getAllFakeMarkersFromElement(e,t).reduce((n,r)=>{let a=r.markerElement&&e.createPositionBefore(r.markerElement),l=n[r.name],c=!1;return l&&l.start&&l.end&&(this._getMarkerClipboardConfig(r.name).duplicateOnPaste?n[this._getUniqueMarkerName(r.name)]=n[r.name]:c=!0,l=null),c||(n[r.name]=Ce(B({},l),{[r.type]:a})),r.markerElement&&e.remove(r.markerElement),n},{});return Yu(o,n=>new M(n.start||e.createPositionFromPath(t,[0]),n.end||e.createPositionAt(t,"end")))}_getAllFakeMarkersFromElement(e,t){let i=Array.from(e.createRangeIn(t)).flatMap(({item:r})=>{if(!r.is("element","$marker"))return[];let a=r.getAttribute("data-name"),l=r.getAttribute("data-type");return[{markerElement:r,name:a,type:l}]}),o=[],n=[];for(let r of i)r.type==="end"&&(i.some(l=>l.name===r.name&&l.type==="start")||o.push({markerElement:null,name:r.name,type:"start"})),r.type==="start"&&(i.some(l=>l.name===r.name&&l.type==="end")||n.unshift({markerElement:null,name:r.name,type:"end"}));return[...o,...i,...n]}_getUniqueMarkerName(e){let t=e.split(":"),i=We().substring(1,6);return t.length===3?`${t.slice(0,2).join(":")}:${i}`:`${t.join(":")}:${i}`}},Rt=class extends V{static get pluginName(){return"ClipboardPipeline"}static get requires(){return[Js]}init(){this.editor.editing.view.addObserver(Lo),this._setupPasteDrop(),this._setupCopyCut()}_fireOutputTransformationEvent(e,t,i){let o=this.editor.plugins.get("ClipboardMarkersUtils");this.editor.model.enqueueChange({isUndoable:i==="cut"},()=>{let n=o._copySelectedFragmentWithMarkers(i,t);this.fire("outputTransformation",{dataTransfer:e,content:n,method:i})})}_setupPasteDrop(){let e=this.editor,t=e.model,i=e.editing.view,o=i.document,n=this.editor.plugins.get("ClipboardMarkersUtils");this.listenTo(o,"clipboardInput",(r,a)=>{a.method=="paste"&&!e.model.canEditAt(e.model.document.selection)&&r.stop()},{priority:"highest"}),this.listenTo(o,"clipboardInput",(r,a)=>{let l=a.dataTransfer,c;if(a.content)c=a.content;else{let h="";l.getData("text/html")?h=TC(l.getData("text/html")):l.getData("text/plain")&&(h=EC(l.getData("text/plain"))),c=this.editor.data.htmlProcessor.toView(h)}let d=new xt(this,"inputTransformation");this.fire(d,{content:c,dataTransfer:l,targetRanges:a.targetRanges,method:a.method}),d.stop.called&&r.stop(),i.scrollToTheSelection()},{priority:"low"}),this.listenTo(this,"inputTransformation",(r,a)=>{if(a.content.isEmpty)return;let c=this.editor.data.toModel(a.content,"$clipboardHolder");c.childCount!=0&&(r.stop(),t.change(()=>{this.fire("contentInsertion",{content:c,method:a.method,dataTransfer:a.dataTransfer,targetRanges:a.targetRanges})}))},{priority:"low"}),this.listenTo(this,"contentInsertion",(r,a)=>{a.resultRange=n._pasteFragmentWithMarkers(a.content)},{priority:"low"})}_setupCopyCut(){let e=this.editor,t=e.model.document,o=e.editing.view.document,n=(r,a)=>{let l=a.dataTransfer;a.preventDefault(),this._fireOutputTransformationEvent(l,t.selection,r.name)};this.listenTo(o,"copy",n,{priority:"low"}),this.listenTo(o,"cut",(r,a)=>{e.model.canEditAt(e.model.document.selection)?n(r,a):a.preventDefault()},{priority:"low"}),this.listenTo(this,"outputTransformation",(r,a)=>{let l=e.data.toView(a.content);o.fire("clipboardOutput",{dataTransfer:a.dataTransfer,content:l,method:a.method})},{priority:"low"}),this.listenTo(o,"clipboardOutput",(r,a)=>{a.content.isEmpty||(a.dataTransfer.setData("text/html",this.editor.data.htmlProcessor.toData(a.content)),a.dataTransfer.setData("text/plain",Ib(a.content))),a.method=="cut"&&e.model.deleteContent(t.selection)},{priority:"low"})}},yh=Ci("px"),_h=class extends G{constructor(){super();let e=this.bindTemplate;this.set({isVisible:!1,left:null,top:null,width:null}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-clipboard-drop-target-line",e.if("isVisible","ck-hidden",t=>!t)],style:{left:e.to("left",t=>yh(t)),top:e.to("top",t=>yh(t)),width:e.to("width",t=>yh(t))}}})}},Bn=class extends V{removeDropMarkerDelayed=sn(()=>this.removeDropMarker(),40);_updateDropMarkerThrottled=oo(e=>this._updateDropMarker(e),40);_reconvertMarkerThrottled=oo(()=>{this.editor.model.markers.has("drop-target")&&this.editor.editing.reconvertMarker("drop-target")},0);_dropTargetLineView=new _h;_domEmitter=new(Ge());_scrollables=new Map;static get pluginName(){return"DragDropTarget"}init(){this._setupDropMarker()}destroy(){this._domEmitter.stopListening();for(let{resizeObserver:e}of this._scrollables.values())e.destroy();return this._updateDropMarkerThrottled.cancel(),this.removeDropMarkerDelayed.cancel(),this._reconvertMarkerThrottled.cancel(),super.destroy()}updateDropMarker(e,t,i,o,n,r){this.removeDropMarkerDelayed.cancel();let a=Ab(this.editor,e,t,i,o,n,r);if(a){if(r&&r.containsRange(a))return this.removeDropMarker();this._updateDropMarkerThrottled(a)}}getFinalDropRange(e,t,i,o,n,r){let a=Ab(this.editor,e,t,i,o,n,r);return this.removeDropMarker(),a}removeDropMarker(){let e=this.editor.model;this.removeDropMarkerDelayed.cancel(),this._updateDropMarkerThrottled.cancel(),this._dropTargetLineView.isVisible=!1,e.markers.has("drop-target")&&e.change(t=>{t.removeMarker("drop-target")})}_setupDropMarker(){let e=this.editor;e.ui.view.body.add(this._dropTargetLineView),e.conversion.for("editingDowncast").markerToHighlight({model:"drop-target",view:{classes:["ck-clipboard-drop-target-range"]}}),e.conversion.for("editingDowncast").markerToElement({model:"drop-target",view:(t,{writer:i})=>{if(e.model.schema.checkChild(t.markerRange.start,"$text"))return this._dropTargetLineView.isVisible=!1,this._createDropTargetPosition(i);t.markerRange.isCollapsed?this._updateDropTargetLine(t.markerRange):this._dropTargetLineView.isVisible=!1}})}_updateDropMarker(e){let t=this.editor,i=t.model.markers;t.model.change(o=>{i.has("drop-target")?i.get("drop-target").getRange().isEqual(e)||o.updateMarker("drop-target",{range:e}):o.addMarker("drop-target",{range:e,usingOperation:!1,affectsData:!1})})}_createDropTargetPosition(e){return e.createUIElement("span",{class:"ck ck-clipboard-drop-target-position"},function(t){let i=this.toDomElement(t);return i.append("\u2060",t.createElement("span"),"\u2060"),i})}_updateDropTargetLine(e){let t=this.editor.editing,i=e.start.nodeBefore,o=e.start.nodeAfter,n=e.start.parent,r=i?t.mapper.toViewElement(i):null,a=r?t.view.domConverter.mapViewToDom(r):null,l=o?t.mapper.toViewElement(o):null,c=l?t.view.domConverter.mapViewToDom(l):null,d=t.mapper.toViewElement(n);if(!d)return;let h=t.view.domConverter.mapViewToDom(d),g=this._getScrollableRect(d),{scrollX:m,scrollY:p}=j.window,b=a?new se(a):null,k=c?new se(c):null,v=new se(h).excludeScrollbarsAndBorders(),x=b?b.bottom:v.top,u=k?k.top:v.bottom,f=j.window.getComputedStyle(h),w=x<=u?(x+u)/2:u;if(g.top<w&&w<g.bottom){let y=v.left+parseFloat(f.paddingLeft),_=v.right-parseFloat(f.paddingRight),C=Math.max(y+m,g.left),A=Math.min(_+m,g.right);this._dropTargetLineView.set({isVisible:!0,left:C,top:w+p,width:A-C})}else this._dropTargetLineView.isVisible=!1}_getScrollableRect(e){let t=e.root.rootName,i;if(this._scrollables.has(t))i=this._scrollables.get(t).domElement;else{let o=this.editor.editing.view.domConverter.mapViewToDom(e);i=MC(o),this._domEmitter.listenTo(i,"scroll",this._reconvertMarkerThrottled,{usePassive:!0});let n=new tn(i,this._reconvertMarkerThrottled);this._scrollables.set(t,{domElement:i,resizeObserver:n})}return new se(i).excludeScrollbarsAndBorders()}};function Ab(s,e,t,i,o,n,r){let a=s.model,l=s.editing.mapper,d=Sb(s,e);for(;d;){if(!n){if(a.schema.checkChild(d,"$text")){if(t){let h=t[0].start,g=l.toModelPosition(h);if(!r||Array.from(r.getItems()).every(p=>a.schema.checkChild(g,p))){if(a.schema.checkChild(g,"$text"))return a.createRange(g);if(h)return Ra(s,Sb(s,h.parent),i,o)}}}else if(a.schema.isInline(d))return Ra(s,d,i,o)}if(a.schema.isBlock(d))return Ra(s,d,i,o);if(a.schema.checkChild(d,"$block")){let h=Array.from(d.getChildren()).filter(p=>p.is("element")&&!PC(s,p)),g=0,m=h.length;if(m==0)return a.createRange(a.createPositionAt(d,"end"));for(;g<m-1;){let p=Math.floor((g+m)/2);Pb(s,h[p],i,o)=="before"?m=p:g=p}return Ra(s,h[g],i,o)}d=d.parent}return null}function PC(s,e){let t=s.editing.mapper,i=s.editing.view.domConverter,o=t.toViewElement(e);if(!o)return!0;let n=i.mapViewToDom(o);return j.window.getComputedStyle(n).float!="none"}function Ra(s,e,t,i){let o=s.model;return o.createRange(o.createPositionAt(e,Pb(s,e,t,i)))}function Pb(s,e,t,i){let o=s.editing.mapper,n=s.editing.view.domConverter,r=o.toViewElement(e),a=n.mapViewToDom(r),l=new se(a);return s.model.schema.isInline(e)?t<(l.left+l.right)/2?"before":"after":i<(l.top+l.bottom)/2?"before":"after"}function Sb(s,e){let t=s.editing.mapper,i=s.editing.view,o=t.toModelElement(e);if(o)return o;let n=i.createPositionBefore(e),r=t.findMappedViewAncestor(n);return t.toModelElement(r)}function MC(s){let e=s;do{e=e.parentElement;let t=j.window.getComputedStyle(e).overflowY;if(t=="auto"||t=="scroll")break}while(e.tagName!="BODY");return e}var Ch=class extends V{_isBlockDragging=!1;_domEmitter=new(Ge());static get pluginName(){return"DragDropBlockToolbar"}init(){let e=this.editor;if(this.listenTo(e,"change:isReadOnly",(t,i,o)=>{o?(this.forceDisabled("readOnlyMode"),this._isBlockDragging=!1):this.clearForceDisabled("readOnlyMode")}),K.isAndroid&&this.forceDisabled("noAndroidSupport"),e.plugins.has("BlockToolbar")){let i=e.plugins.get("BlockToolbar").buttonView.element;this._domEmitter.listenTo(i,"dragstart",(o,n)=>this._handleBlockDragStart(n)),this._domEmitter.listenTo(j.document,"dragover",(o,n)=>this._handleBlockDragging(n)),this._domEmitter.listenTo(j.document,"drop",(o,n)=>this._handleBlockDragging(n)),this._domEmitter.listenTo(j.document,"dragend",()=>this._handleBlockDragEnd(),{useCapture:!0}),this.isEnabled&&i.setAttribute("draggable","true"),this.on("change:isEnabled",(o,n,r)=>{i.setAttribute("draggable",r?"true":"false")})}}destroy(){return this._domEmitter.stopListening(),super.destroy()}_handleBlockDragStart(e){if(!this.isEnabled)return;let t=this.editor.model,i=t.document.selection,o=this.editor.editing.view,n=Array.from(i.getSelectedBlocks()),r=t.createRange(t.createPositionBefore(n[0]),t.createPositionAfter(n[n.length-1]));t.change(a=>a.setSelection(r)),this._isBlockDragging=!0,o.focus(),o.getObserver(Lo).onDomEvent(e)}_handleBlockDragging(e){if(!this.isEnabled||!this._isBlockDragging)return;let t=e.clientX+(this.editor.locale.contentLanguageDirection=="ltr"?100:-100),i=e.clientY,o=document.elementFromPoint(t,i),n=this.editor.editing.view;!o||!o.closest(".ck-editor__editable")||n.getObserver(Lo).onDomEvent(Ce(B({},e),{type:e.type,dataTransfer:e.dataTransfer,target:o,clientX:t,clientY:i,preventDefault:()=>e.preventDefault(),stopPropagation:()=>e.stopPropagation()}))}_handleBlockDragEnd(){this._isBlockDragging=!1}},Ah=class extends V{_draggedRange;_draggingUid;_draggableElement;_clearDraggableAttributesDelayed=sn(()=>this._clearDraggableAttributes(),40);_blockMode=!1;_domEmitter=new(Ge());_previewContainer;static get pluginName(){return"DragDrop"}static get requires(){return[Rt,Qt,Bn,Ch]}init(){let e=this.editor,t=e.editing.view;this._draggedRange=null,this._draggingUid="",this._draggableElement=null,t.addObserver(Lo),t.addObserver(wo),this._setupDragging(),this._setupContentInsertionIntegration(),this._setupClipboardInputIntegration(),this._setupDraggableAttributeHandling(),this.listenTo(e,"change:isReadOnly",(i,o,n)=>{n?this.forceDisabled("readOnlyMode"):this.clearForceDisabled("readOnlyMode")}),this.on("change:isEnabled",(i,o,n)=>{n||this._finalizeDragging(!1)}),K.isAndroid&&this.forceDisabled("noAndroidSupport")}destroy(){return this._draggedRange&&(this._draggedRange.detach(),this._draggedRange=null),this._previewContainer&&this._previewContainer.remove(),this._domEmitter.stopListening(),this._clearDraggableAttributesDelayed.cancel(),super.destroy()}_setupDragging(){let e=this.editor,t=e.model,i=e.editing.view,o=i.document,n=e.plugins.get(Bn);this.listenTo(o,"dragstart",(r,a)=>{if(a.target&&a.target.is("editableElement")){a.preventDefault();return}if(this._prepareDraggedRange(a.target),!this._draggedRange){a.preventDefault();return}this._draggingUid=We(),a.dataTransfer.effectAllowed=this.isEnabled?"copyMove":"copy",a.dataTransfer.setData("application/ckeditor5-dragging-uid",this._draggingUid);let l=t.createSelection(this._draggedRange.toRange());this.editor.plugins.get("ClipboardPipeline")._fireOutputTransformationEvent(a.dataTransfer,l,"dragstart");let{dataTransfer:d,domTarget:h,domEvent:g}=a,{clientX:m}=g;this._updatePreview({dataTransfer:d,domTarget:h,clientX:m}),a.stopPropagation(),this.isEnabled||(this._draggedRange.detach(),this._draggedRange=null,this._draggingUid="")},{priority:"low"}),this.listenTo(o,"dragend",(r,a)=>{this._finalizeDragging(!a.dataTransfer.isCanceled&&a.dataTransfer.dropEffect=="move")},{priority:"low"}),this._domEmitter.listenTo(j.document,"dragend",()=>{this._blockMode=!1},{useCapture:!0}),this.listenTo(o,"dragenter",()=>{this.isEnabled&&i.focus()}),this.listenTo(o,"dragleave",()=>{n.removeDropMarkerDelayed()}),this.listenTo(o,"dragging",(r,a)=>{if(!this.isEnabled){a.dataTransfer.dropEffect="none";return}let{clientX:l,clientY:c}=a.domEvent;n.updateDropMarker(a.target,a.targetRanges,l,c,this._blockMode,this._draggedRange),this._draggedRange||(a.dataTransfer.dropEffect="copy"),K.isGecko||(a.dataTransfer.effectAllowed=="copy"?a.dataTransfer.dropEffect="copy":["all","copyMove"].includes(a.dataTransfer.effectAllowed)&&(a.dataTransfer.dropEffect="move")),r.stop()},{priority:"low"})}_setupClipboardInputIntegration(){let e=this.editor,i=e.editing.view.document,o=e.plugins.get(Bn);this.listenTo(i,"clipboardInput",(n,r)=>{if(r.method!="drop")return;let{clientX:a,clientY:l}=r.domEvent,c=o.getFinalDropRange(r.target,r.targetRanges,a,l,this._blockMode,this._draggedRange);if(!c){this._finalizeDragging(!1),n.stop();return}if(this._draggedRange&&this._draggingUid!=r.dataTransfer.getData("application/ckeditor5-dragging-uid")&&(this._draggedRange.detach(),this._draggedRange=null,this._draggingUid=""),Eb(r.dataTransfer)=="move"&&this._draggedRange&&this._draggedRange.containsRange(c,!0)){this._finalizeDragging(!1),n.stop();return}r.targetRanges=[e.editing.mapper.toViewRange(c)]},{priority:"high"})}_setupContentInsertionIntegration(){let e=this.editor.plugins.get(Rt);e.on("contentInsertion",(t,i)=>{if(!this.isEnabled||i.method!=="drop")return;let o=i.targetRanges.map(n=>this.editor.editing.mapper.toModelRange(n));this.editor.model.change(n=>n.setSelection(o))},{priority:"high"}),e.on("contentInsertion",(t,i)=>{if(!this.isEnabled||i.method!=="drop")return;let o=Eb(i.dataTransfer)=="move",n=!i.resultRange||!i.resultRange.isCollapsed;this._finalizeDragging(n&&o)},{priority:"lowest"})}_setupDraggableAttributeHandling(){let e=this.editor,t=e.editing.view,i=t.document;this.listenTo(i,"mousedown",(o,n)=>{if(K.isAndroid||!n)return;this._clearDraggableAttributesDelayed.cancel();let r=Tb(n.target);if(K.isBlink&&!e.isReadOnly&&!r&&!i.selection.isCollapsed){let a=i.selection.getSelectedElement();(!a||!Ve(a))&&(r=i.selection.editableElement)}r&&(t.change(a=>{a.setAttribute("draggable","true",r)}),this._draggableElement=e.editing.mapper.toModelElement(r))}),this.listenTo(i,"mouseup",()=>{K.isAndroid||this._clearDraggableAttributesDelayed()})}_clearDraggableAttributes(){let e=this.editor.editing;e.view.change(t=>{this._draggableElement&&this._draggableElement.root.rootName!="$graveyard"&&t.removeAttribute("draggable",e.mapper.toViewElement(this._draggableElement)),this._draggableElement=null})}_finalizeDragging(e){let t=this.editor,i=t.model;t.plugins.get(Bn).removeDropMarker(),this._clearDraggableAttributes(),t.plugins.has("WidgetToolbarRepository")&&t.plugins.get("WidgetToolbarRepository").clearForceDisabled("dragDrop"),this._draggingUid="",this._previewContainer&&(this._previewContainer.remove(),this._previewContainer=void 0),this._draggedRange&&(e&&this.isEnabled&&i.change(n=>{let r=i.createSelection(this._draggedRange);i.deleteContent(r,{doNotAutoparagraph:!0});let a=r.getFirstPosition().parent;a.isEmpty&&!i.schema.checkChild(a,"$text")&&i.schema.checkChild(a,"paragraph")&&n.insertElement("paragraph",a,0)}),this._draggedRange.detach(),this._draggedRange=null)}_prepareDraggedRange(e){let t=this.editor,i=t.model,o=i.document.selection,n=e?Tb(e):null;if(n){let c=t.editing.mapper.toModelElement(n);this._draggedRange=bt.fromRange(i.createRangeOn(c)),this._blockMode=i.schema.isBlock(c),t.plugins.has("WidgetToolbarRepository")&&t.plugins.get("WidgetToolbarRepository").forceDisabled("dragDrop");return}if(o.isCollapsed&&!o.getFirstPosition().parent.isEmpty)return;let r=Array.from(o.getSelectedBlocks()),a=o.getFirstRange();if(r.length==0){this._draggedRange=bt.fromRange(a);return}let l=Mb(i,r);if(r.length>1)this._draggedRange=bt.fromRange(l),this._blockMode=!0;else if(r.length==1){let c=a.start.isTouching(l.start)&&a.end.isTouching(l.end);this._draggedRange=bt.fromRange(c?l:a),this._blockMode=c}i.change(c=>c.setSelection(this._draggedRange.toRange()))}_updatePreview({dataTransfer:e,domTarget:t,clientX:i}){let o=this.editor.editing.view,n=o.document.selection.editableElement,r=o.domConverter.mapViewToDom(n),a=j.window.getComputedStyle(r);this._previewContainer?this._previewContainer.firstElementChild&&this._previewContainer.removeChild(this._previewContainer.firstElementChild):(this._previewContainer=et(j.document,"div",{style:"position: fixed; left: -999999px;"}),j.document.body.appendChild(this._previewContainer));let l=new se(r);if(r.contains(t))return;let c=parseFloat(a.paddingLeft),d=et(j.document,"div");d.className="ck ck-content",d.style.width=a.width,d.style.paddingLeft=`${l.left-i+c}px`,K.isiOS&&(d.style.backgroundColor="white"),d.innerHTML=e.getData("text/html"),e.setDragImage(d,0,0),this._previewContainer.appendChild(d)}};function Eb(s){return K.isGecko?s.dropEffect:["all","copyMove"].includes(s.effectAllowed)?"move":"copy"}function Tb(s){if(s.is("editableElement"))return null;if(s.hasClass("ck-widget__selection-handle"))return s.findAncestor(Ve);if(Ve(s))return s;let e=s.findAncestor(t=>Ve(t)||t.is("editableElement"));return Ve(e)?e:null}function Mb(s,e){let t=e[0],i=e[e.length-1],o=t.getCommonAncestor(i),n=s.createPositionBefore(t),r=s.createPositionAfter(i);if(o&&o.is("element")&&!s.schema.isLimit(o)){let a=s.createRangeOn(o),l=n.isTouching(a.start),c=r.isTouching(a.end);if(l&&c)return Mb(s,[o])}return s.createRange(n,r)}var Sh=class extends V{static get pluginName(){return"PastePlainText"}static get requires(){return[Rt]}init(){let e=this.editor,t=e.model,i=e.editing.view,o=i.document,n=t.document.selection,r=!1;i.addObserver(Lo),this.listenTo(o,"keydown",(a,l)=>{r=l.shiftKey}),e.plugins.get(Rt).on("contentInsertion",(a,l)=>{!r&&!LC(l.content,t.schema)||t.change(c=>{let d=Array.from(n.getAttributes()).filter(([g])=>t.schema.getAttributeProperties(g).isFormatting);n.isCollapsed||t.deleteContent(n,{doNotAutoparagraph:!0}),d.push(...n.getAttributes());let h=c.createRangeIn(l.content);for(let g of h.getItems())g.is("$textProxy")&&c.setAttributes(d,g)})})}};function LC(s,e){if(s.childCount>1)return!1;let t=s.getChild(0);return e.isObject(t)?!1:Array.from(t.getAttributeKeys()).length==0}var zn=class extends V{static get pluginName(){return"Clipboard"}static get requires(){return[Js,Rt,Ah,Sh]}init(){let e=this.editor,t=this.editor.t;e.accessibility.addKeystrokeInfos({keystrokes:[{label:t("Copy selected content"),keystroke:"CTRL+C"},{label:t("Paste content"),keystroke:"CTRL+V"},{label:t("Paste content as plain text"),keystroke:"CTRL+SHIFT+V"}]})}};var Lb=class extends V{static get requires(){return[da,zn,Li,Pa,Qs,Xs,Dn]}static get pluginName(){return"Essentials"}};var Fn=class extends ie{attributeKey;constructor(e,t){super(e),this.attributeKey=t}refresh(){let e=this.editor.model,t=e.document;this.value=t.selection.getAttribute(this.attributeKey),this.isEnabled=e.schema.checkAttributeInSelection(t.selection,this.attributeKey)}execute(e={}){let t=this.editor.model,o=t.document.selection,n=e.value,r=e.batch,a=l=>{if(o.isCollapsed)n?l.setSelectionAttribute(this.attributeKey,n):l.removeSelectionAttribute(this.attributeKey);else{let c=t.schema.getValidRanges(o.getRanges(),this.attributeKey);for(let d of c)n?l.setAttribute(this.attributeKey,n,d):l.removeAttribute(this.attributeKey,d)}};r?t.enqueueChange(r,l=>{a(l)}):t.change(l=>{a(l)})}},_t="fontSize",Ct="fontFamily",gi="fontColor",Ni="fontBackgroundColor";function zb(s,e){let t={model:{key:s,values:[]},view:{},upcastAlso:{}};for(let i of e)t.model.values.push(i.model),t.view[i.model]=i.view,i.upcastAlso&&(t.upcastAlso[i.model]=i.upcastAlso);return t}function Fb(s){return e=>NC(e.getStyle(s))}function Ob(s){return(e,{writer:t})=>t.createAttributeElement("span",{style:`${s}:${e}`},{priority:7})}function RC({dropdownView:s,colors:e,columns:t,removeButtonLabel:i,colorPickerLabel:o,documentColorsLabel:n,documentColorsCount:r,colorPickerViewConfig:a}){let l=s.locale,c=new En(l,{colors:e,columns:t,removeButtonLabel:i,colorPickerLabel:o,documentColorsLabel:n,documentColorsCount:r,colorPickerViewConfig:a});return s.colorSelectorView=c,s.panelView.children.add(c),c}function NC(s){return s.replace(/\s/g,"")}var Eh=class extends Fn{constructor(e){super(e,Ct)}};function Hb(s){return s.map(VC).filter(e=>e!==void 0)}function VC(s){if(typeof s=="object")return s;if(s==="default")return{title:"Default",model:void 0};if(typeof s=="string")return DC(s)}function DC(s){let e=s.replace(/"|'/g,"").split(","),t=e[0],i=e.map(BC).join(", ");return{title:t,model:i,view:{name:"span",styles:{"font-family":i},priority:7}}}function BC(s){return s=s.trim(),s.indexOf(" ")>0&&(s=`'${s}'`),s}var Th=class extends V{static get pluginName(){return"FontFamilyEditing"}constructor(e){super(e),e.config.define(Ct,{options:["default","Arial, Helvetica, sans-serif","Courier New, Courier, monospace","Georgia, serif","Lucida Sans Unicode, Lucida Grande, sans-serif","Tahoma, Geneva, sans-serif","Times New Roman, Times, serif","Trebuchet MS, Helvetica, sans-serif","Verdana, Geneva, sans-serif"],supportAllValues:!1})}init(){let e=this.editor;e.model.schema.extend("$text",{allowAttributes:Ct}),e.model.schema.setAttributeProperties(Ct,{isFormatting:!0,copyOnEnter:!0});let t=Hb(e.config.get("fontFamily.options")).filter(o=>o.model),i=zb(Ct,t);e.config.get("fontFamily.supportAllValues")?(this._prepareAnyValueConverters(),this._prepareCompatibilityConverter()):e.conversion.attributeToElement(i),e.commands.add(Ct,new Eh(e))}_prepareAnyValueConverters(){let e=this.editor;e.conversion.for("downcast").attributeToElement({model:Ct,view:(t,{writer:i})=>i.createAttributeElement("span",{style:"font-family:"+t},{priority:7})}),e.conversion.for("upcast").elementToAttribute({model:{key:Ct,value:t=>t.getStyle("font-family")},view:{name:"span",styles:{"font-family":/.*/}}})}_prepareCompatibilityConverter(){this.editor.conversion.for("upcast").elementToAttribute({view:{name:"font",attributes:{face:/.*/}},model:{key:Ct,value:t=>t.getAttribute("face")}})}},Rb='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M11.03 3h6.149a.75.75 0 1 1 0 1.5h-5.514L11.03 3zm1.27 3h4.879a.75.75 0 1 1 0 1.5h-4.244L12.3 6zm1.27 3h3.609a.75.75 0 1 1 0 1.5h-2.973L13.57 9zm-2.754 2.5L8.038 4.785 5.261 11.5h5.555zm.62 1.5H4.641l-1.666 4.028H1.312l5.789-14h1.875l5.789 14h-1.663L11.436 13z"/></svg>',Ih=class extends V{static get pluginName(){return"FontFamilyUI"}init(){let e=this.editor,t=e.t,i=this._getLocalizedOptions(),o=e.commands.get(Ct),n=t("Font Family"),r=zC(i,o);e.ui.componentFactory.add(Ct,a=>{let l=Fe(a);return Zt(l,r,{role:"menu",ariaLabel:n}),l.buttonView.set({label:n,icon:Rb,tooltip:!0}),l.extendTemplate({attributes:{class:"ck-font-family-dropdown"}}),l.bind("isEnabled").to(o),this.listenTo(l,"execute",c=>{e.execute(c.source.commandName,{value:c.source.commandParam}),e.editing.view.focus()}),l}),e.ui.componentFactory.add(`menuBar:${Ct}`,a=>{let l=new Xe(a);l.buttonView.set({label:n,icon:Rb}),l.bind("isEnabled").to(o);let c=new gt(a);for(let d of r){let h=new ut(a,l),g=new ae(a);g.bind(...Object.keys(d.model)).to(d.model),g.bind("ariaChecked").to(g,"isOn"),g.delegate("execute").to(l),g.on("execute",()=>{e.execute(d.model.commandName,{value:d.model.commandParam}),e.editing.view.focus()}),h.children.add(g),c.items.add(h)}return l.panelView.children.add(c),l})}_getLocalizedOptions(){let e=this.editor,t=e.t;return Hb(e.config.get(Ct).options).map(o=>(o.title==="Default"&&(o.title=t("Default")),o))}};function zC(s,e){let t=new we;for(let i of s){let o={type:"button",model:new Lt({commandName:Ct,commandParam:i.model,label:i.title,role:"menuitemradio",withText:!0})};o.model.bind("isOn").to(e,"value",n=>n===i.model?!0:!n||!i.model?!1:n.split(",")[0].replace(/'/g,"").toLowerCase()===i.model.toLowerCase()),i.view&&typeof i.view!="string"&&i.view.styles&&o.model.set("labelStyle",`font-family: ${i.view.styles["font-family"]}`),t.add(o)}return t}var Ph=class extends V{static get requires(){return[Th,Ih]}static get pluginName(){return"FontFamily"}},Mh=class extends Fn{constructor(e){super(e,_t)}};function Uh(s){return s.map(e=>FC(e)).filter(e=>e!==void 0)}var Nb={get tiny(){return{title:"Tiny",model:"tiny",view:{name:"span",classes:"text-tiny",priority:7}}},get small(){return{title:"Small",model:"small",view:{name:"span",classes:"text-small",priority:7}}},get big(){return{title:"Big",model:"big",view:{name:"span",classes:"text-big",priority:7}}},get huge(){return{title:"Huge",model:"huge",view:{name:"span",classes:"text-huge",priority:7}}}};function FC(s){if(typeof s=="number"&&(s=String(s)),typeof s=="object"&&WC(s))return Lh(s);let e=HC(s);if(e)return Lh(e);if(s==="default")return{model:void 0,title:"Default"};if(!jC(s))return OC(s)}function OC(s){return typeof s=="string"&&(s={title:s,model:`${parseFloat(s)}px`}),s.view={name:"span",styles:{"font-size":s.model}},Lh(s)}function Lh(s){return s.view&&typeof s.view!="string"&&!s.view.priority&&(s.view.priority=7),s}function HC(s){return typeof s=="string"?Nb[s]:Nb[s.model]}function WC(s){return s.title&&s.model&&s.view}function jC(s){let e;if(typeof s=="object")if(s.model)e=parseFloat(s.model);else throw new E("font-size-invalid-definition",null,s);else e=parseFloat(s);return isNaN(e)}var Vb=["x-small","x-small","small","medium","large","x-large","xx-large","xxx-large"],Rh=class extends V{static get pluginName(){return"FontSizeEditing"}constructor(e){super(e),e.config.define(_t,{options:["tiny","small","default","big","huge"],supportAllValues:!1})}init(){let e=this.editor;e.model.schema.extend("$text",{allowAttributes:_t}),e.model.schema.setAttributeProperties(_t,{isFormatting:!0,copyOnEnter:!0});let t=e.config.get("fontSize.supportAllValues"),i=Uh(this.editor.config.get("fontSize.options")).filter(n=>n.model),o=zb(_t,i);t?(this._prepareAnyValueConverters(o),this._prepareCompatibilityConverter()):e.conversion.attributeToElement(o),e.commands.add(_t,new Mh(e))}_prepareAnyValueConverters(e){let t=this.editor,i=e.model.values.filter(o=>!zc(String(o))&&!Fc(String(o)));if(i.length)throw new E("font-size-invalid-use-of-named-presets",null,{presets:i});t.conversion.for("downcast").attributeToElement({model:_t,view:(o,{writer:n})=>{if(o)return n.createAttributeElement("span",{style:"font-size:"+o},{priority:7})}}),t.conversion.for("upcast").elementToAttribute({model:{key:_t,value:o=>o.getStyle("font-size")},view:{name:"span",styles:{"font-size":/.*/}}})}_prepareCompatibilityConverter(){this.editor.conversion.for("upcast").elementToAttribute({view:{name:"font",attributes:{size:/^[+-]?\d{1,3}$/}},model:{key:_t,value:t=>{let i=t.getAttribute("size"),o=i[0]==="-"||i[0]==="+",n=parseInt(i,10);o&&(n=3+n);let r=Vb.length-1,a=Math.min(Math.max(n,0),r);return Vb[a]}}})}},Db='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M9.816 11.5 7.038 4.785 4.261 11.5h5.555zm.62 1.5H3.641l-1.666 4.028H.312l5.789-14h1.875l5.789 14h-1.663L10.436 13zm7.55 2.279.779-.779.707.707-2.265 2.265-2.193-2.265.707-.707.765.765V4.825c0-.042 0-.083.002-.123l-.77.77-.707-.707L17.207 2.5l2.265 2.265-.707.707-.782-.782c.002.043.003.089.003.135v10.454z"/></svg>',Nh=class extends V{static get pluginName(){return"FontSizeUI"}init(){let e=this.editor,t=e.t,i=this._getLocalizedOptions(),o=e.commands.get(_t),n=t("Font Size"),r=UC(i,o);e.ui.componentFactory.add(_t,a=>{let l=Fe(a);return Zt(l,r,{role:"menu",ariaLabel:n}),l.buttonView.set({label:n,icon:Db,tooltip:!0}),l.extendTemplate({attributes:{class:["ck-font-size-dropdown"]}}),l.bind("isEnabled").to(o),this.listenTo(l,"execute",c=>{e.execute(c.source.commandName,{value:c.source.commandParam}),e.editing.view.focus()}),l}),e.ui.componentFactory.add(`menuBar:${_t}`,a=>{let l=new Xe(a);l.buttonView.set({label:n,icon:Db}),l.bind("isEnabled").to(o);let c=new gt(a);for(let d of r){let h=new ut(a,l),g=new ae(a);g.bind(...Object.keys(d.model)).to(d.model),g.bind("ariaChecked").to(g,"isOn"),g.delegate("execute").to(l),g.on("execute",()=>{e.execute(d.model.commandName,{value:d.model.commandParam}),e.editing.view.focus()}),h.children.add(g),c.items.add(h)}return l.panelView.children.add(c),l})}_getLocalizedOptions(){let e=this.editor,t=e.t,i={Default:t("Default"),Tiny:t("Tiny"),Small:t("Small"),Big:t("Big"),Huge:t("Huge")};return Uh(e.config.get(_t).options).map(n=>{let r=i[n.title];return r&&r!=n.title&&(n=Object.assign({},n,{title:r})),n})}};function UC(s,e){let t=new we;for(let i of s){let o={type:"button",model:new Lt({commandName:_t,commandParam:i.model,label:i.title,class:"ck-fontsize-option",role:"menuitemradio",withText:!0})};i.view&&typeof i.view!="string"&&(i.view.styles&&o.model.set("labelStyle",`font-size:${i.view.styles["font-size"]}`),i.view.classes&&o.model.set("class",`${o.model.class} ${i.view.classes}`)),o.model.bind("isOn").to(e,"value",n=>n===i.model),t.add(o)}return t}var Vh=class extends V{static get requires(){return[Rh,Nh]}static get pluginName(){return"FontSize"}normalizeSizeOptions(e){return Uh(e)}},Dh=class extends Fn{constructor(e){super(e,gi)}},Bh=class extends V{static get pluginName(){return"FontColorEditing"}constructor(e){super(e),e.config.define(gi,{colors:[{color:"hsl(0, 0%, 0%)",label:"Black"},{color:"hsl(0, 0%, 30%)",label:"Dim grey"},{color:"hsl(0, 0%, 60%)",label:"Grey"},{color:"hsl(0, 0%, 90%)",label:"Light grey"},{color:"hsl(0, 0%, 100%)",label:"White",hasBorder:!0},{color:"hsl(0, 75%, 60%)",label:"Red"},{color:"hsl(30, 75%, 60%)",label:"Orange"},{color:"hsl(60, 75%, 60%)",label:"Yellow"},{color:"hsl(90, 75%, 60%)",label:"Light green"},{color:"hsl(120, 75%, 60%)",label:"Green"},{color:"hsl(150, 75%, 60%)",label:"Aquamarine"},{color:"hsl(180, 75%, 60%)",label:"Turquoise"},{color:"hsl(210, 75%, 60%)",label:"Light blue"},{color:"hsl(240, 75%, 60%)",label:"Blue"},{color:"hsl(270, 75%, 60%)",label:"Purple"}],columns:5}),e.conversion.for("upcast").elementToAttribute({view:{name:"span",styles:{color:/[\s\S]+/}},model:{key:gi,value:Fb("color")}}),e.conversion.for("upcast").elementToAttribute({view:{name:"font",attributes:{color:/^#?\w+$/}},model:{key:gi,value:t=>t.getAttribute("color")}}),e.conversion.for("downcast").attributeToElement({model:gi,view:Ob("color")}),e.commands.add(gi,new Dh(e)),e.model.schema.extend("$text",{allowAttributes:gi}),e.model.schema.setAttributeProperties(gi,{isFormatting:!0,copyOnEnter:!0})}},Na=class extends V{commandName;componentName;icon;dropdownLabel;columns;constructor(e,{commandName:t,componentName:i,icon:o,dropdownLabel:n}){super(e),this.commandName=t,this.componentName=i,this.icon=o,this.dropdownLabel=n,this.columns=e.config.get(`${this.componentName}.columns`)}init(){let e=this.editor,t=e.locale,i=t.t,o=e.commands.get(this.commandName),n=e.config.get(this.componentName),r=Yd(n.colors),a=$d(t,r),l=n.documentColors,c=n.colorPicker!==!1;e.ui.componentFactory.add(this.componentName,d=>{let h=Fe(d),g=!1,m=RC({dropdownView:h,colors:a.map(p=>({label:p.label,color:p.model,options:{hasBorder:p.hasBorder}})),columns:this.columns,removeButtonLabel:i("Remove color"),colorPickerLabel:i("Color picker"),documentColorsLabel:l!==0?i("Document colors"):"",documentColorsCount:l===void 0?this.columns:l,colorPickerViewConfig:c?n.colorPicker||{}:!1});return m.bind("selectedColor").to(o,"value"),h.buttonView.set({label:this.dropdownLabel,icon:this.icon,tooltip:!0}),h.extendTemplate({attributes:{class:"ck-color-ui-dropdown"}}),h.bind("isEnabled").to(o),m.on("execute",(p,b)=>{h.isOpen&&e.execute(this.commandName,{value:b.value,batch:this._undoStepBatch}),b.source!=="colorPicker"&&e.editing.view.focus(),b.source==="colorPickerSaveButton"&&(h.isOpen=!1)}),m.on("colorPicker:show",()=>{this._undoStepBatch=e.model.createBatch()}),m.on("colorPicker:cancel",()=>{this._undoStepBatch.operations.length&&(h.isOpen=!1,e.execute("undo",this._undoStepBatch)),e.editing.view.focus()}),h.on("change:isOpen",(p,b,k)=>{g||(g=!0,h.colorSelectorView.appendUI()),k&&(l!==0&&m.updateDocumentColors(e.model,this.componentName),m.updateSelectedColors(),m.showColorGridsFragment())}),Gs(h,()=>h.colorSelectorView.colorGridsFragmentView.staticColorsGrid.items.find(p=>p.isOn)),h}),e.ui.componentFactory.add(`menuBar:${this.componentName}`,d=>{let h=new Xe(d);h.buttonView.set({label:this.dropdownLabel,icon:this.icon}),h.bind("isEnabled").to(o);let g=!1,m=new En(d,{colors:a.map(p=>({label:p.label,color:p.model,options:{hasBorder:p.hasBorder}})),columns:this.columns,removeButtonLabel:i("Remove color"),colorPickerLabel:i("Color picker"),documentColorsLabel:l!==0?i("Document colors"):"",documentColorsCount:l===void 0?this.columns:l,colorPickerViewConfig:!1});return m.bind("selectedColor").to(o,"value"),m.delegate("execute").to(h),m.on("execute",(p,b)=>{e.execute(this.commandName,{value:b.value,batch:this._undoStepBatch}),e.editing.view.focus()}),h.on("change:isOpen",(p,b,k)=>{g||(g=!0,m.appendUI()),k&&(l!==0&&m.updateDocumentColors(e.model,this.componentName),m.updateSelectedColors(),m.showColorGridsFragment())}),h.panelView.children.add(m),h})}},GC='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M12.4 10.3 10 4.5l-2.4 5.8h4.8zm.5 1.2H7.1L5.7 15H4.2l5-12h1.6l5 12h-1.5L13 11.5zm3.1 7H4a1 1 0 0 1 0-2h12a1 1 0 0 1 0 2z"/></svg>',zh=class extends Na{constructor(e){let t=e.locale.t;super(e,{commandName:gi,componentName:gi,icon:GC,dropdownLabel:t("Font Color")})}static get pluginName(){return"FontColorUI"}},Fh=class extends V{static get requires(){return[Bh,zh]}static get pluginName(){return"FontColor"}},Oh=class extends Fn{constructor(e){super(e,Ni)}},Hh=class extends V{static get pluginName(){return"FontBackgroundColorEditing"}constructor(e){super(e),e.config.define(Ni,{colors:[{color:"hsl(0, 0%, 0%)",label:"Black"},{color:"hsl(0, 0%, 30%)",label:"Dim grey"},{color:"hsl(0, 0%, 60%)",label:"Grey"},{color:"hsl(0, 0%, 90%)",label:"Light grey"},{color:"hsl(0, 0%, 100%)",label:"White",hasBorder:!0},{color:"hsl(0, 75%, 60%)",label:"Red"},{color:"hsl(30, 75%, 60%)",label:"Orange"},{color:"hsl(60, 75%, 60%)",label:"Yellow"},{color:"hsl(90, 75%, 60%)",label:"Light green"},{color:"hsl(120, 75%, 60%)",label:"Green"},{color:"hsl(150, 75%, 60%)",label:"Aquamarine"},{color:"hsl(180, 75%, 60%)",label:"Turquoise"},{color:"hsl(210, 75%, 60%)",label:"Light blue"},{color:"hsl(240, 75%, 60%)",label:"Blue"},{color:"hsl(270, 75%, 60%)",label:"Purple"}],columns:5}),e.data.addStyleProcessorRules(Oc),e.conversion.for("upcast").elementToAttribute({view:{name:"span",styles:{"background-color":/[\s\S]+/}},model:{key:Ni,value:Fb("background-color")}}),e.conversion.for("downcast").attributeToElement({model:Ni,view:Ob("background-color")}),e.commands.add(Ni,new Oh(e)),e.model.schema.extend("$text",{allowAttributes:Ni}),e.model.schema.setAttributeProperties(Ni,{isFormatting:!0,copyOnEnter:!0})}},$C='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M4 2h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2zm8.38 9.262H7.62L10 5.506l2.38 5.756zm.532 1.285L14.34 16h1.426L10.804 4H9.196L4.234 16H5.66l1.428-3.453h5.824z"/></svg>',Wh=class extends Na{constructor(e){let t=e.locale.t;super(e,{commandName:Ni,componentName:Ni,icon:$C,dropdownLabel:t("Font Background Color")})}static get pluginName(){return"FontBackgroundColorUI"}},jh=class extends V{static get requires(){return[Hh,Wh]}static get pluginName(){return"FontBackgroundColor"}},Bb=class extends V{static get requires(){return[Ph,Vh,Fh,jh]}static get pluginName(){return"Font"}};var Gh=class extends ie{constructor(e){super(e),this._isEnabledBasedOnSelection=!1}refresh(){let e=this.editor.model,t=e.document,i=Se(t.selection.getSelectedBlocks());this.value=!!i&&i.is("element","paragraph"),this.isEnabled=!!i&&Wb(i,e.schema)}execute(e={}){let t=this.editor.model,i=t.document,o=e.selection||i.selection;t.canEditAt(o)&&t.change(n=>{let r=o.getSelectedBlocks();for(let a of r)!a.is("element","paragraph")&&Wb(a,t.schema)&&n.rename(a,"paragraph")})}};function Wb(s,e){return e.checkChild(s.parent,"paragraph")&&!e.isObject(s)}var $h=class extends ie{constructor(e){super(e),this._isEnabledBasedOnSelection=!1}execute(e){let t=this.editor.model,i=e.attributes,o=e.position;t.canEditAt(o)&&t.change(n=>{if(o=this._findPositionToInsertParagraph(o,n),!o)return;let r=n.createElement("paragraph");i&&t.schema.setAllowedAttributes(r,i,n),t.insertContent(r,o),n.setSelection(r,"in")})}_findPositionToInsertParagraph(e,t){let i=this.editor.model;if(i.schema.checkChild(e,"paragraph"))return e;let o=i.schema.findAllowedParent(e,"paragraph");if(!o)return null;let n=e.parent,r=i.schema.checkChild(n,"$text");return n.isEmpty||r&&e.isAtEnd?i.createPositionAfter(n):!n.isEmpty&&r&&e.isAtStart?i.createPositionBefore(n):t.split(e,o).position}},Va=class s extends V{static get pluginName(){return"Paragraph"}init(){let e=this.editor,t=e.model;e.commands.add("paragraph",new Gh(e)),e.commands.add("insertParagraph",new $h(e)),t.schema.register("paragraph",{inheritAllFrom:"$block"}),e.conversion.elementToElement({model:"paragraph",view:"p"}),e.conversion.for("upcast").elementToElement({model:(i,{writer:o})=>!s.paragraphLikeElements.has(i.name)||i.isEmpty?null:o.createElement("paragraph"),view:/.+/,converterPriority:"low"})}static paragraphLikeElements=new Set(["blockquote","dd","div","dt","h1","h2","h3","h4","h5","h6","li","p","td","th"])};var Yh=class extends ie{modelElements;constructor(e,t){super(e),this.modelElements=t}refresh(){let e=Se(this.editor.model.document.selection.getSelectedBlocks());this.value=!!e&&this.modelElements.includes(e.name)&&e.name,this.isEnabled=!!e&&this.modelElements.some(t=>jb(e,t,this.editor.model.schema))}execute(e){let t=this.editor.model,i=t.document,o=e.value;t.change(n=>{let r=Array.from(i.selection.getSelectedBlocks()).filter(a=>jb(a,o,t.schema));for(let a of r)a.is("element",o)||n.rename(a,o)})}};function jb(s,e,t){return t.checkChild(s.parent,e)&&!t.isObject(s)}var Ub="paragraph",Xh=class extends V{static get pluginName(){return"HeadingEditing"}constructor(e){super(e),e.config.define("heading",{options:[{model:"paragraph",title:"Paragraph",class:"ck-heading_paragraph"},{model:"heading1",view:"h2",title:"Heading 1",class:"ck-heading_heading1"},{model:"heading2",view:"h3",title:"Heading 2",class:"ck-heading_heading2"},{model:"heading3",view:"h4",title:"Heading 3",class:"ck-heading_heading3"}]})}static get requires(){return[Va]}init(){let e=this.editor,t=e.config.get("heading.options"),i=[];for(let o of t)o.model!=="paragraph"&&(e.model.schema.register(o.model,{inheritAllFrom:"$block"}),e.conversion.elementToElement(o),i.push(o.model));this._addDefaultH1Conversion(e),e.commands.add("heading",new Yh(e,i))}afterInit(){let e=this.editor,t=e.commands.get("enter"),i=e.config.get("heading.options");t&&this.listenTo(t,"afterExecute",(o,n)=>{let r=e.model.document.selection.getFirstPosition().parent;i.some(l=>r.is("element",l.model))&&!r.is("element",Ub)&&r.childCount===0&&n.writer.rename(r,Ub)})}_addDefaultH1Conversion(e){e.conversion.for("upcast").elementToElement({model:"heading1",view:"h1",converterPriority:Ft.low+1})}};function YC(s){let e=s.t,t={Paragraph:e("Paragraph"),"Heading 1":e("Heading 1"),"Heading 2":e("Heading 2"),"Heading 3":e("Heading 3"),"Heading 4":e("Heading 4"),"Heading 5":e("Heading 5"),"Heading 6":e("Heading 6")};return s.config.get("heading.options").map(i=>{let o=t[i.title];return o&&o!=i.title&&(i.title=o),i})}var qh=class extends V{static get pluginName(){return"HeadingUI"}init(){let e=this.editor,t=e.t,i=YC(e),o=t("Choose heading"),n=t("Heading");e.ui.componentFactory.add("heading",r=>{let a={},l=new we,c=e.commands.get("heading"),d=e.commands.get("paragraph"),h=[c];for(let m of i){let p={type:"button",model:new Lt({label:m.title,class:m.class,role:"menuitemradio",withText:!0})};m.model==="paragraph"?(p.model.bind("isOn").to(d,"value"),p.model.set("commandName","paragraph"),h.push(d)):(p.model.bind("isOn").to(c,"value",b=>b===m.model),p.model.set({commandName:"heading",commandValue:m.model})),l.add(p),a[m.model]=m.title}let g=Fe(r);return Zt(g,l,{ariaLabel:n,role:"menu"}),g.buttonView.set({ariaLabel:n,ariaLabelledBy:void 0,isOn:!1,withText:!0,tooltip:n}),g.extendTemplate({attributes:{class:["ck-heading-dropdown"]}}),g.bind("isEnabled").toMany(h,"isEnabled",(...m)=>m.some(p=>p)),g.buttonView.bind("label").to(c,"value",d,"value",(m,p)=>{let b=p?"paragraph":m;return typeof b=="boolean"||!a[b]?o:a[b]}),g.buttonView.bind("ariaLabel").to(c,"value",d,"value",(m,p)=>{let b=p?"paragraph":m;return typeof b=="boolean"||!a[b]?n:`${a[b]}, ${n}`}),this.listenTo(g,"execute",m=>{let{commandName:p,commandValue:b}=m.source;e.execute(p,b?{value:b}:void 0),e.editing.view.focus()}),g}),e.ui.componentFactory.add("menuBar:heading",r=>{let a=new Xe(r),l=e.commands.get("heading"),c=e.commands.get("paragraph"),d=[l],h=new gt(r);a.set({class:"ck-heading-dropdown"}),h.set({ariaLabel:t("Heading"),role:"menu"}),a.buttonView.set({label:t("Heading")}),a.panelView.children.add(h);for(let g of i){let m=new ut(r,a),p=new ae(r);m.children.add(p),h.items.add(m),p.set({label:g.title,role:"menuitemradio",class:g.class}),p.bind("ariaChecked").to(p,"isOn"),p.delegate("execute").to(a),p.on("execute",()=>{let b=g.model==="paragraph"?"paragraph":"heading";e.execute(b,{value:g.model}),e.editing.view.focus()}),g.model==="paragraph"?(p.bind("isOn").to(c,"value"),d.push(c)):p.bind("isOn").to(l,"value",b=>b===g.model)}return a.bind("isEnabled").toMany(d,"isEnabled",(...g)=>g.some(m=>m)),a})}},Gb=class extends V{static get requires(){return[Xh,qh]}static get pluginName(){return"Heading"}};var $b={"(":")","[":"]","{":"}"},Zh=class extends ie{constructor(e){super(e),this._isEnabledBasedOnSelection=!1}refresh(){let e=this.editor.model,t=e.document;this.isEnabled=e.schema.checkAttributeInSelection(t.selection,"mention")}execute(e){let t=this.editor.model,o=t.document.selection,n=typeof e.mention=="string"?{id:e.mention}:e.mention,r=n.id,a=e.range||o.getFirstRange();if(!t.canEditAt(a))return;let l=e.text||r,c=Xb({_text:l,id:r},n);if(e.marker.length!=1)throw new E("mentioncommand-incorrect-marker",this);if(r.charAt(0)!=e.marker)throw new E("mentioncommand-incorrect-id",this);t.change(d=>{let h=Tt(o.getAttributes()),g=new Map(h.entries());g.set("mention",c);let m=t.insertContent(d.createText(l,g),a),p=m.start.nodeBefore,b=m.end.nodeAfter,k=b&&b.is("$text")&&b.data.startsWith(" "),v=!1;if(p&&b&&p.is("$text")&&b.is("$text")){let x=p.data.slice(-1),u=x in $b,f=u&&b.data.startsWith($b[x]);v=u&&f}!v&&!k&&t.insertContent(d.createText(" ",h),a.start.getShiftedBy(l.length))})}},Qh=class extends V{static get pluginName(){return"MentionEditing"}init(){let e=this.editor,t=e.model,i=t.document;t.schema.extend("$text",{allowAttributes:"mention"}),e.conversion.for("upcast").elementToAttribute({view:{name:"span",key:"data-mention",classes:"mention"},model:{key:"mention",value:o=>qb(o)}}),e.conversion.for("downcast").attributeToElement({model:"mention",view:qC}),e.conversion.for("downcast").add(XC),i.registerPostFixer(o=>QC(o,i,t.schema)),i.registerPostFixer(o=>JC(o,i)),i.registerPostFixer(o=>KC(o,i)),e.commands.add("mention",new Zh(e))}};function Xb(s,e){return Object.assign({uid:We()},s,e||{})}function qb(s,e){let t=s.getAttribute("data-mention"),i=s.getChild(0);if(!i)return;let o={id:t,_text:i.data};return Xb(o,e)}function XC(s){s.on("attribute:mention",(e,t,i)=>{let o=t.attributeNewValue;if(!t.item.is("$textProxy")||!o)return;let n=t.range.start;(n.textNode||n.nodeAfter).data!=o._text&&i.consumable.consume(t.item,e.name)},{priority:"highest"})}function qC(s,{writer:e}){if(!s)return;let t={class:"mention","data-mention":s.id},i={id:s.uid,priority:20};return e.createAttributeElement("span",t,i)}function KC(s,e){let t=e.selection,i=t.focus;return t.isCollapsed&&t.hasAttribute("mention")&&ZC(i)?(s.removeSelectionAttribute("mention"),!0):!1}function ZC(s){let e=s.isAtStart;return s.nodeBefore&&s.nodeBefore.is("$text")||e}function QC(s,e,t){let i=e.differ.getChanges(),o=!1;for(let n of i){if(n.type=="attribute")continue;let r=n.position;if(n.name=="$text"){let a=r.textNode&&r.textNode.nextSibling;o=Ro(r.textNode,s)||o,o=Ro(a,s)||o,o=Ro(r.nodeBefore,s)||o,o=Ro(r.nodeAfter,s)||o}if(n.name!="$text"&&n.type=="insert"){let a=r.nodeAfter;for(let l of s.createRangeIn(a).getItems())o=Ro(l,s)||o}if(n.type=="insert"&&t.isInline(n.name)){let a=r.nodeAfter&&r.nodeAfter.nextSibling;o=Ro(r.nodeBefore,s)||o,o=Ro(a,s)||o}}return o}function JC(s,e){let t=e.differ.getChanges(),i=!1;for(let o of t)if(o.type==="attribute"&&o.attributeKey!="mention"){let n=o.range.start.nodeBefore,r=o.range.end.nodeAfter;for(let a of[n,r])Kb(a)&&a.getAttribute(o.attributeKey)!=o.attributeNewValue&&(s.setAttribute(o.attributeKey,o.attributeNewValue,a),i=!0)}return i}function Kb(s){if(!s||!(s.is("$text")||s.is("$textProxy"))||!s.hasAttribute("mention"))return!1;let e=s.data,i=s.getAttribute("mention")._text;return e!=i}function Ro(s,e){return Kb(s)?(e.removeAttribute("mention",s),!0):!1}var Jh=class extends So{selected;position;constructor(e){super(e),this.extendTemplate({attributes:{class:["ck-mentions"],tabindex:"-1"}})}selectFirst(){this.select(0)}selectNext(){let e=this.selected,t=this.items.getIndex(e);this.select(t+1)}selectPrevious(){let e=this.selected,t=this.items.getIndex(e);this.select(t-1)}select(e){let t=0;e>0&&e<this.items.length?t=e:e<0&&(t=this.items.length-1);let i=this.items.get(t);this.selected!==i&&(this.selected&&this.selected.removeHighlight(),i.highlight(),this.selected=i,this._isItemVisibleInScrolledArea(i)||(this.element.scrollTop=i.element.offsetTop))}executeSelected(){this.selected.fire("execute")}_isItemVisibleInScrolledArea(e){return new se(this.element).contains(new se(e.element))}},eu=class extends G{domElement;constructor(e,t){super(e),this.template=void 0,this.domElement=t,this.domElement.classList.add("ck-button"),this.set("isOn",!1),this.on("change:isOn",(i,o,n)=>{n?(this.domElement.classList.add("ck-on"),this.domElement.classList.remove("ck-off")):(this.domElement.classList.add("ck-off"),this.domElement.classList.remove("ck-on"))}),this.listenTo(this.domElement,"click",()=>{this.fire("execute")})}render(){super.render(),this.element=this.domElement}focus(){this.domElement.focus()}},tu=class extends ui{item;marker;highlight(){let e=this.children.first;e.isOn=!0}removeHighlight(){let e=this.children.first;e.isOn=!1}},Da=3,eA=[ne.arrowup,ne.arrowdown,ne.esc],tA=[ne.enter,ne.tab],iu=class extends V{_mentionsView;_mentionsConfigurations;_balloon;_items=new we;_lastRequested;_requestFeedDebounced;static get pluginName(){return"MentionUI"}static get requires(){return[Mi]}constructor(e){super(e),this._mentionsView=this._createMentionView(),this._mentionsConfigurations=new Map,this._requestFeedDebounced=oi(this._requestFeed,100),e.config.define("mention",{feeds:[]})}init(){let e=this.editor,t=e.config.get("mention.commitKeys")||tA,i=eA.concat(t);this._balloon=e.plugins.get(Mi),e.editing.view.document.on("keydown",(r,a)=>{n(a.keyCode)&&this._isUIVisible&&(a.preventDefault(),r.stop(),a.keyCode==ne.arrowdown&&this._mentionsView.selectNext(),a.keyCode==ne.arrowup&&this._mentionsView.selectPrevious(),t.includes(a.keyCode)&&this._mentionsView.executeSelected(),a.keyCode==ne.esc&&this._hideUIAndRemoveMarker())},{priority:"highest"}),To({emitter:this._mentionsView,activator:()=>this._isUIVisible,contextElements:()=>[this._balloon.view.element],callback:()=>this._hideUIAndRemoveMarker()});let o=e.config.get("mention.feeds");for(let r of o){let{feed:a,marker:l,dropdownLimit:c}=r;if(!lA(l))throw new E("mentionconfig-incorrect-marker",null,{marker:l});let d=typeof a=="function"?a.bind(this.editor):sA(a),h=r.itemRenderer,g={marker:l,feedCallback:d,itemRenderer:h,dropdownLimit:c};this._mentionsConfigurations.set(l,g)}this._setupTextWatcher(o),this.listenTo(e,"change:isReadOnly",()=>{this._hideUIAndRemoveMarker()}),this.on("requestFeed:response",(r,a)=>this._handleFeedResponse(a)),this.on("requestFeed:error",()=>this._hideUIAndRemoveMarker());function n(r){return i.includes(r)}}destroy(){super.destroy(),this._mentionsView.destroy()}get _isUIVisible(){return this._balloon.visibleView===this._mentionsView}_createMentionView(){let e=this.editor.locale,t=new Jh(e);return t.items.bindTo(this._items).using(i=>{let{item:o,marker:n}=i,{dropdownLimit:r}=this._mentionsConfigurations.get(n),a=r||this.editor.config.get("mention.dropdownLimit")||10;if(t.items.length>=a)return null;let l=new tu(e),c=this._renderItem(o,n);return c.delegate("execute").to(l),l.children.add(c),l.item=o,l.marker=n,l.on("execute",()=>{t.fire("execute",{item:o,marker:n})}),l}),t.on("execute",(i,o)=>{let n=this.editor,r=n.model,a=o.item,l=o.marker,c=n.model.markers.get("mention"),d=r.createPositionAt(r.document.selection.focus),h=r.createPositionAt(c.getStart()),g=r.createRange(h,d);this._hideUIAndRemoveMarker(),n.execute("mention",{mention:a,text:a.text,marker:l,range:g}),n.editing.view.focus()}),t}_getItemRenderer(e){let{itemRenderer:t}=this._mentionsConfigurations.get(e);return t}_requestFeed(e,t){this._lastRequested=t;let{feedCallback:i}=this._mentionsConfigurations.get(e),o=i(t);if(!(o instanceof Promise)){this.fire("requestFeed:response",{feed:o,marker:e,feedText:t});return}o.then(r=>{this._lastRequested==t?this.fire("requestFeed:response",{feed:r,marker:e,feedText:t}):this.fire("requestFeed:discarded",{feed:r,marker:e,feedText:t})}).catch(r=>{this.fire("requestFeed:error",{error:r}),de("mention-feed-callback-error",{marker:e})})}_setupTextWatcher(e){let t=this.editor,i=e.map(r=>Ce(B({},r),{pattern:Qb(r.marker,r.minimumCharacters||0)})),o=new qs(t.model,oA(i));o.on("matched",(r,a)=>{let l=Zb(i,a.text),d=t.model.document.selection.focus,h=t.model.createPositionAt(d.parent,l.position);if(rA(d)||aA(h)){this._hideUIAndRemoveMarker();return}let g=nA(l,a.text),m=l.marker.length+g.length,p=d.getShiftedBy(-m),b=d.getShiftedBy(-g.length),k=t.model.createRange(p,b);if(Kh(t)){let v=t.model.markers.get("mention");t.model.change(x=>{x.updateMarker(v,{range:k})})}else t.model.change(v=>{v.addMarker("mention",{range:k,usingOperation:!1,affectsData:!1})});this._requestFeedDebounced(l.marker,g)}),o.on("unmatched",()=>{this._hideUIAndRemoveMarker()});let n=t.commands.get("mention");return o.bind("isEnabled").to(n),o}_handleFeedResponse(e){let{feed:t,marker:i}=e;if(!Kh(this.editor))return;this._items.clear();for(let n of t){let r=typeof n!="object"?{id:n,text:n}:n;this._items.add({item:r,marker:i})}let o=this.editor.model.markers.get("mention");this._items.length?this._showOrUpdateUI(o):this._hideUIAndRemoveMarker()}_showOrUpdateUI(e){this._isUIVisible?this._balloon.updatePosition(this._getBalloonPanelPositionData(e,this._mentionsView.position)):this._balloon.add({view:this._mentionsView,position:this._getBalloonPanelPositionData(e,this._mentionsView.position),singleViewMode:!0}),this._mentionsView.position=this._balloon.view.position,this._mentionsView.selectFirst()}_hideUIAndRemoveMarker(){this._balloon.hasView(this._mentionsView)&&this._balloon.remove(this._mentionsView),Kh(this.editor)&&this.editor.model.change(e=>e.removeMarker("mention")),this._mentionsView.position=void 0}_renderItem(e,t){let i=this.editor,o,n=e.id,r=this._getItemRenderer(t);if(r){let a=r(e);typeof a!="string"?o=new eu(i.locale,a):n=a}if(!o){let a=new Z(i.locale);a.label=n,a.withText=!0,o=a}return o}_getBalloonPanelPositionData(e,t){let i=this.editor,o=i.editing,n=o.view.domConverter,r=o.mapper,a=i.locale.uiLanguageDirection;return{target:()=>{let l=e.getRange();l.start.root.rootName=="$graveyard"&&(l=i.model.document.selection.getFirstRange());let c=r.toViewRange(l);return se.getDomRangeRects(n.viewRangeToDom(c)).pop()},limiter:()=>{let l=this.editor.editing.view,d=l.document.selection.editableElement;return d?l.domConverter.mapViewToDom(d.root):null},positions:iA(t,a)}}};function iA(s,e){let t={caret_se:i=>({top:i.bottom+Da,left:i.right,name:"caret_se",config:{withArrow:!1}}),caret_ne:(i,o)=>({top:i.top-o.height-Da,left:i.right,name:"caret_ne",config:{withArrow:!1}}),caret_sw:(i,o)=>({top:i.bottom+Da,left:i.right-o.width,name:"caret_sw",config:{withArrow:!1}}),caret_nw:(i,o)=>({top:i.top-o.height-Da,left:i.right-o.width,name:"caret_nw",config:{withArrow:!1}})};return Object.prototype.hasOwnProperty.call(t,s)?[t[s]]:e!=="rtl"?[t.caret_se,t.caret_sw,t.caret_ne,t.caret_nw]:[t.caret_sw,t.caret_se,t.caret_nw,t.caret_ne]}function Zb(s,e){let t;for(let i of s){let o=e.lastIndexOf(i.marker);o>0&&!e.substring(o-1).match(i.pattern)||(!t||o>=t.position)&&(t={marker:i.marker,position:o,minimumCharacters:i.minimumCharacters,pattern:i.pattern})}return t}function Qb(s,e){let t=e==0?"*":`{${e},}`,n=`(?:^|[ ${K.features.isRegExpUnicodePropertySupported?`\\p{Ps}\\p{Pi}"'`:`\\(\\[{"'`}])([${s}])(.${t})$`;return new RegExp(n,"u")}function oA(s){return t=>{let i=Zb(s,t);if(!i)return!1;let o=0;i.position!==0&&(o=i.position-1);let n=t.substring(o);return i.pattern.test(n)}}function nA(s,e){let t=0;s.position!==0&&(t=s.position-1);let i=Qb(s.marker,0);return e.substring(t).match(i)[2]}function sA(s){return e=>s.filter(i=>(typeof i=="string"?i:String(i.id)).toLowerCase().includes(e.toLowerCase()))}function rA(s){let e=s.textNode&&s.textNode.hasAttribute("mention"),t=s.nodeBefore;return e||t&&t.is("$text")&&t.hasAttribute("mention")}function aA(s){let e=s.nodeAfter;return e&&e.is("$text")&&e.hasAttribute("mention")}function lA(s){return s&&s.length==1}function Kh(s){return s.model.markers.has("mention")}var Yb=class extends V{toMentionAttribute(e,t){return qb(e,t)}static get pluginName(){return"Mention"}static get requires(){return[Qh,iu]}};var cA='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M8.69 14.915c.053.052.173.083.36.093a.366.366 0 0 1 .345.485l-.003.01a.738.738 0 0 1-.697.497h-2.67a.374.374 0 0 1-.353-.496l.013-.038a.681.681 0 0 1 .644-.458c.197-.012.325-.043.386-.093a.28.28 0 0 0 .072-.11L9.592 4.5H6.269c-.359-.017-.609.013-.75.09-.142.078-.289.265-.442.563-.192.29-.516.464-.864.464H4.17a.43.43 0 0 1-.407-.569L4.46 3h13.08l-.62 2.043a.81.81 0 0 1-.775.574h-.114a.486.486 0 0 1-.486-.486c.001-.284-.054-.464-.167-.54-.112-.076-.367-.106-.766-.091h-3.28l-2.68 10.257c-.006.074.007.127.038.158zM3 17h8a.5.5 0 1 1 0 1H3a.5.5 0 1 1 0-1zm11.299 1.17a.75.75 0 1 1-1.06-1.06l1.414-1.415-1.415-1.414a.75.75 0 0 1 1.06-1.06l1.415 1.414 1.414-1.415a.75.75 0 1 1 1.06 1.06l-1.413 1.415 1.414 1.415a.75.75 0 0 1-1.06 1.06l-1.415-1.414-1.414 1.414z"/></svg>',Ba="removeFormat",ou=class extends V{static get pluginName(){return"RemoveFormatUI"}init(){let e=this.editor;e.ui.componentFactory.add(Ba,()=>{let t=this._createButton(Z);return t.set({tooltip:!0}),t}),e.ui.componentFactory.add(`menuBar:${Ba}`,()=>this._createButton(ae))}_createButton(e){let t=this.editor,i=t.locale,o=t.commands.get(Ba),n=new e(t.locale),r=i.t;return n.set({label:r("Remove Format"),icon:cA}),n.bind("isEnabled").to(o,"isEnabled"),this.listenTo(n,"execute",()=>{t.execute(Ba),t.editing.view.focus()}),n}},nu=class extends ie{refresh(){let e=this.editor.model;this.isEnabled=!!Se(this._getFormattingItems(e.document.selection,e.schema))}execute(){let e=this.editor.model,t=e.schema;e.change(i=>{for(let o of this._getFormattingItems(e.document.selection,t))if(o.is("selection"))for(let n of this._getFormattingAttributes(o,t))i.removeSelectionAttribute(n);else{let n=i.createRangeOn(o);for(let r of this._getFormattingAttributes(o,t))i.removeAttribute(r,n)}})}*_getFormattingItems(e,t){let i=o=>!!Se(this._getFormattingAttributes(o,t));for(let o of e.getRanges())for(let n of o.getItems())!t.isBlock(n)&&i(n)&&(yield n);for(let o of e.getSelectedBlocks())i(o)&&(yield o);i(e)&&(yield e)}*_getFormattingAttributes(e,t){for(let[i]of e.getAttributes()){let o=t.getAttributeProperties(i);o&&o.isFormatting&&(yield i)}}},su=class extends V{static get pluginName(){return"RemoveFormatEditing"}init(){let e=this.editor;e.commands.add("removeFormat",new nu(e))}},Jb=class extends V{static get requires(){return[su,ou]}static get pluginName(){return"RemoveFormat"}};var iM=new RegExp(String(/^(http(s)?:\/\/)?[\w-]+\.[\w.~:/[\]@!$&'()*+,;=%-]+/.source+/\.(jpg|jpeg|png|gif|ico|webp|JPG|JPEG|PNG|GIF|ICO|WEBP)/.source+/(\?[\w.~:/[\]@!$&'()*+,;=%-]*)?/.source+/(#[\w.~:/[\]@!$&'()*+,;=%-]*)?$/.source));var CM=new RegExp("(^|\\s)(((?:(?:(?:https?|ftp):)?\\/\\/)(?:\\S+(?::\\S*)?@)?(?:(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[1-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(((?!www\\.)|(www\\.))(?![-_])(?:[-_a-z0-9\\u00a1-\\uffff]{1,63}\\.)+(?:[a-z\\u00a1-\\uffff]{2,63})))(?::\\d{2,5})?(?:[/?#]\\S*)?)|((www.|(\\S+@))((?![-_])(?:[-_a-z0-9\\u00a1-\\uffff]{1,63}\\.))+(?:[a-z\\u00a1-\\uffff]{2,63})))$","i");var gA={},mA={},fA={},pA=[{listStyle:"disc",typeAttribute:"disc",listType:"bulleted"},{listStyle:"circle",typeAttribute:"circle",listType:"bulleted"},{listStyle:"square",typeAttribute:"square",listType:"bulleted"},{listStyle:"decimal",typeAttribute:"1",listType:"numbered"},{listStyle:"decimal-leading-zero",typeAttribute:null,listType:"numbered"},{listStyle:"lower-roman",typeAttribute:"i",listType:"numbered"},{listStyle:"upper-roman",typeAttribute:"I",listType:"numbered"},{listStyle:"lower-alpha",typeAttribute:"a",listType:"numbered"},{listStyle:"upper-alpha",typeAttribute:"A",listType:"numbered"},{listStyle:"lower-latin",typeAttribute:"a",listType:"numbered"},{listStyle:"upper-latin",typeAttribute:"A",listType:"numbered"}];for(let{listStyle:s,typeAttribute:e,listType:t}of pA)gA[s]=t,mA[s]=e,e&&(fA[e]=s);function cw(){return{baseUrl:null,breaks:!1,extensions:null,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartLists:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1}}var Hn=cw();function bA(s){Hn=s}var wA=/[&<>"']/,kA=/[&<>"']/g,vA=/[<>"']|&(?!#?\w+;)/,xA=/[<>"']|&(?!#?\w+;)/g,yA={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},ow=s=>yA[s];function qe(s,e){if(e){if(wA.test(s))return s.replace(kA,ow)}else if(vA.test(s))return s.replace(xA,ow);return s}var _A=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig;function dw(s){return s.replace(_A,(e,t)=>(t=t.toLowerCase(),t==="colon"?":":t.charAt(0)==="#"?t.charAt(1)==="x"?String.fromCharCode(parseInt(t.substring(2),16)):String.fromCharCode(+t.substring(1)):""))}var CA=/(^|[^\[])\^/g;function ye(s,e){s=s.source||s,e=e||"";let t={replace:(i,o)=>(o=o.source||o,o=o.replace(CA,"$1"),s=s.replace(i,o),t),getRegex:()=>new RegExp(s,e)};return t}var AA=/[^\w:]/g,SA=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;function nw(s,e,t){if(s){let i;try{i=decodeURIComponent(dw(t)).replace(AA,"").toLowerCase()}catch{return null}if(i.indexOf("javascript:")===0||i.indexOf("vbscript:")===0||i.indexOf("data:")===0)return null}e&&!SA.test(t)&&(t=PA(e,t));try{t=encodeURI(t).replace(/%25/g,"%")}catch{return null}return t}var Ha={},EA=/^[^:]+:\/*[^/]*$/,TA=/^([^:]+:)[\s\S]*$/,IA=/^([^:]+:\/*[^/]*)[\s\S]*$/;function PA(s,e){Ha[" "+s]||(EA.test(s)?Ha[" "+s]=s+"/":Ha[" "+s]=Wa(s,"/",!0)),s=Ha[" "+s];let t=s.indexOf(":")===-1;return e.substring(0,2)==="//"?t?e:s.replace(TA,"$1")+e:e.charAt(0)==="/"?t?e:s.replace(IA,"$1")+e:s+e}var ja={exec:function(){}};function Jt(s){let e=1,t,i;for(;e<arguments.length;e++){t=arguments[e];for(i in t)Object.prototype.hasOwnProperty.call(t,i)&&(s[i]=t[i])}return s}function sw(s,e){let t=s.replace(/\|/g,(n,r,a)=>{let l=!1,c=r;for(;--c>=0&&a[c]==="\\";)l=!l;return l?"|":" |"}),i=t.split(/ \|/),o=0;if(i[0].trim()||i.shift(),i.length>0&&!i[i.length-1].trim()&&i.pop(),i.length>e)i.splice(e);else for(;i.length<e;)i.push("");for(;o<i.length;o++)i[o]=i[o].trim().replace(/\\\|/g,"|");return i}function Wa(s,e,t){let i=s.length;if(i===0)return"";let o=0;for(;o<i;){let n=s.charAt(i-o-1);if(n===e&&!t)o++;else if(n!==e&&t)o++;else break}return s.substr(0,i-o)}function MA(s,e){if(s.indexOf(e[1])===-1)return-1;let t=s.length,i=0,o=0;for(;o<t;o++)if(s[o]==="\\")o++;else if(s[o]===e[0])i++;else if(s[o]===e[1]&&(i--,i<0))return o;return-1}function hw(s){s&&s.sanitize&&!s.silent&&console.warn("marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options")}function rw(s,e){if(e<1)return"";let t="";for(;e>1;)e&1&&(t+=s),e>>=1,s+=s;return t+s}function aw(s,e,t,i){let o=e.href,n=e.title?qe(e.title):null,r=s[1].replace(/\\([\[\]])/g,"$1");if(s[0].charAt(0)!=="!"){i.state.inLink=!0;let a={type:"link",raw:t,href:o,title:n,text:r,tokens:i.inlineTokens(r,[])};return i.state.inLink=!1,a}else return{type:"image",raw:t,href:o,title:n,text:qe(r)}}function LA(s,e){let t=s.match(/^(\s+)(?:```)/);if(t===null)return e;let i=t[1];return e.split(`
`).map(o=>{let n=o.match(/^\s+/);if(n===null)return o;let[r]=n;return r.length>=i.length?o.slice(i.length):o}).join(`
`)}var er=class{constructor(e){this.options=e||Hn}space(e){let t=this.rules.block.newline.exec(e);if(t&&t[0].length>0)return{type:"space",raw:t[0]}}code(e){let t=this.rules.block.code.exec(e);if(t){let i=t[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:t[0],codeBlockStyle:"indented",text:this.options.pedantic?i:Wa(i,`
`)}}}fences(e){let t=this.rules.block.fences.exec(e);if(t){let i=t[0],o=LA(i,t[3]||"");return{type:"code",raw:i,lang:t[2]?t[2].trim():t[2],text:o}}}heading(e){let t=this.rules.block.heading.exec(e);if(t){let i=t[2].trim();if(/#$/.test(i)){let n=Wa(i,"#");(this.options.pedantic||!n||/ $/.test(n))&&(i=n.trim())}let o={type:"heading",raw:t[0],depth:t[1].length,text:i,tokens:[]};return this.lexer.inline(o.text,o.tokens),o}}hr(e){let t=this.rules.block.hr.exec(e);if(t)return{type:"hr",raw:t[0]}}blockquote(e){let t=this.rules.block.blockquote.exec(e);if(t){let i=t[0].replace(/^ *> ?/gm,"");return{type:"blockquote",raw:t[0],tokens:this.lexer.blockTokens(i,[]),text:i}}}list(e){let t=this.rules.block.list.exec(e);if(t){let i,o,n,r,a,l,c,d,h,g,m,p,b=t[1].trim(),k=b.length>1,v={type:"list",raw:"",ordered:k,start:k?+b.slice(0,-1):"",loose:!1,items:[]};b=k?`\\d{1,9}\\${b.slice(-1)}`:`\\${b}`,this.options.pedantic&&(b=k?b:"[*+-]");let x=new RegExp(`^( {0,3}${b})((?: [^\\n]*)?(?:\\n|$))`);for(;e&&(p=!1,!(!(t=x.exec(e))||this.rules.block.hr.test(e)));){if(i=t[0],e=e.substring(i.length),d=t[2].split(`
`,1)[0],h=e.split(`
`,1)[0],this.options.pedantic?(r=2,m=d.trimLeft()):(r=t[2].search(/[^ ]/),r=r>4?1:r,m=d.slice(r),r+=t[1].length),l=!1,!d&&/^ *$/.test(h)&&(i+=h+`
`,e=e.substring(h.length+1),p=!0),!p){let f=new RegExp(`^ {0,${Math.min(3,r-1)}}(?:[*+-]|\\d{1,9}[.)])`);for(;e&&(g=e.split(`
`,1)[0],d=g,this.options.pedantic&&(d=d.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),!f.test(d));){if(d.search(/[^ ]/)>=r||!d.trim())m+=`
`+d.slice(r);else if(!l)m+=`
`+d;else break;!l&&!d.trim()&&(l=!0),i+=g+`
`,e=e.substring(g.length+1)}}v.loose||(c?v.loose=!0:/\n *\n *$/.test(i)&&(c=!0)),this.options.gfm&&(o=/^\[[ xX]\] /.exec(m),o&&(n=o[0]!=="[ ] ",m=m.replace(/^\[[ xX]\] +/,""))),v.items.push({type:"list_item",raw:i,task:!!o,checked:n,loose:!1,text:m}),v.raw+=i}v.items[v.items.length-1].raw=i.trimRight(),v.items[v.items.length-1].text=m.trimRight(),v.raw=v.raw.trimRight();let u=v.items.length;for(a=0;a<u;a++){this.lexer.state.top=!1,v.items[a].tokens=this.lexer.blockTokens(v.items[a].text,[]);let f=v.items[a].tokens.filter(y=>y.type==="space"),w=f.every(y=>{let _=y.raw.split(""),C=0;for(let A of _)if(A===`
`&&(C+=1),C>1)return!0;return!1});!v.loose&&f.length&&w&&(v.loose=!0,v.items[a].loose=!0)}return v}}html(e){let t=this.rules.block.html.exec(e);if(t){let i={type:"html",raw:t[0],pre:!this.options.sanitizer&&(t[1]==="pre"||t[1]==="script"||t[1]==="style"),text:t[0]};return this.options.sanitize&&(i.type="paragraph",i.text=this.options.sanitizer?this.options.sanitizer(t[0]):qe(t[0]),i.tokens=[],this.lexer.inline(i.text,i.tokens)),i}}def(e){let t=this.rules.block.def.exec(e);if(t)return t[3]&&(t[3]=t[3].substring(1,t[3].length-1)),{type:"def",tag:t[1].toLowerCase().replace(/\s+/g," "),raw:t[0],href:t[2],title:t[3]}}table(e){let t=this.rules.block.table.exec(e);if(t){let i={type:"table",header:sw(t[1]).map(o=>({text:o})),align:t[2].replace(/^ *|\| *$/g,"").split(/ *\| */),rows:t[3]&&t[3].trim()?t[3].replace(/\n[ \t]*$/,"").split(`
`):[]};if(i.header.length===i.align.length){i.raw=t[0];let o=i.align.length,n,r,a,l;for(n=0;n<o;n++)/^ *-+: *$/.test(i.align[n])?i.align[n]="right":/^ *:-+: *$/.test(i.align[n])?i.align[n]="center":/^ *:-+ *$/.test(i.align[n])?i.align[n]="left":i.align[n]=null;for(o=i.rows.length,n=0;n<o;n++)i.rows[n]=sw(i.rows[n],i.header.length).map(c=>({text:c}));for(o=i.header.length,r=0;r<o;r++)i.header[r].tokens=[],this.lexer.inlineTokens(i.header[r].text,i.header[r].tokens);for(o=i.rows.length,r=0;r<o;r++)for(l=i.rows[r],a=0;a<l.length;a++)l[a].tokens=[],this.lexer.inlineTokens(l[a].text,l[a].tokens);return i}}}lheading(e){let t=this.rules.block.lheading.exec(e);if(t){let i={type:"heading",raw:t[0],depth:t[2].charAt(0)==="="?1:2,text:t[1],tokens:[]};return this.lexer.inline(i.text,i.tokens),i}}paragraph(e){let t=this.rules.block.paragraph.exec(e);if(t){let i={type:"paragraph",raw:t[0],text:t[1].charAt(t[1].length-1)===`
`?t[1].slice(0,-1):t[1],tokens:[]};return this.lexer.inline(i.text,i.tokens),i}}text(e){let t=this.rules.block.text.exec(e);if(t){let i={type:"text",raw:t[0],text:t[0],tokens:[]};return this.lexer.inline(i.text,i.tokens),i}}escape(e){let t=this.rules.inline.escape.exec(e);if(t)return{type:"escape",raw:t[0],text:qe(t[1])}}tag(e){let t=this.rules.inline.tag.exec(e);if(t)return!this.lexer.state.inLink&&/^<a /i.test(t[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(t[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(t[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(t[0])&&(this.lexer.state.inRawBlock=!1),{type:this.options.sanitize?"text":"html",raw:t[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(t[0]):qe(t[0]):t[0]}}link(e){let t=this.rules.inline.link.exec(e);if(t){let i=t[2].trim();if(!this.options.pedantic&&/^</.test(i)){if(!/>$/.test(i))return;let r=Wa(i.slice(0,-1),"\\");if((i.length-r.length)%2===0)return}else{let r=MA(t[2],"()");if(r>-1){let l=(t[0].indexOf("!")===0?5:4)+t[1].length+r;t[2]=t[2].substring(0,r),t[0]=t[0].substring(0,l).trim(),t[3]=""}}let o=t[2],n="";if(this.options.pedantic){let r=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(o);r&&(o=r[1],n=r[3])}else n=t[3]?t[3].slice(1,-1):"";return o=o.trim(),/^</.test(o)&&(this.options.pedantic&&!/>$/.test(i)?o=o.slice(1):o=o.slice(1,-1)),aw(t,{href:o&&o.replace(this.rules.inline._escapes,"$1"),title:n&&n.replace(this.rules.inline._escapes,"$1")},t[0],this.lexer)}}reflink(e,t){let i;if((i=this.rules.inline.reflink.exec(e))||(i=this.rules.inline.nolink.exec(e))){let o=(i[2]||i[1]).replace(/\s+/g," ");if(o=t[o.toLowerCase()],!o||!o.href){let n=i[0].charAt(0);return{type:"text",raw:n,text:n}}return aw(i,o,i[0],this.lexer)}}emStrong(e,t,i=""){let o=this.rules.inline.emStrong.lDelim.exec(e);if(!o||o[3]&&i.match(/[\p{L}\p{N}]/u))return;let n=o[1]||o[2]||"";if(!n||n&&(i===""||this.rules.inline.punctuation.exec(i))){let r=o[0].length-1,a,l,c=r,d=0,h=o[0][0]==="*"?this.rules.inline.emStrong.rDelimAst:this.rules.inline.emStrong.rDelimUnd;for(h.lastIndex=0,t=t.slice(-1*e.length+r);(o=h.exec(t))!=null;){if(a=o[1]||o[2]||o[3]||o[4]||o[5]||o[6],!a)continue;if(l=a.length,o[3]||o[4]){c+=l;continue}else if((o[5]||o[6])&&r%3&&!((r+l)%3)){d+=l;continue}if(c-=l,c>0)continue;if(l=Math.min(l,l+c+d),Math.min(r,l)%2){let m=e.slice(1,r+o.index+l);return{type:"em",raw:e.slice(0,r+o.index+l+1),text:m,tokens:this.lexer.inlineTokens(m,[])}}let g=e.slice(2,r+o.index+l-1);return{type:"strong",raw:e.slice(0,r+o.index+l+1),text:g,tokens:this.lexer.inlineTokens(g,[])}}}}codespan(e){let t=this.rules.inline.code.exec(e);if(t){let i=t[2].replace(/\n/g," "),o=/[^ ]/.test(i),n=/^ /.test(i)&&/ $/.test(i);return o&&n&&(i=i.substring(1,i.length-1)),i=qe(i,!0),{type:"codespan",raw:t[0],text:i}}}br(e){let t=this.rules.inline.br.exec(e);if(t)return{type:"br",raw:t[0]}}del(e){let t=this.rules.inline.del.exec(e);if(t)return{type:"del",raw:t[0],text:t[2],tokens:this.lexer.inlineTokens(t[2],[])}}autolink(e,t){let i=this.rules.inline.autolink.exec(e);if(i){let o,n;return i[2]==="@"?(o=qe(this.options.mangle?t(i[1]):i[1]),n="mailto:"+o):(o=qe(i[1]),n=o),{type:"link",raw:i[0],text:o,href:n,tokens:[{type:"text",raw:o,text:o}]}}}url(e,t){let i;if(i=this.rules.inline.url.exec(e)){let o,n;if(i[2]==="@")o=qe(this.options.mangle?t(i[0]):i[0]),n="mailto:"+o;else{let r;do r=i[0],i[0]=this.rules.inline._backpedal.exec(i[0])[0];while(r!==i[0]);o=qe(i[0]),i[1]==="www."?n="http://"+o:n=o}return{type:"link",raw:i[0],text:o,href:n,tokens:[{type:"text",raw:o,text:o}]}}}inlineText(e,t){let i=this.rules.inline.text.exec(e);if(i){let o;return this.lexer.state.inRawBlock?o=this.options.sanitize?this.options.sanitizer?this.options.sanitizer(i[0]):qe(i[0]):i[0]:o=qe(this.options.smartypants?t(i[0]):i[0]),{type:"text",raw:i[0],text:o}}}},Q={newline:/^(?: *(?:\n|$))+/,code:/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,fences:/^ {0,3}(`{3,}(?=[^`\n]*\n)|~{3,})([^\n]*)\n(?:|([\s\S]*?)\n)(?: {0,3}\1[~`]* *(?=\n|$)|$)/,hr:/^ {0,3}((?:- *){3,}|(?:_ *){3,}|(?:\* *){3,})(?:\n+|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3}bull)( [^\n]+?)?(?:\n|$)/,html:"^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))",def:/^ {0,3}\[(label)\]: *(?:\n *)?<?([^\s>]+)>?(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/,table:ja,lheading:/^([^\n]+)\n {0,3}(=+|-+) *(?:\n+|$)/,_paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,text:/^[^\n]+/};Q._label=/(?!\s*\])(?:\\.|[^\[\]\\])+/;Q._title=/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/;Q.def=ye(Q.def).replace("label",Q._label).replace("title",Q._title).getRegex();Q.bullet=/(?:[*+-]|\d{1,9}[.)])/;Q.listItemStart=ye(/^( *)(bull) */).replace("bull",Q.bullet).getRegex();Q.list=ye(Q.list).replace(/bull/g,Q.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+Q.def.source+")").getRegex();Q._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul";Q._comment=/<!--(?!-?>)[\s\S]*?(?:-->|$)/;Q.html=ye(Q.html,"i").replace("comment",Q._comment).replace("tag",Q._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex();Q.paragraph=ye(Q._paragraph).replace("hr",Q.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Q._tag).getRegex();Q.blockquote=ye(Q.blockquote).replace("paragraph",Q.paragraph).getRegex();Q.normal=Jt({},Q);Q.gfm=Jt({},Q.normal,{table:"^ *([^\\n ].*\\|.*)\\n {0,3}(?:\\| *)?(:?-+:? *(?:\\| *:?-+:? *)*)(?:\\| *)?(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)"});Q.gfm.table=ye(Q.gfm.table).replace("hr",Q.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Q._tag).getRegex();Q.gfm.paragraph=ye(Q._paragraph).replace("hr",Q.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("table",Q.gfm.table).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Q._tag).getRegex();Q.pedantic=Jt({},Q.normal,{html:ye(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",Q._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:ja,paragraph:ye(Q.normal._paragraph).replace("hr",Q.hr).replace("heading",` *#{1,6} *[^
]`).replace("lheading",Q.lheading).replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").getRegex()});var $={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:ja,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(ref)\]/,nolink:/^!?\[(ref)\](?:\[\])?/,reflinkSearch:"reflink|nolink(?!\\()",emStrong:{lDelim:/^(?:\*+(?:([punct_])|[^\s*]))|^_+(?:([punct*])|([^\s_]))/,rDelimAst:/^[^_*]*?\_\_[^_*]*?\*[^_*]*?(?=\_\_)|[punct_](\*+)(?=[\s]|$)|[^punct*_\s](\*+)(?=[punct_\s]|$)|[punct_\s](\*+)(?=[^punct*_\s])|[\s](\*+)(?=[punct_])|[punct_](\*+)(?=[punct_])|[^punct*_\s](\*+)(?=[^punct*_\s])/,rDelimUnd:/^[^_*]*?\*\*[^_*]*?\_[^_*]*?(?=\*\*)|[punct*](\_+)(?=[\s]|$)|[^punct*_\s](\_+)(?=[punct*\s]|$)|[punct*\s](\_+)(?=[^punct*_\s])|[\s](\_+)(?=[punct*])|[punct*](\_+)(?=[punct*])/},code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:ja,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,punctuation:/^([\spunctuation])/};$._punctuation="!\"#$%&'()+\\-.,/:;<=>?@\\[\\]`^{|}~";$.punctuation=ye($.punctuation).replace(/punctuation/g,$._punctuation).getRegex();$.blockSkip=/\[[^\]]*?\]\([^\)]*?\)|`[^`]*?`|<[^>]*?>/g;$.escapedEmSt=/\\\*|\\_/g;$._comment=ye(Q._comment).replace("(?:-->|$)","-->").getRegex();$.emStrong.lDelim=ye($.emStrong.lDelim).replace(/punct/g,$._punctuation).getRegex();$.emStrong.rDelimAst=ye($.emStrong.rDelimAst,"g").replace(/punct/g,$._punctuation).getRegex();$.emStrong.rDelimUnd=ye($.emStrong.rDelimUnd,"g").replace(/punct/g,$._punctuation).getRegex();$._escapes=/\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/g;$._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/;$._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/;$.autolink=ye($.autolink).replace("scheme",$._scheme).replace("email",$._email).getRegex();$._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/;$.tag=ye($.tag).replace("comment",$._comment).replace("attribute",$._attribute).getRegex();$._label=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/;$._href=/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/;$._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/;$.link=ye($.link).replace("label",$._label).replace("href",$._href).replace("title",$._title).getRegex();$.reflink=ye($.reflink).replace("label",$._label).replace("ref",Q._label).getRegex();$.nolink=ye($.nolink).replace("ref",Q._label).getRegex();$.reflinkSearch=ye($.reflinkSearch,"g").replace("reflink",$.reflink).replace("nolink",$.nolink).getRegex();$.normal=Jt({},$);$.pedantic=Jt({},$.normal,{strong:{start:/^__|\*\*/,middle:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,endAst:/\*\*(?!\*)/g,endUnd:/__(?!_)/g},em:{start:/^_|\*/,middle:/^()\*(?=\S)([\s\S]*?\S)\*(?!\*)|^_(?=\S)([\s\S]*?\S)_(?!_)/,endAst:/\*(?!\*)/g,endUnd:/_(?!_)/g},link:ye(/^!?\[(label)\]\((.*?)\)/).replace("label",$._label).getRegex(),reflink:ye(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",$._label).getRegex()});$.gfm=Jt({},$.normal,{escape:ye($.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/});$.gfm.url=ye($.gfm.url,"i").replace("email",$.gfm._extended_email).getRegex();$.breaks=Jt({},$.gfm,{br:ye($.br).replace("{2,}","*").getRegex(),text:ye($.gfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()});function RA(s){return s.replace(/---/g,"\u2014").replace(/--/g,"\u2013").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1\u2018").replace(/'/g,"\u2019").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1\u201C").replace(/"/g,"\u201D").replace(/\.{3}/g,"\u2026")}function lw(s){let e="",t,i,o=s.length;for(t=0;t<o;t++)i=s.charCodeAt(t),Math.random()>.5&&(i="x"+i.toString(16)),e+="&#"+i+";";return e}var Ki=class s{constructor(e){this.tokens=[],this.tokens.links=Object.create(null),this.options=e||Hn,this.options.tokenizer=this.options.tokenizer||new er,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};let t={block:Q.normal,inline:$.normal};this.options.pedantic?(t.block=Q.pedantic,t.inline=$.pedantic):this.options.gfm&&(t.block=Q.gfm,this.options.breaks?t.inline=$.breaks:t.inline=$.gfm),this.tokenizer.rules=t}static get rules(){return{block:Q,inline:$}}static lex(e,t){return new s(t).lex(e)}static lexInline(e,t){return new s(t).inlineTokens(e)}lex(e){e=e.replace(/\r\n|\r/g,`
`).replace(/\t/g,"    "),this.blockTokens(e,this.tokens);let t;for(;t=this.inlineQueue.shift();)this.inlineTokens(t.src,t.tokens);return this.tokens}blockTokens(e,t=[]){this.options.pedantic&&(e=e.replace(/^ +$/gm,""));let i,o,n,r;for(;e;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(a=>(i=a.call({lexer:this},e,t))?(e=e.substring(i.raw.length),t.push(i),!0):!1))){if(i=this.tokenizer.space(e)){e=e.substring(i.raw.length),i.raw.length===1&&t.length>0?t[t.length-1].raw+=`
`:t.push(i);continue}if(i=this.tokenizer.code(e)){e=e.substring(i.raw.length),o=t[t.length-1],o&&(o.type==="paragraph"||o.type==="text")?(o.raw+=`
`+i.raw,o.text+=`
`+i.text,this.inlineQueue[this.inlineQueue.length-1].src=o.text):t.push(i);continue}if(i=this.tokenizer.fences(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.heading(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.hr(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.blockquote(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.list(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.html(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.def(e)){e=e.substring(i.raw.length),o=t[t.length-1],o&&(o.type==="paragraph"||o.type==="text")?(o.raw+=`
`+i.raw,o.text+=`
`+i.raw,this.inlineQueue[this.inlineQueue.length-1].src=o.text):this.tokens.links[i.tag]||(this.tokens.links[i.tag]={href:i.href,title:i.title});continue}if(i=this.tokenizer.table(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.lheading(e)){e=e.substring(i.raw.length),t.push(i);continue}if(n=e,this.options.extensions&&this.options.extensions.startBlock){let a=1/0,l=e.slice(1),c;this.options.extensions.startBlock.forEach(function(d){c=d.call({lexer:this},l),typeof c=="number"&&c>=0&&(a=Math.min(a,c))}),a<1/0&&a>=0&&(n=e.substring(0,a+1))}if(this.state.top&&(i=this.tokenizer.paragraph(n))){o=t[t.length-1],r&&o.type==="paragraph"?(o.raw+=`
`+i.raw,o.text+=`
`+i.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=o.text):t.push(i),r=n.length!==e.length,e=e.substring(i.raw.length);continue}if(i=this.tokenizer.text(e)){e=e.substring(i.raw.length),o=t[t.length-1],o&&o.type==="text"?(o.raw+=`
`+i.raw,o.text+=`
`+i.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=o.text):t.push(i);continue}if(e){let a="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(a);break}else throw new Error(a)}}return this.state.top=!0,t}inline(e,t){this.inlineQueue.push({src:e,tokens:t})}inlineTokens(e,t=[]){let i,o,n,r=e,a,l,c;if(this.tokens.links){let d=Object.keys(this.tokens.links);if(d.length>0)for(;(a=this.tokenizer.rules.inline.reflinkSearch.exec(r))!=null;)d.includes(a[0].slice(a[0].lastIndexOf("[")+1,-1))&&(r=r.slice(0,a.index)+"["+rw("a",a[0].length-2)+"]"+r.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(a=this.tokenizer.rules.inline.blockSkip.exec(r))!=null;)r=r.slice(0,a.index)+"["+rw("a",a[0].length-2)+"]"+r.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;(a=this.tokenizer.rules.inline.escapedEmSt.exec(r))!=null;)r=r.slice(0,a.index)+"++"+r.slice(this.tokenizer.rules.inline.escapedEmSt.lastIndex);for(;e;)if(l||(c=""),l=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(d=>(i=d.call({lexer:this},e,t))?(e=e.substring(i.raw.length),t.push(i),!0):!1))){if(i=this.tokenizer.escape(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.tag(e)){e=e.substring(i.raw.length),o=t[t.length-1],o&&i.type==="text"&&o.type==="text"?(o.raw+=i.raw,o.text+=i.text):t.push(i);continue}if(i=this.tokenizer.link(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.reflink(e,this.tokens.links)){e=e.substring(i.raw.length),o=t[t.length-1],o&&i.type==="text"&&o.type==="text"?(o.raw+=i.raw,o.text+=i.text):t.push(i);continue}if(i=this.tokenizer.emStrong(e,r,c)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.codespan(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.br(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.del(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.autolink(e,lw)){e=e.substring(i.raw.length),t.push(i);continue}if(!this.state.inLink&&(i=this.tokenizer.url(e,lw))){e=e.substring(i.raw.length),t.push(i);continue}if(n=e,this.options.extensions&&this.options.extensions.startInline){let d=1/0,h=e.slice(1),g;this.options.extensions.startInline.forEach(function(m){g=m.call({lexer:this},h),typeof g=="number"&&g>=0&&(d=Math.min(d,g))}),d<1/0&&d>=0&&(n=e.substring(0,d+1))}if(i=this.tokenizer.inlineText(n,RA)){e=e.substring(i.raw.length),i.raw.slice(-1)!=="_"&&(c=i.raw.slice(-1)),l=!0,o=t[t.length-1],o&&o.type==="text"?(o.raw+=i.raw,o.text+=i.text):t.push(i);continue}if(e){let d="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(d);break}else throw new Error(d)}}return t}},tr=class{constructor(e){this.options=e||Hn}code(e,t,i){let o=(t||"").match(/\S*/)[0];if(this.options.highlight){let n=this.options.highlight(e,o);n!=null&&n!==e&&(i=!0,e=n)}return e=e.replace(/\n$/,"")+`
`,o?'<pre><code class="'+this.options.langPrefix+qe(o,!0)+'">'+(i?e:qe(e,!0))+`</code></pre>
`:"<pre><code>"+(i?e:qe(e,!0))+`</code></pre>
`}blockquote(e){return`<blockquote>
`+e+`</blockquote>
`}html(e){return e}heading(e,t,i,o){return this.options.headerIds?"<h"+t+' id="'+this.options.headerPrefix+o.slug(i)+'">'+e+"</h"+t+`>
`:"<h"+t+">"+e+"</h"+t+`>
`}hr(){return this.options.xhtml?`<hr/>
`:`<hr>
`}list(e,t,i){let o=t?"ol":"ul",n=t&&i!==1?' start="'+i+'"':"";return"<"+o+n+`>
`+e+"</"+o+`>
`}listitem(e){return"<li>"+e+`</li>
`}checkbox(e){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox"'+(this.options.xhtml?" /":"")+"> "}paragraph(e){return"<p>"+e+`</p>
`}table(e,t){return t&&(t="<tbody>"+t+"</tbody>"),`<table>
<thead>
`+e+`</thead>
`+t+`</table>
`}tablerow(e){return`<tr>
`+e+`</tr>
`}tablecell(e,t){let i=t.header?"th":"td";return(t.align?"<"+i+' align="'+t.align+'">':"<"+i+">")+e+"</"+i+`>
`}strong(e){return"<strong>"+e+"</strong>"}em(e){return"<em>"+e+"</em>"}codespan(e){return"<code>"+e+"</code>"}br(){return this.options.xhtml?"<br/>":"<br>"}del(e){return"<del>"+e+"</del>"}link(e,t,i){if(e=nw(this.options.sanitize,this.options.baseUrl,e),e===null)return i;let o='<a href="'+qe(e)+'"';return t&&(o+=' title="'+t+'"'),o+=">"+i+"</a>",o}image(e,t,i){if(e=nw(this.options.sanitize,this.options.baseUrl,e),e===null)return i;let o='<img src="'+e+'" alt="'+i+'"';return t&&(o+=' title="'+t+'"'),o+=this.options.xhtml?"/>":">",o}text(e){return e}},Ua=class{strong(e){return e}em(e){return e}codespan(e){return e}del(e){return e}html(e){return e}text(e){return e}link(e,t,i){return""+i}image(e,t,i){return""+i}br(){return""}},Ga=class{constructor(){this.seen={}}serialize(e){return e.toLowerCase().trim().replace(/<[!\/a-z].*?>/ig,"").replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,./:;<=>?@[\]^`{|}~]/g,"").replace(/\s/g,"-")}getNextSafeSlug(e,t){let i=e,o=0;if(this.seen.hasOwnProperty(i)){o=this.seen[e];do o++,i=e+"-"+o;while(this.seen.hasOwnProperty(i))}return t||(this.seen[e]=o,this.seen[i]=0),i}slug(e,t={}){let i=this.serialize(e);return this.getNextSafeSlug(i,t.dryrun)}},Zi=class s{constructor(e){this.options=e||Hn,this.options.renderer=this.options.renderer||new tr,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new Ua,this.slugger=new Ga}static parse(e,t){return new s(t).parse(e)}static parseInline(e,t){return new s(t).parseInline(e)}parse(e,t=!0){let i="",o,n,r,a,l,c,d,h,g,m,p,b,k,v,x,u,f,w,y,_=e.length;for(o=0;o<_;o++){if(m=e[o],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[m.type]&&(y=this.options.extensions.renderers[m.type].call({parser:this},m),y!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(m.type))){i+=y||"";continue}switch(m.type){case"space":continue;case"hr":{i+=this.renderer.hr();continue}case"heading":{i+=this.renderer.heading(this.parseInline(m.tokens),m.depth,dw(this.parseInline(m.tokens,this.textRenderer)),this.slugger);continue}case"code":{i+=this.renderer.code(m.text,m.lang,m.escaped);continue}case"table":{for(h="",d="",a=m.header.length,n=0;n<a;n++)d+=this.renderer.tablecell(this.parseInline(m.header[n].tokens),{header:!0,align:m.align[n]});for(h+=this.renderer.tablerow(d),g="",a=m.rows.length,n=0;n<a;n++){for(c=m.rows[n],d="",l=c.length,r=0;r<l;r++)d+=this.renderer.tablecell(this.parseInline(c[r].tokens),{header:!1,align:m.align[r]});g+=this.renderer.tablerow(d)}i+=this.renderer.table(h,g);continue}case"blockquote":{g=this.parse(m.tokens),i+=this.renderer.blockquote(g);continue}case"list":{for(p=m.ordered,b=m.start,k=m.loose,a=m.items.length,g="",n=0;n<a;n++)x=m.items[n],u=x.checked,f=x.task,v="",x.task&&(w=this.renderer.checkbox(u),k?x.tokens.length>0&&x.tokens[0].type==="paragraph"?(x.tokens[0].text=w+" "+x.tokens[0].text,x.tokens[0].tokens&&x.tokens[0].tokens.length>0&&x.tokens[0].tokens[0].type==="text"&&(x.tokens[0].tokens[0].text=w+" "+x.tokens[0].tokens[0].text)):x.tokens.unshift({type:"text",text:w}):v+=w),v+=this.parse(x.tokens,k),g+=this.renderer.listitem(v,f,u);i+=this.renderer.list(g,p,b);continue}case"html":{i+=this.renderer.html(m.text);continue}case"paragraph":{i+=this.renderer.paragraph(this.parseInline(m.tokens));continue}case"text":{for(g=m.tokens?this.parseInline(m.tokens):m.text;o+1<_&&e[o+1].type==="text";)m=e[++o],g+=`
`+(m.tokens?this.parseInline(m.tokens):m.text);i+=t?this.renderer.paragraph(g):g;continue}default:{let C='Token with "'+m.type+'" type was not found.';if(this.options.silent){console.error(C);return}else throw new Error(C)}}}return i}parseInline(e,t){t=t||this.renderer;let i="",o,n,r,a=e.length;for(o=0;o<a;o++){if(n=e[o],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[n.type]&&(r=this.options.extensions.renderers[n.type].call({parser:this},n),r!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(n.type))){i+=r||"";continue}switch(n.type){case"escape":{i+=t.text(n.text);break}case"html":{i+=t.html(n.text);break}case"link":{i+=t.link(n.href,n.title,this.parseInline(n.tokens,t));break}case"image":{i+=t.image(n.href,n.title,n.text);break}case"strong":{i+=t.strong(this.parseInline(n.tokens,t));break}case"em":{i+=t.em(this.parseInline(n.tokens,t));break}case"codespan":{i+=t.codespan(n.text);break}case"br":{i+=t.br();break}case"del":{i+=t.del(this.parseInline(n.tokens,t));break}case"text":{i+=t.text(n.text);break}default:{let l='Token with "'+n.type+'" type was not found.';if(this.options.silent){console.error(l);return}else throw new Error(l)}}}return i}};function ee(s,e,t){if(typeof s>"u"||s===null)throw new Error("marked(): input parameter is undefined or null");if(typeof s!="string")throw new Error("marked(): input parameter is of type "+Object.prototype.toString.call(s)+", string expected");if(typeof e=="function"&&(t=e,e=null),e=Jt({},ee.defaults,e||{}),hw(e),t){let i=e.highlight,o;try{o=Ki.lex(s,e)}catch(a){return t(a)}let n=function(a){let l;if(!a)try{e.walkTokens&&ee.walkTokens(o,e.walkTokens),l=Zi.parse(o,e)}catch(c){a=c}return e.highlight=i,a?t(a):t(null,l)};if(!i||i.length<3||(delete e.highlight,!o.length))return n();let r=0;ee.walkTokens(o,function(a){a.type==="code"&&(r++,setTimeout(()=>{i(a.text,a.lang,function(l,c){if(l)return n(l);c!=null&&c!==a.text&&(a.text=c,a.escaped=!0),r--,r===0&&n()})},0))}),r===0&&n();return}try{let i=Ki.lex(s,e);return e.walkTokens&&ee.walkTokens(i,e.walkTokens),Zi.parse(i,e)}catch(i){if(i.message+=`
Please report this to https://github.com/markedjs/marked.`,e.silent)return"<p>An error occurred:</p><pre>"+qe(i.message+"",!0)+"</pre>";throw i}}ee.options=ee.setOptions=function(s){return Jt(ee.defaults,s),bA(ee.defaults),ee};ee.getDefaults=cw;ee.defaults=Hn;ee.use=function(...s){let e=Jt({},...s),t=ee.defaults.extensions||{renderers:{},childTokens:{}},i;s.forEach(o=>{if(o.extensions&&(i=!0,o.extensions.forEach(n=>{if(!n.name)throw new Error("extension name required");if(n.renderer){let r=t.renderers?t.renderers[n.name]:null;r?t.renderers[n.name]=function(...a){let l=n.renderer.apply(this,a);return l===!1&&(l=r.apply(this,a)),l}:t.renderers[n.name]=n.renderer}if(n.tokenizer){if(!n.level||n.level!=="block"&&n.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");t[n.level]?t[n.level].unshift(n.tokenizer):t[n.level]=[n.tokenizer],n.start&&(n.level==="block"?t.startBlock?t.startBlock.push(n.start):t.startBlock=[n.start]:n.level==="inline"&&(t.startInline?t.startInline.push(n.start):t.startInline=[n.start]))}n.childTokens&&(t.childTokens[n.name]=n.childTokens)})),o.renderer){let n=ee.defaults.renderer||new tr;for(let r in o.renderer){let a=n[r];n[r]=(...l)=>{let c=o.renderer[r].apply(n,l);return c===!1&&(c=a.apply(n,l)),c}}e.renderer=n}if(o.tokenizer){let n=ee.defaults.tokenizer||new er;for(let r in o.tokenizer){let a=n[r];n[r]=(...l)=>{let c=o.tokenizer[r].apply(n,l);return c===!1&&(c=a.apply(n,l)),c}}e.tokenizer=n}if(o.walkTokens){let n=ee.defaults.walkTokens;e.walkTokens=function(r){o.walkTokens.call(this,r),n&&n.call(this,r)}}i&&(e.extensions=t),ee.setOptions(e)})};ee.walkTokens=function(s,e){for(let t of s)switch(e.call(ee,t),t.type){case"table":{for(let i of t.header)ee.walkTokens(i.tokens,e);for(let i of t.rows)for(let o of i)ee.walkTokens(o.tokens,e);break}case"list":{ee.walkTokens(t.items,e);break}default:ee.defaults.extensions&&ee.defaults.extensions.childTokens&&ee.defaults.extensions.childTokens[t.type]?ee.defaults.extensions.childTokens[t.type].forEach(function(i){ee.walkTokens(t[i],e)}):t.tokens&&ee.walkTokens(t.tokens,e)}};ee.parseInline=function(s,e){if(typeof s>"u"||s===null)throw new Error("marked.parseInline(): input parameter is undefined or null");if(typeof s!="string")throw new Error("marked.parseInline(): input parameter is of type "+Object.prototype.toString.call(s)+", string expected");e=Jt({},ee.defaults,e||{}),hw(e);try{let t=Ki.lexInline(s,e);return e.walkTokens&&ee.walkTokens(t,e.walkTokens),Zi.parseInline(t,e)}catch(t){if(t.message+=`
Please report this to https://github.com/markedjs/marked.`,e.silent)return"<p>An error occurred:</p><pre>"+qe(t.message+"",!0)+"</pre>";throw t}};ee.Parser=Zi;ee.parser=Zi.parse;ee.Renderer=tr;ee.TextRenderer=Ua;ee.Lexer=Ki;ee.lexer=Ki.lex;ee.Tokenizer=er;ee.Slugger=Ga;ee.parse=ee;var DM=ee.options,BM=ee.setOptions,zM=ee.use,FM=ee.walkTokens,OM=ee.parseInline;var HM=Zi.parse,WM=Ki.lex;function NA(s){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)t.hasOwnProperty(i)&&(s[i]=t[i])}return s}function gu(s,e){return Array(e+1).join(s)}function VA(s){return s.replace(/^\n*/,"")}function DA(s){for(var e=s.length;e>0&&s[e-1]===`
`;)e--;return s.substring(0,e)}var BA=["ADDRESS","ARTICLE","ASIDE","AUDIO","BLOCKQUOTE","BODY","CANVAS","CENTER","DD","DIR","DIV","DL","DT","FIELDSET","FIGCAPTION","FIGURE","FOOTER","FORM","FRAMESET","H1","H2","H3","H4","H5","H6","HEADER","HGROUP","HR","HTML","ISINDEX","LI","MAIN","MENU","NAV","NOFRAMES","NOSCRIPT","OL","OUTPUT","P","PRE","SECTION","TABLE","TBODY","TD","TFOOT","TH","THEAD","TR","UL"];function fu(s){return pu(s,BA)}var mw=["AREA","BASE","BR","COL","COMMAND","EMBED","HR","IMG","INPUT","KEYGEN","LINK","META","PARAM","SOURCE","TRACK","WBR"];function fw(s){return pu(s,mw)}function zA(s){return bw(s,mw)}var pw=["A","TABLE","THEAD","TBODY","TFOOT","TH","TD","IFRAME","SCRIPT","AUDIO","VIDEO"];function FA(s){return pu(s,pw)}function OA(s){return bw(s,pw)}function pu(s,e){return e.indexOf(s.nodeName)>=0}function bw(s,e){return s.getElementsByTagName&&e.some(function(t){return s.getElementsByTagName(t).length})}var mt={};mt.paragraph={filter:"p",replacement:function(s){return`

`+s+`

`}};mt.lineBreak={filter:"br",replacement:function(s,e,t){return t.br+`
`}};mt.heading={filter:["h1","h2","h3","h4","h5","h6"],replacement:function(s,e,t){var i=Number(e.nodeName.charAt(1));if(t.headingStyle==="setext"&&i<3){var o=gu(i===1?"=":"-",s.length);return`

`+s+`
`+o+`

`}else return`

`+gu("#",i)+" "+s+`

`}};mt.blockquote={filter:"blockquote",replacement:function(s){return s=s.replace(/^\n+|\n+$/g,""),s=s.replace(/^/gm,"> "),`

`+s+`

`}};mt.list={filter:["ul","ol"],replacement:function(s,e){var t=e.parentNode;return t.nodeName==="LI"&&t.lastElementChild===e?`
`+s:`

`+s+`

`}};mt.listItem={filter:"li",replacement:function(s,e,t){s=s.replace(/^\n+/,"").replace(/\n+$/,`
`).replace(/\n/gm,`
    `);var i=t.bulletListMarker+"   ",o=e.parentNode;if(o.nodeName==="OL"){var n=o.getAttribute("start"),r=Array.prototype.indexOf.call(o.children,e);i=(n?Number(n)+r:r+1)+".  "}return i+s+(e.nextSibling&&!/\n$/.test(s)?`
`:"")}};mt.indentedCodeBlock={filter:function(s,e){return e.codeBlockStyle==="indented"&&s.nodeName==="PRE"&&s.firstChild&&s.firstChild.nodeName==="CODE"},replacement:function(s,e,t){return`

    `+e.firstChild.textContent.replace(/\n/g,`
    `)+`

`}};mt.fencedCodeBlock={filter:function(s,e){return e.codeBlockStyle==="fenced"&&s.nodeName==="PRE"&&s.firstChild&&s.firstChild.nodeName==="CODE"},replacement:function(s,e,t){for(var i=e.firstChild.getAttribute("class")||"",o=(i.match(/language-(\S+)/)||[null,""])[1],n=e.firstChild.textContent,r=t.fence.charAt(0),a=3,l=new RegExp("^"+r+"{3,}","gm"),c;c=l.exec(n);)c[0].length>=a&&(a=c[0].length+1);var d=gu(r,a);return`

`+d+o+`
`+n.replace(/\n$/,"")+`
`+d+`

`}};mt.horizontalRule={filter:"hr",replacement:function(s,e,t){return`

`+t.hr+`

`}};mt.inlineLink={filter:function(s,e){return e.linkStyle==="inlined"&&s.nodeName==="A"&&s.getAttribute("href")},replacement:function(s,e){var t=e.getAttribute("href");t&&(t=t.replace(/([()])/g,"\\$1"));var i=$a(e.getAttribute("title"));return i&&(i=' "'+i.replace(/"/g,'\\"')+'"'),"["+s+"]("+t+i+")"}};mt.referenceLink={filter:function(s,e){return e.linkStyle==="referenced"&&s.nodeName==="A"&&s.getAttribute("href")},replacement:function(s,e,t){var i=e.getAttribute("href"),o=$a(e.getAttribute("title"));o&&(o=' "'+o+'"');var n,r;switch(t.linkReferenceStyle){case"collapsed":n="["+s+"][]",r="["+s+"]: "+i+o;break;case"shortcut":n="["+s+"]",r="["+s+"]: "+i+o;break;default:var a=this.references.length+1;n="["+s+"]["+a+"]",r="["+a+"]: "+i+o}return this.references.push(r),n},references:[],append:function(s){var e="";return this.references.length&&(e=`

`+this.references.join(`
`)+`

`,this.references=[]),e}};mt.emphasis={filter:["em","i"],replacement:function(s,e,t){return s.trim()?t.emDelimiter+s+t.emDelimiter:""}};mt.strong={filter:["strong","b"],replacement:function(s,e,t){return s.trim()?t.strongDelimiter+s+t.strongDelimiter:""}};mt.code={filter:function(s){var e=s.previousSibling||s.nextSibling,t=s.parentNode.nodeName==="PRE"&&!e;return s.nodeName==="CODE"&&!t},replacement:function(s){if(!s)return"";s=s.replace(/\r?\n|\r/g," ");for(var e=/^`|^ .*?[^ ].* $|`$/.test(s)?" ":"",t="`",i=s.match(/`+/gm)||[];i.indexOf(t)!==-1;)t=t+"`";return t+e+s+e+t}};mt.image={filter:"img",replacement:function(s,e){var t=$a(e.getAttribute("alt")),i=e.getAttribute("src")||"",o=$a(e.getAttribute("title")),n=o?' "'+o+'"':"";return i?"!["+t+"]("+i+n+")":""}};function $a(s){return s?s.replace(/(\n+\s*)+/g,`
`):""}function ww(s){this.options=s,this._keep=[],this._remove=[],this.blankRule={replacement:s.blankReplacement},this.keepReplacement=s.keepReplacement,this.defaultRule={replacement:s.defaultReplacement},this.array=[];for(var e in s.rules)this.array.push(s.rules[e])}ww.prototype={add:function(s,e){this.array.unshift(e)},keep:function(s){this._keep.unshift({filter:s,replacement:this.keepReplacement})},remove:function(s){this._remove.unshift({filter:s,replacement:function(){return""}})},forNode:function(s){if(s.isBlank)return this.blankRule;var e;return(e=du(this.array,s,this.options))||(e=du(this._keep,s,this.options))||(e=du(this._remove,s,this.options))?e:this.defaultRule},forEach:function(s){for(var e=0;e<this.array.length;e++)s(this.array[e],e)}};function du(s,e,t){for(var i=0;i<s.length;i++){var o=s[i];if(HA(o,e,t))return o}}function HA(s,e,t){var i=s.filter;if(typeof i=="string"){if(i===e.nodeName.toLowerCase())return!0}else if(Array.isArray(i)){if(i.indexOf(e.nodeName.toLowerCase())>-1)return!0}else if(typeof i=="function"){if(i.call(s,e,t))return!0}else throw new TypeError("`filter` needs to be a string, array, or function")}function WA(s){var e=s.element,t=s.isBlock,i=s.isVoid,o=s.isPre||function(h){return h.nodeName==="PRE"};if(!(!e.firstChild||o(e))){for(var n=null,r=!1,a=null,l=uw(a,e,o);l!==e;){if(l.nodeType===3||l.nodeType===4){var c=l.data.replace(/[ \r\n\t]+/g," ");if((!n||/ $/.test(n.data))&&!r&&c[0]===" "&&(c=c.substr(1)),!c){l=hu(l);continue}l.data=c,n=l}else if(l.nodeType===1)t(l)||l.nodeName==="BR"?(n&&(n.data=n.data.replace(/ $/,"")),n=null,r=!1):i(l)||o(l)?(n=null,r=!0):n&&(r=!1);else{l=hu(l);continue}var d=uw(a,l,o);a=l,l=d}n&&(n.data=n.data.replace(/ $/,""),n.data||hu(n))}}function hu(s){var e=s.nextSibling||s.parentNode;return s.parentNode.removeChild(s),e}function uw(s,e,t){return s&&s.parentNode===e||t(e)?e.nextSibling||e.parentNode:e.firstChild||e.nextSibling||e.parentNode}var bu=typeof window<"u"?window:{};function jA(){var s=bu.DOMParser,e=!1;try{new s().parseFromString("","text/html")&&(e=!0)}catch{}return e}function UA(){var s=function(){};return GA()?s.prototype.parseFromString=function(e){var t=new window.ActiveXObject("htmlfile");return t.designMode="on",t.open(),t.write(e),t.close(),t}:s.prototype.parseFromString=function(e){var t=document.implementation.createHTMLDocument("");return t.open(),t.write(e),t.close(),t},s}function GA(){var s=!1;try{document.implementation.createHTMLDocument("").open()}catch{bu.ActiveXObject&&(s=!0)}return s}var $A=jA()?bu.DOMParser:UA();function YA(s,e){var t;if(typeof s=="string"){var i=XA().parseFromString('<x-turndown id="turndown-root">'+s+"</x-turndown>","text/html");t=i.getElementById("turndown-root")}else t=s.cloneNode(!0);return WA({element:t,isBlock:fu,isVoid:fw,isPre:e.preformattedCode?qA:null}),t}var uu;function XA(){return uu=uu||new $A,uu}function qA(s){return s.nodeName==="PRE"||s.nodeName==="CODE"}function KA(s,e){return s.isBlock=fu(s),s.isCode=s.nodeName==="CODE"||s.parentNode.isCode,s.isBlank=ZA(s),s.flankingWhitespace=QA(s,e),s}function ZA(s){return!fw(s)&&!FA(s)&&/^\s*$/i.test(s.textContent)&&!zA(s)&&!OA(s)}function QA(s,e){if(s.isBlock||e.preformattedCode&&s.isCode)return{leading:"",trailing:""};var t=JA(s.textContent);return t.leadingAscii&&gw("left",s,e)&&(t.leading=t.leadingNonAscii),t.trailingAscii&&gw("right",s,e)&&(t.trailing=t.trailingNonAscii),{leading:t.leading,trailing:t.trailing}}function JA(s){var e=s.match(/^(([ \t\r\n]*)(\s*))(?:(?=\S)[\s\S]*\S)?((\s*?)([ \t\r\n]*))$/);return{leading:e[1],leadingAscii:e[2],leadingNonAscii:e[3],trailing:e[4],trailingNonAscii:e[5],trailingAscii:e[6]}}function gw(s,e,t){var i,o,n;return s==="left"?(i=e.previousSibling,o=/ $/):(i=e.nextSibling,o=/^ /),i&&(i.nodeType===3?n=o.test(i.nodeValue):t.preformattedCode&&i.nodeName==="CODE"?n=!1:i.nodeType===1&&!fu(i)&&(n=o.test(i.textContent))),n}var eS=Array.prototype.reduce,tS=[[/\\/g,"\\\\"],[/\*/g,"\\*"],[/^-/g,"\\-"],[/^\+ /g,"\\+ "],[/^(=+)/g,"\\$1"],[/^(#{1,6}) /g,"\\$1 "],[/`/g,"\\`"],[/^~~~/g,"\\~~~"],[/\[/g,"\\["],[/\]/g,"\\]"],[/^>/g,"\\>"],[/_/g,"\\_"],[/^(\d+)\. /g,"$1\\. "]];function mu(s){if(!(this instanceof mu))return new mu(s);var e={rules:mt,headingStyle:"setext",hr:"* * *",bulletListMarker:"*",codeBlockStyle:"indented",fence:"```",emDelimiter:"_",strongDelimiter:"**",linkStyle:"inlined",linkReferenceStyle:"full",br:"  ",preformattedCode:!1,blankReplacement:function(t,i){return i.isBlock?`

`:""},keepReplacement:function(t,i){return i.isBlock?`

`+i.outerHTML+`

`:i.outerHTML},defaultReplacement:function(t,i){return i.isBlock?`

`+t+`

`:t}};this.options=NA({},e,s),this.rules=new ww(this.options)}mu.prototype={turndown:function(s){if(!nS(s))throw new TypeError(s+" is not a string, or an element/document/fragment node.");if(s==="")return"";var e=kw.call(this,new YA(s,this.options));return iS.call(this,e)},use:function(s){if(Array.isArray(s))for(var e=0;e<s.length;e++)this.use(s[e]);else if(typeof s=="function")s(this);else throw new TypeError("plugin must be a Function or an Array of Functions");return this},addRule:function(s,e){return this.rules.add(s,e),this},keep:function(s){return this.rules.keep(s),this},remove:function(s){return this.rules.remove(s),this},escape:function(s){return tS.reduce(function(e,t){return e.replace(t[0],t[1])},s)}};function kw(s){var e=this;return eS.call(s.childNodes,function(t,i){i=new KA(i,e.options);var o="";return i.nodeType===3?o=i.isCode?i.nodeValue:e.escape(i.nodeValue):i.nodeType===1&&(o=oS.call(e,i)),vw(t,o)},"")}function iS(s){var e=this;return this.rules.forEach(function(t){typeof t.append=="function"&&(s=vw(s,t.append(e.options)))}),s.replace(/^[\t\r\n]+/,"").replace(/[\t\r\n\s]+$/,"")}function oS(s){var e=this.rules.forNode(s),t=kw.call(this,s),i=s.flankingWhitespace;return(i.leading||i.trailing)&&(t=t.trim()),i.leading+e.replacement(t,s,this.options)+i.trailing}function vw(s,e){var t=DA(s),i=VA(e),o=Math.max(s.length-t.length,e.length-i.length),n=`

`.substring(0,o);return t+n+i}function nS(s){return s!=null&&(typeof s=="string"||s.nodeType&&(s.nodeType===1||s.nodeType===9||s.nodeType===11))}var sS=Array.prototype.indexOf,rS=Array.prototype.every,Ya={};Ya.tableCell={filter:["th","td"],replacement:function(s,e){return yw(s,e)}};Ya.tableRow={filter:"tr",replacement:function(s,e){var t="",i={left:":--",right:"--:",center:":-:"};if(xw(e))for(var o=0;o<e.childNodes.length;o++){var n="---",r=(e.childNodes[o].getAttribute("align")||"").toLowerCase();r&&(n=i[r]||n),t+=yw(n,e.childNodes[o])}return`
`+s+(t?`
`+t:"")}};Ya.table={filter:function(s){return s.nodeName==="TABLE"&&xw(s.rows[0])},replacement:function(s){return s=s.replace(`

`,`
`),`

`+s+`

`}};Ya.tableSection={filter:["thead","tbody","tfoot"],replacement:function(s){return s}};function xw(s){var e=s.parentNode;return e.nodeName==="THEAD"||e.firstChild===s&&(e.nodeName==="TABLE"||aS(e))&&rS.call(s.childNodes,function(t){return t.nodeName==="TH"})}function aS(s){var e=s.previousSibling;return s.nodeName==="TBODY"&&(!e||e.nodeName==="THEAD"&&/^\s*$/i.test(e.textContent))}function yw(s,e){var t=sS.call(e.parentNode.childNodes,e),i=" ";return t===0&&(i="| "),i+s+" |"}var eL=new RegExp(/\b(?:(?:https?|ftp):\/\/|www\.)/.source+/(?![-_])(?:[-_a-z0-9\u00a1-\uffff]{1,63}\.)+(?:[a-z\u00a1-\uffff]{2,63})/.source+/(?:[^\s<>]*)/.source,"gi");export{yg as a,pS as b,bS as c,Mk as d,KS as e,ZS as f,aE as g,lE as h,tb as i,db as j,hb as k,ub as l,gb as m,Pa as n,Dn as o,Lb as p,Bb as q,Va as r,Gb as s,Yb as t,Jb as u};
