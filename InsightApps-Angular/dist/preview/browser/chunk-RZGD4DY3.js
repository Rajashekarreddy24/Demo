import{a as X,b as Z,c as ee}from"./chunk-G765BPDB.js";import{a as te}from"./chunk-4XM7W5XW.js";import{B as K,C as U}from"./chunk-G7HRDCEB.js";import{a as Y}from"./chunk-UXQNOFNS.js";import{i as H,j as R,k as z,u as G,v as J}from"./chunk-O3MZADX2.js";import"./chunk-3CUW3WNJ.js";import{a as oe}from"./chunk-CYKCQD5B.js";import{c as j,e as $,j as W,z as A}from"./chunk-GR2TZYVC.js";import"./chunk-LOSEKLOO.js";import{Cb as s,Db as S,Eb as k,Gb as M,Hb as P,Ib as N,Ja as d,Ka as y,Kb as D,Kc as B,Ob as T,Qb as w,Sb as E,Tb as I,Xa as f,Za as u,db as C,ga as V,hc as O,ib as n,ic as F,jb as o,kb as c,ob as x,pa as v,qa as g,rb as p,sb as m,sc as q,tc as L,vb as Q}from"./chunk-CB3CSPGG.js";import"./chunk-BRV2THHE.js";import{f as ne}from"./chunk-WT5K5NLM.js";var h=ne(oe());var ie=(r,l,e)=>({itemsPerPage:r,currentPage:l,totalItems:e});function re(r,l){r&1&&(n(0,"button",18),c(1,"i",19),o())}function ae(r,l){if(r&1){let e=x();n(0,"button",20),p("click",function(){v(e);let t=m();return g(t.gridView=!1)}),c(1,"i",21),o()}}function de(r,l){if(r&1){let e=x();n(0,"button",22),p("click",function(){v(e);let t=m();return g(t.gridView=!0)}),c(1,"i",19),o()}}function le(r,l){r&1&&(n(0,"button",23),c(1,"i",21),o())}function se(r,l){r&1&&(n(0,"div"),s(1," No Saved Queries! "),o())}function ce(r,l){r&1&&(n(0,"div"),s(1," You don't have permission to view! "),o())}function me(r,l){if(r&1){let e=x();n(0,"tr")(1,"td")(2,"a",31),s(3),w(4,"slice"),o()(),n(5,"td"),s(6),o(),n(7,"td"),s(8),o(),n(9,"td")(10,"div",32)(11,"a",33),p("click",function(){let t=v(e).$implicit,i=m(3);return g(i.gotoSavedQuery(t.server_id,t.queryset_id))}),c(12,"i",34),o(),n(13,"a",35),p("click",function(){let t=v(e).$implicit,i=m(3);return g(i.deleteSavedQuery(t.queryset_id))}),c(14,"i",36),o()()()()}if(r&2){let e=l.$implicit;d(2),Q("ngbTooltip",e.queryset_name),d(),k(" ",I(4,4,e.queryset_name,0,15),""),d(3),S(e.created),d(2),S(e.modified)}}function pe(r,l){if(r&1&&(n(0,"div",25)(1,"table",28)(2,"thead",29)(3,"tr")(4,"th"),s(5,"Query"),o(),n(6,"th"),s(7,"Created at"),o(),n(8,"th"),s(9,"Last Modified"),o(),n(10,"th"),s(11,"Actions"),o()()(),n(12,"tbody"),f(13,me,15,8,"tr",30),w(14,"paginate"),o()()()),r&2){let e=m(2);d(13),u("ngForOf",E(14,1,e.savedQueryList,T(4,ie,e.itemsPerPage,e.page,e.totalItems)))}}function ue(r,l){if(r&1){let e=x();n(0,"div",38)(1,"div",39)(2,"div",40)(3,"div",26)(4,"div",41)(5,"div",42)(6,"div",43)(7,"div",44)(8,"div",45)(9,"h6",46)(10,"a",47),p("click",function(){let t=v(e).$implicit,i=m(3);return g(i.gotoSavedQuery(t.server_id,t.queryset_id))}),s(11),w(12,"slice"),o()()()()(),n(13,"div",48)(14,"div",49)(15,"a",50),c(16,"i",51),o(),n(17,"div",52)(18,"a",53),p("click",function(){let t=v(e).$implicit,i=m(3);return g(i.gotoSavedQuery(t.server_id,t.queryset_id))}),c(19,"i",54),s(20," Edit"),o(),n(21,"a",55),p("click",function(){let t=v(e).$implicit,i=m(3);return g(i.deleteSavedQuery(t.queryset_id))}),c(22,"i",56),s(23," Delete"),o()()()()()(),n(24,"div",57)(25,"div",58)(26,"div",26)(27,"div",59)(28,"span",60),s(29,"Created by "),o()(),n(30,"div",59)(31,"span",61),s(32),o()()(),n(33,"div",26)(34,"div",59)(35,"span",60),s(36,"Created on :"),o()(),n(37,"div",59)(38,"span",61),s(39),o()()(),n(40,"div",26)(41,"div",59)(42,"span",60),s(43,"Last Modified : "),o()(),n(44,"div",59)(45,"span",61),s(46),o()()()()()()()()()}if(r&2){let e=l.$implicit;d(10),Q("ngbTooltip",e.queryset_name),d(),k(" ",I(12,5,e.queryset_name,0,15),""),d(21),S(e.created_by),d(7),S(e.created),d(7),S(e.modified)}}function _e(r,l){if(r&1&&(n(0,"div",26),f(1,ue,47,9,"div",37),w(2,"paginate"),o()),r&2){let e=m(2);d(),u("ngForOf",E(2,1,e.savedQueryList,T(4,ie,e.itemsPerPage,e.page,e.totalItems)))}}function ve(r,l){if(r&1){let e=x();n(0,"div",24),f(1,pe,15,8,"div",25)(2,_e,3,8,"div",26),n(3,"pagination-controls",27),p("pageChange",function(t){v(e);let i=m();return g(i.pageChangeSavedQueries(i.page=t))}),o()()}if(r&2){let e=m();d(),C(1,e.gridView?-1:1),d(),C(2,e.gridView?2:-1)}}var Ve=(()=>{let l=class l{constructor(a,t,i){this.workbechService=a,this.route=t,this.viewTemplateService=i,this.pageNo=1,this.page=1,this.savedQueryList=[],this.gridView=!0,this.viewSavedQueries=!1,this.viewSavedQueries=this.viewTemplateService.viewCustomSql()}ngOnInit(){this.viewSavedQueries&&this.getSavedQueries()}getSavedQueries(){let a={search:this.searchName,page_no:this.pageNo};(a.search==""||a.search==null)&&delete a.search,this.workbechService.getSavedQueryList(a).subscribe({next:t=>{console.log(t),this.savedQueryList=t.sheets,this.itemsPerPage=t.items_per_page,this.totalItems=t.total_items},error:t=>{console.log(t),h.default.fire({icon:"error",title:"oops!",text:t.error.message,width:"400px"})}})}deleteSavedQuery(a){let t={queryset_id:a};this.workbechService.deleteSavedQueryMessage(t).subscribe({next:i=>{console.log(i),i&&h.default.fire({title:"Are you sure?",text:i.message,icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then(b=>{b.isConfirmed&&this.workbechService.deleteSavedQuery(a).subscribe({next:_=>{console.log(_),_&&h.default.fire({icon:"success",title:"Deleted!",text:"Query Deleted Successfully",width:"400px"}),this.getSavedQueries()},error:_=>{h.default.fire({icon:"warning",text:_.error.message,width:"300px"}),console.log(_)}})})},error:i=>{h.default.fire({icon:"warning",text:i.error.message,width:"300px"}),console.log(i)}})}pageChangeSavedQueries(a){this.pageNo=a,this.getSavedQueries()}gotoSavedQuery(a,t){let i=btoa(a.toString()),b=btoa(t.toString());this.route.navigate(["workbench/database-connection/savedQuery/"+i+"/"+b])}};l.\u0275fac=function(t){return new(t||l)(y(te),y(B),y(Y))},l.\u0275cmp=V({type:l,selectors:[["app-saved-queries"]],standalone:!0,features:[D],decls:20,vars:8,consts:[["title","Database Connections","title1","home","activeitem","Data Source"],[1,"main-container","container-fluid"],[1,"card",2,"padding","20px"],[1,"col-sm-12","col-lg-12","col-xl-12",2,"padding","0px"],[1,"d-flex","justify-content-between","px-5"],[1,"connect-txt"],[1,"card-title","mt-2"],[1,"new-data-btn","d-flex","text-align-center"],["type","button","class","btn btn-icon btn-outline-primary me-1",4,"ngIf"],["type","button","class","btn btn-icon btn-primary-light me-3",3,"click",4,"ngIf"],["type","button","class","btn btn-icon btn-primary-light me-1",3,"click",4,"ngIf"],["type","button","class","btn btn-icon btn-outline-primary me-3",4,"ngIf"],[1,"input-group"],["type","text","placeholder","Search","aria-describedby","button-addon2",1,"form-control","border-end-0",3,"ngModelChange","keyup.enter","ngModel"],["type","button","id","button-addon2",1,"btn","btn-primary","border","me-2",2,"border-radius","0px 4px 4px 0px",3,"click"],[1,"fe","fe-search"],[4,"ngIf"],["class","card-body",4,"ngIf"],["type","button",1,"btn","btn-icon","btn-outline-primary","me-1"],[1,"fa","fa-th-large"],["type","button",1,"btn","btn-icon","btn-primary-light","me-3",3,"click"],[1,"fa","fa-th-list"],["type","button",1,"btn","btn-icon","btn-primary-light","me-1",3,"click"],["type","button",1,"btn","btn-icon","btn-outline-primary","me-3"],[1,"card-body"],[1,"table-responsive",2,"height","26rem"],[1,"row"],["previousLabel","Prev","nextLabel","Next",3,"pageChange"],[1,"table","border","text-nowrap","text-md-nowrap","mb-0"],[1,"table-primary",2,"position","sticky","top","-1px","background-color","#00a5a2"],[4,"ngFor","ngForOf"],[2,"color","#05aff8",3,"ngbTooltip"],[1,"hstack","gap-2","fs-1"],["aria-label","anchor",1,"btn","btn-icon","btn-sm","btn-info-light","btn-wave","waves-effect","waves-light",3,"click"],["ngbTooltip","Edit database",1,"ri-edit-line"],["aria-label","anchor",1,"btn","btn-icon","btn-sm","btn-danger-light","btn-wave","waves-effect","waves-light",3,"click"],["ngbTooltip","Delete database",1,"ri-delete-bin-7-line"],["class","col-md-12 col-xl-3",4,"ngFor","ngForOf"],[1,"col-md-12","col-xl-3"],[1,"card","shadow-none"],[1,"card-body","card-box-shadow"],[1,"col-md-12"],[1,"row","border-bottom"],[1,"col","mb-1"],[1,"d-sm-flex","align-items-center"],[1,"ms-2","mt-sm-0","mt-2"],[1,"mb-1"],[1,"float-start",3,"click","ngbTooltip"],[1,"col-auto"],["ngbDropdown","",1,"d-flex","justify-content-end","p-1"],["data-bs-toggle","dropdown","role","button","ngbDropdownToggle","","aria-haspopup","true","aria-expanded","false",1,""],[1,"fe","fe-more-vertical","fs-18","text-body-secondary"],["ngbDropdownMenu","",1,"dropdown-menu"],["tabindex","0",1,"dropdown-item",3,"click"],[1,"fe","fe-edit","me-2","d-inline-flex"],["tabindex","0",1,"dropdown-item","btn","btn-secondary-light",3,"click"],[1,"fe","fe-trash","me-2","d-inline-flex"],[1,"col-md-12","mt-2"],[1,"p-2"],[1,"col-md-6"],[1,"fw-semibold","fs-14"],[1,"fs-14"]],template:function(t,i){t&1&&(c(0,"app-page-header",0),n(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"h4",6),s(7,"Saved Queries"),o()(),n(8,"div",7),f(9,re,2,0,"button",8)(10,ae,2,0,"button",9)(11,de,2,0,"button",10)(12,le,2,0,"button",11),n(13,"div",12)(14,"input",13),N("ngModelChange",function(_){return P(i.searchName,_)||(i.searchName=_),_}),p("keyup.enter",function(){return i.getSavedQueries()}),o(),n(15,"button",14),p("click",function(){return i.getSavedQueries()}),c(16,"i",15),o()()()(),f(17,se,2,0,"div",16)(18,ce,2,0,"div",16)(19,ve,4,2,"div",17),o()()()),t&2&&(d(9),u("ngIf",i.gridView),d(),u("ngIf",i.gridView),d(),u("ngIf",!i.gridView),d(),u("ngIf",!i.gridView),d(2),M("ngModel",i.searchName),d(3),u("ngIf",i.viewSavedQueries&&i.savedQueryList.length===0),d(),u("ngIf",!i.viewSavedQueries),d(),u("ngIf",i.viewSavedQueries))},dependencies:[U,K,L,O,F,q,ee,X,Z,J,z,R,H,G,A,j,$,W],styles:[".table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{color:#fff}a[_ngcontent-%COMP%]{cursor:pointer}.dropdown-toggle[_ngcontent-%COMP%]:after{display:none}.card-box-shadow[_ngcontent-%COMP%]{box-shadow:5px 10px 10px 5px #0000001a}"]});let r=l;return r})();export{Ve as SavedQueriesComponent};
