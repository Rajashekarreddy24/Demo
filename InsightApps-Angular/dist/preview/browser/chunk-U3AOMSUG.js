import{a as C}from"./chunk-2FZO45KB.js";import{a as te}from"./chunk-CYKCQD5B.js";import{A as $,U as H,c as A,d as p,e as z,f as O,k as G,n as B,p as Z,y as Y}from"./chunk-GR2TZYVC.js";import"./chunk-LOSEKLOO.js";import{Cb as s,Gc as M,Ic as T,Ja as r,Ka as c,Kb as R,Kc as U,Lc as j,Nb as w,Oc as N,Pa as k,Xa as x,Ya as h,Za as d,cb as F,db as g,ec as I,ga as V,gc as D,ib as t,jb as i,kb as m,ob as y,pa as f,qa as v,rb as b,sb as u,tc as L,xa as q}from"./chunk-CB3CSPGG.js";import"./chunk-BRV2THHE.js";import{f as ee}from"./chunk-WT5K5NLM.js";var _=ee(te());var P=(a,l)=>({"text-success":a,"text-danger":l});function ie(a,l){a&1&&(t(0,"div",17),s(1,"Email required"),i())}function re(a,l){a&1&&(t(0,"div",17),s(1,"Please enter a valid email address"),i())}function se(a,l){if(a&1){let e=y();t(0,"div",3)(1,"div",4)(2,"div",5)(3,"div",6)(4,"div",7)(5,"div",8)(6,"h4",9),s(7,"Forgot Password?"),i(),t(8,"p"),s(9,"Enter your email address registered on your account"),i()(),t(10,"div",10)(11,"form",11),b("ngSubmit",function(){f(e);let n=u();return v(n.submitForgotPasswordForm())}),t(12,"div",12)(13,"div",13)(14,"label",14),s(15,"Email"),t(16,"span",15),s(17,"*"),i()(),m(18,"input",16),x(19,ie,2,0,"div",17)(20,re,2,0,"div",17),i()(),t(21,"div",18)(22,"div",19)(23,"button",20),s(24," Submit"),i()(),t(25,"div",1)(26,"p",21),s(27,"Remembered your password? "),t(28,"a",22),s(29,"Sign In"),i()()()()()()()()()()()}if(a&2){let e,o,n=u();r(11),d("formGroup",n.forgotPasswordForm),r(8),g(19,(e=n.forgotPasswordForm.get("email"))!=null&&e.hasError("required")&&((e=n.forgotPasswordForm.get("email"))!=null&&e.touched)?19:-1),r(),g(20,(o=n.forgotPasswordForm.get("email"))!=null&&o.hasError("pattern")?20:-1),r(3),d("disabled",!n.forgotPasswordForm.valid)}}function oe(a,l){if(a&1&&(t(0,"div",27)(1,"div",30),m(2,"i"),s(3," Must be at least 8 characters long "),i(),t(4,"div",30),m(5,"i"),s(6," Must contain at least 1 digit "),i(),t(7,"div",30),m(8,"i"),s(9," Must contain at least 1 uppercase character "),i(),t(10,"div",30),m(11,"i"),s(12," Must contain at least 1 lowercase character "),i(),t(13,"div",30),m(14,"i"),s(15," Must contain at least 1 special character "),i()()),a&2){let e=u(2);r(),d("ngClass",w(10,P,e.minLengthValid,!e.minLengthValid)),r(),h("class",e.minLengthValid?"bi-check-square-fill":"bi-x-square"),r(2),d("ngClass",w(13,P,e.requiresDigitValid,!e.requiresDigitValid)),r(),h("class",e.requiresDigitValid?"bi-check-square-fill":"bi-x-square"),r(2),d("ngClass",w(16,P,e.requiresUppercaseValid,!e.requiresUppercaseValid)),r(),h("class",e.requiresUppercaseValid?"bi-check-square-fill":"bi-x-square"),r(2),d("ngClass",w(19,P,e.requiresLowercaseValid,!e.requiresLowercaseValid)),r(),h("class",e.requiresLowercaseValid?"bi-check-square-fill":"bi-x-square"),r(2),d("ngClass",w(22,P,e.requiresSpecialCharsValid,!e.requiresSpecialCharsValid)),r(),h("class",e.requiresSpecialCharsValid?"bi-check-square-fill":"bi-x-square")}}function ae(a,l){a&1&&(t(0,"div",17),s(1,"Password Didn't match"),i())}function ne(a,l){if(a&1){let e=y();t(0,"div",3)(1,"div",4)(2,"div",5)(3,"div",6)(4,"div",7)(5,"div",8)(6,"h4",9),s(7,"Reset Your Password?"),i(),t(8,"p"),s(9,"Reset your password here"),i()(),t(10,"div",10)(11,"form",11),b("ngSubmit",function(){f(e);let n=u();return v(n.submitResetPasswordForm())}),t(12,"div",12)(13,"div",13)(14,"label",14),s(15,"Create a Password"),t(16,"span",15),s(17,"*"),i()(),t(18,"div",23),m(19,"input",24),t(20,"button",25),b("click",function(){f(e);let n=u();return v(n.toggleVisibility())}),m(21,"i"),i(),t(22,"div",26),x(23,oe,16,25,"div",27),i()()()(),t(24,"div",12)(25,"div",13)(26,"label",14),s(27,"Confirm Password"),t(28,"span",15),s(29,"*"),i()(),t(30,"div",23),m(31,"input",28),t(32,"button",29),b("click",function(){f(e);let n=u();return v(n.toggleVisibility1())}),m(33,"i"),i()(),x(34,ae,2,0,"div",17),i()(),t(35,"div",18)(36,"div",19)(37,"button",20),s(38," Submit"),i()(),t(39,"div",1)(40,"p",21),s(41,"Remembered your password? "),t(42,"a",22),s(43,"Sign In"),i()()()()()()()()()()()}if(a&2){let e=u();r(11),d("formGroup",e.resetPasswordForm),r(8),d("type",e.showPassword?"text":"password"),r(2),F("ri-eye-",e.toggleClass," align-middle"),r(2),g(23,e.requiredValid?23:-1),r(8),d("type",e.showPassword1?"text":"password"),r(2),F("ri-eye-",e.toggleClass1," align-middle"),r(),g(34,e.confirmPasswordError?34:-1),r(3),d("disabled",!e.resetPasswordForm.valid)}}var ve=(()=>{let l=class l{constructor(o,n,S,J,K,Q,W,X){this.document=o,this.elementRef=n,this.router=S,this.formBuilder=J,this.renderer=K,this.sanitizer=Q,this.authService=W,this.activatedRoute=X,this.resetPasswordUI=!1,this.isforgotPassword=!1,this.confirmPasswordError=!1,this.showPassword=!1,this.showPassword1=!1,this.toggleClass="off-line",this.toggleClass1="off-line";let E=this.router.url;E.includes("authentication/forgot-password")?(this.isforgotPassword=!0,this.forgotPasswordForm=this.formBuilder.group({email:["",[p.required,p.pattern("^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,4}$")]]})):E.includes("authentication/reset-password")&&(this.resetPasswordUI=!0,this.resetPasswordForm=this.formBuilder.group({password:["",[p.required,p.compose([p.required,p.minLength(8),C.patternValidator(new RegExp("(?=.*[0-9])"),{requiresDigit:!0}),C.patternValidator(new RegExp("(?=.*[A-Z])"),{requiresUppercase:!0}),C.patternValidator(new RegExp("(?=.*[a-z])"),{requiresLowercase:!0}),C.patternValidator(new RegExp("(?=.*[$@^!%*?&])"),{requiresSpecialChars:!0})])]],confirmPassword:["",p.required]}))}toggleVisibility(){this.showPassword=!this.showPassword,this.toggleClass==="off-line"?this.toggleClass="line":this.toggleClass="off-line"}toggleVisibility1(){this.showPassword1=!this.showPassword1,this.toggleClass1==="off-line"?this.toggleClass1="line":this.toggleClass1="off-line"}get f(){return this.forgotPasswordForm.controls}get fv(){return this.resetPasswordForm.controls}get passwordValid(){return this.resetPasswordForm.controls.password.errors===null}get requiredValid(){return!this.resetPasswordForm.controls.password.hasError("required")}get minLengthValid(){return!this.resetPasswordForm.controls.password.hasError("minlength")}get requiresDigitValid(){return!this.resetPasswordForm.controls.password.hasError("requiresDigit")}get requiresUppercaseValid(){return!this.resetPasswordForm.controls.password.hasError("requiresUppercase")}get requiresLowercaseValid(){return!this.resetPasswordForm.controls.password.hasError("requiresLowercase")}get requiresSpecialCharsValid(){return!this.resetPasswordForm.controls.password.hasError("requiresSpecialChars")}checkConfirmPassword(){this.resetPasswordForm.value.confirmPassword===this.resetPasswordForm.value.password?this.confirmPasswordError=!1:this.confirmPasswordError=!0}ngOnInit(){this.renderer.addClass(this.document.body,"login-img"),this.renderer.addClass(this.document.body,"ltr"),this.renderer.addClass(this.document.body,"app-sidebar-mini")}ngOnDestroy(){this.renderer.removeClass(this.document.body,"login-img"),this.renderer.removeClass(this.document.body,"ltr")}submitForgotPasswordForm(){this.forgotPasswordForm.invalid||this.authService.forgotPassword(this.forgotPasswordForm.value).subscribe({next:o=>{console.log(o),(o.message="Password reset email sent")&&_.default.fire({icon:"success",title:"Reset link sent to mail ",text:"please check your mail to reset password",width:"400px"})},error:o=>{console.log(o),o&&_.default.fire({icon:"warning",title:"Oops!",text:o.message,width:"400px"})}})}submitResetPasswordForm(){this.checkConfirmPassword(),!(this.resetPasswordForm.invalid||this.confirmPasswordError)&&(this.activatedRoute.queryParams.subscribe(o=>{this.token=this.activatedRoute.snapshot.params.token}),this.authService.resetPassword(this.token,this.resetPasswordForm.value).subscribe({next:o=>{console.log(o),_.default.fire({icon:"success",title:"Congratulations!",text:"Your password changed Successfully!.Please SignIn",width:"400px"}),this.router.navigate(["authentication/login"])},error:o=>{console.log(o),_.default.fire({icon:"error",title:"OOps!",text:o.error.message,width:"400px"})}}))}};l.\u0275fac=function(n){return new(n||l)(c(I),c(q),c(U),c(Y),c(k),c(M),c(H),c(T))},l.\u0275cmp=V({type:l,selectors:[["app-forgot-password"]],standalone:!0,features:[R],decls:5,vars:2,consts:[[1,""],[1,"text-center"],["src","./assets/images/brand/insightappstext.png","alt","",1,"header-brand-img","m-0"],[1,"container-lg"],[1,"row","justify-content-center","mt-4","mx-0"],[1,"col-xl-4","col-lg-6","col-md-6","col-sm-6"],[1,"card","shadow-none"],[1,"card-body","p-sm-6"],[1,"text-center","mb-4"],[1,"mb-1"],[1,"row"],[3,"ngSubmit","formGroup"],[1,"col-sm-12"],[1,"mb-3"],[1,"mb-2","fw-500"],[1,"text-danger","ms-1"],["type","email","formControlName","email","placeholder","Enter your email",1,"form-control","ms-0"],[1,"text-danger"],[1,"col-xl-12"],[1,"d-grid","mb-3"],["type","submit",1,"btn","btn-primary",3,"disabled"],[1,"mb-0","tx-14"],["routerLink","/authentication/login",1,"tx-primary","ms-1","text-decoration-underline"],[1,"input-group","has-validation"],["type","password","placeholder","Create a Password","formControlName","password","id","signup-password","autocomplete","off",1,"form-control","ms-0","border-end-0",3,"type"],["type","button","id","button-addon2",1,"btn","btn-light",3,"click"],[1,"invalid-feedback",2,"display","block !important"],["id","validation-rules",1,"mt-3"],["type","password","placeholder","Confirm your Password","formControlName","confirmPassword","id","signup-confirmpassword","autocomplete","off",1,"form-control","ms-0","border-end-0",3,"type"],["type","button","id","button-addon21",1,"btn","btn-light",3,"click"],[1,"pwd_character",3,"ngClass"]],template:function(n,S){n&1&&(t(0,"div",0)(1,"div",1),m(2,"img",2),i()(),x(3,se,30,4,"div",3)(4,ne,44,12,"div",3)),n&2&&(r(3),g(3,S.isforgotPassword?3:-1),r(),g(4,S.resetPasswordUI?4:-1))},dependencies:[N,j,$,G,A,z,O,B,Z,L,D]});let a=l;return a})();export{ve as ForgotPasswordComponent};
